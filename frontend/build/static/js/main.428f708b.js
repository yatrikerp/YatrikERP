/*! For license information please see main.428f708b.js.LICENSE.txt */
(()=>{var e={14:e=>{e.exports=function(){return!1}},61:e=>{e.exports=function(e,t){return e<t}},143:e=>{var t=/\s/;e.exports=function(e){for(var s=e.length;s--&&t.test(e.charAt(s)););return s}},149:e=>{e.exports=function(e,t){for(var s=-1,r=null==e?0:e.length,a=Array(r);++s<r;)a[s]=t(e[s],s,e);return a}},250:(e,t,s)=>{"use strict";s.d(t,{A:()=>f});var r=s(9379);function a(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var n=0;function i(e){return"__private_"+n+++"_"+e}var o=i("toRad"),l=i("toDeg"),c=i("haversineMeters"),d=i("bearing"),u=i("lerpAngle");function h(e){return e*Math.PI/180}function m(e){return 180*e/Math.PI}function p(e,t,s,r){const n=a(this,o)[o](s-e),i=a(this,o)[o](r-t),l=Math.sin(n/2)**2+Math.cos(a(this,o)[o](e))*Math.cos(a(this,o)[o](s))*Math.sin(i/2)**2;return 6371e3*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}function x(e,t,s,r){const n=Math.sin(a(this,o)[o](r-t))*Math.cos(a(this,o)[o](s)),i=Math.cos(a(this,o)[o](e))*Math.sin(a(this,o)[o](s))-Math.sin(a(this,o)[o](e))*Math.cos(a(this,o)[o](s))*Math.cos(a(this,o)[o](r-t));return(a(this,l)[l](Math.atan2(n,i))+360)%360}function g(e,t,s){return(e+((t-e+540)%360-180)*s+360)%360}const f=new class{constructor(){Object.defineProperty(this,u,{value:g}),Object.defineProperty(this,d,{value:x}),Object.defineProperty(this,c,{value:p}),Object.defineProperty(this,l,{value:m}),Object.defineProperty(this,o,{value:h}),this.watchId=null,this.isTracking=!1,this.currentLocation=null,this.locationHistory=[],this.onLocationUpdate=null,this.trackingOptions={enableHighAccuracy:!0,timeout:2e4,maximumAge:3e4},this.highPerformance=!1,this.smoothingFactor=.25,this.smoothed=null,this.lastRaw=null,this.lastCallbackTs=0,this.minCallbackIntervalMs=800}async getCurrentLocation(){return new Promise((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{const s={latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy,timestamp:(new Date).toISOString(),speed:t.coords.speed,heading:t.coords.heading};this.currentLocation=s,e(s)},e=>{console.error("Error getting current location:",e),t(e)},this.trackingOptions):t(new Error("Geolocation is not supported by this browser"))})}startTracking(e){return navigator.geolocation?this.isTracking?(console.warn("Location tracking is already active"),!0):(this.onLocationUpdate=e,this.watchId=navigator.geolocation.watchPosition(e=>{const t=(new Date).toISOString(),s={latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy,timestamp:t,speed:"number"===typeof e.coords.speed?e.coords.speed:null,heading:"number"===typeof e.coords.heading?e.coords.heading:null};if(this.lastRaw){const e=(new Date(t)-new Date(this.lastRaw.timestamp))/1e3;if(e>.2&&e<10){const t=a(this,c)[c](this.lastRaw.latitude,this.lastRaw.longitude,s.latitude,s.longitude);null==s.speed&&(s.speed=t/e),null==s.heading&&(s.heading=a(this,d)[d](this.lastRaw.latitude,this.lastRaw.longitude,s.latitude,s.longitude))}}if(this.lastRaw=s,this.smoothed){var n,i;const e=this.smoothingFactor;this.smoothed={latitude:this.smoothed.latitude+e*(s.latitude-this.smoothed.latitude),longitude:this.smoothed.longitude+e*(s.longitude-this.smoothed.longitude),accuracy:s.accuracy,timestamp:s.timestamp,speed:null!=s.speed&&null!=this.smoothed.speed?this.smoothed.speed+e*(s.speed-this.smoothed.speed):null!==(n=s.speed)&&void 0!==n?n:this.smoothed.speed,heading:null!=s.heading&&null!=this.smoothed.heading?a(this,u)[u](this.smoothed.heading,s.heading,e):null!==(i=s.heading)&&void 0!==i?i:this.smoothed.heading}}else this.smoothed=(0,r.A)({},s);this.currentLocation=this.smoothed,this.locationHistory.push(this.smoothed),this.locationHistory.length>100&&(this.locationHistory=this.locationHistory.slice(-100));const o=Date.now();this.onLocationUpdate&&o-this.lastCallbackTs>=this.minCallbackIntervalMs&&(this.lastCallbackTs=o,this.onLocationUpdate(this.smoothed))},e=>{console.error("Location tracking error:",e),this.onLocationUpdate&&this.onLocationUpdate(null,e)},this.trackingOptions),this.isTracking=!0,console.log("Location tracking started"),!0):(console.error("Geolocation is not supported by this browser"),!1)}stopTracking(){null!==this.watchId&&(navigator.geolocation.clearWatch(this.watchId),this.watchId=null),this.isTracking=!1,this.onLocationUpdate=null,console.log("Location tracking stopped")}getTrackingStatus(){return{isTracking:this.isTracking,currentLocation:this.currentLocation,historyCount:this.locationHistory.length}}setHighPerformanceMode(e){this.highPerformance=!!e,this.trackingOptions=(0,r.A)((0,r.A)({},this.trackingOptions),{},{maximumAge:e?0:3e4,timeout:e?8e3:1e4,enableHighAccuracy:!0}),this.minCallbackIntervalMs=e?500:800}getSmoothedLocation(){return this.smoothed||this.currentLocation}async sendLocationToBackend(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/api/driver/duties";if(this.currentLocation&&e)try{const s=await fetch("".concat(t,"/").concat(e,"/location"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({lat:this.currentLocation.latitude,lng:this.currentLocation.longitude,timestamp:this.currentLocation.timestamp,speed:this.currentLocation.speed,heading:this.currentLocation.heading,accuracy:this.currentLocation.accuracy})});if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status));return await s.json()}catch(s){throw console.error("Error sending location to backend:",s),s}}}},320:e=>{e.exports=function(e,t){var s=e.length;for(e.sort(t);s--;)e[s]=e[s].value;return e}},396:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},438:(e,t,s)=>{var r=s(2622);e.exports=function(e){return r(this,e).get(e)}},516:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},539:(e,t,s)=>{var r=s(9742),a=s(7498),n=s(3279);e.exports=function(e){return e&&e.length?r(e,n,a):void 0}},579:(e,t,s)=>{"use strict";e.exports=s(1153)},614:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},620:(e,t,s)=>{var r=s(6913),a=s(4052),n=s(2761);e.exports=function(e){return"string"==typeof e||!a(e)&&n(e)&&"[object String]"==r(e)}},643:(e,t,s)=>{var r=s(7676)("toUpperCase");e.exports=r},644:e=>{e.exports=function(e){return e!==e}},705:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},715:e=>{var t="\\ud800-\\udfff",s="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",n="[^"+t+"]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+a+")"+"?",c="[\\ufe0e\\ufe0f]?",d=c+l+("(?:\\u200d(?:"+[n,i,o].join("|")+")"+c+l+")*"),u="(?:"+[n+r+"?",r,i,o,s].join("|")+")",h=RegExp(a+"(?="+a+")|"+u+d,"g");e.exports=function(e){return e.match(h)||[]}},755:(e,t,s)=>{var r=s(8895),a=s(7116);e.exports=function e(t,s,n,i,o){var l=-1,c=t.length;for(n||(n=a),o||(o=[]);++l<c;){var d=t[l];s>0&&n(d)?s>1?e(d,s-1,n,i,o):r(o,d):i||(o[o.length]=d)}return o}},793:e=>{e.exports=function(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}},797:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},801:(e,t,s)=>{var r=s(1141),a=s(6686),n=s(9841),i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(n(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var s=o.test(e);return s||l.test(e)?c(e.slice(2),s?2:8):i.test(e)?NaN:+e}},914:(e,t,s)=>{var r=s(9841);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},927:(e,t,s)=>{"use strict";t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0;var r;(r=s(5173))&&r.__esModule;t.timeoutsShape=null;t.classNamesShape=null},929:(e,t,s)=>{var r=s(3211),a=s(6571),n=s(9194),i=s(6686);e.exports=function(e,t,s){if(!i(s))return!1;var o=typeof t;return!!("number"==o?a(s)&&n(t,s.length):"string"==o&&t in s)&&r(s[t],e)}},977:(e,t,s)=>{var r=s(9096),a=s(4416);e.exports=function(e,t){return e&&e.length?a(e,r(t,2)):[]}},1069:(e,t,s)=>{var r=s(8541);e.exports=function(e){return null==e?"":r(e)}},1141:(e,t,s)=>{var r=s(143),a=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(a,""):e}},1143:(e,t,s)=>{var r=s(3028)(Object.keys,Object);e.exports=r},1153:(e,t,s)=>{"use strict";var r=s(5043),a=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,s){var r,n={},c=null,d=null;for(r in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===n[r]&&(n[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:d,props:n,_owner:o.current}}t.Fragment=n,t.jsx=c,t.jsxs=c},1159:()=>{},1170:e=>{e.exports=function(e,t,s){switch(s.length){case 0:return e.call(t);case 1:return e.call(t,s[0]);case 2:return e.call(t,s[0],s[1]);case 3:return e.call(t,s[0],s[1],s[2])}return e.apply(t,s)}},1268:(e,t,s)=>{var r=s(5428),a=s(7574),n=s(6832),i=n&&n.isTypedArray,o=i?a(i):r;e.exports=o},1310:e=>{e.exports=function(e,t){return function(s){return null!=s&&(s[e]===t&&(void 0!==t||e in Object(s)))}}},1325:(e,t,s)=>{"use strict";var r=s(4994);t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,a.default)(e,t)||("string"===typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var a=r(s(8180));e.exports=t.default},1340:(e,t,s)=>{var r=s(3211);e.exports=function(e,t){for(var s=e.length;s--;)if(r(e[s][0],t))return s;return-1}},1360:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1497:(e,t,s)=>{"use strict";var r=s(3218);function a(){}function n(){}n.resetWarningCache=a,e.exports=function(){function e(e,t,s,a,n,i){if(i!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:n,resetWarningCache:a};return s.PropTypes=s,s}},1558:e=>{e.exports=function(e,t,s){for(var r=-1,a=null==e?0:e.length;++r<a;)if(s(t,e[r]))return!0;return!1}},1629:(e,t,s)=>{var r=s(6913),a=s(6686);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1665:(e,t,s)=>{"use strict";t.__esModule=!0,t.default=void 0;var r=o(s(5173)),a=o(s(5043)),n=s(5484),i=s(8377);function o(e){return e&&e.__esModule?e:{default:e}}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},l.apply(this,arguments)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var d=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},u=function(e){var t,s;function r(t,s){var r,a=(r=e.call(this,t,s)||this).handleExited.bind(c(c(r)));return r.state={handleExited:a,firstRender:!0},r}s=e,(t=r).prototype=Object.create(s.prototype),t.prototype.constructor=t,t.__proto__=s;var n=r.prototype;return n.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},n.componentDidMount=function(){this.appeared=!0,this.mounted=!0},n.componentWillUnmount=function(){this.mounted=!1},r.getDerivedStateFromProps=function(e,t){var s=t.children,r=t.handleExited;return{children:t.firstRender?(0,i.getInitialChildMapping)(e,r):(0,i.getNextChildMapping)(e,s,r),firstRender:!1}},n.handleExited=function(e,t){var s=(0,i.getChildMapping)(this.props.children);e.key in s||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState(function(t){var s=l({},t.children);return delete s[e.key],{children:s}}))},n.render=function(){var e=this.props,t=e.component,s=e.childFactory,r=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,["component","childFactory"]),n=d(this.state.children).map(s);return delete r.appear,delete r.enter,delete r.exit,null===t?n:a.default.createElement(t,r,n)},r}(a.default.Component);u.childContextTypes={transitionGroup:r.default.object.isRequired},u.propTypes={},u.defaultProps={component:"div",childFactory:function(e){return e}};var h=(0,n.polyfill)(u);t.default=h,e.exports=t.default},1680:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},1714:(e,t,s)=>{var r=s(1340);e.exports=function(e,t){var s=this.__data__,a=r(s,e);return a<0?(++this.size,s.push([e,t])):s[a][1]=t,this}},1733:(e,t,s)=>{var r=s(1775),a=s(4664),n=s(9096);e.exports=function(e,t){var s={};return t=n(t,3),a(e,function(e,a,n){r(s,a,t(e,a,n))}),s}},1775:(e,t,s)=>{var r=s(5654);e.exports=function(e,t,s){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[t]=s}},1796:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=s(7821),n=(r=a)&&r.__esModule?r:{default:r};t.default=function(e,t,s){switch(e.type){case"LengthValue":case"AngleValue":case"TimeValue":case"FrequencyValue":case"ResolutionValue":return function(e,t,s){t.type===e.type&&(t={type:e.type,value:(0,n.default)(t.value,t.unit,e.unit,s),unit:e.unit});return{left:e,right:t}}(e,t,s);default:return{left:e,right:t}}},e.exports=t.default},1884:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},1946:(e,t,s)=>{var r=s(1340);e.exports=function(e){return r(this.__data__,e)>-1}},2024:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2054:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2070:(e,t,s)=>{var r=s(7937)(s(6552),"Set");e.exports=r},2074:e=>{e.exports=function(e){var t=-1,s=Array(e.size);return e.forEach(function(e){s[++t]=e}),s}},2104:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>Se});var r={};s.r(r),s.d(r,{Decoder:()=>ye,Encoder:()=>ge,PacketType:()=>xe,protocol:()=>pe});const a=Object.create(null);a.open="0",a.close="1",a.ping="2",a.pong="3",a.message="4",a.upgrade="5",a.noop="6";const n=Object.create(null);Object.keys(a).forEach(e=>{n[a[e]]=e});const i={type:"error",data:"parser error"},o="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),l="function"===typeof ArrayBuffer,c=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,d=(e,t,s)=>{let{type:r,data:n}=e;return o&&n instanceof Blob?t?s(n):u(n,s):l&&(n instanceof ArrayBuffer||c(n))?t?s(n):u(new Blob([n]),s):s(a[r]+(n||""))},u=(e,t)=>{const s=new FileReader;return s.onload=function(){const e=s.result.split(",")[1];t("b"+(e||""))},s.readAsDataURL(e)};function h(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let m;const p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let _e=0;_e<64;_e++)x[p.charCodeAt(_e)]=_e;const g="function"===typeof ArrayBuffer,f=(e,t)=>{if("string"!==typeof e)return{type:"message",data:b(e,t)};const s=e.charAt(0);if("b"===s)return{type:"message",data:y(e.substring(1),t)};return n[s]?e.length>1?{type:n[s],data:e.substring(1)}:{type:n[s]}:i},y=(e,t)=>{if(g){const s=(e=>{let t,s,r,a,n,i=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);const c=new ArrayBuffer(i),d=new Uint8Array(c);for(t=0;t<o;t+=4)s=x[e.charCodeAt(t)],r=x[e.charCodeAt(t+1)],a=x[e.charCodeAt(t+2)],n=x[e.charCodeAt(t+3)],d[l++]=s<<2|r>>4,d[l++]=(15&r)<<4|a>>2,d[l++]=(3&a)<<6|63&n;return c})(e);return b(s,t)}return{base64:!0,data:e}},b=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,v=String.fromCharCode(30);function j(){return new TransformStream({transform(e,t){!function(e,t){o&&e.data instanceof Blob?e.data.arrayBuffer().then(h).then(t):l&&(e.data instanceof ArrayBuffer||c(e.data))?t(h(e.data)):d(e,!1,e=>{m||(m=new TextEncoder),t(m.encode(e))})}(e,s=>{const r=s.length;let a;if(r<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,r);else if(r<65536){a=new Uint8Array(3);const e=new DataView(a.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{a=new Uint8Array(9);const e=new DataView(a.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}e.data&&"string"!==typeof e.data&&(a[0]|=128),t.enqueue(a),t.enqueue(s)})}})}let N;function w(e){return e.reduce((e,t)=>e+t.length,0)}function k(e,t){if(e[0].length===t)return e.shift();const s=new Uint8Array(t);let r=0;for(let a=0;a<t;a++)s[a]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),s}function A(e){if(e)return function(e){for(var t in A.prototype)e[t]=A.prototype[t];return e}(e)}A.prototype.on=A.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},A.prototype.once=function(e,t){function s(){this.off(e,s),t.apply(this,arguments)}return s.fn=t,this.on(e,s),this},A.prototype.off=A.prototype.removeListener=A.prototype.removeAllListeners=A.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a=0;a<r.length;a++)if((s=r[a])===t||s.fn===t){r.splice(a,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},A.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),s=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(s){r=0;for(var a=(s=s.slice(0)).length;r<a;++r)s[r].apply(this,t)}return this},A.prototype.emitReserved=A.prototype.emit,A.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},A.prototype.hasListeners=function(e){return!!this.listeners(e).length};const S="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),C="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function _(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return s.reduce((t,s)=>(e.hasOwnProperty(s)&&(t[s]=e[s]),t),{})}const T=C.setTimeout,P=C.clearTimeout;function E(e,t){t.useNativeTimers?(e.setTimeoutFn=T.bind(C),e.clearTimeoutFn=P.bind(C)):(e.setTimeoutFn=C.setTimeout.bind(C),e.clearTimeoutFn=C.clearTimeout.bind(C))}function D(e){return"string"===typeof e?function(e){let t=0,s=0;for(let r=0,a=e.length;r<a;r++)t=e.charCodeAt(r),t<128?s+=1:t<2048?s+=2:t<55296||t>=57344?s+=3:(r++,s+=4);return s}(e):Math.ceil(1.33*(e.byteLength||e.size))}function M(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class O extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class R extends A{constructor(e){super(),this.writable=!1,E(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,s){return super.emitReserved("error",new O(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=f(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let s in e)e.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t}(e);return t.length?"?"+t:""}}class I extends R{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const s=e.split(v),r=[];for(let a=0;a<s.length;a++){const e=f(s[a],t);if(r.push(e),"error"===e.type)break}return r})(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const s=e.length,r=new Array(s);let a=0;e.forEach((e,n)=>{d(e,!1,e=>{r[n]=e,++a===s&&t(r.join(v))})})})(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=M()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let L=!1;try{L="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(Ce){}const F=L;function B(){}class z extends I{constructor(e){if(super(e),"undefined"!==typeof location){const t="https:"===location.protocol;let s=location.port;s||(s=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class U extends A{constructor(e,t,s){super(),this.createRequest=e,E(this,s),this._opts=s,this._method=s.method||"GET",this._uri=t,this._data=void 0!==s.data?s.data:null,this._create()}_create(){var e;const t=_(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(t);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&s.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(r){}if("POST"===this._method)try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(r){}try{s.setRequestHeader("Accept","*/*")}catch(r){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var e;3===s.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(s.getResponseHeader("set-cookie"))),4===s.readyState&&(200===s.status||1223===s.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"===typeof s.status?s.status:0)},0))},s.send(this._data)}catch(r){return void this.setTimeoutFn(()=>{this._onError(r)},0)}"undefined"!==typeof document&&(this._index=U.requestsCount++,U.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if("undefined"!==typeof this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=B,e)try{this._xhr.abort()}catch(t){}"undefined"!==typeof document&&delete U.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(U.requestsCount=0,U.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",V);else if("function"===typeof addEventListener){addEventListener("onpagehide"in C?"pagehide":"unload",V,!1)}function V(){for(let e in U.requests)U.requests.hasOwnProperty(e)&&U.requests[e].abort()}const K=function(){const e=W({xdomain:!1});return e&&null!==e.responseType}();function W(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||F))return new XMLHttpRequest}catch(s){}if(!t)try{return new(C[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(s){}}const H="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class q extends R{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,s=H?{}:_(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,s)}catch(Ce){return this.emitReserved("error",Ce)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],r=t===e.length-1;d(s,this.supportsBinary,e=>{try{this.doWrite(s,e)}catch(t){}r&&S(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){"undefined"!==typeof this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=M()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const G=C.WebSocket||C.MozWebSocket;const Y={websocket:class extends q{createSocket(e,t,s){return H?new G(e,t,s):t?new G(e,t):new G(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends R{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(Ce){return this.emitReserved("error",Ce)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=function(e,t){N||(N=new TextDecoder);const s=[];let r=0,a=-1,n=!1;return new TransformStream({transform(o,l){for(s.push(o);;){if(0===r){if(w(s)<1)break;const e=k(s,1);n=128===(128&e[0]),a=127&e[0],r=a<126?3:126===a?1:2}else if(1===r){if(w(s)<2)break;const e=k(s,2);a=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),r=3}else if(2===r){if(w(s)<8)break;const e=k(s,8),t=new DataView(e.buffer,e.byteOffset,e.length),n=t.getUint32(0);if(n>Math.pow(2,21)-1){l.enqueue(i);break}a=n*Math.pow(2,32)+t.getUint32(4),r=3}else{if(w(s)<a)break;const e=k(s,a);l.enqueue(f(n?e:N.decode(e),t)),r=0}if(0===a||a>e){l.enqueue(i);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(t).getReader(),r=j();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const a=()=>{s.read().then(e=>{let{done:t,value:s}=e;t||(this.onPacket(s),a())}).catch(e=>{})};a();const n={type:"open"};this.query.sid&&(n.data='{"sid":"'.concat(this.query.sid,'"}')),this._writer.write(n).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],r=t===e.length-1;this._writer.write(s).then(()=>{r&&S(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends z{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=K&&!t}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd},this.opts),new U(W,this.uri(),e)}}},$=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,J=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Q(e){if(e.length>8e3)throw"URI too long";const t=e,s=e.indexOf("["),r=e.indexOf("]");-1!=s&&-1!=r&&(e=e.substring(0,s)+e.substring(s,r).replace(/:/g,";")+e.substring(r,e.length));let a=$.exec(e||""),n={},i=14;for(;i--;)n[J[i]]=a[i]||"";return-1!=s&&-1!=r&&(n.source=t,n.host=n.host.substring(1,n.host.length-1).replace(/;/g,":"),n.authority=n.authority.replace("[","").replace("]","").replace(/;/g,":"),n.ipv6uri=!0),n.pathNames=function(e,t){const s=/\/{2,9}/g,r=t.replace(s,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,n.path),n.queryKey=function(e,t){const s={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,r){t&&(s[t]=r)}),s}(0,n.query),n}const X="function"===typeof addEventListener&&"function"===typeof removeEventListener,Z=[];X&&addEventListener("offline",()=>{Z.forEach(e=>e())},!1);class ee extends A{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"===typeof e&&(t=e,e=null),e){const s=Q(e);t.hostname=s.host,t.secure="https"===s.protocol||"wss"===s.protocol,t.port=s.port,s.query&&(t.query=s.query)}else t.host&&(t.hostname=Q(t.host).host);E(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},s=e.split("&");for(let r=0,a=s.length;r<a;r++){let e=s[r].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),X&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Z.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const e=this.opts.rememberUpgrade&&ee.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",ee.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const s=this.writeBuffer[t].data;if(s&&(e+=D(s)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,S(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,s){return this._sendPacket("message",e,t,s),this}send(e,t,s){return this._sendPacket("message",e,t,s),this}_sendPacket(e,t,s,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof s&&(r=s,s=null),"closing"===this.readyState||"closed"===this.readyState)return;(s=s||{}).compress=!1!==s.compress;const a={type:e,data:t,options:s};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(ee.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),X&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=Z.indexOf(this._offlineEventListener);-1!==e&&Z.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}ee.protocol=4;class te extends ee{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),s=!1;ee.priorWebsocketSuccess=!1;const r=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!s)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;ee.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{s||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function a(){s||(s=!0,c(),t.close(),t=null)}const n=e=>{const s=new Error("probe error: "+e);s.transport=t.name,a(),this.emitReserved("upgradeError",s)};function i(){n("transport closed")}function o(){n("socket closed")}function l(e){t&&e.name!==t.name&&a()}const c=()=>{t.removeListener("open",r),t.removeListener("error",n),t.removeListener("close",i),this.off("close",o),this.off("upgrading",l)};t.once("open",r),t.once("error",n),t.once("close",i),this.once("close",o),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{s||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}class se extends te{constructor(e){const t="object"===typeof e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t.transports||t.transports&&"string"===typeof t.transports[0])&&(t.transports=(t.transports||["polling","websocket","webtransport"]).map(e=>Y[e]).filter(e=>!!e)),super(e,t)}}const re="function"===typeof ArrayBuffer,ae=Object.prototype.toString,ne="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===ae.call(Blob),ie="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===ae.call(File);function oe(e){return re&&(e instanceof ArrayBuffer||(e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||ne&&e instanceof Blob||ie&&e instanceof File}function le(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,s=e.length;t<s;t++)if(le(e[t]))return!0;return!1}if(oe(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return le(e.toJSON(),!0);for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&le(e[s]))return!0;return!1}function ce(e){const t=[],s=e.data,r=e;return r.data=de(s,t),r.attachments=t.length,{packet:r,buffers:t}}function de(e,t){if(!e)return e;if(oe(e)){const s={_placeholder:!0,num:t.length};return t.push(e),s}if(Array.isArray(e)){const s=new Array(e.length);for(let r=0;r<e.length;r++)s[r]=de(e[r],t);return s}if("object"===typeof e&&!(e instanceof Date)){const s={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=de(e[r],t));return s}return e}function ue(e,t){return e.data=he(e.data,t),delete e.attachments,e}function he(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let s=0;s<e.length;s++)e[s]=he(e[s],t);else if("object"===typeof e)for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(e[s]=he(e[s],t));return e}const me=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],pe=5;var xe;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(xe||(xe={}));class ge{constructor(e){this.replacer=e}encode(e){return e.type!==xe.EVENT&&e.type!==xe.ACK||!le(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===xe.EVENT?xe.BINARY_EVENT:xe.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==xe.BINARY_EVENT&&e.type!==xe.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=ce(e),s=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(s),r}}function fe(e){return"[object Object]"===Object.prototype.toString.call(e)}class ye extends A{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const s=t.type===xe.BINARY_EVENT;s||t.type===xe.BINARY_ACK?(t.type=s?xe.EVENT:xe.ACK,this.reconstructor=new be(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!oe(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(void 0===xe[s.type])throw new Error("unknown packet type "+s.type);if(s.type===xe.BINARY_EVENT||s.type===xe.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const a=e.substring(r,t);if(a!=Number(a)||"-"!==e.charAt(t))throw new Error("Illegal attachments");s.attachments=Number(a)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}s.nsp=e.substring(r,t)}else s.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const s=e.charAt(t);if(null==s||Number(s)!=s){--t;break}if(t===e.length)break}s.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!ye.isPayloadValid(s.type,r))throw new Error("invalid payload");s.data=r}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}static isPayloadValid(e,t){switch(e){case xe.CONNECT:return fe(t);case xe.DISCONNECT:return void 0===t;case xe.CONNECT_ERROR:return"string"===typeof t||fe(t);case xe.EVENT:case xe.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===me.indexOf(t[0]));case xe.ACK:case xe.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class be{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=ue(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function ve(e,t,s){return e.on(t,s),function(){e.off(t,s)}}const je=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ne extends A{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ve(e,"open",this.onopen.bind(this)),ve(e,"packet",this.onpacket.bind(this)),ve(e,"error",this.onerror.bind(this)),ve(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){var t,s,r;if(je.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var a=arguments.length,n=new Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:xe.EVENT,data:n,options:{}};if(o.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]){const e=this.ids++,t=n.pop();this._registerAckCallback(e,t),o.id=e}const l=null===(s=null===(t=this.io.engine)||void 0===t?void 0:t.transport)||void 0===s?void 0:s.writable,c=this.connected&&!(null===(r=this.io.engine)||void 0===r?void 0:r._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var s,r=this;const a=null!==(s=this.flags.timeout)&&void 0!==s?s:this._opts.ackTimeout;if(void 0===a)return void(this.acks[e]=t);const n=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))},a),i=function(){r.io.clearTimeoutFn(n);for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];t.apply(r,s)};i.withError=!0,this.acks[e]=i}emitWithAck(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return new Promise((t,r)=>{const a=(e,s)=>e?r(e):t(s);a.withError=!0,s.push(a),this.emit(e,...s)})}_addToQueue(e){var t=this;let s;"function"===typeof e[e.length-1]&&(s=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(function(e){if(r!==t._queue[0])return;if(null!==e)r.tryCount>t._opts.retries&&(t._queue.shift(),s&&s(e));else if(t._queue.shift(),s){for(var a=arguments.length,n=new Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];s(null,...n)}return r.pending=!1,t._drainQueue()}),this._queue.push(r),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:xe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case xe.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case xe.EVENT:case xe.BINARY_EVENT:this.onevent(e);break;case xe.ACK:case xe.BINARY_ACK:this.onack(e);break;case xe.DISCONNECT:this.ondisconnect();break;case xe.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let s=!1;return function(){if(!s){s=!0;for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];t.packet({type:xe.ACK,id:e,data:a})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:xe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const s of t)s.apply(this,e.data)}}}function we(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}we.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),s=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-s:e+s}return 0|Math.min(e,this.max)},we.prototype.reset=function(){this.attempts=0},we.prototype.setMin=function(e){this.ms=e},we.prototype.setMax=function(e){this.max=e},we.prototype.setJitter=function(e){this.jitter=e};class ke extends A{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&"object"===typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,E(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(s=t.randomizationFactor)&&void 0!==s?s:.5),this.backoff=new we({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const a=t.parser||r;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new se(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const r=ve(t,"open",function(){s.onopen(),e&&e()}),a=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},n=ve(t,"error",a);if(!1!==this._timeout){const e=this._timeout,s=this.setTimeoutFn(()=>{r(),a(new Error("timeout")),t.close()},e);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}return this.subs.push(r),this.subs.push(n),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ve(e,"ping",this.onping.bind(this)),ve(e,"data",this.ondata.bind(this)),ve(e,"error",this.onerror.bind(this)),ve(e,"close",this.onclose.bind(this)),ve(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){S(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new Ne(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const s of t){if(this.nsps[s].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var s;this.cleanup(),null===(s=this.engine)||void 0===s||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ae={};function Se(e,t){"object"===typeof e&&(t=e,e=void 0);const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2?arguments[2]:void 0,r=e;s=s||"undefined"!==typeof location&&location,null==e&&(e=s.protocol+"//"+s.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?s.protocol+e:s.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof s?s.protocol+"//"+e:"https://"+e),r=Q(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const a=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port+t,r.href=r.protocol+"://"+a+(s&&s.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=s.source,a=s.id,n=s.path,i=Ae[a]&&n in Ae[a].nsps;let o;return t.forceNew||t["force new connection"]||!1===t.multiplex||i?o=new ke(r,t):(Ae[a]||(Ae[a]=new ke(r,t)),o=Ae[a]),s.query&&!t.query&&(t.query=s.queryKey),o.socket(s.path,t)}Object.assign(Se,{Manager:ke,Socket:Ne,io:Se,connect:Se})},2154:(e,t,s)=>{var r=s(5575),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var s=t[e];return"__lodash_hash_undefined__"===s?void 0:s}return a.call(t,e)?t[e]:void 0}},2165:(e,t,s)=>{var r=s(5652);e.exports=function(e,t){var s;return r(e,function(e,r,a){return!(s=t(e,r,a))}),!!s}},2244:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]])},2284:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]])},2313:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},2322:(e,t,s)=>{var r=s(6913),a=s(5990),n=s(2761),i=Function.prototype,o=Object.prototype,l=i.toString,c=o.hasOwnProperty,d=l.call(Object);e.exports=function(e){if(!n(e)||"[object Object]"!=r(e))return!1;var t=a(e);if(null===t)return!0;var s=c.call(t,"constructor")&&t.constructor;return"function"==typeof s&&s instanceof s&&l.call(s)==d}},2382:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},2520:(e,t,s)=>{var r=s(5816),a=s(9096),n=s(9140),i=Math.max;e.exports=function(e,t,s){var o=null==e?0:e.length;if(!o)return-1;var l=null==s?0:n(s);return l<0&&(l=i(o+l,0)),r(e,a(t,3),l)}},2536:(e,t,s)=>{var r=s(149),a=s(2969),n=s(9096),i=s(8883),o=s(320),l=s(7574),c=s(5893),d=s(3279),u=s(4052);e.exports=function(e,t,s){t=t.length?r(t,function(e){return u(e)?function(t){return a(t,1===e.length?e[0]:e)}:e}):[d];var h=-1;t=r(t,l(n));var m=i(e,function(e,s,a){return{criteria:r(t,function(t){return t(e)}),index:++h,value:e}});return o(m,function(e,t){return c(e,t,s)})}},2541:e=>{e.exports=function(e){return function(){return e}}},2580:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},2587:e=>{e.exports=function(e,t){for(var s=-1,r=null==e?0:e.length;++s<r;)if(t(e[s],s,e))return!0;return!1}},2597:(e,t,s)=>{var r=s(4052),a=s(9841),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var s=typeof e;return!("number"!=s&&"symbol"!=s&&"boolean"!=s&&null!=e&&!a(e))||(i.test(e)||!n.test(e)||null!=t&&e in Object(t))}},2622:(e,t,s)=>{var r=s(705);e.exports=function(e,t){var s=e.__data__;return r(t)?s["string"==typeof t?"string":"hash"]:s.map}},2662:(e,t,s)=>{var r=s(5575);e.exports=function(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},2730:(e,t,s)=>{"use strict";var r=s(5043),a=s(8853);function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function x(e,t,s,r,a,n,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=n,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new x(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new x(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new x(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new x(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new x(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new x(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new x(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new x(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new x(e,5,!1,e.toLowerCase(),null,!1,!1)});var f=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,s,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,s,r){if(null===t||"undefined"===typeof t||function(e,t,s,r){if(null!==s&&0===s.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==s?!s.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,s,r))return!0;if(r)return!1;if(null!==s)switch(s.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,s,a,r)&&(s=null),r||null===a?function(e){return!!u.call(p,e)||!u.call(m,e)&&(h.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===s?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=null===s?3!==a.type&&"":s:(t=a.attributeName,r=a.attributeNamespace,null===s?e.removeAttribute(t):(s=3===(a=a.type)||4===a&&!0===s?"":""+s,r?e.setAttributeNS(r,t,s):e.setAttribute(t,s))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(f,y);g[t]=new x(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(f,y);g[t]=new x(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(f,y);g[t]=new x(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new x(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new x(e,1,!1,e.toLowerCase(),null,!0,!0)});var v=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),N=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var I,L=Object.assign;function F(e){if(void 0===I)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);I=t&&t[1]||""}return"\n"+I+e}var B=!1;function z(e,t){if(!e||B)return"";B=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),n=r.stack.split("\n"),i=a.length-1,o=n.length-1;1<=i&&0<=o&&a[i]!==n[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==n[o]){if(1!==i||1!==o)do{if(i--,0>--o||a[i]!==n[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{B=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case N:return"Portal";case A:return"Profiler";case k:return"StrictMode";case T:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return V(e(t))}catch(s){}}return null}function K(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof s&&"function"===typeof s.get&&"function"===typeof s.set){var a=s.get,n=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,n.call(this,e)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==s&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var s=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=s?s:e._wrapperState.initialChecked})}function J(e,t){var s=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;s=W(null!=t.value?t.value:s),e._wrapperState={initialChecked:r,initialValue:s,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Q(e,t);var s=W(t.value),r=t.type;if(null!=s)"number"===r?(0===s&&""===e.value||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,s):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}""!==(s=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==s&&(e.name=s)}function ee(e,t,s){"number"===t&&Y(e.ownerDocument)===e||(null==s?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var te=Array.isArray;function se(e,t,s,r){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&r&&(e[s].defaultSelected=!0)}else{for(s=""+W(s),t=null,a=0;a<e.length;a++){if(e[a].value===s)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(n(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var s=t.value;if(null==s){if(s=t.children,t=t.defaultValue,null!=s){if(null!=t)throw Error(n(92));if(te(s)){if(1<s.length)throw Error(n(93));s=s[0]}t=s}null==t&&(t=""),s=t}e._wrapperState={initialValue:W(s)}}function ne(e,t){var s=W(t.value),r=W(t.defaultValue);null!=s&&((s=""+s)!==e.value&&(e.value=s),null==t.defaultValue&&e.defaultValue!==s&&(e.defaultValue=s)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,s,r){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&3===s.nodeType)return void(s.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function xe(e,t,s){return null==t||"boolean"===typeof t||""===t?"":s||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function ge(e,t){for(var s in e=e.style,t)if(t.hasOwnProperty(s)){var r=0===s.indexOf("--"),a=xe(s,t[s],r);"float"===s&&(s="cssFloat"),r?e.setProperty(s,a):e[s]=a}}Object.keys(me).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var fe=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(fe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(n(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(n(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(n(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,we=null,ke=null;function Ae(e){if(e=ya(e)){if("function"!==typeof Ne)throw Error(n(280));var t=e.stateNode;t&&(t=va(t),Ne(e.stateNode,e.type,t))}}function Se(e){we?ke?ke.push(e):ke=[e]:we=e}function Ce(){if(we){var e=we,t=ke;if(ke=we=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function _e(e,t){return e(t)}function Te(){}var Pe=!1;function Ee(e,t,s){if(Pe)return e(t,s);Pe=!0;try{return _e(e,t,s)}finally{Pe=!1,(null!==we||null!==ke)&&(Te(),Ce())}}function De(e,t){var s=e.stateNode;if(null===s)return null;var r=va(s);if(null===r)return null;s=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(s&&"function"!==typeof s)throw Error(n(231,t,typeof s));return s}var Me=!1;if(d)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(de){Me=!1}function Re(e,t,s,r,a,n,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(s,c)}catch(d){this.onError(d)}}var Ie=!1,Le=null,Fe=!1,Be=null,ze={onError:function(e){Ie=!0,Le=e}};function Ue(e,t,s,r,a,n,i,o,l){Ie=!1,Le=null,Re.apply(ze,arguments)}function Ve(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(s=t.return),e=t.return}while(e)}return 3===t.tag?s:null}function Ke(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ve(e)!==e)throw Error(n(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(n(188));return t!==e?null:e}for(var s=e,r=t;;){var a=s.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){s=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return We(a),e;if(i===r)return We(a),t;i=i.sibling}throw Error(n(188))}if(s.return!==r.return)s=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===s){o=!0,s=a,r=i;break}if(l===r){o=!0,r=a,s=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===s){o=!0,s=i,r=a;break}if(l===r){o=!0,r=i,s=a;break}l=l.sibling}if(!o)throw Error(n(189))}}if(s.alternate!==r)throw Error(n(190))}if(3!==s.tag)throw Error(n(188));return s.stateNode.current===s?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ge=a.unstable_scheduleCallback,Ye=a.unstable_cancelCallback,$e=a.unstable_shouldYield,Je=a.unstable_requestPaint,Qe=a.unstable_now,Xe=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,st=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,nt=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var s=e.pendingLanes;if(0===s)return 0;var r=0,a=e.suspendedLanes,n=e.pingedLanes,i=268435455&s;if(0!==i){var o=i&~a;0!==o?r=ut(o):0!==(n&=i)&&(r=ut(n))}else 0!==(i=s&~a)?r=ut(i):0!==n&&(r=ut(n));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(n=t&-t)||16===a&&0!==(4194240&n)))return t;if(0!==(4&r)&&(r|=16&s),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(s=31-it(t)),r|=e[s],t&=~a;return r}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function xt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function ft(e,t,s){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=s}function yt(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var r=31-it(s),a=1<<r;a&t|e[r]&t&&(e[r]|=t),s&=~a}}var bt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var jt,Nt,wt,kt,At,St=!1,Ct=[],_t=null,Tt=null,Pt=null,Et=new Map,Dt=new Map,Mt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Et.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function It(e,t,s,r,a,n){return null===e||e.nativeEvent!==n?(e={blockedOn:t,domEventName:s,eventSystemFlags:r,nativeEvent:n,targetContainers:[a]},null!==t&&(null!==(t=ya(t))&&Nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Lt(e){var t=fa(e.target);if(null!==t){var s=Ve(t);if(null!==s)if(13===(t=s.tag)){if(null!==(t=Ke(s)))return e.blockedOn=t,void At(e.priority,function(){wt(s)})}else if(3===t&&s.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===s.tag?s.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var s=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==s)return null!==(t=ya(s))&&Nt(t),e.blockedOn=s,!1;var r=new(s=e.nativeEvent).constructor(s.type,s);ve=r,s.target.dispatchEvent(r),ve=null,t.shift()}return!0}function Bt(e,t,s){Ft(e)&&s.delete(t)}function zt(){St=!1,null!==_t&&Ft(_t)&&(_t=null),null!==Tt&&Ft(Tt)&&(Tt=null),null!==Pt&&Ft(Pt)&&(Pt=null),Et.forEach(Bt),Dt.forEach(Bt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,zt)))}function Vt(e){function t(t){return Ut(t,e)}if(0<Ct.length){Ut(Ct[0],e);for(var s=1;s<Ct.length;s++){var r=Ct[s];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&Ut(_t,e),null!==Tt&&Ut(Tt,e),null!==Pt&&Ut(Pt,e),Et.forEach(t),Dt.forEach(t),s=0;s<Mt.length;s++)(r=Mt[s]).blockedOn===e&&(r.blockedOn=null);for(;0<Mt.length&&null===(s=Mt[0]).blockedOn;)Lt(s),null===s.blockedOn&&Mt.shift()}var Kt=v.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,s,r){var a=bt,n=Kt.transition;Kt.transition=null;try{bt=1,Gt(e,t,s,r)}finally{bt=a,Kt.transition=n}}function qt(e,t,s,r){var a=bt,n=Kt.transition;Kt.transition=null;try{bt=4,Gt(e,t,s,r)}finally{bt=a,Kt.transition=n}}function Gt(e,t,s,r){if(Wt){var a=$t(e,t,s,r);if(null===a)Kr(e,t,r,Yt,s),Rt(e,r);else if(function(e,t,s,r,a){switch(t){case"focusin":return _t=It(_t,e,t,s,r,a),!0;case"dragenter":return Tt=It(Tt,e,t,s,r,a),!0;case"mouseover":return Pt=It(Pt,e,t,s,r,a),!0;case"pointerover":var n=a.pointerId;return Et.set(n,It(Et.get(n)||null,e,t,s,r,a)),!0;case"gotpointercapture":return n=a.pointerId,Dt.set(n,It(Dt.get(n)||null,e,t,s,r,a)),!0}return!1}(a,e,t,s,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==a;){var n=ya(a);if(null!==n&&jt(n),null===(n=$t(e,t,s,r))&&Kr(e,t,r,Yt,s),n===a)break;a=n}null!==a&&r.stopPropagation()}else Kr(e,t,r,null,s)}}var Yt=null;function $t(e,t,s,r){if(Yt=null,null!==(e=fa(e=je(r))))if(null===(t=Ve(e)))e=null;else if(13===(s=t.tag)){if(null!==(e=Ke(t)))return e;e=null}else if(3===s){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case st:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Xt=null,Zt=null;function es(){if(Zt)return Zt;var e,t,s=Xt,r=s.length,a="value"in Qt?Qt.value:Qt.textContent,n=a.length;for(e=0;e<r&&s[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&s[r-t]===a[n-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function ts(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ss(){return!0}function rs(){return!1}function as(e){function t(t,s,r,a,n){for(var i in this._reactName=t,this._targetInst=r,this.type=s,this.nativeEvent=a,this.target=n,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?ss:rs,this.isPropagationStopped=rs,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),t}var ns,is,os,ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cs=as(ls),ds=L({},ls,{view:0,detail:0}),us=as(ds),hs=L({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ks,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==os&&(os&&"mousemove"===e.type?(ns=e.screenX-os.screenX,is=e.screenY-os.screenY):is=ns=0,os=e),ns)},movementY:function(e){return"movementY"in e?e.movementY:is}}),ms=as(hs),ps=as(L({},hs,{dataTransfer:0})),xs=as(L({},ds,{relatedTarget:0})),gs=as(L({},ls,{animationName:0,elapsedTime:0,pseudoElement:0})),fs=L({},ls,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ys=as(fs),bs=as(L({},ls,{data:0})),vs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},js={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ns={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ws(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ns[e])&&!!t[e]}function ks(){return ws}var As=L({},ds,{key:function(e){if(e.key){var t=vs[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ts(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?js[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ks,charCode:function(e){return"keypress"===e.type?ts(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ts(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ss=as(As),Cs=as(L({},hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_s=as(L({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ks})),Ts=as(L({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ps=L({},hs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Es=as(Ps),Ds=[9,13,27,32],Ms=d&&"CompositionEvent"in window,Os=null;d&&"documentMode"in document&&(Os=document.documentMode);var Rs=d&&"TextEvent"in window&&!Os,Is=d&&(!Ms||Os&&8<Os&&11>=Os),Ls=String.fromCharCode(32),Fs=!1;function Bs(e,t){switch(e){case"keyup":return-1!==Ds.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zs(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Us=!1;var Vs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ks(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vs[e.type]:"textarea"===t}function Ws(e,t,s,r){Se(r),0<(t=Hr(t,"onChange")).length&&(s=new cs("onChange","change",null,s,r),e.push({event:s,listeners:t}))}var Hs=null,qs=null;function Gs(e){Lr(e,0)}function Ys(e){if(G(ba(e)))return e}function $s(e,t){if("change"===e)return t}var Js=!1;if(d){var Qs;if(d){var Xs="oninput"in document;if(!Xs){var Zs=document.createElement("div");Zs.setAttribute("oninput","return;"),Xs="function"===typeof Zs.oninput}Qs=Xs}else Qs=!1;Js=Qs&&(!document.documentMode||9<document.documentMode)}function er(){Hs&&(Hs.detachEvent("onpropertychange",tr),qs=Hs=null)}function tr(e){if("value"===e.propertyName&&Ys(qs)){var t=[];Ws(t,qs,e,je(e)),Ee(Gs,t)}}function sr(e,t,s){"focusin"===e?(er(),qs=s,(Hs=t).attachEvent("onpropertychange",tr)):"focusout"===e&&er()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ys(qs)}function ar(e,t){if("click"===e)return Ys(t)}function nr(e,t){if("input"===e||"change"===e)return Ys(t)}var ir="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(ir(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var a=s[r];if(!u.call(t,a)||!ir(e[a],t[a]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var s,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ur(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var s="string"===typeof t.contentWindow.location.href}catch(r){s=!1}if(!s)break;t=Y((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=ur(),s=e.focusedElem,r=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&dr(s.ownerDocument.documentElement,s)){if(null!==r&&hr(s))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if((e=(t=s.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=s.textContent.length,n=Math.min(r.start,a);r=void 0===r.end?n:Math.min(r.end,a),!e.extend&&n>r&&(a=r,r=n,n=a),a=cr(s,n);var i=cr(s,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),n>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=s;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<t.length;s++)(e=t[s]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=d&&"documentMode"in document&&11>=document.documentMode,xr=null,gr=null,fr=null,yr=!1;function br(e,t,s){var r=s.window===s?s.document:9===s.nodeType?s:s.ownerDocument;yr||null==xr||xr!==Y(r)||("selectionStart"in(r=xr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},fr&&or(fr,r)||(fr=r,0<(r=Hr(gr,"onSelect")).length&&(t=new cs("onSelect","select",null,t,s),e.push({event:t,listeners:r}),t.target=xr)))}function vr(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var jr={animationend:vr("Animation","AnimationEnd"),animationiteration:vr("Animation","AnimationIteration"),animationstart:vr("Animation","AnimationStart"),transitionend:vr("Transition","TransitionEnd")},Nr={},wr={};function kr(e){if(Nr[e])return Nr[e];if(!jr[e])return e;var t,s=jr[e];for(t in s)if(s.hasOwnProperty(t)&&t in wr)return Nr[e]=s[t];return e}d&&(wr=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);var Ar=kr("animationend"),Sr=kr("animationiteration"),Cr=kr("animationstart"),_r=kr("transitionend"),Tr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){Tr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Mr=Pr[Dr];Er(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Er(Ar,"onAnimationEnd"),Er(Sr,"onAnimationIteration"),Er(Cr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(_r,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Ir(e,t,s){var r=e.type||"unknown-event";e.currentTarget=s,function(e,t,s,r,a,i,o,l,c){if(Ue.apply(this,arguments),Ie){if(!Ie)throw Error(n(198));var d=Le;Ie=!1,Le=null,Fe||(Fe=!0,Be=d)}}(r,t,void 0,e),e.currentTarget=null}function Lr(e,t){t=0!==(4&t);for(var s=0;s<e.length;s++){var r=e[s],a=r.event;r=r.listeners;e:{var n=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==n&&a.isPropagationStopped())break e;Ir(a,o,c),n=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==n&&a.isPropagationStopped())break e;Ir(a,o,c),n=l}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Fr(e,t){var s=t[pa];void 0===s&&(s=t[pa]=new Set);var r=e+"__bubble";s.has(r)||(Vr(t,e,2,!1),s.add(r))}function Br(e,t,s){var r=0;t&&(r|=4),Vr(s,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[zr]){e[zr]=!0,i.forEach(function(t){"selectionchange"!==t&&(Rr.has(t)||Br(t,!1,e),Br(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Br("selectionchange",!1,t))}}function Vr(e,t,s,r){switch(Jt(t)){case 1:var a=Ht;break;case 4:a=qt;break;default:a=Gt}s=a.bind(null,t,s,e),a=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):void 0!==a?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function Kr(e,t,s,r,a){var n=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=fa(o)))return;if(5===(l=i.tag)||6===l){r=n=i;continue e}o=o.parentNode}}r=r.return}Ee(function(){var r=n,a=je(s),i=[];e:{var o=Tr.get(e);if(void 0!==o){var l=cs,c=e;switch(e){case"keypress":if(0===ts(s))break e;case"keydown":case"keyup":l=Ss;break;case"focusin":c="focus",l=xs;break;case"focusout":c="blur",l=xs;break;case"beforeblur":case"afterblur":l=xs;break;case"click":if(2===s.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=ms;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=ps;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=_s;break;case Ar:case Sr:case Cr:l=gs;break;case _r:l=Ts;break;case"scroll":l=us;break;case"wheel":l=Es;break;case"copy":case"cut":case"paste":l=ys;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cs}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=r;null!==p;){var x=(m=p).stateNode;if(5===m.tag&&null!==x&&(m=x,null!==h&&(null!=(x=De(p,h))&&d.push(Wr(p,x,m)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,s,a),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||s===ve||!(c=s.relatedTarget||s.fromElement)||!fa(c)&&!c[ma])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=s.relatedTarget||s.toElement)?fa(c):null)&&(c!==(u=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=ms,x="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Cs,x="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?o:ba(l),m=null==c?o:ba(c),(o=new d(x,p+"leave",l,s,a)).target=u,o.relatedTarget=m,x=null,fa(a)===r&&((d=new d(h,p+"enter",c,s,a)).target=m,d.relatedTarget=u,x=d),u=x,l&&c)e:{for(h=c,p=0,m=d=l;m;m=qr(m))p++;for(m=0,x=h;x;x=qr(x))m++;for(;0<p-m;)d=qr(d),p--;for(;0<m-p;)h=qr(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=qr(d),h=qr(h)}d=null}else d=null;null!==l&&Gr(i,o,l,d,!1),null!==c&&null!==u&&Gr(i,u,c,d,!0)}if("select"===(l=(o=r?ba(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=$s;else if(Ks(o))if(Js)g=nr;else{g=rr;var f=sr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ar);switch(g&&(g=g(e,r))?Ws(i,g,s,a):(f&&f(e,o,r),"focusout"===e&&(f=o._wrapperState)&&f.controlled&&"number"===o.type&&ee(o,"number",o.value)),f=r?ba(r):window,e){case"focusin":(Ks(f)||"true"===f.contentEditable)&&(xr=f,gr=r,fr=null);break;case"focusout":fr=gr=xr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,br(i,s,a);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(i,s,a)}var y;if(Ms)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Us?Bs(e,s)&&(b="onCompositionEnd"):"keydown"===e&&229===s.keyCode&&(b="onCompositionStart");b&&(Is&&"ko"!==s.locale&&(Us||"onCompositionStart"!==b?"onCompositionEnd"===b&&Us&&(y=es()):(Xt="value"in(Qt=a)?Qt.value:Qt.textContent,Us=!0)),0<(f=Hr(r,b)).length&&(b=new bs(b,e,null,s,a),i.push({event:b,listeners:f}),y?b.data=y:null!==(y=zs(s))&&(b.data=y))),(y=Rs?function(e,t){switch(e){case"compositionend":return zs(t);case"keypress":return 32!==t.which?null:(Fs=!0,Ls);case"textInput":return(e=t.data)===Ls&&Fs?null:e;default:return null}}(e,s):function(e,t){if(Us)return"compositionend"===e||!Ms&&Bs(e,t)?(e=es(),Zt=Xt=Qt=null,Us=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Is&&"ko"!==t.locale?null:t.data}}(e,s))&&(0<(r=Hr(r,"onBeforeInput")).length&&(a=new bs("onBeforeInput","beforeinput",null,s,a),i.push({event:a,listeners:r}),a.data=y))}Lr(i,t)})}function Wr(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Hr(e,t){for(var s=t+"Capture",r=[];null!==e;){var a=e,n=a.stateNode;5===a.tag&&null!==n&&(a=n,null!=(n=De(e,s))&&r.unshift(Wr(e,n,a)),null!=(n=De(e,t))&&r.push(Wr(e,n,a))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,s,r,a){for(var n=t._reactName,i=[];null!==s&&s!==r;){var o=s,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=De(s,n))&&i.unshift(Wr(s,l,o)):a||null!=(l=De(s,n))&&i.push(Wr(s,l,o))),s=s.return}0!==i.length&&e.push({event:t,listeners:i})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Qr(e,t,s){if(t=Jr(t),Jr(e)!==t&&s)throw Error(n(425))}function Xr(){}var Zr=null,ea=null;function ta(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sa="function"===typeof setTimeout?setTimeout:void 0,ra="function"===typeof clearTimeout?clearTimeout:void 0,aa="function"===typeof Promise?Promise:void 0,na="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof aa?function(e){return aa.resolve(null).then(e).catch(ia)}:sa;function ia(e){setTimeout(function(){throw e})}function oa(e,t){var s=t,r=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&8===a.nodeType)if("/$"===(s=a.data)){if(0===r)return e.removeChild(a),void Vt(t);r--}else"$"!==s&&"$?"!==s&&"$!"!==s||r++;s=a}while(s);Vt(t)}function la(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ca(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var s=e.data;if("$"===s||"$!"===s||"$?"===s){if(0===t)return e;t--}else"/$"===s&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ua="__reactFiber$"+da,ha="__reactProps$"+da,ma="__reactContainer$"+da,pa="__reactEvents$"+da,xa="__reactListeners$"+da,ga="__reactHandles$"+da;function fa(e){var t=e[ua];if(t)return t;for(var s=e.parentNode;s;){if(t=s[ma]||s[ua]){if(s=t.alternate,null!==t.child||null!==s&&null!==s.child)for(e=ca(e);null!==e;){if(s=e[ua])return s;e=ca(e)}return t}s=(e=s).parentNode}return null}function ya(e){return!(e=e[ua]||e[ma])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ba(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(n(33))}function va(e){return e[ha]||null}var ja=[],Na=-1;function wa(e){return{current:e}}function ka(e){0>Na||(e.current=ja[Na],ja[Na]=null,Na--)}function Aa(e,t){Na++,ja[Na]=e.current,e.current=t}var Sa={},Ca=wa(Sa),_a=wa(!1),Ta=Sa;function Pa(e,t){var s=e.type.contextTypes;if(!s)return Sa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,n={};for(a in s)n[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Ea(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Da(){ka(_a),ka(Ca)}function Ma(e,t,s){if(Ca.current!==Sa)throw Error(n(168));Aa(Ca,t),Aa(_a,s)}function Oa(e,t,s){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return s;for(var a in r=r.getChildContext())if(!(a in t))throw Error(n(108,K(e)||"Unknown",a));return L({},s,r)}function Ra(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sa,Ta=Ca.current,Aa(Ca,e),Aa(_a,_a.current),!0}function Ia(e,t,s){var r=e.stateNode;if(!r)throw Error(n(169));s?(e=Oa(e,t,Ta),r.__reactInternalMemoizedMergedChildContext=e,ka(_a),ka(Ca),Aa(Ca,e)):ka(_a),Aa(_a,s)}var La=null,Fa=!1,Ba=!1;function za(e){null===La?La=[e]:La.push(e)}function Ua(){if(!Ba&&null!==La){Ba=!0;var e=0,t=bt;try{var s=La;for(bt=1;e<s.length;e++){var r=s[e];do{r=r(!0)}while(null!==r)}La=null,Fa=!1}catch(a){throw null!==La&&(La=La.slice(e+1)),Ge(Ze,Ua),a}finally{bt=t,Ba=!1}}return null}var Va=[],Ka=0,Wa=null,Ha=0,qa=[],Ga=0,Ya=null,$a=1,Ja="";function Qa(e,t){Va[Ka++]=Ha,Va[Ka++]=Wa,Wa=e,Ha=t}function Xa(e,t,s){qa[Ga++]=$a,qa[Ga++]=Ja,qa[Ga++]=Ya,Ya=e;var r=$a;e=Ja;var a=32-it(r)-1;r&=~(1<<a),s+=1;var n=32-it(t)+a;if(30<n){var i=a-a%5;n=(r&(1<<i)-1).toString(32),r>>=i,a-=i,$a=1<<32-it(t)+a|s<<a|r,Ja=n+e}else $a=1<<n|s<<a|r,Ja=e}function Za(e){null!==e.return&&(Qa(e,1),Xa(e,1,0))}function en(e){for(;e===Wa;)Wa=Va[--Ka],Va[Ka]=null,Ha=Va[--Ka],Va[Ka]=null;for(;e===Ya;)Ya=qa[--Ga],qa[Ga]=null,Ja=qa[--Ga],qa[Ga]=null,$a=qa[--Ga],qa[Ga]=null}var tn=null,sn=null,rn=!1,an=null;function nn(e,t){var s=Ec(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,null===(t=e.deletions)?(e.deletions=[s],e.flags|=16):t.push(s)}function on(e,t){switch(e.tag){case 5:var s=e.type;return null!==(t=1!==t.nodeType||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,tn=e,sn=la(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,tn=e,sn=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(s=null!==Ya?{id:$a,overflow:Ja}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},(s=Ec(18,null,null,0)).stateNode=t,s.return=e,e.child=s,tn=e,sn=null,!0);default:return!1}}function ln(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cn(e){if(rn){var t=sn;if(t){var s=t;if(!on(e,t)){if(ln(e))throw Error(n(418));t=la(s.nextSibling);var r=tn;t&&on(e,t)?nn(r,s):(e.flags=-4097&e.flags|2,rn=!1,tn=e)}}else{if(ln(e))throw Error(n(418));e.flags=-4097&e.flags|2,rn=!1,tn=e}}}function dn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;tn=e}function un(e){if(e!==tn)return!1;if(!rn)return dn(e),rn=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ta(e.type,e.memoizedProps)),t&&(t=sn)){if(ln(e))throw hn(),Error(n(418));for(;t;)nn(e,t),t=la(t.nextSibling)}if(dn(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var s=e.data;if("/$"===s){if(0===t){sn=la(e.nextSibling);break e}t--}else"$"!==s&&"$!"!==s&&"$?"!==s||t++}e=e.nextSibling}sn=null}}else sn=tn?la(e.stateNode.nextSibling):null;return!0}function hn(){for(var e=sn;e;)e=la(e.nextSibling)}function mn(){sn=tn=null,rn=!1}function pn(e){null===an?an=[e]:an.push(e)}var xn=v.ReactCurrentBatchConfig;function gn(e,t,s){if(null!==(e=s.ref)&&"function"!==typeof e&&"object"!==typeof e){if(s._owner){if(s=s._owner){if(1!==s.tag)throw Error(n(309));var r=s.stateNode}if(!r)throw Error(n(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(n(284));if(!s._owner)throw Error(n(290,e))}return e}function fn(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yn(e){return(0,e._init)(e._payload)}function bn(e){function t(t,s){if(e){var r=t.deletions;null===r?(t.deletions=[s],t.flags|=16):r.push(s)}}function s(s,r){if(!e)return null;for(;null!==r;)t(s,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function i(t,s,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<s?(t.flags|=2,s):r:(t.flags|=2,s):(t.flags|=1048576,s)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,s,r){return null===t||6!==t.tag?((t=Lc(s,e.mode,r)).return=e,t):((t=a(t,s)).return=e,t)}function c(e,t,s,r){var n=s.type;return n===w?u(e,t,s.props.children,r,s.key):null!==t&&(t.elementType===n||"object"===typeof n&&null!==n&&n.$$typeof===D&&yn(n)===t.type)?((r=a(t,s.props)).ref=gn(e,t,s),r.return=e,r):((r=Oc(s.type,s.key,s.props,null,e.mode,r)).ref=gn(e,t,s),r.return=e,r)}function d(e,t,s,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==s.containerInfo||t.stateNode.implementation!==s.implementation?((t=Fc(s,e.mode,r)).return=e,t):((t=a(t,s.children||[])).return=e,t)}function u(e,t,s,r,n){return null===t||7!==t.tag?((t=Rc(s,e.mode,r,n)).return=e,t):((t=a(t,s)).return=e,t)}function h(e,t,s){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,s)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(s=Oc(t.type,t.key,t.props,null,e.mode,s)).ref=gn(e,null,t),s.return=e,s;case N:return(t=Fc(t,e.mode,s)).return=e,t;case D:return h(e,(0,t._init)(t._payload),s)}if(te(t)||R(t))return(t=Rc(t,e.mode,s,null)).return=e,t;fn(e,t)}return null}function m(e,t,s,r){var a=null!==t?t.key:null;if("string"===typeof s&&""!==s||"number"===typeof s)return null!==a?null:l(e,t,""+s,r);if("object"===typeof s&&null!==s){switch(s.$$typeof){case j:return s.key===a?c(e,t,s,r):null;case N:return s.key===a?d(e,t,s,r):null;case D:return m(e,t,(a=s._init)(s._payload),r)}if(te(s)||R(s))return null!==a?null:u(e,t,s,r,null);fn(e,s)}return null}function p(e,t,s,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(s)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case j:return c(t,e=e.get(null===r.key?s:r.key)||null,r,a);case N:return d(t,e=e.get(null===r.key?s:r.key)||null,r,a);case D:return p(e,t,s,(0,r._init)(r._payload),a)}if(te(r)||R(r))return u(t,e=e.get(s)||null,r,a,null);fn(t,r)}return null}function x(a,n,o,l){for(var c=null,d=null,u=n,x=n=0,g=null;null!==u&&x<o.length;x++){u.index>x?(g=u,u=null):g=u.sibling;var f=m(a,u,o[x],l);if(null===f){null===u&&(u=g);break}e&&u&&null===f.alternate&&t(a,u),n=i(f,n,x),null===d?c=f:d.sibling=f,d=f,u=g}if(x===o.length)return s(a,u),rn&&Qa(a,x),c;if(null===u){for(;x<o.length;x++)null!==(u=h(a,o[x],l))&&(n=i(u,n,x),null===d?c=u:d.sibling=u,d=u);return rn&&Qa(a,x),c}for(u=r(a,u);x<o.length;x++)null!==(g=p(u,a,x,o[x],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?x:g.key),n=i(g,n,x),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(a,e)}),rn&&Qa(a,x),c}function g(a,o,l,c){var d=R(l);if("function"!==typeof d)throw Error(n(150));if(null==(l=d.call(l)))throw Error(n(151));for(var u=d=null,x=o,g=o=0,f=null,y=l.next();null!==x&&!y.done;g++,y=l.next()){x.index>g?(f=x,x=null):f=x.sibling;var b=m(a,x,y.value,c);if(null===b){null===x&&(x=f);break}e&&x&&null===b.alternate&&t(a,x),o=i(b,o,g),null===u?d=b:u.sibling=b,u=b,x=f}if(y.done)return s(a,x),rn&&Qa(a,g),d;if(null===x){for(;!y.done;g++,y=l.next())null!==(y=h(a,y.value,c))&&(o=i(y,o,g),null===u?d=y:u.sibling=y,u=y);return rn&&Qa(a,g),d}for(x=r(a,x);!y.done;g++,y=l.next())null!==(y=p(x,a,g,y.value,c))&&(e&&null!==y.alternate&&x.delete(null===y.key?g:y.key),o=i(y,o,g),null===u?d=y:u.sibling=y,u=y);return e&&x.forEach(function(e){return t(a,e)}),rn&&Qa(a,g),d}return function e(r,n,i,l){if("object"===typeof i&&null!==i&&i.type===w&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case j:e:{for(var c=i.key,d=n;null!==d;){if(d.key===c){if((c=i.type)===w){if(7===d.tag){s(r,d.sibling),(n=a(d,i.props.children)).return=r,r=n;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&yn(c)===d.type){s(r,d.sibling),(n=a(d,i.props)).ref=gn(r,d,i),n.return=r,r=n;break e}s(r,d);break}t(r,d),d=d.sibling}i.type===w?((n=Rc(i.props.children,r.mode,l,i.key)).return=r,r=n):((l=Oc(i.type,i.key,i.props,null,r.mode,l)).ref=gn(r,n,i),l.return=r,r=l)}return o(r);case N:e:{for(d=i.key;null!==n;){if(n.key===d){if(4===n.tag&&n.stateNode.containerInfo===i.containerInfo&&n.stateNode.implementation===i.implementation){s(r,n.sibling),(n=a(n,i.children||[])).return=r,r=n;break e}s(r,n);break}t(r,n),n=n.sibling}(n=Fc(i,r.mode,l)).return=r,r=n}return o(r);case D:return e(r,n,(d=i._init)(i._payload),l)}if(te(i))return x(r,n,i,l);if(R(i))return g(r,n,i,l);fn(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==n&&6===n.tag?(s(r,n.sibling),(n=a(n,i)).return=r,r=n):(s(r,n),(n=Lc(i,r.mode,l)).return=r,r=n),o(r)):s(r,n)}}var vn=bn(!0),jn=bn(!1),Nn=wa(null),wn=null,kn=null,An=null;function Sn(){An=kn=wn=null}function Cn(e){var t=Nn.current;ka(Nn),e._currentValue=t}function _n(e,t,s){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===s)break;e=e.return}}function Tn(e,t){wn=e,An=kn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Pn(e){var t=e._currentValue;if(An!==e)if(e={context:e,memoizedValue:t,next:null},null===kn){if(null===wn)throw Error(n(308));kn=e,wn.dependencies={lanes:0,firstContext:e}}else kn=kn.next=e;return t}var En=null;function Dn(e){null===En?En=[e]:En.push(e)}function Mn(e,t,s,r){var a=t.interleaved;return null===a?(s.next=s,Dn(t)):(s.next=a.next,a.next=s),t.interleaved=s,On(e,r)}function On(e,t){e.lanes|=t;var s=e.alternate;for(null!==s&&(s.lanes|=t),s=e,e=e.return;null!==e;)e.childLanes|=t,null!==(s=e.alternate)&&(s.childLanes|=t),s=e,e=e.return;return 3===s.tag?s.stateNode:null}var Rn=!1;function In(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ln(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bn(e,t,s){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&_l)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,On(e,s)}return null===(a=r.interleaved)?(t.next=t,Dn(r)):(t.next=a.next,a.next=t),r.interleaved=t,On(e,s)}function zn(e,t,s){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&s))){var r=t.lanes;s|=r&=e.pendingLanes,t.lanes=s,yt(e,s)}}function Un(e,t){var s=e.updateQueue,r=e.alternate;if(null!==r&&s===(r=r.updateQueue)){var a=null,n=null;if(null!==(s=s.firstBaseUpdate)){do{var i={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};null===n?a=n=i:n=n.next=i,s=s.next}while(null!==s);null===n?a=n=t:n=n.next=t}else a=n=t;return s={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:n,shared:r.shared,effects:r.effects},void(e.updateQueue=s)}null===(e=s.lastBaseUpdate)?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Vn(e,t,s,r){var a=e.updateQueue;Rn=!1;var n=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?n=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==n){var u=a.baseState;for(i=0,d=c=l=null,o=n;;){var h=o.lane,m=o.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,x=o;switch(h=t,m=s,x.tag){case 1:if("function"===typeof(p=x.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=x.payload)?p.call(m,u,h):p)||void 0===h)break e;u=L({},u,h);break e;case 2:Rn=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,i|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===d&&(l=u),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===n&&(a.shared.lanes=0);Il|=i,e.lanes=i,e.memoizedState=u}}function Kn(e,t,s){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=s,"function"!==typeof a)throw Error(n(191,a));a.call(r)}}}var Wn={},Hn=wa(Wn),qn=wa(Wn),Gn=wa(Wn);function Yn(e){if(e===Wn)throw Error(n(174));return e}function $n(e,t){switch(Aa(Gn,t),Aa(qn,e),Aa(Hn,Wn),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ka(Hn),Aa(Hn,t)}function Jn(){ka(Hn),ka(qn),ka(Gn)}function Qn(e){Yn(Gn.current);var t=Yn(Hn.current),s=le(t,e.type);t!==s&&(Aa(qn,e),Aa(Hn,s))}function Xn(e){qn.current===e&&(ka(Hn),ka(qn))}var Zn=wa(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var s=t.memoizedState;if(null!==s&&(null===(s=s.dehydrated)||"$?"===s.data||"$!"===s.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function si(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ri=v.ReactCurrentDispatcher,ai=v.ReactCurrentBatchConfig,ni=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,hi=0;function mi(){throw Error(n(321))}function pi(e,t){if(null===t)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!ir(e[s],t[s]))return!1;return!0}function xi(e,t,s,r,a,i){if(ni=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ri.current=null===e||null===e.memoizedState?Xi:Zi,e=s(r,a),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(n(301));i+=1,li=oi=null,t.updateQueue=null,ri.current=eo,e=s(r,a)}while(di)}if(ri.current=Qi,t=null!==oi&&null!==oi.next,ni=0,li=oi=ii=null,ci=!1,t)throw Error(n(300));return e}function gi(){var e=0!==ui;return ui=0,e}function fi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function yi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(n(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function bi(e,t){return"function"===typeof t?t(e):t}function vi(e){var t=yi(),s=t.queue;if(null===s)throw Error(n(311));s.lastRenderedReducer=e;var r=oi,a=r.baseQueue,i=s.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,s.pending=null}if(null!==a){i=a.next,r=r.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((ni&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,ii.lanes|=u,Il|=u}d=d.next}while(null!==d&&d!==i);null===c?o=r:c.next=l,ir(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,s.lastRenderedState=r}if(null!==(e=s.interleaved)){a=e;do{i=a.lane,ii.lanes|=i,Il|=i,a=a.next}while(a!==e)}else null===a&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function ji(e){var t=yi(),s=t.queue;if(null===s)throw Error(n(311));s.lastRenderedReducer=e;var r=s.dispatch,a=s.pending,i=t.memoizedState;if(null!==a){s.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);ir(i,t.memoizedState)||(bo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),s.lastRenderedState=i}return[i,r]}function Ni(){}function wi(e,t){var s=ii,r=yi(),a=t(),i=!ir(r.memoizedState,a);if(i&&(r.memoizedState=a,bo=!0),r=r.queue,Ri(Si.bind(null,s,r,e),[e]),r.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(s.flags|=2048,Pi(9,Ai.bind(null,s,r,a,t),void 0,null),null===Tl)throw Error(n(349));0!==(30&ni)||ki(s,t,a)}return a}function ki(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(s=t.stores)?t.stores=[e]:s.push(e)}function Ai(e,t,s,r){t.value=s,t.getSnapshot=r,Ci(t)&&_i(e)}function Si(e,t,s){return s(function(){Ci(t)&&_i(e)})}function Ci(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!ir(e,s)}catch(r){return!0}}function _i(e){var t=On(e,1);null!==t&&sc(t,e,1,-1)}function Ti(e){var t=fi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[t.memoizedState,e]}function Pi(e,t,s,r){return e={tag:e,create:t,destroy:s,deps:r,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(s=t.lastEffect)?t.lastEffect=e.next=e:(r=s.next,s.next=e,e.next=r,t.lastEffect=e),e}function Ei(){return yi().memoizedState}function Di(e,t,s,r){var a=fi();ii.flags|=e,a.memoizedState=Pi(1|t,s,void 0,void 0===r?null:r)}function Mi(e,t,s,r){var a=yi();r=void 0===r?null:r;var n=void 0;if(null!==oi){var i=oi.memoizedState;if(n=i.destroy,null!==r&&pi(r,i.deps))return void(a.memoizedState=Pi(t,s,n,r))}ii.flags|=e,a.memoizedState=Pi(1|t,s,n,r)}function Oi(e,t){return Di(8390656,8,e,t)}function Ri(e,t){return Mi(2048,8,e,t)}function Ii(e,t){return Mi(4,2,e,t)}function Li(e,t){return Mi(4,4,e,t)}function Fi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bi(e,t,s){return s=null!==s&&void 0!==s?s.concat([e]):null,Mi(4,4,Fi.bind(null,t,e),s)}function zi(){}function Ui(e,t){var s=yi();t=void 0===t?null:t;var r=s.memoizedState;return null!==r&&null!==t&&pi(t,r[1])?r[0]:(s.memoizedState=[e,t],e)}function Vi(e,t){var s=yi();t=void 0===t?null:t;var r=s.memoizedState;return null!==r&&null!==t&&pi(t,r[1])?r[0]:(e=e(),s.memoizedState=[e,t],e)}function Ki(e,t,s){return 0===(21&ni)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=s):(ir(s,t)||(s=xt(),ii.lanes|=s,Il|=s,e.baseState=!0),t)}function Wi(e,t){var s=bt;bt=0!==s&&4>s?s:4,e(!0);var r=ai.transition;ai.transition={};try{e(!1),t()}finally{bt=s,ai.transition=r}}function Hi(){return yi().memoizedState}function qi(e,t,s){var r=tc(e);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},Yi(e))$i(t,s);else if(null!==(s=Mn(e,t,s,r))){sc(s,e,r,ec()),Ji(s,t,r)}}function Gi(e,t,s){var r=tc(e),a={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(Yi(e))$i(t,a);else{var n=e.alternate;if(0===e.lanes&&(null===n||0===n.lanes)&&null!==(n=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=n(i,s);if(a.hasEagerState=!0,a.eagerState=o,ir(o,i)){var l=t.interleaved;return null===l?(a.next=a,Dn(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(s=Mn(e,t,a,r))&&(sc(s,e,r,a=ec()),Ji(s,t,r))}}function Yi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function $i(e,t){di=ci=!0;var s=e.pending;null===s?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Ji(e,t,s){if(0!==(4194240&s)){var r=t.lanes;s|=r&=e.pendingLanes,t.lanes=s,yt(e,s)}}var Qi={readContext:Pn,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Xi={readContext:Pn,useCallback:function(e,t){return fi().memoizedState=[e,void 0===t?null:t],e},useContext:Pn,useEffect:Oi,useImperativeHandle:function(e,t,s){return s=null!==s&&void 0!==s?s.concat([e]):null,Di(4194308,4,Fi.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Di(4194308,4,e,t)},useInsertionEffect:function(e,t){return Di(4,2,e,t)},useMemo:function(e,t){var s=fi();return t=void 0===t?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var r=fi();return t=void 0!==s?s(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qi.bind(null,ii,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},fi().memoizedState=e},useState:Ti,useDebugValue:zi,useDeferredValue:function(e){return fi().memoizedState=e},useTransition:function(){var e=Ti(!1),t=e[0];return e=Wi.bind(null,e[1]),fi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var r=ii,a=fi();if(rn){if(void 0===s)throw Error(n(407));s=s()}else{if(s=t(),null===Tl)throw Error(n(349));0!==(30&ni)||ki(r,t,s)}a.memoizedState=s;var i={value:s,getSnapshot:t};return a.queue=i,Oi(Si.bind(null,r,i,e),[e]),r.flags|=2048,Pi(9,Ai.bind(null,r,i,s,t),void 0,null),s},useId:function(){var e=fi(),t=Tl.identifierPrefix;if(rn){var s=Ja;t=":"+t+"R"+(s=($a&~(1<<32-it($a)-1)).toString(32)+s),0<(s=ui++)&&(t+="H"+s.toString(32)),t+=":"}else t=":"+t+"r"+(s=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Pn,useCallback:Ui,useContext:Pn,useEffect:Ri,useImperativeHandle:Bi,useInsertionEffect:Ii,useLayoutEffect:Li,useMemo:Vi,useReducer:vi,useRef:Ei,useState:function(){return vi(bi)},useDebugValue:zi,useDeferredValue:function(e){return Ki(yi(),oi.memoizedState,e)},useTransition:function(){return[vi(bi)[0],yi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:wi,useId:Hi,unstable_isNewReconciler:!1},eo={readContext:Pn,useCallback:Ui,useContext:Pn,useEffect:Ri,useImperativeHandle:Bi,useInsertionEffect:Ii,useLayoutEffect:Li,useMemo:Vi,useReducer:ji,useRef:Ei,useState:function(){return ji(bi)},useDebugValue:zi,useDeferredValue:function(e){var t=yi();return null===oi?t.memoizedState=e:Ki(t,oi.memoizedState,e)},useTransition:function(){return[ji(bi)[0],yi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:wi,useId:Hi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var s in t=L({},t),e=e.defaultProps)void 0===t[s]&&(t[s]=e[s]);return t}return t}function so(e,t,s,r){s=null===(s=s(r,t=e.memoizedState))||void 0===s?t:L({},t,s),e.memoizedState=s,0===e.lanes&&(e.updateQueue.baseState=s)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,s){e=e._reactInternals;var r=ec(),a=tc(e),n=Fn(r,a);n.payload=t,void 0!==s&&null!==s&&(n.callback=s),null!==(t=Bn(e,n,a))&&(sc(t,e,a,r),zn(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var r=ec(),a=tc(e),n=Fn(r,a);n.tag=1,n.payload=t,void 0!==s&&null!==s&&(n.callback=s),null!==(t=Bn(e,n,a))&&(sc(t,e,a,r),zn(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=ec(),r=tc(e),a=Fn(s,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Bn(e,a,r))&&(sc(t,e,r,s),zn(t,e,r))}};function ao(e,t,s,r,a,n,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,n,i):!t.prototype||!t.prototype.isPureReactComponent||(!or(s,r)||!or(a,n))}function no(e,t,s){var r=!1,a=Sa,n=t.contextType;return"object"===typeof n&&null!==n?n=Pn(n):(a=Ea(t)?Ta:Ca.current,n=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pa(e,a):Sa),t=new t(s,n),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=n),t}function io(e,t,s,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(s,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(s,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,s,r){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},In(e);var n=t.contextType;"object"===typeof n&&null!==n?a.context=Pn(n):(n=Ea(t)?Ta:Ca.current,a.context=Pa(e,n)),a.state=e.memoizedState,"function"===typeof(n=t.getDerivedStateFromProps)&&(so(e,t,n,s),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&ro.enqueueReplaceState(a,a.state,null),Vn(e,s,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var s="",r=t;do{s+=U(r),r=r.return}while(r);var a=s}catch(n){a="\nError generating stack: "+n.message+"\n"+n.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,s){return{value:e,source:null,stack:null!=s?s:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var ho="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,s){(s=Fn(-1,s)).tag=3,s.payload={element:null};var r=t.value;return s.callback=function(){Wl||(Wl=!0,Hl=r),uo(0,t)},s}function po(e,t,s){(s=Fn(-1,s)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;s.payload=function(){return r(a)},s.callback=function(){uo(0,t)}}var n=e.stateNode;return null!==n&&"function"===typeof n.componentDidCatch&&(s.callback=function(){uo(0,t),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),s}function xo(e,t,s){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(s)||(a.add(s),e=Ac.bind(null,e,t,s),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function fo(e,t,s,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,1===s.tag&&(null===s.alternate?s.tag=17:((t=Fn(-1,1)).tag=2,Bn(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var yo=v.ReactCurrentOwner,bo=!1;function vo(e,t,s,r){t.child=null===e?jn(t,null,s,r):vn(t,e.child,s,r)}function jo(e,t,s,r,a){s=s.render;var n=t.ref;return Tn(t,a),r=xi(e,t,s,r,n,a),s=gi(),null===e||bo?(rn&&s&&Za(t),t.flags|=1,vo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wo(e,t,a))}function No(e,t,s,r,a){if(null===e){var n=s.type;return"function"!==typeof n||Dc(n)||void 0!==n.defaultProps||null!==s.compare||void 0!==s.defaultProps?((e=Oc(s.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=n,wo(e,t,n,r,a))}if(n=e.child,0===(e.lanes&a)){var i=n.memoizedProps;if((s=null!==(s=s.compare)?s:or)(i,r)&&e.ref===t.ref)return Wo(e,t,a)}return t.flags|=1,(e=Mc(n,r)).ref=t.ref,e.return=t,t.child=e}function wo(e,t,s,r,a){if(null!==e){var n=e.memoizedProps;if(or(n,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=n,0===(e.lanes&a))return t.lanes=e.lanes,Wo(e,t,a);0!==(131072&e.flags)&&(bo=!0)}}return So(e,t,s,r,a)}function ko(e,t,s){var r=t.pendingProps,a=r.children,n=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Aa(Ml,Dl),Dl|=s;else{if(0===(1073741824&s))return e=null!==n?n.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Aa(Ml,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==n?n.baseLanes:s,Aa(Ml,Dl),Dl|=r}else null!==n?(r=n.baseLanes|s,t.memoizedState=null):r=s,Aa(Ml,Dl),Dl|=r;return vo(e,t,a,s),t.child}function Ao(e,t){var s=t.ref;(null===e&&null!==s||null!==e&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,s,r,a){var n=Ea(s)?Ta:Ca.current;return n=Pa(t,n),Tn(t,a),s=xi(e,t,s,r,n,a),r=gi(),null===e||bo?(rn&&r&&Za(t),t.flags|=1,vo(e,t,s,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wo(e,t,a))}function Co(e,t,s,r,a){if(Ea(s)){var n=!0;Ra(t)}else n=!1;if(Tn(t,a),null===t.stateNode)Ko(e,t),no(t,s,r),oo(t,s,r,a),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=s.contextType;"object"===typeof c&&null!==c?c=Pn(c):c=Pa(t,c=Ea(s)?Ta:Ca.current);var d=s.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==r||l!==c)&&io(t,i,r,c),Rn=!1;var h=t.memoizedState;i.state=h,Vn(t,r,i,a),l=t.memoizedState,o!==r||h!==l||_a.current||Rn?("function"===typeof d&&(so(t,s,d,r),l=t.memoizedState),(o=Rn||ao(t,s,o,r,h,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ln(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(l=s.contextType)&&null!==l?l=Pn(l):l=Pa(t,l=Ea(s)?Ta:Ca.current);var m=s.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||h!==l)&&io(t,i,r,l),Rn=!1,h=t.memoizedState,i.state=h,Vn(t,r,i,a);var p=t.memoizedState;o!==u||h!==p||_a.current||Rn?("function"===typeof m&&(so(t,s,m,r),p=t.memoizedState),(c=Rn||ao(t,s,c,r,h,p,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return _o(e,t,s,r,n,a)}function _o(e,t,s,r,a,n){Ao(e,t);var i=0!==(128&t.flags);if(!r&&!i)return a&&Ia(t,s,!1),Wo(e,t,n);r=t.stateNode,yo.current=t;var o=i&&"function"!==typeof s.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=vn(t,e.child,null,n),t.child=vn(t,null,o,n)):vo(e,t,o,n),t.memoizedState=r.state,a&&Ia(t,s,!0),t.child}function To(e){var t=e.stateNode;t.pendingContext?Ma(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ma(0,t.context,!1),$n(e,t.containerInfo)}function Po(e,t,s,r,a){return mn(),pn(a),t.flags|=256,vo(e,t,s,r),t.child}var Eo,Do,Mo,Oo,Ro={dehydrated:null,treeContext:null,retryLane:0};function Io(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,s){var r,a=t.pendingProps,i=Zn.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Aa(Zn,1&i),null===e)return cn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Ic(l,a,0,null),e=Rc(e,a,s,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Io(s),t.memoizedState=Ro,e):Fo(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,s,r,a,i,o){if(s)return 256&t.flags?(t.flags&=-257,Bo(e,t,o,r=co(Error(n(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Ic({mode:"visible",children:r.children},a,0,null),(i=Rc(i,a,o,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&vn(t,e.child,null,o),t.child.memoizedState=Io(o),t.memoizedState=Ro,i);if(0===(1&t.mode))return Bo(e,t,o,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,Bo(e,t,o,r=co(i=Error(n(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Tl)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|o))?0:a)&&a!==i.retryLane&&(i.retryLane=a,On(e,a),sc(r,e,a,-1))}return xc(),Bo(e,t,o,r=co(Error(n(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,sn=la(a.nextSibling),tn=t,rn=!0,an=null,null!==e&&(qa[Ga++]=$a,qa[Ga++]=Ja,qa[Ga++]=Ya,$a=e.id,Ja=e.overflow,Ya=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,i,s);if(o){o=a.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Mc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?o=Mc(r,o):(o=Rc(o,l,s,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Io(s):{baseLanes:l.baseLanes|s,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~s,t.memoizedState=Ro,a}return e=(o=e.child).sibling,a=Mc(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=s),a.return=t,a.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=a,t.memoizedState=null,a}function Fo(e,t){return(t=Ic({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bo(e,t,s,r){return null!==r&&pn(r),vn(t,e.child,null,s),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,s){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_n(e.return,t,s)}function Uo(e,t,s,r,a){var n=e.memoizedState;null===n?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:a}:(n.isBackwards=t,n.rendering=null,n.renderingStartTime=0,n.last=r,n.tail=s,n.tailMode=a)}function Vo(e,t,s){var r=t.pendingProps,a=r.revealOrder,n=r.tail;if(vo(e,t,r.children,s),0!==(2&(r=Zn.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,s,t);else if(19===e.tag)zo(e,s,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Aa(Zn,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;null!==s;)null!==(e=s.alternate)&&null===ei(e)&&(a=s),s=s.sibling;null===(s=a)?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),Uo(t,!1,a,s,n);break;case"backwards":for(s=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ei(e)){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}Uo(t,!0,s,null,n);break;case"together":Uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ko(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,s){if(null!==e&&(t.dependencies=e.dependencies),Il|=t.lanes,0===(s&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(n(153));if(null!==t.child){for(s=Mc(e=t.child,e.pendingProps),t.child=s,s.return=t;null!==e.sibling;)e=e.sibling,(s=s.sibling=Mc(e,e.pendingProps)).return=t;s.sibling=null}return t.child}function Ho(e,t){if(!rn)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;null!==t;)null!==t.alternate&&(s=t),t=t.sibling;null===s?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var r=null;null!==s;)null!==s.alternate&&(r=s),s=s.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,s=0,r=0;if(t)for(var a=e.child;null!==a;)s|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)s|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=s,t}function Go(e,t,s){var r=t.pendingProps;switch(en(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:case 17:return Ea(t.type)&&Da(),qo(t),null;case 3:return r=t.stateNode,Jn(),ka(_a),ka(Ca),si(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(un(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==an&&(ic(an),an=null))),Do(e,t),qo(t),null;case 5:Xn(t);var a=Yn(Gn.current);if(s=t.type,null!==e&&null!=t.stateNode)Mo(e,t,s,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(n(166));return qo(t),null}if(e=Yn(Hn.current),un(t)){r=t.stateNode,s=t.type;var i=t.memoizedProps;switch(r[ua]=t,r[ha]=i,e=0!==(1&t.mode),s){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(a=0;a<Or.length;a++)Fr(Or[a],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":J(r,i),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Fr("invalid",r);break;case"textarea":ae(r,i),Fr("invalid",r)}for(var l in ye(s,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Qr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Qr(r.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(s){case"input":q(r),Z(r,i,!0);break;case"textarea":q(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Xr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(s)),"http://www.w3.org/1999/xhtml"===e?"script"===s?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(s,{is:r.is}):(e=l.createElement(s),"select"===s&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,s),e[ua]=t,e[ha]=r,Eo(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(s,r),s){case"dialog":Fr("cancel",e),Fr("close",e),a=r;break;case"iframe":case"object":case"embed":Fr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Or.length;a++)Fr(Or[a],e);a=r;break;case"source":Fr("error",e),a=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),a=r;break;case"details":Fr("toggle",e),a=r;break;case"input":J(e,r),a=$(e,r),Fr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=L({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Fr("invalid",e)}for(i in ye(s,a),c=a)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?ge(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==s||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Fr("scroll",e):null!=d&&b(e,i,d,l))}switch(s){case"input":q(e),Z(e,r,!1);break;case"textarea":q(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?se(e,!!r.multiple,i,!1):null!=r.defaultValue&&se(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Xr)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&null!=t.stateNode)Oo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(n(166));if(s=Yn(Gn.current),Yn(Hn.current),un(t)){if(r=t.stateNode,s=t.memoizedProps,r[ua]=t,(i=r.nodeValue!==s)&&null!==(e=tn))switch(e.tag){case 3:Qr(r.nodeValue,s,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,s,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===s.nodeType?s:s.ownerDocument).createTextNode(r))[ua]=t,t.stateNode=r}return qo(t),null;case 13:if(ka(Zn),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rn&&null!==sn&&0!==(1&t.mode)&&0===(128&t.flags))hn(),mn(),t.flags|=98560,i=!1;else if(i=un(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(n(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(n(317));i[ua]=t}else mn(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qo(t),i=!1}else null!==an&&(ic(an),an=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=s,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zn.current)?0===Ol&&(Ol=3):xc())),null!==t.updateQueue&&(t.flags|=4),qo(t),null);case 4:return Jn(),Do(e,t),null===e&&Ur(t.stateNode.containerInfo),qo(t),null;case 10:return Cn(t.type._context),qo(t),null;case 19:if(ka(Zn),null===(i=t.memoizedState))return qo(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Ho(i,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Ho(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=s,s=t.child;null!==s;)e=r,(i=s).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Aa(Zn,1&Zn.current|2),t.child}e=e.sibling}null!==i.tail&&Qe()>Vl&&(t.flags|=128,r=!0,Ho(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ei(l))){if(t.flags|=128,r=!0,null!==(s=e.updateQueue)&&(t.updateQueue=s,t.flags|=4),Ho(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!rn)return qo(t),null}else 2*Qe()-i.renderingStartTime>Vl&&1073741824!==s&&(t.flags|=128,r=!0,Ho(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(s=i.last)?s.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qe(),t.sibling=null,s=Zn.current,Aa(Zn,r?1&s|2:1&s),t):(qo(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(qo(t),6&t.subtreeFlags&&(t.flags|=8192)):qo(t),null;case 24:case 25:return null}throw Error(n(156,t.tag))}function Yo(e,t){switch(en(t),t.tag){case 1:return Ea(t.type)&&Da(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Jn(),ka(_a),ka(Ca),si(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xn(t),null;case 13:if(ka(Zn),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(n(340));mn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ka(Zn),null;case 4:return Jn(),null;case 10:return Cn(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Eo=function(e,t){for(var s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Do=function(){},Mo=function(e,t,s,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Yn(Hn.current);var n,i=null;switch(s){case"input":a=$(e,a),r=$(e,r),i=[];break;case"select":a=L({},a,{value:void 0}),r=L({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Xr)}for(d in ye(s,r),s=null,a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var l=a[d];for(n in l)l.hasOwnProperty(n)&&(s||(s={}),s[n]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=a?a[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(n in l)!l.hasOwnProperty(n)||c&&c.hasOwnProperty(n)||(s||(s={}),s[n]="");for(n in c)c.hasOwnProperty(n)&&l[n]!==c[n]&&(s||(s={}),s[n]=c[n])}else s||(i||(i=[]),i.push(d,s)),s=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Oo=function(e,t,s,r){s!==r&&(t.flags|=4)};var $o=!1,Jo=!1,Qo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var s=e.ref;if(null!==s)if("function"===typeof s)try{s(null)}catch(r){kc(e,t,r)}else s.current=null}function el(e,t,s){try{s()}catch(r){kc(e,t,r)}}var tl=!1;function sl(e,t,s){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var n=a.destroy;a.destroy=void 0,void 0!==n&&el(t,s,n)}a=a.next}while(a!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var s=t=t.next;do{if((s.tag&e)===e){var r=s.create;s.destroy=r()}s=s.next}while(s!==t)}}function al(e){var t=e.ref;if(null!==t){var s=e.stateNode;e.tag,e=s,"function"===typeof t?t(e):t.current=e}}function nl(e){var t=e.alternate;null!==t&&(e.alternate=null,nl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ua],delete t[ha],delete t[pa],delete t[xa],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,s){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===s.nodeType?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(8===s.nodeType?(t=s.parentNode).insertBefore(e,s):(t=s).appendChild(e),null!==(s=s._reactRootContainer)&&void 0!==s||null!==t.onclick||(t.onclick=Xr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,s),e=e.sibling;null!==e;)ll(e,t,s),e=e.sibling}function cl(e,t,s){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,s),e=e.sibling;null!==e;)cl(e,t,s),e=e.sibling}var dl=null,ul=!1;function hl(e,t,s){for(s=s.child;null!==s;)ml(e,t,s),s=s.sibling}function ml(e,t,s){if(nt&&"function"===typeof nt.onCommitFiberUnmount)try{nt.onCommitFiberUnmount(at,s)}catch(o){}switch(s.tag){case 5:Jo||Zo(s,t);case 6:var r=dl,a=ul;dl=null,hl(e,t,s),ul=a,null!==(dl=r)&&(ul?(e=dl,s=s.stateNode,8===e.nodeType?e.parentNode.removeChild(s):e.removeChild(s)):dl.removeChild(s.stateNode));break;case 18:null!==dl&&(ul?(e=dl,s=s.stateNode,8===e.nodeType?oa(e.parentNode,s):1===e.nodeType&&oa(e,s),Vt(e)):oa(dl,s.stateNode));break;case 4:r=dl,a=ul,dl=s.stateNode.containerInfo,ul=!0,hl(e,t,s),dl=r,ul=a;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(r=s.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var n=a,i=n.destroy;n=n.tag,void 0!==i&&(0!==(2&n)||0!==(4&n))&&el(s,t,i),a=a.next}while(a!==r)}hl(e,t,s);break;case 1:if(!Jo&&(Zo(s,t),"function"===typeof(r=s.stateNode).componentWillUnmount))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(o){kc(s,t,o)}hl(e,t,s);break;case 21:hl(e,t,s);break;case 22:1&s.mode?(Jo=(r=Jo)||null!==s.memoizedState,hl(e,t,s),Jo=r):hl(e,t,s);break;default:hl(e,t,s)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var s=e.stateNode;null===s&&(s=e.stateNode=new Qo),t.forEach(function(t){var r=_c.bind(null,e,t);s.has(t)||(s.add(t),t.then(r,r))})}}function xl(e,t){var s=t.deletions;if(null!==s)for(var r=0;r<s.length;r++){var a=s[r];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(n(160));ml(i,o,a),dl=null,ul=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(d){kc(a,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xl(t,e),fl(e),4&r){try{sl(3,e,e.return),rl(3,e)}catch(g){kc(e,e.return,g)}try{sl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:xl(t,e),fl(e),512&r&&null!==s&&Zo(s,s.return);break;case 5:if(xl(t,e),fl(e),512&r&&null!==s&&Zo(s,s.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(g){kc(e,e.return,g)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,o=null!==s?s.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Q(a,i),be(l,o);var d=be(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(a,h):"dangerouslySetInnerHTML"===u?ue(a,h):"children"===u?he(a,h):b(a,u,h,d)}switch(l){case"input":X(a,i);break;case"textarea":ne(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?se(a,!!i.multiple,p,!1):m!==!!i.multiple&&(null!=i.defaultValue?se(a,!!i.multiple,i.defaultValue,!0):se(a,!!i.multiple,i.multiple?[]:"",!1))}a[ha]=i}catch(g){kc(e,e.return,g)}}break;case 6:if(xl(t,e),fl(e),4&r){if(null===e.stateNode)throw Error(n(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){kc(e,e.return,g)}}break;case 3:if(xl(t,e),fl(e),4&r&&null!==s&&s.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:xl(t,e),fl(e);break;case 13:xl(t,e),fl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Ul=Qe())),4&r&&pl(e);break;case 22:if(u=null!==s&&null!==s.memoizedState,1&e.mode?(Jo=(d=Jo)||u,xl(t,e),Jo=d):xl(t,e),fl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Xo=e,u=e.child;null!==u;){for(h=Xo=u;null!==Xo;){switch(p=(m=Xo).child,m.tag){case 0:case 11:case 14:case 15:sl(4,m,m.return);break;case 1:Zo(m,m.return);var x=m.stateNode;if("function"===typeof x.componentWillUnmount){r=m,s=m.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(g){kc(r,s,g)}}break;case 5:Zo(m,m.return);break;case 22:if(null!==m.memoizedState){jl(h);continue}}null!==p?(p.return=m,Xo=p):jl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{a=h.stateNode,d?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=xe("display",o))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:xl(t,e),fl(e),4&r&&pl(e);case 21:}}function fl(e){var t=e.flags;if(2&t){try{e:{for(var s=e.return;null!==s;){if(il(s)){var r=s;break e}s=s.return}throw Error(n(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(n(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,s){Xo=e,bl(e,t,s)}function bl(e,t,s){for(var r=0!==(1&e.mode);null!==Xo;){var a=Xo,n=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||$o;if(!i){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=$o;var c=Jo;if($o=i,(Jo=l)&&!c)for(Xo=a;null!==Xo;)l=(i=Xo).child,22===i.tag&&null!==i.memoizedState?Nl(a):null!==l?(l.return=i,Xo=l):Nl(a);for(;null!==n;)Xo=n,bl(n,t,s),n=n.sibling;Xo=a,$o=o,Jo=c}vl(e)}else 0!==(8772&a.subtreeFlags)&&null!==n?(n.return=a,Xo=n):vl(e)}}function vl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var s=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Jo)if(null===s)r.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:to(t.type,s.memoizedProps);r.componentDidUpdate(a,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Kn(t,i,r);break;case 3:var o=t.updateQueue;if(null!==o){if(s=null,null!==t.child)switch(t.child.tag){case 5:case 1:s=t.child.stateNode}Kn(t,o,s)}break;case 5:var l=t.stateNode;if(null===s&&4&t.flags){s=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(n(163))}Jo||512&t.flags&&al(t)}catch(m){kc(t,t.return,m)}}if(t===e){Xo=null;break}if(null!==(s=t.sibling)){s.return=t.return,Xo=s;break}Xo=t.return}}function jl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xo=s;break}Xo=t.return}}function Nl(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{rl(4,t)}catch(l){kc(t,s,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){kc(t,a,l)}}var n=t.return;try{al(t)}catch(l){kc(t,n,l)}break;case 5:var i=t.return;try{al(t)}catch(l){kc(t,i,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var wl,kl=Math.ceil,Al=v.ReactCurrentDispatcher,Sl=v.ReactCurrentOwner,Cl=v.ReactCurrentBatchConfig,_l=0,Tl=null,Pl=null,El=0,Dl=0,Ml=wa(0),Ol=0,Rl=null,Il=0,Ll=0,Fl=0,Bl=null,zl=null,Ul=0,Vl=1/0,Kl=null,Wl=!1,Hl=null,ql=null,Gl=!1,Yl=null,$l=0,Jl=0,Ql=null,Xl=-1,Zl=0;function ec(){return 0!==(6&_l)?Qe():-1!==Xl?Xl:Xl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&_l)&&0!==El?El&-El:null!==xn.transition?(0===Zl&&(Zl=xt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function sc(e,t,s,r){if(50<Jl)throw Jl=0,Ql=null,Error(n(185));ft(e,s,r),0!==(2&_l)&&e===Tl||(e===Tl&&(0===(2&_l)&&(Ll|=s),4===Ol&&oc(e,El)),rc(e,r),1===s&&0===_l&&0===(1&t.mode)&&(Vl=Qe()+500,Fa&&Ua()))}function rc(e,t){var s=e.callbackNode;!function(e,t){for(var s=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,n=e.pendingLanes;0<n;){var i=31-it(n),o=1<<i,l=a[i];-1===l?0!==(o&s)&&0===(o&r)||(a[i]=mt(o,t)):l<=t&&(e.expiredLanes|=o),n&=~o}}(e,t);var r=ht(e,e===Tl?El:0);if(0===r)null!==s&&Ye(s),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=s&&Ye(s),1===t)0===e.tag?function(e){Fa=!0,za(e)}(lc.bind(null,e)):za(lc.bind(null,e)),na(function(){0===(6&_l)&&Ua()}),s=null;else{switch(vt(r)){case 1:s=Ze;break;case 4:s=et;break;case 16:default:s=tt;break;case 536870912:s=rt}s=Tc(s,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function ac(e,t){if(Xl=-1,Zl=0,0!==(6&_l))throw Error(n(327));var s=e.callbackNode;if(Nc()&&e.callbackNode!==s)return null;var r=ht(e,e===Tl?El:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var a=_l;_l|=2;var i=pc();for(Tl===e&&El===t||(Kl=null,Vl=Qe()+500,hc(e,t));;)try{yc();break}catch(l){mc(e,l)}Sn(),Al.current=i,_l=a,null!==Pl?t=0:(Tl=null,El=0,t=Ol)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=nc(e,a))),1===t)throw s=Rl,hc(e,0),oc(e,r),rc(e,Qe()),s;if(6===t)oc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var s=t.updateQueue;if(null!==s&&null!==(s=s.stores))for(var r=0;r<s.length;r++){var a=s[r],n=a.getSnapshot;a=a.value;try{if(!ir(n(),a))return!1}catch(o){return!1}}}if(s=t.child,16384&t.subtreeFlags&&null!==s)s.return=t,t=s;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,r))&&(0!==(i=pt(e))&&(r=i,t=nc(e,i))),1===t))throw s=Rl,hc(e,0),oc(e,r),rc(e,Qe()),s;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(n(345));case 2:case 5:jc(e,zl,Kl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Ul+500-Qe())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=sa(jc.bind(null,e,zl,Kl),t);break}jc(e,zl,Kl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-it(r);i=1<<o,(o=t[o])>a&&(a=o),r&=~i}if(r=a,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=sa(jc.bind(null,e,zl,Kl),r);break}jc(e,zl,Kl);break;default:throw Error(n(329))}}}return rc(e,Qe()),e.callbackNode===s?ac.bind(null,e):null}function nc(e,t){var s=Bl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zl,zl=s,null!==t&&ic(t)),e}function ic(e){null===zl?zl=e:zl.push.apply(zl,e)}function oc(e,t){for(t&=~Fl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-it(t),r=1<<s;e[s]=-1,t&=~r}}function lc(e){if(0!==(6&_l))throw Error(n(327));Nc();var t=ht(e,0);if(0===(1&t))return rc(e,Qe()),null;var s=gc(e,t);if(0!==e.tag&&2===s){var r=pt(e);0!==r&&(t=r,s=nc(e,r))}if(1===s)throw s=Rl,hc(e,0),oc(e,t),rc(e,Qe()),s;if(6===s)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,zl,Kl),rc(e,Qe()),null}function cc(e,t){var s=_l;_l|=1;try{return e(t)}finally{0===(_l=s)&&(Vl=Qe()+500,Fa&&Ua())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&_l)&&Nc();var t=_l;_l|=1;var s=Cl.transition,r=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=r,Cl.transition=s,0===(6&(_l=t))&&Ua()}}function uc(){Dl=Ml.current,ka(Ml)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(-1!==s&&(e.timeoutHandle=-1,ra(s)),null!==Pl)for(s=Pl.return;null!==s;){var r=s;switch(en(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Da();break;case 3:Jn(),ka(_a),ka(Ca),si();break;case 5:Xn(r);break;case 4:Jn();break;case 13:case 19:ka(Zn);break;case 10:Cn(r.type._context);break;case 22:case 23:uc()}s=s.return}if(Tl=e,Pl=e=Mc(e.current,null),El=Dl=t,Ol=0,Rl=null,Fl=Ll=Il=0,zl=Bl=null,null!==En){for(t=0;t<En.length;t++)if(null!==(r=(s=En[t]).interleaved)){s.interleaved=null;var a=r.next,n=s.pending;if(null!==n){var i=n.next;n.next=a,r.next=i}s.pending=r}En=null}return e}function mc(e,t){for(;;){var s=Pl;try{if(Sn(),ri.current=Qi,ci){for(var r=ii.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ci=!1}if(ni=0,li=oi=ii=null,di=!1,ui=0,Sl.current=null,null===s||null===s.return){Ol=1,Rl=t,Pl=null;break}e:{var i=e,o=s.return,l=s,c=t;if(t=El,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,fo(p,o,l,0,t),1&p.mode&&xo(i,d,t),c=d;var x=(t=p).updateQueue;if(null===x){var g=new Set;g.add(c),t.updateQueue=g}else x.add(c);break e}if(0===(1&t)){xo(i,d,t),xc();break e}c=Error(n(426))}else if(rn&&1&l.mode){var f=go(o);if(null!==f){0===(65536&f.flags)&&(f.flags|=256),fo(f,o,l,0,t),pn(lo(c,l));break e}}i=c=lo(c,l),4!==Ol&&(Ol=2),null===Bl?Bl=[i]:Bl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Un(i,mo(0,c,t));break e;case 1:l=c;var y=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Un(i,po(i,l,t));break e}}i=i.return}while(null!==i)}vc(s)}catch(v){t=v,Pl===s&&null!==s&&(Pl=s=s.return);continue}break}}function pc(){var e=Al.current;return Al.current=Qi,null===e?Qi:e}function xc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Tl||0===(268435455&Il)&&0===(268435455&Ll)||oc(Tl,El)}function gc(e,t){var s=_l;_l|=2;var r=pc();for(Tl===e&&El===t||(Kl=null,hc(e,t));;)try{fc();break}catch(a){mc(e,a)}if(Sn(),_l=s,Al.current=r,null!==Pl)throw Error(n(261));return Tl=null,El=0,Ol}function fc(){for(;null!==Pl;)bc(Pl)}function yc(){for(;null!==Pl&&!$e();)bc(Pl)}function bc(e){var t=wl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?vc(e):Pl=t,Sl.current=null}function vc(e){var t=e;do{var s=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(s=Go(s,t,Dl)))return void(Pl=s)}else{if(null!==(s=Yo(s,t)))return s.flags&=32767,void(Pl=s);if(null===e)return Ol=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ol&&(Ol=5)}function jc(e,t,s){var r=bt,a=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,s,r){do{Nc()}while(null!==Yl);if(0!==(6&_l))throw Error(n(327));s=e.finishedWork;var a=e.finishedLanes;if(null===s)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(function(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-it(s),n=1<<a;t[a]=0,r[a]=-1,e[a]=-1,s&=~n}}(e,i),e===Tl&&(Pl=Tl=null,El=0),0===(2064&s.subtreeFlags)&&0===(2064&s.flags)||Gl||(Gl=!0,Tc(tt,function(){return Nc(),null})),i=0!==(15990&s.flags),0!==(15990&s.subtreeFlags)||i){i=Cl.transition,Cl.transition=null;var o=bt;bt=1;var l=_l;_l|=4,Sl.current=null,function(e,t){if(Zr=Wt,hr(e=ur())){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(s=(s=e.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(r&&0!==r.rangeCount){s=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{s.nodeType,i.nodeType}catch(j){s=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==s||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===s&&++d===a&&(l=o),m===i&&++u===r&&(c=o),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}s=-1===l||-1===c?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(ea={focusedElem:e,selectionRange:s},Wt=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var x=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==x){var g=x.memoizedProps,f=x.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),f);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(n(163))}}catch(j){kc(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}x=tl,tl=!1}(e,s),gl(s,e),mr(ea),Wt=!!Zr,ea=Zr=null,e.current=s,yl(s,e,a),Je(),_l=l,bt=o,Cl.transition=i}else e.current=s;if(Gl&&(Gl=!1,Yl=e,$l=a),i=e.pendingLanes,0===i&&(ql=null),function(e){if(nt&&"function"===typeof nt.onCommitFiberRoot)try{nt.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(s.stateNode),rc(e,Qe()),null!==t)for(r=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],r(a.value,{componentStack:a.stack,digest:a.digest});if(Wl)throw Wl=!1,e=Hl,Hl=null,e;0!==(1&$l)&&0!==e.tag&&Nc(),i=e.pendingLanes,0!==(1&i)?e===Ql?Jl++:(Jl=0,Ql=e):Jl=0,Ua()}(e,t,s,r)}finally{Cl.transition=a,bt=r}return null}function Nc(){if(null!==Yl){var e=vt($l),t=Cl.transition,s=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,$l=0,0!==(6&_l))throw Error(n(331));var a=_l;for(_l|=4,Xo=e.current;null!==Xo;){var i=Xo,o=i.child;if(0!==(16&Xo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Xo=d;null!==Xo;){var u=Xo;switch(u.tag){case 0:case 11:case 15:sl(8,u,i)}var h=u.child;if(null!==h)h.return=u,Xo=h;else for(;null!==Xo;){var m=(u=Xo).sibling,p=u.return;if(nl(u),u===d){Xo=null;break}if(null!==m){m.return=p,Xo=m;break}Xo=p}}}var x=i.alternate;if(null!==x){var g=x.child;if(null!==g){x.child=null;do{var f=g.sibling;g.sibling=null,g=f}while(null!==g)}}Xo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(i=Xo).flags))switch(i.tag){case 0:case 11:case 15:sl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Xo=y;break e}Xo=i.return}}var b=e.current;for(Xo=b;null!==Xo;){var v=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==v)v.return=o,Xo=v;else e:for(o=b;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(N){kc(l,l.return,N)}if(l===o){Xo=null;break e}var j=l.sibling;if(null!==j){j.return=l.return,Xo=j;break e}Xo=l.return}}if(_l=a,Ua(),nt&&"function"===typeof nt.onPostCommitFiberRoot)try{nt.onPostCommitFiberRoot(at,e)}catch(N){}r=!0}return r}finally{bt=s,Cl.transition=t}}return!1}function wc(e,t,s){e=Bn(e,t=mo(0,t=lo(s,t),1),1),t=ec(),null!==e&&(ft(e,1,t),rc(e,t))}function kc(e,t,s){if(3===e.tag)wc(e,e,s);else for(;null!==t;){if(3===t.tag){wc(t,e,s);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=Bn(t,e=po(t,e=lo(s,e),1),1),e=ec(),null!==t&&(ft(t,1,e),rc(t,e));break}}t=t.return}}function Ac(e,t,s){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&s,Tl===e&&(El&s)===s&&(4===Ol||3===Ol&&(130023424&El)===El&&500>Qe()-Ul?hc(e,0):Fl|=s),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var s=ec();null!==(e=On(e,t))&&(ft(e,t,s),rc(e,s))}function Cc(e){var t=e.memoizedState,s=0;null!==t&&(s=t.retryLane),Sc(e,s)}function _c(e,t){var s=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(s=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(n(314))}null!==r&&r.delete(t),Sc(e,s)}function Tc(e,t){return Ge(e,t)}function Pc(e,t,s,r){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ec(e,t,s,r){return new Pc(e,t,s,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var s=e.alternate;return null===s?((s=Ec(e.tag,t,e.key,e.mode)).elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=14680064&e.flags,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Oc(e,t,s,r,a,i){var o=2;if(r=e,"function"===typeof e)Dc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case w:return Rc(s.children,a,i,t);case k:o=8,a|=8;break;case A:return(e=Ec(12,s,t,2|a)).elementType=A,e.lanes=i,e;case T:return(e=Ec(13,s,t,a)).elementType=T,e.lanes=i,e;case P:return(e=Ec(19,s,t,a)).elementType=P,e.lanes=i,e;case M:return Ic(s,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case C:o=9;break e;case _:o=11;break e;case E:o=14;break e;case D:o=16,r=null;break e}throw Error(n(130,null==e?e:typeof e,""))}return(t=Ec(o,s,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Rc(e,t,s,r){return(e=Ec(7,e,r,t)).lanes=s,e}function Ic(e,t,s,r){return(e=Ec(22,e,r,t)).elementType=M,e.lanes=s,e.stateNode={isHidden:!1},e}function Lc(e,t,s){return(e=Ec(6,e,null,t)).lanes=s,e}function Fc(e,t,s){return(t=Ec(4,null!==e.children?e.children:[],e.key,t)).lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,s,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function zc(e,t,s,r,a,n,i,o,l){return e=new Bc(e,t,s,o,l),1===t?(t=1,!0===n&&(t|=8)):t=0,n=Ec(3,null,null,t),e.current=n,n.stateNode=e,n.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},In(n),e}function Uc(e){if(!e)return Sa;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ea(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(n(171))}if(1===e.tag){var s=e.type;if(Ea(s))return Oa(e,s,t)}return t}function Vc(e,t,s,r,a,n,i,o,l){return(e=zc(s,r,!0,e,0,n,0,o,l)).context=Uc(null),s=e.current,(n=Fn(r=ec(),a=tc(s))).callback=void 0!==t&&null!==t?t:null,Bn(s,n,a),e.current.lanes=a,ft(e,a,r),rc(e,r),e}function Kc(e,t,s,r){var a=t.current,n=ec(),i=tc(a);return s=Uc(s),null===t.context?t.context=s:t.pendingContext=s,(t=Fn(n,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Bn(a,t,i))&&(sc(e,a,i,n),zn(e,a,i)),i}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var s=e.retryLane;e.retryLane=0!==s&&s<t?s:t}}function qc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}wl=function(e,t,s){if(null!==e)if(e.memoizedProps!==t.pendingProps||_a.current)bo=!0;else{if(0===(e.lanes&s)&&0===(128&t.flags))return bo=!1,function(e,t,s){switch(t.tag){case 3:To(t),mn();break;case 5:Qn(t);break;case 1:Ea(t.type)&&Ra(t);break;case 4:$n(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Aa(Nn,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Aa(Zn,1&Zn.current),t.flags|=128,null):0!==(s&t.child.childLanes)?Lo(e,t,s):(Aa(Zn,1&Zn.current),null!==(e=Wo(e,t,s))?e.sibling:null);Aa(Zn,1&Zn.current);break;case 19:if(r=0!==(s&t.childLanes),0!==(128&e.flags)){if(r)return Vo(e,t,s);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Aa(Zn,Zn.current),r)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,s)}return Wo(e,t,s)}(e,t,s);bo=0!==(131072&e.flags)}else bo=!1,rn&&0!==(1048576&t.flags)&&Xa(t,Ha,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ko(e,t),e=t.pendingProps;var a=Pa(t,Ca.current);Tn(t,s),a=xi(null,t,r,e,a,s);var i=gi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ea(r)?(i=!0,Ra(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,In(t),a.updater=ro,t.stateNode=a,a._reactInternals=t,oo(t,r,e,s),t=_o(null,t,r,!0,i,s)):(t.tag=0,rn&&i&&Za(t),vo(null,t,a,s),t=t.child),t;case 16:r=t.elementType;e:{switch(Ko(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===E)return 14}return 2}(r),e=to(r,e),a){case 0:t=So(null,t,r,e,s);break e;case 1:t=Co(null,t,r,e,s);break e;case 11:t=jo(null,t,r,e,s);break e;case 14:t=No(null,t,r,to(r.type,e),s);break e}throw Error(n(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,So(e,t,r,a=t.elementType===r?a:to(r,a),s);case 1:return r=t.type,a=t.pendingProps,Co(e,t,r,a=t.elementType===r?a:to(r,a),s);case 3:e:{if(To(t),null===e)throw Error(n(387));r=t.pendingProps,a=(i=t.memoizedState).element,Ln(e,t),Vn(t,r,null,s);var o=t.memoizedState;if(r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Po(e,t,r,s,a=lo(Error(n(423)),t));break e}if(r!==a){t=Po(e,t,r,s,a=lo(Error(n(424)),t));break e}for(sn=la(t.stateNode.containerInfo.firstChild),tn=t,rn=!0,an=null,s=jn(t,null,r,s),t.child=s;s;)s.flags=-3&s.flags|4096,s=s.sibling}else{if(mn(),r===a){t=Wo(e,t,s);break e}vo(e,t,r,s)}t=t.child}return t;case 5:return Qn(t),null===e&&cn(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,ta(r,a)?o=null:null!==i&&ta(r,i)&&(t.flags|=32),Ao(e,t),vo(e,t,o,s),t.child;case 6:return null===e&&cn(t),null;case 13:return Lo(e,t,s);case 4:return $n(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=vn(t,null,r,s):vo(e,t,r,s),t.child;case 11:return r=t.type,a=t.pendingProps,jo(e,t,r,a=t.elementType===r?a:to(r,a),s);case 7:return vo(e,t,t.pendingProps,s),t.child;case 8:case 12:return vo(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Aa(Nn,r._currentValue),r._currentValue=o,null!==i)if(ir(i.value,o)){if(i.children===a.children&&!_a.current){t=Wo(e,t,s);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Fn(-1,s&-s)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,null!==(c=i.alternate)&&(c.lanes|=s),_n(i.return,s,t),l.lanes|=s;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(n(341));o.lanes|=s,null!==(l=o.alternate)&&(l.lanes|=s),_n(o,s,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}vo(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Tn(t,s),r=r(a=Pn(a)),t.flags|=1,vo(e,t,r,s),t.child;case 14:return a=to(r=t.type,t.pendingProps),No(e,t,r,a=to(r.type,a),s);case 15:return wo(e,t,t.type,t.pendingProps,s);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:to(r,a),Ko(e,t),t.tag=1,Ea(r)?(e=!0,Ra(t)):e=!1,Tn(t,s),no(t,r,a),oo(t,r,a,s),_o(null,t,r,!0,e,s);case 19:return Vo(e,t,s);case 22:return ko(e,t,s)}throw Error(n(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,s,r,a){var n=s._reactRootContainer;if(n){var i=n;if("function"===typeof a){var o=a;a=function(){var e=Wc(i);o.call(e)}}Kc(t,i,e,a)}else i=function(e,t,s,r,a){if(a){if("function"===typeof r){var n=r;r=function(){var e=Wc(i);n.call(e)}}var i=Vc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=i,e[ma]=i.current,Ur(8===e.nodeType?e.parentNode:e),dc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var o=r;r=function(){var e=Wc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[ma]=l.current,Ur(8===e.nodeType?e.parentNode:e),dc(function(){Kc(t,l,s,r)}),l}(s,t,e,a,r);return Wc(i)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(n(409));Kc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Kc(null,e,null,null)}),t[ma]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Mt.length&&0!==t&&t<Mt[s].priority;s++);Mt.splice(s,0,e),0===s&&Lt(e)}},jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=ut(t.pendingLanes);0!==s&&(yt(t,1|s),rc(t,Qe()),0===(6&_l)&&(Vl=Qe()+500,Ua()))}break;case 13:dc(function(){var t=On(e,1);if(null!==t){var s=ec();sc(t,e,1,s)}}),qc(e,1)}},Nt=function(e){if(13===e.tag){var t=On(e,134217728);if(null!==t)sc(t,e,134217728,ec());qc(e,134217728)}},wt=function(e){if(13===e.tag){var t=tc(e),s=On(e,t);if(null!==s)sc(s,e,t,ec());qc(e,t)}},kt=function(){return bt},At=function(e,t){var s=bt;try{return bt=e,t()}finally{bt=s}},Ne=function(e,t,s){switch(t){case"input":if(X(e,s),t=s.name,"radio"===s.type&&null!=t){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var r=s[t];if(r!==e&&r.form===e.form){var a=va(r);if(!a)throw Error(n(90));G(r),X(r,a)}}}break;case"textarea":ne(e,s);break;case"select":null!=(t=s.value)&&se(e,!!s.multiple,t,!1)}},_e=cc,Te=dc;var ed={usingClientEntryPoint:!1,Events:[ya,ba,va,Se,Ce,cc]},td={findFiberByHostInstance:fa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{at=rd.inject(sd),nt=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(n(200));return function(e,t,s){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:e,containerInfo:t,implementation:s}}(e,t,null,s)},t.createRoot=function(e,t){if(!Jc(e))throw Error(n(299));var s=!1,r="",a=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(s=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=zc(e,1,!1,null,0,s,0,r,a),e[ma]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(n(188));throw e=Object.keys(e).join(","),Error(n(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,s){if(!Qc(t))throw Error(n(200));return Zc(null,e,t,!0,s)},t.hydrateRoot=function(e,t,s){if(!Jc(e))throw Error(n(405));var r=null!=s&&s.hydratedSources||null,a=!1,i="",o=Gc;if(null!==s&&void 0!==s&&(!0===s.unstable_strictMode&&(a=!0),void 0!==s.identifierPrefix&&(i=s.identifierPrefix),void 0!==s.onRecoverableError&&(o=s.onRecoverableError)),t=Vc(t,null,e,1,null!=s?s:null,a,0,i,o),e[ma]=t.current,Ur(e),r)for(e=0;e<r.length;e++)a=(a=(s=r[e])._getVersion)(s._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new $c(t)},t.render=function(e,t,s){if(!Qc(t))throw Error(n(200));return Zc(null,e,t,!1,s)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(n(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[ma]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,s,r){if(!Qc(s))throw Error(n(200));if(null==e||void 0===e._reactInternals)throw Error(n(38));return Zc(e,t,s,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},2761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},2777:(e,t,s)=>{var r=s(5193),a=s(2761),n=Object.prototype,i=n.hasOwnProperty,o=n.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return a(e)&&i.call(e,"callee")&&!o.call(e,"callee")};e.exports=l},2794:(e,t,s)=>{var r=s(9742),a=s(7498),n=s(9096);e.exports=function(e,t){return e&&e.length?r(e,n(t,2),a):void 0}},2811:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]])},2854:e=>{"use strict";function t(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,s){e.classList?e.classList.remove(s):"string"===typeof e.className?e.className=t(e.className,s):e.setAttribute("class",t(e.className&&e.className.baseVal||"",s))}},2866:(e,t,s)=>{var r=s(2969);e.exports=function(e){return function(t){return r(t,e)}}},2929:(e,t,s)=>{var r=s(6552).Uint8Array;e.exports=r},2969:(e,t,s)=>{var r=s(5324),a=s(914);e.exports=function(e,t){for(var s=0,n=(t=r(t,e)).length;null!=e&&s<n;)e=e[a(t[s++])];return s&&s==n?e:void 0}},3028:e=>{e.exports=function(e,t){return function(s){return e(t(s))}}},3033:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]])},3062:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},3097:(e,t,s)=>{var r=s(2969);e.exports=function(e,t,s){var a=null==e?void 0:r(e,t);return void 0===a?s:a}},3165:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},3204:(e,t,s)=>{var r=s(3343),a=s(2777),n=s(4052),i=s(4543),o=s(9194),l=s(1268),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var s=n(e),d=!s&&a(e),u=!s&&!d&&i(e),h=!s&&!d&&!u&&l(e),m=s||d||u||h,p=m?r(e.length,String):[],x=p.length;for(var g in e)!t&&!c.call(e,g)||m&&("length"==g||u&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||o(g,x))||p.push(g);return p}},3211:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3279:e=>{e.exports=function(e){return e}},3331:(e,t,s)=>{var r=s(9676),a=s(929),n=s(7303);e.exports=function(e){return function(t,s,i){return i&&"number"!=typeof i&&a(t,s,i)&&(s=i=void 0),t=n(t),void 0===s?(s=t,t=0):s=n(s),i=void 0===i?t<s?1:-1:n(i),r(t,s,i,e)}}},3343:e=>{e.exports=function(e,t){for(var s=-1,r=Array(e);++s<e;)r[s]=t(s);return r}},3366:(e,t,s)=>{var r=s(7894),a=s(9057);e.exports=function(e,t){return null!=e&&a(e,t,r)}},3411:(e,t,s)=>{var r=s(149),a=s(9096),n=s(8883),i=s(4052);e.exports=function(e,t){return(i(e)?r:n)(e,a(t,3))}},3440:(e,t,s)=>{var r=s(6552)["__core-js_shared__"];e.exports=r},3538:(e,t,s)=>{var r=s(755),a=s(3411);e.exports=function(e,t){return r(a(e,t),1)}},3540:(e,t,s)=>{"use strict";s.d(t,{Tt:()=>u,cV:()=>g,cx:()=>c,hl:()=>h,mL:()=>m,pR:()=>f,ut:()=>y,z3:()=>d});var r=s(9379),a=s(3862);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000/api",i=()=>{const e=localStorage.getItem("depotToken")||localStorage.getItem("token")||localStorage.getItem("adminToken")||localStorage.getItem("authToken");return console.log("Using token for API calls:",e?"Token found":"No token found"),{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}},o=async e=>{if(!e.ok){const t=await e.json().catch(()=>({}));throw new Error(t.message||"HTTP error! status: ".concat(e.status))}return e.json()},l=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const s=e.startsWith("/api")?e:"/api".concat(e.startsWith("/")?"":"/").concat(e),n=new URL(s,"http://localhost:5000");n.searchParams.delete("_t");const i=n.pathname+n.search,o=Date.now(),l=p.get(i);if(l&&o-l.timestamp<5e3)return console.log("Returning cached data for ".concat(i)),l.data;const c=await(0,a.nr)(s,(0,r.A)({method:"GET"},t));if(c&&c.ok)return p.set(i,{data:c.data,timestamp:o}),c.data;if(t.suppressError)return console.warn("Suppressed error for ".concat(e,":"),c.message||"Request failed"),p.set(i,{data:null,timestamp:o}),null;const d=c&&c.message||"Request failed";throw new Error(d)}catch(s){if(t.suppressError){console.warn("Suppressed error for ".concat(e,":"),s.message);const t=new URL(e.startsWith("/api")?e:"/api".concat(e.startsWith("/")?"":"/").concat(e),"http://localhost:5000");t.searchParams.delete("_t");const r=t.pathname+t.search;return p.set(r,{data:null,timestamp:Date.now()}),null}throw s}},c={getBuses:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();let t=await l("/depot/buses".concat(e?"?".concat(e):""),{suppressError:!0});return t||{success:!0,data:{buses:[],stats:{totalBuses:0,availableBuses:0,maintenanceBuses:0}}}},getBusDetails:async e=>l("/depot/buses/".concat(e)),addBus:async e=>{const t=await fetch("".concat(n,"/depot/buses"),{method:"POST",headers:i(),body:JSON.stringify(e)});return o(t)},updateBus:async(e,t)=>{const s=await fetch("".concat(n,"/depot/buses/").concat(e),{method:"PUT",headers:i(),body:JSON.stringify(t)});return o(s)},deleteBus:async e=>{const t=await fetch("".concat(n,"/depot/buses/").concat(e),{method:"DELETE",headers:i()});return o(t)},getMaintenanceLogs:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return l("/depot/buses/".concat(e,"/maintenance").concat(t?"?".concat(t):""))},addMaintenanceLog:async(e,t)=>{const s=await fetch("".concat(n,"/depot/buses/").concat(e,"/maintenance"),{method:"POST",headers:i(),body:JSON.stringify(t)});return o(s)}},d={getRoutes:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();let t=await l("/depot/routes".concat(e?"?".concat(e):""),{suppressError:!0});return t||(console.log("Depot routes failed, trying admin routes..."),t=await l("/admin/routes".concat(e?"?".concat(e):""),{suppressError:!0}),t||{success:!0,data:{routes:[],stats:{totalRoutes:0,activeRoutes:0,inactiveRoutes:0,totalDistance:0}}})},getAdminRoutes:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return l("/admin/routes".concat(e?"?".concat(e):""))},getRouteDetails:async e=>l("/depot/routes/".concat(e)),addRoute:async e=>{const t=await fetch("".concat(n,"/depot/routes"),{method:"POST",headers:i(),body:JSON.stringify(e)});return o(t)},updateRoute:async(e,t)=>{const s=await fetch("".concat(n,"/depot/routes/").concat(e),{method:"PUT",headers:i(),body:JSON.stringify(t)});return o(s)},deleteRoute:async e=>{const t=await fetch("".concat(n,"/depot/routes/").concat(e),{method:"DELETE",headers:i()});return o(t)},getRouteStops:async e=>{const t=await fetch("".concat(n,"/depot/routes/").concat(e,"/stops"),{headers:i()});return o(t)}},u={getTrips:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();let t=await l("/depot/trips".concat(e?"?".concat(e):""),{suppressError:!0});return t||{success:!0,data:{trips:[],pagination:{page:1,limit:20,total:0,pages:0}}}},getTripDetails:async e=>{const t=await fetch("".concat(n,"/depot/trips/").concat(e),{headers:i()});return o(t)},createTrip:async e=>{const t=await fetch("".concat(n,"/depot/trips"),{method:"POST",headers:i(),body:JSON.stringify(e)});return o(t)},updateTrip:async(e,t)=>{const s=await fetch("".concat(n,"/depot/trips/").concat(e),{method:"PUT",headers:i(),body:JSON.stringify(t)});return o(s)},cancelTrip:async(e,t)=>{const s=await fetch("".concat(n,"/depot/trips/").concat(e,"/cancel"),{method:"POST",headers:i(),body:JSON.stringify({reason:t})});return o(s)},startTrip:async e=>{const t=await fetch("".concat(n,"/depot/trips/").concat(e,"/start"),{method:"POST",headers:i()});return o(t)},completeTrip:async e=>{const t=await fetch("".concat(n,"/depot/trips/").concat(e,"/complete"),{method:"POST",headers:i()});return o(t)}},h={getBookings:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();let t=await l("/depot/bookings".concat(e?"?".concat(e):""),{suppressError:!0});return t||{success:!0,data:[]}},getBookingDetails:async e=>{const t=await fetch("".concat(n,"/depot/bookings/").concat(e),{headers:i()});return o(t)},getTickets:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return l("/depot/tickets".concat(e?"?".concat(e):""))},validateTicket:async(e,t,s)=>{const r=await fetch("".concat(n,"/depot/tickets/").concat(e,"/validate"),{method:"PUT",headers:i(),body:JSON.stringify({location:t,deviceInfo:s})});return o(r)},cancelTicket:async(e,t)=>{const s=await fetch("".concat(n,"/depot/tickets/").concat(e,"/cancel"),{method:"POST",headers:i(),body:JSON.stringify({reason:t})});return o(s)},getBookingStats:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return l("/depot/bookings/stats".concat(e?"?".concat(e):""))}},m={getDrivers:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();let t=await l("/depot/drivers".concat(e?"?".concat(e):""),{suppressError:!0});return t||{success:!0,data:{drivers:[],stats:{totalDrivers:0}}}},getConductors:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();let t=await l("/depot/conductors".concat(e?"?".concat(e):""),{suppressError:!0});return t||{success:!0,data:{conductors:[],stats:{totalConductors:0}}}},getCrewAssignments:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return l("/depot/crew".concat(e?"?".concat(e):""))},addDriver:async e=>{const t=await fetch("".concat(n,"/depot/drivers"),{method:"POST",headers:i(),body:JSON.stringify(e)});return o(t)},addConductor:async e=>{const t=await fetch("".concat(n,"/depot/conductors"),{method:"POST",headers:i(),body:JSON.stringify(e)});return o(t)},updateDriver:async(e,t)=>{const s=await fetch("".concat(n,"/depot/drivers/").concat(e),{method:"PUT",headers:i(),body:JSON.stringify(t)});return o(s)},updateConductor:async(e,t)=>{const s=await fetch("".concat(n,"/depot/conductors/").concat(e),{method:"PUT",headers:i(),body:JSON.stringify(t)});return o(s)},getStaffAttendance:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString(),t=await fetch("".concat(n,"/depot/attendance").concat(e?"?".concat(e):""),{headers:i()});return o(t)},markAttendance:async e=>{const t=await fetch("".concat(n,"/depot/attendance"),{method:"POST",headers:i(),body:JSON.stringify(e)});return o(t)}},p=new Map,x={data:null,timestamp:0,ttl:1e4},g={getBusSchedules:async function(){try{const e=Date.now();if(x.data&&e-x.timestamp<x.ttl)return console.log("Returning cached schedule data"),x.data;console.log("Skipping depot/schedules endpoint (known to return 404), returning empty data");const t={success:!0,data:{schedules:[],pagination:{page:1,limit:20,total:0,pages:0}}};return x.data=t,x.timestamp=e,t}catch(e){console.error("Unexpected error in getBusSchedules:",e);const t={success:!0,data:{schedules:[],pagination:{page:1,limit:20,total:0,pages:0}}};return x.data=t,x.timestamp=Date.now(),t}},createSchedule:async e=>{const t=await fetch("".concat(n,"/depot/schedules"),{method:"POST",headers:i(),body:JSON.stringify(e)});return o(t)},updateSchedule:async(e,t)=>{const s=await fetch("".concat(n,"/depot/schedules/").concat(e),{method:"PUT",headers:i(),body:JSON.stringify(t)});return o(s)},deleteSchedule:async e=>{const t=await fetch("".concat(n,"/depot/schedules/").concat(e),{method:"DELETE",headers:i()});return o(t)},getDutyAssignments:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString(),t=await fetch("".concat(n,"/depot/duty").concat(e?"?".concat(e):""),{headers:i()});return o(t)},assignDuty:async e=>{const t=await fetch("".concat(n,"/depot/duty"),{method:"POST",headers:i(),body:JSON.stringify(e)});return o(t)}},f={getDashboardData:async()=>l("/depot/dashboard"),getReports:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();let t=await l("/depot/reports".concat(e?"?".concat(e):""),{suppressError:!0});return t||(console.log("Reports endpoint failed, returning sample data"),{success:!0,data:[{_id:"report1",reportName:"Daily Revenue Report",reportType:"revenue",generatedDate:"2024-01-15",period:"2024-01-15",status:"completed",fileSize:"2.5 MB"},{_id:"report2",reportName:"Monthly Booking Analysis",reportType:"bookings",generatedDate:"2024-01-14",period:"2024-01",status:"completed",fileSize:"1.8 MB"}]})},getRevenueReports:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return l("/depot/reports/revenue".concat(e?"?".concat(e):""))},getTripReports:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return l("/depot/reports/trips".concat(e?"?".concat(e):""))},getBookingReports:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return l("/depot/reports/bookings".concat(e?"?".concat(e):""))},getFuelReports:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return l("/depot/reports/fuel".concat(e?"?".concat(e):""))},getMaintenanceReports:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return l("/depot/reports/maintenance".concat(e?"?".concat(e):""))},getStaffPerformanceReports:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return l("/depot/reports/staff-performance".concat(e?"?".concat(e):""))},exportReport:async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=new URLSearchParams((0,r.A)((0,r.A)({},s),{},{format:t})).toString(),l=await fetch("".concat(n,"/depot/reports/export/").concat(e,"?").concat(a),{headers:i()});return o(l)}},y={getDepotInfo:async()=>{let e=await l("/depot/info",{suppressError:!0});return e||{success:!0,data:{name:"Yatrik Depot",location:"Kerala, India",manager:"Depot Manager",revenue:"\u20b90",revenueChange:"+0%",trips:"0",tripsChange:"+0%",occupancy:"0%",occupancyChange:"+0%",fuelEfficiency:"0 km/L",fuelEfficiencyChange:"+0%",ticketSales:"0",ticketSalesChange:"+0%",punctuality:"0%",punctualityChange:"+0%",breakdowns:"0",breakdownsChange:"+0%",activeBuses:"0",activeBusesChange:"+0",totalRoutes:"0",totalRoutesChange:"+0"}}},getDepotStats:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return l("/depot/stats".concat(e?"?".concat(e):""))},getFuelLogs:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return l("/depot/fuel".concat(e?"?".concat(e):""))},recordFuelFillUp:async e=>{const t=await fetch("".concat(n,"/depot/fuel"),{method:"POST",headers:i(),body:JSON.stringify(e)});return o(t)},getNotifications:async function(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return l("/depot/notifications".concat(e?"?".concat(e):""))},markNotificationAsRead:async e=>{const t=await fetch("".concat(n,"/depot/notifications/").concat(e,"/read"),{method:"PUT",headers:i()});return o(t)}}},3668:(e,t,s)=>{var r=s(8902),a=s(2587),n=s(8114);e.exports=function(e,t,s,i,o,l){var c=1&s,d=e.length,u=t.length;if(d!=u&&!(c&&u>d))return!1;var h=l.get(e),m=l.get(t);if(h&&m)return h==t&&m==e;var p=-1,x=!0,g=2&s?new r:void 0;for(l.set(e,t),l.set(t,e);++p<d;){var f=e[p],y=t[p];if(i)var b=c?i(y,f,p,t,e,l):i(f,y,p,e,t,l);if(void 0!==b){if(b)continue;x=!1;break}if(g){if(!a(t,function(e,t){if(!n(g,t)&&(f===e||o(f,e,s,i,l)))return g.push(t)})){x=!1;break}}else if(f!==y&&!o(f,y,s,i,l)){x=!1;break}}return l.delete(e),l.delete(t),x}},3713:(e,t,s)=>{var r=s(6140),a=s(1143),n=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=[];for(var s in Object(e))n.call(e,s)&&"constructor"!=s&&t.push(s);return t}},3768:(e,t,s)=>{"use strict";s.d(t,{l$:()=>ye,Ay:()=>be,oR:()=>q});var r=s(7528),a=s(9379),n=s(5043);let i={data:""},o=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||i,l=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,c=/\/\*[^]*?\*\/|  +/g,d=/\n+/g,u=(e,t)=>{let s="",r="",a="";for(let n in e){let i=e[n];"@"==n[0]?"i"==n[1]?s=n+" "+i+";":r+="f"==n[1]?u(i,n):n+"{"+u(i,"k"==n[1]?"":t)+"}":"object"==typeof i?r+=u(i,t?t.replace(/([^,])+/g,e=>n.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):n):null!=i&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=u.p?u.p(n,i):n+":"+i+";")}return s+(t&&a?t+"{"+a+"}":a)+r},h={},m=e=>{if("object"==typeof e){let t="";for(let s in e)t+=s+m(e[s]);return t}return e},p=(e,t,s,r,a)=>{let n=m(e),i=h[n]||(h[n]=(e=>{let t=0,s=11;for(;t<e.length;)s=101*s+e.charCodeAt(t++)>>>0;return"go"+s})(n));if(!h[i]){let t=n!==e?e:(e=>{let t,s,r=[{}];for(;t=l.exec(e.replace(c,""));)t[4]?r.shift():t[3]?(s=t[3].replace(d," ").trim(),r.unshift(r[0][s]=r[0][s]||{})):r[0][t[1]]=t[2].replace(d," ").trim();return r[0]})(e);h[i]=u(a?{["@keyframes "+i]:t}:t,s?"":"."+i)}let o=s&&h.g?h.g:null;return s&&(h.g=h[i]),((e,t,s,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=s?e+t.data:t.data+e)})(h[i],t,r,o),i};function x(e){let t=this||{},s=e.call?e(t.p):e;return p(s.unshift?s.raw?((e,t,s)=>e.reduce((e,r,a)=>{let n=t[a];if(n&&n.call){let e=n(s),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;n=t?"."+t:e&&"object"==typeof e?e.props?"":u(e,""):!1===e?"":e}return e+r+(null==n?"":n)},""))(s,[].slice.call(arguments,1),t.p):s.reduce((e,s)=>Object.assign(e,s&&s.call?s(t.p):s),{}):s,o(t.target),t.g,t.o,t.k)}x.bind({g:1});let g,f,y,b=x.bind({k:1});function v(e,t){let s=this||{};return function(){let r=arguments;function a(n,i){let o=Object.assign({},n),l=o.className||a.className;s.p=Object.assign({theme:f&&f()},o),s.o=/ *go\d+/.test(l),o.className=x.apply(s,r)+(l?" "+l:""),t&&(o.ref=i);let c=e;return e[0]&&(c=o.as||e,delete o.as),y&&c[0]&&y(o),g(c,o)}return t?t(a):a}}var j,N,w,k,A,S,C,_,T,P,E,D,M,O,R,I,L=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,F=(()=>{let e=0;return()=>(++e).toString()})(),B=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),z=(e,t)=>{switch(t.type){case 0:return(0,a.A)((0,a.A)({},e),{},{toasts:[t.toast,...e.toasts].slice(0,20)});case 1:return(0,a.A)((0,a.A)({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?(0,a.A)((0,a.A)({},e),t.toast):e)});case 2:let{toast:s}=t;return z(e,{type:e.toasts.find(e=>e.id===s.id)?1:0,toast:s});case 3:let{toastId:r}=t;return(0,a.A)((0,a.A)({},e),{},{toasts:e.toasts.map(e=>e.id===r||void 0===r?(0,a.A)((0,a.A)({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?(0,a.A)((0,a.A)({},e),{},{toasts:[]}):(0,a.A)((0,a.A)({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return(0,a.A)((0,a.A)({},e),{},{pausedAt:t.time});case 6:let n=t.time-(e.pausedAt||0);return(0,a.A)((0,a.A)({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>(0,a.A)((0,a.A)({},e),{},{pauseDuration:e.pauseDuration+n}))})}},U=[],V={toasts:[],pausedAt:void 0},K=e=>{V=z(V,e),U.forEach(e=>{e(V)})},W={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},H=e=>(t,s)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",s=arguments.length>2?arguments[2]:void 0;return(0,a.A)((0,a.A)({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},s),{},{id:(null==s?void 0:s.id)||F()})}(t,e,s);return K({type:2,toast:r}),r.id},q=(e,t)=>H("blank")(e,t);q.error=H("error"),q.success=H("success"),q.loading=H("loading"),q.custom=H("custom"),q.dismiss=e=>{K({type:3,toastId:e})},q.remove=e=>K({type:4,toastId:e}),q.promise=(e,t,s)=>{let r=q.loading(t.loading,(0,a.A)((0,a.A)({},s),null==s?void 0:s.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let n=t.success?L(t.success,e):void 0;return n?q.success(n,(0,a.A)((0,a.A)({id:r},s),null==s?void 0:s.success)):q.dismiss(r),e}).catch(e=>{let n=t.error?L(t.error,e):void 0;n?q.error(n,(0,a.A)((0,a.A)({id:r},s),null==s?void 0:s.error)):q.dismiss(r)}),e};var G=(e,t)=>{K({type:1,toast:{id:e,height:t}})},Y=()=>{K({type:5,time:Date.now()})},$=new Map,J=e=>{let{toasts:t,pausedAt:s}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,s]=(0,n.useState)(V),r=(0,n.useRef)(V);(0,n.useEffect)(()=>(r.current!==V&&s(V),U.push(s),()=>{let e=U.indexOf(s);e>-1&&U.splice(e,1)}),[]);let i=t.toasts.map(t=>{var s,r,n;return(0,a.A)((0,a.A)((0,a.A)((0,a.A)({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(s=e[t.type])?void 0:s.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||W[t.type],style:(0,a.A)((0,a.A)((0,a.A)({},e.style),null==(n=e[t.type])?void 0:n.style),t.style)})});return(0,a.A)((0,a.A)({},t),{},{toasts:i})}(e);(0,n.useEffect)(()=>{if(s)return;let e=Date.now(),r=t.map(t=>{if(t.duration===1/0)return;let s=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(s<0))return setTimeout(()=>q.dismiss(t.id),s);t.visible&&q.dismiss(t.id)});return()=>{r.forEach(e=>e&&clearTimeout(e))}},[t,s]);let r=(0,n.useCallback)(()=>{s&&K({type:6,time:Date.now()})},[s]),i=(0,n.useCallback)((e,s)=>{let{reverseOrder:r=!1,gutter:a=8,defaultPosition:n}=s||{},i=t.filter(t=>(t.position||n)===(e.position||n)&&t.height),o=i.findIndex(t=>t.id===e.id),l=i.filter((e,t)=>t<o&&e.visible).length;return i.filter(e=>e.visible).slice(...r?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+a,0)},[t]);return(0,n.useEffect)(()=>{t.forEach(e=>{if(e.dismissed)!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if($.has(e))return;let s=setTimeout(()=>{$.delete(e),K({type:4,toastId:e})},t);$.set(e,s)}(e.id,e.removeDelay);else{let t=$.get(e.id);t&&(clearTimeout(t),$.delete(e.id))}})},[t]),{toasts:t,handlers:{updateHeight:G,startPause:Y,endPause:r,calculateOffset:i}}},Q=b(j||(j=(0,r.A)(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),X=b(N||(N=(0,r.A)(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Z=b(w||(w=(0,r.A)(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),ee=v("div")(k||(k=(0,r.A)(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",Q,X,e=>e.secondary||"#fff",Z),te=b(A||(A=(0,r.A)(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),se=v("div")(S||(S=(0,r.A)(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",te),re=b(C||(C=(0,r.A)(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),ae=b(_||(_=(0,r.A)(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),ne=v("div")(T||(T=(0,r.A)(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",re,ae,e=>e.secondary||"#fff"),ie=v("div")(P||(P=(0,r.A)(["\n  position: absolute;\n"]))),oe=v("div")(E||(E=(0,r.A)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),le=b(D||(D=(0,r.A)(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),ce=v("div")(M||(M=(0,r.A)(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),le),de=e=>{let{toast:t}=e,{icon:s,type:r,iconTheme:i}=t;return void 0!==s?"string"==typeof s?n.createElement(ce,null,s):s:"blank"===r?null:n.createElement(oe,null,n.createElement(se,(0,a.A)({},i)),"loading"!==r&&n.createElement(ie,null,"error"===r?n.createElement(ee,(0,a.A)({},i)):n.createElement(ne,(0,a.A)({},i))))},ue=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),he=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),me=v("div")(O||(O=(0,r.A)(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),pe=v("div")(R||(R=(0,r.A)(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),xe=n.memo(e=>{let{toast:t,position:s,style:r,children:i}=e,o=t.height?((e,t)=>{let s=e.includes("top")?1:-1,[r,a]=B()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[ue(s),he(s)];return{animation:t?"".concat(b(r)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(b(a)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||s||"top-center",t.visible):{opacity:0},l=n.createElement(de,{toast:t}),c=n.createElement(pe,(0,a.A)({},t.ariaProps),L(t.message,t));return n.createElement(me,{className:t.className,style:(0,a.A)((0,a.A)((0,a.A)({},o),r),t.style)},"function"==typeof i?i({icon:l,message:c}):n.createElement(n.Fragment,null,l,c))});!function(e,t,s,r){u.p=t,g=e,f=s,y=r}(n.createElement);var ge=e=>{let{id:t,className:s,style:r,onHeightUpdate:a,children:i}=e,o=n.useCallback(e=>{if(e){let s=()=>{let s=e.getBoundingClientRect().height;a(t,s)};s(),new MutationObserver(s).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,a]);return n.createElement("div",{ref:o,className:s,style:r},i)},fe=x(I||(I=(0,r.A)(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),ye=e=>{let{reverseOrder:t,position:s="top-center",toastOptions:r,gutter:i,children:o,containerStyle:l,containerClassName:c}=e,{toasts:d,handlers:u}=J(r);return n.createElement("div",{id:"_rht_toaster",style:(0,a.A)({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},l),className:c,onMouseEnter:u.startPause,onMouseLeave:u.endPause},d.map(e=>{let r=e.position||s,l=((e,t)=>{let s=e.includes("top"),r=s?{top:0}:{bottom:0},n=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return(0,a.A)((0,a.A)({left:0,right:0,display:"flex",position:"absolute",transition:B()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(s?1:-1),"px)")},r),n)})(r,u.calculateOffset(e,{reverseOrder:t,gutter:i,defaultPosition:s}));return n.createElement(ge,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?fe:"",style:l},"custom"===e.type?L(e.message,e):o?o(e):n.createElement(xe,{toast:e,position:r}))}))},be=q},3781:(e,t,s)=>{var r=s(9417),a=s(8673);e.exports=function(e){for(var t=a(e),s=t.length;s--;){var n=t[s],i=e[n];t[s]=[n,i,r(i)]}return t}},3782:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},3829:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},3862:(e,t,s)=>{"use strict";s.d(t,{I3:()=>d,nr:()=>c});var r=s(9379),a=s(7210),n=s(6325);const i=new Map,o=3e5;let l=!1;async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"";if(!{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL&&!l){try{console.warn("[apiFetch] REACT_APP_API_URL not set; using relative URLs with Vite proxy")}catch(m){}l=!0}const c=localStorage.getItem("depotToken")||localStorage.getItem("token"),d="".concat(t.method||"GET",":").concat(e,":").concat(JSON.stringify(t.body||{}));if("GET"===t.method||!t.method){const e=i.get(d);if(e&&Date.now()-e.timestamp<o)return e.data}const u=new Headers(t.headers||{});u.has("Content-Type")||!t.body||t.body instanceof FormData||u.set("Content-Type","application/json"),c&&u.set("Authorization","Bearer ".concat(c)),u.set("X-Requested-With","XMLHttpRequest");const h=t.timeout||(e=>e.includes("/admin/trips")?6e4:e.includes("/admin/buses")||e.includes("/admin/routes")||e.includes("/admin/depots")?4e4:e.includes("/dashboard")||e.includes("/recent-activities")?3e4:e.includes("/admin/")||e.includes("/depot/")?2e4:e.includes("/auto-scheduler/")?9e4:1e4)(e);try{const o=new AbortController,l=setTimeout(()=>o.abort(),h),c=await fetch(s+e,(0,r.A)((0,r.A)({},t),{},{headers:u,signal:o.signal}));clearTimeout(l);let m=null;try{m=await c.json()}catch(p){}if(!c.ok){const e=m&&(m.message||m.error)||c.statusText,s={response:{status:c.status,data:m},message:e};if(401===c.status||403===c.status){console.log("\ud83d\udd10 Authentication error detected, clearing all caches...");try{(0,n.mL)().then(()=>{console.log("\u2705 All caches cleared after authentication error")}).catch(e=>{console.warn("\u26a0\ufe0f Error clearing caches after auth error:",e)})}catch(x){}t.suppressError||(0,a.H4)(s),"undefined"!==typeof window&&setTimeout(()=>{window.location.href="/login"},2e3)}else t.suppressError||(0,a.H4)(s);return{ok:!1,status:c.status,message:e,data:m}}const g={ok:!0,status:c.status,data:m};return"GET"!==t.method&&t.method||i.set(d,{data:g,timestamp:Date.now()}),g}catch(g){if("AbortError"===g.name){const e={message:"Request timed out after ".concat(h/1e3," seconds. Please try again."),code:"TIMEOUT"};return t.suppressError||(0,a.H4)(e),{ok:!1,status:408,message:"Request timeout",data:null}}const e={message:"Network error. Please check your connection.",code:"NETWORK_ERROR"};return t.suppressError||(0,a.H4)(e),{ok:!1,status:0,message:"Network error",data:null}}}function d(){i.clear()}setInterval(function(){const e=Date.now();for(const[t,s]of i.entries())e-s.timestamp>o&&i.delete(t)},6e4)},3871:e=>{e.exports=function(e,t,s){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(s=s>a?a:s)<0&&(s+=a),a=t>s?0:s-t>>>0,t>>>=0;for(var n=Array(a);++r<a;)n[r]=e[r+t];return n}},3892:e=>{e.exports=function(e){return this.__data__.has(e)}},3932:(e,t,s)=>{var r=s(396),a=s(2866),n=s(2597),i=s(914);e.exports=function(e){return n(e)?r(i(e)):a(e)}},3944:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},3950:(e,t,s)=>{var r=s(6686),a=s(4757),n=s(801),i=Math.max,o=Math.min;e.exports=function(e,t,s){var l,c,d,u,h,m,p=0,x=!1,g=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var s=l,r=c;return l=c=void 0,p=t,u=e.apply(r,s)}function b(e){var s=e-m;return void 0===m||s>=t||s<0||g&&e-p>=d}function v(){var e=a();if(b(e))return j(e);h=setTimeout(v,function(e){var s=t-(e-m);return g?o(s,d-(e-p)):s}(e))}function j(e){return h=void 0,f&&l?y(e):(l=c=void 0,u)}function N(){var e=a(),s=b(e);if(l=arguments,c=this,m=e,s){if(void 0===h)return function(e){return p=e,h=setTimeout(v,t),x?y(e):u}(m);if(g)return clearTimeout(h),h=setTimeout(v,t),y(m)}return void 0===h&&(h=setTimeout(v,t)),u}return t=n(t)||0,r(s)&&(x=!!s.leading,d=(g="maxWait"in s)?i(n(s.maxWait)||0,t):d,f="trailing"in s?!!s.trailing:f),N.cancel=function(){void 0!==h&&clearTimeout(h),p=0,l=m=c=h=void 0},N.flush=function(){return void 0===h?u:j(a())},N}},3986:(e,t,s)=>{"use strict";function r(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;s[r]=e[r]}return s}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],-1===t.indexOf(s)&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}s.d(t,{A:()=>r})},4020:e=>{e.exports=function(e,t,s){for(var r=s-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}},4052:e=>{var t=Array.isArray;e.exports=t},4065:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},4079:(e,t,s)=>{var r=s(8259),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,i=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,function(e,s,r,a){t.push(r?a.replace(n,"$1"):s||e)}),t});e.exports=i},4105:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]])},4160:e=>{e.exports=function(e){var t=-1,s=Array(e.size);return e.forEach(function(e,r){s[++t]=[r,e]}),s}},4190:(e,t,s)=>{var r=s(1340);e.exports=function(e){var t=this.__data__,s=r(t,e);return s<0?void 0:t[s][1]}},4202:(e,t)=>{"use strict";var s=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,g={};function f(e,t,s){this.props=e,this.context=t,this.refs=g,this.updater=s||p}function y(){}function b(e,t,s){this.props=e,this.context=t,this.refs=g,this.updater=s||p}f.prototype.isReactComponent={},f.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},f.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=f.prototype;var v=b.prototype=new y;v.constructor=b,x(v,f.prototype),v.isPureReactComponent=!0;var j=Array.isArray,N=Object.prototype.hasOwnProperty,w={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,r){var a,n={},i=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)N.call(t,a)&&!k.hasOwnProperty(a)&&(n[a]=t[a]);var l=arguments.length-2;if(1===l)n.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];n.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===n[a]&&(n[a]=l[a]);return{$$typeof:s,type:e,key:i,ref:o,props:n,_owner:w.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===s}var C=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,a,n,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case s:case r:l=!0}}if(l)return i=i(l=e),e=""===n?"."+_(l,0):n,j(i)?(a="",null!=e&&(a=e.replace(C,"$&/")+"/"),T(i,t,a,"",function(e){return e})):null!=i&&(S(i)&&(i=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+e)),t.push(i)),1;if(l=0,n=""===n?".":n+":",j(e))for(var c=0;c<e.length;c++){var d=n+_(o=e[c],c);l+=T(o,t,a,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,a,d=n+_(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,s){if(null==e)return e;var r=[],a=0;return T(e,r,"","",function(e){return t.call(s,e,a++)}),r}function E(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},M={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:M,ReactCurrentOwner:w};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,s){P(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=f,t.Fragment=a,t.Profiler=i,t.PureComponent=b,t.StrictMode=n,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=x({},e.props),n=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=w.current),void 0!==t.key&&(n=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N.call(t,c)&&!k.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:s,type:e.type,key:n,ref:i,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:E}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,s){return D.current.useImperativeHandle(e,t,s)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,s){return D.current.useReducer(e,t,s)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,s){return D.current.useSyncExternalStore(e,t,s)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},4258:(e,t,s)=>{var r=s(5906)();e.exports=r},4262:(e,t,s)=>{var r=s(8895),a=s(4052);e.exports=function(e,t,s){var n=t(e);return a(e)?n:r(n,s(e))}},4391:(e,t,s)=>{"use strict";var r=s(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4416:(e,t,s)=>{var r=s(8902),a=s(5866),n=s(1558),i=s(8114),o=s(8182),l=s(2074);e.exports=function(e,t,s){var c=-1,d=a,u=e.length,h=!0,m=[],p=m;if(s)h=!1,d=n;else if(u>=200){var x=t?null:o(e);if(x)return l(x);h=!1,d=i,p=new r}else p=t?[]:m;e:for(;++c<u;){var g=e[c],f=t?t(g):g;if(g=s||0!==g?g:0,h&&f===f){for(var y=p.length;y--;)if(p[y]===f)continue e;t&&p.push(f),m.push(g)}else d(p,f,s)||(p!==m&&p.push(f),m.push(g))}return m}},4443:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(s(7989)),a=s(8900),n=o(s(8507)),i=o(s(5909));function o(e){return e&&e.__esModule?e:{default:e}}var l=/((?:\-[a-z]+\-)?calc)/;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return(0,r.default)(e).walk(function(e){if("function"===e.type&&l.test(e.value)){var s=r.default.stringify(e.nodes);if(!(s.indexOf("constant")>=0||s.indexOf("env")>=0)){var o=a.parser.parse(s),c=(0,n.default)(o,t);e.type="word",e.value=(0,i.default)(e.value,c,t)}}},!0).toString()},e.exports=t.default},4459:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},4537:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},4543:(e,t,s)=>{e=s.nmd(e);var r=s(6552),a=s(14),n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,o=i&&i.exports===n?r.Buffer:void 0,l=(o?o.isBuffer:void 0)||a;e.exports=l},4545:(e,t,s)=>{var r=s(7160);e.exports=function(){this.__data__=new r,this.size=0}},4552:(e,t,s)=>{var r=s(9812),a=Object.prototype,n=a.hasOwnProperty,i=a.toString,o=r?r.toStringTag:void 0;e.exports=function(e){var t=n.call(e,o),s=e[o];try{e[o]=void 0;var r=!0}catch(l){}var a=i.call(e);return r&&(t?e[o]=s:delete e[o]),a}},4597:(e,t,s)=>{var r=s(2587),a=s(9096),n=s(2165),i=s(4052),o=s(929);e.exports=function(e,t,s){var l=i(e)?r:n;return s&&o(e,t,s)&&(t=void 0),l(e,a(t,3))}},4657:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},4664:(e,t,s)=>{var r=s(4258),a=s(8673);e.exports=function(e,t){return e&&r(e,t,a)}},4705:(e,t,s)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function n(e,t,s){return(t=a(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,{A:()=>n})},4746:(e,t,s)=>{var r=s(5652);e.exports=function(e,t){var s=!0;return r(e,function(e,r,a){return s=!!t(e,r,a)}),s}},4757:(e,t,s)=>{var r=s(6552);e.exports=function(){return r.Date.now()}},4816:(e,t,s)=>{var r=s(7251),a=s(7159),n=s(438),i=s(9394),o=s(6874);function l(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=n,l.prototype.has=i,l.prototype.set=o,e.exports=l},4830:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]])},4919:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},4991:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},5029:(e,t,s)=>{var r=s(6989),a=s(3097),n=s(3366),i=s(2597),o=s(9417),l=s(1310),c=s(914);e.exports=function(e,t){return i(e)&&o(t)?l(c(e),t):function(s){var i=a(s,e);return void 0===i&&i===t?n(s,e):r(t,i,3)}}},5043:(e,t,s)=>{"use strict";e.exports=s(4202)},5051:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},5087:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5088:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},5173:(e,t,s)=>{e.exports=s(1497)()},5193:(e,t,s)=>{var r=s(6913),a=s(2761);e.exports=function(e){return a(e)&&"[object Arguments]"==r(e)}},5204:(e,t,s)=>{var r=s(7937)(s(6552),"Map");e.exports=r},5244:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},5268:(e,t,s)=>{var r=s(9160);e.exports=function(e){return r(e)&&e!=+e}},5295:e=>{e.exports=function(e,t){for(var s=-1,r=null==e?0:e.length;++s<r;)if(!t(e[s],s,e))return!1;return!0}},5324:(e,t,s)=>{var r=s(4052),a=s(2597),n=s(4079),i=s(1069);e.exports=function(e,t){return r(e)?e:a(e,t)?[e]:n(i(e))}},5387:(e,t,s)=>{var r=s(7937)(s(6552),"Promise");e.exports=r},5428:(e,t,s)=>{var r=s(6913),a=s(6173),n=s(2761),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return n(e)&&a(e.length)&&!!i[r(e)]}},5484:(e,t,s)=>{"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function a(e){this.setState(function(t){var s=this.constructor.getDerivedStateFromProps(e,t);return null!==s&&void 0!==s?s:null}.bind(this))}function n(e,t){try{var s=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(s,r)}finally{this.props=s,this.state=r}}function i(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var s=null,i=null,o=null;if("function"===typeof t.componentWillMount?s="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(s="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?i="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(i="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?o="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(o="UNSAFE_componentWillUpdate"),null!==s||null!==i||null!==o){var l=e.displayName||e.name,c="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+l+" uses "+c+" but also contains the following legacy lifecycles:"+(null!==s?"\n  "+s:"")+(null!==i?"\n  "+i:"")+(null!==o?"\n  "+o:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=a),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=n;var d=t.componentDidUpdate;t.componentDidUpdate=function(e,t,s){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:s;d.call(this,e,t,r)}}return e}s.r(t),s.d(t,{polyfill:()=>i}),r.__suppressDeprecationWarning=!0,a.__suppressDeprecationWarning=!0,n.__suppressDeprecationWarning=!0},5538:(e,t,s)=>{var r=s(7160),a=s(4545),n=s(793),i=s(7760),o=s(3892),l=s(6788);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=a,c.prototype.delete=n,c.prototype.get=i,c.prototype.has=o,c.prototype.set=l,e.exports=c},5575:(e,t,s)=>{var r=s(7937)(Object,"create");e.exports=r},5636:(e,t,s)=>{var r=s(1170),a=Math.max;e.exports=function(e,t,s){return t=a(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=a(n.length-t,0),l=Array(o);++i<o;)l[i]=n[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=n[i];return c[t]=s(l),r(e,this,c)}}},5647:(e,t,s)=>{var r=s(3279),a=s(5636),n=s(6350);e.exports=function(e,t){return n(a(e,t,r),e+"")}},5652:(e,t,s)=>{var r=s(4664),a=s(6516)(r);e.exports=a},5654:(e,t,s)=>{var r=s(7937),a=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=a},5686:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},5711:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},5713:e=>{e.exports=function(){}},5752:(e,t,s)=>{var r=s(9395),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,s,n,i,o){var l=1&s,c=r(e),d=c.length;if(d!=r(t).length&&!l)return!1;for(var u=d;u--;){var h=c[u];if(!(l?h in t:a.call(t,h)))return!1}var m=o.get(e),p=o.get(t);if(m&&p)return m==t&&p==e;var x=!0;o.set(e,t),o.set(t,e);for(var g=l;++u<d;){var f=e[h=c[u]],y=t[h];if(n)var b=l?n(y,f,h,t,e,o):n(f,y,h,e,t,o);if(!(void 0===b?f===y||i(f,y,s,n,o):b)){x=!1;break}g||(g="constructor"==h)}if(x&&!g){var v=e.constructor,j=t.constructor;v==j||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof j&&j instanceof j||(x=!1)}return o.delete(e),o.delete(t),x}},5797:(e,t,s)=>{var r=s(4816);function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var s=function(){var r=arguments,a=t?t.apply(this,r):r[0],n=s.cache;if(n.has(a))return n.get(a);var i=e.apply(this,r);return s.cache=n.set(a,i)||n,i};return s.cache=new(a.Cache||r),s}a.Cache=r,e.exports=a},5816:e=>{e.exports=function(e,t,s,r){for(var a=e.length,n=s+(r?1:-1);r?n--:++n<a;)if(t(e[n],n,e))return n;return-1}},5866:(e,t,s)=>{var r=s(8468);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},5893:(e,t,s)=>{var r=s(6599);e.exports=function(e,t,s){for(var a=-1,n=e.criteria,i=t.criteria,o=n.length,l=s.length;++a<o;){var c=r(n[a],i[a]);if(c)return a>=l?c:c*("desc"==s[a]?-1:1)}return e.index-t.index}},5906:e=>{e.exports=function(e){return function(t,s,r){for(var a=-1,n=Object(t),i=r(t),o=i.length;o--;){var l=i[e?o:++a];if(!1===s(n[l],l,n))break}return t}}},5909:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){var r=i(t,s);return"MathExpression"===t.type&&(r=e+"("+r+")"),r};var r=s(8507),a={"*":0,"/":0,"+":1,"-":1};function n(e,t){if(!1!==t){var s=Math.pow(10,t);return Math.round(e*s)/s}return e}function i(e,t){switch(e.type){case"MathExpression":var s=e.left,o=e.right,l=e.operator,c="";return"MathExpression"===s.type&&a[l]<a[s.operator]?c+="("+i(s,t)+")":c+=i(s,t),c+=" "+e.operator+" ","MathExpression"===o.type&&a[l]<a[o.operator]?c+="("+i(o,t)+")":"MathExpression"===o.type&&"-"===l&&["+","-"].includes(o.operator)?(o.operator=(0,r.flip)(o.operator),c+=i(o,t)):c+=i(o,t),c;case"Value":return n(e.value,t);case"CssVariable":return e.fallback?"var("+e.value+", "+i(e.fallback,t)+")":"var("+e.value+")";case"Calc":return e.prefix?"-"+e.prefix+"-calc("+i(e.value,t)+")":"calc("+i(e.value,t)+")";default:return n(e.value,t)+e.unit}}e.exports=t.default},5967:e=>{e.exports=function(e){return e.split("")}},5988:e=>{function t(e,t){var r,a,n=e.type,i=e.value;return t&&void 0!==(a=t(e))?a:"word"===n||"space"===n?i:"string"===n?(r=e.quote||"")+i+(e.unclosed?"":r):"comment"===n?"/*"+i+(e.unclosed?"":"*/"):"div"===n?(e.before||"")+i+(e.after||""):Array.isArray(e.nodes)?(r=s(e.nodes),"function"!==n?r:i+"("+(e.before||"")+r+(e.after||"")+(e.unclosed?"":")")):i}function s(e,s){var r,a;if(Array.isArray(e)){for(r="",a=e.length-1;~a;a-=1)r=t(e[a],s)+r;return r}return t(e,s)}e.exports=s},5990:(e,t,s)=>{var r=s(3028)(Object.getPrototypeOf,Object);e.exports=r},6095:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},6140:e=>{var t=Object.prototype;e.exports=function(e){var s=e&&e.constructor;return e===("function"==typeof s&&s.prototype||t)}},6173:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},6179:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},6210:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]])},6266:e=>{var t="(".charCodeAt(0),s=")".charCodeAt(0),r="'".charCodeAt(0),a='"'.charCodeAt(0),n="\\".charCodeAt(0),i="/".charCodeAt(0),o=",".charCodeAt(0),l=":".charCodeAt(0),c="*".charCodeAt(0);e.exports=function(e){for(var d,u,h,m,p,x,g,f,y=[],b=e,v=0,j=b.charCodeAt(v),N=b.length,w=[{nodes:y}],k=0,A="",S="",C="";v<N;)if(j<=32){d=v;do{d+=1,j=b.charCodeAt(d)}while(j<=32);m=b.slice(v,d),h=y[y.length-1],j===s&&k?C=m:h&&"div"===h.type?h.after=m:j===o||j===l||j===i&&b.charCodeAt(d+1)!==c?S=m:y.push({type:"space",sourceIndex:v,value:m}),v=d}else if(j===r||j===a){d=v,m={type:"string",sourceIndex:v,quote:u=j===r?"'":'"'};do{if(p=!1,~(d=b.indexOf(u,d+1)))for(x=d;b.charCodeAt(x-1)===n;)x-=1,p=!p;else d=(b+=u).length-1,m.unclosed=!0}while(p);m.value=b.slice(v+1,d),y.push(m),v=d+1,j=b.charCodeAt(v)}else if(j===i&&b.charCodeAt(v+1)===c)m={type:"comment",sourceIndex:v},-1===(d=b.indexOf("*/",v))&&(m.unclosed=!0,d=b.length),m.value=b.slice(v+2,d),y.push(m),v=d+2,j=b.charCodeAt(v);else if(j===i||j===o||j===l)m=b[v],y.push({type:"div",sourceIndex:v-S.length,value:m,before:S,after:""}),S="",v+=1,j=b.charCodeAt(v);else if(t===j){d=v;do{d+=1,j=b.charCodeAt(d)}while(j<=32);if(m={type:"function",sourceIndex:v-A.length,value:A,before:b.slice(v+1,d)},v=d,"url"===A&&j!==r&&j!==a){d-=1;do{if(p=!1,~(d=b.indexOf(")",d+1)))for(x=d;b.charCodeAt(x-1)===n;)x-=1,p=!p;else d=(b+=")").length-1,m.unclosed=!0}while(p);g=d;do{g-=1,j=b.charCodeAt(g)}while(j<=32);m.nodes=v!==g+1?[{type:"word",sourceIndex:v,value:b.slice(v,g+1)}]:[],m.unclosed&&g+1!==d?(m.after="",m.nodes.push({type:"space",sourceIndex:g+1,value:b.slice(g+1,d)})):m.after=b.slice(g+1,d),v=d+1,j=b.charCodeAt(v),y.push(m)}else k+=1,m.after="",y.push(m),w.push(m),y=m.nodes=[],f=m;A=""}else if(s===j&&k)v+=1,j=b.charCodeAt(v),f.after=C,C="",k-=1,w.pop(),y=(f=w[k]).nodes;else{d=v;do{j===n&&(d+=1),d+=1,j=b.charCodeAt(d)}while(d<N&&!(j<=32||j===r||j===a||j===o||j===l||j===i||j===t||j===s&&k));m=b.slice(v,d),t===j?A=m:y.push({type:"word",sourceIndex:v,value:m}),v=d}for(v=w.length-1;v;v-=1)w[v].unclosed=!0;return w[0].nodes}},6311:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},6324:(e,t,s)=>{"use strict";t.__esModule=!0,t.default=void 0;i(s(5173));var r=i(s(5043)),a=s(7950),n=i(s(1665));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t,s;function i(){for(var t,s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleEnter=function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t.handleLifecycle("onEnter",0,s)},t.handleEntering=function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t.handleLifecycle("onEntering",0,s)},t.handleEntered=function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t.handleLifecycle("onEntered",0,s)},t.handleExit=function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t.handleLifecycle("onExit",1,s)},t.handleExiting=function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t.handleLifecycle("onExiting",1,s)},t.handleExited=function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t.handleLifecycle("onExited",1,s)},t}s=e,(t=i).prototype=Object.create(s.prototype),t.prototype.constructor=t,t.__proto__=s;var o=i.prototype;return o.handleLifecycle=function(e,t,s){var n,i=this.props.children,o=r.default.Children.toArray(i)[t];o.props[e]&&(n=o.props)[e].apply(n,s),this.props[e]&&this.props[e]((0,a.findDOMNode)(this))},o.render=function(){var e=this.props,t=e.children,s=e.in,a=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,["children","in"]),i=r.default.Children.toArray(t),o=i[0],l=i[1];return delete a.onEnter,delete a.onEntering,delete a.onEntered,delete a.onExit,delete a.onExiting,delete a.onExited,r.default.createElement(n.default,a,s?r.default.cloneElement(o,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):r.default.cloneElement(l,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},i}(r.default.Component);o.propTypes={};var l=o;t.default=l,e.exports=t.default},6325:(e,t,s)=>{"use strict";s.d(t,{Qm:()=>n,mL:()=>a});var r=s(3862);const a=async()=>{try{console.log("\ud83e\uddf9 Starting comprehensive cache clearing..."),(0,r.I3)(),console.log("\u2705 API cache cleared");["token","user","depotToken","depotUser","depotInfo","currentDutyId","passenger_notifications","location_permission","location_settings","app_settings","user_preferences","dashboard_settings","theme_preferences","language_settings","notification_settings","search_history","recent_searches","favorite_routes","bookmark_data","trip_history","booking_cache","route_cache","depot_cache","bus_cache","driver_cache","conductor_cache","admin_cache","analytics_cache","performance_cache","error_logs","debug_data"].forEach(e=>{try{localStorage.removeItem(e)}catch(t){console.warn("Failed to remove localStorage key: ".concat(e),t)}}),console.log("\u2705 localStorage cleared");try{sessionStorage.clear(),console.log("\u2705 sessionStorage cleared")}catch(e){console.warn("Failed to clear sessionStorage:",e)}try{if("indexedDB"in window){const t=["YatrikERP","yatrik_erp","app_cache","offline_data"];for(const s of t)try{const e=indexedDB.deleteDatabase(s);e.onsuccess=()=>console.log("\u2705 IndexedDB database ".concat(s," deleted")),e.onerror=()=>console.warn("Failed to delete IndexedDB database ".concat(s))}catch(e){console.warn("Error deleting IndexedDB database ".concat(s,":"),e)}}}catch(e){console.warn("Error clearing IndexedDB:",e)}try{if("openDatabase"in window){const t=["YatrikERP","yatrik_erp","app_cache"];for(const s of t)try{const e=openDatabase(s,"","",0);e&&e.transaction(e=>{e.executeSql("DROP TABLE IF EXISTS cache"),e.executeSql("DROP TABLE IF EXISTS user_data"),e.executeSql("DROP TABLE IF EXISTS settings")})}catch(e){console.warn("Error clearing WebSQL database ".concat(s,":"),e)}}}catch(e){console.warn("Error clearing WebSQL:",e)}try{if("caches"in window){const e=(await caches.keys()).map(e=>(console.log("\ud83d\uddd1\ufe0f Deleting cache: ".concat(e)),caches.delete(e)));await Promise.all(e),console.log("\u2705 Cache API cleared")}}catch(e){console.warn("Error clearing Cache API:",e)}try{document.cookie.split(";").forEach(e=>{const t=e.indexOf("="),s=t>-1?e.substr(0,t).trim():e.trim();(s.includes("yatrik")||s.includes("erp")||s.includes("auth")||s.includes("token"))&&(document.cookie="".concat(s,"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/"),document.cookie="".concat(s,"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=").concat(window.location.hostname),document.cookie="".concat(s,"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=.").concat(window.location.hostname))}),console.log("\u2705 Cookies cleared")}catch(e){console.warn("Error clearing cookies:",e)}try{window.queryClient&&(window.queryClient.clear(),console.log("\u2705 React Query cache cleared"))}catch(e){console.warn("Error clearing React Query cache:",e)}try{window.componentCache&&window.componentCache.clear(),window.busInsightsCache&&window.busInsightsCache.clear(),console.log("\u2705 Component caches cleared")}catch(e){console.warn("Error clearing component caches:",e)}try{window.history&&window.history.replaceState&&window.history.replaceState(null,"",window.location.pathname),console.log("\u2705 Browser history state cleared")}catch(e){console.warn("Error clearing browser history state:",e)}try{window.appIntervals&&(window.appIntervals.forEach(e=>clearInterval(e)),window.appIntervals=[]),window.appTimeouts&&(window.appTimeouts.forEach(e=>clearTimeout(e)),window.appTimeouts=[]),console.log("\u2705 Application timers cleared")}catch(e){console.warn("Error clearing application timers:",e)}return console.log("\ud83c\udf89 Comprehensive cache clearing completed successfully!"),!0}catch(e){return console.error("\u274c Error during cache clearing:",e),!1}},n=()=>{try{window.appIntervals||(window.appIntervals=[]),window.appTimeouts||(window.appTimeouts=[]),console.log("\u2705 Cache manager initialized")}catch(e){console.error("\u274c Error initializing cache manager:",e)}}},6350:(e,t,s)=>{var r=s(8325),a=s(6578)(r);e.exports=a},6361:(e,t,s)=>{var r=s(6913),a=s(2761);e.exports=function(e){return!0===e||!1===e||a(e)&&"[object Boolean]"==r(e)}},6378:(e,t)=>{"use strict";var s="function"===typeof Symbol&&Symbol.for,r=s?Symbol.for("react.element"):60103,a=s?Symbol.for("react.portal"):60106,n=s?Symbol.for("react.fragment"):60107,i=s?Symbol.for("react.strict_mode"):60108,o=s?Symbol.for("react.profiler"):60114,l=s?Symbol.for("react.provider"):60109,c=s?Symbol.for("react.context"):60110,d=s?Symbol.for("react.async_mode"):60111,u=s?Symbol.for("react.concurrent_mode"):60111,h=s?Symbol.for("react.forward_ref"):60112,m=s?Symbol.for("react.suspense"):60113,p=s?Symbol.for("react.suspense_list"):60120,x=s?Symbol.for("react.memo"):60115,g=s?Symbol.for("react.lazy"):60116,f=s?Symbol.for("react.block"):60121,y=s?Symbol.for("react.fundamental"):60117,b=s?Symbol.for("react.responder"):60118,v=s?Symbol.for("react.scope"):60119;function j(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case d:case u:case n:case o:case i:case m:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case x:case l:return e;default:return t}}case a:return t}}}function N(e){return j(e)===u}t.isFragment=function(e){return j(e)===n}},6399:(e,t,s)=>{var r=s(5538),a=s(3668),n=s(9987),i=s(5752),o=s(6924),l=s(4052),c=s(4543),d=s(1268),u="[object Arguments]",h="[object Array]",m="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,s,x,g,f){var y=l(e),b=l(t),v=y?h:o(e),j=b?h:o(t),N=(v=v==u?m:v)==m,w=(j=j==u?m:j)==m,k=v==j;if(k&&c(e)){if(!c(t))return!1;y=!0,N=!1}if(k&&!N)return f||(f=new r),y||d(e)?a(e,t,s,x,g,f):n(e,t,v,s,x,g,f);if(!(1&s)){var A=N&&p.call(e,"__wrapped__"),S=w&&p.call(t,"__wrapped__");if(A||S){var C=A?e.value():e,_=S?t.value():t;return f||(f=new r),g(C,_,s,x,f)}}return!!k&&(f||(f=new r),i(e,t,s,x,g,f))}},6401:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]])},6516:(e,t,s)=>{var r=s(6571);e.exports=function(e,t){return function(s,a){if(null==s)return s;if(!r(s))return e(s,a);for(var n=s.length,i=t?n:-1,o=Object(s);(t?i--:++i<n)&&!1!==a(o[i],i,o););return s}}},6532:(e,t,s)=>{var r=s(5538),a=s(6989);e.exports=function(e,t,s,n){var i=s.length,o=i,l=!n;if(null==e)return!o;for(e=Object(e);i--;){var c=s[i];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<o;){var d=(c=s[i])[0],u=e[d],h=c[1];if(l&&c[2]){if(void 0===u&&!(d in e))return!1}else{var m=new r;if(n)var p=n(u,h,d,e,t,m);if(!(void 0===p?a(h,u,3,n,m):p))return!1}}return!0}},6533:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},6552:(e,t,s)=>{var r=s(7105),a="object"==typeof self&&self&&self.Object===Object&&self,n=r||a||Function("return this")();e.exports=n},6571:(e,t,s)=>{var r=s(1629),a=s(6173);e.exports=function(e){return null!=e&&a(e.length)&&!r(e)}},6578:e=>{var t=Date.now;e.exports=function(e){var s=0,r=0;return function(){var a=t(),n=16-(a-r);if(r=a,n>0){if(++s>=800)return arguments[0]}else s=0;return e.apply(void 0,arguments)}}},6599:(e,t,s)=>{var r=s(9841);e.exports=function(e,t){if(e!==t){var s=void 0!==e,a=null===e,n=e===e,i=r(e),o=void 0!==t,l=null===t,c=t===t,d=r(t);if(!l&&!d&&!i&&e>t||i&&o&&c&&!l&&!d||a&&o&&c||!s&&c||!n)return 1;if(!a&&!i&&!d&&e<t||d&&s&&n&&!a&&!i||l&&s&&n||!o&&n||!c)return-1}return 0}},6600:(e,t,s)=>{var r=s(7937)(s(6552),"WeakMap");e.exports=r},6604:(e,t,s)=>{var r=s(3331)();e.exports=r},6686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},6704:e=>{e.exports=function(e){return this.__data__.has(e)}},6745:(e,t,s)=>{var r=s(9742),a=s(61),n=s(3279);e.exports=function(e){return e&&e.length?r(e,n,a):void 0}},6788:(e,t,s)=>{var r=s(7160),a=s(5204),n=s(4816);e.exports=function(e,t){var s=this.__data__;if(s instanceof r){var i=s.__data__;if(!a||i.length<199)return i.push([e,t]),this.size=++s.size,this;s=this.__data__=new n(i)}return s.set(e,t),this.size=s.size,this}},6832:(e,t,s)=>{e=s.nmd(e);var r=s(7105),a=t&&!t.nodeType&&t,n=a&&e&&!e.nodeType&&e,i=n&&n.exports===a&&r.process,o=function(){try{var e=n&&n.require&&n.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(t){}}();e.exports=o},6874:(e,t,s)=>{var r=s(2622);e.exports=function(e,t){var s=r(this,e),a=s.size;return s.set(e,t),this.size+=s.size==a?0:1,this}},6913:(e,t,s)=>{var r=s(9812),a=s(4552),n=s(6095),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):n(e)}},6924:(e,t,s)=>{var r=s(7685),a=s(5204),n=s(5387),i=s(2070),o=s(6600),l=s(6913),c=s(6996),d="[object Map]",u="[object Promise]",h="[object Set]",m="[object WeakMap]",p="[object DataView]",x=c(r),g=c(a),f=c(n),y=c(i),b=c(o),v=l;(r&&v(new r(new ArrayBuffer(1)))!=p||a&&v(new a)!=d||n&&v(n.resolve())!=u||i&&v(new i)!=h||o&&v(new o)!=m)&&(v=function(e){var t=l(e),s="[object Object]"==t?e.constructor:void 0,r=s?c(s):"";if(r)switch(r){case x:return p;case g:return d;case f:return u;case y:return h;case b:return m}return t}),e.exports=v},6954:(e,t,s)=>{var r=s(1629),a=s(7857),n=s(6686),i=s(6996),o=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,u=c.hasOwnProperty,h=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!n(e)||a(e))&&(r(e)?h:o).test(i(e))}},6989:(e,t,s)=>{var r=s(6399),a=s(2761);e.exports=function e(t,s,n,i,o){return t===s||(null==t||null==s||!a(t)&&!a(s)?t!==t&&s!==s:r(t,s,n,i,e,o))}},6996:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(s){}try{return e+""}catch(s){}}return""}},7002:(e,t,s)=>{var r=s(5295),a=s(4746),n=s(9096),i=s(4052),o=s(929);e.exports=function(e,t,s){var l=i(e)?r:a;return s&&o(e,t,s)&&(t=void 0),l(e,n(t,3))}},7033:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},7104:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},7105:(e,t,s)=>{var r="object"==typeof s.g&&s.g&&s.g.Object===Object&&s.g;e.exports=r},7111:(e,t,s)=>{"use strict";var r=o(s(9435)),a=o(s(6324)),n=o(s(1665)),i=o(s(7324));function o(e){return e&&e.__esModule?e:{default:e}}e.exports={Transition:i.default,TransitionGroup:n.default,ReplaceTransition:a.default,CSSTransition:r.default}},7116:(e,t,s)=>{var r=s(9812),a=s(2777),n=s(4052),i=r?r.isConcatSpreadable:void 0;e.exports=function(e){return n(e)||a(e)||!!(i&&e&&e[i])}},7118:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},7159:(e,t,s)=>{var r=s(2622);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},7160:(e,t,s)=>{var r=s(7563),a=s(9935),n=s(4190),i=s(1946),o=s(1714);function l(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=n,l.prototype.has=i,l.prototype.set=o,e.exports=l},7210:(e,t,s)=>{"use strict";s.d(t,{Fq:()=>h,H4:()=>d,oc:()=>u,ws:()=>m});var r=s(9379),a=s(3768);const n={NETWORK_ERROR:"Network error. Please check your internet connection.",CONNECTION_REFUSED:"Unable to connect to server. Please try again later.",TIMEOUT:"Request timed out. Please try again.",UNAUTHORIZED:"You are not authorized to perform this action.",FORBIDDEN:"Access denied. You do not have permission for this action.",TOKEN_EXPIRED:"Your session has expired. Please login again.",VALIDATION_ERROR:"Please check your input and try again.",REQUIRED_FIELD:"This field is required.",INVALID_EMAIL:"Please enter a valid email address.",INVALID_PHONE:"Please enter a valid phone number.",INVALID_DATE:"Please enter a valid date.",INVALID_NUMBER:"Please enter a valid number.",SERVER_ERROR:"Server error occurred. Please try again later.",INTERNAL_ERROR:"Internal server error. Please contact support.",DATABASE_ERROR:"Database error occurred. Please try again.",DUPLICATE_ENTRY:"This entry already exists.",NOT_FOUND:"The requested resource was not found.",INSUFFICIENT_PERMISSIONS:"You do not have sufficient permissions.",INVALID_OPERATION:"This operation is not allowed.",FILE_TOO_LARGE:"File size is too large. Please choose a smaller file.",INVALID_FILE_TYPE:"Invalid file type. Please choose a supported file format.",UPLOAD_FAILED:"File upload failed. Please try again.",FORM_INCOMPLETE:"Please fill in all required fields.",FORM_INVALID:"Please correct the errors in the form.",SAVE_FAILED:"Failed to save data. Please try again.",UPDATE_FAILED:"Failed to update data. Please try again.",DELETE_FAILED:"Failed to delete data. Please try again.",BUS_NOT_FOUND:"Bus not found.",DRIVER_NOT_AVAILABLE:"Selected driver is not available.",CONDUCTOR_NOT_AVAILABLE:"Selected conductor is not available.",DEPOT_NOT_FOUND:"Depot not found.",ROUTE_NOT_FOUND:"Route not found.",BUS_ALREADY_EXISTS:"Bus with this number already exists.",USER_NOT_FOUND:"User not found.",USER_ALREADY_EXISTS:"User with this email already exists.",INVALID_CREDENTIALS:"Invalid email or password.",UNKNOWN_ERROR:"An unexpected error occurred. Please try again."},i="low",o="medium",l="high",c="critical",d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const s=(e=>{var t,s;if(e&&"object"===typeof e&&e.message&&e.severity)return e;if(null!==e&&void 0!==e&&e.response){const t=e.response.status,s=e.response.data;let r=n.SERVER_ERROR,a=o;switch(t){case 400:r=(null===s||void 0===s?void 0:s.message)||(null===s||void 0===s?void 0:s.error)||n.VALIDATION_ERROR,a=i;break;case 401:r=n.UNAUTHORIZED,a=l;break;case 403:r=n.FORBIDDEN,a=l;break;case 404:r=(null===s||void 0===s?void 0:s.message)||n.NOT_FOUND,a=o;break;case 409:r=(null===s||void 0===s?void 0:s.message)||n.DUPLICATE_ENTRY,a=o;break;case 422:r=(null===s||void 0===s?void 0:s.message)||n.VALIDATION_ERROR,a=i;break;case 500:r=(null===s||void 0===s?void 0:s.message)||n.INTERNAL_ERROR,a=c;break;default:r=(null===s||void 0===s?void 0:s.message)||n.SERVER_ERROR,a=o}return{message:r,severity:a,status:t,details:s}}return"NETWORK_ERROR"===(null===e||void 0===e?void 0:e.code)||null!==e&&void 0!==e&&null!==(t=e.message)&&void 0!==t&&t.includes("Network Error")?{message:n.NETWORK_ERROR,severity:l,details:e}:"ECONNABORTED"===(null===e||void 0===e?void 0:e.code)||null!==e&&void 0!==e&&null!==(s=e.message)&&void 0!==s&&s.includes("timeout")?{message:n.TIMEOUT,severity:o,details:e}:null!==e&&void 0!==e&&e.message?{message:e.message,severity:n[e.message]?i:o,details:e}:{message:n.UNKNOWN_ERROR,severity:o,details:e}})(e),d=t||s.message,u=s.severity;console.error("Error handled:",{original:e,parsed:s,message:d,severity:u});const h=(e=>{const t={duration:4e3,position:"top-right"};switch(e){case c:return(0,r.A)((0,r.A)({},t),{},{duration:8e3,style:{background:"#dc2626",color:"#fff",fontWeight:"bold"}});case l:return(0,r.A)((0,r.A)({},t),{},{duration:6e3,style:{background:"#ea580c",color:"#fff",fontWeight:"600"}});case o:return(0,r.A)((0,r.A)({},t),{},{duration:4e3,style:{background:"#d97706",color:"#fff"}});default:return(0,r.A)((0,r.A)({},t),{},{duration:3e3,style:{background:"#6b7280",color:"#fff"}})}})(u);return a.Ay.error(d,h),s},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;a.Ay.success(e,{duration:t,position:"top-right",style:{background:"#059669",color:"#fff"}})},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3;(0,a.Ay)(e,{duration:t,position:"top-right",icon:"\u26a0\ufe0f",style:{background:"#d97706",color:"#fff"}})},m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return async function(s){try{for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];const t=await e(s,...a);return u("Operation completed successfully!"),t}catch(o){throw function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Array.isArray(e)?e.forEach(e=>{d(e,n.VALIDATION_ERROR)}):"object"===typeof e?Object.entries(e).forEach(e=>{let[t,s]=e;d(new Error(s),"".concat(t,": ").concat(s))}):d(e,n.FORM_INVALID),t&&t.current){const e=t.current.querySelector('[aria-invalid="true"]');e&&e.focus()}}(o,t),o}}}},7234:(e,t)=>{"use strict";function s(e,t){var s=e.length;e.push(t);e:for(;0<s;){var r=s-1>>>1,a=e[r];if(!(0<n(a,t)))break e;e[r]=t,e[s]=a,s=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],s=e.pop();if(s!==t){e[0]=s;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>n(l,s))c<a&&0>n(d,l)?(e[r]=d,e[c]=s,r=c):(e[r]=l,e[o]=s,r=o);else{if(!(c<a&&0>n(d,s)))break e;e[r]=d,e[c]=s,r=c}}}return t}function n(e,t){var s=e.sortIndex-t.sortIndex;return 0!==s?s:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,x=!1,g=!1,f="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=r(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,s(c,t)}t=r(d)}}function j(e){if(g=!1,v(e),!x)if(null!==r(c))x=!0,M(N);else{var t=r(d);null!==t&&O(j,t.startTime-e)}}function N(e,s){x=!1,g&&(g=!1,y(S),S=-1),p=!0;var n=m;try{for(v(s),h=r(c);null!==h&&(!(h.expirationTime>s)||e&&!T());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var o=i(h.expirationTime<=s);s=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&a(c),v(s)}else a(c);h=r(c)}if(null!==h)var l=!0;else{var u=r(d);null!==u&&O(j,u.startTime-s),l=!1}return l}finally{h=null,m=n,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,k=!1,A=null,S=-1,C=5,_=-1;function T(){return!(t.unstable_now()-_<C)}function P(){if(null!==A){var e=t.unstable_now();_=e;var s=!0;try{s=A(!0,e)}finally{s?w():(k=!1,A=null)}}else k=!1}if("function"===typeof b)w=function(){b(P)};else if("undefined"!==typeof MessageChannel){var E=new MessageChannel,D=E.port2;E.port1.onmessage=P,w=function(){D.postMessage(null)}}else w=function(){f(P,0)};function M(e){A=e,k||(k=!0,w())}function O(e,s){S=f(function(){e(t.unstable_now())},s)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){x||p||(x=!0,M(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var s=m;m=t;try{return e()}finally{m=s}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var s=m;m=e;try{return t()}finally{m=s}},t.unstable_scheduleCallback=function(e,a,n){var i=t.unstable_now();switch("object"===typeof n&&null!==n?n="number"===typeof(n=n.delay)&&0<n?i+n:i:n=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:n,expirationTime:o=n+o,sortIndex:-1},n>i?(e.sortIndex=n,s(d,e),null===r(c)&&e===r(d)&&(g?(y(S),S=-1):g=!0,O(j,n-i))):(e.sortIndex=o,s(c,e),x||p||(x=!0,M(N))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=m;return function(){var s=m;m=t;try{return e.apply(this,arguments)}finally{m=s}}}},7251:(e,t,s)=>{var r=s(8724),a=s(7160),n=s(5204);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(n||a),string:new r}}},7283:e=>{"use strict";var t=Object.prototype.hasOwnProperty,s="~";function r(){}function a(e,t,s){this.fn=e,this.context=t,this.once=s||!1}function n(e,t,r,n,i){if("function"!==typeof r)throw new TypeError("The listener must be a function");var o=new a(r,n||e,i),l=s?s+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function i(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(s=!1)),o.prototype.eventNames=function(){var e,r,a=[];if(0===this._eventsCount)return a;for(r in e=this._events)t.call(e,r)&&a.push(s?r.slice(1):r);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=s?s+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,n=r.length,i=new Array(n);a<n;a++)i[a]=r[a].fn;return i},o.prototype.listenerCount=function(e){var t=s?s+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,a,n,i){var o=s?s+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,a),!0;case 5:return d.fn.call(d.context,t,r,a,n),!0;case 6:return d.fn.call(d.context,t,r,a,n,i),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var h,m=d.length;for(c=0;c<m;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,r);break;case 4:d[c].fn.call(d[c].context,t,r,a);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,t,s){return n(this,e,t,s,!1)},o.prototype.once=function(e,t,s){return n(this,e,t,s,!0)},o.prototype.removeListener=function(e,t,r,a){var n=s?s+e:e;if(!this._events[n])return this;if(!t)return i(this,n),this;var o=this._events[n];if(o.fn)o.fn!==t||a&&!o.once||r&&o.context!==r||i(this,n);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==t||a&&!o[l].once||r&&o[l].context!==r)&&c.push(o[l]);c.length?this._events[n]=1===c.length?c[0]:c:i(this,n)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=s?s+e:e,this._events[t]&&i(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=s,o.EventEmitter=o,e.exports=o},7303:(e,t,s)=>{var r=s(801),a=1/0;e.exports=function(e){return e?(e=r(e))===a||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},7324:(e,t,s)=>{"use strict";t.__esModule=!0,t.default=t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,s):{};r.get||r.set?Object.defineProperty(t,s,r):t[s]=e[s]}return t.default=e,t}(s(5173)),a=o(s(5043)),n=o(s(7950)),i=s(5484);s(927);function o(e){return e&&e.__esModule?e:{default:e}}var l="unmounted";t.UNMOUNTED=l;var c="exited";t.EXITED=c;var d="entering";t.ENTERING=d;var u="entered";t.ENTERED=u;var h="exiting";t.EXITING=h;var m=function(e){var t,s;function r(t,s){var r;r=e.call(this,t,s)||this;var a,n=s.transitionGroup,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(a=c,r.appearStatus=d):a=u:a=t.unmountOnExit||t.mountOnEnter?l:c,r.state={status:a},r.nextCallback=null,r}s=e,(t=r).prototype=Object.create(s.prototype),t.prototype.constructor=t,t.__proto__=s;var i=r.prototype;return i.getChildContext=function(){return{transitionGroup:null}},r.getDerivedStateFromProps=function(e,t){return e.in&&t.status===l?{status:c}:null},i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var s=this.state.status;this.props.in?s!==d&&s!==u&&(t=d):s!==d&&s!==u||(t=h)}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,s,r=this.props.timeout;return e=t=s=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,s=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:s}},i.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var s=n.default.findDOMNode(this);t===d?this.performEnter(s,e):this.performExit(s)}else this.props.unmountOnExit&&this.state.status===c&&this.setState({status:l})},i.performEnter=function(e,t){var s=this,r=this.props.enter,a=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,n=this.getTimeouts(),i=a?n.appear:n.enter;t||r?(this.props.onEnter(e,a),this.safeSetState({status:d},function(){s.props.onEntering(e,a),s.onTransitionEnd(e,i,function(){s.safeSetState({status:u},function(){s.props.onEntered(e,a)})})})):this.safeSetState({status:u},function(){s.props.onEntered(e)})},i.performExit=function(e){var t=this,s=this.props.exit,r=this.getTimeouts();s?(this.props.onExit(e),this.safeSetState({status:h},function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,function(){t.safeSetState({status:c},function(){t.props.onExited(e)})})})):this.safeSetState({status:c},function(){t.props.onExited(e)})},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,s=!0;return this.nextCallback=function(r){s&&(s=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},i.onTransitionEnd=function(e,t,s){this.setNextCallback(s);var r=null==t&&!this.props.addEndListener;e&&!r?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if(e===l)return null;var t=this.props,s=t.children,r=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"===typeof s)return s(e,r);var n=a.default.Children.only(s);return a.default.cloneElement(n,r)},r}(a.default.Component);function p(){}m.contextTypes={transitionGroup:r.object},m.childContextTypes={transitionGroup:function(){}},m.propTypes={},m.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:p,onEntering:p,onEntered:p,onExit:p,onExiting:p,onExited:p},m.UNMOUNTED=0,m.EXITED=1,m.ENTERING=2,m.ENTERED=3,m.EXITING=4;var x=(0,i.polyfill)(m);t.default=x},7365:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},7424:(e,t,s)=>{var r=s(755),a=s(2536),n=s(5647),i=s(929),o=n(function(e,t){if(null==e)return[];var s=t.length;return s>1&&i(e,t[0],t[1])?t=[]:s>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),a(e,r(t,1),[])});e.exports=o},7498:e=>{e.exports=function(e,t){return e>t}},7528:(e,t,s)=>{"use strict";function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}s.d(t,{A:()=>r})},7529:e=>{e.exports=function(e,t){for(var s=-1,r=null==e?0:e.length,a=0,n=[];++s<r;){var i=e[s];t(i,s,e)&&(n[a++]=i)}return n}},7563:e=>{e.exports=function(){this.__data__=[],this.size=0}},7574:e=>{e.exports=function(e){return function(t){return e(t)}}},7615:(e,t,s)=>{var r=s(5575);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},7676:(e,t,s)=>{var r=s(8189),a=s(6311),n=s(9115),i=s(1069);e.exports=function(e){return function(t){t=i(t);var s=a(t)?n(t):void 0,o=s?s[0]:t.charAt(0),l=s?r(s,1).join(""):t.slice(1);return o[e]()+l}}},7685:(e,t,s)=>{var r=s(7937)(s(6552),"DataView");e.exports=r},7719:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},7760:e=>{e.exports=function(e){return this.__data__.get(e)}},7784:(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var r=s(9379),a=s(3986),n=s(5043);const i=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>Boolean(e)&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const c=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],d=(0,n.forwardRef)((e,t)=>{let{color:s="currentColor",size:i=24,strokeWidth:d=2,absoluteStrokeWidth:u,className:h="",children:m,iconNode:p}=e,x=(0,a.A)(e,c);return(0,n.createElement)("svg",(0,r.A)((0,r.A)((0,r.A)({ref:t},l),{},{width:i,height:i,stroke:s,strokeWidth:u?24*Number(d)/Number(i):d,className:o("lucide",h)},!m&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(x)&&{"aria-hidden":"true"}),x),[...p.map(e=>{let[t,s]=e;return(0,n.createElement)(t,s)}),...Array.isArray(m)?m:[m]])}),u=["className"],h=(e,t)=>{const s=(0,n.forwardRef)((s,l)=>{let{className:c}=s,h=(0,a.A)(s,u);return(0,n.createElement)(d,(0,r.A)({ref:l,iconNode:t,className:o("lucide-".concat((m=i(e),m.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),c)},h));var m});return s.displayName=i(e),s}},7819:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7821:e=>{var t={px:{px:1,cm:96/2.54,mm:96/25.4,in:96,pt:96/72,pc:16},cm:{px:2.54/96,cm:1,mm:.1,in:2.54,pt:2.54/72,pc:2.54/6},mm:{px:25.4/96,cm:10,mm:1,in:25.4,pt:25.4/72,pc:25.4/6},in:{px:1/96,cm:1/2.54,mm:1/25.4,in:1,pt:1/72,pc:1/6},pt:{px:.75,cm:72/2.54,mm:72/25.4,in:72,pt:1,pc:12},pc:{px:6/96,cm:6/2.54,mm:6/25.4,in:6,pt:6/72,pc:1},deg:{deg:1,grad:.9,rad:180/Math.PI,turn:360},grad:{deg:400/360,grad:1,rad:200/Math.PI,turn:400},rad:{deg:Math.PI/180,grad:Math.PI/200,rad:1,turn:2*Math.PI},turn:{deg:1/360,grad:1/400,rad:.5/Math.PI,turn:1},s:{s:1,ms:.001},ms:{s:1e3,ms:1},Hz:{Hz:1,kHz:1e3},kHz:{Hz:.001,kHz:1},dpi:{dpi:1,dpcm:1/2.54,dppx:1/96},dpcm:{dpi:2.54,dpcm:1,dppx:2.54/96},dppx:{dpi:96,dpcm:96/2.54,dppx:1}};e.exports=function(e,s,r,a){if(!t.hasOwnProperty(r))throw new Error("Cannot convert to "+r);if(!t[r].hasOwnProperty(s))throw new Error("Cannot convert from "+s+" to "+r);var n=t[r][s]*e;return!1!==a?(a=Math.pow(10,parseInt(a)||5),Math.round(n*a)/a):n}},7823:()=>{},7828:e=>{e.exports=function(){return[]}},7857:(e,t,s)=>{var r=s(3440),a=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!a&&a in e}},7894:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},7937:(e,t,s)=>{var r=s(6954),a=s(4657);e.exports=function(e,t){var s=a(e,t);return r(s)?s:void 0}},7950:(e,t,s)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=s(2730)},7989:(e,t,s)=>{var r=s(6266),a=s(8548),n=s(5988);function i(e){return this instanceof i?(this.nodes=r(e),this):new i(e)}i.prototype.toString=function(){return Array.isArray(this.nodes)?n(this.nodes):""},i.prototype.walk=function(e,t){return a(this.nodes,e,t),this},i.unit=s(8927),i.walk=a,i.stringify=n,e.exports=i},8006:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},8114:e=>{e.exports=function(e,t){return e.has(t)}},8139:(e,t)=>{var s;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var s=arguments[t];s&&(e=i(e,n(s)))}return e}function n(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var s in e)r.call(e,s)&&e[s]&&(t=i(t,s));return t}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(s=function(){return a}.apply(t,[]))||(e.exports=s)}()},8180:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},8182:(e,t,s)=>{var r=s(2070),a=s(5713),n=s(2074),i=r&&1/n(new r([,-0]))[1]==1/0?function(e){return new r(e)}:a;e.exports=i},8189:(e,t,s)=>{var r=s(3871);e.exports=function(e,t,s){var a=e.length;return s=void 0===s?a:s,!t&&s>=a?e:r(e,t,s)}},8210:function(e,t,s){var r;!function(){"use strict";var a,n=1e9,i={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},o=!0,l="[DecimalError] ",c=l+"Invalid argument: ",d=l+"Exponent out of range: ",u=Math.floor,h=Math.pow,m=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,p=1e7,x=9007199254740991,g=u(1286742750677284.5),f={};function y(e,t){var s,r,a,n,i,l,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),o?_(t,h):t;if(c=e.d,d=t.d,i=e.e,a=t.e,c=c.slice(),n=i-a){for(n<0?(r=c,n=-n,l=d.length):(r=d,a=i,l=c.length),n>(l=(i=Math.ceil(h/7))>l?i+1:l+1)&&(n=l,r.length=1),r.reverse();n--;)r.push(0);r.reverse()}for((l=c.length)-(n=d.length)<0&&(n=l,r=d,d=c,c=r),s=0;n;)s=(c[--n]=c[n]+d[n]+s)/p|0,c[n]%=p;for(s&&(c.unshift(s),++a),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=a,o?_(t,h):t}function b(e,t,s){if(e!==~~e||e<t||e>s)throw Error(c+e)}function v(e){var t,s,r,a=e.length-1,n="",i=e[0];if(a>0){for(n+=i,t=1;t<a;t++)(s=7-(r=e[t]+"").length)&&(n+=A(s)),n+=r;(s=7-(r=(i=e[t])+"").length)&&(n+=A(s))}else if(0===i)return"0";for(;i%10===0;)i/=10;return n+i}f.absoluteValue=f.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},f.comparedTo=f.cmp=function(e){var t,s,r,a,n=this;if(e=new n.constructor(e),n.s!==e.s)return n.s||-e.s;if(n.e!==e.e)return n.e>e.e^n.s<0?1:-1;for(t=0,s=(r=n.d.length)<(a=e.d.length)?r:a;t<s;++t)if(n.d[t]!==e.d[t])return n.d[t]>e.d[t]^n.s<0?1:-1;return r===a?0:r>a^n.s<0?1:-1},f.decimalPlaces=f.dp=function(){var e=this,t=e.d.length-1,s=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)s--;return s<0?0:s},f.dividedBy=f.div=function(e){return j(this,new this.constructor(e))},f.dividedToIntegerBy=f.idiv=function(e){var t=this.constructor;return _(j(this,new t(e),0,1),t.precision)},f.equals=f.eq=function(e){return!this.cmp(e)},f.exponent=function(){return w(this)},f.greaterThan=f.gt=function(e){return this.cmp(e)>0},f.greaterThanOrEqualTo=f.gte=function(e){return this.cmp(e)>=0},f.isInteger=f.isint=function(){return this.e>this.d.length-2},f.isNegative=f.isneg=function(){return this.s<0},f.isPositive=f.ispos=function(){return this.s>0},f.isZero=function(){return 0===this.s},f.lessThan=f.lt=function(e){return this.cmp(e)<0},f.lessThanOrEqualTo=f.lte=function(e){return this.cmp(e)<1},f.logarithm=f.log=function(e){var t,s=this,r=s.constructor,n=r.precision,i=n+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(a))throw Error(l+"NaN");if(s.s<1)throw Error(l+(s.s?"NaN":"-Infinity"));return s.eq(a)?new r(0):(o=!1,t=j(S(s,i),S(e,i),i),o=!0,_(t,n))},f.minus=f.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?T(t,e):y(t,(e.s=-e.s,e))},f.modulo=f.mod=function(e){var t,s=this,r=s.constructor,a=r.precision;if(!(e=new r(e)).s)throw Error(l+"NaN");return s.s?(o=!1,t=j(s,e,0,1).times(e),o=!0,s.minus(t)):_(new r(s),a)},f.naturalExponential=f.exp=function(){return N(this)},f.naturalLogarithm=f.ln=function(){return S(this)},f.negated=f.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},f.plus=f.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?y(t,e):T(t,(e.s=-e.s,e))},f.precision=f.sd=function(e){var t,s,r,a=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=w(a)+1,s=7*(r=a.d.length-1)+1,r=a.d[r]){for(;r%10==0;r/=10)s--;for(r=a.d[0];r>=10;r/=10)s++}return e&&t>s?t:s},f.squareRoot=f.sqrt=function(){var e,t,s,r,a,n,i,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(l+"NaN")}for(e=w(c),o=!1,0==(a=Math.sqrt(+c))||a==1/0?(((t=v(c.d)).length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=u((e+1)/2)-(e<0||e%2),r=new d(t=a==1/0?"5e"+e:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new d(a.toString()),a=i=(s=d.precision)+3;;)if(r=(n=r).plus(j(c,n,i+2)).times(.5),v(n.d).slice(0,i)===(t=v(r.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&"4999"==t){if(_(n,s+1,0),n.times(n).eq(c)){r=n;break}}else if("9999"!=t)break;i+=4}return o=!0,_(r,s)},f.times=f.mul=function(e){var t,s,r,a,n,i,l,c,d,u=this,h=u.constructor,m=u.d,x=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,s=u.e+e.e,(c=m.length)<(d=x.length)&&(n=m,m=x,x=n,i=c,c=d,d=i),n=[],r=i=c+d;r--;)n.push(0);for(r=d;--r>=0;){for(t=0,a=c+r;a>r;)l=n[a]+x[r]*m[a-r-1]+t,n[a--]=l%p|0,t=l/p|0;n[a]=(n[a]+t)%p|0}for(;!n[--i];)n.pop();return t?++s:n.shift(),e.d=n,e.e=s,o?_(e,h.precision):e},f.toDecimalPlaces=f.todp=function(e,t){var s=this,r=s.constructor;return s=new r(s),void 0===e?s:(b(e,0,n),void 0===t?t=r.rounding:b(t,0,8),_(s,e+w(s)+1,t))},f.toExponential=function(e,t){var s,r=this,a=r.constructor;return void 0===e?s=P(r,!0):(b(e,0,n),void 0===t?t=a.rounding:b(t,0,8),s=P(r=_(new a(r),e+1,t),!0,e+1)),s},f.toFixed=function(e,t){var s,r,a=this,i=a.constructor;return void 0===e?P(a):(b(e,0,n),void 0===t?t=i.rounding:b(t,0,8),s=P((r=_(new i(a),e+w(a)+1,t)).abs(),!1,e+w(r)+1),a.isneg()&&!a.isZero()?"-"+s:s)},f.toInteger=f.toint=function(){var e=this,t=e.constructor;return _(new t(e),w(e)+1,t.rounding)},f.toNumber=function(){return+this},f.toPower=f.pow=function(e){var t,s,r,n,i,c,d=this,h=d.constructor,m=+(e=new h(e));if(!e.s)return new h(a);if(!(d=new h(d)).s){if(e.s<1)throw Error(l+"Infinity");return d}if(d.eq(a))return d;if(r=h.precision,e.eq(a))return _(d,r);if(c=(t=e.e)>=(s=e.d.length-1),i=d.s,c){if((s=m<0?-m:m)<=x){for(n=new h(a),t=Math.ceil(r/7+4),o=!1;s%2&&E((n=n.times(d)).d,t),0!==(s=u(s/2));)E((d=d.times(d)).d,t);return o=!0,e.s<0?new h(a).div(n):_(n,r)}}else if(i<0)throw Error(l+"NaN");return i=i<0&&1&e.d[Math.max(t,s)]?-1:1,d.s=1,o=!1,n=e.times(S(d,r+12)),o=!0,(n=N(n)).s=i,n},f.toPrecision=function(e,t){var s,r,a=this,i=a.constructor;return void 0===e?r=P(a,(s=w(a))<=i.toExpNeg||s>=i.toExpPos):(b(e,1,n),void 0===t?t=i.rounding:b(t,0,8),r=P(a=_(new i(a),e,t),e<=(s=w(a))||s<=i.toExpNeg,e)),r},f.toSignificantDigits=f.tosd=function(e,t){var s=this.constructor;return void 0===e?(e=s.precision,t=s.rounding):(b(e,1,n),void 0===t?t=s.rounding:b(t,0,8)),_(new s(this),e,t)},f.toString=f.valueOf=f.val=f.toJSON=function(){var e=this,t=w(e),s=e.constructor;return P(e,t<=s.toExpNeg||t>=s.toExpPos)};var j=function(){function e(e,t){var s,r=0,a=e.length;for(e=e.slice();a--;)s=e[a]*t+r,e[a]=s%p|0,r=s/p|0;return r&&e.unshift(r),e}function t(e,t,s,r){var a,n;if(s!=r)n=s>r?1:-1;else for(a=n=0;a<s;a++)if(e[a]!=t[a]){n=e[a]>t[a]?1:-1;break}return n}function s(e,t,s){for(var r=0;s--;)e[s]-=r,r=e[s]<t[s]?1:0,e[s]=r*p+e[s]-t[s];for(;!e[0]&&e.length>1;)e.shift()}return function(r,a,n,i){var o,c,d,u,h,m,x,g,f,y,b,v,j,N,k,A,S,C,T=r.constructor,P=r.s==a.s?1:-1,E=r.d,D=a.d;if(!r.s)return new T(r);if(!a.s)throw Error(l+"Division by zero");for(c=r.e-a.e,S=D.length,k=E.length,g=(x=new T(P)).d=[],d=0;D[d]==(E[d]||0);)++d;if(D[d]>(E[d]||0)&&--c,(v=null==n?n=T.precision:i?n+(w(r)-w(a))+1:n)<0)return new T(0);if(v=v/7+2|0,d=0,1==S)for(u=0,D=D[0],v++;(d<k||u)&&v--;d++)j=u*p+(E[d]||0),g[d]=j/D|0,u=j%D|0;else{for((u=p/(D[0]+1)|0)>1&&(D=e(D,u),E=e(E,u),S=D.length,k=E.length),N=S,y=(f=E.slice(0,S)).length;y<S;)f[y++]=0;(C=D.slice()).unshift(0),A=D[0],D[1]>=p/2&&++A;do{u=0,(o=t(D,f,S,y))<0?(b=f[0],S!=y&&(b=b*p+(f[1]||0)),(u=b/A|0)>1?(u>=p&&(u=p-1),1==(o=t(h=e(D,u),f,m=h.length,y=f.length))&&(u--,s(h,S<m?C:D,m))):(0==u&&(o=u=1),h=D.slice()),(m=h.length)<y&&h.unshift(0),s(f,h,y),-1==o&&(o=t(D,f,S,y=f.length))<1&&(u++,s(f,S<y?C:D,y)),y=f.length):0===o&&(u++,f=[0]),g[d++]=u,o&&f[0]?f[y++]=E[N]||0:(f=[E[N]],y=1)}while((N++<k||void 0!==f[0])&&v--)}return g[0]||g.shift(),x.e=c,_(x,i?n+w(x)+1:n)}}();function N(e,t){var s,r,n,i,l,c=0,u=0,m=e.constructor,p=m.precision;if(w(e)>16)throw Error(d+w(e));if(!e.s)return new m(a);for(null==t?(o=!1,l=p):l=t,i=new m(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(l+=Math.log(h(2,u))/Math.LN10*2+5|0,s=r=n=new m(a),m.precision=l;;){if(r=_(r.times(e),l),s=s.times(++c),v((i=n.plus(j(r,s,l))).d).slice(0,l)===v(n.d).slice(0,l)){for(;u--;)n=_(n.times(n),l);return m.precision=p,null==t?(o=!0,_(n,p)):n}n=i}}function w(e){for(var t=7*e.e,s=e.d[0];s>=10;s/=10)t++;return t}function k(e,t,s){if(t>e.LN10.sd())throw o=!0,s&&(e.precision=s),Error(l+"LN10 precision limit exceeded");return _(new e(e.LN10),t)}function A(e){for(var t="";e--;)t+="0";return t}function S(e,t){var s,r,n,i,c,d,u,h,m,p=1,x=e,g=x.d,f=x.constructor,y=f.precision;if(x.s<1)throw Error(l+(x.s?"NaN":"-Infinity"));if(x.eq(a))return new f(0);if(null==t?(o=!1,h=y):h=t,x.eq(10))return null==t&&(o=!0),k(f,h);if(h+=10,f.precision=h,r=(s=v(g)).charAt(0),i=w(x),!(Math.abs(i)<15e14))return u=k(f,h+2,y).times(i+""),x=S(new f(r+"."+s.slice(1)),h-10).plus(u),f.precision=y,null==t?(o=!0,_(x,y)):x;for(;r<7&&1!=r||1==r&&s.charAt(1)>3;)r=(s=v((x=x.times(e)).d)).charAt(0),p++;for(i=w(x),r>1?(x=new f("0."+s),i++):x=new f(r+"."+s.slice(1)),d=c=x=j(x.minus(a),x.plus(a),h),m=_(x.times(x),h),n=3;;){if(c=_(c.times(m),h),v((u=d.plus(j(c,new f(n),h))).d).slice(0,h)===v(d.d).slice(0,h))return d=d.times(2),0!==i&&(d=d.plus(k(f,h+2,y).times(i+""))),d=j(d,new f(p),h),f.precision=y,null==t?(o=!0,_(d,y)):d;d=u,n+=2}}function C(e,t){var s,r,a;for((s=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(s<0&&(s=r),s+=+t.slice(r+1),t=t.substring(0,r)):s<0&&(s=t.length),r=0;48===t.charCodeAt(r);)++r;for(a=t.length;48===t.charCodeAt(a-1);)--a;if(t=t.slice(r,a)){if(a-=r,s=s-r-1,e.e=u(s/7),e.d=[],r=(s+1)%7,s<0&&(r+=7),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=7;r<a;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),o&&(e.e>g||e.e<-g))throw Error(d+s)}else e.s=0,e.e=0,e.d=[0];return e}function _(e,t,s){var r,a,n,i,l,c,m,x,f=e.d;for(i=1,n=f[0];n>=10;n/=10)i++;if((r=t-i)<0)r+=7,a=t,m=f[x=0];else{if((x=Math.ceil((r+1)/7))>=(n=f.length))return e;for(m=n=f[x],i=1;n>=10;n/=10)i++;a=(r%=7)-7+i}if(void 0!==s&&(l=m/(n=h(10,i-a-1))%10|0,c=t<0||void 0!==f[x+1]||m%n,c=s<4?(l||c)&&(0==s||s==(e.s<0?3:2)):l>5||5==l&&(4==s||c||6==s&&(r>0?a>0?m/h(10,i-a):0:f[x-1])%10&1||s==(e.s<0?8:7))),t<1||!f[0])return c?(n=w(e),f.length=1,t=t-n-1,f[0]=h(10,(7-t%7)%7),e.e=u(-t/7)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(0==r?(f.length=x,n=1,x--):(f.length=x+1,n=h(10,7-r),f[x]=a>0?(m/h(10,i-a)%h(10,a)|0)*n:0),c)for(;;){if(0==x){(f[0]+=n)==p&&(f[0]=1,++e.e);break}if(f[x]+=n,f[x]!=p)break;f[x--]=0,n=1}for(r=f.length;0===f[--r];)f.pop();if(o&&(e.e>g||e.e<-g))throw Error(d+w(e));return e}function T(e,t){var s,r,a,n,i,l,c,d,u,h,m=e.constructor,x=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),o?_(t,x):t;if(c=e.d,h=t.d,r=t.e,d=e.e,c=c.slice(),i=d-r){for((u=i<0)?(s=c,i=-i,l=h.length):(s=h,r=d,l=c.length),i>(a=Math.max(Math.ceil(x/7),l)+2)&&(i=a,s.length=1),s.reverse(),a=i;a--;)s.push(0);s.reverse()}else{for((u=(a=c.length)<(l=h.length))&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){u=c[a]<h[a];break}i=0}for(u&&(s=c,c=h,h=s,t.s=-t.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>i;){if(c[--a]<h[a]){for(n=a;n&&0===c[--n];)c[n]=p-1;--c[n],c[a]+=p}c[a]-=h[a]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=r,o?_(t,x):t):new m(0)}function P(e,t,s){var r,a=w(e),n=v(e.d),i=n.length;return t?(s&&(r=s-i)>0?n=n.charAt(0)+"."+n.slice(1)+A(r):i>1&&(n=n.charAt(0)+"."+n.slice(1)),n=n+(a<0?"e":"e+")+a):a<0?(n="0."+A(-a-1)+n,s&&(r=s-i)>0&&(n+=A(r))):a>=i?(n+=A(a+1-i),s&&(r=s-a-1)>0&&(n=n+"."+A(r))):((r=a+1)<i&&(n=n.slice(0,r)+"."+n.slice(r)),s&&(r=s-i)>0&&(a+1===i&&(n+="."),n+=A(r))),e.s<0?"-"+n:n}function E(e,t){if(e.length>t)return e.length=t,!0}function D(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,s,r,a=["precision",1,n,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if(void 0!==(r=e[s=a[t]])){if(!(u(r)===r&&r>=a[t+1]&&r<=a[t+2]))throw Error(c+s+": "+r);this[s]=r}if(void 0!==(r=e[s="LN10"])){if(r!=Math.LN10)throw Error(c+s+": "+r);this[s]=new this(r)}return this}i=function e(t){var s,r,a;function n(e){var t=this;if(!(t instanceof n))return new n(e);if(t.constructor=n,e instanceof n)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):C(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!m.test(e))throw Error(c+e);C(t,e)}if(n.prototype=f,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.clone=e,n.config=n.set=D,void 0===t&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],s=0;s<a.length;)t.hasOwnProperty(r=a[s++])||(t[r]=this[r]);return n.config(t),n}(i),i.default=i.Decimal=i,a=new i(1),void 0===(r=function(){return i}.call(t,s,t,e))||(e.exports=r)}()},8259:(e,t,s)=>{var r=s(5797);e.exports=function(e){var t=r(e,function(e){return 500===s.size&&s.clear(),e}),s=t.cache;return t}},8325:(e,t,s)=>{var r=s(2541),a=s(5654),n=s(3279),i=a?function(e,t){return a(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:n;e.exports=i},8377:(e,t,s)=>{"use strict";t.__esModule=!0,t.getChildMapping=a,t.mergeChildMappings=n,t.getInitialChildMapping=function(e,t){return a(e.children,function(s){return(0,r.cloneElement)(s,{onExited:t.bind(null,s),in:!0,appear:i(s,"appear",e),enter:i(s,"enter",e),exit:i(s,"exit",e)})})},t.getNextChildMapping=function(e,t,s){var o=a(e.children),l=n(t,o);return Object.keys(l).forEach(function(a){var n=l[a];if((0,r.isValidElement)(n)){var c=a in t,d=a in o,u=t[a],h=(0,r.isValidElement)(u)&&!u.props.in;!d||c&&!h?d||!c||h?d&&c&&(0,r.isValidElement)(u)&&(l[a]=(0,r.cloneElement)(n,{onExited:s.bind(null,n),in:u.props.in,exit:i(n,"exit",e),enter:i(n,"enter",e)})):l[a]=(0,r.cloneElement)(n,{in:!1}):l[a]=(0,r.cloneElement)(n,{onExited:s.bind(null,n),in:!0,exit:i(n,"exit",e),enter:i(n,"enter",e)})}}),l};var r=s(5043);function a(e,t){var s=Object.create(null);return e&&r.Children.map(e,function(e){return e}).forEach(function(e){s[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)}),s}function n(e,t){function s(s){return s in t?t[s]:e[s]}e=e||{},t=t||{};var r,a=Object.create(null),n=[];for(var i in e)i in t?n.length&&(a[i]=n,n=[]):n.push(i);var o={};for(var l in t){if(a[l])for(r=0;r<a[l].length;r++){var c=a[l][r];o[a[l][r]]=s(c)}o[l]=s(l)}for(r=0;r<n.length;r++)o[n[r]]=s(n[r]);return o}function i(e,t,s){return null!=s[t]?s[t]:e.props[t]}},8468:(e,t,s)=>{var r=s(5816),a=s(644),n=s(4020);e.exports=function(e,t,s){return t===t?n(e,t,s):r(e,a,s)}},8507:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flip=c;var r,a=s(1796),n=(r=a)&&r.__esModule?r:{default:r};function i(e,t){return"MathExpression"===e.type?function(e,t){switch(e=function(e,t){var s=(0,n.default)(e.left,e.right,t),r=i(s.left,t),a=i(s.right,t);"MathExpression"===r.type&&"MathExpression"===a.type&&("/"===r.operator&&"*"===a.operator||"-"===r.operator&&"+"===a.operator||"*"===r.operator&&"/"===a.operator||"+"===r.operator&&"-"===a.operator)&&(o(r.right,a.right)?s=(0,n.default)(r.left,a.left,t):o(r.right,a.left)&&(s=(0,n.default)(r.left,a.right,t)),r=i(s.left,t),a=i(s.right,t));return e.left=r,e.right=a,e}(e,t),e.operator){case"+":case"-":return function(e,t){var s=e,r=s.left,a=s.right,n=s.operator;if("CssVariable"===r.type||"CssVariable"===a.type)return e;if(0===a.value)return r;if(0===r.value&&"+"===n)return a;if(0===r.value&&"-"===n)return d(a);r.type===a.type&&l(r.type)&&((e=Object.assign({},r)).value="+"===n?r.value+a.value:r.value-a.value);if(l(r.type)&&("+"===a.operator||"-"===a.operator)&&"MathExpression"===a.type){if(r.type===a.left.type)return(e=Object.assign({},e)).left=i({type:"MathExpression",operator:n,left:r,right:a.left},t),e.right=a.right,e.operator="-"===n?c(a.operator):a.operator,i(e,t);if(r.type===a.right.type)return(e=Object.assign({},e)).left=i({type:"MathExpression",operator:"-"===n?c(a.operator):a.operator,left:r,right:a.right},t),e.right=a.left,i(e,t)}if("MathExpression"===r.type&&("+"===r.operator||"-"===r.operator)&&l(a.type)){if(a.type===r.left.type)return(e=Object.assign({},r)).left=i({type:"MathExpression",operator:n,left:r.left,right:a},t),i(e,t);if(a.type===r.right.type)return e=Object.assign({},r),"-"===r.operator?(e.right=i({type:"MathExpression",operator:"-"===n?"+":"-",left:a,right:r.right},t),e.operator="-"===n?"-":"+"):e.right=i({type:"MathExpression",operator:n,left:r.right,right:a},t),e.right.value<0&&(e.right.value*=-1,e.operator="-"===e.operator?"+":"-"),i(e,t)}return e}(e,t);case"/":return function(e,t){if(!l(e.right.type))return e;if("Value"!==e.right.type)throw new Error('Cannot divide by "'+e.right.unit+'", number expected');if(0===e.right.value)throw new Error("Cannot divide by zero");if("MathExpression"===e.left.type)return l(e.left.left.type)&&l(e.left.right.type)?(e.left.left.value/=e.right.value,e.left.right.value/=e.right.value,i(e.left,t)):e;if(l(e.left.type))return e.left.value/=e.right.value,e.left;return e}(e,t);case"*":return function(e){if("MathExpression"===e.left.type&&"Value"===e.right.type){if(l(e.left.left.type)&&l(e.left.right.type))return e.left.left.value*=e.right.value,e.left.right.value*=e.right.value,e.left}else{if(l(e.left.type)&&"Value"===e.right.type)return e.left.value*=e.right.value,e.left;if("Value"===e.left.type&&"MathExpression"===e.right.type){if(l(e.right.left.type)&&l(e.right.right.type))return e.right.left.value*=e.left.value,e.right.right.value*=e.left.value,e.right}else if("Value"===e.left.type&&l(e.right.type))return e.right.value*=e.left.value,e.right}return e}(e)}return e}(e,t):"Calc"===e.type?i(e.value,t):e}function o(e,t){return e.type===t.type&&e.value===t.value}function l(e){switch(e){case"LengthValue":case"AngleValue":case"TimeValue":case"FrequencyValue":case"ResolutionValue":case"EmValue":case"ExValue":case"ChValue":case"RemValue":case"VhValue":case"VwValue":case"VminValue":case"VmaxValue":case"PercentageValue":case"Value":return!0}return!1}function c(e){return"+"===e?"-":"+"}function d(e){return l(e.type)?e.value=-e.value:"MathExpression"==e.type&&(e.left=d(e.left),e.right=d(e.right)),e}t.default=i},8541:(e,t,s)=>{var r=s(9812),a=s(149),n=s(4052),i=s(9841),o=r?r.prototype:void 0,l=o?o.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(n(t))return a(t,e)+"";if(i(t))return l?l.call(t):"";var s=t+"";return"0"==s&&1/t==-1/0?"-0":s}},8548:e=>{e.exports=function e(t,s,r){var a,n,i,o;for(a=0,n=t.length;a<n;a+=1)i=t[a],r||(o=s(i,a,t)),!1!==o&&"function"===i.type&&Array.isArray(i.nodes)&&e(i.nodes,s,r),r&&s(i,a,t)}},8646:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},8673:(e,t,s)=>{var r=s(3204),a=s(3713),n=s(6571);e.exports=function(e){return n(e)?r(e):a(e)}},8693:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},8724:(e,t,s)=>{var r=s(7615),a=s(5051),n=s(2154),i=s(8734),o=s(2662);function l(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=n,l.prototype.has=i,l.prototype.set=o,e.exports=l},8729:(e,t,s)=>{"use strict";s.d(t,{A:()=>c,O:()=>d});var r=s(9379),a=s(5043),n=s(250),i=s(6325),o=s(579);const l=(0,a.createContext)(),c=()=>{const e=(0,a.useContext)(l);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},d=e=>{let{children:t}=e;const[s,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!0),[h,m]=(0,a.useState)(!1),[p,x]=(0,a.useState)(!1);(0,a.useEffect)(()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("user"),s=localStorage.getItem("depotToken"),r=localStorage.getItem("depotUser");if(s&&r)try{const e=JSON.parse(r);e&&e._id&&e.role?c(e):(localStorage.removeItem("depotToken"),localStorage.removeItem("depotUser"),localStorage.removeItem("depotInfo"))}catch(a){console.error("Error parsing depot user data:",a),localStorage.removeItem("depotToken"),localStorage.removeItem("depotUser"),localStorage.removeItem("depotInfo")}else if(e&&t)try{const e=JSON.parse(t);e&&e._id&&e.role?c(e):(localStorage.removeItem("token"),localStorage.removeItem("user"))}catch(a){console.error("Error parsing user data:",a),localStorage.removeItem("token"),localStorage.removeItem("user")}u(!1)},[]);const g=(0,a.useCallback)(async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!p){x(!0),console.log("AuthContext.login called:",{userData:e,token:t,isDepotUser:s});try{if(!e||!e._id||!e.role)throw new Error("Invalid user data");const a=(e.email||"").toLowerCase(),i=/^[a-z0-9]+-depot@yatrik\.com$/.test(a),o=i||e.isDepotUser||e.depotId;console.log("AuthContext - Depot detection:",{email:a,isDepotEmail:i,userDataIsDepotUser:e.isDepotUser,userDataDepotId:e.depotId,detectedDepotUser:o,originalIsDepotUser:s});let l=e.role;"string"===typeof l&&(l=l.toLowerCase().trim(),"administrator"===l&&(l="admin"),"depot-manager"!==l&&"depotmanager"!==l||(l="depot_manager"));const d=(0,r.A)((0,r.A)({},e),{},{role:l,isDepotUser:o||s});console.log("AuthContext - Normalized user data:",{originalRole:e.role,normalizedRole:d.role,userId:d._id,userName:d.name,userEmail:d.email,isDepotUser:s}),c(d),d.isDepotUser?Promise.all([localStorage.setItem("depotToken",t),localStorage.setItem("depotUser",JSON.stringify(d)),localStorage.setItem("depotInfo",JSON.stringify({depotId:d.depotId,depotCode:d.depotCode,depotName:d.depotName,permissions:d.permissions}))]).catch(e=>console.warn("Failed to store depot data:",e)):Promise.all([localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(d))]).catch(e=>console.warn("Failed to store user data:",e)),"driver"===d.role&&setTimeout(async()=>{try{console.log("Starting automatic location tracking for driver...");const e=await n.A.getCurrentLocation();console.log("Initial driver location detected:",e),n.A.startTracking((e,t)=>{if(t)return void console.error("Location tracking error:",t);console.log("Driver location updated:",e);const s=localStorage.getItem("currentDutyId");s&&"demo"!==s&&n.A.sendLocationToBackend(s).catch(e=>console.error("Failed to send location to backend:",e))})}catch(e){console.warn("Failed to initialize location tracking:",e)}},100),console.log("AuthContext.login completed, user state updated:",d)}catch(a){throw console.error("Login error:",a),a}finally{x(!1)}}},[p]),f=(0,a.useCallback)(async()=>{if(!h){m(!0),console.log("\ud83d\udeaa Starting logout process...");try{"driver"===(null===s||void 0===s?void 0:s.role)&&(n.A.stopTracking(),console.log("\ud83d\udccd Location tracking stopped for driver logout")),c(null),console.log("\ud83d\udc64 User state cleared"),console.log("\ud83e\uddf9 Starting comprehensive cache clearing...");if(await(0,i.mL)()?console.log("\u2705 All caches cleared successfully during logout"):console.warn("\u26a0\ufe0f Some caches may not have been cleared completely"),"driver"===(null===s||void 0===s?void 0:s.role))try{localStorage.removeItem("driver_location"),localStorage.removeItem("driver_status"),localStorage.removeItem("active_duty")}catch(e){console.warn("Error clearing driver-specific data:",e)}else if("conductor"===(null===s||void 0===s?void 0:s.role))try{localStorage.removeItem("conductor_tickets"),localStorage.removeItem("conductor_status")}catch(e){console.warn("Error clearing conductor-specific data:",e)}else if("depot_manager"===(null===s||void 0===s?void 0:s.role))try{localStorage.removeItem("depot_schedule"),localStorage.removeItem("depot_fleet")}catch(e){console.warn("Error clearing depot-specific data:",e)}else if("admin"===(null===s||void 0===s?void 0:s.role))try{localStorage.removeItem("admin_dashboard_cache"),localStorage.removeItem("admin_reports_cache")}catch(e){console.warn("Error clearing admin-specific data:",e)}console.log("\ud83c\udf89 Logout process completed successfully")}catch(e){console.error("\u274c Error during logout process:",e);try{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("depotToken"),localStorage.removeItem("depotUser"),localStorage.removeItem("depotInfo"),localStorage.removeItem("currentDutyId")}catch(t){console.error("\u274c Error during fallback storage clearing:",t)}}finally{m(!1)}}},[h,s]),y={user:s,login:g,logout:f,loading:d,isLoggingOut:h,isLoggingIn:p};return(0,o.jsx)(l.Provider,{value:y,children:t})}},8734:(e,t,s)=>{var r=s(5575),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}},8853:(e,t,s)=>{"use strict";e.exports=s(7234)},8883:(e,t,s)=>{var r=s(5652),a=s(6571);e.exports=function(e,t){var s=-1,n=a(e)?Array(e.length):[];return r(e,function(e,r,a){n[++s]=t(e,r,a)}),n}},8895:e=>{e.exports=function(e,t){for(var s=-1,r=t.length,a=e.length;++s<r;)e[a+s]=t[s];return e}},8900:(e,t)=>{var s=function(){function e(e,t){var s;if(Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonParserError"}),null==e&&(e="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:e}),this.hash=t,t&&t.exception instanceof Error){var r=t.exception;this.message=r.message||e,s=r.stack}s||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):s=new Error(e).stack),s&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:s})}function t(e,t,s){s=s||0;for(var r=0;r<t;r++)this.push(e),e+=s}function s(e,t){for(t+=e=this.length-e;e<t;e++)this.push(this[e])}function r(e){for(var t=[],s=0,r=e.length;s<r;s++){var a=e[s];"function"===typeof a?(s++,a.apply(t,e[s])):t.push(a)}return t}"function"===typeof Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,Error.prototype):e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e.prototype.name="JisonParserError";var a={trace:function(){},JisonParserError:e,yy:{},options:{type:"lalr",hasPartialLrUpgradeOnConflict:!0,errorRecoveryTokenDiscardCount:3},symbols_:{$accept:0,$end:1,ADD:3,ANGLE:16,CHS:22,COMMA:14,CSS_CPROP:13,CSS_VAR:12,DIV:6,EMS:20,EOF:1,EXS:21,FREQ:18,LENGTH:15,LPAREN:7,MUL:5,NESTED_CALC:9,NUMBER:11,PERCENTAGE:28,PREFIX:10,REMS:23,RES:19,RPAREN:8,SUB:4,TIME:17,VHS:24,VMAXS:27,VMINS:26,VWS:25,css_value:33,css_variable:32,error:2,expression:29,math_expression:30,value:31},terminals_:{1:"EOF",2:"error",3:"ADD",4:"SUB",5:"MUL",6:"DIV",7:"LPAREN",8:"RPAREN",9:"NESTED_CALC",10:"PREFIX",11:"NUMBER",12:"CSS_VAR",13:"CSS_CPROP",14:"COMMA",15:"LENGTH",16:"ANGLE",17:"TIME",18:"FREQ",19:"RES",20:"EMS",21:"EXS",22:"CHS",23:"REMS",24:"VHS",25:"VWS",26:"VMINS",27:"VMAXS",28:"PERCENTAGE"},TERROR:2,EOF:1,originalQuoteName:null,originalParseError:null,cleanupAfterParse:null,constructParseErrorInfo:null,yyMergeLocationInfo:null,__reentrant_call_depth:0,__error_infos:[],__error_recovery_infos:[],quoteName:function(e){return'"'+e+'"'},getSymbolName:function(e){if(this.terminals_[e])return this.terminals_[e];var t=this.symbols_;for(var s in t)if(t[s]===e)return s;return null},describeSymbol:function(e){if(e!==this.EOF&&this.terminal_descriptions_&&this.terminal_descriptions_[e])return this.terminal_descriptions_[e];if(e===this.EOF)return"end of input";var t=this.getSymbolName(e);return t?this.quoteName(t):null},collect_expected_token_set:function(e,t){var s=this.TERROR,r=[],a={};if(!t&&this.state_descriptions_&&this.state_descriptions_[e])return[this.state_descriptions_[e]];for(var n in this.table[e])if((n=+n)!==s){var i=t?n:this.describeSymbol(n);i&&!a[i]&&(r.push(i),a[i]=!0)}return r},productions_:function(e){for(var t=[],s=e.pop,r=e.rule,a=0,n=s.length;a<n;a++)t.push([s[a],r[a]]);return t}({pop:r([29,t,[30,10],31,31,32,32,t,[33,15]]),rule:r([2,t,[3,5],4,7,t,[1,4],2,4,6,t,[1,14],2])}),performAction:function(e,t,s){var r=this.yy;r.parser,r.lexer;switch(e){case 0:case 6:this.$=s[t-1];break;case 1:return this.$=s[t-1],s[t-1];case 2:case 3:case 4:case 5:this.$={type:"MathExpression",operator:s[t-1],left:s[t-2],right:s[t]};break;case 7:this.$={type:"Calc",value:s[t-1]};break;case 8:this.$={type:"Calc",value:s[t-1],prefix:s[t-5]};break;case 9:case 10:case 11:this.$=s[t];break;case 12:this.$={type:"Value",value:parseFloat(s[t])};break;case 13:this.$={type:"Value",value:-1*parseFloat(s[t])};break;case 14:this.$={type:"CssVariable",value:s[t-1]};break;case 15:this.$={type:"CssVariable",value:s[t-3],fallback:s[t-1]};break;case 16:this.$={type:"LengthValue",value:parseFloat(s[t]),unit:/[a-z]+/.exec(s[t])[0]};break;case 17:this.$={type:"AngleValue",value:parseFloat(s[t]),unit:/[a-z]+/.exec(s[t])[0]};break;case 18:this.$={type:"TimeValue",value:parseFloat(s[t]),unit:/[a-z]+/.exec(s[t])[0]};break;case 19:this.$={type:"FrequencyValue",value:parseFloat(s[t]),unit:/[a-z]+/.exec(s[t])[0]};break;case 20:this.$={type:"ResolutionValue",value:parseFloat(s[t]),unit:/[a-z]+/.exec(s[t])[0]};break;case 21:this.$={type:"EmValue",value:parseFloat(s[t]),unit:"em"};break;case 22:this.$={type:"ExValue",value:parseFloat(s[t]),unit:"ex"};break;case 23:this.$={type:"ChValue",value:parseFloat(s[t]),unit:"ch"};break;case 24:this.$={type:"RemValue",value:parseFloat(s[t]),unit:"rem"};break;case 25:this.$={type:"VhValue",value:parseFloat(s[t]),unit:"vh"};break;case 26:this.$={type:"VwValue",value:parseFloat(s[t]),unit:"vw"};break;case 27:this.$={type:"VminValue",value:parseFloat(s[t]),unit:"vmin"};break;case 28:this.$={type:"VmaxValue",value:parseFloat(s[t]),unit:"vmax"};break;case 29:this.$={type:"PercentageValue",value:parseFloat(s[t]),unit:"%"};break;case 30:var a=s[t];a.value*=-1,this.$=a}},table:function(e){for(var t=[],s=e.len,r=e.symbol,a=e.type,n=e.state,i=e.mode,o=e.goto,l=0,c=s.length;l<c;l++){for(var d=s[l],u={},h=0;h<d;h++){var m=r.shift();switch(a.shift()){case 2:u[m]=[i.shift(),o.shift()];break;case 0:u[m]=n.shift();break;default:u[m]=[3]}}t.push(u)}return t}({len:r([24,1,5,23,1,18,t,[0,3],1,t,[0,16],t,[23,4],s,[28,3],0,0,16,1,6,6,t,[0,3],5,1,2,s,[37,3],s,[20,3],5,0,0]),symbol:r([4,7,9,11,12,t,[15,19,1],1,1,t,[3,4,1],s,[30,19],s,[29,4],7,4,10,11,s,[22,14],s,[19,3],s,[43,22],s,[23,69],s,[139,4],8,s,[51,24],4,s,[138,15],13,s,[186,5],8,s,[6,6],s,[5,5],9,8,14,s,[159,47],s,[60,10]]),type:r([t,[2,19],t,[0,5],1,t,[2,24],t,[0,4],s,[22,19],s,[43,42],s,[23,70],s,[28,25],s,[45,25],s,[113,54]]),state:r([1,2,8,6,7,30,s,[4,3],33,37,s,[5,3],38,s,[4,3],39,s,[4,3],40,s,[4,3],42,s,[21,4],50,s,[5,3],51,s,[4,3]]),mode:r([t,[1,179],t,[2,3],s,[5,5],s,[6,4],t,[1,57]]),goto:r([5,3,4,24,t,[9,15,1],t,[25,5,1],s,[24,19],31,35,32,34,s,[18,14],36,s,[38,19],s,[19,57],s,[118,4],41,s,[24,19],43,35,s,[16,14],44,t,[2,3],28,29,2,t,[3,3],28,29,3,s,[53,4],t,[45,5,1],s,[100,42],52,s,[5,4],53])}),defaultActions:function(e){for(var t={},s=e.idx,r=e.goto,a=0,n=s.length;a<n;a++){t[s[a]]=r[a]}return t}({idx:r([6,7,8,t,[10,16,1],33,34,39,40,41,45,47,52,53]),goto:r([9,10,11,t,[16,14,1],12,1,30,13,t,[4,4,1],14,15,8])}),parseError:function(e,t,s){if(!t.recoverable)throw"function"===typeof this.trace&&this.trace(e),s||(s=this.JisonParserError),new s(e,t);"function"===typeof this.trace&&this.trace(e),t.destroy()},parse:function(e){var t,s=this,r=new Array(128),a=new Array(128),n=new Array(128),i=this.table,o=0,l=0,c=(this.TERROR,this.EOF),d=(this.options.errorRecoveryTokenDiscardCount,[0,54]);t=this.__lexer__?this.__lexer__:this.__lexer__=Object.create(this.lexer);var u={parseError:void 0,quoteName:void 0,lexer:void 0,parser:void 0,pre_parse:void 0,post_parse:void 0,pre_lex:void 0,post_lex:void 0};function h(){var e=t.fastLex();return"number"!==typeof e&&(e=s.symbols_[e]||e),e||c}"function"!==typeof assert||assert,this.yyGetSharedState=function(){return u},function(e,t){for(var s in t)"undefined"===typeof e[s]&&Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}(u,this.yy),u.lexer=t,u.parser=this,"function"===typeof u.parseError?this.parseError=function(e,t,s){return s||(s=this.JisonParserError),u.parseError.call(this,e,t,s)}:this.parseError=this.originalParseError,"function"===typeof u.quoteName?this.quoteName=function(e){return u.quoteName.call(this,e)}:this.quoteName=this.originalQuoteName,this.cleanupAfterParse=function(e,s,i){var l,c;s&&((u.post_parse||this.post_parse)&&(c=this.constructParseErrorInfo(null,null,null,!1)),u.post_parse&&"undefined"!==typeof(l=u.post_parse.call(this,u,e,c))&&(e=l),this.post_parse&&"undefined"!==typeof(l=this.post_parse.call(this,u,e,c))&&(e=l),c&&c.destroy&&c.destroy());if(this.__reentrant_call_depth>1)return e;if(t.cleanupAfterLex&&t.cleanupAfterLex(i),u&&(u.lexer=void 0,u.parser=void 0,t.yy===u&&(t.yy=void 0)),u=void 0,this.parseError=this.originalParseError,this.quoteName=this.originalQuoteName,r.length=0,a.length=0,n.length=0,o=0,!i){for(var d=this.__error_infos.length-1;d>=0;d--){var h=this.__error_infos[d];h&&"function"===typeof h.destroy&&h.destroy()}this.__error_infos.length=0}return e},this.constructParseErrorInfo=function(e,s,i,c){var d={errStr:e,exception:s,text:t.match,value:t.yytext,token:this.describeSymbol(l)||l,token_id:l,line:t.yylineno,expected:i,recoverable:c,state:m,action:p,new_state:v,symbol_stack:r,state_stack:a,value_stack:n,stack_pointer:o,yy:u,lexer:t,parser:this,destroy:function(){var e=!!this.recoverable;for(var t in this)this.hasOwnProperty(t)&&"object"===typeof t&&(this[t]=void 0);this.recoverable=e}};return this.__error_infos.push(d),d};var m,p,x,g,f,y,b,v,j=function(){var e=t.lex();return"number"!==typeof e&&(e=s.symbols_[e]||e),e||c},N={$:!0,_$:void 0,yy:u},w=!1;try{if(this.__reentrant_call_depth++,t.setInput(e,u),"function"===typeof t.canIUse)t.canIUse().fastLex&&(j=h);for(n[o]=null,a[o]=0,r[o]=0,++o,this.pre_parse&&this.pre_parse.call(this,u),u.pre_parse&&u.pre_parse.call(this,u),v=a[o-1];;){if(m=v,this.defaultActions[m])p=2,v=this.defaultActions[m];else if(l||(l=j()),g=i[m]&&i[m][l]||d,v=g[1],!(p=g[0])){var k,A=this.describeSymbol(l)||l,S=this.collect_expected_token_set(m);k="number"===typeof t.yylineno?"Parse error on line "+(t.yylineno+1)+": ":"Parse error: ","function"===typeof t.showPosition&&(k+="\n"+t.showPosition(69,10)+"\n"),S.length?k+="Expecting "+S.join(", ")+", got unexpected "+A:k+="Unexpected "+A,f=this.constructParseErrorInfo(k,null,S,!1),"undefined"!==typeof(x=this.parseError(f.errStr,f,this.JisonParserError))&&(w=x);break}switch(p){default:if(p instanceof Array){f=this.constructParseErrorInfo("Parse Error: multiple actions possible at state: "+m+", token: "+l,null,null,!1),"undefined"!==typeof(x=this.parseError(f.errStr,f,this.JisonParserError))&&(w=x);break}f=this.constructParseErrorInfo("Parsing halted. No viable error recovery approach available due to internal system failure.",null,null,!1),"undefined"!==typeof(x=this.parseError(f.errStr,f,this.JisonParserError))&&(w=x);break;case 1:r[o]=l,n[o]=t.yytext,a[o]=v,++o,l=0;continue;case 2:if(y=(b=this.productions_[v-1])[1],"undefined"!==typeof(x=this.performAction.call(N,v,o-1,n))){w=x;break}o-=y;var C=b[0];r[o]=C,n[o]=N.$,v=i[a[o-1]][C],a[o]=v,++o;continue;case 3:-2!==o&&(w=!0,o--,"undefined"!==typeof n[o]&&(w=n[o]))}break}}catch(_){if(_ instanceof this.JisonParserError)throw _;if(t&&"function"===typeof t.JisonLexerError&&_ instanceof t.JisonLexerError)throw _;f=this.constructParseErrorInfo("Parsing aborted due to exception.",_,null,!1),w=!1,"undefined"!==typeof(x=this.parseError(f.errStr,f,this.JisonParserError))&&(w=x)}finally{w=this.cleanupAfterParse(w,!0,!0),this.__reentrant_call_depth--}return w}};a.originalParseError=a.parseError,a.originalQuoteName=a.quoteName;var n=function(){function e(e,t){var s;if(Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonLexerError"}),null==e&&(e="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:e}),this.hash=t,t&&t.exception instanceof Error){var r=t.exception;this.message=r.message||e,s=r.stack}s||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):s=new Error(e).stack),s&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:s})}"function"===typeof Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,Error.prototype):e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e.prototype.name="JisonLexerError";var t={EOF:1,ERROR:2,__currentRuleSet__:null,__error_infos:[],__decompressed:!1,done:!1,_backtrack:!1,_input:"",_more:!1,_signaled_error_token:!1,conditionStack:[],match:"",matched:"",matches:!1,yytext:"",offset:0,yyleng:0,yylineno:0,yylloc:null,constructLexErrorInfo:function(e,t,s){if(e=""+e,void 0==s&&(s=!(e.indexOf("\n")>0&&e.indexOf("^")>0)),this.yylloc&&s)if("function"===typeof this.prettyPrintRange){this.prettyPrintRange(this.yylloc);/\n\s*$/.test(e)||(e+="\n"),e+="\n  Erroneous area:\n"+this.prettyPrintRange(this.yylloc)}else if("function"===typeof this.showPosition){var r=this.showPosition();r&&(e.length&&"\n"!==e[e.length-1]&&"\n"!==r[0]?e+="\n"+r:e+=r)}var a={errStr:e,recoverable:!!t,text:this.match,token:null,line:this.yylineno,loc:this.yylloc,yy:this.yy,lexer:this,destroy:function(){var e=!!this.recoverable;for(var t in this)this.hasOwnProperty(t)&&"object"===typeof t&&(this[t]=void 0);this.recoverable=e}};return this.__error_infos.push(a),a},parseError:function(e,t,s){if(s||(s=this.JisonLexerError),this.yy){if(this.yy.parser&&"function"===typeof this.yy.parser.parseError)return this.yy.parser.parseError.call(this,e,t,s)||this.ERROR;if("function"===typeof this.yy.parseError)return this.yy.parseError.call(this,e,t,s)||this.ERROR}throw new s(e,t)},yyerror:function(e){var t="";this.yylloc&&(t=" on line "+(this.yylineno+1));var s=this.constructLexErrorInfo("Lexical error"+t+": "+e,this.options.lexerErrorsAreRecoverable),r=Array.prototype.slice.call(arguments,1);return r.length&&(s.extra_error_attributes=r),this.parseError(s.errStr,s,this.JisonLexerError)||this.ERROR},cleanupAfterLex:function(e){if(this.setInput("",{}),!e){for(var t=this.__error_infos.length-1;t>=0;t--){var s=this.__error_infos[t];s&&"function"===typeof s.destroy&&s.destroy()}this.__error_infos.length=0}return this},clear:function(){this.yytext="",this.yyleng=0,this.match="",this.matches=!1,this._more=!1,this._backtrack=!1;var e=this.yylloc?this.yylloc.last_column:0;this.yylloc={first_line:this.yylineno+1,first_column:e,last_line:this.yylineno+1,last_column:e,range:[this.offset,this.offset]}},setInput:function(e,t){if(this.yy=t||this.yy||{},!this.__decompressed){for(var s=this.rules,r=0,a=s.length;r<a;r++){"number"===typeof(h=s[r])&&(s[r]=s[h])}var n=this.conditions;for(var i in n){var o=n[i],l=o.rules,c=(a=l.length,new Array(a+1)),d=new Array(a+1);for(r=0;r<a;r++){var u=l[r],h=s[u];c[r+1]=h,d[r+1]=u}o.rules=d,o.__rule_regexes=c,o.__rule_count=a}this.__decompressed=!0}return this._input=e||"",this.clear(),this._signaled_error_token=!1,this.done=!1,this.yylineno=0,this.matched="",this.conditionStack=["INITIAL"],this.__currentRuleSet__=null,this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0,range:[0,0]},this.offset=0,this},editRemainingInput:function(e,t){var s=e.call(this,this._input,t);return"string"!==typeof s?s&&(this._input=""+s):this._input=s,this},input:function(){if(!this._input)return null;var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=1,s=!1;if("\n"===e)s=!0;else if("\r"===e){s=!0;var r=this._input[1];"\n"===r&&(t++,e+=r,this.yytext+=r,this.yyleng++,this.offset++,this.match+=r,this.matched+=r,this.yylloc.range[1]++)}return s?(this.yylineno++,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++,this.yylloc.range[1]++,this._input=this._input.slice(t),e},unput:function(e){var t=e.length,s=e.split(/(?:\r\n?|\n)/g);if(this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.yyleng=this.yytext.length,this.offset-=t,this.match=this.match.substr(0,this.match.length-t),this.matched=this.matched.substr(0,this.matched.length-t),s.length>1){this.yylineno-=s.length-1,this.yylloc.last_line=this.yylineno+1;var r=this.match,a=r.split(/(?:\r\n?|\n)/g);1===a.length&&(a=(r=this.matched).split(/(?:\r\n?|\n)/g)),this.yylloc.last_column=a[a.length-1].length}else this.yylloc.last_column-=t;return this.yylloc.range[1]=this.yylloc.range[0]+this.yyleng,this.done=!1,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else{var e="";this.yylloc&&(e=" on line "+(this.yylineno+1));var t=this.constructLexErrorInfo("Lexical error"+e+": You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).",!1);this._signaled_error_token=this.parseError(t.errStr,t,this.JisonLexerError)||this.ERROR}return this},less:function(e){return this.unput(this.match.slice(e))},pastInput:function(e,t){var s=this.matched.substring(0,this.matched.length-this.match.length);e<0?e=s.length:e||(e=20),t<0?t=s.length:t||(t=1);var r=(s=s.substr(2*-e-2)).replace(/\r\n|\r/g,"\n").split("\n");return(s=(r=r.slice(-t)).join("\n")).length>e&&(s="..."+s.substr(-e)),s},upcomingInput:function(e,t){var s=this.match;e<0?e=s.length+this._input.length:e||(e=20),t<0?t=e:t||(t=1),s.length<2*e+2&&(s+=this._input.substring(0,2*e+2));var r=s.replace(/\r\n|\r/g,"\n").split("\n");return(s=(r=r.slice(0,t)).join("\n")).length>e&&(s=s.substring(0,e)+"..."),s},showPosition:function(e,t){var s=this.pastInput(e).replace(/\s/g," "),r=new Array(s.length+1).join("-");return s+this.upcomingInput(t).replace(/\s/g," ")+"\n"+r+"^"},deriveLocationInfo:function(e,t,s,r){var a={first_line:1,first_column:0,last_line:1,last_column:0,range:[0,0]};return e&&(a.first_line=0|e.first_line,a.last_line=0|e.last_line,a.first_column=0|e.first_column,a.last_column=0|e.last_column,e.range&&(a.range[0]=0|e.range[0],a.range[1]=0|e.range[1])),(a.first_line<=0||a.last_line<a.first_line)&&(a.first_line<=0&&t&&(a.first_line=0|t.last_line,a.first_column=0|t.last_column,t.range&&(a.range[0]=0|e.range[1])),(a.last_line<=0||a.last_line<a.first_line)&&s&&(a.last_line=0|s.first_line,a.last_column=0|s.first_column,s.range&&(a.range[1]=0|e.range[0])),a.first_line<=0&&r&&(a.last_line<=0||r.last_line<=a.last_line)&&(a.first_line=0|r.first_line,a.first_column=0|r.first_column,r.range&&(a.range[0]=0|r.range[0])),a.last_line<=0&&r&&(a.first_line<=0||r.first_line>=a.first_line)&&(a.last_line=0|r.last_line,a.last_column=0|r.last_column,r.range&&(a.range[1]=0|r.range[1]))),a.last_line<=0&&(a.first_line<=0?(a.first_line=this.yylloc.first_line,a.last_line=this.yylloc.last_line,a.first_column=this.yylloc.first_column,a.last_column=this.yylloc.last_column,a.range[0]=this.yylloc.range[0],a.range[1]=this.yylloc.range[1]):(a.last_line=this.yylloc.last_line,a.last_column=this.yylloc.last_column,a.range[1]=this.yylloc.range[1])),a.first_line<=0&&(a.first_line=a.last_line,a.first_column=0,a.range[1]=a.range[0]),a.first_column<0&&(a.first_column=0),a.last_column<0&&(a.last_column=a.first_column>0?a.first_column:80),a},prettyPrintRange:function(e,t,s){e=this.deriveLocationInfo(e,t,s);var r=(this.matched+this._input).split("\n"),a=Math.max(1,t?t.first_line:e.first_line-3),n=Math.max(1,s?s.last_line:e.last_line+1),i=1+Math.log10(1|n)|0,o=new Array(i).join(" "),l=[],c=r.slice(a-1,n+1).map(function(t,s){var r=s+a,n=(o+r).substr(-i)+": "+t,c=new Array(i+1).join("^"),d=3,u=0;(r===e.first_line?(d+=e.first_column,u=Math.max(2,(r===e.last_line?e.last_column:t.length)-e.first_column+1)):r===e.last_line?u=Math.max(2,e.last_column+1):r>e.first_line&&r<e.last_line&&(u=Math.max(2,t.length+1)),u)&&(n+="\n"+c+new Array(d).join(".")+new Array(u).join("^"),t.trim().length>0&&l.push(s));return n=n.replace(/\t/g," ")});if(l.length>4){var d=l[1]+1,u=l[l.length-2]-1,h=new Array(i+1).join(" ")+"  (...continued...)";h+="\n"+new Array(i+1).join("-")+"  (---------------)",c.splice(d,u-d+1,h)}return c.join("\n")},describeYYLLOC:function(e,t){var s,r=e.first_line,a=e.last_line,n=e.first_column,i=e.last_column;if(0===a-r?(s="line "+r+", ",s+=i-n<=1?"column "+n:"columns "+n+" .. "+i):s="lines "+r+"(column "+n+") .. "+a+"(column "+i+")",e.range&&t){var o=e.range[0],l=e.range[1]-1;s+=l<=o?" {String Offset: "+o+"}":" {String Offset range: "+o+" .. "+l+"}"}return s},test_match:function(e,t){var s,r,a,n,i;if(this.options.backtrack_lexer&&(a={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.yylloc.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column,range:this.yylloc.range.slice(0)},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done}),i=(n=e[0]).length,(r=n.split(/(?:\r\n?|\n)/g)).length>1?(this.yylineno+=r.length-1,this.yylloc.last_line=this.yylineno+1,this.yylloc.last_column=r[r.length-1].length):this.yylloc.last_column+=i,this.yytext+=n,this.match+=n,this.matched+=n,this.matches=e,this.yyleng=this.yytext.length,this.yylloc.range[1]+=i,this.offset+=i,this._more=!1,this._backtrack=!1,this._input=this._input.slice(i),s=this.performAction.call(this,this.yy,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),s)return s;if(this._backtrack){for(var o in a)this[o]=a[o];return this.__currentRuleSet__=null,!1}return!!this._signaled_error_token&&(s=this._signaled_error_token,this._signaled_error_token=!1,s)},next:function(){if(this.done)return this.clear(),this.EOF;var e,t,s,r;this._input||(this.done=!0),this._more||this.clear();var a=this.__currentRuleSet__;if(!a&&(!(a=this.__currentRuleSet__=this._currentRules())||!a.rules)){var n="";this.options.trackPosition&&(n=" on line "+(this.yylineno+1));var i=this.constructLexErrorInfo("Internal lexer engine error"+n+': The lex grammar programmer pushed a non-existing condition name "'+this.topState()+'"; this is a fatal error and should be reported to the application programmer team!',!1);return this.parseError(i.errStr,i,this.JisonLexerError)||this.ERROR}for(var o=a.rules,l=a.__rule_regexes,c=a.__rule_count,d=1;d<=c;d++)if((s=this._input.match(l[d]))&&(!t||s[0].length>t[0].length)){if(t=s,r=d,this.options.backtrack_lexer){if(!1!==(e=this.test_match(s,o[d])))return e;if(this._backtrack){t=void 0;continue}return!1}if(!this.options.flex)break}if(t)return!1!==(e=this.test_match(t,o[r]))&&e;if(this._input){n="";this.options.trackPosition&&(n=" on line "+(this.yylineno+1));i=this.constructLexErrorInfo("Lexical error"+n+": Unrecognized text.",this.options.lexerErrorsAreRecoverable);var u=this._input,h=this.topState(),m=this.conditionStack.length;return(e=this.parseError(i.errStr,i,this.JisonLexerError)||this.ERROR)===this.ERROR&&(this.matches||u!==this._input||h!==this.topState()||m!==this.conditionStack.length||this.input()),e}return this.done=!0,this.clear(),this.EOF},lex:function(){var e;for("function"===typeof this.pre_lex&&(e=this.pre_lex.call(this,0)),"function"===typeof this.options.pre_lex&&(e=this.options.pre_lex.call(this,e)||e),this.yy&&"function"===typeof this.yy.pre_lex&&(e=this.yy.pre_lex.call(this,e)||e);!e;)e=this.next();return this.yy&&"function"===typeof this.yy.post_lex&&(e=this.yy.post_lex.call(this,e)||e),"function"===typeof this.options.post_lex&&(e=this.options.post_lex.call(this,e)||e),"function"===typeof this.post_lex&&(e=this.post_lex.call(this,e)||e),e},fastLex:function(){for(var e;!e;)e=this.next();return e},canIUse:function(){return{fastLex:!("function"===typeof this.pre_lex||"function"===typeof this.options.pre_lex||this.yy&&"function"===typeof this.yy.pre_lex||this.yy&&"function"===typeof this.yy.post_lex||"function"===typeof this.options.post_lex||"function"===typeof this.post_lex)&&"function"===typeof this.fastLex}},begin:function(e){return this.pushState(e)},pushState:function(e){return this.conditionStack.push(e),this.__currentRuleSet__=null,this},popState:function(){return this.conditionStack.length-1>0?(this.__currentRuleSet__=null,this.conditionStack.pop()):this.conditionStack[0]},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL},stateStackSize:function(){return this.conditionStack.length},options:{trackPosition:!0},JisonLexerError:e,performAction:function(e,t,s){if(1!==t)return this.simpleCaseActionClusters[t]},simpleCaseActionClusters:{0:13,2:5,3:6,4:3,5:4,6:15,7:15,8:15,9:15,10:15,11:15,12:16,13:16,14:16,15:16,16:17,17:17,18:18,19:18,20:19,21:19,22:19,23:20,24:21,25:22,26:23,27:25,28:24,29:26,30:27,31:28,32:11,33:9,34:12,35:10,36:7,37:8,38:14,39:1},rules:[/^(?:(--[\d\-A-Za-z]*))/,/^(?:\s+)/,/^(?:\*)/,/^(?:\/)/,/^(?:\+)/,/^(?:-)/,/^(?:(\d+(\.\d*)?|\.\d+)px\b)/,/^(?:(\d+(\.\d*)?|\.\d+)cm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)mm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)in\b)/,/^(?:(\d+(\.\d*)?|\.\d+)pt\b)/,/^(?:(\d+(\.\d*)?|\.\d+)pc\b)/,/^(?:(\d+(\.\d*)?|\.\d+)deg\b)/,/^(?:(\d+(\.\d*)?|\.\d+)grad\b)/,/^(?:(\d+(\.\d*)?|\.\d+)rad\b)/,/^(?:(\d+(\.\d*)?|\.\d+)turn\b)/,/^(?:(\d+(\.\d*)?|\.\d+)s\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ms\b)/,/^(?:(\d+(\.\d*)?|\.\d+)Hz\b)/,/^(?:(\d+(\.\d*)?|\.\d+)kHz\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dpi\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dpcm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dppx\b)/,/^(?:(\d+(\.\d*)?|\.\d+)em\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ex\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ch\b)/,/^(?:(\d+(\.\d*)?|\.\d+)rem\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vw\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vh\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vmin\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vmax\b)/,/^(?:(\d+(\.\d*)?|\.\d+)%)/,/^(?:(\d+(\.\d*)?|\.\d+)\b)/,/^(?:(calc))/,/^(?:(var))/,/^(?:([a-z]+))/,/^(?:\()/,/^(?:\))/,/^(?:,)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39],inclusive:!0}}};return t}();function i(){this.yy={}}return a.lexer=n,i.prototype=a,a.Parser=i,new i}();t.parser=s,t.Parser=s.Parser,t.parse=function(){return s.parse.apply(s,arguments)}},8902:(e,t,s)=>{var r=s(4816),a=s(6179),n=s(6704);function i(e){var t=-1,s=null==e?0:e.length;for(this.__data__=new r;++t<s;)this.add(e[t])}i.prototype.add=i.prototype.push=a,i.prototype.has=n,e.exports=i},8927:e=>{var t="-".charCodeAt(0),s="+".charCodeAt(0),r=".".charCodeAt(0),a="e".charCodeAt(0),n="E".charCodeAt(0);e.exports=function(e){for(var i,o=0,l=e.length,c=!1,d=-1,u=!1;o<l;){if((i=e.charCodeAt(o))>=48&&i<=57)u=!0;else if(i===a||i===n){if(d>-1)break;d=o}else if(i===r){if(c)break;c=!0}else{if(i!==s&&i!==t)break;if(0!==o)break}o+=1}return d+1===o&&o--,!!u&&{number:e.slice(0,o),unit:e.slice(o)}}},8990:(e,t,s)=>{var r=s(9995)(s(2520));e.exports=r},9057:(e,t,s)=>{var r=s(5324),a=s(2777),n=s(4052),i=s(9194),o=s(6173),l=s(914);e.exports=function(e,t,s){for(var c=-1,d=(t=r(t,e)).length,u=!1;++c<d;){var h=l(t[c]);if(!(u=null!=e&&s(e,h)))break;e=e[h]}return u||++c!=d?u:!!(d=null==e?0:e.length)&&o(d)&&i(h,d)&&(n(e)||a(e))}},9062:(e,t,s)=>{"use strict";e.exports=s(6378)},9081:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var r=s(3862),a=s(3768);const n=class{static async initializeRazorpay(){if("undefined"!==typeof window&&window.Razorpay)return window.Razorpay;const e=e=>new Promise(t=>{const s=document.createElement("script");s.src=e,s.async=!0,s.onload=()=>t(!0),s.onerror=()=>t(!1),document.body.appendChild(s)});let t=await e("https://checkout.razorpay.com/v1/checkout.js");if(t||(console.warn("Razorpay CDN unavailable; using local fallback"),t=await e("/vendor/razorpay.checkout.js")),!t||!window.Razorpay)throw new Error("Razorpay script failed to load");return window.Razorpay}static async createOrder(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"INR";try{const n=await(0,r.nr)("/api/payments/create-order",{method:"POST",body:JSON.stringify({amount:e,currency:a,bookingId:t,passengerId:s})});if(!n.ok)throw new Error(n.message||"Failed to create payment order");return n.data}catch(n){throw console.error("Error creating payment order:",n),n}}static async processPayment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const s=await this.initializeRazorpay(),r=new s({key:"rzp_test_1DP5mmOlF5G5ag",amount:e.amount,currency:e.currency||"INR",name:"YATRIK ERP",description:"Bus Ticket Booking",order_id:e.orderId,handler:async t=>{try{return await this.verifyPayment(t,e.bookingId),a.Ay.success("Payment successful!"),{success:!0,paymentId:t.razorpay_payment_id}}catch(s){throw a.Ay.error("Payment verification failed"),s}},prefill:{name:t.name||"",email:t.email||"",contact:t.phone||""},theme:{color:"#E91E63"},modal:{ondismiss:()=>{a.Ay.error("Payment cancelled")}}});return r.open(),new Promise((e,t)=>{r.on("payment.failed",e=>{a.Ay.error("Payment failed"),t(new Error("Payment failed"))})})}catch(s){throw console.error("Error processing payment:",s),s}}static async verifyPayment(e,t){try{const s=await(0,r.nr)("/api/payments/verify-payment",{method:"POST",body:JSON.stringify({razorpay_order_id:e.razorpay_order_id,razorpay_payment_id:e.razorpay_payment_id,razorpay_signature:e.razorpay_signature,bookingId:t})});if(!s.ok)throw new Error(s.message||"Payment verification failed");return s.data}catch(s){throw console.error("Error verifying payment:",s),s}}static async getPaymentStatus(e){try{const t=await(0,r.nr)("/api/payments/status/".concat(e));if(!t.ok)throw new Error(t.message||"Failed to get payment status");return t.data}catch(t){throw console.error("Error getting payment status:",t),t}}static async getPaymentHistory(){try{const e=await(0,r.nr)("/api/payments/history");if(!e.ok)throw new Error(e.message||"Failed to get payment history");return e.data}catch(e){throw console.error("Error getting payment history:",e),e}}static async addMoneyToWallet(e){try{const t=await this.createOrder(e,"wallet_".concat(Date.now()),"wallet");return this.processPayment(t)}catch(t){throw console.error("Error adding money to wallet:",t),t}}static formatCurrency(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(e)}}},9096:(e,t,s)=>{var r=s(9256),a=s(5029),n=s(3279),i=s(4052),o=s(3932);e.exports=function(e){return"function"==typeof e?e:null==e?n:"object"==typeof e?i(e)?a(e[0],e[1]):r(e):o(e)}},9115:(e,t,s)=>{var r=s(5967),a=s(6311),n=s(715);e.exports=function(e){return a(e)?n(e):r(e)}},9140:(e,t,s)=>{var r=s(7303);e.exports=function(e){var t=r(e),s=t%1;return t===t?s?t-s:t:0}},9160:(e,t,s)=>{var r=s(6913),a=s(2761);e.exports=function(e){return"number"==typeof e||a(e)&&"[object Number]"==r(e)}},9194:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,s){var r=typeof e;return!!(s=null==s?9007199254740991:s)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<s}},9256:(e,t,s)=>{var r=s(6532),a=s(3781),n=s(1310);e.exports=function(e){var t=a(e);return 1==t.length&&t[0][2]?n(t[0][0],t[0][1]):function(s){return s===e||r(s,e,t)}}},9292:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},9364:(e,t,s)=>{var r=s(9742),a=s(9096),n=s(61);e.exports=function(e,t){return e&&e.length?r(e,a(t,2),n):void 0}},9379:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(4705);function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function n(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach(function(t){(0,r.A)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}},9394:(e,t,s)=>{var r=s(2622);e.exports=function(e){return r(this,e).has(e)}},9395:(e,t,s)=>{var r=s(4262),a=s(9621),n=s(8673);e.exports=function(e){return r(e,n,a)}},9417:(e,t,s)=>{var r=s(6686);e.exports=function(e){return e===e&&!r(e)}},9435:(e,t,s)=>{"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,s):{};r.get||r.set?Object.defineProperty(t,s,r):t[s]=e[s]}t.default=e}(s(5173));var r=o(s(1325)),a=o(s(2854)),n=o(s(5043)),i=o(s(7324));s(927);function o(e){return e&&e.__esModule?e:{default:e}}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},l.apply(this,arguments)}var c=function(e,t){return e&&t&&t.split(" ").forEach(function(t){return(0,r.default)(e,t)})},d=function(e,t){return e&&t&&t.split(" ").forEach(function(t){return(0,a.default)(e,t)})},u=function(e){var t,s;function r(){for(var t,s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).onEnter=function(e,s){var r=t.getClassNames(s?"appear":"enter").className;t.removeClasses(e,"exit"),c(e,r),t.props.onEnter&&t.props.onEnter(e,s)},t.onEntering=function(e,s){var r=t.getClassNames(s?"appear":"enter").activeClassName;t.reflowAndAddClass(e,r),t.props.onEntering&&t.props.onEntering(e,s)},t.onEntered=function(e,s){var r=t.getClassNames("appear").doneClassName,a=t.getClassNames("enter").doneClassName,n=s?r+" "+a:a;t.removeClasses(e,s?"appear":"enter"),c(e,n),t.props.onEntered&&t.props.onEntered(e,s)},t.onExit=function(e){var s=t.getClassNames("exit").className;t.removeClasses(e,"appear"),t.removeClasses(e,"enter"),c(e,s),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var s=t.getClassNames("exit").activeClassName;t.reflowAndAddClass(e,s),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var s=t.getClassNames("exit").doneClassName;t.removeClasses(e,"exit"),c(e,s),t.props.onExited&&t.props.onExited(e)},t.getClassNames=function(e){var s=t.props.classNames,r="string"===typeof s,a=r?(r&&s?s+"-":"")+e:s[e];return{className:a,activeClassName:r?a+"-active":s[e+"Active"],doneClassName:r?a+"-done":s[e+"Done"]}},t}s=e,(t=r).prototype=Object.create(s.prototype),t.prototype.constructor=t,t.__proto__=s;var a=r.prototype;return a.removeClasses=function(e,t){var s=this.getClassNames(t),r=s.className,a=s.activeClassName,n=s.doneClassName;r&&d(e,r),a&&d(e,a),n&&d(e,n)},a.reflowAndAddClass=function(e,t){t&&(e&&e.scrollTop,c(e,t))},a.render=function(){var e=l({},this.props);return delete e.classNames,n.default.createElement(i.default,l({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},r}(n.default.Component);u.defaultProps={classNames:""},u.propTypes={};var h=u;t.default=h,e.exports=t.default},9621:(e,t,s)=>{var r=s(7529),a=s(7828),n=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(e){return null==e?[]:(e=Object(e),r(i(e),function(t){return n.call(e,t)}))}:a;e.exports=o},9676:e=>{var t=Math.ceil,s=Math.max;e.exports=function(e,r,a,n){for(var i=-1,o=s(t((r-e)/(a||1)),0),l=Array(o);o--;)l[n?o:++i]=e,e+=a;return l}},9686:e=>{e.exports=function(e){return null==e}},9742:(e,t,s)=>{var r=s(9841);e.exports=function(e,t,s){for(var a=-1,n=e.length;++a<n;){var i=e[a],o=t(i);if(null!=o&&(void 0===l?o===o&&!r(o):s(o,l)))var l=o,c=i}return c}},9812:(e,t,s)=>{var r=s(6552).Symbol;e.exports=r},9841:(e,t,s)=>{var r=s(6913),a=s(2761);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==r(e)}},9853:(e,t,s)=>{var r=s(6989);e.exports=function(e,t){return r(e,t)}},9855:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r=(0,s(7784).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},9889:(e,t,s)=>{var r=s(3950),a=s(6686);e.exports=function(e,t,s){var n=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return a(s)&&(n="leading"in s?!!s.leading:n,i="trailing"in s?!!s.trailing:i),r(e,t,{leading:n,maxWait:t,trailing:i})}},9935:(e,t,s)=>{var r=s(1340),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,s=r(t,e);return!(s<0)&&(s==t.length-1?t.pop():a.call(t,s,1),--this.size,!0)}},9987:(e,t,s)=>{var r=s(9812),a=s(2929),n=s(3211),i=s(3668),o=s(4160),l=s(2074),c=r?r.prototype:void 0,d=c?c.valueOf:void 0;e.exports=function(e,t,s,r,c,u,h){switch(s){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new a(e),new a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return n(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var m=o;case"[object Set]":var p=1&r;if(m||(m=l),e.size!=t.size&&!p)return!1;var x=h.get(e);if(x)return x==t;r|=2,h.set(e,t);var g=i(m(e),m(t),r,c,u,h);return h.delete(e),g;case"[object Symbol]":if(d)return d.call(e)==d.call(t)}return!1}},9995:(e,t,s)=>{var r=s(9096),a=s(6571),n=s(8673);e.exports=function(e){return function(t,s,i){var o=Object(t);if(!a(t)){var l=r(s,3);t=n(t),s=function(e){return l(o[e],e,o)}}var c=e(t,s,i);return c>-1?o[l?t[c]:c]:void 0}}}},t={};function s(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=e,s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;s.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var n=Object.create(null);s.r(n);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>r[e]);return i.default=()=>r,s.d(n,i),n}})(),s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce((t,r)=>(s.f[r](e,t),t),[])),s.u=e=>"static/js/"+e+"."+{7:"d495d579",21:"4057af20",25:"4e115d9b",403:"1f8dcebc",451:"c297c937",717:"c1113c87",738:"f756a41f",806:"70685b3e"}[e]+".chunk.js",s.miniCssF=e=>"static/css/"+e+"."+{7:"165938c4",25:"867de7f7",406:"2da2879a"}[e]+".chunk.css",s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="yatrik-erp-frontend:";s.l=(r,a,n,i)=>{if(e[r])e[r].push(a);else{var o,l;if(void 0!==n)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+n){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",t+n),o.src=r),e[r]=[a];var h=(t,s)=>{o.onerror=o.onload=null,clearTimeout(m);var a=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach(e=>e(s)),t)return t(s)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),s.p="/",(()=>{if("undefined"!==typeof document){var e=e=>new Promise((t,r)=>{var a=s.miniCssF(e),n=s.p+a;if(((e,t)=>{for(var s=document.getElementsByTagName("link"),r=0;r<s.length;r++){var a=(i=s[r]).getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(a===e||a===t))return i}var n=document.getElementsByTagName("style");for(r=0;r<n.length;r++){var i;if((a=(i=n[r]).getAttribute("data-href"))===e||a===t)return i}})(a,n))return t();((e,t,r,a,n)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",s.nc&&(i.nonce=s.nc),i.onerror=i.onload=s=>{if(i.onerror=i.onload=null,"load"===s.type)a();else{var r=s&&s.type,o=s&&s.target&&s.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+r+": "+o+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=o,i.parentNode&&i.parentNode.removeChild(i),n(l)}},i.href=t,r?r.parentNode.insertBefore(i,r.nextSibling):document.head.appendChild(i)})(e,n,null,t,r)}),t={792:0};s.f.miniCss=(s,r)=>{t[s]?r.push(t[s]):0!==t[s]&&{7:1,25:1,406:1}[s]&&r.push(t[s]=e(s).then(()=>{t[s]=0},e=>{throw delete t[s],e}))}}})(),(()=>{var e={792:0};s.f.j=(t,r)=>{var a=s.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else if(406!=t){var n=new Promise((s,r)=>a=e[t]=[s,r]);r.push(a[2]=n);var i=s.p+s.u(t),o=new Error;s.l(i,r=>{if(s.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var n=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",o.name="ChunkLoadError",o.type=n,o.request=i,a[1](o)}},"chunk-"+t,t)}else e[t]=0};var t=(t,r)=>{var a,n,i=r[0],o=r[1],l=r[2],c=0;if(i.some(t=>0!==e[t])){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);if(l)l(s)}for(t&&t(r);c<i.length;c++)n=i[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0},r=self.webpackChunkyatrik_erp_frontend=self.webpackChunkyatrik_erp_frontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};s.r(e),s.d(e,{scaleBand:()=>Eg,scaleDiverging:()=>Sj,scaleDivergingLog:()=>Cj,scaleDivergingPow:()=>Tj,scaleDivergingSqrt:()=>Pj,scaleDivergingSymlog:()=>_j,scaleIdentity:()=>vy,scaleImplicit:()=>Tg,scaleLinear:()=>by,scaleLog:()=>Ty,scaleOrdinal:()=>Pg,scalePoint:()=>Mg,scalePow:()=>Fy,scaleQuantile:()=>Jy,scaleQuantize:()=>Qy,scaleRadial:()=>Uy,scaleSequential:()=>bj,scaleSequentialLog:()=>vj,scaleSequentialPow:()=>Nj,scaleSequentialQuantile:()=>kj,scaleSequentialSqrt:()=>wj,scaleSequentialSymlog:()=>jj,scaleSqrt:()=>By,scaleSymlog:()=>My,scaleThreshold:()=>Xy,scaleTime:()=>xj,scaleUtc:()=>gj,tickFormat:()=>fy});var t,r=s(5043),a=s.t(r,2),n=s(4391),i=s(7950),o=s.t(i,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const c="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(qU){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function m(e,t,s,r){return void 0===s&&(s=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?x(t):t,{state:s,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:s="",hash:r=""}=e;return s&&"?"!==s&&(t+="?"===s.charAt(0)?s:"?"+s),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function x(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,s,r,a){void 0===a&&(a={});let{window:n=document.defaultView,v5Compat:i=!1}=a,o=n.history,u=t.Pop,x=null,g=f();function f(){return(o.state||{idx:null}).idx}function y(){u=t.Pop;let e=f(),s=null==e?null:e-g;g=e,x&&x({action:u,location:v.location,delta:s})}function b(e){let t="null"!==n.location.origin?n.location.origin:n.location.href,s="string"===typeof e?e:p(e);return s=s.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+s),new URL(s,t)}null==g&&(g=0,o.replaceState(l({},o.state,{idx:g}),""));let v={get action(){return u},get location(){return e(n,o)},listen(e){if(x)throw new Error("A history only accepts one active listener");return n.addEventListener(c,y),x=e,()=>{n.removeEventListener(c,y),x=null}},createHref:e=>s(n,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,s){u=t.Push;let a=m(v.location,e,s);r&&r(a,e),g=f()+1;let l=h(a,g),c=v.createHref(a);try{o.pushState(l,"",c)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;n.location.assign(c)}i&&x&&x({action:u,location:v.location,delta:1})},replace:function(e,s){u=t.Replace;let a=m(v.location,e,s);r&&r(a,e),g=f();let n=h(a,g),l=v.createHref(a);o.replaceState(n,"",l),i&&x&&x({action:u,location:v.location,delta:0})},go:e=>o.go(e)};return v}var f;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(f||(f={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,s){return void 0===s&&(s="/"),b(e,t,s,!1)}function b(e,t,s,r){let a=M(("string"===typeof t?x(t):t).pathname||"/",s);if(null==a)return null;let n=v(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let s=e.length===t.length&&e.slice(0,-1).every((e,s)=>e===t[s]);return s?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(n);let i=null;for(let o=0;null==i&&o<n.length;++o){let e=D(a);i=P(n[o],e,r)}return i}function v(e,t,s,r){void 0===t&&(t=[]),void 0===s&&(s=[]),void 0===r&&(r="");let a=(e,a,n)=>{let i={relativePath:void 0===n?e.path||"":n,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(d(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let o=F([r,i.relativePath]),l=s.concat(i);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),v(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:T(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var s;if(""!==e.path&&null!=(s=e.path)&&s.includes("?"))for(let r of j(e.path))a(e,t,r);else a(e,t)}),t}function j(e){let t=e.split("/");if(0===t.length)return[];let[s,...r]=t,a=s.endsWith("?"),n=s.replace(/\?$/,"");if(0===r.length)return a?[n,""]:[n];let i=j(r.join("/")),o=[];return o.push(...i.map(e=>""===e?n:[n,e].join("/"))),a&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const N=/^:[\w-]+$/,w=3,k=2,A=1,S=10,C=-2,_=e=>"*"===e;function T(e,t){let s=e.split("/"),r=s.length;return s.some(_)&&(r+=C),t&&(r+=k),s.filter(e=>!_(e)).reduce((e,t)=>e+(N.test(t)?w:""===t?A:S),r)}function P(e,t,s){void 0===s&&(s=!1);let{routesMeta:r}=e,a={},n="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===n?t:t.slice(n.length)||"/",d=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&s&&!r[r.length-1].route.index&&(d=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(a,d.params),i.push({params:a,pathname:F([n,d.pathname]),pathnameBase:B(F([n,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(n=F([n,d.pathnameBase]))}return i}function E(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[s,r]=function(e,t,s){void 0===t&&(t=!1);void 0===s&&(s=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,s)=>(r.push({paramName:t,isOptional:null!=s}),s?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let n=new RegExp(a,t?void 0:"i");return[n,r]}(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let n=a[0],i=n.replace(/(.)\/+$/,"$1"),o=a.slice(1),l=r.reduce((e,t,s)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=o[s]||"";i=n.slice(0,n.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[s];return e[r]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:n,pathnameBase:i,pattern:e}}function D(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,r=e.charAt(s);return r&&"/"!==r?null:e.slice(s)||"/"}function O(e,t,s,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+s+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function R(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function I(e,t){let s=R(e);return t?s.map((e,t)=>t===s.length-1?e.pathname:e.pathnameBase):s.map(e=>e.pathnameBase)}function L(e,t,s,r){let a;void 0===r&&(r=!1),"string"===typeof e?a=x(e):(a=l({},e),d(!a.pathname||!a.pathname.includes("?"),O("?","pathname","search",a)),d(!a.pathname||!a.pathname.includes("#"),O("#","pathname","hash",a)),d(!a.search||!a.search.includes("#"),O("#","search","hash",a)));let n,i=""===e||""===a.pathname,o=i?"/":a.pathname;if(null==o)n=s;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}n=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:s,search:r="",hash:a=""}="string"===typeof e?x(e):e,n=s?s.startsWith("/")?s:function(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?s.length>1&&s.pop():"."!==e&&s.push(e)}),s.length>1?s.join("/"):"/"}(s,t):t;return{pathname:n,search:z(r),hash:U(a)}}(a,n),u=o&&"/"!==o&&o.endsWith("/"),h=(i||"."===o)&&s.endsWith("/");return c.pathname.endsWith("/")||!u&&!h||(c.pathname+="/"),c}const F=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const K=["post","put","patch","delete"],W=(new Set(K),["get",...K]);new Set(W),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},H.apply(this,arguments)}const q=r.createContext(null);const G=r.createContext(null);const Y=r.createContext(null);const $=r.createContext(null);const J=r.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=r.createContext(null);function X(){return null!=r.useContext($)}function Z(){return X()||d(!1),r.useContext($).location}function ee(e){r.useContext(Y).static||r.useLayoutEffect(e)}function te(){let{isDataRoute:e}=r.useContext(J);return e?function(){let{router:e}=he(de.UseNavigateStable),t=pe(ue.UseNavigateStable),s=r.useRef(!1);ee(()=>{s.current=!0});let a=r.useCallback(function(r,a){void 0===a&&(a={}),s.current&&("number"===typeof r?e.navigate(r):e.navigate(r,H({fromRouteId:t},a)))},[e,t]);return a}():function(){X()||d(!1);let e=r.useContext(q),{basename:t,future:s,navigator:a}=r.useContext(Y),{matches:n}=r.useContext(J),{pathname:i}=Z(),o=JSON.stringify(I(n,s.v7_relativeSplatPath)),l=r.useRef(!1);ee(()=>{l.current=!0});let c=r.useCallback(function(s,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof s)return void a.go(s);let n=L(s,JSON.parse(o),i,"path"===r.relative);null==e&&"/"!==t&&(n.pathname="/"===n.pathname?t:F([t,n.pathname])),(r.replace?a.replace:a.push)(n,r.state,r)},[t,a,o,i,e]);return c}()}function se(){let{matches:e}=r.useContext(J),t=e[e.length-1];return t?t.params:{}}function re(e,t){let{relative:s}=void 0===t?{}:t,{future:a}=r.useContext(Y),{matches:n}=r.useContext(J),{pathname:i}=Z(),o=JSON.stringify(I(n,a.v7_relativeSplatPath));return r.useMemo(()=>L(e,JSON.parse(o),i,"path"===s),[e,o,i,s])}function ae(e,s,a,n){X()||d(!1);let{navigator:i}=r.useContext(Y),{matches:o}=r.useContext(J),l=o[o.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,m=Z();if(s){var p;let e="string"===typeof s?x(s):s;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||d(!1),h=e}else h=m;let g=h.pathname||"/",f=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");f="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=y(e,{pathname:f});let v=ce(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:F([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:F([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,a,n);return s&&v?r.createElement($.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:t.Pop}},v):v}function ne(){let e=function(){var e;let t=r.useContext(Q),s=me(ue.UseRouteError),a=pe(ue.UseRouteError);if(void 0!==t)return t;return null==(e=s.errors)?void 0:e[a]}(),t=V(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:a};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),s?r.createElement("pre",{style:n},s):null,null)}const ie=r.createElement(ne,null);class oe extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(J.Provider,{value:this.props.routeContext},r.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:t,match:s,children:a}=e,n=r.useContext(q);return n&&n.static&&n.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=s.route.id),r.createElement(J.Provider,{value:t},a)}function ce(e,t,s,a){var n;if(void 0===t&&(t=[]),void 0===s&&(s=null),void 0===a&&(a=null),null==e){var i;if(!s)return null;if(s.errors)e=s.matches;else{if(!(null!=(i=a)&&i.v7_partialHydration&&0===t.length&&!s.initialized&&s.matches.length>0))return null;e=s.matches}}let o=e,l=null==(n=s)?void 0:n.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||d(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,u=-1;if(s&&a&&a.v7_partialHydration)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=r),e.route.id){let{loaderData:t,errors:r}=s,a=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){c=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight((e,a,n)=>{let i,d=!1,h=null,m=null;var p;s&&(i=l&&a.route.id?l[a.route.id]:void 0,h=a.route.errorElement||ie,c&&(u<0&&0===n?(p="route-fallback",!1||xe[p]||(xe[p]=!0),d=!0,m=null):u===n&&(d=!0,m=a.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,n+1)),g=()=>{let t;return t=i?h:d?m:a.route.Component?r.createElement(a.route.Component,null):a.route.element?a.route.element:e,r.createElement(le,{match:a,routeContext:{outlet:e,matches:x,isDataRoute:null!=s},children:t})};return s&&(a.route.ErrorBoundary||a.route.errorElement||0===n)?r.createElement(oe,{location:s.location,revalidation:s.revalidation,component:h,error:i,children:g(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):g()},null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function he(e){let t=r.useContext(q);return t||d(!1),t}function me(e){let t=r.useContext(G);return t||d(!1),t}function pe(e){let t=function(){let e=r.useContext(J);return e||d(!1),e}(),s=t.matches[t.matches.length-1];return s.route.id||d(!1),s.route.id}const xe={};function ge(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}a.startTransition;function fe(e){let{to:t,replace:s,state:a,relative:n}=e;X()||d(!1);let{future:i,static:o}=r.useContext(Y),{matches:l}=r.useContext(J),{pathname:c}=Z(),u=te(),h=L(t,I(l,i.v7_relativeSplatPath),c,"path"===n),m=JSON.stringify(h);return r.useEffect(()=>u(JSON.parse(m),{replace:s,state:a,relative:n}),[u,m,n,s,a]),null}function ye(e){d(!1)}function be(e){let{basename:s="/",children:a=null,location:n,navigationType:i=t.Pop,navigator:o,static:l=!1,future:c}=e;X()&&d(!1);let u=s.replace(/^\/*/,"/"),h=r.useMemo(()=>({basename:u,navigator:o,static:l,future:H({v7_relativeSplatPath:!1},c)}),[u,c,o,l]);"string"===typeof n&&(n=x(n));let{pathname:m="/",search:p="",hash:g="",state:f=null,key:y="default"}=n,b=r.useMemo(()=>{let e=M(m,u);return null==e?null:{location:{pathname:e,search:p,hash:g,state:f,key:y},navigationType:i}},[u,m,p,g,f,y,i]);return null==b?null:r.createElement(Y.Provider,{value:h},r.createElement($.Provider,{children:a,value:b}))}function ve(e){let{children:t,location:s}=e;return ae(je(t),s)}new Promise(()=>{});r.Component;function je(e,t){void 0===t&&(t=[]);let s=[];return r.Children.forEach(e,(e,a)=>{if(!r.isValidElement(e))return;let n=[...t,a];if(e.type===r.Fragment)return void s.push.apply(s,je(e.props.children,n));e.type!==ye&&d(!1),e.props.index&&e.props.children&&d(!1);let i={id:e.props.id||n.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=je(e.props.children,n)),s.push(i)}),s}function Ne(){return Ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Ne.apply(this,arguments)}function we(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}function ke(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let r=e[s];return t.concat(Array.isArray(r)?r.map(e=>[s,e]):[[s,r]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ae=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(qU){}new Map;const Se=a.startTransition;o.flushSync,a.useId;function Ce(e){let{basename:t,children:s,future:a,window:n}=e,i=r.useRef();var o;null==i.current&&(i.current=(void 0===(o={window:n,v5Compat:!0})&&(o={}),g(function(e,t){let{pathname:s,search:r,hash:a}=e.location;return m("",{pathname:s,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:p(t)},null,o)));let l=i.current,[c,d]=r.useState({action:l.action,location:l.location}),{v7_startTransition:u}=a||{},h=r.useCallback(e=>{u&&Se?Se(()=>d(e)):d(e)},[d,u]);return r.useLayoutEffect(()=>l.listen(h),[l,h]),r.useEffect(()=>ge(a),[a]),r.createElement(be,{basename:t,children:s,location:c.location,navigationType:c.action,navigator:l,future:a})}const _e="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Te=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pe=r.forwardRef(function(e,t){let s,{onClick:a,relative:n,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:m}=e,x=we(e,Ae),{basename:g}=r.useContext(Y),f=!1;if("string"===typeof u&&Te.test(u)&&(s=u,_e))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),s=M(t.pathname,g);t.origin===e.origin&&null!=s?u=s+t.search+t.hash:f=!0}catch(qU){}let y=function(e,t){let{relative:s}=void 0===t?{}:t;X()||d(!1);let{basename:a,navigator:n}=r.useContext(Y),{hash:i,pathname:o,search:l}=re(e,{relative:s}),c=o;return"/"!==a&&(c="/"===o?a:F([a,o])),n.createHref({pathname:c,search:l,hash:i})}(u,{relative:n}),b=function(e,t){let{target:s,replace:a,state:n,preventScrollReset:i,relative:o,viewTransition:l}=void 0===t?{}:t,c=te(),d=Z(),u=re(e,{relative:o});return r.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,s)){t.preventDefault();let s=void 0!==a?a:p(d)===p(u);c(e,{replace:s,state:n,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,a,n,s,e,i,o,l])}(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:n,viewTransition:m});return r.createElement("a",Ne({},x,{href:s||y,onClick:f||i?a:function(e){a&&a(e),e.defaultPrevented||b(e)},ref:t,target:c}))});var Ee,De;function Me(e){let t=r.useRef(ke(e)),s=r.useRef(!1),a=Z(),n=r.useMemo(()=>function(e,t){let s=ke(e);return t&&t.forEach((e,r)=>{s.has(r)||t.getAll(r).forEach(e=>{s.append(r,e)})}),s}(a.search,s.current?null:t.current),[a.search]),i=te(),o=r.useCallback((e,t)=>{const r=ke("function"===typeof e?e(n):e);s.current=!0,i("?"+r,t)},[i,n]);return[n,o]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ee||(Ee={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(De||(De={}));var Oe=s(3768),Re=s(8729),Ie=s(9379);function Le(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Fe(e,t,s){Le(e,t),t.set(e,s)}function Be(e,t,s){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:s;throw new TypeError("Private element is not present on this object")}function ze(e,t){return e.get(Be(e,t))}function Ue(e,t,s){return e.set(Be(e,t),s),s}var Ve="undefined"===typeof window||"Deno"in window;function Ke(){}function We(e){return"number"===typeof e&&e>=0&&e!==1/0}function He(e,t){return Math.max(e+(t||0)-Date.now(),0)}function qe(e,t){const{type:s="all",exact:r,fetchStatus:a,predicate:n,queryKey:i,stale:o}=e;if(i)if(r){if(t.queryHash!==Ye(i,t.options))return!1}else if(!Je(t.queryKey,i))return!1;if("all"!==s){const e=t.isActive();if("active"===s&&!e)return!1;if("inactive"===s&&e)return!1}return("boolean"!==typeof o||t.isStale()===o)&&(("undefined"===typeof a||a===t.state.fetchStatus)&&!(n&&!n(t)))}function Ge(e,t){const{exact:s,status:r,predicate:a,mutationKey:n}=e;if(n){if(!t.options.mutationKey)return!1;if(s){if($e(t.options.mutationKey)!==$e(n))return!1}else if(!Je(t.options.mutationKey,n))return!1}return(!r||t.state.status===r)&&!(a&&!a(t))}function Ye(e,t){return((null===t||void 0===t?void 0:t.queryKeyHashFn)||$e)(e)}function $e(e){return JSON.stringify(e,(e,t)=>et(t)?Object.keys(t).sort().reduce((e,s)=>(e[s]=t[s],e),{}):t)}function Je(e,t){return e===t||typeof e===typeof t&&(!(!e||!t||"object"!==typeof e||"object"!==typeof t)&&!Object.keys(t).some(s=>!Je(e[s],t[s])))}function Qe(e,t){if(e===t)return e;const s=Ze(e)&&Ze(t);if(s||et(e)&&et(t)){const r=s?e.length:Object.keys(e).length,a=s?t:Object.keys(t),n=a.length,i=s?[]:{};let o=0;for(let l=0;l<n;l++){const r=s?l:a[l];i[r]=Qe(e[r],t[r]),i[r]===e[r]&&o++}return r===n&&o===r?e:i}return t}function Xe(e,t){if(e&&!t||t&&!e)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function Ze(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function et(e){if(!tt(e))return!1;const t=e.constructor;if("undefined"===typeof t)return!0;const s=t.prototype;return!!tt(s)&&!!s.hasOwnProperty("isPrototypeOf")}function tt(e){return"[object Object]"===Object.prototype.toString.call(e)}function st(e,t,s){return"function"===typeof s.structuralSharing?s.structuralSharing(e,t):!1!==s.structuralSharing?Qe(e,t):t}function rt(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=[...e,t];return s&&r.length>s?r.slice(1):r}function at(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=[t,...e];return s&&r.length>s?r.slice(0,-1):r}function nt(e,t){Le(e,t),t.add(e)}var it,ot,lt,ct,dt,ut,ht=function(){let e=[],t=0,s=e=>{e()},r=e=>{e()},a=e=>setTimeout(e,0);const n=r=>{t?e.push(r):a(()=>{s(r)})},i=()=>{const t=e;e=[],t.length&&a(()=>{r(()=>{t.forEach(e=>{s(e)})})})};return{batch:e=>{let s;t++;try{s=e()}finally{t--,t||i()}return s},batchCalls:e=>function(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];n(()=>{e(...s)})},schedule:n,setNotifyFunction:e=>{s=e},setBatchNotifyFunction:e=>{r=e},setScheduler:e=>{a=e}}}(),mt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},pt=new(it=new WeakMap,ot=new WeakMap,lt=new WeakMap,class extends mt{constructor(){super(),Fe(this,it,void 0),Fe(this,ot,void 0),Fe(this,lt,void 0),Ue(lt,this,e=>{if(!Ve&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){ze(ot,this)||this.setEventListener(ze(lt,this))}onUnsubscribe(){var e;this.hasListeners()||(null===(e=ze(ot,this))||void 0===e||e.call(this),Ue(ot,this,void 0))}setEventListener(e){var t;Ue(lt,this,e),null===(t=ze(ot,this))||void 0===t||t.call(this),Ue(ot,this,e(e=>{"boolean"===typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){ze(it,this)!==e&&(Ue(it,this,e),this.onFocus())}onFocus(){this.listeners.forEach(e=>{e()})}isFocused(){var e;return"boolean"===typeof ze(it,this)?ze(it,this):"hidden"!==(null===(e=globalThis.document)||void 0===e?void 0:e.visibilityState)}}),xt=new(ct=new WeakMap,dt=new WeakMap,ut=new WeakMap,class extends mt{constructor(){super(),Fe(this,ct,!0),Fe(this,dt,void 0),Fe(this,ut,void 0),Ue(ut,this,e=>{if(!Ve&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){ze(dt,this)||this.setEventListener(ze(ut,this))}onUnsubscribe(){var e;this.hasListeners()||(null===(e=ze(dt,this))||void 0===e||e.call(this),Ue(dt,this,void 0))}setEventListener(e){var t;Ue(ut,this,e),null===(t=ze(dt,this))||void 0===t||t.call(this),Ue(dt,this,e(this.setOnline.bind(this)))}setOnline(e){ze(ct,this)!==e&&(Ue(ct,this,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return ze(ct,this)}});function gt(e){return Math.min(1e3*2**e,3e4)}function ft(e){return"online"!==(null!==e&&void 0!==e?e:"online")||xt.isOnline()}var yt,bt=class{constructor(e){this.revert=null===e||void 0===e?void 0:e.revert,this.silent=null===e||void 0===e?void 0:e.silent}};function vt(e){return e instanceof bt}function jt(e){let t,s,r,a=!1,n=0,i=!1;const o=new Promise((e,t)=>{s=e,r=t}),l=()=>!pt.isFocused()||"always"!==e.networkMode&&!xt.isOnline(),c=r=>{var a,n;i||(i=!0,null===(a=e.onSuccess)||void 0===a||a.call(e,r),null===(n=t)||void 0===n||n(),s(r))},d=s=>{var a,n;i||(i=!0,null===(a=e.onError)||void 0===a||a.call(e,s),null===(n=t)||void 0===n||n(),r(s))},u=()=>new Promise(s=>{var r;t=e=>{const t=i||!l();return t&&s(e),t},null===(r=e.onPause)||void 0===r||r.call(e)}).then(()=>{var s;(t=void 0,i)||(null===(s=e.onContinue)||void 0===s||s.call(e))}),h=()=>{if(i)return;let t;try{t=e.fn()}catch(s){t=Promise.reject(s)}Promise.resolve(t).then(c).catch(t=>{var s,r,o;if(i)return;const c=null!==(s=e.retry)&&void 0!==s?s:Ve?0:3,m=null!==(r=e.retryDelay)&&void 0!==r?r:gt,p="function"===typeof m?m(n,t):m,x=!0===c||"number"===typeof c&&n<c||"function"===typeof c&&c(n,t);var g;!a&&x?(n++,null===(o=e.onFail)||void 0===o||o.call(e,n,t),(g=p,new Promise(e=>{setTimeout(e,g)})).then(()=>{if(l())return u()}).then(()=>{a?d(t):h()})):d(t)})};return ft(e.networkMode)?h():u().then(h),{promise:o,cancel:t=>{var s;i||(d(new bt(t)),null===(s=e.abort)||void 0===s||s.call(e))},continue:()=>{var e;return(null===(e=t)||void 0===e?void 0:e())?o:Promise.resolve()},cancelRetry:()=>{a=!0},continueRetry:()=>{a=!1}}}var Nt,wt,kt,At,St,Ct,_t,Tt,Pt,Et,Dt=(yt=new WeakMap,class{constructor(){Fe(this,yt,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),We(this.gcTime)&&Ue(yt,this,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,null!==e&&void 0!==e?e:Ve?1/0:3e5)}clearGcTimeout(){ze(yt,this)&&(clearTimeout(ze(yt,this)),Ue(yt,this,void 0))}}),Mt=(Nt=new WeakMap,wt=new WeakMap,kt=new WeakMap,At=new WeakMap,St=new WeakMap,Ct=new WeakMap,_t=new WeakMap,Tt=new WeakMap,Pt=new WeakSet,class extends Dt{constructor(e){super(),nt(this,Pt),Fe(this,Nt,void 0),Fe(this,wt,void 0),Fe(this,kt,void 0),Fe(this,At,void 0),Fe(this,St,void 0),Fe(this,Ct,void 0),Fe(this,_t,void 0),Fe(this,Tt,void 0),Ue(Tt,this,!1),Ue(_t,this,e.defaultOptions),Be(Pt,this,Ot).call(this,e.options),Ue(Ct,this,[]),Ue(kt,this,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ue(Nt,this,e.state||function(e){const t="function"===typeof e.initialData?e.initialData():e.initialData,s="undefined"!==typeof t,r=s?"function"===typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?null!==r&&void 0!==r?r:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}(this.options)),this.state=ze(Nt,this),this.scheduleGc()}get meta(){return this.options.meta}optionalRemove(){ze(Ct,this).length||"idle"!==this.state.fetchStatus||ze(kt,this).remove(this)}setData(e,t){const s=st(this.state.data,e,this.options);return Be(Pt,this,Rt).call(this,{data:s,type:"success",dataUpdatedAt:null===t||void 0===t?void 0:t.updatedAt,manual:null===t||void 0===t?void 0:t.manual}),s}setState(e,t){Be(Pt,this,Rt).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t;const s=ze(At,this);return null===(t=ze(St,this))||void 0===t||t.cancel(e),s?s.then(Ke).catch(Ke):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ze(Nt,this))}isActive(){return ze(Ct,this).some(e=>!1!==e.options.enabled)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||ze(Ct,this).some(e=>e.getCurrentResult().isStale)}isStaleByTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.state.isInvalidated||!this.state.dataUpdatedAt||!He(this.state.dataUpdatedAt,e)}onFocus(){var e;const t=ze(Ct,this).find(e=>e.shouldFetchOnWindowFocus());null===t||void 0===t||t.refetch({cancelRefetch:!1}),null===(e=ze(St,this))||void 0===e||e.continue()}onOnline(){var e;const t=ze(Ct,this).find(e=>e.shouldFetchOnReconnect());null===t||void 0===t||t.refetch({cancelRefetch:!1}),null===(e=ze(St,this))||void 0===e||e.continue()}addObserver(e){ze(Ct,this).includes(e)||(ze(Ct,this).push(e),this.clearGcTimeout(),ze(kt,this).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){ze(Ct,this).includes(e)&&(Ue(Ct,this,ze(Ct,this).filter(t=>t!==e)),ze(Ct,this).length||(ze(St,this)&&(ze(Tt,this)?ze(St,this).cancel({revert:!0}):ze(St,this).cancelRetry()),this.scheduleGc()),ze(kt,this).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return ze(Ct,this).length}invalidate(){this.state.isInvalidated||Be(Pt,this,Rt).call(this,{type:"invalidate"})}fetch(e,t){var s,r;if("idle"!==this.state.fetchStatus)if(this.state.dataUpdatedAt&&null!==t&&void 0!==t&&t.cancelRefetch)this.cancel({silent:!0});else if(ze(At,this)){var a;return null===(a=ze(St,this))||void 0===a||a.continueRetry(),ze(At,this)}if(e&&Be(Pt,this,Ot).call(this,e),!this.options.queryFn){const e=ze(Ct,this).find(e=>e.options.queryFn);e&&Be(Pt,this,Ot).call(this,e.options)}const n=new AbortController,i={queryKey:this.queryKey,meta:this.meta},o=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(Ue(Tt,this,!0),n.signal)})};o(i);const l={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>this.options.queryFn?(Ue(Tt,this,!1),this.options.persister?this.options.persister(this.options.queryFn,i,this):this.options.queryFn(i)):Promise.reject(new Error("Missing queryFn: '".concat(this.options.queryHash,"'")))};var c;(o(l),null===(s=this.options.behavior)||void 0===s||s.onFetch(l,this),Ue(wt,this,this.state),"idle"===this.state.fetchStatus||this.state.fetchMeta!==(null===(r=l.fetchOptions)||void 0===r?void 0:r.meta))&&Be(Pt,this,Rt).call(this,{type:"fetch",meta:null===(c=l.fetchOptions)||void 0===c?void 0:c.meta});const d=e=>{var t,s,r,a;(vt(e)&&e.silent||Be(Pt,this,Rt).call(this,{type:"error",error:e}),vt(e))||(null===(t=(s=ze(kt,this).config).onError)||void 0===t||t.call(s,e,this),null===(r=(a=ze(kt,this).config).onSettled)||void 0===r||r.call(a,this.state.data,e,this));this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return Ue(St,this,jt({fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:e=>{var t,s,r,a;"undefined"!==typeof e?(this.setData(e),null===(t=(s=ze(kt,this).config).onSuccess)||void 0===t||t.call(s,e,this),null===(r=(a=ze(kt,this).config).onSettled)||void 0===r||r.call(a,e,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1):d(new Error("".concat(this.queryHash," data is undefined")))},onError:d,onFail:(e,t)=>{Be(Pt,this,Rt).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{Be(Pt,this,Rt).call(this,{type:"pause"})},onContinue:()=>{Be(Pt,this,Rt).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode})),Ue(At,this,ze(St,this).promise),ze(At,this)}});function Ot(e){this.options=(0,Ie.A)((0,Ie.A)({},ze(_t,this)),e),this.updateGcTime(this.options.gcTime)}function Rt(e){this.state=(t=>{var s,r;switch(e.type){case"failed":return(0,Ie.A)((0,Ie.A)({},t),{},{fetchFailureCount:e.failureCount,fetchFailureReason:e.error});case"pause":return(0,Ie.A)((0,Ie.A)({},t),{},{fetchStatus:"paused"});case"continue":return(0,Ie.A)((0,Ie.A)({},t),{},{fetchStatus:"fetching"});case"fetch":return(0,Ie.A)((0,Ie.A)({},t),{},{fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null!==(s=e.meta)&&void 0!==s?s:null,fetchStatus:ft(this.options.networkMode)?"fetching":"paused"},!t.dataUpdatedAt&&{error:null,status:"pending"});case"success":return(0,Ie.A)((0,Ie.A)({},t),{},{data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:null!==(r=e.dataUpdatedAt)&&void 0!==r?r:Date.now(),error:null,isInvalidated:!1,status:"success"},!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null});case"error":const a=e.error;return vt(a)&&a.revert&&ze(wt,this)?(0,Ie.A)((0,Ie.A)({},ze(wt,this)),{},{fetchStatus:"idle"}):(0,Ie.A)((0,Ie.A)({},t),{},{error:a,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"});case"invalidate":return(0,Ie.A)((0,Ie.A)({},t),{},{isInvalidated:!0});case"setState":return(0,Ie.A)((0,Ie.A)({},t),e.state)}})(this.state),ht.batch(()=>{ze(Ct,this).forEach(e=>{e.onQueryUpdate()}),ze(kt,this).notify({query:this,type:"updated",action:e})})}var It,Lt,Ft,Bt,zt,Ut,Vt,Kt,Wt=(Et=new WeakMap,class extends mt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Fe(this,Et,void 0),this.config=e,Ue(Et,this,new Map)}build(e,t,s){var r;const a=t.queryKey,n=null!==(r=t.queryHash)&&void 0!==r?r:Ye(a,t);let i=this.get(n);return i||(i=new Mt({cache:this,queryKey:a,queryHash:n,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(a)}),this.add(i)),i}add(e){ze(Et,this).has(e.queryHash)||(ze(Et,this).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=ze(Et,this).get(e.queryHash);t&&(e.destroy(),t===e&&ze(Et,this).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ht.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ze(Et,this).get(e)}getAll(){return[...ze(Et,this).values()]}find(e){const t=(0,Ie.A)({exact:!0},e);return this.getAll().find(e=>qe(t,e))}findAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>qe(e,t)):t}notify(e){ht.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ht.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ht.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}}),Ht=(It=new WeakMap,Lt=new WeakMap,Ft=new WeakMap,Bt=new WeakMap,zt=new WeakSet,class extends Dt{constructor(e){super(),nt(this,zt),Fe(this,It,void 0),Fe(this,Lt,void 0),Fe(this,Ft,void 0),Fe(this,Bt,void 0),this.mutationId=e.mutationId,Ue(Lt,this,e.defaultOptions),Ue(Ft,this,e.mutationCache),Ue(It,this,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=(0,Ie.A)((0,Ie.A)({},ze(Lt,this)),e),this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ze(It,this).includes(e)||(ze(It,this).push(e),this.clearGcTimeout(),ze(Ft,this).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ue(It,this,ze(It,this).filter(t=>t!==e)),this.scheduleGc(),ze(Ft,this).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ze(It,this).length||("pending"===this.state.status?this.scheduleGc():ze(Ft,this).remove(this))}continue(){var e,t;return null!==(e=null===(t=ze(Bt,this))||void 0===t?void 0:t.continue())&&void 0!==e?e:this.execute(this.state.variables)}async execute(e){const t=()=>{var t;return Ue(Bt,this,jt({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{Be(zt,this,qt).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{Be(zt,this,qt).call(this,{type:"pause"})},onContinue:()=>{Be(zt,this,qt).call(this,{type:"continue"})},retry:null!==(t=this.options.retry)&&void 0!==t?t:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode})),ze(Bt,this).promise},s="pending"===this.state.status;try{var r,a,n,i,o,l,c,d;if(!s){var u,h,m,p;Be(zt,this,qt).call(this,{type:"pending",variables:e}),await(null===(u=(h=ze(Ft,this).config).onMutate)||void 0===u?void 0:u.call(h,e,this));const t=await(null===(m=(p=this.options).onMutate)||void 0===m?void 0:m.call(p,e));t!==this.state.context&&Be(zt,this,qt).call(this,{type:"pending",context:t,variables:e})}const x=await t();return await(null===(r=(a=ze(Ft,this).config).onSuccess)||void 0===r?void 0:r.call(a,x,e,this.state.context,this)),await(null===(n=(i=this.options).onSuccess)||void 0===n?void 0:n.call(i,x,e,this.state.context)),await(null===(o=(l=ze(Ft,this).config).onSettled)||void 0===o?void 0:o.call(l,x,null,this.state.variables,this.state.context,this)),await(null===(c=(d=this.options).onSettled)||void 0===c?void 0:c.call(d,x,null,e,this.state.context)),Be(zt,this,qt).call(this,{type:"success",data:x}),x}catch(w){try{var x,g,f,y,b,v,j,N;throw await(null===(x=(g=ze(Ft,this).config).onError)||void 0===x?void 0:x.call(g,w,e,this.state.context,this)),await(null===(f=(y=this.options).onError)||void 0===f?void 0:f.call(y,w,e,this.state.context)),await(null===(b=(v=ze(Ft,this).config).onSettled)||void 0===b?void 0:b.call(v,void 0,w,this.state.variables,this.state.context,this)),await(null===(j=(N=this.options).onSettled)||void 0===j?void 0:j.call(N,void 0,w,e,this.state.context)),w}finally{Be(zt,this,qt).call(this,{type:"error",error:w})}}}});function qt(e){this.state=(t=>{switch(e.type){case"failed":return(0,Ie.A)((0,Ie.A)({},t),{},{failureCount:e.failureCount,failureReason:e.error});case"pause":return(0,Ie.A)((0,Ie.A)({},t),{},{isPaused:!0});case"continue":return(0,Ie.A)((0,Ie.A)({},t),{},{isPaused:!1});case"pending":return(0,Ie.A)((0,Ie.A)({},t),{},{context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!ft(this.options.networkMode),status:"pending",variables:e.variables,submittedAt:Date.now()});case"success":return(0,Ie.A)((0,Ie.A)({},t),{},{data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return(0,Ie.A)((0,Ie.A)({},t),{},{data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"})}})(this.state),ht.batch(()=>{ze(It,this).forEach(t=>{t.onMutationUpdate(e)}),ze(Ft,this).notify({mutation:this,type:"updated",action:e})})}var Gt,Yt,$t,Jt,Qt,Xt,Zt,es,ts=(Ut=new WeakMap,Vt=new WeakMap,Kt=new WeakMap,class extends mt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Fe(this,Ut,void 0),Fe(this,Vt,void 0),Fe(this,Kt,void 0),this.config=e,Ue(Ut,this,[]),Ue(Vt,this,0)}build(e,t,s){var r;const a=new Ht({mutationCache:this,mutationId:Ue(Vt,this,(r=ze(Vt,this),++r)),options:e.defaultMutationOptions(t),state:s});return this.add(a),a}add(e){ze(Ut,this).push(e),this.notify({type:"added",mutation:e})}remove(e){Ue(Ut,this,ze(Ut,this).filter(t=>t!==e)),this.notify({type:"removed",mutation:e})}clear(){ht.batch(()=>{ze(Ut,this).forEach(e=>{this.remove(e)})})}getAll(){return ze(Ut,this)}find(e){const t=(0,Ie.A)({exact:!0},e);return ze(Ut,this).find(e=>Ge(t,e))}findAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ze(Ut,this).filter(t=>Ge(e,t))}notify(e){ht.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){var e;return Ue(Kt,this,(null!==(e=ze(Kt,this))&&void 0!==e?e:Promise.resolve()).then(()=>{const e=ze(Ut,this).filter(e=>e.state.isPaused);return ht.batch(()=>e.reduce((e,t)=>e.then(()=>t.continue().catch(Ke)),Promise.resolve()))}).then(()=>{Ue(Kt,this,void 0)})),ze(Kt,this)}});function ss(e){return{onFetch:(t,s)=>{const r=async()=>{var s,r,a;const n=t.options,i=null===(s=t.fetchOptions)||void 0===s||null===(s=s.meta)||void 0===s||null===(s=s.fetchMore)||void 0===s?void 0:s.direction,o=(null===(r=t.state.data)||void 0===r?void 0:r.pages)||[],l=(null===(a=t.state.data)||void 0===a?void 0:a.pageParams)||[],c={pages:[],pageParams:[]};let d=!1;const u=t.options.queryFn||(()=>Promise.reject(new Error("Missing queryFn: '".concat(t.options.queryHash,"'")))),h=async(e,s,r)=>{if(d)return Promise.reject();if(null==s&&e.pages.length)return Promise.resolve(e);const a={queryKey:t.queryKey,pageParam:s,direction:r?"backward":"forward",meta:t.options.meta};(e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(t.signal.aborted?d=!0:t.signal.addEventListener("abort",()=>{d=!0}),t.signal)})})(a);const n=await u(a),{maxPages:i}=t.options,o=r?at:rt;return{pages:o(e.pages,n,i),pageParams:o(e.pageParams,s,i)}};let m;if(i&&o.length){const e="backward"===i,t={pages:o,pageParams:l},s=(e?as:rs)(n,t);m=await h(t,s,e)}else{var p;m=await h(c,null!==(p=l[0])&&void 0!==p?p:n.initialPageParam);const t=null!==e&&void 0!==e?e:o.length;for(let e=1;e<t;e++){const e=rs(n,m);m=await h(m,e)}}return m};t.options.persister?t.fetchFn=()=>{var e,a;return null===(e=(a=t.options).persister)||void 0===e?void 0:e.call(a,r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=r}}}function rs(e,t){let{pages:s,pageParams:r}=t;const a=s.length-1;return e.getNextPageParam(s[a],s,r[a],r)}function as(e,t){var s;let{pages:r,pageParams:a}=t;return null===(s=e.getPreviousPageParam)||void 0===s?void 0:s.call(e,r[0],r,a[0],a)}var ns=(Gt=new WeakMap,Yt=new WeakMap,$t=new WeakMap,Jt=new WeakMap,Qt=new WeakMap,Xt=new WeakMap,Zt=new WeakMap,es=new WeakMap,class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Fe(this,Gt,void 0),Fe(this,Yt,void 0),Fe(this,$t,void 0),Fe(this,Jt,void 0),Fe(this,Qt,void 0),Fe(this,Xt,void 0),Fe(this,Zt,void 0),Fe(this,es,void 0),Ue(Gt,this,e.queryCache||new Wt),Ue(Yt,this,e.mutationCache||new ts),Ue($t,this,e.defaultOptions||{}),Ue(Jt,this,new Map),Ue(Qt,this,new Map),Ue(Xt,this,0)}mount(){var e;Ue(Xt,this,(e=ze(Xt,this),e++,e)),1===ze(Xt,this)&&(Ue(Zt,this,pt.subscribe(()=>{pt.isFocused()&&(this.resumePausedMutations(),ze(Gt,this).onFocus())})),Ue(es,this,xt.subscribe(()=>{xt.isOnline()&&(this.resumePausedMutations(),ze(Gt,this).onOnline())})))}unmount(){var e,t,s;Ue(Xt,this,(e=ze(Xt,this),e--,e)),0===ze(Xt,this)&&(null===(t=ze(Zt,this))||void 0===t||t.call(this),Ue(Zt,this,void 0),null===(s=ze(es,this))||void 0===s||s.call(this),Ue(es,this,void 0))}isFetching(e){return ze(Gt,this).findAll((0,Ie.A)((0,Ie.A)({},e),{},{fetchStatus:"fetching"})).length}isMutating(e){return ze(Yt,this).findAll((0,Ie.A)((0,Ie.A)({},e),{},{status:"pending"})).length}getQueryData(e){var t;return null===(t=ze(Gt,this).find({queryKey:e}))||void 0===t?void 0:t.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);return void 0!==t?Promise.resolve(t):this.fetchQuery(e)}getQueriesData(e){return this.getQueryCache().findAll(e).map(e=>{let{queryKey:t,state:s}=e;return[t,s.data]})}setQueryData(e,t,s){const r=ze(Gt,this).find({queryKey:e}),a=function(e,t){return"function"===typeof e?e(t):e}(t,null===r||void 0===r?void 0:r.state.data);if("undefined"===typeof a)return;const n=this.defaultQueryOptions({queryKey:e});return ze(Gt,this).build(this,n).setData(a,(0,Ie.A)((0,Ie.A)({},s),{},{manual:!0}))}setQueriesData(e,t,s){return ht.batch(()=>this.getQueryCache().findAll(e).map(e=>{let{queryKey:r}=e;return[r,this.setQueryData(r,t,s)]}))}getQueryState(e){var t;return null===(t=ze(Gt,this).find({queryKey:e}))||void 0===t?void 0:t.state}removeQueries(e){const t=ze(Gt,this);ht.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const s=ze(Gt,this),r=(0,Ie.A)({type:"active"},e);return ht.batch(()=>(s.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries(r,t)))}cancelQueries(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=(0,Ie.A)({revert:!0},t),r=ht.batch(()=>ze(Gt,this).findAll(e).map(e=>e.cancel(s)));return Promise.all(r).then(Ke).catch(Ke)}invalidateQueries(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ht.batch(()=>{var s,r;if(ze(Gt,this).findAll(e).forEach(e=>{e.invalidate()}),"none"===e.refetchType)return Promise.resolve();const a=(0,Ie.A)((0,Ie.A)({},e),{},{type:null!==(s=null!==(r=e.refetchType)&&void 0!==r?r:e.type)&&void 0!==s?s:"active"});return this.refetchQueries(a,t)})}refetchQueries(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const r=(0,Ie.A)((0,Ie.A)({},s),{},{cancelRefetch:null===(e=null===s||void 0===s?void 0:s.cancelRefetch)||void 0===e||e}),a=ht.batch(()=>ze(Gt,this).findAll(t).filter(e=>!e.isDisabled()).map(e=>{let t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(Ke)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(a).then(Ke)}fetchQuery(e){const t=this.defaultQueryOptions(e);"undefined"===typeof t.retry&&(t.retry=!1);const s=ze(Gt,this).build(this,t);return s.isStaleByTime(t.staleTime)?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ke).catch(Ke)}fetchInfiniteQuery(e){return e.behavior=ss(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ke).catch(Ke)}resumePausedMutations(){return ze(Yt,this).resumePausedMutations()}getQueryCache(){return ze(Gt,this)}getMutationCache(){return ze(Yt,this)}getDefaultOptions(){return ze($t,this)}setDefaultOptions(e){Ue($t,this,e)}setQueryDefaults(e,t){ze(Jt,this).set($e(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...ze(Jt,this).values()];let s={};return t.forEach(t=>{Je(e,t.queryKey)&&(s=(0,Ie.A)((0,Ie.A)({},s),t.defaultOptions))}),s}setMutationDefaults(e,t){ze(Qt,this).set($e(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...ze(Qt,this).values()];let s={};return t.forEach(t=>{Je(e,t.mutationKey)&&(s=(0,Ie.A)((0,Ie.A)({},s),t.defaultOptions))}),s}defaultQueryOptions(e){if(null!==e&&void 0!==e&&e._defaulted)return e;const t=(0,Ie.A)((0,Ie.A)((0,Ie.A)((0,Ie.A)({},ze($t,this).queries),(null===e||void 0===e?void 0:e.queryKey)&&this.getQueryDefaults(e.queryKey)),e),{},{_defaulted:!0});return t.queryHash||(t.queryHash=Ye(t.queryKey,t)),"undefined"===typeof t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),"undefined"===typeof t.throwOnError&&(t.throwOnError=!!t.suspense),"undefined"===typeof t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t}defaultMutationOptions(e){return null!==e&&void 0!==e&&e._defaulted?e:(0,Ie.A)((0,Ie.A)((0,Ie.A)((0,Ie.A)({},ze($t,this).mutations),(null===e||void 0===e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey)),e),{},{_defaulted:!0})}clear(){ze(Gt,this).clear(),ze(Yt,this).clear()}}),is=r.createContext(void 0),os=e=>{const t=r.useContext(is);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},ls=e=>{let{client:t,children:s}=e;return r.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),r.createElement(is.Provider,{value:t},s)},cs=s(579);const ds=new ns({defaultOptions:{queries:{staleTime:3e4,gcTime:3e5,retry:(e,t)=>!(t.status>=400&&t.status<500)&&e<3,retryDelay:e=>Math.min(1e3*2**e,3e4),refetchOnWindowFocus:!1,refetchOnMount:!0,refetchOnReconnect:!0},mutations:{retry:1,retryDelay:1e3}}}),us=e=>{let{children:t}=e;return(0,cs.jsxs)(ls,{client:ds,children:[t,!1]})};var hs=s(6325);const ms=e=>{let{size:t="md",color:s="blue",text:r="Loading...",fullScreen:a=!1,className:n=""}=e;const i=(0,cs.jsx)("div",{className:"animate-spin rounded-full border-2 border-gray-200 ".concat({sm:"h-6 w-6",md:"h-12 w-12",lg:"h-16 w-16",xl:"h-24 w-24"}[t]," ").concat({blue:"border-blue-600",green:"border-green-600",red:"border-red-600",purple:"border-purple-600",gray:"border-gray-600"}[s]," border-t-transparent ").concat(n)});return a?(0,cs.jsx)("div",{className:"fixed inset-0 bg-gray-50 bg-opacity-90 backdrop-blur-sm z-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[i,r&&(0,cs.jsx)("p",{className:"text-gray-600 mt-4 text-sm",children:r})]})}):(0,cs.jsx)("div",{className:"flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[i,r&&(0,cs.jsx)("p",{className:"text-gray-600 mt-2 text-sm",children:r})]})})};function ps(e){let{children:t,roles:s}=e;const{user:a,loading:n,isLoggingOut:i,isLoggingIn:o}=(0,Re.A)(),l=Z(),c=(0,r.useMemo)(()=>{if(n||i||o)return!0;if(!a)return!1;if(!s||0===s.length)return!0;const e=(a.role||"").toLowerCase().trim(),t=s.map(e=>(e||"").toLowerCase().trim());console.log("RequireAuth - Role check:",{userRole:e,allowedRoles:t,userId:a._id,userName:a.name,userEmail:a.email});const r=t.some(t=>"admin"===t&&("admin"===e||"administrator"===e)||("depot_manager"===t&&("depot_manager"===e||"depot-manager"===e||"depotmanager"===e)||("conductor"===t&&"conductor"===e||("driver"===t&&"driver"===e||("passenger"===t&&"passenger"===e||e===t)))));return r?console.log('Access granted: User role "'.concat(e,'" matches allowed roles [').concat(t.join(", "),"]")):console.log('Access denied: User role "'.concat(e,'" not in allowed roles [').concat(t.join(", "),"]")),r},[a,s,n,i,o]);return n||i||o?(0,cs.jsx)(ms,{fullScreen:!0,text:n?"Loading...":o?"Signing in...":i?"Signing out...":"Authenticating..."}):a?c?(0,cs.jsx)("div",{className:"fade-in",children:t}):(0,cs.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6 bg-gray-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center max-w-md fade-in",children:[(0,cs.jsx)("h1",{className:"text-xl font-bold mb-2 text-red-600",children:"403 \u2013 Access Denied"}),(0,cs.jsx)("p",{className:"text-gray-600 mb-4",children:"You do not have permission to access this page."}),(0,cs.jsxs)("div",{className:"text-sm text-gray-500 mb-4",children:[(0,cs.jsxs)("p",{children:["Your role: ",(0,cs.jsx)("strong",{className:"text-gray-700",children:(null===(d=a.role)||void 0===d?void 0:d.toUpperCase())||"None"})]}),(0,cs.jsxs)("p",{children:["Required roles: ",(0,cs.jsx)("strong",{className:"text-gray-700",children:null===s||void 0===s?void 0:s.join(", ").toUpperCase()})]})]}),(0,cs.jsx)("button",{onClick:()=>window.location.href="/dashboard",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors btn-transition",children:"Go to Dashboard"})]})}):(console.log("User not authenticated, redirecting to login"),(0,cs.jsx)(fe,{to:"/login",state:{from:l},replace:!0}));var d}var xs=s(3862),gs=s(8006),fs=s(8646),ys=s(9292);const bs=()=>{const e=te(),[t,s]=(0,r.useState)(""),[a,n]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)([]),h=(0,r.useMemo)(()=>t&&a,[t,a]);return(0,cs.jsxs)("div",{className:"rounded-md border border-gray-200 bg-white overflow-hidden",children:[(0,cs.jsx)("div",{className:"bg-[#0b1e46] text-white rounded-md",children:(0,cs.jsxs)("form",{onSubmit:s=>{var r;if(null===s||void 0===s||null===(r=s.preventDefault)||void 0===r||r.call(s),!h)return;const n=new URLSearchParams({from:t,to:a});i&&n.set("date",i),e("/pax/results?".concat(n.toString()))},className:"grid grid-cols-1 lg:grid-cols-12 gap-3 p-3 items-center",children:[(0,cs.jsxs)("div",{className:"lg:col-span-3 flex items-center gap-2",children:[(0,cs.jsx)("span",{className:"px-3 h-10 inline-flex items-center text-xs font-semibold rounded bg-[#ff7a1a]",children:"From"}),(0,cs.jsxs)("div",{className:"relative flex-1",children:[(0,cs.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:(0,cs.jsx)(gs.A,{className:"w-4 h-4 text-gray-400"})}),(0,cs.jsx)("input",{value:t,onChange:e=>s(e.target.value),className:"w-full pl-7 pr-2 h-10 rounded bg-white text-gray-900 placeholder-gray-400",placeholder:"City"})]})]}),(0,cs.jsxs)("div",{className:"lg:col-span-3 flex items-center gap-2",children:[(0,cs.jsx)("span",{className:"px-3 h-10 inline-flex items-center text-xs font-semibold rounded bg-[#ff7a1a]",children:"To"}),(0,cs.jsxs)("div",{className:"relative flex-1",children:[(0,cs.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:(0,cs.jsx)(gs.A,{className:"w-4 h-4 text-gray-400"})}),(0,cs.jsx)("input",{value:a,onChange:e=>n(e.target.value),className:"w-full pl-7 pr-2 h-10 rounded bg-white text-gray-900 placeholder-gray-400",placeholder:"City"})]})]}),(0,cs.jsxs)("div",{className:"lg:col-span-2 flex items-center gap-2",children:[(0,cs.jsx)("span",{className:"px-3 h-10 inline-flex items-center text-xs font-semibold rounded bg-[#ff7a1a]",children:"Date"}),(0,cs.jsxs)("div",{className:"relative flex-1",children:[(0,cs.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:(0,cs.jsx)(fs.A,{className:"w-4 h-4 text-gray-400"})}),(0,cs.jsx)("input",{type:"date",value:i,onChange:e=>o(e.target.value),className:"w-full pl-7 pr-2 h-10 rounded bg-white text-gray-900"})]})]}),(0,cs.jsx)("div",{className:"lg:col-span-4 flex gap-2 justify-end",children:(0,cs.jsxs)("button",{type:"submit",disabled:!h||l,className:"inline-flex items-center justify-center gap-2 px-4 h-10 rounded bg-[#ff7a1a] text-white disabled:opacity-60",children:[(0,cs.jsx)(ys.A,{className:"w-4 h-4"})," Search"]})})]})}),d.length>0&&(0,cs.jsx)("div",{className:"overflow-x-auto",children:(0,cs.jsxs)("table",{className:"min-w-full text-sm",children:[(0,cs.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,cs.jsxs)("tr",{className:"text-left text-gray-600",children:[(0,cs.jsx)("th",{className:"px-3 py-2",children:"Coach"}),(0,cs.jsx)("th",{className:"px-3 py-2",children:"Time"}),(0,cs.jsx)("th",{className:"px-3 py-2",children:"Type"}),(0,cs.jsx)("th",{className:"px-3 py-2",children:"AC"}),(0,cs.jsx)("th",{className:"px-3 py-2",children:"Route"}),(0,cs.jsx)("th",{className:"px-3 py-2",children:"Available"}),(0,cs.jsx)("th",{className:"px-3 py-2",children:"Fare"}),(0,cs.jsx)("th",{className:"px-3 py-2"})]})}),(0,cs.jsx)("tbody",{children:d.map(t=>{var s;return(0,cs.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,cs.jsx)("td",{className:"px-3 py-2 text-blue-600",children:t.busNumber||t.coachNo||"-"}),(0,cs.jsxs)("td",{className:"px-3 py-2",children:[t.startTime," \u2192 ",t.endTime]}),(0,cs.jsx)("td",{className:"px-3 py-2",children:t.busType||t.type||"-"}),(0,cs.jsx)("td",{className:"px-3 py-2",children:t.isAC?"AC":"Non-AC"}),(0,cs.jsxs)("td",{className:"px-3 py-2",children:[t.fromCity," \u2192 ",t.toCity]}),(0,cs.jsx)("td",{className:"px-3 py-2",children:null!==(s=t.availableSeats)&&void 0!==s?s:"-"}),(0,cs.jsxs)("td",{className:"px-3 py-2",children:["\u20b9",t.fare]}),(0,cs.jsx)("td",{className:"px-3 py-2 text-right",children:(0,cs.jsx)("button",{onClick:()=>e("/pax/board-drop/".concat(t._id),{state:{trip:t}}),className:"px-3 py-1.5 rounded bg-[#ff7a1a] text-white text-xs",children:"View Seat"})})]},t._id)})})]})})]})},vs=e=>{let{children:t}=e;return(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("header",{className:"bg-[#0b1e46] text-white",children:(0,cs.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-3",children:[(0,cs.jsx)("div",{className:"font-bold tracking-wide",children:"YATRIK ERP"}),(0,cs.jsx)("nav",{className:"hidden sm:flex items-center gap-3 text-sm text-white/90",children:[].map(e=>(0,cs.jsxs)(Pe,{to:e.to,className:"px-2 py-1 rounded hover:bg-white/10 flex items-center gap-1",children:[(0,cs.jsx)(e.icon,{className:"w-4 h-4"})," ",e.label]},e.to))})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(Pe,{to:"/pax",className:"px-3 py-1.5 rounded bg-[#ff7a1a] text-white text-sm",children:"Passenger"}),(0,cs.jsx)(Pe,{to:"/dashboard",className:"px-3 py-1.5 rounded bg-white/10 text-white text-sm",children:"Dashboard"})]})]}),(0,cs.jsx)("div",{className:"mt-3",children:(0,cs.jsx)(bs,{})})]})}),(0,cs.jsx)("main",{className:"max-w-7xl mx-auto p-4",children:t})]})};var js=s(7033),Ns=s(7784);const ws=(0,Ns.A)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);var ks=s(2244),As=s(2811),Ss=s(7118),Cs=s(5244);const _s=(0,Ns.A)("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);var Ts=s(4459);const Ps=(0,Ns.A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var Es=s(3062),Ds=s(4537),Ms=s(3033),Os=s(7365);const Rs=(0,Ns.A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Is=(0,Ns.A)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),Ls=(0,Ns.A)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Fs=(0,Ns.A)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var Bs=s(614);const zs=(0,Ns.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),Us=(0,Ns.A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),Vs=(0,Ns.A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),Ks=e=>{var t,s,a,n,i,o;let{children:l}=e;const[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)([]),[m,p]=(0,r.useState)(""),x=Z(),g=te(),{user:f,logout:y,isLoggingOut:b}=(0,Re.A)(),v=[{name:"Dashboard",href:"/admin",icon:js.A,current:"/admin"===x.pathname},{name:"Mass Scheduling",href:"/admin/mass-scheduling",icon:ws,current:"/admin/mass-scheduling"===x.pathname},{name:"Bus Management",href:"/admin/streamlined-buses",icon:ks.A,current:"/admin/streamlined-buses"===x.pathname},{name:"Route Management",href:"/admin/streamlined-routes",icon:As.A,current:"/admin/streamlined-routes"===x.pathname},{name:"Trip Management",href:"/admin/streamlined-trips",icon:fs.A,current:"/admin/streamlined-trips"===x.pathname},{name:"User Management",href:"/admin/users",icon:Ss.A,current:"/admin/users"===x.pathname},{name:"Booking Management",href:"/admin/bookings",icon:Cs.A,current:"/admin/bookings"===x.pathname},{name:"Depot Management",href:"/admin/depot-management",icon:_s,current:"/admin/depot-management"===x.pathname},{name:"Driver Management",href:"/admin/drivers",icon:Ts.A,current:"/admin/drivers"===x.pathname},{name:"Conductor Management",href:"/admin/conductors",icon:Ps,current:"/admin/conductors"===x.pathname},{name:"Fare Policy",href:"/admin/fare-policy",icon:Es.A,current:"/admin/fare-policy"===x.pathname},{name:"System Status",href:"/admin/system-status",icon:Ds.A,current:"/admin/system-status"===x.pathname},{name:"RBAC",href:"/admin/rbac",icon:Ps,current:"/admin/rbac"===x.pathname},{name:"Reports",href:"/admin/reports",icon:Ms.A,current:"/admin/reports"===x.pathname},{name:"Settings",href:"/admin/settings",icon:Os.A,current:"/admin/settings"===x.pathname}],j=[{name:"Mass Scheduling",href:"/admin/mass-scheduling",icon:ws,color:"bg-purple-500"},{name:"Buses",href:"/admin/streamlined-buses",icon:ks.A,color:"bg-blue-500"},{name:"Routes",href:"/admin/streamlined-routes",icon:As.A,color:"bg-green-500"},{name:"Trips",href:"/admin/streamlined-trips",icon:fs.A,color:"bg-orange-500"}],N=[{name:"Database",status:"healthy",icon:Rs,color:"text-green-500"},{name:"API Server",status:"healthy",icon:Is,color:"text-green-500"},{name:"Frontend",status:"healthy",icon:Ls,color:"text-green-500"},{name:"Mobile App",status:"warning",icon:Fs,color:"text-yellow-500"}],w=async()=>{try{await y(),g("/login",{replace:!0})}catch(e){console.error("Logout error:",e),g("/login",{replace:!0})}};return b?(0,cs.jsx)(ms,{fullScreen:!0,text:"Logging out..."}):(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50 layout-stable",children:[(0,cs.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden transition-all duration-300 ease-in-out ".concat(c?"block":"hidden"),children:[(0,cs.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 transition-opacity duration-300",onClick:()=>d(!1)}),(0,cs.jsxs)("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white shadow-xl transform transition-transform duration-300 ease-in-out ".concat(c?"translate-x-0":"-translate-x-full"),children:[(0,cs.jsx)("div",{className:"flex h-16 items-center justify-end px-6 border-b border-gray-200",children:(0,cs.jsx)("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:(0,cs.jsx)(Bs.A,{className:"w-6 h-6"})})}),(0,cs.jsx)("nav",{className:"flex-1 space-y-1 px-4 py-4",children:v.map(e=>(0,cs.jsxs)(Pe,{to:e.href,className:"group flex items-center justify-between px-3 py-2 text-sm font-medium rounded-lg transition-colors ".concat(e.current?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"),onClick:()=>d(!1),children:[(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)(e.icon,{className:"mr-3 h-5 w-5 ".concat(e.current?"text-blue-700":"text-gray-400 group-hover:text-gray-500")}),e.name]}),e.badge&&(0,cs.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("NEW"===e.badge?"bg-purple-100 text-purple-800":"IMPROVED"===e.badge?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.badge})]},e.name))})]})]}),(0,cs.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col z-50",children:(0,cs.jsxs)("div",{className:"flex flex-col flex-grow bg-white shadow-xl border-r border-gray-200",children:[(0,cs.jsx)("div",{className:"flex h-16 items-center px-6 border-b border-gray-200",children:(0,cs.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Admin Panel"})}),(0,cs.jsx)("nav",{className:"flex-1 space-y-1 px-4 py-4",children:v.map(e=>(0,cs.jsxs)(Pe,{to:e.href,className:"group flex items-center justify-between px-3 py-2 text-sm font-medium rounded-lg transition-colors ".concat(e.current?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"),children:[(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)(e.icon,{className:"mr-3 h-5 w-5 ".concat(e.current?"text-blue-700":"text-gray-400 group-hover:text-gray-500")}),e.name]}),e.badge&&(0,cs.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("NEW"===e.badge?"bg-purple-100 text-purple-800":"IMPROVED"===e.badge?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.badge})]},e.name))}),(0,cs.jsx)("div",{className:"border-t border-gray-200 p-4",children:(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-white font-semibold text-sm",children:(null===f||void 0===f||null===(t=f.name)||void 0===t||null===(s=t.charAt(0))||void 0===s?void 0:s.toUpperCase())||"E"})}),(0,cs.jsxs)("div",{className:"ml-3 flex-1",children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(null===f||void 0===f?void 0:f.name)||"ERP Admin"}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:(null===f||void 0===f?void 0:f.role)||"admin"})]}),(0,cs.jsx)("button",{onClick:w,className:"text-gray-400 hover:text-gray-600 p-1 rounded transition-all duration-200 ease-in-out hover:bg-gray-100 btn-transition",title:"Logout",disabled:b,children:b?(0,cs.jsx)("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"}):(0,cs.jsx)(zs,{className:"w-4 h-4"})})]})})]})}),(0,cs.jsxs)("div",{className:"lg:pl-64 relative z-10",children:[(0,cs.jsx)("div",{className:"sticky top-0 z-40 bg-white shadow-sm border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex h-16 items-center justify-between px-4 sm:px-6 lg:px-8",children:[(0,cs.jsx)("div",{className:"flex items-center space-x-4",children:(0,cs.jsx)("button",{onClick:()=>d(!0),className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100",children:(0,cs.jsx)(Us,{className:"w-6 h-6"})})}),(0,cs.jsx)("div",{className:"flex-1 max-w-lg mx-4 lg:mx-8",children:(0,cs.jsxs)("form",{onSubmit:e=>{e.preventDefault(),m.trim()&&console.log("Searching for:",m)},className:"relative",children:[(0,cs.jsx)(ys.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search users, trips, routes...",value:m,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]})}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("div",{className:"hidden md:flex items-center space-x-2",children:N.map(e=>(0,cs.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,cs.jsx)(e.icon,{className:"w-4 h-4 ".concat(e.color)}),(0,cs.jsx)("span",{className:"text-xs text-gray-600",children:e.name})]},e.name))}),(0,cs.jsxs)("button",{className:"relative p-2 text-gray-400 hover:text-gray-500 hover:bg-gray-100 rounded-lg",children:[(0,cs.jsx)(Vs,{className:"w-5 h-5"}),u.length>0&&(0,cs.jsx)("span",{className:"absolute top-0 right-0 block h-2 w-2 rounded-full bg-red-400 ring-2 ring-white"})]}),(0,cs.jsxs)("div",{className:"relative flex items-center space-x-2",children:[(0,cs.jsxs)("button",{className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-all duration-200 ease-in-out btn-transition",disabled:b,children:[(0,cs.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-white font-semibold text-sm",children:(null===f||void 0===f||null===(a=f.name)||void 0===a||null===(n=a.charAt(0))||void 0===n?void 0:n.toUpperCase())||"E"})}),(0,cs.jsx)("span",{className:"hidden md:block text-sm font-medium text-gray-900",children:(null===f||void 0===f?void 0:f.name)||"ERP Admin"})]}),(0,cs.jsxs)("button",{onClick:w,"data-testid":"logout-btn",className:"flex items-center space-x-2 px-4 py-2 text-sm font-semibold text-white bg-red-600 hover:bg-red-700 hover:shadow-lg rounded-lg transition-all duration-200 ease-in-out btn-transition border border-red-600",title:"Logout",disabled:b,children:[b?(0,cs.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,cs.jsx)(zs,{className:"w-4 h-4"}),(0,cs.jsx)("span",{className:"font-medium",children:"Logout"})]})]})]})]})}),(0,cs.jsx)("div",{className:"bg-white border-b border-gray-200 px-4 sm:px-6 lg:px-8 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:(null===(i=v.find(e=>e.current))||void 0===i?void 0:i.name)||"Admin Dashboard"}),(0,cs.jsx)("nav",{className:"flex mt-2","aria-label":"Breadcrumb",children:(0,cs.jsxs)("ol",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("li",{children:(0,cs.jsx)(Pe,{to:"/admin",className:"text-gray-500 hover:text-gray-700 text-sm",children:"Dashboard"})}),"/admin"!==x.pathname&&(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)("li",{children:(0,cs.jsx)("span",{className:"text-gray-400 mx-2",children:"/"})}),(0,cs.jsx)("li",{children:(0,cs.jsx)("span",{className:"text-gray-900 text-sm",children:(null===(o=v.find(e=>e.current))||void 0===o?void 0:o.name)||"Page"})})]})]})})]}),(0,cs.jsx)("div",{className:"hidden md:flex items-center space-x-2",children:j.map(e=>(0,cs.jsxs)(Pe,{to:e.href,className:"".concat(e.color," text-white px-3 py-2 rounded-lg text-sm font-medium hover:opacity-90 transition-opacity flex items-center space-x-2"),children:[(0,cs.jsx)(e.icon,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:e.name})]},e.name))})]})}),(0,cs.jsx)("main",{className:"px-4 sm:px-6 lg:px-8 py-6",children:l})]})]})},Ws=(0,r.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Hs=(0,r.createContext)({}),qs=(0,r.createContext)(null),Gs="undefined"!==typeof document,Ys=Gs?r.useLayoutEffect:r.useEffect,$s=(0,r.createContext)({strict:!1}),Js=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Qs="data-"+Js("framerAppearId");function Xs(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Zs(e){return"string"===typeof e||Array.isArray(e)}function er(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const tr=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],sr=["initial",...tr];function rr(e){return er(e.animate)||sr.some(t=>Zs(e[t]))}function ar(e){return Boolean(rr(e)||e.variants)}function nr(e){const{initial:t,animate:s}=function(e,t){if(rr(e)){const{initial:t,animate:s}=e;return{initial:!1===t||Zs(t)?t:void 0,animate:Zs(s)?s:void 0}}return!1!==e.inherit?t:{}}(e,(0,r.useContext)(Hs));return(0,r.useMemo)(()=>({initial:t,animate:s}),[ir(t),ir(s)])}function ir(e){return Array.isArray(e)?e.join(" "):e}const or={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},lr={};for(const s in or)lr[s]={isEnabled:e=>or[s].some(t=>!!e[t])};const cr=(0,r.createContext)({}),dr=(0,r.createContext)({}),ur=Symbol.for("motionComponentSymbol");function hr(e){let{preloadedFeatures:t,createVisualElement:s,useRender:a,useVisualState:n,Component:i}=e;t&&function(e){for(const t in e)lr[t]=(0,Ie.A)((0,Ie.A)({},lr[t]),e[t])}(t);const o=(0,r.forwardRef)(function(e,o){let l;const c=(0,Ie.A)((0,Ie.A)((0,Ie.A)({},(0,r.useContext)(Ws)),e),{},{layoutId:mr(e)}),{isStatic:d}=c,u=nr(e),h=n(e,d);if(!d&&Gs){u.visualElement=function(e,t,s,a){const{visualElement:n}=(0,r.useContext)(Hs),i=(0,r.useContext)($s),o=(0,r.useContext)(qs),l=(0,r.useContext)(Ws).reducedMotion,c=(0,r.useRef)();a=a||i.renderer,!c.current&&a&&(c.current=a(e,{visualState:t,parent:n,props:s,presenceContext:o,blockInitialAnimation:!!o&&!1===o.initial,reducedMotionConfig:l}));const d=c.current;(0,r.useInsertionEffect)(()=>{d&&d.update(s,o)});const u=(0,r.useRef)(Boolean(s[Qs]&&!window.HandoffComplete));return Ys(()=>{d&&(d.render(),u.current&&d.animationState&&d.animationState.animateChanges())}),(0,r.useEffect)(()=>{d&&(d.updateFeatures(),!u.current&&d.animationState&&d.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),d}(i,h,c,s);const e=(0,r.useContext)(dr),a=(0,r.useContext)($s).strict;u.visualElement&&(l=u.visualElement.loadFeatures(c,a,t,e))}return r.createElement(Hs.Provider,{value:u},l&&u.visualElement?r.createElement(l,(0,Ie.A)({visualElement:u.visualElement},c)):null,a(i,e,function(e,t,s){return(0,r.useCallback)(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),s&&("function"===typeof s?s(r):Xs(s)&&(s.current=r))},[t])}(h,u.visualElement,o),h,d,u.visualElement))});return o[ur]=i,o}function mr(e){let{layoutId:t}=e;const s=(0,r.useContext)(cr).id;return s&&void 0!==t?s+"-"+t:t}function pr(e){function t(t){return hr(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;const s=new Map;return new Proxy(t,{get:(e,r)=>(s.has(r)||s.set(r,t(r)),s.get(r))})}const xr=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function gr(e){return"string"===typeof e&&!e.includes("-")&&!!(xr.indexOf(e)>-1||/[A-Z]/.test(e))}const fr={};const yr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],br=new Set(yr);function vr(e,t){let{layout:s,layoutId:r}=t;return br.has(e)||e.startsWith("origin")||(s||void 0!==r)&&(!!fr[e]||"opacity"===e)}const jr=e=>Boolean(e&&e.getVelocity),Nr={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},wr=yr.length;const kr=e=>t=>"string"===typeof t&&t.startsWith(e),Ar=kr("--"),Sr=kr("var(--"),Cr=(e,t)=>t&&"number"===typeof e?t.transform(e):e,_r=(e,t,s)=>Math.min(Math.max(s,e),t),Tr={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},Pr=(0,Ie.A)((0,Ie.A)({},Tr),{},{transform:e=>_r(0,1,e)}),Er=(0,Ie.A)((0,Ie.A)({},Tr),{},{default:1}),Dr=e=>Math.round(1e5*e)/1e5,Mr=/(-)?([\d]*\.?[\d])+/g,Or=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Rr=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ir(e){return"string"===typeof e}const Lr=e=>({test:t=>Ir(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),Fr=Lr("deg"),Br=Lr("%"),zr=Lr("px"),Ur=Lr("vh"),Vr=Lr("vw"),Kr=(0,Ie.A)((0,Ie.A)({},Br),{},{parse:e=>Br.parse(e)/100,transform:e=>Br.transform(100*e)}),Wr=(0,Ie.A)((0,Ie.A)({},Tr),{},{transform:Math.round}),Hr={borderWidth:zr,borderTopWidth:zr,borderRightWidth:zr,borderBottomWidth:zr,borderLeftWidth:zr,borderRadius:zr,radius:zr,borderTopLeftRadius:zr,borderTopRightRadius:zr,borderBottomRightRadius:zr,borderBottomLeftRadius:zr,width:zr,maxWidth:zr,height:zr,maxHeight:zr,size:zr,top:zr,right:zr,bottom:zr,left:zr,padding:zr,paddingTop:zr,paddingRight:zr,paddingBottom:zr,paddingLeft:zr,margin:zr,marginTop:zr,marginRight:zr,marginBottom:zr,marginLeft:zr,rotate:Fr,rotateX:Fr,rotateY:Fr,rotateZ:Fr,scale:Er,scaleX:Er,scaleY:Er,scaleZ:Er,skew:Fr,skewX:Fr,skewY:Fr,distance:zr,translateX:zr,translateY:zr,translateZ:zr,x:zr,y:zr,z:zr,perspective:zr,transformPerspective:zr,opacity:Pr,originX:Kr,originY:Kr,originZ:zr,zIndex:Wr,fillOpacity:Pr,strokeOpacity:Pr,numOctaves:Wr};function qr(e,t,s,r){const{style:a,vars:n,transform:i,transformOrigin:o}=e;let l=!1,c=!1,d=!0;for(const u in t){const e=t[u];if(Ar(u)){n[u]=e;continue}const s=Hr[u],r=Cr(e,s);if(br.has(u)){if(l=!0,i[u]=r,!d)continue;e!==(s.default||0)&&(d=!1)}else u.startsWith("origin")?(c=!0,o[u]=r):a[u]=r}if(t.transform||(l||r?a.transform=function(e,t,s,r){let{enableHardwareAcceleration:a=!0,allowTransformNone:n=!0}=t,i="";for(let o=0;o<wr;o++){const t=yr[o];void 0!==e[t]&&(i+="".concat(Nr[t]||t,"(").concat(e[t],") "))}return a&&!e.z&&(i+="translateZ(0)"),i=i.trim(),r?i=r(e,s?"":i):n&&s&&(i="none"),i}(e.transform,s,d,r):a.transform&&(a.transform="none")),c){const{originX:e="50%",originY:t="50%",originZ:s=0}=o;a.transformOrigin="".concat(e," ").concat(t," ").concat(s)}}const Gr=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Yr(e,t,s){for(const r in t)jr(t[r])||vr(r,s)||(e[r]=t[r])}function $r(e,t,s){const a={};return Yr(a,e.style||{},e),Object.assign(a,function(e,t,s){let{transformTemplate:a}=e;return(0,r.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return qr(e,t,{enableHardwareAcceleration:!s},a),Object.assign({},e.vars,e.style)},[t])}(e,t,s)),e.transformValues?e.transformValues(a):a}function Jr(e,t,s){const r={},a=$r(e,t,s);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=a,r}const Qr=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xr(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Qr.has(e)}let Zr=e=>!Xr(e);try{(ea=require("@emotion/is-prop-valid").default)&&(Zr=e=>e.startsWith("on")?!Xr(e):ea(e))}catch(hK){}var ea;var ta=s(3986);function sa(e,t,s){return"string"===typeof e?e:zr.transform(t+s*e)}const ra={offset:"stroke-dashoffset",array:"stroke-dasharray"},aa={offset:"strokeDashoffset",array:"strokeDasharray"};const na=["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"];function ia(e,t,s,r,a){let{attrX:n,attrY:i,attrScale:o,originX:l,originY:c,pathLength:d,pathSpacing:u=1,pathOffset:h=0}=t;if(qr(e,(0,ta.A)(t,na),s,a),r)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:m,style:p,dimensions:x}=e;m.transform&&(x&&(p.transform=m.transform),delete m.transform),x&&(void 0!==l||void 0!==c||p.transform)&&(p.transformOrigin=function(e,t,s){const r=sa(t,e.x,e.width),a=sa(s,e.y,e.height);return"".concat(r," ").concat(a)}(x,void 0!==l?l:.5,void 0!==c?c:.5)),void 0!==n&&(m.x=n),void 0!==i&&(m.y=i),void 0!==o&&(m.scale=o),void 0!==d&&function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const n=a?ra:aa;e[n.offset]=zr.transform(-r);const i=zr.transform(t),o=zr.transform(s);e[n.array]="".concat(i," ").concat(o)}(m,d,u,h,!1)}const oa=()=>(0,Ie.A)((0,Ie.A)({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}}),la=e=>"string"===typeof e&&"svg"===e.toLowerCase();function ca(e,t,s,a){const n=(0,r.useMemo)(()=>{const s=oa();return ia(s,t,{enableHardwareAcceleration:!1},la(a),e.transformTemplate),(0,Ie.A)((0,Ie.A)({},s.attrs),{},{style:(0,Ie.A)({},s.style)})},[t]);if(e.style){const t={};Yr(t,e.style,e),n.style=(0,Ie.A)((0,Ie.A)({},t),n.style)}return n}function da(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,s,a,n,i)=>{let{latestValues:o}=n;const l=(gr(t)?ca:Jr)(s,o,i,t),c=function(e,t,s){const r={};for(const a in e)"values"===a&&"object"===typeof e.values||(Zr(a)||!0===s&&Xr(a)||!t&&!Xr(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}(s,"string"===typeof t,e),d=(0,Ie.A)((0,Ie.A)((0,Ie.A)({},c),l),{},{ref:a}),{children:u}=s,h=(0,r.useMemo)(()=>jr(u)?u.get():u,[u]);return(0,r.createElement)(t,(0,Ie.A)((0,Ie.A)({},d),{},{children:h}))}}function ua(e,t,s,r){let{style:a,vars:n}=t;Object.assign(e.style,a,r&&r.getProjectionStyles(s));for(const i in n)e.style.setProperty(i,n[i])}const ha=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ma(e,t,s,r){ua(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(ha.has(a)?a:Js(a),t.attrs[a])}function pa(e,t){const{style:s}=e,r={};for(const a in s)(jr(s[a])||t.style&&jr(t.style[a])||vr(a,e))&&(r[a]=s[a]);return r}function xa(e,t){const s=pa(e,t);for(const r in e)if(jr(e[r])||jr(t[r])){s[-1!==yr.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return s}function ga(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==s?s:e.custom,r,a)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==s?s:e.custom,r,a)),t}function fa(e){const t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}const ya=e=>Array.isArray(e),ba=e=>ya(e)?e[e.length-1]||0:e;function va(e){const t=jr(e)?e.get():e;return s=t,Boolean(s&&"object"===typeof s&&s.mix&&s.toValue)?t.toValue():t;var s}const ja=["transitionEnd","transition"];const Na=e=>(t,s)=>{const a=(0,r.useContext)(Hs),n=(0,r.useContext)(qs),i=()=>function(e,t,s,r){let{scrapeMotionValuesFromProps:a,createRenderState:n,onMount:i}=e;const o={latestValues:wa(t,s,r,a),renderState:n()};return i&&(o.mount=e=>i(t,e,o)),o}(e,t,a,n);return s?i():fa(i)};function wa(e,t,s,r){const a={},n=r(e,{});for(const h in n)a[h]=va(n[h]);let{initial:i,animate:o}=e;const l=rr(e),c=ar(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===o&&(o=t.animate));let d=!!s&&!1===s.initial;d=d||!1===i;const u=d?o:i;if(u&&"boolean"!==typeof u&&!er(u)){(Array.isArray(u)?u:[u]).forEach(t=>{const s=ga(e,t);if(!s)return;const{transitionEnd:r,transition:n}=s,i=(0,ta.A)(s,ja);for(const e in i){let t=i[e];if(Array.isArray(t)){t=t[d?t.length-1:0]}null!==t&&(a[e]=t)}for(const e in r)a[e]=r[e]})}return a}const ka=e=>e;class Aa{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}const Sa=["prepare","read","update","preRender","render","postRender"];const{schedule:Ca,cancel:_a,state:Ta,steps:Pa}=function(e,t){let s=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},n=Sa.reduce((e,t)=>(e[t]=function(e){let t=new Aa,s=new Aa,r=0,a=!1,n=!1;const i=new WeakSet,o={schedule:function(e){const n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&a,o=n?t:s;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&i.add(e),o.add(e)&&n&&a&&(r=t.order.length),e},cancel:e=>{s.remove(e),i.delete(e)},process:l=>{if(a)n=!0;else{if(a=!0,[t,s]=[s,t],s.clear(),r=t.order.length,r)for(let s=0;s<r;s++){const r=t.order[s];r(l),i.has(r)&&(o.schedule(r),e())}a=!1,n&&(n=!1,o.process(l))}}};return o}(()=>s=!0),e),{}),i=e=>n[e].process(a),o=()=>{const n=performance.now();s=!1,a.delta=r?1e3/60:Math.max(Math.min(n-a.timestamp,40),1),a.timestamp=n,a.isProcessing=!0,Sa.forEach(i),a.isProcessing=!1,s&&t&&(r=!1,e(o))},l=Sa.reduce((t,i)=>{const l=n[i];return t[i]=function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s||(s=!0,r=!0,a.isProcessing||e(o)),l.schedule(t,n,i)},t},{});return{schedule:l,cancel:e=>Sa.forEach(t=>n[t].cancel(e)),state:a,steps:n}}("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:ka,!0),Ea={useVisualState:Na({scrapeMotionValuesFromProps:xa,createRenderState:oa,onMount:(e,t,s)=>{let{renderState:r,latestValues:a}=s;Ca.read(()=>{try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(qU){r.dimensions={x:0,y:0,width:0,height:0}}}),Ca.render(()=>{ia(r,a,{enableHardwareAcceleration:!1},la(t.tagName),e.transformTemplate),ma(t,r)})}})},Da={useVisualState:Na({scrapeMotionValuesFromProps:pa,createRenderState:Gr})};function Ma(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s)}const Oa=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function Ra(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}function Ia(e,t,s,r){return Ma(e,t,(e=>t=>Oa(t)&&e(t,Ra(t)))(s),r)}const La=(e,t)=>s=>t(e(s)),Fa=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.reduce(La)};function Ba(e){let t=null;return()=>{const s=()=>{t=null};return null===t&&(t=e,s)}}const za=Ba("dragHorizontal"),Ua=Ba("dragVertical");function Va(e){let t=!1;if("y"===e)t=Ua();else if("x"===e)t=za();else{const e=za(),s=Ua();e&&s?t=()=>{e(),s()}:(e&&e(),s&&s())}return t}function Ka(){const e=Va(!0);return!e||(e(),!1)}class Wa{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Ha(e,t){const s="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End");return Ia(e.current,s,(s,a)=>{if("touch"===s.pointerType||Ka())return;const n=e.getProps();e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",t),n[r]&&Ca.update(()=>n[r](s,a))},{passive:!e.getProps()[r]})}const qa=(e,t)=>!!t&&(e===t||qa(e,t.parentElement));function Ga(e,t){if(!t)return;const s=new PointerEvent("pointer"+e);t(s,Ra(s))}const Ya=["root"],$a=new WeakMap,Ja=new WeakMap,Qa=e=>{const t=$a.get(e.target);t&&t(e)},Xa=e=>{e.forEach(Qa)};function Za(e,t,s){const r=function(e){let{root:t}=e,s=(0,ta.A)(e,Ya);const r=t||document;Ja.has(r)||Ja.set(r,{});const a=Ja.get(r),n=JSON.stringify(s);return a[n]||(a[n]=new IntersectionObserver(Xa,(0,Ie.A)({root:t},s))),a[n]}(t);return $a.set(e,s),r.observe(e),()=>{$a.delete(e),r.unobserve(e)}}const en={some:0,all:1};const tn={inView:{Feature:class extends Wa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:r="some",once:a}=e,n={root:t?t.current:void 0,rootMargin:s,threshold:"number"===typeof r?r:en[r]};return Za(this.node.current,n,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,a&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:s,onViewportLeave:r}=this.node.getProps(),n=t?s:r;n&&n(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,s=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:s={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==s[e]}(e,t));s&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Wa{constructor(){super(...arguments),this.removeStartListeners=ka,this.removeEndListeners=ka,this.removeAccessibleListeners=ka,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),r=Ia(window,"pointerup",(e,t)=>{if(!this.checkPressEnd())return;const{onTap:s,onTapCancel:r,globalTapTarget:a}=this.node.getProps();Ca.update(()=>{a||qa(this.node.current,e.target)?s&&s(e,t):r&&r(e,t)})},{passive:!(s.onTap||s.onPointerUp)}),a=Ia(window,"pointercancel",(e,t)=>this.cancelPress(e,t),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=Fa(r,a),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=Ma(this.node.current,"keydown",e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=Ma(this.node.current,"keyup",e=>{"Enter"===e.key&&this.checkPressEnd()&&Ga("up",(e,t)=>{const{onTap:s}=this.node.getProps();s&&Ca.update(()=>s(e,t))})}),Ga("down",(e,t)=>{this.startPress(e,t)})}),t=Ma(this.node.current,"blur",()=>{this.isPressing&&Ga("cancel",(e,t)=>this.cancelPress(e,t))});this.removeAccessibleListeners=Fa(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:s,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&Ca.update(()=>s(e,t))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Ka()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&Ca.update(()=>s(e,t))}mount(){const e=this.node.getProps(),t=Ia(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),s=Ma(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Fa(t,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends Wa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(qU){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Fa(Ma(this.node.current,"focus",()=>this.onFocus()),Ma(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Wa{mount(){this.unmount=Fa(Ha(this.node,!0),Ha(this.node,!1))}unmount(){}}}};function sn(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let r=0;r<s;r++)if(t[r]!==e[r])return!1;return!0}function rn(e,t,s){const r=e.getProps();return ga(r,t,void 0!==s?s:r.custom,function(e){const t={};return e.values.forEach((e,s)=>t[s]=e.get()),t}(e),function(e){const t={};return e.values.forEach((e,s)=>t[s]=e.getVelocity()),t}(e))}let an=ka,nn=ka;const on=e=>1e3*e,ln=e=>e/1e3,cn=!1,dn=e=>Array.isArray(e)&&"number"===typeof e[0];function un(e){return Boolean(!e||"string"===typeof e&&mn[e]||dn(e)||Array.isArray(e)&&e.every(un))}const hn=e=>{let[t,s,r,a]=e;return"cubic-bezier(".concat(t,", ").concat(s,", ").concat(r,", ").concat(a,")")},mn={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:hn([0,.65,.55,1]),circOut:hn([.55,0,1,.45]),backIn:hn([.31,.01,.66,-.59]),backOut:hn([.33,1.53,.69,.99])};function pn(e){if(e)return dn(e)?hn(e):Array.isArray(e)?e.map(pn):mn[e]}const xn=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e;function gn(e,t,s,r){if(e===t&&s===r)return ka;const a=t=>function(e,t,s,r,a){let n,i,o=0;do{i=t+(s-t)/2,n=xn(i,r,a)-e,n>0?s=i:t=i}while(Math.abs(n)>1e-7&&++o<12);return i}(t,0,1,e,s);return e=>0===e||1===e?e:xn(a(e),t,r)}const fn=gn(.42,0,1,1),yn=gn(0,0,.58,1),bn=gn(.42,0,.58,1),vn=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,jn=e=>t=>1-e(1-t),Nn=e=>1-Math.sin(Math.acos(e)),wn=jn(Nn),kn=vn(Nn),An=gn(.33,1.53,.69,.99),Sn=jn(An),Cn=vn(Sn),_n={linear:ka,easeIn:fn,easeInOut:bn,easeOut:yn,circIn:Nn,circInOut:kn,circOut:wn,backIn:Sn,backInOut:Cn,backOut:An,anticipate:e=>(e*=2)<1?.5*Sn(e):.5*(2-Math.pow(2,-10*(e-1)))},Tn=e=>{if(Array.isArray(e)){nn(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,s,r,a]=e;return gn(t,s,r,a)}return"string"===typeof e?(nn(void 0!==_n[e],"Invalid easing type '".concat(e,"'")),_n[e]):e},Pn=(e,t)=>s=>Boolean(Ir(s)&&Rr.test(s)&&s.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(s,t)),En=(e,t,s)=>r=>{if(!Ir(r))return r;const[a,n,i,o]=r.match(Mr);return{[e]:parseFloat(a),[t]:parseFloat(n),[s]:parseFloat(i),alpha:void 0!==o?parseFloat(o):1}},Dn=(0,Ie.A)((0,Ie.A)({},Tr),{},{transform:e=>Math.round((e=>_r(0,255,e))(e))}),Mn={test:Pn("rgb","red"),parse:En("red","green","blue"),transform:e=>{let{red:t,green:s,blue:r,alpha:a=1}=e;return"rgba("+Dn.transform(t)+", "+Dn.transform(s)+", "+Dn.transform(r)+", "+Dr(Pr.transform(a))+")"}};const On={test:Pn("#"),parse:function(e){let t="",s="",r="",a="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,s+=s,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}},transform:Mn.transform},Rn={test:Pn("hsl","hue"),parse:En("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:s,lightness:r,alpha:a=1}=e;return"hsla("+Math.round(t)+", "+Br.transform(Dr(s))+", "+Br.transform(Dr(r))+", "+Dr(Pr.transform(a))+")"}},In={test:e=>Mn.test(e)||On.test(e)||Rn.test(e),parse:e=>Mn.test(e)?Mn.parse(e):Rn.test(e)?Rn.parse(e):On.parse(e),transform:e=>Ir(e)?e:e.hasOwnProperty("red")?Mn.transform(e):Rn.transform(e)},Ln=(e,t,s)=>-s*e+s*t+e;function Fn(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+6*(t-e)*s:s<.5?t:s<2/3?e+(t-e)*(2/3-s)*6:e}const Bn=(e,t,s)=>{const r=e*e;return Math.sqrt(Math.max(0,s*(t*t-r)+r))},zn=[On,Mn,Rn];function Un(e){const t=(s=e,zn.find(e=>e.test(s)));var s;nn(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."));let r=t.parse(e);return t===Rn&&(r=function(e){let{hue:t,saturation:s,lightness:r,alpha:a}=e;t/=360,s/=100,r/=100;let n=0,i=0,o=0;if(s){const e=r<.5?r*(1+s):r+s-r*s,a=2*r-e;n=Fn(a,e,t+1/3),i=Fn(a,e,t),o=Fn(a,e,t-1/3)}else n=i=o=r;return{red:Math.round(255*n),green:Math.round(255*i),blue:Math.round(255*o),alpha:a}}(r)),r}const Vn=(e,t)=>{const s=Un(e),r=Un(t),a=(0,Ie.A)({},s);return e=>(a.red=Bn(s.red,r.red,e),a.green=Bn(s.green,r.green,e),a.blue=Bn(s.blue,r.blue,e),a.alpha=Ln(s.alpha,r.alpha,e),Mn.transform(a))};const Kn={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:ka},Wn={regex:Or,countKey:"Colors",token:"${c}",parse:In.parse},Hn={regex:Mr,countKey:"Numbers",token:"${n}",parse:Tr.parse};function qn(e,t){let{regex:s,countKey:r,token:a,parse:n}=t;const i=e.tokenised.match(s);i&&(e["num"+r]=i.length,e.tokenised=e.tokenised.replace(s,a),e.values.push(...i.map(n)))}function Gn(e){const t=e.toString(),s={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return s.value.includes("var(--")&&qn(s,Kn),qn(s,Wn),qn(s,Hn),s}function Yn(e){return Gn(e).values}function $n(e){const{values:t,numColors:s,numVars:r,tokenised:a}=Gn(e),n=t.length;return e=>{let t=a;for(let a=0;a<n;a++)t=a<r?t.replace(Kn.token,e[a]):a<r+s?t.replace(Wn.token,In.transform(e[a])):t.replace(Hn.token,Dr(e[a]));return t}}const Jn=e=>"number"===typeof e?0:e;const Qn={test:function(e){var t,s;return isNaN(e)&&Ir(e)&&((null===(t=e.match(Mr))||void 0===t?void 0:t.length)||0)+((null===(s=e.match(Or))||void 0===s?void 0:s.length)||0)>0},parse:Yn,createTransformer:$n,getAnimatableNone:function(e){const t=Yn(e);return $n(e)(t.map(Jn))}},Xn=(e,t)=>s=>"".concat(s>0?t:e);function Zn(e,t){return"number"===typeof e?s=>Ln(e,t,s):In.test(e)?Vn(e,t):e.startsWith("var(")?Xn(e,t):si(e,t)}const ei=(e,t)=>{const s=[...e],r=s.length,a=e.map((e,s)=>Zn(e,t[s]));return e=>{for(let t=0;t<r;t++)s[t]=a[t](e);return s}},ti=(e,t)=>{const s=(0,Ie.A)((0,Ie.A)({},e),t),r={};for(const a in s)void 0!==e[a]&&void 0!==t[a]&&(r[a]=Zn(e[a],t[a]));return e=>{for(const t in r)s[t]=r[t](e);return s}},si=(e,t)=>{const s=Qn.createTransformer(t),r=Gn(e),a=Gn(t);return r.numVars===a.numVars&&r.numColors===a.numColors&&r.numNumbers>=a.numNumbers?Fa(ei(r.values,a.values),s):(an(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),Xn(e,t))},ri=(e,t,s)=>{const r=t-e;return 0===r?1:(s-e)/r},ai=(e,t)=>s=>Ln(e,t,s);function ni(e,t,s){const r=[],a=s||("number"===typeof(n=e[0])?ai:"string"===typeof n?In.test(n)?Vn:si:Array.isArray(n)?ei:"object"===typeof n?ti:ai);var n;const i=e.length-1;for(let o=0;o<i;o++){let s=a(e[o],e[o+1]);if(t){const e=Array.isArray(t)?t[o]||ka:t;s=Fa(e,s)}r.push(s)}return r}function ii(e,t){let{clamp:s=!0,ease:r,mixer:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e.length;if(nn(n===t.length,"Both input and output ranges must be the same length"),1===n)return()=>t[0];e[0]>e[n-1]&&(e=[...e].reverse(),t=[...t].reverse());const i=ni(t,r,a),o=i.length,l=t=>{let s=0;if(o>1)for(;s<e.length-2&&!(t<e[s+1]);s++);const r=ri(e[s],e[s+1],t);return i[s](r)};return s?t=>l(_r(e[0],e[n-1],t)):l}function oi(e){const t=[0];return function(e,t){const s=e[e.length-1];for(let r=1;r<=t;r++){const a=ri(0,t,r);e.push(Ln(s,1,a))}}(t,e.length-1),t}function li(e){let{duration:t=300,keyframes:s,times:r,ease:a="easeInOut"}=e;const n=(e=>Array.isArray(e)&&"number"!==typeof e[0])(a)?a.map(Tn):Tn(a),i={done:!1,value:s[0]},o=function(e,t){return e.map(e=>e*t)}(r&&r.length===s.length?r:oi(s),t),l=ii(o,s,{ease:Array.isArray(n)?n:(c=s,d=n,c.map(()=>d||bn).splice(0,c.length-1))});var c,d;return{calculatedDuration:t,next:e=>(i.value=l(e),i.done=e>=t,i)}}function ci(e,t){return t?e*(1e3/t):0}function di(e,t,s){const r=Math.max(t-5,0);return ci(s-e(r),t-r)}const ui=.001;function hi(e){let t,s,{duration:r=800,bounce:a=.25,velocity:n=0,mass:i=1}=e;an(r<=on(10),"Spring duration must be 10 seconds or less");let o=1-a;o=_r(.05,1,o),r=_r(.01,10,ln(r)),o<1?(t=e=>{const t=e*o,s=t*r,a=t-n,i=pi(e,o),l=Math.exp(-s);return ui-a/i*l},s=e=>{const s=e*o*r,a=s*n+n,i=Math.pow(o,2)*Math.pow(e,2)*r,l=Math.exp(-s),c=pi(Math.pow(e,2),o);return(-t(e)+ui>0?-1:1)*((a-i)*l)/c}):(t=e=>Math.exp(-e*r)*((e-n)*r+1)-.001,s=e=>Math.exp(-e*r)*(r*r*(n-e)));const l=function(e,t,s){let r=s;for(let a=1;a<mi;a++)r-=e(r)/t(r);return r}(t,s,5/r);if(r=on(r),isNaN(l))return{stiffness:100,damping:10,duration:r};{const e=Math.pow(l,2)*i;return{stiffness:e,damping:2*o*Math.sqrt(i*e),duration:r}}}const mi=12;function pi(e,t){return e*Math.sqrt(1-t*t)}const xi=["keyframes","restDelta","restSpeed"],gi=["duration","bounce"],fi=["stiffness","damping","mass"];function yi(e,t){return t.some(t=>void 0!==e[t])}function bi(e){let{keyframes:t,restDelta:s,restSpeed:r}=e,a=(0,ta.A)(e,xi);const n=t[0],i=t[t.length-1],o={done:!1,value:n},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:m}=function(e){let t=(0,Ie.A)({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!yi(e,fi)&&yi(e,gi)){const s=hi(e);t=(0,Ie.A)((0,Ie.A)((0,Ie.A)({},t),s),{},{mass:1}),t.isResolvedFromDuration=!0}return t}((0,Ie.A)((0,Ie.A)({},a),{},{velocity:-ln(a.velocity||0)})),p=h||0,x=c/(2*Math.sqrt(l*d)),g=i-n,f=ln(Math.sqrt(l/d)),y=Math.abs(g)<5;let b;if(r||(r=y?.01:2),s||(s=y?.005:.5),x<1){const e=pi(f,x);b=t=>{const s=Math.exp(-x*f*t);return i-s*((p+x*f*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===x)b=e=>i-Math.exp(-f*e)*(g+(p+f*g)*e);else{const e=f*Math.sqrt(x*x-1);b=t=>{const s=Math.exp(-x*f*t),r=Math.min(e*t,300);return i-s*((p+x*f*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}return{calculatedDuration:m&&u||null,next:e=>{const t=b(e);if(m)o.done=e>=u;else{let a=p;0!==e&&(a=x<1?di(b,e,t):0);const n=Math.abs(a)<=r,l=Math.abs(i-t)<=s;o.done=n&&l}return o.value=o.done?i:t,o}}}function vi(e){let{keyframes:t,velocity:s=0,power:r=.8,timeConstant:a=325,bounceDamping:n=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}=e;const h=t[0],m={done:!1,value:h},p=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let x=r*s;const g=h+x,f=void 0===o?g:o(g);f!==g&&(x=f-h);const y=e=>-x*Math.exp(-e/a),b=e=>f+y(e),v=e=>{const t=y(e),s=b(e);m.done=Math.abs(t)<=d,m.value=m.done?f:s};let j,N;const w=e=>{var t;(t=m.value,void 0!==l&&t<l||void 0!==c&&t>c)&&(j=e,N=bi({keyframes:[m.value,p(m.value)],velocity:di(b,e,m.value),damping:n,stiffness:i,restDelta:d,restSpeed:u}))};return w(0),{calculatedDuration:null,next:e=>{let t=!1;return N||void 0!==j||(t=!0,v(e),w(e)),void 0!==j&&e>j?N.next(e-j):(!t&&v(e),m)}}}const ji=e=>{const t=t=>{let{timestamp:s}=t;return e(s)};return{start:()=>Ca.update(t,!0),stop:()=>_a(t),now:()=>Ta.isProcessing?Ta.timestamp:performance.now()}};function Ni(e){let t=0;let s=e.next(t);for(;!s.done&&t<2e4;)t+=50,s=e.next(t);return t>=2e4?1/0:t}const wi=["autoplay","delay","driver","keyframes","type","repeat","repeatDelay","repeatType","onPlay","onStop","onComplete","onUpdate"],ki={decay:vi,inertia:vi,tween:li,keyframes:li,spring:bi};function Ai(e){let t,s,{autoplay:r=!0,delay:a=0,driver:n=ji,keyframes:i,type:o="keyframes",repeat:l=0,repeatDelay:c=0,repeatType:d="loop",onPlay:u,onStop:h,onComplete:m,onUpdate:p}=e,x=(0,ta.A)(e,wi),g=1,f=!1;const y=()=>{s=new Promise(e=>{t=e})};let b;y();const v=ki[o]||li;let j;v!==li&&"number"!==typeof i[0]&&(j=ii([0,100],i,{clamp:!1}),i=[0,100]);const N=v((0,Ie.A)((0,Ie.A)({},x),{},{keyframes:i}));let w;"mirror"===d&&(w=v((0,Ie.A)((0,Ie.A)({},x),{},{keyframes:[...i].reverse(),velocity:-(x.velocity||0)})));let k="idle",A=null,S=null,C=null;null===N.calculatedDuration&&l&&(N.calculatedDuration=Ni(N));const{calculatedDuration:_}=N;let T=1/0,P=1/0;null!==_&&(T=_+c,P=T*(l+1)-c);let E=0;const D=e=>{if(null===S)return;g>0&&(S=Math.min(S,e)),g<0&&(S=Math.min(e-P/g,S)),E=null!==A?A:Math.round(e-S)*g;const t=E-a*(g>=0?1:-1),s=g>=0?t<0:t>P;E=Math.max(t,0),"finished"===k&&null===A&&(E=P);let r=E,n=N;if(l){const e=Math.min(E,P)/T;let t=Math.floor(e),s=e%1;!s&&e>=1&&(s=1),1===s&&t--,t=Math.min(t,l+1);Boolean(t%2)&&("reverse"===d?(s=1-s,c&&(s-=c/T)):"mirror"===d&&(n=w)),r=_r(0,1,s)*T}const o=s?{done:!1,value:i[0]}:n.next(r);j&&(o.value=j(o.value));let{done:u}=o;s||null===_||(u=g>=0?E>=P:E<=0);const h=null===A&&("finished"===k||"running"===k&&u);return p&&p(o.value),h&&R(),o},M=()=>{b&&b.stop(),b=void 0},O=()=>{k="idle",M(),t(),y(),S=C=null},R=()=>{k="finished",m&&m(),M(),t()},I=()=>{if(f)return;b||(b=n(D));const e=b.now();u&&u(),null!==A?S=e-A:S&&"finished"!==k||(S=e),"finished"===k&&y(),C=S,A=null,k="running",b.start()};r&&I();const L={then:(e,t)=>s.then(e,t),get time(){return ln(E)},set time(e){e=on(e),E=e,null===A&&b&&0!==g?S=b.now()-e/g:A=e},get duration(){const e=null===N.calculatedDuration?Ni(N):N.calculatedDuration;return ln(e)},get speed(){return g},set speed(e){e!==g&&b&&(g=e,L.time=ln(E))},get state(){return k},play:I,pause:()=>{k="paused",A=E},stop:()=>{f=!0,"idle"!==k&&(k="idle",h&&h(),O())},cancel:()=>{null!==C&&D(C),O()},complete:()=>{k="finished"},sample:e=>(S=0,D(e))};return L}const Si=["onUpdate","onComplete"],Ci=function(e){let t;return()=>(void 0===t&&(t=e()),t)}(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),_i=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function Ti(e,t,s){let{onUpdate:r,onComplete:a}=s,n=(0,ta.A)(s,Si);if(!(Ci()&&_i.has(t)&&!n.repeatDelay&&"mirror"!==n.repeatType&&0!==n.damping&&"inertia"!==n.type))return!1;let i,o,l=!1,c=!1;const d=()=>{o=new Promise(e=>{i=e})};d();let{keyframes:u,duration:h=300,ease:m,times:p}=n;if(((e,t)=>"spring"===t.type||"backgroundColor"===e||!un(t.ease))(t,n)){const e=Ai((0,Ie.A)((0,Ie.A)({},n),{},{repeat:0,delay:0}));let t={done:!1,value:u[0]};const s=[];let r=0;for(;!t.done&&r<2e4;)t=e.sample(r),s.push(t.value),r+=10;p=void 0,u=s,h=r-10,m="linear"}const x=function(e,t,s){let{delay:r=0,duration:a,repeat:n=0,repeatType:i="loop",ease:o,times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:s};l&&(c.offset=l);const d=pn(o);return Array.isArray(d)&&(c.easing=d),e.animate(c,{delay:r,duration:a,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:n+1,direction:"reverse"===i?"alternate":"normal"})}(e.owner.current,t,u,(0,Ie.A)((0,Ie.A)({},n),{},{duration:h,ease:m,times:p})),g=()=>{c=!1,x.cancel()},f=()=>{c=!0,Ca.update(g),i(),d()};x.onfinish=()=>{c||(e.set(function(e,t){let{repeat:s,repeatType:r="loop"}=t;return e[s&&"loop"!==r&&s%2===1?0:e.length-1]}(u,n)),a&&a(),f())};const y={then:(e,t)=>o.then(e,t),attachTimeline:e=>(x.timeline=e,x.onfinish=null,ka),get time(){return ln(x.currentTime||0)},set time(e){x.currentTime=on(e)},get speed(){return x.playbackRate},set speed(e){x.playbackRate=e},get duration(){return ln(h)},play:()=>{l||(x.play(),_a(g))},pause:()=>x.pause(),stop:()=>{if(l=!0,"idle"===x.playState)return;const{currentTime:t}=x;if(t){const s=Ai((0,Ie.A)((0,Ie.A)({},n),{},{autoplay:!1}));e.setWithVelocity(s.sample(t-10).value,s.sample(t).value,10)}f()},complete:()=>{c||x.finish()},cancel:f};return y}const Pi={type:"spring",stiffness:500,damping:25,restSpeed:10},Ei={type:"keyframes",duration:.8},Di={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Mi=(e,t)=>{let{keyframes:s}=t;return s.length>2?Ei:br.has(e)?e.startsWith("scale")?(e=>({type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}))(s[1]):Pi:Di},Oi=(e,t)=>"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!Qn.test(t)&&"0"!==t||t.startsWith("url("))),Ri=new Set(["brightness","contrast","saturate","opacity"]);function Ii(e){const[t,s]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=s.match(Mr)||[];if(!r)return e;const a=s.replace(r,"");let n=Ri.has(t)?1:0;return r!==s&&(n*=100),t+"("+n+a+")"}const Li=/([a-z-]*)\(.*?\)/g,Fi=(0,Ie.A)((0,Ie.A)({},Qn),{},{getAnimatableNone:e=>{const t=e.match(Li);return t?t.map(Ii).join(" "):e}}),Bi=(0,Ie.A)((0,Ie.A)({},Hr),{},{color:In,backgroundColor:In,outlineColor:In,fill:In,stroke:In,borderColor:In,borderTopColor:In,borderRightColor:In,borderBottomColor:In,borderLeftColor:In,filter:Fi,WebkitFilter:Fi}),zi=e=>Bi[e];function Ui(e,t){let s=zi(e);return s!==Fi&&(s=Qn),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const Vi=e=>/^0[^.\s]+$/.test(e);function Ki(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||Vi(e):void 0}const Wi=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];function Hi(e,t){return e[t]||e.default||e}const qi=!1,Gi=function(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return a=>{const n=Hi(r,e)||{},i=n.delay||r.delay||0;let{elapsed:o=0}=r;o-=on(i);const l=function(e,t,s,r){const a=Oi(t,s);let n;n=Array.isArray(s)?[...s]:[null,s];const i=void 0!==r.from?r.from:e.get();let o;const l=[];for(let c=0;c<n.length;c++)null===n[c]&&(n[c]=0===c?i:n[c-1]),Ki(n[c])&&l.push(c),"string"===typeof n[c]&&"none"!==n[c]&&"0"!==n[c]&&(o=n[c]);if(a&&l.length&&o)for(let c=0;c<l.length;c++)n[l[c]]=Ui(t,o);return n}(t,e,s,n),c=l[0],d=l[l.length-1],u=Oi(e,c),h=Oi(e,d);an(u===h,"You are trying to animate ".concat(e,' from "').concat(c,'" to "').concat(d,'". ').concat(c," is not an animatable value - to enable this animation set ").concat(c," to a value animatable to ").concat(d," via the `style` property."));let m=(0,Ie.A)((0,Ie.A)({keyframes:l,velocity:t.getVelocity(),ease:"easeOut"},n),{},{delay:-o,onUpdate:e=>{t.set(e),n.onUpdate&&n.onUpdate(e)},onComplete:()=>{a(),n.onComplete&&n.onComplete()}});if(function(e){let{when:t,delay:s,delayChildren:r,staggerChildren:a,staggerDirection:n,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d}=e,u=(0,ta.A)(e,Wi);return!!Object.keys(u).length}(n)||(m=(0,Ie.A)((0,Ie.A)({},m),Mi(e,m))),m.duration&&(m.duration=on(m.duration)),m.repeatDelay&&(m.repeatDelay=on(m.repeatDelay)),!u||!h||cn||!1===n.type||qi)return function(e){let{keyframes:t,delay:s,onUpdate:r,onComplete:a}=e;const n=()=>(r&&r(t[t.length-1]),a&&a(),{time:0,speed:1,duration:0,play:ka,pause:ka,stop:ka,then:e=>(e(),Promise.resolve()),cancel:ka,complete:ka});return s?Ai({keyframes:[0,1],duration:0,delay:s,onComplete:n}):n()}(cn?(0,Ie.A)((0,Ie.A)({},m),{},{delay:0}):m);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const s=Ti(t,e,m);if(s)return s}return Ai(m)}};function Yi(e){return Boolean(jr(e)&&e.add)}const $i=e=>/^\-?\d*\.?\d+$/.test(e);function Ji(e,t){-1===e.indexOf(t)&&e.push(t)}function Qi(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}class Xi{constructor(){this.subscriptions=[]}add(e){return Ji(this.subscriptions,e),()=>Qi(this.subscriptions,e)}notify(e,t,s){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,s);else for(let a=0;a<r;a++){const r=this.subscriptions[a];r&&r(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Zi={current:void 0};class eo{constructor(e){var t=this;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){let s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.prev=t.current,t.current=e;const{delta:r,timestamp:a}=Ta;t.lastUpdated!==a&&(t.timeDelta=r,t.lastUpdated=a,Ca.postRender(t.scheduleVelocityCheck)),t.prev!==t.current&&t.events.change&&t.events.change.notify(t.current),t.events.velocityChange&&t.events.velocityChange.notify(t.getVelocity()),s&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.scheduleVelocityCheck=()=>Ca.postRender(this.velocityCheck),this.velocityCheck=e=>{let{timestamp:t}=e;t!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(e=>!isNaN(parseFloat(e)))(this.current),this.owner=s.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Xi);const s=this.events[e].add(t);return"change"===e?()=>{s(),Ca.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,s){this.set(t),this.prev=e,this.timeDelta=s}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Zi.current&&Zi.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?ci(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function to(e,t){return new eo(e,t)}const so=e=>t=>t.test(e),ro=[Tr,zr,Br,Fr,Vr,Ur,{test:e=>"auto"===e,parse:e=>e}],ao=e=>ro.find(so(e)),no=[...ro,In,Qn],io=e=>no.find(so(e)),oo=["transitionEnd","transition"];function lo(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,to(s))}function co(e,t){const s=rn(e,t);let r=s?e.makeTargetAnimatable(s,!1):{},{transitionEnd:a={},transition:n={}}=r,i=(0,ta.A)(r,oo);i=(0,Ie.A)((0,Ie.A)({},i),a);for(const o in i){lo(e,o,ba(i[o]))}}function uo(e,t){if(!t)return;return(t[e]||t.default||t).from}const ho=["transition","transitionEnd"];function mo(e,t){let{protectedKeys:s,needsAnimating:r}=e;const a=s.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,a}function po(e,t){const s=e.get();if(!Array.isArray(t))return s!==t;for(let r=0;r<t.length;r++)if(t[r]!==s)return!0}function xo(e,t){let{delay:s=0,transitionOverride:r,type:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.makeTargetAnimatable(t),{transition:i=e.getDefaultTransition(),transitionEnd:o}=n,l=(0,ta.A)(n,ho);const c=e.getValue("willChange");r&&(i=r);const d=[],u=a&&e.animationState&&e.animationState.getState()[a];for(const h in l){const t=e.getValue(h),r=l[h];if(!t||void 0===r||u&&mo(u,h))continue;const a=(0,Ie.A)({delay:s,elapsed:0},Hi(i||{},h));if(window.HandoffAppearAnimations){const s=e.getProps()[Qs];if(s){const e=window.HandoffAppearAnimations(s,h,t,Ca);null!==e&&(a.elapsed=e,a.isHandoff=!0)}}let n=!a.isHandoff&&!po(t,r);if("spring"===a.type&&(t.getVelocity()||a.velocity)&&(n=!1),t.animation&&(n=!1),n)continue;t.start(Gi(h,t,r,e.shouldReduceMotion&&br.has(h)?{type:!1}:a));const o=t.animation;Yi(c)&&(c.add(h),o.then(()=>c.remove(h))),d.push(o)}return o&&Promise.all(d).then(()=>{o&&co(e,o)}),d}function go(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=rn(e,t,s.custom);let{transition:a=e.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(a=s.transitionOverride);const n=r?()=>Promise.all(xo(e,r,s)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:n=0,staggerChildren:i,staggerDirection:o}=a;return function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,n=arguments.length>5?arguments[5]:void 0;const i=[],o=(e.variantChildren.size-1)*r,l=1===a?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return o-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(fo).forEach((e,r)=>{e.notify("AnimationStart",t),i.push(go(e,t,(0,Ie.A)((0,Ie.A)({},n),{},{delay:s+l(r)})).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(i)}(e,t,n+r,i,o,s)}:()=>Promise.resolve(),{when:o}=a;if(o){const[e,t]="beforeChildren"===o?[n,i]:[i,n];return e().then(()=>t())}return Promise.all([n(),i(s.delay)])}function fo(e,t){return e.sortNodePosition(t)}const yo=["transition","transitionEnd"],bo=[...tr].reverse(),vo=tr.length;function jo(e){return t=>Promise.all(t.map(t=>{let{animation:s,options:r}=t;return function(e,t){let s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const a=t.map(t=>go(e,t,r));s=Promise.all(a)}else if("string"===typeof t)s=go(e,t,r);else{const a="function"===typeof t?rn(e,t,r.custom):t;s=Promise.all(xo(e,a,r))}return s.then(()=>e.notify("AnimationComplete",t))}(e,s,r)}))}function No(e){let t=jo(e);const s={animate:ko(!0),whileInView:ko(),whileHover:ko(),whileTap:ko(),whileDrag:ko(),whileFocus:ko(),exit:ko()};let r=!0;const a=(t,s)=>{const r=rn(e,s);if(r){const{transition:e,transitionEnd:s}=r,a=(0,ta.A)(r,yo);t=(0,Ie.A)((0,Ie.A)((0,Ie.A)({},t),a),s)}return t};function n(n,i){const o=e.getProps(),l=e.getVariantContext(!0)||{},c=[],d=new Set;let u={},h=1/0;for(let t=0;t<vo;t++){const m=bo[t],p=s[m],x=void 0!==o[m]?o[m]:l[m],g=Zs(x),f=m===i?p.isActive:null;!1===f&&(h=t);let y=x===l[m]&&x!==o[m]&&g;if(y&&r&&e.manuallyAnimateOnMount&&(y=!1),p.protectedKeys=(0,Ie.A)({},u),!p.isActive&&null===f||!x&&!p.prevProp||er(x)||"boolean"===typeof x)continue;let b=wo(p.prevProp,x)||m===i&&p.isActive&&!y&&g||t>h&&g,v=!1;const j=Array.isArray(x)?x:[x];let N=j.reduce(a,{});!1===f&&(N={});const{prevResolvedValues:w={}}=p,k=(0,Ie.A)((0,Ie.A)({},w),N),A=e=>{b=!0,d.has(e)&&(v=!0,d.delete(e)),p.needsAnimating[e]=!0};for(const e in k){const t=N[e],s=w[e];if(u.hasOwnProperty(e))continue;let r=!1;r=ya(t)&&ya(s)?!sn(t,s):t!==s,r?void 0!==t?A(e):d.add(e):void 0!==t&&d.has(e)?A(e):p.protectedKeys[e]=!0}p.prevProp=x,p.prevResolvedValues=N,p.isActive&&(u=(0,Ie.A)((0,Ie.A)({},u),N)),r&&e.blockInitialAnimation&&(b=!1),!b||y&&!v||c.push(...j.map(e=>({animation:e,options:(0,Ie.A)({type:m},n)})))}if(d.size){const t={};d.forEach(s=>{const r=e.getBaseTarget(s);void 0!==r&&(t[s]=r)}),c.push({animation:t})}let m=Boolean(c.length);return!r||!1!==o.initial&&o.initial!==o.animate||e.manuallyAnimateOnMount||(m=!1),r=!1,m?t(c):Promise.resolve()}return{animateChanges:n,setActive:function(t,r,a){var i;if(s[t].isActive===r)return Promise.resolve();null===(i=e.variantChildren)||void 0===i||i.forEach(e=>{var s;return null===(s=e.animationState)||void 0===s?void 0:s.setActive(t,r)}),s[t].isActive=r;const o=n(a,t);for(const e in s)s[e].protectedKeys={};return o},setAnimateFunction:function(s){t=s(e)},getState:()=>s}}function wo(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!sn(t,e)}function ko(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let Ao=0;const So={animation:{Feature:class extends Wa{constructor(e){super(e),e.animationState||(e.animationState=No(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),er(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends Wa{constructor(){super(...arguments),this.id=Ao++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const a=this.node.animationState.setActive("exit",!e,{custom:null!==s&&void 0!==s?s:this.node.getProps().custom});t&&!e&&a.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},Co=(e,t)=>Math.abs(e-t);class _o{constructor(e,t){let{transformPagePoint:s,contextWindow:r,dragSnapToOrigin:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=Eo(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,s=function(e,t){const s=Co(e.x,t.x),r=Co(e.y,t.y);return Math.sqrt(s**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!s)return;const{point:r}=e,{timestamp:a}=Ta;this.history.push((0,Ie.A)((0,Ie.A)({},r),{},{timestamp:a}));const{onStart:n,onMove:i}=this.handlers;t||(n&&n(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=To(t,this.transformPagePoint),Ca.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:s,onSessionEnd:r,resumeAnimation:a}=this.handlers;if(this.dragSnapToOrigin&&a&&a(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const n=Eo("pointercancel"===e.type?this.lastMoveEventInfo:To(t,this.transformPagePoint),this.history);this.startEvent&&s&&s(e,n),r&&r(e,n)},!Oa(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=s,this.contextWindow=r||window;const n=To(Ra(e),this.transformPagePoint),{point:i}=n,{timestamp:o}=Ta;this.history=[(0,Ie.A)((0,Ie.A)({},i),{},{timestamp:o})];const{onSessionStart:l}=t;l&&l(e,Eo(n,this.history)),this.removeListeners=Fa(Ia(this.contextWindow,"pointermove",this.handlePointerMove),Ia(this.contextWindow,"pointerup",this.handlePointerUp),Ia(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),_a(this.updatePoint)}}function To(e,t){return t?{point:t(e.point)}:e}function Po(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Eo(e,t){let{point:s}=e;return{point:s,delta:Po(s,Mo(t)),offset:Po(s,Do(t)),velocity:Oo(t,.1)}}function Do(e){return e[0]}function Mo(e){return e[e.length-1]}function Oo(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,r=null;const a=Mo(e);for(;s>=0&&(r=e[s],!(a.timestamp-r.timestamp>on(t)));)s--;if(!r)return{x:0,y:0};const n=ln(a.timestamp-r.timestamp);if(0===n)return{x:0,y:0};const i={x:(a.x-r.x)/n,y:(a.y-r.y)/n};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Ro(e){return e.max-e.min}function Io(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=s}function Lo(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=Ln(t.min,t.max,e.origin),e.scale=Ro(s)/Ro(t),(Io(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Ln(s.min,s.max,e.origin)-e.originPoint,(Io(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Fo(e,t,s,r){Lo(e.x,t.x,s.x,r?r.originX:void 0),Lo(e.y,t.y,s.y,r?r.originY:void 0)}function Bo(e,t,s){e.min=s.min+t.min,e.max=e.min+Ro(t)}function zo(e,t,s){e.min=t.min-s.min,e.max=e.min+Ro(t)}function Uo(e,t,s){zo(e.x,t.x,s.x),zo(e.y,t.y,s.y)}function Vo(e,t,s){return{min:void 0!==t?e.min+t:void 0,max:void 0!==s?e.max+s-(e.max-e.min):void 0}}function Ko(e,t){let s=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,r]=[r,s]),{min:s,max:r}}const Wo=.35;function Ho(e,t,s){return{min:qo(e,t),max:qo(e,s)}}function qo(e,t){return"number"===typeof e?e:e[t]||0}const Go=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Yo(e){return[e("x"),e("y")]}function $o(e){let{top:t,left:s,right:r,bottom:a}=e;return{x:{min:s,max:r},y:{min:t,max:a}}}function Jo(e){return void 0===e||1===e}function Qo(e){let{scale:t,scaleX:s,scaleY:r}=e;return!Jo(t)||!Jo(s)||!Jo(r)}function Xo(e){return Qo(e)||Zo(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Zo(e){return el(e.x)||el(e.y)}function el(e){return e&&"0%"!==e}function tl(e,t,s){return s+t*(e-s)}function sl(e,t,s,r,a){return void 0!==a&&(e=tl(e,a,r)),tl(e,s,r)+t}function rl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;e.min=sl(e.min,t,s,r,a),e.max=sl(e.max,t,s,r,a)}function al(e,t){let{x:s,y:r}=t;rl(e.x,s.translate,s.scale,s.originPoint),rl(e.y,r.translate,r.scale,r.originPoint)}function nl(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function il(e,t){e.min=e.min+t,e.max=e.max+t}function ol(e,t,s){let[r,a,n]=s;const i=void 0!==t[n]?t[n]:.5,o=Ln(e.min,e.max,i);rl(e,t[r],t[a],o,t.scale)}const ll=["x","scaleX","originX"],cl=["y","scaleY","originY"];function dl(e,t){ol(e.x,t,ll),ol(e.y,t,cl)}function ul(e,t){return $o(function(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const hl=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},ml=new WeakMap;class pl{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:s}=this.visualElement;if(s&&!1===s.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new _o(e,{onSessionStart:e=>{const{dragSnapToOrigin:s}=this.getProps();s?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Ra(e,"page").point)},onStart:(e,t)=>{const{drag:s,dragPropagation:r,onDragStart:a}=this.getProps();if(s&&!r&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Va(s),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Yo(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Br.test(t)){const{projection:s}=this.visualElement;if(s&&s.layout){const r=s.layout.layoutBox[e];if(r){t=Ro(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),a&&Ca.update(()=>a(e,t),!1,!0);const{animationState:n}=this.visualElement;n&&n.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:s,dragDirectionLock:r,onDirectionLock:a,onDrag:n}=this.getProps();if(!s&&!this.openGlobalLock)return;const{offset:i}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,s=null;Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x");return s}(i),void(null!==this.currentDirection&&a&&a(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),n&&n(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>Yo(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:hl(this.visualElement)})}stop(e,t){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:a}=this.getProps();a&&Ca.update(()=>a(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:r}=this.getProps();if(!s||!xl(e,r,this.currentDirection))return;const a=this.getAxisMotionValue(e);let n=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(n=function(e,t,s){let{min:r,max:a}=t;return void 0!==r&&e<r?e=s?Ln(r,e,s.min):Math.max(e,r):void 0!==a&&e>a&&(e=s?Ln(a,e,s.max):Math.min(e,a)),e}(n,this.constraints[e],this.elastic[e])),a.set(n)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,a=this.constraints;t&&Xs(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:s,left:r,bottom:a,right:n}=t;return{x:Vo(e.x,r,n),y:Vo(e.y,s,a)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wo;return!1===e?e=0:!0===e&&(e=Wo),{x:Ho(e,"left","right"),y:Ho(e,"top","bottom")}}(s),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Yo(e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const s={};return void 0!==t.min&&(s.min=t.min-e.min),void 0!==t.max&&(s.max=t.max-e.min),s}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Xs(e))return!1;const s=e.current;nn(null!==s,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=function(e,t,s){const r=ul(e,s),{scroll:a}=t;return a&&(il(r.x,a.offset.x),il(r.y,a.offset.y)),r}(s,r.root,this.visualElement.getTransformPagePoint());let n=function(e,t){return{x:Ko(e.x,t.x),y:Ko(e.y,t.y)}}(r.layout.layoutBox,a);if(t){const e=t(function(e){let{x:t,y:s}=e;return{top:s.min,right:t.max,bottom:s.max,left:t.min}}(n));this.hasMutatedConstraints=!!e,e&&(n=$o(e))}return n}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:r,dragTransition:a,dragSnapToOrigin:n,onDragTransitionEnd:i}=this.getProps(),o=this.constraints||{},l=Yo(i=>{if(!xl(i,t,this.currentDirection))return;let l=o&&o[i]||{};n&&(l={min:0,max:0});const c=r?200:1e6,d=r?40:1e7,u=(0,Ie.A)((0,Ie.A)({type:"inertia",velocity:s?e[i]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},a),l);return this.startAxisValueAnimation(i,u)});return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return s.start(Gi(e,s,0,t))}stopAnimation(){Yo(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Yo(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),s=this.visualElement.getProps(),r=s[t];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Yo(t=>{const{drag:s}=this.getProps();if(!xl(t,s,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(t);if(r&&r.layout){const{min:s,max:n}=r.layout.layoutBox[t];a.set(e[t]-Ln(s,n,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!Xs(t)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Yo(e=>{const t=this.getAxisMotionValue(e);if(t){const s=t.get();r[e]=function(e,t){let s=.5;const r=Ro(e),a=Ro(t);return a>r?s=ri(t.min,t.max-r,e.min):r>a&&(s=ri(e.min,e.max-a,t.min)),_r(0,1,s)}({min:s,max:s},this.constraints[e])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Yo(t=>{if(!xl(t,e,null))return;const s=this.getAxisMotionValue(t),{min:a,max:n}=this.constraints[t];s.set(Ln(a,n,r[t]))})}addListeners(){if(!this.visualElement.current)return;ml.set(this.visualElement,this);const e=Ia(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:s=!0}=this.getProps();t&&s&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();Xs(e)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",t);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),t();const a=Ma(window,"resize",()=>this.scalePositionWithinConstraints()),n=s.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:s}=e;this.isDragging&&s&&(Yo(e=>{const s=this.getAxisMotionValue(e);s&&(this.originPoint[e]+=t[e].translate,s.set(s.get()+t[e].translate))}),this.visualElement.render())});return()=>{a(),e(),r(),n&&n()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:n=Wo,dragMomentum:i=!0}=e;return(0,Ie.A)((0,Ie.A)({},e),{},{drag:t,dragDirectionLock:s,dragPropagation:r,dragConstraints:a,dragElastic:n,dragMomentum:i})}}function xl(e,t,s){return(!0===t||t===e)&&(null===s||s===e)}const gl=e=>(t,s)=>{e&&Ca.update(()=>e(t,s))};const fl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function yl(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const bl={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!zr.test(e))return e;e=parseFloat(e)}const s=yl(e,t.target.x),r=yl(e,t.target.y);return"".concat(s,"% ").concat(r,"%")}},vl={correct:(e,t)=>{let{treeScale:s,projectionDelta:r}=t;const a=e,n=Qn.parse(e);if(n.length>5)return a;const i=Qn.createTransformer(e),o="number"!==typeof n[0]?1:0,l=r.x.scale*s.x,c=r.y.scale*s.y;n[0+o]/=l,n[1+o]/=c;const d=Ln(l,c,.5);return"number"===typeof n[2+o]&&(n[2+o]/=d),"number"===typeof n[3+o]&&(n[3+o]/=d),i(n)}};class jl extends r.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:r}=this.props,{projection:a}=e;var n;n=wl,Object.assign(fr,n),a&&(t.group&&t.group.add(a),s&&s.register&&r&&s.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions((0,Ie.A)((0,Ie.A)({},a.options),{},{onExitComplete:()=>this.safeToRemove()}))),fl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:r,isPresent:a}=this.props,n=s.projection;return n?(n.isPresent=a,r||e.layoutDependency!==t||void 0===t?n.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?n.promote():n.relegate()||Ca.postRender(()=>{const e=n.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Nl(e){const[t,s]=function(){const e=(0,r.useContext)(qs);if(null===e)return[!0,null];const{isPresent:t,onExitComplete:s,register:a}=e,n=(0,r.useId)();return(0,r.useEffect)(()=>a(n),[]),!t&&s?[!1,()=>s&&s(n)]:[!0]}(),a=(0,r.useContext)(cr);return r.createElement(jl,(0,Ie.A)((0,Ie.A)({},e),{},{layoutGroup:a,switchLayoutGroup:(0,r.useContext)(dr),isPresent:t,safeToRemove:s}))}const wl={borderRadius:(0,Ie.A)((0,Ie.A)({},bl),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:bl,borderTopRightRadius:bl,borderBottomLeftRadius:bl,borderBottomRightRadius:bl,boxShadow:vl},kl=["TopLeft","TopRight","BottomLeft","BottomRight"],Al=kl.length,Sl=e=>"string"===typeof e?parseFloat(e):e,Cl=e=>"number"===typeof e||zr.test(e);function _l(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Tl=El(0,.5,wn),Pl=El(.5,.95,ka);function El(e,t,s){return r=>r<e?0:r>t?1:s(ri(e,t,r))}function Dl(e,t){e.min=t.min,e.max=t.max}function Ml(e,t){Dl(e.x,t.x),Dl(e.y,t.y)}function Ol(e,t,s,r,a){return e=tl(e-=t,1/s,r),void 0!==a&&(e=tl(e,1/a,r)),e}function Rl(e,t,s,r,a){let[n,i,o]=s;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4?arguments[4]:void 0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;Br.test(t)&&(t=parseFloat(t),t=Ln(i.min,i.max,t/100)-i.min);if("number"!==typeof t)return;let o=Ln(n.min,n.max,r);e===n&&(o-=t),e.min=Ol(e.min,t,s,o,a),e.max=Ol(e.max,t,s,o,a)}(e,t[n],t[i],t[o],t.scale,r,a)}const Il=["x","scaleX","originX"],Ll=["y","scaleY","originY"];function Fl(e,t,s,r){Rl(e.x,t,Il,s?s.x:void 0,r?r.x:void 0),Rl(e.y,t,Ll,s?s.y:void 0,r?r.y:void 0)}function Bl(e){return 0===e.translate&&1===e.scale}function zl(e){return Bl(e.x)&&Bl(e.y)}function Ul(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Vl(e){return Ro(e.x)/Ro(e.y)}class Kl{constructor(){this.members=[]}add(e){Ji(this.members,e),e.scheduleRender()}remove(e){if(Qi(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let s;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){s=e;break}}return!!s&&(this.promote(s),!0)}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Wl(e,t,s){let r="";const a=e.x.translate/t.x,n=e.y.translate/t.y;if((a||n)&&(r="translate3d(".concat(a,"px, ").concat(n,"px, 0) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),s){const{rotate:e,rotateX:t,rotateY:a}=s;e&&(r+="rotate(".concat(e,"deg) ")),t&&(r+="rotateX(".concat(t,"deg) ")),a&&(r+="rotateY(".concat(a,"deg) "))}const i=e.x.scale*t.x,o=e.y.scale*t.y;return 1===i&&1===o||(r+="scale(".concat(i,", ").concat(o,")")),r||"none"}const Hl=(e,t)=>e.depth-t.depth;class ql{constructor(){this.children=[],this.isDirty=!1}add(e){Ji(this.children,e),this.isDirty=!0}remove(e){Qi(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Hl),this.isDirty=!1,this.children.forEach(e)}}const Gl=["","X","Y","Z"],Yl={visibility:"hidden"};let $l=0;const Jl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Ql(e){let{attachResizeListener:t,defaultParent:s,measureScroll:r,checkIsScrollRoot:a,resetTransform:n}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===s||void 0===s?void 0:s();this.id=$l++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Jl.totalNodes=Jl.resolvedTargetDeltas=Jl.recalculatedProjection=0,this.nodes.forEach(ec),this.nodes.forEach(oc),this.nodes.forEach(lc),this.nodes.forEach(tc),function(e){window.MotionDebug&&window.MotionDebug.record(e)}(Jl)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let s=0;s<this.path.length;s++)this.path[s].shouldResetTransform=!0;this.root===this&&(this.nodes=new ql)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Xi),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var s=arguments.length,r=new Array(s>1?s-1:0),a=1;a<s;a++)r[a-1]=arguments[a];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var r;this.isSVG=(r=e)instanceof SVGElement&&"svg"!==r.tagName,this.instance=e;const{layoutId:a,layout:n,visualElement:i}=this.options;if(i&&!i.current&&i.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),s&&(n||a)&&(this.isLayoutDirty=!0),t){let s;const r=()=>this.root.updateBlockedByResize=!1;t(e,()=>{this.root.updateBlockedByResize=!0,s&&s(),s=function(e,t){const s=performance.now(),r=a=>{let{timestamp:n}=a;const i=n-s;i>=t&&(_a(r),e(i-t))};return Ca.read(r,!0),()=>_a(r)}(r,250),fl.hasAnimatedSinceResize&&(fl.hasAnimatedSinceResize=!1,this.nodes.forEach(ic))})}a&&this.root.registerSharedNode(a,this),!1!==this.options.animate&&i&&(a||n)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:s,hasRelativeTargetChanged:r,layout:a}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const n=this.options.transition||i.getDefaultTransition()||pc,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=i.getProps(),c=!this.targetLayout||!Ul(this.targetLayout,a)||r,d=!s&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||d||s&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,d);const e=(0,Ie.A)((0,Ie.A)({},Hi(n,"layout")),{},{onPlay:o,onComplete:l});(i.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else s||ic(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=a})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,_a(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(cc),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let a=0;a<this.path.length;a++){const e=this.path[a];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:s}=this.options;if(void 0===t&&!s)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(rc);this.isUpdating||this.nodes.forEach(ac),this.isUpdating=!1,this.nodes.forEach(nc),this.nodes.forEach(Xl),this.nodes.forEach(Zl),this.clearAllSnapshots();const e=performance.now();Ta.delta=_r(0,1e3/60,e-Ta.timestamp),Ta.timestamp=e,Ta.isProcessing=!0,Pa.update.process(Ta),Pa.preRender.process(Ta),Pa.render.process(Ta),Ta.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(sc),this.sharedNodes.forEach(dc)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ca.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ca.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let s=0;s<this.path.length;s++){this.path[s].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:a(this.instance),offset:r(this.instance)})}resetTransform(){if(!n)return;const e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!zl(this.projectionDelta),s=this.getTransformTemplate(),r=s?s(this.latestValues,""):void 0,a=r!==this.prevTransformTemplateValue;e&&(t||Xo(this.latestValues)||a)&&(n(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let s=this.removeElementScroll(t);var r;return e&&(s=this.removeTransform(s)),fc((r=s).x),fc(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:s,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox(),{scroll:s}=this.root;return s&&(il(t.x,s.offset.x),il(t.y,s.offset.y)),t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Ml(t,e);for(let s=0;s<this.path.length;s++){const r=this.path[s],{scroll:a,options:n}=r;if(r!==this.root&&a&&n.layoutScroll){if(a.isRoot){Ml(t,e);const{scroll:s}=this.root;s&&(il(t.x,-s.offset.x),il(t.y,-s.offset.y))}il(t.x,a.offset.x),il(t.y,a.offset.y)}}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s={x:{min:0,max:0},y:{min:0,max:0}};Ml(s,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&dl(s,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Xo(e.latestValues)&&dl(s,e.latestValues)}return Xo(this.latestValues)&&dl(s,this.latestValues),s}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Ml(t,e);for(let s=0;s<this.path.length;s++){const e=this.path[s];if(!e.instance)continue;if(!Xo(e.latestValues))continue;Qo(e.latestValues)&&e.updateSnapshot();const r=Go();Ml(r,e.measurePageBox()),Fl(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return Xo(this.latestValues)&&Fl(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=(0,Ie.A)((0,Ie.A)((0,Ie.A)({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ta.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const s=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=s.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=s.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=s.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==s;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:a,layoutId:n}=this.options;if(this.layout&&(a||n)){if(this.resolvedRelativeTargetAt=Ta.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Uo(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Ml(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),function(e,t,s){Bo(e.x,t.x,s.x),Bo(e.y,t.y,s.y)}(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Ml(this.target,this.layout.layoutBox),al(this.target,this.targetDelta)):Ml(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Uo(this.relativeTargetOrigin,this.target,e.target),Ml(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Jl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Qo(this.parent.latestValues)&&!Zo(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),s=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),s&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===Ta.timestamp&&(r=!1),r)return;const{layout:a,layoutId:n}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!a&&!n)return;Ml(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,o=this.treeScale.y;!function(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=s.length;if(!a)return;let n,i;t.x=t.y=1;for(let o=0;o<a;o++){n=s[o],i=n.projectionDelta;const a=n.instance;a&&a.style&&"contents"===a.style.display||(r&&n.options.layoutScroll&&n.scroll&&n!==n.root&&dl(e,{x:-n.scroll.offset.x,y:-n.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,al(e,i)),r&&Xo(n.latestValues)&&dl(e,n.latestValues))}t.x=nl(t.x),t.y=nl(t.y)}(this.layoutCorrected,this.treeScale,this.path,s),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox);const{target:l}=t;if(!l)return void(this.projectionTransform&&(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});const c=this.projectionTransform;Fo(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=Wl(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===i&&this.treeScale.y===o||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Jl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=this.snapshot,r=s?s.latestValues:{},a=(0,Ie.A)({},this.latestValues),n={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},o=(s?s.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(mc));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const s=t/1e3;uc(n.x,e.x,s),uc(n.y,e.y,s),this.setTargetDelta(n),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Uo(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,s,r){hc(e.x,t.x,s.x,r),hc(e.y,t.y,s.y,r)}(this.relativeTarget,this.relativeTargetOrigin,i,s),u&&function(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}(this.relativeTarget,u)&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),Ml(u,this.relativeTarget)),o&&(this.animationValues=a,function(e,t,s,r,a,n){a?(e.opacity=Ln(0,void 0!==s.opacity?s.opacity:1,Tl(r)),e.opacityExit=Ln(void 0!==t.opacity?t.opacity:1,0,Pl(r))):n&&(e.opacity=Ln(void 0!==t.opacity?t.opacity:1,void 0!==s.opacity?s.opacity:1,r));for(let i=0;i<Al;i++){const a="border".concat(kl[i],"Radius");let n=_l(t,a),o=_l(s,a);void 0===n&&void 0===o||(n||(n=0),o||(o=0),0===n||0===o||Cl(n)===Cl(o)?(e[a]=Math.max(Ln(Sl(n),Sl(o),r),0),(Br.test(o)||Br.test(n))&&(e[a]+="%")):e[a]=o)}(t.rotate||s.rotate)&&(e.rotate=Ln(t.rotate||0,s.rotate||0,r))}(a,r,this.latestValues,s,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=s},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(_a(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ca.update(()=>{fl.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,s){const r=jr(e)?e:to(e);return r.start(Gi("",r,t,s)),r.animation}(0,1e3,(0,Ie.A)((0,Ie.A)({},e),{},{onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:s,layout:r,latestValues:a}=e;if(t&&s&&r){if(this!==e&&this.layout&&r&&yc(this.options.animationType,this.layout.layoutBox,r.layoutBox)){s=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=Ro(this.layout.layoutBox.x);s.x.min=e.target.x.min,s.x.max=s.x.min+t;const r=Ro(this.layout.layoutBox.y);s.y.min=e.target.y.min,s.y.max=s.y.min+r}Ml(t,s),dl(t,a),Fo(this.projectionDeltaWithTransform,this.layoutCorrected,t,a)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Kl);this.sharedNodes.get(e).add(t);const s=t.options.initialPromotionConfig;t.promote({transition:s?s.transition:void 0,preserveFollowOpacity:s&&s.shouldPreserveFollowOpacity?s.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,s),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:s}=e;if((s.rotate||s.rotateX||s.rotateY||s.rotateZ)&&(t=!0),!t)return;const r={};for(let a=0;a<Gl.length;a++){const t="rotate"+Gl[a];s[t]&&(r[t]=s[t],e.setStaticValue(t,0))}e.render();for(const a in r)e.setStaticValue(a,r[a]);e.scheduleRender()}getProjectionStyles(e){var t,s;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Yl;const r={visibility:""},a=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=va(null===e||void 0===e?void 0:e.pointerEvents)||"",r.transform=a?a(this.latestValues,""):"none",r;const n=this.getLead();if(!this.projectionDelta||!this.layout||!n.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=va(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!Xo(this.latestValues)&&(t.transform=a?a({},""):"none",this.hasProjected=!1),t}const i=n.animationValues||n.latestValues;this.applyTransformsToTarget(),r.transform=Wl(this.projectionDeltaWithTransform,this.treeScale,i),a&&(r.transform=a(i,r.transform));const{x:o,y:l}=this.projectionDelta;r.transformOrigin="".concat(100*o.origin,"% ").concat(100*l.origin,"% 0"),n.animationValues?r.opacity=n===this?null!==(s=null!==(t=i.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==s?s:1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:r.opacity=n===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0;for(const c in fr){if(void 0===i[c])continue;const{correct:e,applyTo:t}=fr[c],s="none"===r.transform?i[c]:e(i[c],n);if(t){const e=t.length;for(let a=0;a<e;a++)r[t[a]]=s}else r[c]=s}return this.options.layoutId&&(r.pointerEvents=n===this?va(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(rc),this.root.sharedNodes.clear()}}}function Xl(e){e.updateLayout()}function Zl(e){var t;const s=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:a}=e.options,n=s.source!==e.layout.source;"size"===a?Yo(e=>{const r=n?s.measuredBox[e]:s.layoutBox[e],a=Ro(r);r.min=t[e].min,r.max=r.min+a}):yc(a,s.layoutBox,t)&&Yo(r=>{const a=n?s.measuredBox[r]:s.layoutBox[r],i=Ro(t[r]);a.max=a.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+i)});const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Fo(i,t,s.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};n?Fo(o,e.applyTransform(r,!0),s.measuredBox):Fo(o,t,s.layoutBox);const l=!zl(i);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:a,layout:n}=r;if(a&&n){const i={x:{min:0,max:0},y:{min:0,max:0}};Uo(i,s.layoutBox,a.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};Uo(o,t,n.layoutBox),Ul(i,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=i,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:s,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function ec(e){Jl.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function tc(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function sc(e){e.clearSnapshot()}function rc(e){e.clearMeasurements()}function ac(e){e.isLayoutDirty=!1}function nc(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function ic(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function oc(e){e.resolveTargetDelta()}function lc(e){e.calcProjection()}function cc(e){e.resetRotation()}function dc(e){e.removeLeadSnapshot()}function uc(e,t,s){e.translate=Ln(t.translate,0,s),e.scale=Ln(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function hc(e,t,s,r){e.min=Ln(t.min,s.min,r),e.max=Ln(t.max,s.max,r)}function mc(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const pc={duration:.45,ease:[.4,0,.1,1]},xc=e=>"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().includes(e),gc=xc("applewebkit/")&&!xc("chrome/")?Math.round:ka;function fc(e){e.min=gc(e.min),e.max=gc(e.max)}function yc(e,t,s){return"position"===e||"preserve-aspect"===e&&!Io(Vl(t),Vl(s),.2)}const bc=Ql({attachResizeListener:(e,t)=>Ma(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vc={current:void 0},jc=Ql({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!vc.current){const e=new bc({});e.mount(window),e.setOptions({layoutScroll:!0}),vc.current=e}return vc.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Nc={pan:{Feature:class extends Wa{constructor(){super(...arguments),this.removePointerDownListener=ka}onPointerDown(e){this.session=new _o(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:hl(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:gl(e),onStart:gl(t),onMove:s,onEnd:(e,t)=>{delete this.session,r&&Ca.update(()=>r(e,t))}}}mount(){this.removePointerDownListener=Ia(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Wa{constructor(e){super(e),this.removeGroupControls=ka,this.removeListeners=ka,this.controls=new pl(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ka}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:jc,MeasureLayout:Nl}};function wc(e){if(null==e)throw new TypeError("Cannot destructure "+e)}const kc=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Ac(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;nn(s<=4,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));const[r,a]=function(e){const t=kc.exec(e);if(!t)return[,];const[,s,r]=t;return[s,r]}(e);if(!r)return;const n=window.getComputedStyle(t).getPropertyValue(r);if(n){const e=n.trim();return $i(e)?parseFloat(e):e}return Sr(a)?Ac(a,t,s+1):a}const Sc=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Cc=e=>Sc.has(e),_c=e=>e===Tr||e===zr,Tc=(e,t)=>parseFloat(e.split(", ")[t]),Pc=(e,t)=>(s,r)=>{let{transform:a}=r;if("none"===a||!a)return 0;const n=a.match(/^matrix3d\((.+)\)$/);if(n)return Tc(n[1],t);{const t=a.match(/^matrix\((.+)\)$/);return t?Tc(t[1],e):0}},Ec=new Set(["x","y","z"]),Dc=yr.filter(e=>!Ec.has(e));const Mc={width:(e,t)=>{let{x:s}=e,{paddingLeft:r="0",paddingRight:a="0"}=t;return s.max-s.min-parseFloat(r)-parseFloat(a)},height:(e,t)=>{let{y:s}=e,{paddingTop:r="0",paddingBottom:a="0"}=t;return s.max-s.min-parseFloat(r)-parseFloat(a)},top:(e,t)=>{let{top:s}=t;return parseFloat(s)},left:(e,t)=>{let{left:s}=t;return parseFloat(s)},bottom:(e,t)=>{let{y:s}=e,{top:r}=t;return parseFloat(r)+(s.max-s.min)},right:(e,t)=>{let{x:s}=e,{left:r}=t;return parseFloat(r)+(s.max-s.min)},x:Pc(4,13),y:Pc(5,14)};Mc.translateX=Mc.x,Mc.translateY=Mc.y;const Oc=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=(0,Ie.A)({},t),r=(0,Ie.A)({},r);const a=Object.keys(t).filter(Cc);let n=[],i=!1;const o=[];if(a.forEach(a=>{const l=e.getValue(a);if(!e.hasValue(a))return;let c=s[a],d=ao(c);const u=t[a];let h;if(ya(u)){const e=u.length,t=null===u[0]?1:0;c=u[t],d=ao(c);for(let s=t;s<e&&null!==u[s];s++)h?nn(ao(u[s])===h,"All keyframes must be of the same type"):(h=ao(u[s]),nn(h===d||_c(d)&&_c(h),"Keyframes must be of the same dimension as the current value"))}else h=ao(u);if(d!==h)if(_c(d)&&_c(h)){const e=l.get();"string"===typeof e&&l.set(parseFloat(e)),"string"===typeof u?t[a]=parseFloat(u):Array.isArray(u)&&h===zr&&(t[a]=u.map(parseFloat))}else(null===d||void 0===d?void 0:d.transform)&&(null===h||void 0===h?void 0:h.transform)&&(0===c||0===u)?0===c?l.set(h.transform(c)):t[a]=d.transform(u):(i||(n=function(e){const t=[];return Dc.forEach(s=>{const r=e.getValue(s);void 0!==r&&(t.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),t.length&&e.render(),t}(e),i=!0),o.push(a),r[a]=void 0!==r[a]?r[a]:t[a],l.jump(u))}),o.length){const s=o.indexOf("height")>=0?window.pageYOffset:null,a=((e,t,s)=>{const r=t.measureViewportBox(),a=t.current,n=getComputedStyle(a),{display:i}=n,o={};"none"===i&&t.setStaticValue("display",e.display||"block"),s.forEach(e=>{o[e]=Mc[e](r,n)}),t.render();const l=t.measureViewportBox();return s.forEach(s=>{const r=t.getValue(s);r&&r.jump(o[s]),e[s]=Mc[s](l,n)}),e})(t,e,o);return n.length&&n.forEach(t=>{let[s,r]=t;e.getValue(s).set(r)}),e.render(),Gs&&null!==s&&window.scrollTo({top:s}),{target:a,transitionEnd:r}}return{target:t,transitionEnd:r}};function Rc(e,t,s,r){return(e=>Object.keys(e).some(Cc))(t)?Oc(e,t,s,r):{target:t,transitionEnd:r}}const Ic=(e,t,s,r)=>{const a=function(e,t,s){let r=Object.assign({},(wc(t),t));const a=e.current;if(!(a instanceof Element))return{target:r,transitionEnd:s};s&&(s=(0,Ie.A)({},s)),e.values.forEach(e=>{const t=e.get();if(!Sr(t))return;const s=Ac(t,a);s&&e.set(s)});for(const n in r){const e=r[n];if(!Sr(e))continue;const t=Ac(e,a);t&&(r[n]=t,s||(s={}),void 0===s[n]&&(s[n]=e))}return{target:r,transitionEnd:s}}(e,t,r);return Rc(e,t=a.target,s,r=a.transitionEnd)},Lc={current:null},Fc={current:!1};const Bc=new WeakMap,zc=["willChange"],Uc=["children"],Vc=Object.keys(lr),Kc=Vc.length,Wc=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Hc=sr.length;class qc{constructor(e){let{parent:t,props:s,presenceContext:r,reducedMotionConfig:a,visualState:n}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ca.render(this.render,!1,!0);const{latestValues:o,renderState:l}=n;this.latestValues=o,this.baseTarget=(0,Ie.A)({},o),this.initialValues=s.initial?(0,Ie.A)({},o):{},this.renderState=l,this.parent=t,this.props=s,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=i,this.isControllingVariants=rr(s),this.isVariantNode=ar(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const c=this.scrapeMotionValuesFromProps(s,{}),{willChange:d}=c,u=(0,ta.A)(c,zc);for(const h in u){const e=u[h];void 0!==o[h]&&jr(e)&&(e.set(o[h],!1),Yi(d)&&d.add(h))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,Bc.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),Fc.current||function(){if(Fc.current=!0,Gs)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Lc.current=e.matches;e.addListener(t),t()}else Lc.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Lc.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Bc.delete(this.current),this.projection&&this.projection.unmount(),_a(this.notifyUpdate),_a(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const s=br.has(e),r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&Ca.update(this.notifyUpdate,!1,!0),s&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),a()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures(e,t,s,r){let a,n,{children:i}=e,o=(0,ta.A)(e,Uc);for(let l=0;l<Kc;l++){const e=Vc[l],{isEnabled:t,Feature:s,ProjectionNode:r,MeasureLayout:i}=lr[e];r&&(a=r),t(o)&&(!this.features[e]&&s&&(this.features[e]=new s(this)),i&&(n=i))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:e,layout:t,drag:s,dragConstraints:n,layoutScroll:i,layoutRoot:l}=o;this.projection.setOptions({layoutId:e,layout:t,alwaysMeasureLayout:Boolean(s)||n&&Xs(n),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"===typeof t?t:"both",initialPromotionConfig:r,layoutScroll:i,layoutRoot:l})}return n}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<Wc.length;s++){const t=Wc[s];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,s){const{willChange:r}=t;for(const a in t){const n=t[a],i=s[a];if(jr(n))e.addValue(a,n),Yi(r)&&r.add(a);else if(jr(i))e.addValue(a,to(n,{owner:e})),Yi(r)&&r.remove(a);else if(i!==n)if(e.hasValue(a)){const t=e.getValue(a);!t.hasAnimated&&t.set(n)}else{const t=e.getStaticValue(a);e.addValue(a,to(void 0!==t?t:n,{owner:e}))}}for(const a in s)void 0===t[a]&&e.removeValue(a);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}const e={};for(let t=0;t<Hc;t++){const s=sr[t],r=this.props[s];(Zs(r)||!1===r)&&(e[s]=r)}return e}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return void 0===s&&void 0!==t&&(s=to(t,{owner:this}),this.addValue(e,s)),s}readValue(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:s}=this.props,r="string"===typeof s||"object"===typeof s?null===(t=ga(this.props,s))||void 0===t?void 0:t[e]:void 0;if(s&&void 0!==r)return r;const a=this.getBaseTargetFromProps(this.props,e);return void 0===a||jr(a)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:a}on(e,t){return this.events[e]||(this.events[e]=new Xi),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];this.events[e].notify(...s)}}}const Gc=["transition","transitionEnd"];class Yc extends qc{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:s,style:r}=t;delete s[e],delete r[e]}makeTargetAnimatableFromInstance(e,t,s){let{transition:r,transitionEnd:a}=e,n=(0,ta.A)(e,Gc),{transformValues:i}=t,o=function(e,t,s){const r={};for(const a in e){const e=uo(a,t);if(void 0!==e)r[a]=e;else{const e=s.getValue(a);e&&(r[a]=e.get())}}return r}(n,r||{},this);if(i&&(a&&(a=i(a)),n&&(n=i(n)),o&&(o=i(o))),s){!function(e,t,s){var r,a;const n=Object.keys(t).filter(t=>!e.hasValue(t)),i=n.length;if(i)for(let o=0;o<i;o++){const i=n[o],l=t[i];let c=null;Array.isArray(l)&&(c=l[0]),null===c&&(c=null!==(a=null!==(r=s[i])&&void 0!==r?r:e.readValue(i))&&void 0!==a?a:t[i]),void 0!==c&&null!==c&&("string"===typeof c&&($i(c)||Vi(c))?c=parseFloat(c):!io(c)&&Qn.test(l)&&(c=Ui(i,l)),e.addValue(i,to(c,{owner:e})),void 0===s[i]&&(s[i]=c),null!==c&&e.setBaseTarget(i,c))}}(this,n,o);const e=Ic(this,n,o,a);a=e.transitionEnd,n=e.target}return(0,Ie.A)({transition:r,transitionEnd:a},n)}}class $c extends Yc{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(br.has(t)){const e=zi(t);return e&&e.default||0}{const r=(s=e,window.getComputedStyle(s)),a=(Ar(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof a?a.trim():a}var s}measureInstanceViewportBox(e,t){let{transformPagePoint:s}=t;return ul(e,s)}build(e,t,s,r){qr(e,t,s,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return pa(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;jr(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}renderInstance(e,t,s,r){ua(e,t,s,r)}}class Jc extends Yc{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(br.has(t)){const e=zi(t);return e&&e.default||0}return t=ha.has(t)?t:Js(t),e.getAttribute(t)}measureInstanceViewportBox(){return{x:{min:0,max:0},y:{min:0,max:0}}}scrapeMotionValuesFromProps(e,t){return xa(e,t)}build(e,t,s,r){ia(e,t,s,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,s,r){ma(e,t,0,r)}mount(e){this.isSVGTag=la(e.tagName),super.mount(e)}}const Qc=(e,t)=>gr(e)?new Jc(t,{enableHardwareAcceleration:!1}):new $c(t,{enableHardwareAcceleration:!0}),Xc={layout:{ProjectionNode:jc,MeasureLayout:Nl}},Zc=(0,Ie.A)((0,Ie.A)((0,Ie.A)((0,Ie.A)({},So),tn),Nc),Xc),ed=pr((e,t)=>function(e,t,s,r){let{forwardMotionProps:a=!1}=t;const n=gr(e)?Ea:Da;return(0,Ie.A)((0,Ie.A)({},n),{},{preloadedFeatures:s,useRender:da(a),createVisualElement:r,Component:e})}(e,t,Zc,Qc));const td=(0,Ns.A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var sd=s(5088),rd=s(3944);const ad=(0,Ns.A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),nd=e=>{let{size:t=36,showSubtitle:s=!0}=e;const r="#0D1B2A",a="#00ACC1",n="#00838F",i="#E91E63",o="#FF8A00",l="#FFFFFF",c=t+8;return(0,cs.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},"aria-label":"YATRIK ERP",children:[(0,cs.jsxs)("svg",{width:c,height:c,viewBox:"0 0 96 96",role:"img",focusable:"false","aria-hidden":"true",style:{display:"block"},children:[(0,cs.jsxs)("defs",{children:[(0,cs.jsxs)("linearGradient",{id:"tealGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,cs.jsx)("stop",{offset:"0%",stopColor:a}),(0,cs.jsx)("stop",{offset:"100%",stopColor:n})]}),(0,cs.jsxs)("radialGradient",{id:"headlight",cx:"70%",cy:"58%",r:"30%",children:[(0,cs.jsx)("stop",{offset:"0%",stopColor:o,stopOpacity:"1"}),(0,cs.jsx)("stop",{offset:"100%",stopColor:o,stopOpacity:"0"})]})]}),(0,cs.jsx)("circle",{cx:"48",cy:"48",r:"44",fill:"url(#tealGradient)"}),(0,cs.jsx)("path",{d:"M12 66c18-10 36-12 72-4",stroke:l,strokeOpacity:"0.9",strokeWidth:"3.2",fill:"none",strokeLinecap:"round"}),(0,cs.jsxs)("g",{transform:"translate(18,26)",children:[(0,cs.jsx)("rect",{x:"0",y:"14",width:"60",height:"26",rx:"6",fill:l,opacity:"0.96"}),(0,cs.jsx)("rect",{x:"6",y:"18",width:"36",height:"10",rx:"3",fill:"#CFD8DC"}),(0,cs.jsx)("rect",{x:"44",y:"18",width:"8",height:"10",rx:"2",fill:"#CFD8DC"}),(0,cs.jsx)("rect",{x:"4",y:"33",width:"52",height:"3.5",rx:"1.75",fill:i}),(0,cs.jsx)("circle",{cx:"12",cy:"44",r:"4.8",fill:r}),(0,cs.jsx)("circle",{cx:"48",cy:"44",r:"4.8",fill:r}),(0,cs.jsx)("circle",{cx:"12",cy:"44",r:"2",fill:"#B0BEC5"}),(0,cs.jsx)("circle",{cx:"48",cy:"44",r:"2",fill:"#B0BEC5"}),(0,cs.jsx)("circle",{cx:"56",cy:"30",r:"10",fill:"url(#headlight)"}),(0,cs.jsx)("circle",{cx:"56",cy:"30",r:"3",fill:o})]})]}),(0,cs.jsxs)("div",{style:{display:"flex",alignItems:"baseline",gap:8,lineHeight:1},children:[(0,cs.jsx)("span",{style:{fontWeight:900,fontSize:t,letterSpacing:"0.5px",color:r},children:"YATRIK"}),s&&(0,cs.jsx)("span",{style:{display:"inline-block",background:i,color:l,padding:"4px 8px",borderRadius:999,fontWeight:800,fontSize:Math.max(12,Math.round(.45*t)),lineHeight:1,letterSpacing:"0.6px"},children:"ERP"})]})]})},id=e=>{let{isMobileMenuOpen:t,setIsMobileMenuOpen:s}=e;const[a,n]=(0,r.useState)(!1),{user:i}=(0,Re.A)(),o=te(),l=e=>{o(i?"/passenger/dashboard#".concat(e):"/login?next=/passenger/dashboard#".concat(e))},c=[{name:"Contact Us",slug:"contact"},{name:"Cancellation",slug:"cancellation"},{name:"Feedback",slug:"feedback"},{name:"Manage Booking",slug:"manage"},{name:"Gallery",href:"/gallery"},{name:"Status Check",slug:"status"}];return(0,cs.jsx)("nav",{className:"bg-white/90 backdrop-blur border-b border-gray-100 shadow-sm",children:(0,cs.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between gap-4 py-4",children:[(0,cs.jsx)(Pe,{to:"/",className:"flex items-center hover:opacity-80 transition-opacity duration-200 shrink-0",children:(0,cs.jsx)(nd,{size:28})}),(0,cs.jsx)("div",{className:"hidden md:flex items-center justify-center gap-6 flex-1",children:c.map(e=>e.slug?(0,cs.jsx)("button",{onClick:()=>l(e.slug),className:"text-gray-800 hover:text-pink-600 transition-colors font-semibold text-base px-2 py-1 rounded-md hover:bg-gray-100",children:e.name},e.name):(0,cs.jsx)(Pe,{to:e.href,className:"text-gray-800 hover:text-pink-600 transition-colors font-semibold text-base px-2 py-1 rounded-md hover:bg-gray-100",children:e.name},e.name))}),(0,cs.jsxs)("div",{className:"hidden md:flex items-center gap-3 shrink-0",children:[(0,cs.jsxs)(Pe,{to:"/login",className:"flex items-center space-x-2 border border-pink-500 text-pink-600 hover:bg-pink-50 transition-colors font-semibold text-base px-3 py-2 rounded-md",children:[(0,cs.jsx)(td,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Login"})]}),(0,cs.jsx)(Pe,{to:"/signup",className:"signup-cta",children:"Sign Up"})]}),(0,cs.jsx)("button",{onClick:()=>{n(!a)},className:"md:hidden p-2 rounded-md text-gray-700 hover:text-pink-600 hover:bg-gray-100 transition-colors",children:a?(0,cs.jsx)(Bs.A,{className:"w-6 h-6"}):(0,cs.jsx)(Us,{className:"w-6 h-6"})})]}),a&&(0,cs.jsx)("div",{className:"md:hidden py-4 border-t bg-gradient-to-b from-white/80 to-white",children:(0,cs.jsxs)("div",{className:"flex flex-col space-y-4",children:[c.map(e=>e.slug?(0,cs.jsx)("button",{onClick:()=>{l(e.slug),n(!1)},className:"text-gray-800 hover:text-pink-600 transition-colors font-medium text-base px-4 py-2 rounded-md hover:bg-gray-100 w-full text-left",children:e.name},e.name):(0,cs.jsx)(Pe,{to:e.href,className:"text-gray-800 hover:text-pink-600 transition-colors font-medium text-base px-4 py-2 rounded-md hover:bg-gray-100",onClick:()=>n(!1),children:e.name},e.name)),(0,cs.jsxs)("div",{className:"pt-4 border-t",children:[(0,cs.jsxs)(Pe,{to:"/login",className:"flex items-center space-x-2 border border-pink-500 text-pink-600 hover:bg-pink-50 transition-colors font-semibold text-base px-4 py-2 rounded-md mb-2",onClick:()=>n(!1),children:[(0,cs.jsx)(td,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Login"})]}),(0,cs.jsx)(Pe,{to:"/signup",className:"bg-pink-600 text-white px-4 py-2 rounded-lg hover:bg-pink-700 transition-colors font-semibold inline-block",onClick:()=>n(!1),children:"Sign Up"})]})]})})]})})},od=(0,Ns.A)("facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),ld=(0,Ns.A)("twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),cd=(0,Ns.A)("instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),dd=(0,Ns.A)("youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),ud=()=>(0,cs.jsx)("div",{className:"support-bar",children:(0,cs.jsxs)("div",{className:"support-inner",children:[(0,cs.jsxs)("div",{className:"support-left",children:[(0,cs.jsxs)("div",{className:"support-item",children:[(0,cs.jsx)(ad,{className:"support-icon"}),(0,cs.jsx)("span",{className:"support-text",children:"1800-123-4567"})]}),(0,cs.jsxs)("div",{className:"support-item",children:[(0,cs.jsx)(sd.A,{className:"support-icon"}),(0,cs.jsx)("span",{className:"support-text",children:"24/7 Support"})]})]}),(0,cs.jsxs)("div",{className:"support-right",children:[(0,cs.jsx)("a",{href:"#","aria-label":"Facebook",className:"support-link",children:(0,cs.jsx)(od,{className:"support-icon"})}),(0,cs.jsx)("a",{href:"#","aria-label":"Twitter",className:"support-link",children:(0,cs.jsx)(ld,{className:"support-icon"})}),(0,cs.jsx)("a",{href:"#","aria-label":"Instagram",className:"support-link",children:(0,cs.jsx)(cd,{className:"support-icon"})}),(0,cs.jsx)("a",{href:"#","aria-label":"YouTube",className:"support-link",children:(0,cs.jsx)(dd,{className:"support-icon"})})]})]})});var hd=s(7104),md=s(4830);const pd=(0,Ns.A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),xd=(0,Ns.A)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]),gd=(0,Ns.A)("thumbs-up",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]),fd=()=>{const[e,t]=(0,r.useState)(!1),[s,a]=(0,r.useState)(0),[n,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)([]),[c,d]=(0,r.useState)(!1),u=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=new IntersectionObserver(e=>{let[s]=e;s.isIntersecting&&t(!0)},{threshold:.3});return u.current&&e.observe(u.current),()=>e.disconnect()},[]),(0,r.useEffect)(()=>{const e=setInterval(()=>{a(e=>(e+1)%3)},4e3);return()=>clearInterval(e)},[]);const h=[{icon:(0,cs.jsx)(hd.A,{}),text:"Instant Booking",color:"#10B981"},{icon:(0,cs.jsx)(md.A,{}),text:"Live Tracking",color:"#3B82F6"},{icon:(0,cs.jsx)(Ps,{}),text:"Secure Payments",color:"#F59E0B"}],m=e=>{a(e)},p=e=>{d(!0),setTimeout(()=>d(!1),1500),alert("Redirecting to ".concat(e,"..."))};return(0,cs.jsxs)("section",{className:"app-banner",ref:u,children:[(0,cs.jsxs)("div",{className:"app-banner__bg-elements",children:[(0,cs.jsx)("div",{className:"floating-shape shape-1"}),(0,cs.jsx)("div",{className:"floating-shape shape-2"}),(0,cs.jsx)("div",{className:"floating-shape shape-3"}),(0,cs.jsx)("div",{className:"floating-shape shape-4"})]}),(0,cs.jsx)("div",{className:"container",children:(0,cs.jsxs)("div",{className:"app-banner__grid ".concat(e?"animate-in":""),children:[(0,cs.jsxs)("div",{className:"app-banner__content",children:[(0,cs.jsxs)("div",{className:"app-banner__badge ".concat(e?"animate-slide-up":""),children:[(0,cs.jsx)(pd,{className:"badge-icon"}),(0,cs.jsx)("span",{children:"Now Available"})]}),(0,cs.jsx)("h2",{className:"app-banner__title ".concat(e?"animate-slide-up":""),children:"Get the YATRIK ERP App"}),(0,cs.jsx)("p",{className:"app-banner__subtitle ".concat(e?"animate-slide-up":""),children:"Book tickets, track buses, and manage your travel on the go with our mobile app."}),(0,cs.jsxs)("div",{className:"app-banner__rating ".concat(e?"animate-slide-up":""),children:[(0,cs.jsx)("div",{className:"app-banner__stars",children:[...Array(5)].map((e,t)=>(0,cs.jsx)(rd.A,{className:"star star-".concat(t," ").concat(o.includes(t)?"clicked":""),onClick:()=>(e=>{const t=[...o];t.includes(e)?l(t.filter(t=>t!==e)):l([...t,e]),d(!0),setTimeout(()=>d(!1),1e3)})(t),style:{color:o.includes(t)?"#FFD700":"#fbbf24",cursor:"pointer",transition:"all 0.3s ease"}},t))}),(0,cs.jsxs)("span",{className:"app-banner__rating-text",children:["4.8/5 from 10,000+ users",o.length>0&&(0,cs.jsx)("span",{className:"rating-feedback",children:" Thanks for rating!"})]})]}),(0,cs.jsxs)("div",{className:"app-banner__features ".concat(e?"animate-slide-up":""),children:[(0,cs.jsxs)("div",{className:"feature-rotator",children:[(0,cs.jsxs)("div",{className:"feature-active",style:{background:"linear-gradient(135deg, ".concat(h[s].color,"20, ").concat(h[s].color,"10)"),borderColor:h[s].color},children:[(0,cs.jsx)("div",{className:"feature-icon-wrapper",style:{color:h[s].color},children:h[s].icon}),(0,cs.jsx)("span",{children:h[s].text})]}),(0,cs.jsx)("div",{className:"feature-dots",children:h.map((e,t)=>(0,cs.jsx)("div",{className:"feature-dot ".concat(t===s?"active":""),onClick:()=>m(t),style:{backgroundColor:t===s?e.color:"rgba(255, 255, 255, 0.3)",cursor:"pointer"},title:"Click to see ".concat(e.text)},t))})]}),(0,cs.jsx)("div",{className:"feature-cards",children:h.map((e,t)=>(0,cs.jsxs)("div",{className:"feature-card ".concat(t===s?"active":""),onClick:()=>m(t),style:{borderColor:e.color,cursor:"pointer"},children:[(0,cs.jsx)("div",{className:"feature-card-icon",style:{color:e.color},children:e.icon}),(0,cs.jsx)("span",{className:"feature-card-text",children:e.text})]},t))})]}),(0,cs.jsxs)("div",{className:"app-banner__buttons ".concat(e?"animate-slide-up":""),children:[(0,cs.jsxs)("button",{className:"app-btn app-btn--primary",onClick:()=>p("App Store"),children:[(0,cs.jsx)(hd.A,{className:"btn-icon"}),(0,cs.jsx)("span",{children:"App Store"}),(0,cs.jsx)("div",{className:"btn-shine"}),(0,cs.jsx)("div",{className:"btn-particles"})]}),(0,cs.jsxs)("button",{className:"app-btn app-btn--secondary",onClick:()=>p("Google Play"),children:[(0,cs.jsx)(hd.A,{className:"btn-icon"}),(0,cs.jsx)("span",{children:"Google Play"}),(0,cs.jsx)("div",{className:"btn-shine"}),(0,cs.jsx)("div",{className:"btn-particles"})]})]}),(0,cs.jsxs)("div",{className:"app-banner__social-proof ".concat(e?"animate-slide-up":""),children:[(0,cs.jsxs)("div",{className:"social-proof-item",children:[(0,cs.jsx)(xd,{className:"social-icon"}),(0,cs.jsx)("span",{children:"Loved by travelers"})]}),(0,cs.jsxs)("div",{className:"social-proof-item",children:[(0,cs.jsx)(gd,{className:"social-icon"}),(0,cs.jsx)("span",{children:"Highly rated"})]}),(0,cs.jsxs)("div",{className:"social-proof-item",children:[(0,cs.jsx)(ws,{className:"social-icon"}),(0,cs.jsx)("span",{children:"Premium features"})]})]})]}),(0,cs.jsxs)("div",{className:"app-banner__mockup ".concat(e?"animate-slide-up":""),children:[(0,cs.jsxs)("div",{className:"phone-mockup",onClick:()=>{d(!0),setTimeout(()=>d(!1),1e3)},children:[(0,cs.jsx)("div",{className:"phone-glow"}),c&&(0,cs.jsxs)("div",{className:"sparkle-effects",children:[(0,cs.jsx)("div",{className:"sparkle sparkle-1",children:"\u2728"}),(0,cs.jsx)("div",{className:"sparkle sparkle-2",children:"\u2728"}),(0,cs.jsx)("div",{className:"sparkle sparkle-3",children:"\u2728"}),(0,cs.jsx)("div",{className:"sparkle sparkle-4",children:"\u2728"})]}),(0,cs.jsxs)("div",{className:"phone-mockup__screen",children:[(0,cs.jsxs)("div",{className:"status-bar",children:[(0,cs.jsx)("div",{className:"status-time",children:"9:41"}),(0,cs.jsxs)("div",{className:"status-icons",children:[(0,cs.jsxs)("div",{className:"signal-bars",children:[(0,cs.jsx)("div",{className:"bar"}),(0,cs.jsx)("div",{className:"bar"}),(0,cs.jsx)("div",{className:"bar"}),(0,cs.jsx)("div",{className:"bar"})]}),(0,cs.jsx)("div",{className:"wifi-icon",children:"\ud83d\udcf6"}),(0,cs.jsx)("div",{className:"battery",children:"\ud83d\udd0b"})]})]}),(0,cs.jsxs)("div",{className:"app-content",children:[(0,cs.jsx)("div",{className:"app-header",children:(0,cs.jsx)(Fs,{className:"phone-mockup__icon"})}),(0,cs.jsxs)("div",{className:"app-body",children:[(0,cs.jsx)("div",{className:"phone-mockup__logo",children:(0,cs.jsx)(nd,{size:24})}),(0,cs.jsx)("p",{className:"phone-mockup__label",children:"Smart Travel App"}),(0,cs.jsxs)("div",{className:"app-features",children:[(0,cs.jsxs)("div",{className:"feature-item",onClick:e=>{e.stopPropagation(),alert("Book Bus feature clicked!")},children:[(0,cs.jsx)("div",{className:"feature-icon",children:"\ud83d\ude8c"}),(0,cs.jsx)("span",{children:"Book Bus"})]}),(0,cs.jsxs)("div",{className:"feature-item",onClick:e=>{e.stopPropagation(),alert("Live Tracking feature clicked!")},children:[(0,cs.jsx)("div",{className:"feature-icon",children:"\ud83d\udccd"}),(0,cs.jsx)("span",{children:"Track Live"})]}),(0,cs.jsxs)("div",{className:"feature-item",onClick:e=>{e.stopPropagation(),alert("My Tickets feature clicked!")},children:[(0,cs.jsx)("div",{className:"feature-icon",children:"\ud83c\udfab"}),(0,cs.jsx)("span",{children:"My Tickets"})]})]})]})]}),(0,cs.jsxs)("div",{className:"notification-bubble",onClick:e=>{e.stopPropagation(),alert("Notification clicked! Bus is arriving soon.")},children:[(0,cs.jsx)("div",{className:"notification-icon",children:"\ud83d\udd14"}),(0,cs.jsx)("div",{className:"notification-text",children:"Bus arriving in 5 mins!"})]})]})]}),(0,cs.jsxs)("div",{className:"decorative-elements",children:[(0,cs.jsx)("div",{className:"orbit orbit-1",children:(0,cs.jsx)("div",{className:"orbit-dot"})}),(0,cs.jsx)("div",{className:"orbit orbit-2",children:(0,cs.jsx)("div",{className:"orbit-dot"})}),(0,cs.jsx)("div",{className:"orbit orbit-3",children:(0,cs.jsx)("div",{className:"orbit-dot"})})]})]})]})})]})},yd=e=>{let{routes:t}=e;return(0,cs.jsxs)("div",{className:"popular-routes",children:[(0,cs.jsx)("h3",{className:"popular-routes__title",children:"Popular Routes"}),(0,cs.jsx)("div",{className:"popular-routes__list",children:t.map((e,t)=>(0,cs.jsxs)("div",{className:"route-card",children:[(0,cs.jsxs)("div",{className:"route-card__content",children:[(0,cs.jsx)("div",{className:"route-card__icon",children:(0,cs.jsx)(ks.A,{className:"w-5 h-5"})}),(0,cs.jsxs)("div",{className:"route-card__info",children:[(0,cs.jsxs)("div",{className:"route-card__route",children:[e.from," ",(0,cs.jsx)(td,{className:"inline w-3 h-3 mx-1"})," ",e.to]}),(0,cs.jsxs)("div",{className:"route-card__details",children:[(0,cs.jsxs)("span",{className:"route-card__frequency",children:[(0,cs.jsx)(sd.A,{className:"w-3 h-3"}),e.frequency]}),(0,cs.jsx)("span",{className:"route-card__fare",children:e.fare})]})]})]}),(0,cs.jsx)("button",{className:"route-card__cta",children:"Book"})]},t))})]})},bd=(0,Ns.A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var vd=s(7719),jd=s(2054),Nd=s(7819);const wd=e=>{let{alerts:t}=e;const s=e=>{switch(e){case"info":return(0,cs.jsx)(bd,{className:"alert__icon alert__icon--info"});case"warning":return(0,cs.jsx)(vd.A,{className:"alert__icon alert__icon--warning"});case"success":return(0,cs.jsx)(jd.A,{className:"alert__icon alert__icon--success"});default:return(0,cs.jsx)(Nd.A,{className:"alert__icon alert__icon--default"})}};return(0,cs.jsxs)("div",{className:"service-alerts",children:[(0,cs.jsx)("h3",{className:"service-alerts__title",children:"Service Updates"}),(0,cs.jsx)("div",{className:"service-alerts__list",children:t.map((e,t)=>(0,cs.jsx)("div",{className:"alert alert--".concat(e.type),children:(0,cs.jsxs)("div",{className:"alert__content",children:[s(e.type),(0,cs.jsx)("p",{className:"alert__message",children:e.message})]})},t))})]})},kd=(0,Ns.A)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),Ad=(0,Ns.A)("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),Sd=e=>{let{onSearchResults:t,showResults:s=!1}=e;const[a,n]=(0,r.useState)("book"),[i,o]=(0,r.useState)("oneWay"),[l,c]=(0,r.useState)({from:"",to:"",journeyDate:"",returnDate:""}),[d,u]=(0,r.useState)(!1),[h,m]=(0,r.useState)([]),[p,x]=(0,r.useState)({from:[],to:[]}),[g,f]=(0,r.useState)({from:!1,to:!1}),[y,b]=(0,r.useState)({from:-1,to:-1}),[v,j]=(0,r.useState)({from:!1,to:!1}),N=(0,r.useRef)(null),w=(0,r.useRef)(null),k=(0,r.useRef)(null),A=te();(0,r.useEffect)(()=>{S()},[]);const S=async()=>{try{const e=await fetch("/api/routes/cities");if(e.ok){const t=await e.json();m(t.data.cities||[])}}catch(e){console.error("Failed to load cities:",e)}},C=(0,r.useCallback)((e,t)=>{k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{_(e,t)},300)},[]),_=async(e,t)=>{if(!e||e.length<1)return x(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:[]})),void f(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:!1}));j(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:!0}));try{const s=await fetch("/api/search/autocomplete?q=".concat(encodeURIComponent(e)));if(s.ok){const e=await s.json();e.success&&(x(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[t]:e.data.suggestions})),f(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:!0})),b(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:-1})))}}catch(s){console.error("Failed to fetch suggestions:",s)}finally{j(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:!1}))}},T=(e,t)=>{c(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t})),t.length>=1?C(t,e):(x(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:[]})),f(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:!1})))},P=(e,t)=>{var s;(c(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[t]:e.city})),f(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:!1})),b(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:-1})),"from"===t)&&(null===(s=w.current)||void 0===s||s.focus())},E=(e,t)=>{const s=p[t],r=y[t];if(g[t]&&0!==s.length)switch(e.key){case"ArrowDown":e.preventDefault(),b(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:Math.min(r+1,s.length-1)}));break;case"ArrowUp":e.preventDefault(),b(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:Math.max(r-1,-1)}));break;case"Enter":e.preventDefault(),r>=0&&r<s.length&&P(s[r],t);break;case"Escape":f(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:!1})),b(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:-1}))}};(0,r.useEffect)(()=>{const e=e=>{var t,s;null!==(t=N.current)&&void 0!==t&&t.contains(e.target)||null!==(s=w.current)&&void 0!==s&&s.contains(e.target)||(f({from:!1,to:!1}),b({from:-1,to:-1}))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);return(0,cs.jsxs)("div",{className:"searchCard",children:[(0,cs.jsxs)("div",{className:"tabs",children:[(0,cs.jsxs)("button",{onClick:()=>n("book"),className:"tab ".concat("book"===a?"tab--active":""),children:[(0,cs.jsx)(ks.A,{className:"tab__icon"}),(0,cs.jsx)("span",{className:"hide-sm",children:"Book Bus Ticket"}),(0,cs.jsx)("span",{className:"show-sm",children:"Book"})]}),(0,cs.jsxs)("button",{onClick:()=>n("link"),className:"tab ".concat("link"===a?"tab--active":""),children:[(0,cs.jsx)(kd,{className:"tab__icon"}),(0,cs.jsx)("span",{className:"hide-sm",children:"Link Ticket"}),(0,cs.jsx)("span",{className:"show-sm",children:"Link"})]})]}),(0,cs.jsxs)("div",{className:"toggle",children:[(0,cs.jsx)("button",{onClick:()=>o("oneWay"),className:"toggle__btn ".concat("oneWay"===i?"is-active":""),children:"One Way"}),(0,cs.jsx)("button",{onClick:()=>o("roundTrip"),className:"toggle__btn ".concat("roundTrip"===i?"is-active":""),children:"Round Trip"})]}),(0,cs.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),l.from&&l.to&&l.journeyDate){u(!0);try{const e=localStorage.getItem("token"),t={"Content-Type":"application/json"};e&&(t.Authorization="Bearer ".concat(e));const s=await fetch("/api/passenger/trips/search?from=".concat(encodeURIComponent(l.from),"&to=").concat(encodeURIComponent(l.to),"&date=").concat(l.journeyDate),{headers:t}),r=new URLSearchParams({from:l.from,to:l.to,date:l.journeyDate,tripType:i});if("roundTrip"===i&&l.returnDate&&r.append("returnDate",l.returnDate),s.ok){const e=await s.json();e.success&&e.data.trips.length>0?Oe.oR.success("Found ".concat(e.data.trips.length," trips available!")):Oe.oR.info("No trips found for your search criteria, but you can still view all available trips.")}A(e?"/passenger/results?".concat(r.toString()):"/search-results?".concat(r.toString()))}catch(t){console.error("Search error:",t),Oe.oR.error("Search failed. Please try again.")}finally{u(!1)}}else Oe.oR.error("Please fill all required fields")},className:"form",children:[(0,cs.jsxs)("div",{className:"autocomplete-container",children:[(0,cs.jsx)("label",{className:"label",children:"From"}),(0,cs.jsxs)("div",{className:"field",children:[(0,cs.jsx)(gs.A,{className:"field__icon"}),(0,cs.jsx)("input",{ref:N,type:"text",value:l.from,onChange:e=>T("from",e.target.value),onKeyDown:e=>E(e,"from"),placeholder:"Enter departure location",className:"input",required:!0,autoComplete:"off"}),v.from&&(0,cs.jsx)("div",{className:"loading-spinner",children:(0,cs.jsx)("div",{className:"spinner"})})]}),g.from&&p.from.length>0&&(0,cs.jsx)("div",{className:"suggestions-dropdown",children:p.from.map((e,t)=>(0,cs.jsxs)("div",{className:"suggestion-item ".concat(y.from===t?"selected":""),onClick:()=>P(e,"from"),onMouseEnter:()=>b(e=>(0,Ie.A)((0,Ie.A)({},e),{},{from:t})),children:[(0,cs.jsx)("div",{className:"suggestion-icon",children:"stop"===e.type?(0,cs.jsx)(Ad,{className:"w-4 h-4"}):"city"===e.type?(0,cs.jsx)(gs.A,{className:"w-4 h-4"}):(0,cs.jsx)(sd.A,{className:"w-4 h-4"})}),(0,cs.jsxs)("div",{className:"suggestion-content",children:[(0,cs.jsx)("div",{className:"suggestion-name",children:e.name}),(0,cs.jsxs)("div",{className:"suggestion-details",children:[e.city!==e.name&&e.city,e.state&&", ".concat(e.state),e.routeCount&&" \u2022 ".concat(e.routeCount," routes")]})]}),(0,cs.jsx)("div",{className:"suggestion-type",children:"stop"===e.type?"Stop":"city"===e.type?"City":"Route"})]},e.id))})]}),(0,cs.jsxs)("div",{className:"autocomplete-container",children:[(0,cs.jsx)("label",{className:"label",children:"To"}),(0,cs.jsxs)("div",{className:"field",children:[(0,cs.jsx)(gs.A,{className:"field__icon"}),(0,cs.jsx)("input",{ref:w,type:"text",value:l.to,onChange:e=>T("to",e.target.value),onKeyDown:e=>E(e,"to"),placeholder:"Enter destination location",className:"input",required:!0,autoComplete:"off"}),v.to&&(0,cs.jsx)("div",{className:"loading-spinner",children:(0,cs.jsx)("div",{className:"spinner"})})]}),g.to&&p.to.length>0&&(0,cs.jsx)("div",{className:"suggestions-dropdown",children:p.to.map((e,t)=>(0,cs.jsxs)("div",{className:"suggestion-item ".concat(y.to===t?"selected":""),onClick:()=>P(e,"to"),onMouseEnter:()=>b(e=>(0,Ie.A)((0,Ie.A)({},e),{},{to:t})),children:[(0,cs.jsx)("div",{className:"suggestion-icon",children:"stop"===e.type?(0,cs.jsx)(Ad,{className:"w-4 h-4"}):"city"===e.type?(0,cs.jsx)(gs.A,{className:"w-4 h-4"}):(0,cs.jsx)(sd.A,{className:"w-4 h-4"})}),(0,cs.jsxs)("div",{className:"suggestion-content",children:[(0,cs.jsx)("div",{className:"suggestion-name",children:e.name}),(0,cs.jsxs)("div",{className:"suggestion-details",children:[e.city!==e.name&&e.city,e.state&&", ".concat(e.state),e.routeCount&&" \u2022 ".concat(e.routeCount," routes")]})]}),(0,cs.jsx)("div",{className:"suggestion-type",children:"stop"===e.type?"Stop":"city"===e.type?"City":"Route"})]},e.id))})]}),(0,cs.jsxs)("div",{className:"row-2",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"label",children:"Journey Date"}),(0,cs.jsxs)("div",{className:"field",children:[(0,cs.jsx)(fs.A,{className:"field__icon"}),(0,cs.jsx)("input",{type:"date",value:l.journeyDate,onChange:e=>c((0,Ie.A)((0,Ie.A)({},l),{},{journeyDate:e.target.value})),min:(new Date).toISOString().split("T")[0],className:"input",required:!0})]})]}),"roundTrip"===i&&(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"label",children:"Return Date"}),(0,cs.jsxs)("div",{className:"field",children:[(0,cs.jsx)(fs.A,{className:"field__icon"}),(0,cs.jsx)("input",{type:"date",value:l.returnDate,onChange:e=>c((0,Ie.A)((0,Ie.A)({},l),{},{returnDate:e.target.value})),min:l.journeyDate||(new Date).toISOString().split("T")[0],className:"input",required:!0})]})]})]}),(0,cs.jsx)("button",{type:"submit",className:"btnSearch",disabled:d,children:d?(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Searching..."]}):(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)(ys.A,{className:"btnSearch__icon"}),"Search buses"]})})]})]})};function Cd(){const e=(0,r.useRef)(!1);return Ys(()=>(e.current=!0,()=>{e.current=!1}),[]),e}class _d extends r.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Td(e){let{children:t,isPresent:s}=e;const a=(0,r.useId)(),n=(0,r.useRef)(null),i=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)(()=>{const{width:e,height:t,top:r,left:o}=i.current;if(s||!n.current||!e||!t)return;n.current.dataset.motionPopId=a;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule('\n          [data-motion-pop-id="'.concat(a,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(r,"px !important;\n            left: ").concat(o,"px !important;\n          }\n        ")),()=>{document.head.removeChild(l)}},[s]),r.createElement(_d,{isPresent:s,childRef:n,sizeRef:i},r.cloneElement(t,{ref:n}))}const Pd=e=>{let{children:t,initial:s,isPresent:a,onExitComplete:n,custom:i,presenceAffectsLayout:o,mode:l}=e;const c=fa(Ed),d=(0,r.useId)(),u=(0,r.useMemo)(()=>({id:d,initial:s,isPresent:a,custom:i,onExitComplete:e=>{c.set(e,!0);for(const t of c.values())if(!t)return;n&&n()},register:e=>(c.set(e,!1),()=>c.delete(e))}),o?void 0:[a]);return(0,r.useMemo)(()=>{c.forEach((e,t)=>c.set(t,!1))},[a]),r.useEffect(()=>{!a&&!c.size&&n&&n()},[a]),"popLayout"===l&&(t=r.createElement(Td,{isPresent:a},t)),r.createElement(qs.Provider,{value:u},t)};function Ed(){return new Map}const Dd=e=>e.key||"";const Md=e=>{let{children:t,custom:s,initial:a=!0,onExitComplete:n,exitBeforeEnter:i,presenceAffectsLayout:o=!0,mode:l="sync"}=e;nn(!i,"Replace exitBeforeEnter with mode='wait'");const c=(0,r.useContext)(cr).forceRender||function(){const e=Cd(),[t,s]=(0,r.useState)(0),a=(0,r.useCallback)(()=>{e.current&&s(t+1)},[t]);return[(0,r.useCallback)(()=>Ca.postRender(a),[a]),t]}()[0],d=Cd(),u=function(e){const t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}(t);let h=u;const m=(0,r.useRef)(new Map).current,p=(0,r.useRef)(h),x=(0,r.useRef)(new Map).current,g=(0,r.useRef)(!0);if(Ys(()=>{g.current=!1,function(e,t){e.forEach(e=>{const s=Dd(e);t.set(s,e)})}(u,x),p.current=h}),function(e){(0,r.useEffect)(()=>()=>e(),[])}(()=>{g.current=!0,x.clear(),m.clear()}),g.current)return r.createElement(r.Fragment,null,h.map(e=>r.createElement(Pd,{key:Dd(e),isPresent:!0,initial:!!a&&void 0,presenceAffectsLayout:o,mode:l},e)));h=[...h];const f=p.current.map(Dd),y=u.map(Dd),b=f.length;for(let r=0;r<b;r++){const e=f[r];-1!==y.indexOf(e)||m.has(e)||m.set(e,void 0)}return"wait"===l&&m.size&&(h=[]),m.forEach((e,t)=>{if(-1!==y.indexOf(t))return;const a=x.get(t);if(!a)return;const i=f.indexOf(t);let g=e;if(!g){const e=()=>{m.delete(t);const e=Array.from(x.keys()).filter(e=>!y.includes(e));if(e.forEach(e=>x.delete(e)),p.current=u.filter(s=>{const r=Dd(s);return r===t||e.includes(r)}),!m.size){if(!1===d.current)return;c(),n&&n()}};g=r.createElement(Pd,{key:Dd(a),isPresent:!1,onExitComplete:e,custom:s,presenceAffectsLayout:o,mode:l},a),m.set(t,g)}h.splice(i,0,g)}),h=h.map(e=>{const t=e.key;return m.has(t)?e:r.createElement(Pd,{key:Dd(e),isPresent:!0,presenceAffectsLayout:o,mode:l},e)}),r.createElement(r.Fragment,null,m.size?h:h.map(e=>(0,r.cloneElement)(e)))};var Od=s(516);const Rd=(0,Ns.A)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),Id=(0,Ns.A)("signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]),Ld=(0,Ns.A)("battery",[["path",{d:"M 22 14 L 22 10",key:"nqc4tb"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]]),Fd=(0,Ns.A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Bd=e=>{var t;let{trip:s,isTracking:a=!1,onLocationUpdate:n,className:i="w-full h-full"}=e;const o=(0,r.useRef)(null),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),[h,m]=(0,r.useState)(null),[p,x]=(0,r.useState)(!1),[g,f]=(0,r.useState)(!1),[y,b]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=void 0,t=e;x(t),console.log("Google Maps API key not configured. Using fallback interface."),c(!0)},[]),(0,r.useEffect)(()=>{s&&(p&&!l?v():p||c(!0))},[s,p,l]),(0,r.useEffect)(()=>{l&&s&&j()},[s,l]),(0,r.useEffect)(()=>{let e;return g&&s&&l&&(e=setInterval(()=>{A()},5e3)),()=>{e&&clearInterval(e)}},[g,s,l]);const v=()=>{if(!window.google||!window.google.maps)return void console.error("Google Maps API not loaded");const e=o.current;if(!e)return;const t=new window.google.maps.Map(e,{zoom:13,center:s.coordinates?{lat:s.coordinates.lat,lng:s.coordinates.lng}:{lat:9.9312,lng:76.2673},mapTypeId:"roadmap",disableDefaultUI:!1,zoomControl:!0,streetViewControl:!1,fullscreenControl:!0,mapTypeControl:!0,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]});o.current.mapInstance=t,c(!0)},j=()=>{var e;if(null===(e=o.current)||void 0===e||!e.mapInstance||!s)return;const t=o.current.mapInstance;if(o.current.markers&&o.current.markers.forEach(e=>e.setMap(null)),o.current.routePath&&o.current.routePath.setMap(null),o.current.markers=[],s.coordinates){var r,a;const e=new window.google.maps.Marker({position:{lat:s.coordinates.lat,lng:s.coordinates.lng},map:t,title:"Bus ".concat((null===(r=s.busId)||void 0===r?void 0:r.busNumber)||"Unknown"," - ").concat(s.currentLocation),icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('\n            <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">\n              <circle cx="20" cy="20" r="18" fill="#E91E63" stroke="#FFFFFF" stroke-width="3"/>\n              <path d="M12 16h16v8H12z" fill="#FFFFFF"/>\n              <circle cx="20" cy="20" r="3" fill="#E91E63"/>\n            </svg>\n          '),scaledSize:new window.google.maps.Size(40,40),anchor:new window.google.maps.Point(20,20)},animation:window.google.maps.Animation.BOUNCE});o.current.markers.push(e),t.setCenter({lat:s.coordinates.lat,lng:s.coordinates.lng});const n=new window.google.maps.InfoWindow({content:'\n          <div class="p-2">\n            <h3 class="font-semibold text-gray-900">'.concat((null===(a=s.busId)||void 0===a?void 0:a.busNumber)||"Bus",'</h3>\n            <p class="text-sm text-gray-600">').concat(s.currentLocation,'</p>\n            <p class="text-sm text-gray-500">Speed: ').concat(s.currentSpeed,'</p>\n            <p class="text-xs text-gray-400">Updated: ').concat(s.lastUpdate,"</p>\n          </div>\n        ")});e.addListener("click",()=>{n.open(t,e)})}N(s)},N=async e=>{var t;if(null===(t=o.current)||void 0===t||!t.mapInstance||!e)return;const s=o.current.mapInstance,r=w(e);if(r.length>1){const e=new window.google.maps.Polyline({path:r,geodesic:!0,strokeColor:"#E91E63",strokeOpacity:.8,strokeWeight:4,map:s});if(o.current.routePath=e,r.length>0){const e=new window.google.maps.Marker({position:r[0],map:s,title:"Start Point",icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('\n              <svg width="30" height="30" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">\n                <circle cx="15" cy="15" r="12" fill="#00BCD4" stroke="#FFFFFF" stroke-width="2"/>\n                <text x="15" y="19" text-anchor="middle" fill="white" font-size="12" font-weight="bold">S</text>\n              </svg>\n            '),scaledSize:new window.google.maps.Size(30,30),anchor:new window.google.maps.Point(15,15)}}),t=new window.google.maps.Marker({position:r[r.length-1],map:s,title:"End Point",icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('\n              <svg width="30" height="30" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">\n                <circle cx="15" cy="15" r="12" fill="#4CAF50" stroke="#FFFFFF" stroke-width="2"/>\n                <text x="15" y="19" text-anchor="middle" fill="white" font-size="12" font-weight="bold">E</text>\n              </svg>\n            '),scaledSize:new window.google.maps.Size(30,30),anchor:new window.google.maps.Point(15,15)}});o.current.markers.push(e,t)}}},w=e=>{const t=[{lat:8.5241,lng:76.9558},{lat:9.5916,lng:76.5219}],s=k(t[0],t[1]);return[t[0],...s,t[1]]},k=(e,t)=>{const s=[];for(let r=1;r<5;r++){const a=r/5,n=e.lat+(t.lat-e.lat)*a,i=e.lng+(t.lng-e.lng)*a,o=.01;s.push({lat:n+(Math.random()-.5)*o,lng:i+(Math.random()-.5)*o})}return s},A=()=>{var e;if(!s||null===(e=o.current)||void 0===e||!e.mapInstance)return;const t=w(s),r=t[Math.floor(Math.random()*t.length)],a={lat:r.lat+.001*(Math.random()-.5),lng:r.lng+.001*(Math.random()-.5)};if(b(e=>[...e.slice(-10),a]),u(a),o.current.markers&&o.current.markers.length>0){var i;const e=o.current.markers[0];e.setPosition(a);const t=new window.google.maps.InfoWindow({content:'\n          <div class="p-2">\n            <h3 class="font-semibold text-gray-900">'.concat((null===(i=s.busId)||void 0===i?void 0:i.busNumber)||"Bus",'</h3>\n            <p class="text-sm text-gray-600">').concat(s.currentLocation,'</p>\n            <p class="text-sm text-gray-500">Speed: ').concat(s.currentSpeed,'</p>\n            <p class="text-xs text-gray-400">Updated: Just now</p>\n          </div>\n        ')});o.current.infoWindow&&o.current.infoWindow.close(),o.current.infoWindow=t,t.open(o.current.mapInstance,e)}n&&n((0,Ie.A)((0,Ie.A)({},s),{},{coordinates:a,lastUpdate:"Just now"}))},S=()=>{if(null!==s&&void 0!==s&&s.coordinates){const e="https://www.google.com/maps?q=".concat(s.coordinates.lat,",").concat(s.coordinates.lng);window.open(e,"_blank")}};var C,_,T,P,E;return(0,r.useEffect)(()=>{window.google},[p]),p?(0,cs.jsxs)("div",{className:"".concat(i," relative"),children:[(0,cs.jsx)("div",{ref:o,className:"w-full h-full rounded-lg overflow-hidden",style:{minHeight:"400px"}}),(0,cs.jsx)("div",{className:"absolute top-4 left-4 bg-white rounded-lg p-3 shadow-lg border border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Live Tracking"})]})}),(0,cs.jsxs)("div",{className:"absolute top-4 right-4 flex gap-2",children:[(0,cs.jsxs)("button",{onClick:()=>{f(!g)},className:"px-3 py-2 rounded-lg shadow-lg border transition-all duration-200 flex items-center gap-2 ".concat(g?"bg-green-500 hover:bg-green-600 text-white border-green-500":"bg-white hover:bg-gray-50 text-gray-700 border-gray-200"),title:g?"Stop Real-time Tracking":"Start Real-time Tracking",children:[(0,cs.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(g?"bg-white animate-pulse":"bg-gray-400")}),"Live"]}),(0,cs.jsxs)("button",{onClick:()=>{n&&n(s)},className:"bg-white hover:bg-gray-50 text-gray-700 font-semibold px-3 py-2 rounded-lg shadow-lg border border-gray-200 transition-all duration-200 flex items-center gap-2",title:"Refresh Location",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4"}),"Refresh"]})]}),s&&(0,cs.jsxs)("div",{className:"absolute bottom-4 left-4 bg-white rounded-lg p-4 shadow-lg border border-gray-200 max-w-xs",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,cs.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),(0,cs.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Bus ",null===(t=s.busId)||void 0===t?void 0:t.busNumber]})]}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:s.currentLocation}),(0,cs.jsxs)("p",{className:"text-xs text-gray-500",children:["Speed: ",s.currentSpeed]}),(0,cs.jsxs)("p",{className:"text-xs text-gray-400",children:["Updated: ",s.lastUpdate]})]})]}):(0,cs.jsx)("div",{className:"".concat(i," relative bg-gray-200 flex items-center justify-center rounded-lg"),children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)(gs.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-500 mb-2",children:"Google Maps API key required"}),(0,cs.jsx)("p",{className:"text-sm text-gray-400",children:"Please configure your Google Maps API key"}),s&&(0,cs.jsxs)("div",{className:"mt-4 p-4 bg-white rounded-lg shadow-lg max-w-sm",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,cs.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),(0,cs.jsx)("span",{className:"font-semibold text-gray-900",children:"Bus Information"})]}),(0,cs.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(Ad,{className:"w-4 h-4 text-blue-600"}),(0,cs.jsx)("span",{className:"font-medium",children:(null===(C=s.busId)||void 0===C?void 0:C.busNumber)||"Bus #123"})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(gs.A,{className:"w-4 h-4 text-green-600"}),(0,cs.jsx)("span",{children:s.currentLocation||"Current Location"})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4 text-orange-600"}),(0,cs.jsx)("span",{children:s.currentSpeed||"Unknown Speed"})]})]}),(0,cs.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,cs.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:["Coordinates: ",null===(_=s.coordinates)||void 0===_||null===(T=_.lat)||void 0===T?void 0:T.toFixed(4),", ",null===(P=s.coordinates)||void 0===P||null===(E=P.lng)||void 0===E?void 0:E.toFixed(4)]}),(0,cs.jsxs)("button",{onClick:S,className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-2",children:["Open in Google Maps ",(0,cs.jsx)(Fd,{className:"w-4 h-4"})]})]})]})]})})},zd=e=>{var t,s;let{isOpen:a,onClose:n}=e;const[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!1),[h,m]=(0,r.useState)(!1),[p,x]=(0,r.useState)(null),g=[{_id:"1",tripId:"TRP001",routeId:{routeName:"Thiruvananthapuram \u2192 Kottayam",routeNumber:"RT001",startingPoint:{city:"Thiruvananthapuram",location:"Central Bus Station"},endingPoint:{city:"Kottayam",location:"KSRTC Bus Station"}},busId:{busNumber:"KL-07-AB-1234",busType:"AC Sleeper",capacity:{total:35,available:12}},driverId:{name:"Rajesh Kumar",phone:"+91-9876543210"},conductorId:{name:"Priya Menon",phone:"+91-9876543211"},serviceDate:(new Date).toISOString(),startTime:"08:00",endTime:"12:30",status:"running",currentLocation:"Near Alappuzha, Kerala",coordinates:{lat:9.4981,lng:76.3388},currentSpeed:"65 km/h",estimatedArrival:"12:30",lastUpdate:(new Date).toLocaleTimeString(),passengers:23},{_id:"2",tripId:"TRP002",routeId:{routeName:"Kochi \u2192 Kozhikode",routeNumber:"RT002",startingPoint:{city:"Kochi",location:"KSRTC Bus Station"},endingPoint:{city:"Kozhikode",location:"Central Bus Station"}},busId:{busNumber:"KL-11-CD-5678",busType:"Semi-Deluxe",capacity:{total:40,available:8}},driverId:{name:"Suresh Nair",phone:"+91-9876543212"},conductorId:{name:"Anita Raj",phone:"+91-9876543213"},serviceDate:(new Date).toISOString(),startTime:"10:30",endTime:"15:00",status:"running",currentLocation:"Near Thrissur, Kerala",coordinates:{lat:10.5276,lng:76.2144},currentSpeed:"55 km/h",estimatedArrival:"15:00",lastUpdate:"1 minute ago",passengers:32},{_id:"3",tripId:"TRP003",routeId:{routeName:"Thiruvananthapuram \u2192 Bangalore",routeNumber:"RT003",startingPoint:{city:"Thiruvananthapuram",location:"Central Bus Station"},endingPoint:{city:"Bangalore",location:"Majestic Bus Station"}},busId:{busNumber:"KL-01-EF-9012",busType:"AC Sleeper",capacity:{total:30,available:5}},driverId:{name:"Vikram Singh",phone:"+91-9876543214"},conductorId:{name:"Lakshmi Devi",phone:"+91-9876543215"},serviceDate:(new Date).toISOString(),startTime:"20:00",endTime:"06:00",status:"running",currentLocation:"Near Salem, Tamil Nadu",coordinates:{lat:11.6643,lng:78.146},currentSpeed:"70 km/h",estimatedArrival:"06:00",lastUpdate:"3 minutes ago",passengers:25}];(0,r.useEffect)(()=>(a?(console.log("\ud83d\ude8c BusTrackingModal opened - Direct map fetch..."),o(g),c(g[0]),setTimeout(()=>f(),100),y()):b(),()=>b()),[a]);const f=async()=>{try{const t=await fetch("/api/tracking/running-trips");if(!t.ok)throw new Error("API request failed: ".concat(t.status));{var e;const s=await t.json();if(!s.success||null===(e=s.data)||void 0===e||!e.trips)throw new Error("Invalid API response");{const e=s.data.trips||[];o(e),e.length>0&&c(e[0]),console.log("\u2705 Fetched running trips from API:",e.length)}}}catch(t){console.error("\u274c Error fetching running trips:",t),console.warn("Keeping sample data as fallback")}},y=()=>{const e=setInterval(f,3e4);x(e)},b=()=>{p&&(clearInterval(p),x(null))};return(0,cs.jsx)(Md,{children:a&&(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:n,children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl w-full max-w-7xl h-[90vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-3",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,cs.jsx)(Ad,{className:"w-6 h-6 text-white"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Live Bus Tracking"}),(0,cs.jsx)("p",{className:"text-gray-500",children:"Track currently running buses in real-time"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-3",children:[(0,cs.jsx)("button",{onClick:f,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Refresh",children:(0,cs.jsx)(Od.A,{className:"w-5 h-5"})}),(0,cs.jsx)("button",{onClick:n,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:(0,cs.jsx)(Bs.A,{className:"w-6 h-6"})})]})]}),(0,cs.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,cs.jsxs)("div",{className:"w-96 border-r border-gray-200 flex flex-col",children:[(0,cs.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,cs.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Running Trips (",i.length,")"]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,cs.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,cs.jsx)("span",{children:"Live Updates"})]})]}),(0,cs.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,cs.jsx)("div",{className:"p-4 space-y-3",children:i.map(e=>{const t=(e=>{const t={running:{color:"bg-green-100 text-green-800 border-green-200",icon:md.A,text:"Running"},scheduled:{color:"bg-blue-100 text-blue-800 border-blue-200",icon:sd.A,text:"Scheduled"},delayed:{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:vd.A,text:"Delayed"},completed:{color:"bg-gray-100 text-gray-800 border-gray-200",icon:Ad,text:"Completed"}};return t[e]||t.running})(e.status),s=t.icon;return(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-4 rounded-xl border-2 cursor-pointer transition-all ".concat((null===l||void 0===l?void 0:l._id)===e._id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:shadow-md"),onClick:()=>c(e),children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,cs.jsx)("span",{className:"font-semibold text-gray-900",children:e.tripId}),(0,cs.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ".concat(t.color),children:[(0,cs.jsx)(s,{className:"w-3 h-3 mr-1"}),t.text]})]}),(0,cs.jsxs)("div",{className:"space-y-2",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,cs.jsx)(As.A,{className:"w-4 h-4 text-blue-600"}),(0,cs.jsx)("span",{className:"font-medium text-gray-900",children:e.routeId.routeName})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,cs.jsx)(ks.A,{className:"w-4 h-4 text-gray-500"}),(0,cs.jsx)("span",{children:e.busId.busNumber}),(0,cs.jsx)("span",{className:"text-gray-400",children:"\u2022"}),(0,cs.jsx)("span",{children:e.busId.busType})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,cs.jsx)(gs.A,{className:"w-4 h-4 text-green-600"}),(0,cs.jsx)("span",{children:e.currentLocation})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,cs.jsx)(Ad,{className:"w-4 h-4 text-orange-600"}),(0,cs.jsx)("span",{children:e.currentSpeed}),(0,cs.jsx)("span",{className:"text-gray-400",children:"\u2022"}),(0,cs.jsx)("span",{children:e.lastUpdate})]})]})]},e._id)})})})]}),(0,cs.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,cs.jsx)("div",{className:"h-2/3 relative m-4",children:(0,cs.jsx)("div",{style:{background:"#FFFFFF",borderRadius:"12px",border:"1px solid #E5E7EB",boxShadow:"0 4px 10px rgba(0,0,0,0.06)",padding:0,overflow:"hidden",height:"100%"},children:(0,cs.jsx)(Bd,{trip:l?{busId:{busNumber:(null===(t=l.busId)||void 0===t?void 0:t.busNumber)||"N/A"},routeId:{routeName:(null===(s=l.routeId)||void 0===s?void 0:s.routeName)||"Unknown Route"},currentLocation:l.currentLocation||"Current Location",currentSpeed:l.currentSpeed||"0 km/h",lastUpdate:l.lastUpdate||(new Date).toLocaleTimeString(),coordinates:l.coordinates||{lat:10.8505,lng:76.2711},estimatedArrival:l.estimatedArrival,passengers:l.passengers,status:l.status}:null,isTracking:!0,onLocationUpdate:e=>{console.log("Location updated:",e)},className:"w-full h-full"})})}),(0,cs.jsxs)("div",{className:"h-1/3 p-4 border-t border-gray-200",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Trip Details"}),l?(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"text-sm text-gray-500",children:"Route"}),(0,cs.jsx)("p",{className:"font-medium text-gray-900",children:l.routeId.routeName})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"text-sm text-gray-500",children:"Bus Number"}),(0,cs.jsx)("p",{className:"font-medium text-gray-900",children:l.busId.busNumber})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"text-sm text-gray-500",children:"Driver"}),(0,cs.jsx)("p",{className:"font-medium text-gray-900",children:l.driverId.name})]})]}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"text-sm text-gray-500",children:"Current Speed"}),(0,cs.jsx)("p",{className:"font-medium text-gray-900",children:l.currentSpeed})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"text-sm text-gray-500",children:"Estimated Arrival"}),(0,cs.jsx)("p",{className:"font-medium text-gray-900",children:l.estimatedArrival})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"text-sm text-gray-500",children:"Passengers"}),(0,cs.jsxs)("p",{className:"font-medium text-gray-900",children:[l.passengers,"/",l.busId.capacity.total]})]})]})]}):(0,cs.jsxs)("div",{className:"text-center py-8",children:[(0,cs.jsx)(ks.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,cs.jsx)("p",{className:"text-gray-500",children:"No trip selected"})]}),(0,cs.jsxs)("div",{className:"mt-4 flex items-center justify-between bg-gray-50 rounded-lg p-3",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-4",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(Rd,{className:"w-4 h-4 text-green-600"}),(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"GPS Active"})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(Id,{className:"w-4 h-4 text-green-600"}),(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Signal Strong"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(Ld,{className:"w-4 h-4 text-green-600"}),(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"100%"})]})]})]})]})]})]})})})},Ud=s.p+"static/media/hero-bus.7cb677ed76bcc5c368c8.png",Vd=()=>{const[e,t]=(0,r.useState)(!1),[s,a]=(0,r.useState)(!1),n=te(),{user:i}=(0,Re.A)();return(0,cs.jsxs)("div",{className:"landing-root",children:[(0,cs.jsx)(ud,{}),(0,cs.jsx)(id,{isMobileMenuOpen:e,setIsMobileMenuOpen:t}),(0,cs.jsxs)("section",{className:"hero",children:[(0,cs.jsx)("img",{src:Ud,alt:"",className:"hero__bus","aria-hidden":"true"}),(0,cs.jsx)("div",{className:"hero__overlay"}),(0,cs.jsx)("div",{className:"container hero__container",children:(0,cs.jsxs)("div",{className:"hero__grid",children:[(0,cs.jsxs)(ed.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.6},className:"hero__left",children:[(0,cs.jsxs)("h1",{className:"hero__title",children:["Travel Smart,",(0,cs.jsx)("span",{children:"Travel Safe"})]}),(0,cs.jsx)("p",{className:"hero__subtitle",children:"Book your bus tickets with YATRIK ERP. Experience comfortable, reliable, and affordable bus travel across India."}),(0,cs.jsxs)("div",{className:"hero__ctas",children:[(0,cs.jsxs)(ed.button,{whileHover:{scale:1.03},whileTap:{scale:.98},onClick:()=>{if(console.log("handleBookNow called:",{user:i,hasUser:!!i}),!i)return console.log("No user, redirecting to login"),void n("/login?next=/passenger/dashboard");const e=(i.role||"passenger").toUpperCase();console.log("User role:",e),"PASSENGER"===e?(console.log("Redirecting to /passenger/dashboard"),n("/passenger/dashboard")):"ADMIN"===e?(console.log("Redirecting to /admin"),n("/admin")):"CONDUCTOR"===e?(console.log("Redirecting to /conductor"),n("/conductor")):"DRIVER"===e?(console.log("Redirecting to /driver"),n("/driver")):"DEPOT_MANAGER"===e?(console.log("Redirecting to /depot"),n("/depot")):(console.log("Redirecting to /dashboard"),n("/dashboard"))},className:"btn btn--accent",children:["Book Now ",(0,cs.jsx)(td,{size:16})]}),(0,cs.jsxs)(ed.button,{whileHover:{scale:1.03},whileTap:{scale:.98},onClick:()=>a(!0),className:"btn btn--secondary",children:[(0,cs.jsx)(ks.A,{size:16})," Track Bus"]})]})]}),(0,cs.jsx)(ed.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.6,delay:.1},className:"hero__right",children:(0,cs.jsx)(Sd,{})})]})})]}),(0,cs.jsx)("section",{className:"section",children:(0,cs.jsx)("div",{className:"container",children:(0,cs.jsxs)("div",{className:"grid-3",children:[(0,cs.jsx)("div",{className:"lg:col-span-2",children:(0,cs.jsx)(yd,{routes:[{from:"Kochi",to:"Thiruvananthapuram",frequency:"Every 2 hours",fare:"\u20b9350"},{from:"Kozhikode",to:"Kochi",frequency:"Every 3 hours",fare:"\u20b9280"},{from:"Bangalore",to:"Mysore",frequency:"Every 45 mins",fare:"\u20b9180"},{from:"Chennai",to:"Pondicherry",frequency:"Every 2 hours",fare:"\u20b9120"},{from:"Hyderabad",to:"Warangal",frequency:"Every 1 hour",fare:"\u20b9100"}]})}),(0,cs.jsx)("div",{children:(0,cs.jsx)(wd,{alerts:[{type:"info",message:"New Kerala routes added: Kochi to Thiruvananthapuram, Kozhikode to Kochi"},{type:"warning",message:"Monsoon season - expect delays on coastal routes"},{type:"success",message:"All buses now equipped with free WiFi and charging ports"}]})})]})})}),(0,cs.jsx)(fd,{}),(0,cs.jsx)("section",{className:"section section--muted",children:(0,cs.jsxs)("div",{className:"container",children:[(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"section__intro",children:[(0,cs.jsx)("h2",{className:"section__title",children:"Why Choose YATRIK ERP?"}),(0,cs.jsx)("p",{className:"section__subtitle",children:"We're committed to providing the best bus travel experience with modern technology and excellent service."})]}),(0,cs.jsx)("div",{className:"features",children:[{icon:(0,cs.jsx)(ks.A,{className:"feature__icon"}),title:"Wide Network",description:"Connect to 500+ cities across India with our extensive bus network."},{icon:(0,cs.jsx)(sd.A,{className:"feature__icon"}),title:"Real-time Updates",description:"Get live tracking, delays, and status updates for your journey."},{icon:(0,cs.jsx)(rd.A,{className:"feature__icon"}),title:"Premium Service",description:"Enjoy comfortable seating, WiFi, and entertainment on premium routes."},{icon:(0,cs.jsx)(gs.A,{className:"feature__icon"}),title:"Smart Routes",description:"AI-powered route optimization for faster and efficient travel."}].map((e,t)=>(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1*t},viewport:{once:!0},className:"feature",children:[(0,cs.jsx)("div",{className:"feature__iconWrap",children:e.icon}),(0,cs.jsx)("h3",{className:"feature__title",children:e.title}),(0,cs.jsx)("p",{className:"feature__desc",children:e.description})]},t))})]})}),(0,cs.jsx)("footer",{className:"footer",children:(0,cs.jsxs)("div",{className:"container",children:[(0,cs.jsxs)("div",{className:"footer__grid",children:[(0,cs.jsxs)("div",{className:"footer__brand",children:[(0,cs.jsx)("h3",{children:"YATRIK ERP"}),(0,cs.jsx)("p",{children:"Your trusted partner for safe, comfortable, and affordable bus travel across India. Experience the future of transportation with our smart booking system."}),(0,cs.jsx)("div",{className:"footer__socials",children:[{icon:"Facebook",href:"#"},{icon:"Twitter",href:"#"},{icon:"Instagram",href:"#"},{icon:"YouTube",href:"#"}].map((e,t)=>(0,cs.jsx)("a",{href:e.href,className:"social","aria-label":e.icon,children:(0,cs.jsx)("span",{children:e.icon[0]})},t))})]}),(0,cs.jsxs)("div",{className:"footer__col",children:[(0,cs.jsx)("h4",{children:"Quick Links"}),(0,cs.jsx)("ul",{children:["About Us","Contact","Terms & Conditions","Privacy Policy","FAQ"].map((e,t)=>(0,cs.jsx)("li",{children:(0,cs.jsx)("a",{href:"#",children:e})},t))})]}),(0,cs.jsxs)("div",{className:"footer__col",children:[(0,cs.jsx)("h4",{children:"Support"}),(0,cs.jsxs)("ul",{children:[(0,cs.jsxs)("li",{className:"footer__support",children:[(0,cs.jsx)(ad,{size:12}),(0,cs.jsx)("span",{children:"1800-123-4567"})]}),(0,cs.jsx)("li",{children:"support@yatrikerp.com"}),(0,cs.jsx)("li",{children:"24/7 Customer Support"})]})]})]}),(0,cs.jsx)("div",{className:"footer__bottom",children:"\xa9 2024 YATRIK ERP. All rights reserved."})]})}),(0,cs.jsx)(zd,{isOpen:s,onClose:()=>a(!1)})]})};var Kd=s(2580);const Wd=()=>{const e=te(),[t,s]=(0,r.useState)({from:"",to:"",date:"",passengers:1,tripType:"oneWay"}),[a,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)({from:[],to:[]}),[d,u]=(0,r.useState)({from:!1,to:!1}),[h,m]=(0,r.useState)({priceRange:[0,2e3],busType:"all",departureTime:"all",amenities:[]}),p=(0,r.useRef)(null),x=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=new Date;e.setDate(e.getDate()+1),s(t=>(0,Ie.A)((0,Ie.A)({},t),{},{date:e.toISOString().split("T")[0]}))},[]);const g=(e,t)=>{s(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t})),("from"===e||"to"===e)&&t.length>=1?(f(e,t),u(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:!0}))):"from"!==e&&"to"!==e||0!==t.length||u(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:!1}))},f=async(e,t)=>{try{const s=await fetch("/api/booking/autocomplete?query=".concat(t,"&type=").concat(e)),r=await s.json();r.ok&&c(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:r.data.suggestions.slice(0,5)}))}catch(s){console.error("Error fetching suggestions:",s)}},y=(e,t)=>{var r;(s(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t.city})),u(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:!1})),"from"===e)&&(null===(r=x.current)||void 0===r||r.focus())},b=a.filter(e=>!(e.fare.current<h.priceRange[0]||e.fare.current>h.priceRange[1])&&(("all"===h.busType||e.bus.type===h.busType)&&!(h.amenities.length>0&&!h.amenities.every(t=>e.bus.amenities.includes(t)))));const v=(e,t)=>{s(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t})),u(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:!1}))};return(0,cs.jsxs)("div",{className:"trip-search-container",children:[(0,cs.jsxs)("div",{className:"search-form",children:[(0,cs.jsxs)("div",{className:"search-header",children:[(0,cs.jsx)("h2",{children:"Search Bus Tickets"}),(0,cs.jsx)("p",{children:"Find and book your perfect journey"})]}),(0,cs.jsxs)("div",{className:"search-inputs",children:[(0,cs.jsxs)("div",{className:"input-group",children:[(0,cs.jsx)("label",{htmlFor:"from",children:"From"}),(0,cs.jsxs)("div",{className:"input-with-suggestions",children:[(0,cs.jsxs)("div",{className:"input-wrapper",children:[(0,cs.jsx)(gs.A,{className:"input-icon"}),(0,cs.jsx)("input",{ref:p,type:"text",id:"from",placeholder:"Enter departure city",value:t.from,onChange:e=>g("from",e.target.value),onFocus:()=>u(e=>(0,Ie.A)((0,Ie.A)({},e),{},{from:!0}))})]}),d.from&&(0,cs.jsx)("div",{className:"suggestions-dropdown",children:l.from.length>0?l.from.map((e,t)=>(0,cs.jsxs)("div",{className:"suggestion-item",onClick:()=>y("from",e),children:[(0,cs.jsx)(gs.A,{className:"suggestion-icon"}),(0,cs.jsxs)("div",{className:"suggestion-content",children:[(0,cs.jsx)("div",{className:"suggestion-city",children:e.city}),(0,cs.jsx)("div",{className:"suggestion-location",children:e.location}),(0,cs.jsxs)("div",{className:"suggestion-routes",children:[e.totalRoutes," routes available"]})]})]},t)):(0,cs.jsx)("div",{className:"suggestion-item no-results",children:(0,cs.jsx)("div",{children:"No suggestions found"})})})]})]}),(0,cs.jsxs)("div",{className:"input-group",children:[(0,cs.jsx)("label",{htmlFor:"to",children:"To"}),(0,cs.jsxs)("div",{className:"input-with-suggestions",children:[(0,cs.jsxs)("div",{className:"input-wrapper",children:[(0,cs.jsx)(gs.A,{className:"input-icon"}),(0,cs.jsx)("input",{ref:x,type:"text",id:"to",placeholder:"Enter destination city",value:t.to,onChange:e=>g("to",e.target.value),onFocus:()=>u(e=>(0,Ie.A)((0,Ie.A)({},e),{},{to:!0}))})]}),d.to&&(0,cs.jsx)("div",{className:"suggestions-dropdown",children:l.to.length>0?l.to.map((e,t)=>(0,cs.jsxs)("div",{className:"suggestion-item",onClick:()=>y("to",e),children:[(0,cs.jsx)(gs.A,{className:"suggestion-icon"}),(0,cs.jsxs)("div",{className:"suggestion-content",children:[(0,cs.jsx)("div",{className:"suggestion-city",children:e.city}),(0,cs.jsx)("div",{className:"suggestion-location",children:e.location}),(0,cs.jsxs)("div",{className:"suggestion-routes",children:[e.totalRoutes," routes available"]})]})]},t)):(0,cs.jsx)("div",{className:"suggestion-item no-results",children:(0,cs.jsx)("div",{children:"No suggestions found"})})})]})]}),(0,cs.jsxs)("div",{className:"input-group",children:[(0,cs.jsx)("label",{htmlFor:"date",children:"Date of Journey"}),(0,cs.jsxs)("div",{className:"input-wrapper",children:[(0,cs.jsx)(fs.A,{className:"input-icon"}),(0,cs.jsx)("input",{type:"date",id:"date",value:t.date,onChange:e=>g("date",e.target.value),min:(new Date).toISOString().split("T")[0]})]})]}),(0,cs.jsxs)("div",{className:"input-group",children:[(0,cs.jsx)("label",{htmlFor:"passengers",children:"Passengers"}),(0,cs.jsxs)("div",{className:"input-wrapper",children:[(0,cs.jsx)(Ss.A,{className:"input-icon"}),(0,cs.jsx)("select",{id:"passengers",value:t.passengers,onChange:e=>g("passengers",parseInt(e.target.value)),children:[1,2,3,4,5,6].map(e=>(0,cs.jsxs)("option",{value:e,children:[e," ",1===e?"Passenger":"Passengers"]},e))})]})]})]}),(0,cs.jsxs)("div",{className:"quick-cities",children:[(0,cs.jsx)("label",{children:"Quick Select:"}),(0,cs.jsx)("div",{className:"city-buttons",children:["Kochi","Thiruvananthapuram","Kozhikode","Alappuzha","Kollam","Thrissur","Kottayam","Palakkad"].map(e=>(0,cs.jsx)("button",{type:"button",className:"city-btn",onClick:()=>{t.from?t.to||v("to",e):v("from",e)},children:e},e))})]}),(0,cs.jsx)("button",{className:"search-btn",onClick:async()=>{if(t.from&&t.to&&t.date){o(!0);try{const e=await fetch("/api/booking/search?".concat(new URLSearchParams({from:t.from,to:t.to,date:t.date,tripType:t.tripType}))),s=await e.json();s.ok?n(s.data.trips||[]):(n([]),alert(s.message||"No trips found"))}catch(e){console.error("Search error:",e),alert("Failed to search trips")}finally{o(!1)}}else alert("Please fill in all required fields")},disabled:i||!t.from||!t.to||!t.date,children:i?(0,cs.jsx)("div",{className:"loading-spinner"}):(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)(ys.A,{className:"search-icon"}),"Search Buses"]})})]}),a.length>0&&(0,cs.jsxs)("div",{className:"search-filters",children:[(0,cs.jsxs)("div",{className:"filters-header",children:[(0,cs.jsx)(Kd.A,{className:"filter-icon"}),(0,cs.jsx)("h3",{children:"Filters"})]}),(0,cs.jsxs)("div",{className:"filters-content",children:[(0,cs.jsxs)("div",{className:"filter-group",children:[(0,cs.jsx)("label",{children:"Price Range (\u20b9)"}),(0,cs.jsxs)("div",{className:"price-range",children:[(0,cs.jsx)("input",{type:"number",placeholder:"Min",value:h.priceRange[0],onChange:e=>m(t=>(0,Ie.A)((0,Ie.A)({},t),{},{priceRange:[parseInt(e.target.value)||0,t.priceRange[1]]}))}),(0,cs.jsx)("span",{children:"to"}),(0,cs.jsx)("input",{type:"number",placeholder:"Max",value:h.priceRange[1],onChange:e=>m(t=>(0,Ie.A)((0,Ie.A)({},t),{},{priceRange:[t.priceRange[0],parseInt(e.target.value)||2e3]}))})]})]}),(0,cs.jsxs)("div",{className:"filter-group",children:[(0,cs.jsx)("label",{children:"Bus Type"}),(0,cs.jsx)("select",{value:h.busType,onChange:e=>m(t=>(0,Ie.A)((0,Ie.A)({},t),{},{busType:e.target.value})),children:[{value:"all",label:"All Types"},{value:"ac_sleeper",label:"AC Sleeper"},{value:"ac_seater",label:"AC Seater"},{value:"non_ac_sleeper",label:"Non-AC Sleeper"},{value:"non_ac_seater",label:"Non-AC Seater"}].map(e=>(0,cs.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,cs.jsxs)("div",{className:"filter-group",children:[(0,cs.jsx)("label",{children:"Amenities"}),(0,cs.jsx)("div",{className:"amenities-checkboxes",children:["wifi","charging","ac","refreshments","toilet","entertainment"].map(e=>(0,cs.jsxs)("label",{className:"amenity-checkbox",children:[(0,cs.jsx)("input",{type:"checkbox",checked:h.amenities.includes(e),onChange:t=>{t.target.checked?m(t=>(0,Ie.A)((0,Ie.A)({},t),{},{amenities:[...t.amenities,e]})):m(t=>(0,Ie.A)((0,Ie.A)({},t),{},{amenities:t.amenities.filter(t=>t!==e)}))}}),(0,cs.jsx)("span",{className:"amenity-label",children:e.charAt(0).toUpperCase()+e.slice(1)})]},e))})]})]})]}),a.length>0&&(0,cs.jsxs)("div",{className:"search-results",children:[(0,cs.jsxs)("div",{className:"results-header",children:[(0,cs.jsxs)("h3",{children:["Found ",b.length," trips"]}),(0,cs.jsxs)("div",{className:"results-summary",children:[(0,cs.jsxs)("span",{children:["From: ",t.from]}),(0,cs.jsxs)("span",{children:["To: ",t.to]}),(0,cs.jsxs)("span",{children:["Date: ",new Date(t.date).toLocaleDateString()]})]})]}),(0,cs.jsx)("div",{className:"trips-list",children:b.map((t,s)=>(0,cs.jsxs)("div",{className:"trip-card",children:[(0,cs.jsxs)("div",{className:"trip-header",children:[(0,cs.jsxs)("div",{className:"trip-route",children:[(0,cs.jsx)("h4",{children:t.route.name}),(0,cs.jsx)("span",{className:"trip-number",children:t.tripNumber})]}),(0,cs.jsxs)("div",{className:"trip-price",children:[(0,cs.jsxs)("span",{className:"price-amount",children:["\u20b9",t.fare.current]}),t.fare.discount>0&&(0,cs.jsxs)("span",{className:"price-discount",children:["Save \u20b9",t.fare.discount]})]})]}),(0,cs.jsxs)("div",{className:"trip-details",children:[(0,cs.jsxs)("div",{className:"trip-timing",children:[(0,cs.jsxs)("div",{className:"departure",children:[(0,cs.jsx)(sd.A,{className:"timing-icon"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"time",children:t.departure}),(0,cs.jsx)("span",{className:"city",children:t.from})]})]}),(0,cs.jsxs)("div",{className:"journey-info",children:[(0,cs.jsx)("div",{className:"duration",children:t.duration}),(0,cs.jsxs)("div",{className:"distance",children:[t.distance," km"]})]}),(0,cs.jsxs)("div",{className:"arrival",children:[(0,cs.jsx)(sd.A,{className:"timing-icon"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"time",children:t.arrival}),(0,cs.jsx)("span",{className:"city",children:t.to})]})]})]}),(0,cs.jsxs)("div",{className:"trip-bus-info",children:[(0,cs.jsxs)("div",{className:"bus-details",children:[(0,cs.jsx)(ks.A,{className:"bus-icon"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"bus-number",children:t.bus.number}),(0,cs.jsx)("span",{className:"bus-type",children:t.bus.type})]})]}),(0,cs.jsxs)("div",{className:"seat-availability",children:[(0,cs.jsxs)("span",{className:"available-seats",children:[t.seatAvailability.available," seats available"]}),(0,cs.jsxs)("span",{className:"total-seats",children:["out of ",t.seatAvailability.total]})]})]}),(0,cs.jsx)("div",{className:"trip-amenities",children:t.bus.amenities.map((e,t)=>(0,cs.jsx)("span",{className:"amenity-tag",children:e},t))})]}),(0,cs.jsxs)("div",{className:"trip-actions",children:[(0,cs.jsx)("button",{className:"view-seats-btn",children:"View Seats"}),(0,cs.jsx)("button",{className:"book-now-btn",onClick:()=>{const s=(null===t||void 0===t?void 0:t.id)||(null===t||void 0===t?void 0:t._id)||(null===t||void 0===t?void 0:t.tripId);s&&e("/pax/board-drop/".concat(s),{state:{trip:t}})},children:"Book Now"})]})]},s))}),0===b.length&&(0,cs.jsx)("div",{className:"no-results",children:(0,cs.jsx)("p",{children:"No trips match your current filters. Try adjusting your search criteria."})})]}),0===a.length&&!i&&(0,cs.jsxs)("div",{className:"no-search-results",children:[(0,cs.jsx)("div",{className:"no-results-icon",children:"\ud83d\ude8c"}),(0,cs.jsx)("h3",{children:"Ready to Search?"}),(0,cs.jsx)("p",{children:"Enter your journey details above to find available bus trips"})]})]})},Hd=(0,Ns.A)("coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);var qd=s(2382);const Gd=(0,Ns.A)("arrow-left-right",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]),Yd=()=>{const[e]=Me(),t=te(),[s,a]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)({sortBy:"departure",sortOrder:"asc",priceRange:[0,5e3],busType:[],departureTime:[],amenities:[],operators:[],aiFilter:"",selectedFilters:[]}),[u,h]=(0,r.useState)(!1),[m,p]=(0,r.useState)(null),[x,g]=(0,r.useState)(!1),[f,y]=(0,r.useState)({}),b=e.get("from")||"",v=e.get("to")||"",j=e.get("date")||"",[N,w]=(e.get("tripType"),Ss.A,(0,r.useState)([])),[k,A]=(0,r.useState)([]),[S,C]=(0,r.useState)([]),[_,T]=(0,r.useState)([]),[P,E]=(0,r.useState)([]);(0,r.useEffect)(()=>{D()},[b,v,j]),(0,r.useEffect)(()=>{O()},[s,c]);const D=async()=>{l(!0);try{let t;if(t=b&&v&&j?await fetch("/api/trips/search?from=".concat(encodeURIComponent(b),"&to=").concat(encodeURIComponent(v),"&date=").concat(j)):await fetch("/api/trips/all?date=".concat(j)),t.ok){const s=await t.json();if(s.success||s.ok){var e;const t=(null===(e=s.data)||void 0===e?void 0:e.trips)||s.trips||[];a(t),i(t),M(t),0===t.length?Oe.oR.info("No trips found for your search criteria"):Oe.oR.success("Found ".concat(t.length," trips available!"))}else Oe.oR.error("Failed to fetch trips")}else Oe.oR.error("Failed to fetch trips")}catch(t){console.error("Error fetching trips:",t),Oe.oR.error("Failed to fetch trips")}finally{l(!1)}},M=e=>{const t={},s={},r={},a={};e.forEach(e=>{const n=e.busType||"Unknown";t[n]=(t[n]||0)+1;const i=new Date(e.startTime).getHours();let o="";o=i>=0&&i<6?"00:00-06:00":i>=6&&i<12?"06:00-12:00":i>=12&&i<18?"12:00-18:00":"18:00-24:00",s[o]=(s[o]||0)+1;const l=e.operator||"KSRTC";r[l]=(r[l]||0)+1,e.amenities&&e.amenities.forEach(e=>{a[e]=(a[e]||0)+1})}),A(Object.entries(t).map(e=>{let[t,s]=e;return{label:t,count:s,value:t.toLowerCase().replace(/\s+/g,"_")}})),C(Object.entries(s).map(e=>{let[t,s]=e;return{label:t,count:s,value:t}})),T(Object.entries(r).map(e=>{let[t,s]=e;return{label:t,count:s,value:t.toLowerCase().replace(/\s+/g,"_")}})),E(Object.entries(a).map(e=>{let[t,s]=e;return{label:t,count:s,value:t.toLowerCase()}}));const n=[...Object.entries(t).map(e=>{let[t,s]=e;return{id:t.toLowerCase().replace(/\s+/g,"_"),label:t.toUpperCase(),count:s,type:"busType"}}),...Object.entries(s).map(e=>{let[t,s]=e;return{id:t.replace(":","").replace("-","_"),count:s,type:"timeRange"}})];w(n)},O=()=>{let e=[...s];if(c.aiFilter){const t=c.aiFilter.toLowerCase();e=e.filter(e=>e.operator&&e.operator.toLowerCase().includes(t)||e.busType&&e.busType.toLowerCase().includes(t)||e.amenities&&e.amenities.some(e=>e.toLowerCase().includes(t))||e.routeName&&e.routeName.toLowerCase().includes(t))}c.selectedFilters.length>0&&(e=e.filter(e=>c.selectedFilters.every(t=>{const s=N.find(e=>e.id===t);if(!s)return!0;switch(s.type){case"busType":return e.busType&&e.busType.toLowerCase().includes(s.label.toLowerCase());case"timeRange":const t=new Date(e.startTime).getHours(),r=s.label;return"00:00-06:00"===r?t>=0&&t<6:"06:00-12:00"===r?t>=6&&t<12:"12:00-18:00"===r?t>=12&&t<18:"18:00-24:00"!==r||t>=18&&t<24;case"rating":return e.rating&&e.rating>=4;default:return!0}}))),c.busType.length>0&&(e=e.filter(e=>{var t;return c.busType.includes(null===(t=e.busType)||void 0===t?void 0:t.toLowerCase().replace(/\s+/g,"_"))})),c.departureTime.length>0&&(e=e.filter(e=>{const t=new Date(e.startTime).getHours();return c.departureTime.some(e=>"00:00-06:00"===e?t>=0&&t<6:"06:00-12:00"===e?t>=6&&t<12:"12:00-18:00"===e?t>=12&&t<18:"18:00-24:00"===e&&(t>=18&&t<24))})),c.operators.length>0&&(e=e.filter(e=>{var t;return c.operators.includes(null===(t=e.operator)||void 0===t?void 0:t.toLowerCase().replace(/\s+/g,"_"))})),c.amenities.length>0&&(e=e.filter(e=>e.amenities&&c.amenities.every(t=>e.amenities.some(e=>e.toLowerCase()===t)))),(c.priceRange[0]>0||c.priceRange[1]<5e3)&&(e=e.filter(e=>{const t=e.fare||0;return t>=c.priceRange[0]&&t<=c.priceRange[1]})),e.sort((e,t)=>{let s,r;switch(c.sortBy){case"departure":s=new Date(e.startTime),r=new Date(t.startTime);break;case"fare":s=e.fare||0,r=t.fare||0;break;case"rating":s=e.rating||0,r=t.rating||0;break;case"duration":s=e.distanceKm||0,r=t.distanceKm||0;break;default:return 0}return"asc"===c.sortOrder?s-r:r-s}),i(e)},R=e=>{if(!e)return"";const[t,s]=e.split(":"),r=new Date;return r.setHours(parseInt(t),parseInt(s)),r.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})},I=(e,t)=>{if(!e||!t)return"";const s=new Date("2000-01-01 ".concat(e)),r=new Date("2000-01-01 ".concat(t))-s,a=Math.floor(r/36e5),n=Math.floor(r%36e5/6e4);return"".concat(a,"h ").concat(n,"m")},L=e=>{y(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:!t[e]}))};return o?(0,cs.jsx)("div",{className:"search-results-container",children:(0,cs.jsxs)("div",{className:"loading-container",children:[(0,cs.jsx)("div",{className:"loading-spinner"}),(0,cs.jsx)("p",{children:"Searching for trips..."})]})}):(0,cs.jsxs)("div",{className:"redbus-results-container",children:[(0,cs.jsxs)("div",{className:"filters-sidebar",children:[(0,cs.jsx)("div",{className:"logo-section",children:(0,cs.jsxs)("div",{className:"logo-container",children:[(0,cs.jsx)("div",{className:"sidebar-logo",children:(0,cs.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,cs.jsx)("rect",{width:"40",height:"40",rx:"8",fill:"#FF3366"}),(0,cs.jsx)("rect",{x:"8",y:"12",width:"24",height:"16",rx:"2",fill:"white"}),(0,cs.jsx)("rect",{x:"10",y:"14",width:"4",height:"3",rx:"1",fill:"#FF3366"}),(0,cs.jsx)("rect",{x:"15",y:"14",width:"4",height:"3",rx:"1",fill:"#FF3366"}),(0,cs.jsx)("rect",{x:"20",y:"14",width:"4",height:"3",rx:"1",fill:"#FF3366"}),(0,cs.jsx)("rect",{x:"25",y:"14",width:"4",height:"3",rx:"1",fill:"#FF3366"}),(0,cs.jsx)("rect",{x:"10",y:"18",width:"3",height:"8",rx:"1",fill:"#FF3366"}),(0,cs.jsx)("circle",{cx:"14",cy:"30",r:"3",fill:"#000000"}),(0,cs.jsx)("circle",{cx:"26",cy:"30",r:"3",fill:"#000000"}),(0,cs.jsx)("circle",{cx:"14",cy:"30",r:"1.5",fill:"#666666"}),(0,cs.jsx)("circle",{cx:"26",cy:"30",r:"1.5",fill:"#666666"}),(0,cs.jsx)("circle",{cx:"32",cy:"16",r:"1.5",fill:"#fbbf24"}),(0,cs.jsx)("circle",{cx:"32",cy:"20",r:"1.5",fill:"#fbbf24"}),(0,cs.jsx)("rect",{x:"32",y:"14",width:"2",height:"8",fill:"#000000"})]})}),(0,cs.jsxs)("div",{className:"logo-text",children:[(0,cs.jsx)("h2",{children:"YATRIK ERP"}),(0,cs.jsx)("p",{children:"Smart Bus Travel"})]})]})}),(0,cs.jsxs)("div",{className:"filter-section",children:[(0,cs.jsx)("h3",{children:"Smart Filter"}),(0,cs.jsx)("p",{className:"filter-subtitle",children:"Find your perfect bus"}),(0,cs.jsx)("div",{className:"ai-filter",children:(0,cs.jsx)("input",{type:"text",placeholder:"Search by operator, bus type, amenities...",value:c.aiFilter,onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{aiFilter:e.target.value})),className:"ai-filter-input"})})]}),(0,cs.jsxs)("div",{className:"filter-section",children:[(0,cs.jsx)("h3",{children:"Quick Filters"}),(0,cs.jsx)("div",{className:"filter-tags",children:N.map(e=>(0,cs.jsxs)("button",{className:"filter-tag ".concat(c.selectedFilters.includes(e.id)?"active":""),onClick:()=>{return t=e.id,void d(e=>(0,Ie.A)((0,Ie.A)({},e),{},{selectedFilters:e.selectedFilters.includes(t)?e.selectedFilters.filter(e=>e!==t):[...e.selectedFilters,t]}));var t},children:[e.icon&&(0,cs.jsx)(e.icon,{className:"filter-icon"}),e.label," (",e.count,")"]},e.id))})]}),(0,cs.jsxs)("div",{className:"filter-section",children:[(0,cs.jsxs)("button",{className:"section-header",onClick:()=>L("busType"),children:[(0,cs.jsx)("span",{children:"Bus Type"}),(0,cs.jsx)(qd.A,{className:"chevron ".concat(f.busType?"collapsed":"")})]}),!f.busType&&(0,cs.jsx)("div",{className:"section-content",children:k.map((e,t)=>(0,cs.jsxs)("label",{className:"bus-type-option",children:[(0,cs.jsx)("input",{type:"checkbox",checked:c.busType.includes(e.value),onChange:()=>{return t=e.value,void d(e=>{const s=e.busType.includes(t)?e.busType.filter(e=>e!==t):[...e.busType,t];return(0,Ie.A)((0,Ie.A)({},e),{},{busType:s})});var t}}),(0,cs.jsxs)("span",{children:[e.label," (",e.count,")"]})]},t))})]}),(0,cs.jsxs)("div",{className:"filter-section",children:[(0,cs.jsxs)("button",{className:"section-header",onClick:()=>L("departure"),children:[(0,cs.jsx)("span",{children:"Departure Time"}),(0,cs.jsx)(qd.A,{className:"chevron ".concat(f.departure?"collapsed":"")})]}),!f.departure&&(0,cs.jsx)("div",{className:"section-content",children:S.map((e,t)=>(0,cs.jsxs)("label",{className:"time-range-option",children:[(0,cs.jsx)("input",{type:"checkbox",checked:c.departureTime.includes(e.value),onChange:()=>{return t=e.value,void d(e=>{const s=e.departureTime.includes(t)?e.departureTime.filter(e=>e!==t):[...e.departureTime,t];return(0,Ie.A)((0,Ie.A)({},e),{},{departureTime:s})});var t}}),(0,cs.jsxs)("span",{children:[e.label," (",e.count,")"]})]},t))})]}),(0,cs.jsxs)("div",{className:"filter-section",children:[(0,cs.jsxs)("button",{className:"section-header",onClick:()=>L("operator"),children:[(0,cs.jsx)("span",{children:"Bus Operator"}),(0,cs.jsx)(qd.A,{className:"chevron ".concat(f.operator?"collapsed":"")})]}),!f.operator&&(0,cs.jsx)("div",{className:"section-content",children:_.map((e,t)=>(0,cs.jsxs)("label",{className:"operator-option",children:[(0,cs.jsx)("input",{type:"checkbox",checked:c.operators.includes(e.value),onChange:()=>(e=>{d(t=>{const s=t.operators.includes(e)?t.operators.filter(t=>t!==e):[...t.operators,e];return(0,Ie.A)((0,Ie.A)({},t),{},{operators:s})})})(e.value)}),(0,cs.jsxs)("span",{children:[e.label," (",e.count,")"]})]},t))})]}),(0,cs.jsxs)("div",{className:"filter-section",children:[(0,cs.jsxs)("button",{className:"section-header",onClick:()=>L("amenities"),children:[(0,cs.jsx)("span",{children:"Amenities"}),(0,cs.jsx)(qd.A,{className:"chevron ".concat(f.amenities?"collapsed":"")})]}),!f.amenities&&(0,cs.jsx)("div",{className:"section-content",children:P.map((e,t)=>(0,cs.jsxs)("label",{className:"amenity-option",children:[(0,cs.jsx)("input",{type:"checkbox",checked:c.amenities.includes(e.value),onChange:()=>(e=>{d(t=>{const s=t.amenities.includes(e)?t.amenities.filter(t=>t!==e):[...t.amenities,e];return(0,Ie.A)((0,Ie.A)({},t),{},{amenities:s})})})(e.value)}),(0,cs.jsxs)("span",{children:[e.label," (",e.count,")"]})]},t))})]}),(c.selectedFilters.length>0||c.busType.length>0||c.departureTime.length>0||c.operators.length>0||c.amenities.length>0||c.aiFilter)&&(0,cs.jsx)("button",{className:"clear-filters-btn",onClick:()=>{d(e=>(0,Ie.A)((0,Ie.A)({},e),{},{selectedFilters:[],aiFilter:"",priceRange:[0,5e3],busType:[],departureTime:[],operators:[],amenities:[]}))},children:"Clear All Filters"})]}),(0,cs.jsxs)("div",{className:"main-content-area",children:[(0,cs.jsx)("div",{className:"redbus-header",children:(0,cs.jsxs)("div",{className:"redbus-header-container",children:[(0,cs.jsxs)("div",{className:"route-info",children:[(0,cs.jsxs)("h1",{children:[b," \u2192 ",v]}),(0,cs.jsxs)("p",{children:[n.length," buses"]})]}),(0,cs.jsxs)("div",{className:"breadcrumb",children:[(0,cs.jsx)("span",{children:"Bus Ticket"}),(0,cs.jsx)("span",{children:"\u203a"}),(0,cs.jsxs)("span",{children:[b," to ",v," Bus"]})]})]})}),(0,cs.jsxs)("div",{className:"search-bar",children:[(0,cs.jsx)("div",{className:"search-bar-container",children:(0,cs.jsxs)("div",{className:"search-inputs",children:[(0,cs.jsxs)("div",{className:"search-field-group",children:[(0,cs.jsx)("label",{className:"field-label",children:"From"}),(0,cs.jsxs)("div",{className:"search-field",children:[(0,cs.jsx)(ks.A,{className:"field-icon"}),(0,cs.jsx)("span",{children:b})]})]}),(0,cs.jsx)("div",{className:"swap-button",children:(0,cs.jsx)(Gd,{className:"swap-icon"})}),(0,cs.jsxs)("div",{className:"search-field-group",children:[(0,cs.jsx)("label",{className:"field-label",children:"To"}),(0,cs.jsxs)("div",{className:"search-field",children:[(0,cs.jsx)(ks.A,{className:"field-icon"}),(0,cs.jsx)("span",{children:v})]})]}),(0,cs.jsxs)("div",{className:"search-field-group",children:[(0,cs.jsx)("label",{className:"field-label",children:"Date of journey"}),(0,cs.jsxs)("div",{className:"search-field",children:[(0,cs.jsx)(fs.A,{className:"field-icon"}),(0,cs.jsx)("span",{children:new Date(j).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})]})]}),(0,cs.jsxs)("div",{className:"date-buttons",children:[(0,cs.jsx)("button",{className:"date-btn",children:"Today"}),(0,cs.jsx)("button",{className:"date-btn",children:"Tomorrow"})]}),(0,cs.jsxs)("div",{className:"women-booking-section",children:[(0,cs.jsxs)("div",{className:"women-booking-content",children:[(0,cs.jsx)("div",{className:"women-icon",children:(0,cs.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,cs.jsx)("path",{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.11 3.89 23 5 23H19C20.11 23 21 22.11 21 21V9M19 9H14V4H5V21H19V9Z"})})}),(0,cs.jsx)("span",{className:"women-text",children:"Booking for women"}),(0,cs.jsx)("a",{href:"#",className:"know-more-link",children:"Know more"})]}),(0,cs.jsxs)("div",{className:"toggle-switch",children:[(0,cs.jsx)("input",{type:"checkbox",id:"women-toggle",className:"toggle-input",defaultChecked:!0}),(0,cs.jsx)("label",{htmlFor:"women-toggle",className:"toggle-label"})]})]})]})}),(0,cs.jsx)("div",{className:"search-buses-section",children:(0,cs.jsxs)("button",{className:"search-buses-btn",children:[(0,cs.jsx)(ys.A,{className:"search-buses-icon"}),"Search buses"]})})]}),n.length>0?(0,cs.jsxs)("div",{className:"trips-section",children:[(0,cs.jsxs)("div",{className:"results-summary",children:[(0,cs.jsxs)("div",{className:"summary-left",children:[(0,cs.jsxs)("h3",{children:[n.length," buses found for ",new Date(j).toLocaleDateString("en-IN",{weekday:"long",day:"numeric",month:"long"})]}),(0,cs.jsxs)("div",{className:"quick-filters",children:[(0,cs.jsx)("button",{className:"quick-filter-btn active",children:"All"}),(0,cs.jsx)("button",{className:"quick-filter-btn",children:"AC"}),(0,cs.jsx)("button",{className:"quick-filter-btn",children:"Non-AC"}),(0,cs.jsx)("button",{className:"quick-filter-btn",children:"Sleeper"}),(0,cs.jsx)("button",{className:"quick-filter-btn",children:"Seater"})]})]}),(0,cs.jsx)("div",{className:"summary-right",children:(0,cs.jsxs)("div",{className:"view-toggle",children:[(0,cs.jsx)("button",{className:"view-btn active",children:"List View"}),(0,cs.jsx)("button",{className:"view-btn",children:"Map View"})]})})]}),(0,cs.jsxs)("div",{className:"sort-options",children:[(0,cs.jsx)("span",{children:"Sort by:"}),(0,cs.jsx)("button",{className:"sort-btn ".concat("departure"===c.sortBy?"active":""),onClick:()=>d((0,Ie.A)((0,Ie.A)({},c),{},{sortBy:"departure"})),children:"Departure time"}),(0,cs.jsx)("button",{className:"sort-btn ".concat("fare"===c.sortBy?"active":""),onClick:()=>d((0,Ie.A)((0,Ie.A)({},c),{},{sortBy:"fare"})),children:"Price"}),(0,cs.jsx)("button",{className:"sort-btn ".concat("rating"===c.sortBy?"active":""),onClick:()=>d((0,Ie.A)((0,Ie.A)({},c),{},{sortBy:"rating"})),children:"Ratings"}),(0,cs.jsx)("button",{className:"sort-btn ".concat("duration"===c.sortBy?"active":""),onClick:()=>d((0,Ie.A)((0,Ie.A)({},c),{},{sortBy:"duration"})),children:"Duration"})]}),(0,cs.jsx)("div",{className:"trips-content",children:(0,cs.jsx)("div",{className:"redbus-trips-list",children:n.map((e,t)=>(0,cs.jsxs)("div",{className:"enhanced-trip-card",children:[(0,cs.jsxs)("div",{className:"trip-header",children:[(0,cs.jsxs)("div",{className:"operator-info",children:[(0,cs.jsxs)("h4",{children:[e.operator||"KSRTC"," - ",e.busNumber||e.routeNumber||"2582"]}),(0,cs.jsx)("div",{className:"bus-type-badge",children:(0,cs.jsx)("span",{children:e.busType||"Non AC Seater (2+2)"})}),(0,cs.jsx)("div",{className:"amenities",children:e.amenities&&e.amenities.slice(0,3).map((e,t)=>(0,cs.jsx)("span",{className:"amenity",children:e},t))})]}),(0,cs.jsxs)("div",{className:"rating-info",children:[(0,cs.jsxs)("div",{className:"rating",children:[(0,cs.jsx)(rd.A,{className:"star-icon"}),(0,cs.jsx)("span",{children:e.rating||"4.0"})]}),(0,cs.jsxs)("p",{children:[e.totalRatings||"8"," reviews"]}),(0,cs.jsx)("div",{className:"cancellation-policy",children:(0,cs.jsx)("span",{children:"Free cancellation"})})]})]}),(0,cs.jsx)("div",{className:"trip-route",children:(0,cs.jsxs)("div",{className:"route-timing",children:[(0,cs.jsxs)("div",{className:"departure",children:[(0,cs.jsx)("div",{className:"time",children:R(e.startTime)}),(0,cs.jsx)("div",{className:"location",children:e.fromCity||b})]}),(0,cs.jsxs)("div",{className:"route-arrow",children:[(0,cs.jsx)("div",{className:"duration-text",children:I(e.startTime,e.endTime)}),(0,cs.jsx)("div",{className:"arrow",children:"\u2192"})]}),(0,cs.jsxs)("div",{className:"arrival",children:[(0,cs.jsx)("div",{className:"time",children:R(e.endTime)}),(0,cs.jsx)("div",{className:"location",children:e.toCity||v})]})]})}),(0,cs.jsxs)("div",{className:"trip-details",children:[(0,cs.jsx)("div",{className:"seats-availability",children:(0,cs.jsxs)("div",{className:"seat-preview",children:[(0,cs.jsxs)("div",{className:"seat-grid",children:[(0,cs.jsx)("div",{className:"seat-dot available"}),(0,cs.jsx)("div",{className:"seat-dot available"}),(0,cs.jsx)("div",{className:"seat-dot occupied"}),(0,cs.jsx)("div",{className:"seat-dot available"}),(0,cs.jsx)("div",{className:"seat-dot available"}),(0,cs.jsx)("div",{className:"seat-dot occupied"}),(0,cs.jsx)("div",{className:"seat-dot available"}),(0,cs.jsx)("div",{className:"seat-dot available"})]}),(0,cs.jsxs)("span",{className:"seat-count",children:[e.availableSeats||e.capacity||49," seats left"]})]})}),(0,cs.jsxs)("div",{className:"price-section",children:[(0,cs.jsxs)("div",{className:"price-info",children:[(0,cs.jsxs)("div",{className:"price",children:["\u20b9",e.fare||202]}),(0,cs.jsx)("div",{className:"price-label",children:"Starting from"})]}),(0,cs.jsx)("button",{className:"book-now-btn",onClick:()=>(e=>{p(e),g(!0)})(e),children:"Book Now"})]})]})]},e._id||t))})})]}):(0,cs.jsxs)("div",{className:"no-results",children:[(0,cs.jsx)(ks.A,{className:"no-results-icon"}),(0,cs.jsx)("h3",{children:"No trips found"}),(0,cs.jsx)("p",{children:"Try adjusting your search criteria or filters"}),(0,cs.jsx)("button",{className:"modify-search-btn",onClick:()=>t("/"),children:"Modify Search"})]})]}),x&&m&&(0,cs.jsx)("div",{className:"trip-details-modal",children:(0,cs.jsxs)("div",{className:"modal-content",children:[(0,cs.jsxs)("div",{className:"modal-header",children:[(0,cs.jsx)("h3",{children:"Trip Details"}),(0,cs.jsx)("button",{className:"close-btn",onClick:()=>g(!1),children:"\xd7"})]}),(0,cs.jsx)("div",{className:"modal-body",children:(0,cs.jsxs)("div",{className:"trip-info",children:[(0,cs.jsx)("h4",{children:m.routeName}),(0,cs.jsxs)("p",{children:[m.fromCity," \u2192 ",m.toCity]}),(0,cs.jsxs)("div",{className:"trip-stats",children:[(0,cs.jsxs)("div",{className:"stat",children:[(0,cs.jsx)(sd.A,{className:"stat-icon"}),(0,cs.jsx)("span",{children:I(m.startTime,m.endTime)})]}),(0,cs.jsxs)("div",{className:"stat",children:[(0,cs.jsx)(Ad,{className:"stat-icon"}),(0,cs.jsxs)("span",{children:[m.distanceKm," km"]})]}),(0,cs.jsxs)("div",{className:"stat",children:[(0,cs.jsx)(fs.A,{className:"stat-icon"}),(0,cs.jsx)("span",{children:(F=m.serviceDate,F?new Date(F).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"")})]})]})]})}),(0,cs.jsx)("div",{className:"modal-footer",children:(0,cs.jsx)("button",{className:"book-now-btn",onClick:()=>{g(!1),(e=>{const s=localStorage.getItem("token");t(s?"/pax/board-drop/".concat(e._id):"/login?next=/pax",{state:{trip:e}})})(m)},children:"Book Now"})})]})})]});var F},$d=s.p+"static/media/login.d12f956a2bd94717dd0a.png",Jd=()=>(0,cs.jsx)("div",{className:"left-panel",children:(0,cs.jsx)("div",{className:"content-area",children:(0,cs.jsxs)("div",{className:"text-center relative",children:[(0,cs.jsx)("div",{className:"hero-image-wrap",children:(0,cs.jsx)("img",{src:$d,alt:"Yatrik ERP Smart Transport Network",className:"login-hero-img",onError:e=>{console.error("Image failed to load:",e.target.src),e.target.style.display="none"},onLoad:()=>console.log("Image loaded successfully")})}),(0,cs.jsx)("div",{className:"route-overlay",children:(0,cs.jsxs)("svg",{viewBox:"0 0 600 600",className:"route-svg",preserveAspectRatio:"xMidYMid meet",children:[(0,cs.jsx)("defs",{children:(0,cs.jsxs)("linearGradient",{id:"routeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,cs.jsx)("stop",{offset:"0%",stopColor:"#FFC0CB",stopOpacity:"0.8"}),(0,cs.jsx)("stop",{offset:"50%",stopColor:"#FFB6C1",stopOpacity:"0.7"}),(0,cs.jsx)("stop",{offset:"100%",stopColor:"#FFC0CB",stopOpacity:"0.8"})]})}),(0,cs.jsx)("circle",{cx:"300",cy:"300",r:"280",fill:"none",stroke:"url(#routeGradient)",strokeWidth:"6",strokeDasharray:"25,20",className:"main-route"}),(0,cs.jsxs)("g",{className:"location-pins-inside",children:[(0,cs.jsxs)("g",{className:"location-pin-inside",transform:"translate(300, 108)",children:[(0,cs.jsx)("circle",{cx:"0",cy:"0",r:"10",fill:"#00BCD4"}),(0,cs.jsx)("circle",{cx:"0",cy:"0",r:"5",fill:"#FFFFFF"}),(0,cs.jsx)("path",{d:"M 0 -10 L -7 0 L 7 0 Z",fill:"#00BCD4"})]}),(0,cs.jsxs)("g",{className:"location-pin-inside",transform:"translate(492, 300)",children:[(0,cs.jsx)("circle",{cx:"0",cy:"0",r:"10",fill:"#00BCD4"}),(0,cs.jsx)("circle",{cx:"0",cy:"0",r:"5",fill:"#FFFFFF"}),(0,cs.jsx)("path",{d:"M 0 -10 L -7 0 L 7 0 Z",fill:"#00BCD4"})]}),(0,cs.jsxs)("g",{className:"location-pin-inside",transform:"translate(300, 492)",children:[(0,cs.jsx)("circle",{cx:"0",cy:"0",r:"10",fill:"#00BCD4"}),(0,cs.jsx)("circle",{cx:"0",cy:"0",r:"5",fill:"#FFFFFF"}),(0,cs.jsx)("path",{d:"M 0 -10 L -7 0 L 7 0 Z",fill:"#00BCD4"})]}),(0,cs.jsxs)("g",{className:"location-pin-inside",transform:"translate(108, 300)",children:[(0,cs.jsx)("circle",{cx:"0",cy:"0",r:"10",fill:"#00BCD4"}),(0,cs.jsx)("circle",{cx:"0",cy:"0",r:"5",fill:"#FFFFFF"}),(0,cs.jsx)("path",{d:"M 0 -10 L -7 0 L 7 0 Z",fill:"#00BCD4"})]}),(0,cs.jsxs)("g",{className:"location-pin-inside",transform:"translate(420, 180)",children:[(0,cs.jsx)("circle",{cx:"0",cy:"0",r:"10",fill:"#00BCD4"}),(0,cs.jsx)("circle",{cx:"0",cy:"0",r:"5",fill:"#FFFFFF"}),(0,cs.jsx)("path",{d:"M 0 -10 L -7 0 L 7 0 Z",fill:"#00BCD4"})]}),(0,cs.jsxs)("g",{className:"location-pin-inside",transform:"translate(180, 420)",children:[(0,cs.jsx)("circle",{cx:"0",cy:"0",r:"10",fill:"#00BCD4"}),(0,cs.jsx)("circle",{cx:"0",cy:"0",r:"5",fill:"#FFFFFF"}),(0,cs.jsx)("path",{d:"M 0 -10 L -7 0 L 7 0 Z",fill:"#00BCD4"})]}),(0,cs.jsxs)("g",{className:"location-pin-inside",transform:"translate(180, 180)",children:[(0,cs.jsx)("circle",{cx:"0",cy:"0",r:"10",fill:"#00BCD4"}),(0,cs.jsx)("circle",{cx:"0",cy:"0",r:"5",fill:"#FFFFFF"}),(0,cs.jsx)("path",{d:"M 0 -10 L -7 0 L 7 0 Z",fill:"#00BCD4"})]}),(0,cs.jsxs)("g",{className:"location-pin-inside",transform:"translate(420, 420)",children:[(0,cs.jsx)("circle",{cx:"0",cy:"0",r:"10",fill:"#00BCD4"}),(0,cs.jsx)("circle",{cx:"0",cy:"0",r:"5",fill:"#FFFFFF"}),(0,cs.jsx)("path",{d:"M 0 -10 L -7 0 L 7 0 Z",fill:"#00BCD4"})]})]}),(0,cs.jsxs)("g",{className:"outer-markers",children:[(0,cs.jsx)("g",{transform:"translate(630,300)",children:(0,cs.jsx)("polygon",{points:"-10,0 8,-7 8,7",className:"outer-marker"})}),(0,cs.jsx)("g",{transform:"translate(-30,300) rotate(180)",children:(0,cs.jsx)("polygon",{points:"-10,0 8,-7 8,7",className:"outer-marker"})}),(0,cs.jsx)("g",{transform:"translate(300,-30) rotate(90)",children:(0,cs.jsx)("polygon",{points:"-10,0 8,-7 8,7",className:"outer-marker"})}),(0,cs.jsx)("g",{transform:"translate(300,630) rotate(270)",children:(0,cs.jsx)("polygon",{points:"-10,0 8,-7 8,7",className:"outer-marker"})})]}),(0,cs.jsx)("g",{className:"outer-arc",children:(0,cs.jsx)("circle",{cx:"300",cy:"300",r:"290",fill:"none",stroke:"#E91E63",strokeWidth:"5",strokeDasharray:"25,20",className:"outer-arc-main"})})]})})]})})}),Qd=e=>{let{title:t,subtitle:s,children:r}=e;return(0,cs.jsxs)("div",{className:"auth-page",children:[(0,cs.jsx)("div",{className:"auth-col auth-left",children:(0,cs.jsx)(Jd,{})}),(0,cs.jsx)("div",{className:"auth-divider","aria-hidden":"true"}),(0,cs.jsx)("div",{className:"auth-col auth-right",children:(0,cs.jsxs)("div",{className:"auth-form-wrap",children:[(0,cs.jsx)("div",{className:"auth-header-bar",children:(0,cs.jsxs)("div",{className:"auth-header-content",children:[(0,cs.jsx)("div",{className:"auth-header-left",children:(0,cs.jsxs)("div",{className:"auth-logo-container",onClick:()=>window.location.href="/",style:{cursor:"pointer"},children:[(0,cs.jsx)("div",{className:"auth-logo-icon",children:"\ud83d\ude8c"}),(0,cs.jsx)("span",{className:"auth-logo-text",children:"YATRIK"}),(0,cs.jsx)("div",{className:"auth-erp-badge",children:"ERP"})]})}),(0,cs.jsx)("div",{className:"auth-header-right",children:(0,cs.jsx)("a",{href:"#",className:"auth-help-link",children:"Help"})})]})}),(0,cs.jsx)("div",{className:"auth-header",children:(0,cs.jsxs)("div",{className:"auth-title",children:[(0,cs.jsx)("h1",{children:t}),s&&(0,cs.jsx)("p",{children:s})]})}),(0,cs.jsx)("div",{className:"auth-card",children:r})]})}),(0,cs.jsx)("style",{children:"\n        /* Full-page layout */\n        .auth-page {\n          min-height: 100vh;\n          display: flex;\n          flex-direction: row;\n          background: linear-gradient(160deg, #eef6ff 0%, #ffffff 100%);\n          overflow: hidden;\n        }\n\n        .auth-col {\n          flex: 1 1 0;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .auth-left { padding: 2rem 1rem; }\n\n        .auth-right { padding: 2rem 1rem; }\n\n        .auth-divider {\n          width: 1px;\n          background: linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0.06) 15%, rgba(0,0,0,0.08) 50%, rgba(0,0,0,0.06) 85%, rgba(0,0,0,0) 100%);\n          box-shadow: 0 0 24px rgba(0,0,0,0.05);\n        }\n\n        .auth-form-wrap {\n          width: 100%;\n          max-width: 420px;\n          margin-top: 80px;\n        }\n\n        /* Header Bar - Full Page Width */\n        .auth-header-bar {\n          height: 60px;\n          width: 100vw;\n          background: #FFFFFF;\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n          border-bottom: 1px solid #DDDDDD;\n          position: fixed;\n          top: 0;\n          left: 0;\n          z-index: 1000;\n        }\n\n        .auth-header-content {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          height: 100%;\n          padding: 0 2rem;\n          width: 100%;\n        }\n\n        .auth-header-left {\n          display: flex;\n          align-items: center;\n        }\n\n        .auth-logo-container {\n          display: flex;\n          align-items: center;\n          gap: 0.75rem;\n          transition: all 0.2s ease;\n        }\n\n        .auth-logo-container:hover {\n          transform: scale(1.05);\n        }\n\n        .auth-logo-icon {\n          font-size: 1.25rem;\n          width: 28px;\n          height: 28px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background: linear-gradient(135deg, #00BCD4, #00BCD4);\n          border-radius: 50%;\n          color: white;\n          flex-shrink: 0;\n        }\n\n        .auth-logo-text {\n          font-size: 1.125rem;\n          font-weight: 700;\n          color: #1F2937;\n          letter-spacing: 0.025em;\n          flex-shrink: 0;\n        }\n\n        .auth-erp-badge {\n          background: #E91E63;\n          color: white;\n          padding: 0.25rem 0.75rem;\n          border-radius: 20px;\n          font-size: 0.875rem;\n          font-weight: 700;\n          letter-spacing: 0.025em;\n          flex-shrink: 0;\n        }\n\n        .auth-header-right {\n          display: flex;\n          align-items: center;\n        }\n\n        .auth-help-link {\n          color: #555555;\n          text-decoration: none;\n          font-size: 0.875rem;\n          font-weight: 500;\n          padding: 0.5rem 1rem;\n          border-radius: 6px;\n          transition: all 0.2s ease;\n        }\n\n        .auth-help-link:hover {\n          color: #E91E63;\n          background: rgba(233, 30, 99, 0.05);\n        }\n          margin-bottom: 1rem;\n          border-radius: 12px 12px 0 0;\n        }\n\n        .auth-header-content {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          height: 100%;\n          padding: 0 1.5rem;\n        }\n\n        .auth-header-left {\n          display: flex;\n          align-items: center;\n        }\n\n        .auth-logo-container {\n          display: flex;\n          align-items: center;\n          gap: 0.75rem;\n          transition: all 0.2s ease;\n        }\n\n        .auth-logo-container:hover {\n          transform: scale(1.05);\n        }\n\n        .auth-logo-icon {\n          font-size: 1.25rem;\n          width: 28px;\n          height: 28px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background: linear-gradient(135deg, #00BCD4, #00BCD4);\n          border-radius: 50%;\n          color: white;\n          flex-shrink: 0;\n        }\n\n        .auth-logo-text {\n          font-size: 1.125rem;\n          font-weight: 700;\n          color: #1F2937;\n          letter-spacing: 0.025em;\n          flex-shrink: 0;\n        }\n\n        .auth-erp-badge {\n          background: #E91E63;\n          color: white;\n          padding: 0.25rem 0.75rem;\n          border-radius: 20px;\n          font-size: 0.875rem;\n          font-weight: 700;\n          letter-spacing: 0.025em;\n          flex-shrink: 0;\n        }\n\n        .auth-header-right {\n          display: flex;\n          align-items: center;\n        }\n\n        .auth-help-link {\n          color: #555555;\n          text-decoration: none;\n          font-size: 0.875rem;\n          font-weight: 500;\n          padding: 0.5rem 1rem;\n          border-radius: 6px;\n          transition: all 0.2s ease;\n        }\n\n        .auth-help-link:hover {\n          color: #E91E63;\n          background: rgba(233, 30, 99, 0.05);\n        }\n\n        .auth-header { margin-bottom: 1rem; text-align: left; }\n\n        .auth-brand {\n          display: inline-block;\n          font-weight: 800;\n          letter-spacing: 0.5px;\n          color: #ff3366;\n          text-decoration: none;\n          margin-bottom: 0.5rem;\n        }\n\n        .auth-title h1 {\n          margin: 0 0 0.25rem 0;\n          font-size: 1.75rem;\n          line-height: 1.2;\n          color: #0f172a;\n        }\n\n        .auth-title p {\n          margin: 0;\n          color: #475569;\n          font-size: 0.95rem;\n        }\n\n        .auth-card {\n          background: #ffffff;\n          border-radius: 16px;\n          box-shadow: 0 10px 30px rgba(2, 6, 23, 0.06);\n          padding: 1.25rem;\n        }\n\n        /* Responsiveness */\n        @media (max-width: 1024px) {\n          .auth-form-wrap { max-width: 400px; }\n        }\n\n        @media (max-width: 768px) {\n          .auth-page { flex-direction: column; }\n          .auth-divider { height: 1px; width: 100%; }\n          .auth-left { padding-bottom: 0.5rem; }\n          .auth-right { padding-top: 0.5rem; }\n        }\n\n        .login-hero-circle {\n          width: clamp(280px, 60vw, 560px);\n          height: clamp(280px, 60vw, 560px);\n          position: relative;\n        }\n        \n        .login-circle-bg {\n          width: 100%;\n          height: 100%;\n          border-radius: 50%;\n          background: linear-gradient(135deg, rgba(255, 51, 102, 0.1) 0%, rgba(225, 29, 72, 0.05) 100%);\n          backdrop-filter: blur(20px);\n          border: 1px solid rgba(255, 255, 255, 0.14);\n          box-shadow: \n            0 25px 50px -12px rgba(0, 0, 0, 0.25),\n            0 0 0 1px rgba(255, 255, 255, 0.1),\n            inset 0 1px 0 rgba(255, 255, 255, 0.2);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          position: relative;\n          overflow: hidden;\n        }\n        \n        .login-route-svg {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          z-index: 1;\n        }\n        \n        .route-line {\n          stroke: #22C55E;\n          stroke-width: clamp(2px, 0.4vw, 3px);\n          fill: none;\n          stroke-linecap: round;\n          stroke-dasharray: 8 10;\n          animation: routeDash 7s linear infinite;\n        }\n        \n        .route-line--h,\n        .route-line--v {\n          stroke: url(#routeGradient);\n          stroke-width: clamp(3px, 0.6vw, 4px);\n          fill: none;\n          stroke-linecap: round;\n          stroke-dasharray: 12 16;\n          animation: routeDash 7s linear infinite;\n          filter: drop-shadow(0 2px 4px rgba(34, 197, 94, 0.2));\n        }\n        \n        /* Responsive stroke width adjustments */\n        @media (max-width: 1023px) {\n          .route-line--h,\n          .route-line--v {\n            stroke-width: clamp(3px, 0.8vw, 4px);\n          }\n        }\n        \n        @media (max-width: 639px) {\n          .route-line--h,\n          .route-line--v {\n            stroke-width: clamp(3px, 1vw, 4px);\n          }\n        }\n        \n        .route-line--h { stroke-dashoffset: 0; }\n        .route-line--v { stroke-dashoffset: 0; }\n        \n        .route-pin { /* No animation for pins */ }\n        .route-marker { will-change: transform; }\n        \n        /* Responsive pin and marker sizing */\n        @media (max-width: 1023px) {\n          .route-pin circle { r: clamp(6px, 1.2vw, 8px); }\n          .route-pin circle:last-child { r: clamp(3px, 0.6vw, 4px); }\n          .route-marker circle { r: clamp(3px, 0.6vw, 4px); }\n        }\n        @media (max-width: 639px) {\n          .route-pin circle { r: clamp(5px, 1.5vw, 7px); }\n          .route-pin circle:last-child { r: clamp(2.5px, 0.75vw, 3.5px); }\n          .route-marker circle { r: clamp(2.5px, 0.75vw, 3.5px); }\n        }\n        \n        .route-marker--h1 { transform-origin: 120px 300px; }\n        .route-marker--h2 { transform-origin: 480px 300px; }\n        .route-marker--v1 { transform-origin: 300px 120px; }\n        .route-marker--v2 { transform-origin: 300px 480px; }\n        \n        /* Animations */\n        @keyframes routeDash { to { stroke-dashoffset: -18; } }\n        .animated-icon { will-change: transform; animation: iconFloat 4s ease-in-out infinite; filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1)); }\n        .icon-bus-center { animation: busCenterFloat 4s ease-in-out infinite; filter: drop-shadow(0 8px 16px rgba(34, 197, 94, 0.3)); will-change: transform; }\n        .icon-bus-center:hover { filter: drop-shadow(0 12px 24px rgba(34, 197, 94, 0.5)); transform: scale(1.05); transition: all 0.4s ease; }\n        @keyframes busCenterFloat { 0%, 100% { transform: translateY(0px) scale(1); opacity: 0.95; } 50% { transform: translateY(-6px) scale(1.02); opacity: 1; } }\n        \n        /* Motion Preferences */\n        @media (prefers-reduced-motion: reduce) {\n          .route-line, .route-pin, .route-marker, .animated-icon, .icon-bus-center { animation: none !important; transform: none !important; }\n        }\n        \n        /* Header Responsive Styling */\n        @media (max-width: 768px) {\n          header .flex { flex-direction: column; gap: 1rem; text-align: center; }\n          header .space-x-6 { gap: 1rem; }\n        }\n      "})]})};var Xd={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Zd=r.createContext&&r.createContext(Xd),eu=function(){return eu=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},eu.apply(this,arguments)},tu=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]])}return s};function su(e){return e&&e.map(function(e,t){return r.createElement(e.tag,eu({key:t},e.attr),su(e.child))})}function ru(e){return function(t){return r.createElement(au,eu({attr:eu({},e.attr)},t),su(e.child))}}function au(e){var t=function(t){var s,a=e.attr,n=e.size,i=e.title,o=tu(e,["attr","size","title"]),l=n||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),r.createElement("svg",eu({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,o,{className:s,style:eu(eu({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&r.createElement("title",null,i),e.children)};return void 0!==Zd?r.createElement(Zd.Consumer,null,function(e){return t(e)}):t(Xd)}function nu(e){return ru({tag:"svg",attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"}}]})(e)}const iu=["id","label","type","value","onChange","autoComplete","icon","required","placeholder","className","error","disabled","maxLength","pattern"],ou=e=>{let{id:t,label:s,type:r="text",value:a,onChange:n,autoComplete:i,icon:o=null,required:l=!0,placeholder:c,className:d="",error:u,disabled:h,maxLength:m,pattern:p}=e,x=(0,ta.A)(e,iu);return(0,cs.jsxs)("div",{className:d,children:[s&&(0,cs.jsx)("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700 mb-2",children:s}),(0,cs.jsxs)("div",{className:"relative",children:[o&&(0,cs.jsx)("span",{className:"pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400",children:o}),(0,cs.jsx)("input",(0,Ie.A)((0,Ie.A)({id:t,name:t,type:r,autoComplete:i,required:l,value:a,onChange:n,placeholder:c,disabled:h,maxLength:m,pattern:p},x),{},{className:"appearance-none block w-full ".concat(o?"pl-10":"pl-3"," pr-3 py-3 border ").concat(u?"border-red-300":"border-gray-300"," rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm text-gray-900 transition-colors ").concat(h?"bg-gray-100 cursor-not-allowed":"")}))]}),u&&(0,cs.jsx)("p",{className:"mt-1 text-sm text-red-600",children:u})]})},lu=e=>{let{id:t="password",label:s="Password",value:a,onChange:n,autoComplete:i="current-password",required:o=!0,placeholder:l,className:c=""}=e;const[d,u]=(0,r.useState)(!1);return(0,cs.jsxs)("div",{className:c,children:[s&&(0,cs.jsx)("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700 mb-2",children:s}),(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)("input",{id:t,name:t,type:d?"text":"password",autoComplete:i,required:o,value:a,onChange:n,placeholder:l,className:"appearance-none block w-full pl-3 pr-10 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm transition-colors"}),(0,cs.jsx)("button",{type:"button",onClick:()=>u(e=>!e),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-colors","aria-label":d?"Hide password":"Show password",children:d?(0,cs.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,cs.jsx)("path",{d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.83-1.83A10.284 10.284 0 0019 10s-3-7-9-7a9.955 9.955 0 00-5.393 1.61L3.707 2.293z"}),(0,cs.jsx)("path",{d:"M6.576 5.162A8.012 8.012 0 0110 4c4 0 6.882 3.182 7.71 5-.251.477-.642 1.111-1.177 1.79l-2.4-2.4A3 3 0 009.61 6.157l-3.034-2.995z"}),(0,cs.jsx)("path",{d:"M13.132 14.27l-1.64-1.64a3 3 0 01-4.122-4.122L5.1 5.34A10.28 10.28 0 001 10s3 7 9 7a9.957 9.957 0 004.132-.73z"})]}):(0,cs.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,cs.jsx)("path",{d:"M10 3c-6 0-9 7-9 7s3 7 9 7 9-7 9-7-3-7-9-7zm0 12a5 5 0 110-10 5 5 0 010 10z"})})})]})]})},cu=e=>{let{href:t,provider:s="google",icon:a,children:n,ariaLabel:i,onClick:o,className:l="",disabled:c=!1}=e;const[d,u]=(0,r.useState)(!1),h="w-full inline-flex items-center justify-center gap-3 py-3 px-5 rounded-full border border-gray-300 bg-white text-sm font-semibold text-gray-700 hover:bg-gray-50 transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-300 oauth-button disabled:opacity-50 disabled:cursor-not-allowed",m="google"===s?(0,cs.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,cs.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,cs.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,cs.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,cs.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}):a,p=async e=>{if(!c&&!d)if(u(!0),o)try{await o(e)}finally{u(!1)}else t&&setTimeout(()=>{window.location.href=t},100)};return o?(0,cs.jsxs)("button",{onClick:p,"aria-label":i,className:"".concat(h," ").concat(l),disabled:c||d,children:[d?(0,cs.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-600"}):m,(0,cs.jsx)("span",{children:d?"Processing...":n})]}):(0,cs.jsxs)("a",{href:t,"aria-label":i,className:"".concat(h," ").concat(l),onClick:p,children:[d?(0,cs.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-600"}):m,(0,cs.jsx)("span",{children:d?"Processing...":n})]})},du=e=>{let{initialMode:t="login"}=e;const[s,a]=(0,r.useState)("signup"===t?"signup":"login"),{login:n,user:i}=(0,Re.A)(),o=te(),[l]=Me(),c=l.get("next")||"/pax",[d,u]=(0,r.useState)({email:"",password:""}),[h,m]=(0,r.useState)({name:"",email:"",phone:"",password:"",confirmPassword:""}),[p,x]=(0,r.useState)({email:""}),[g,f]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!1),[v,j]=(0,r.useState)(!1),[N,w]=(0,r.useState)({}),[k,A]=(0,r.useState)({}),[S,C]=(0,r.useState)({}),[_,T]=(0,r.useState)(!1),[P,E]=(0,r.useState)(!1),[D,M]=(0,r.useState)("idle"),[O,R]=(0,r.useState)(""),I=(0,r.useRef)(null),L="available"!==D,F=async(e,t)=>{try{try{localStorage.setItem("token",t)}catch(r){}const a=((null===e||void 0===e?void 0:e.email)||"").toLowerCase(),i=((null===e||void 0===e?void 0:e.role)||"").toLowerCase(),o="depot_manager"===i||/-depot@yatrik\.com$/.test(a)||/^depot-/.test(a);let l=e;if(!o){const e=await(0,xs.nr)("/api/auth/me");var s;if(null!==e&&void 0!==e&&e.ok&&e.data)l=(null===(s=e.data.data)||void 0===s?void 0:s.user)||e.data.user||e.data}l&&"object"===typeof l||(l=e);const c=(0,Ie.A)((0,Ie.A)({},l),{},{_id:l._id||l.id,role:l.role||i||"passenger",email:l.email||a,name:l.name||l.username||"User"});c._id&&c.role||(console.warn("Missing required user fields, using fallback:",c),c._id=c._id||"temp_"+Date.now(),c.role=c.role||"passenger"),n(c,t)}catch(a){console.warn("Profile fetch failed, using login data:",a);const s=(0,Ie.A)((0,Ie.A)({},e),{},{_id:e._id||e.id||"temp_"+Date.now(),role:e.role||"passenger",email:e.email||"",name:e.name||e.username||"User"});n(s,t)}};(0,r.useEffect)(()=>{if(i){const e=(i.role||"passenger").toUpperCase(),t="ADMIN"===e?"/admin":"CONDUCTOR"===e?"/conductor":"DRIVER"===e?"/driver":"DEPOT_MANAGER"===e?"/depot":c;console.log("[Auth] existing session redirect:",{role:e,dest:t}),o(t,{replace:!0})}},[i,o,c]),(0,r.useEffect)(()=>{const e=setTimeout(()=>{const e="".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000","/api/auth/google?next=").concat(encodeURIComponent(c)),t=document.createElement("link");t.rel="prefetch",t.href=e,document.head.appendChild(t);const s=document.createElement("link");s.rel="prefetch",s.href="/oauth/callback",document.head.appendChild(s)},500);return()=>clearTimeout(e)},[c]);const B=(0,r.useCallback)(()=>{const e={};return d.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.email.trim())||(e.email="Please enter a valid email address"):e.email="Email is required",d.password?d.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",w(e),0===Object.keys(e).length},[d]),z=(0,r.useCallback)(()=>{const e={};return h.name.trim()?h.name.trim().length<2?e.name="Name must be at least 2 characters":/^[a-zA-Z\s]+$/.test(h.name.trim())||(e.name="Name can only contain letters and spaces"):e.name="Full name is required",h.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.email.trim())||(e.email="Please enter a valid email address"):e.email="Email is required",h.phone.trim()?/^[6-9][0-9]{9}$/.test(h.phone.trim())||(e.phone="Enter valid 10-digit Indian mobile number"):e.phone="Mobile number is required",h.password?h.password.length<8&&(e.password="Password must be at least 8 characters"):e.password="Password is required",h.confirmPassword?h.password!==h.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",A(e),0===Object.keys(e).length},[h]),U=(0,r.useCallback)(()=>{const e={};return p.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p.email.trim())||(e.email="Please enter a valid email address"):e.email="Email is required",C(e),0===Object.keys(e).length},[p]),V=(0,r.useCallback)((e,t)=>{u(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t})),N[e]&&w(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:""})),"email"===e&&t.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.trim())&&w(e=>(0,Ie.A)((0,Ie.A)({},e),{},{email:"Please enter a valid email address"})),"password"===e&&t&&t.length<6&&w(e=>(0,Ie.A)((0,Ie.A)({},e),{},{password:"Password must be at least 6 characters"}))},[N]),K=(0,r.useCallback)((e,t)=>{m(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t})),k[e]&&A(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:""})),"email"===e&&(console.log("\ud83d\udce7 Email field changed:",t),I.current&&(clearTimeout(I.current),console.log("\u23f0 Cleared previous timeout")),I.current=setTimeout(()=>{console.log("\u23f0 Timeout triggered, calling validateEmail"),(async e=>{if(console.log("\ud83d\udd0d validateEmail called with:",e),!e||e.length<5)return console.log("\u274c Email too short or empty"),M("idle"),void R("");if(!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e))return console.log("\u274c Invalid email format"),M("error"),void R("Invalid email format");console.log("\u2705 Email validation passed, proceeding with API call"),M("checking"),R("Checking email...");try{console.log("\ud83d\udce1 Making API call to /api/auth/check-email");const t=await fetch("/api/auth/check-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(console.log("\ud83d\udce1 Response status:",t.status),!t.ok)throw new Error("HTTP error! status: ".concat(t.status));const s=await t.json();console.log("\ud83d\udce6 Response data:",s),s.success?s.exists?(console.log("\u274c Email exists"),M("exists"),R("\u274c Email already exists")):(console.log("\u2705 Email available"),M("available"),R("\u2705 Email available")):(console.log("\u274c API returned error:",s.error),M("error"),R(s.error||"Error checking email"))}catch(t){console.error("\u274c Email validation error:",t),M("error"),R("Network error: ".concat(t.message))}})(t)},300),console.log("\u23f0 New timeout set for 300ms"))},[k]),W=(0,r.useCallback)((e,t)=>{x(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t})),S[e]&&C(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:""}))},[S]);(0,r.useEffect)(()=>()=>{I.current&&clearTimeout(I.current)},[]);const H=(0,r.useCallback)(e=>{let t=e.target.value;const s=t.replace(/[^0-9]/g,"");t=s.length>0?s.length<=10?s:s.slice(0,10):"",m(e=>(0,Ie.A)((0,Ie.A)({},e),{},{phone:t})),t.trim()?10===t.length?/^[6-9]/.test(t)?A(e=>(0,Ie.A)((0,Ie.A)({},e),{},{phone:""})):A(e=>(0,Ie.A)((0,Ie.A)({},e),{},{phone:"Mobile number must start with 6, 7, 8, or 9"})):t.length<10?A(e=>(0,Ie.A)((0,Ie.A)({},e),{},{phone:"Enter 10-digit mobile number"})):A(e=>(0,Ie.A)((0,Ie.A)({},e),{},{phone:"Enter valid 10-digit Indian mobile number"})):A(e=>(0,Ie.A)((0,Ie.A)({},e),{},{phone:""}))},[]),q="login"===s?(0,cs.jsxs)("span",{children:["New here? ",(0,cs.jsx)("button",{type:"button",onClick:()=>a("signup"),className:"font-medium text-primary-600 hover:text-primary-500 transition-colors",disabled:g||y,children:"Create an account"})]}):(0,cs.jsxs)("span",{children:["Already with us? ",(0,cs.jsx)("button",{type:"button",onClick:()=>a("login"),className:"font-medium text-primary-600 hover:text-primary-500 transition-colors",disabled:g||y,children:"Sign in"})]});return(0,cs.jsx)(Qd,{title:"Yatrik Account",subtitle:q,children:(0,cs.jsxs)("div",{className:"fade-in",children:[(0,cs.jsxs)("div",{className:"mb-6 grid grid-cols-2 rounded-lg border border-gray-200 overflow-hidden",children:[(0,cs.jsx)("button",{type:"button",onClick:()=>a("login"),className:"py-2.5 text-sm font-medium transition-all duration-200 ".concat("login"===s?"bg-primary-50 text-primary-700":"bg-white text-neutral-600 hover:bg-gray-50"),disabled:g||y,children:"Sign in"}),(0,cs.jsx)("button",{type:"button",onClick:()=>a("signup"),className:"py-2.5 text-sm font-medium transition-all duration-200 ".concat("signup"===s?"bg-primary-50 text-primary-700":"bg-white text-neutral-600 hover:bg-gray-50"),disabled:g||y,children:"Create account"})]}),"login"===s?(0,cs.jsx)("div",{children:P?(0,cs.jsx)("div",{children:_?(0,cs.jsxs)("div",{className:"text-center py-8",children:[(0,cs.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,cs.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Check your email"}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600 mb-6",children:["We've sent a password reset link to ",(0,cs.jsx)("strong",{children:p.email})]}),(0,cs.jsx)("button",{type:"button",onClick:()=>{E(!1),T(!1),x({email:""})},className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors",children:"Back to Sign in"})]}):(0,cs.jsxs)("form",{className:"space-y-6",onSubmit:async e=>{if(e.preventDefault(),U()){j(!0);try{const e=await(0,xs.nr)("/api/auth/forgot-password",{method:"POST",body:JSON.stringify({email:p.email})});e.ok?(T(!0),Oe.Ay.success("Password reset email sent! Check your inbox.")):Oe.Ay.error(e.message||"Failed to send reset email")}catch(t){Oe.Ay.error("Network error. Please try again.")}finally{j(!1)}}},children:[(0,cs.jsxs)("div",{className:"text-center mb-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Reset your password"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Enter your email address and we'll send you a link to reset your password."})]}),(0,cs.jsx)(ou,{id:"email",label:"Email address",type:"email",autoComplete:"email",value:p.email,onChange:e=>W("email",e.target.value),error:S.email,disabled:v}),(0,cs.jsxs)("div",{className:"flex gap-3",children:[(0,cs.jsx)("button",{type:"button",onClick:()=>E(!1),className:"flex-1 py-2 px-4 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Back to Sign in"}),(0,cs.jsx)("button",{type:"submit",className:"flex-1 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-all duration-200",disabled:v,children:v?(0,cs.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,cs.jsx)(ms,{size:"sm",color:"white"}),(0,cs.jsx)("span",{children:"Sending..."})]}):"Send reset link"})]})]})}):(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsxs)("form",{className:"space-y-6 login-form-compact",onSubmit:async e=>{if(e.preventDefault(),B()){f(!0),Oe.Ay.success("Signing in...",{duration:1e3});try{var t,s,r,a,n,i;const e=d.email.trim().toLowerCase(),o=/^([a-z0-9]+-depot|depot-[a-z0-9]+)@yatrik\.com$/i.test(e),l=o?"/api/depot-auth/login":"/api/auth/login",c={email:e,password:d.password};console.log("[Auth] Login attempt:",{email:e,isDepotEmail:o,url:l,body:c});const u=await(0,xs.nr)(l,{method:"POST",body:JSON.stringify(c)});if(console.log("[Auth] Login response:",u),!u.ok)return console.error("[Auth] Login failed:",u.message),void Oe.Ay.error(u.message||"Login failed");const h=(null===(t=u.data)||void 0===t?void 0:t.user)||(null===(s=u.data)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.user),m=(null===(a=u.data)||void 0===a?void 0:a.token)||(null===(n=u.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.token);console.log("[Auth] Extracted user and token:",{user:h,token:m}),h&&m?await F(h,m):(console.error("[Auth] Invalid response structure:",u.data),Oe.Ay.error("Invalid response from server"))}catch(o){console.error("[Auth] Login error:",o),Oe.Ay.error("Network error. Please try again.")}finally{f(!1)}}},children:[(0,cs.jsx)(ou,{id:"email",label:"Email address",type:"email",autoComplete:"email",value:d.email,onChange:e=>V("email",e.target.value),error:N.email,disabled:g}),(0,cs.jsx)(lu,{id:"password",label:"Password",autoComplete:"current-password",value:d.password,onChange:e=>V("password",e.target.value),error:N.password,disabled:g}),(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("label",{className:"flex items-center gap-2 text-sm text-neutral-600",children:[(0,cs.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"})," Remember me"]}),(0,cs.jsx)("button",{type:"button",onClick:()=>E(!0),className:"text-sm font-medium text-primary-600 hover:text-primary-500",children:"Forgot password?"})]}),(0,cs.jsx)("div",{children:(0,cs.jsx)("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-all duration-200 btn-transition login-form-compact",disabled:g,children:g?(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(ms,{size:"sm",color:"white"}),(0,cs.jsx)("span",{children:"Signing in..."})]}):"Sign in"})})]}),(0,cs.jsxs)("div",{className:"mt-6 login-form-compact",children:[(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,cs.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,cs.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,cs.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"or"})})]}),(0,cs.jsx)("div",{className:"mt-6",children:(0,cs.jsx)(cu,{href:"".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:3001","/api/auth/google?next=").concat(encodeURIComponent(c)),ariaLabel:"Sign in with Google",icon:(0,cs.jsx)(nu,{className:"text-red-500"}),disabled:g||y,className:"transform hover:scale-105 active:scale-95 transition-transform duration-100",children:"Sign in with Google"})})]})]})}):(0,cs.jsx)("div",{children:(0,cs.jsxs)("div",{className:"max-w-lg mx-auto",children:[(0,cs.jsxs)("form",{className:"space-y-2 login-form-compact",onSubmit:async e=>{if(e.preventDefault(),z()){b(!0);try{var t,s;const e={name:h.name,email:h.email,phone:"+91"+h.phone,password:h.password,role:"passenger"},r=await(0,xs.nr)("/api/auth/register",{method:"POST",body:JSON.stringify(e)});if(!r.ok)return void Oe.Ay.error(r.message||"Registration failed");const a=(null===(t=r.data.data)||void 0===t?void 0:t.user)||r.data.user,n=(null===(s=r.data.data)||void 0===s?void 0:s.token)||r.data.token;a&&n?(Oe.Ay.success("Account created successfully!"),await F(a,n)):Oe.Ay.error("Invalid response from server")}catch(r){Oe.Ay.error("Network error. Please try again.")}finally{b(!1)}}},children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,cs.jsx)(ou,{id:"name",label:"Full Name",type:"text",autoComplete:"name",value:h.name,onChange:e=>K("name",e.target.value),error:k.name,disabled:y||L}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)(ou,{id:"email",label:"Email address",type:"email",autoComplete:"email",value:h.email,onChange:e=>K("email",e.target.value),error:k.email,disabled:y,className:"".concat("available"===D?"border-green-500":"exists"===D?"border-red-500":"checking"===D?"border-blue-500":"")}),O&&(0,cs.jsx)("div",{className:"mt-1 text-sm ".concat("available"===D?"text-green-600":"exists"===D?"text-red-600":"checking"===D?"text-blue-600":"text-gray-600"),children:O})]}),(0,cs.jsx)(ou,{id:"phone",label:"Mobile Number",type:"tel",autoComplete:"tel",placeholder:"9876543210",value:h.phone,onChange:H,error:k.phone,disabled:y||L,maxLength:"10"}),(0,cs.jsx)(lu,{id:"password",label:"Password",autoComplete:"new-password",value:h.password,onChange:e=>K("password",e.target.value),error:k.password,disabled:y||L})]}),(0,cs.jsx)(lu,{id:"confirmPassword",label:"Confirm Password",autoComplete:"new-password",value:h.confirmPassword,onChange:e=>K("confirmPassword",e.target.value),error:k.confirmPassword,disabled:y||L}),(0,cs.jsx)("div",{children:(0,cs.jsx)("button",{type:"submit",className:"w-full flex justify-center py-1.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-all duration-200 btn-transition login-form-compact",disabled:y||L||"checking"===D,children:y?(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(ms,{size:"sm",color:"white"}),(0,cs.jsx)("span",{children:"Creating account..."})]}):"Create Account"})})]}),(0,cs.jsxs)("div",{className:"mt-4",children:[(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,cs.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,cs.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,cs.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"or"})})]}),(0,cs.jsx)("div",{className:"mt-6",children:(0,cs.jsx)(cu,{href:"".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:3001","/api/auth/google?next=").concat(encodeURIComponent(c),"&mode=signup"),ariaLabel:"Sign up with Google",icon:(0,cs.jsx)(nu,{className:"text-red-500"}),className:"py-2 transform hover:scale-105 active:scale-95 transition-transform duration-100",disabled:g||y,children:"Sign up with Google"})})]})]})})]})})},uu=()=>{const e=te(),[t]=Me(),{login:s}=(0,Re.A)(),[a,n]=(0,r.useState)(!0),[i,o]=(0,r.useState)(null);return(0,r.useEffect)(()=>{const r=e=>{switch(e){case"ADMIN":return"/admin";case"CONDUCTOR":return"/conductor";case"DRIVER":return"/driver";case"DEPOT_MANAGER":return"/depot";default:return"/pax"}};(async()=>{try{if(t.get("error"))return o("Authentication failed. Please try again."),void setTimeout(()=>e("/login"),2e3);const n=t.get("user"),i=t.get("token"),l=t.get("next");if(n&&i)try{const t=JSON.parse(decodeURIComponent(n));s(t,i);const a=(t.role||"passenger").toUpperCase();let o;if(l&&l.startsWith("/")){o=l.startsWith("/pax")&&"PASSENGER"===a||l.startsWith("/admin")&&"ADMIN"===a||l.startsWith("/conductor")&&"CONDUCTOR"===a||l.startsWith("/driver")&&"DRIVER"===a||l.startsWith("/depot")&&"DEPOT_MANAGER"===a?l:r(a)}else o=r(a);return void e(o,{replace:!0})}catch(a){return o("Invalid user data received. Please try again."),void setTimeout(()=>e("/login"),2e3)}o("Authentication incomplete. Please try signing in again."),setTimeout(()=>e("/login"),2e3)}catch(i){o("Authentication failed. Please try again."),setTimeout(()=>e("/login"),2e3)}finally{n(!1)}})()},[t,s,e]),i?(0,cs.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,cs.jsxs)("div",{className:"text-center p-8 bg-white rounded-2xl shadow-lg border border-gray-200",children:[(0,cs.jsxs)("div",{className:"text-red-500 text-xl mb-4",children:["\u274c ",i]}),(0,cs.jsx)("div",{className:"text-gray-600",children:"Redirecting to login page..."})]})}):(0,cs.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,cs.jsxs)("div",{className:"text-center p-8 bg-white rounded-2xl shadow-lg border border-gray-200",children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-900 font-medium",children:"Completing Google sign-in..."}),(0,cs.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Please wait while we authenticate you"})]})})},hu=()=>{const e=te(),[t]=Me(),[s,a]=(0,r.useState)({password:"",confirmPassword:""}),[n,i]=(0,r.useState)({}),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!0),m=t.get("token");(0,r.useEffect)(()=>{if(!m)return Oe.Ay.error("Invalid reset link. Please request a new password reset."),void e("/login");d(!0),h(!1)},[m,e]);const p=(e,t)=>{a(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t})),n[e]&&i(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:""}))};return u?(0,cs.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,cs.jsxs)("div",{className:"text-center p-8 bg-white rounded-2xl shadow-lg border border-gray-200",children:[(0,cs.jsx)(ms,{size:"lg"}),(0,cs.jsx)("p",{className:"text-gray-600 mt-4",children:"Verifying reset link..."})]})}):c?(0,cs.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,cs.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Reset Password"}),(0,cs.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Enter your new password below"})]}),(0,cs.jsxs)("div",{className:"bg-white py-8 px-6 shadow-lg rounded-lg",children:[(0,cs.jsxs)("form",{className:"space-y-6",onSubmit:async t=>{if(t.preventDefault(),(()=>{const e={};return s.password?s.password.length<8&&(e.password="Password must be at least 8 characters"):e.password="Password is required",s.confirmPassword?s.password!==s.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",i(e),0===Object.keys(e).length})()){l(!0);try{const t=await(0,xs.nr)("/api/auth/reset-password",{method:"POST",body:JSON.stringify({token:m,newPassword:s.password})});t.ok?(Oe.Ay.success("Password reset successfully! You can now sign in with your new password."),e("/login")):Oe.Ay.error(t.message||"Failed to reset password. The link may have expired.")}catch(r){Oe.Ay.error("Network error. Please try again.")}finally{l(!1)}}},children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),(0,cs.jsx)("input",{id:"password",name:"password",type:"password",required:!0,className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(n.password?"border-red-300":"border-gray-300"),placeholder:"Enter new password",value:s.password,onChange:e=>p("password",e.target.value),disabled:o}),n.password&&(0,cs.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n.password})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),(0,cs.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(n.confirmPassword?"border-red-300":"border-gray-300"),placeholder:"Confirm new password",value:s.confirmPassword,onChange:e=>p("confirmPassword",e.target.value),disabled:o}),n.confirmPassword&&(0,cs.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n.confirmPassword})]}),(0,cs.jsx)("div",{children:(0,cs.jsx)("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(ms,{size:"sm",color:"white"}),(0,cs.jsx)("span",{children:"Resetting Password..."})]}):"Reset Password"})})]}),(0,cs.jsx)("div",{className:"mt-6 text-center",children:(0,cs.jsx)("button",{onClick:()=>e("/login"),className:"text-sm text-blue-600 hover:text-blue-500 transition-colors",children:"Back to Sign In"})})]})]})}):null},mu=()=>(0,cs.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Profile"}),(0,cs.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,cs.jsx)("p",{className:"text-gray-600",children:"Profile management functionality will be implemented here."})})]});var pu=s(9081),xu=s(4919);const gu=(0,Ns.A)("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),fu=(0,Ns.A)("arrow-down-right",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),yu=(0,Ns.A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var bu=s(1360);const vu=(0,Ns.A)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),ju=(0,Ns.A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var Nu=s(5087),wu=s(2024);const ku=()=>{const{user:e}=(0,Re.A)(),[t,s]=(0,r.useState)(0),[a,n]=(0,r.useState)(!0),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)("overview"),[h,m]=(0,r.useState)(!1),[p,x]=(0,r.useState)(""),[g,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{y()},[]);const y=async()=>{if(e){c(!0);try{const e=await(0,xs.nr)("/api/wallet/balance");e.ok&&s(e.data.balance||0);const t=await(0,xs.nr)("/api/wallet/transactions");t.ok&&o(t.data.transactions||[])}catch(t){console.error("Error fetching wallet data:",t),Oe.Ay.error("Failed to load wallet data")}finally{c(!1)}}},b=e=>{switch(e){case"transport":return(0,cs.jsx)(xu.A,{className:"w-5 h-5 text-blue-600"});case"bonus":return(0,cs.jsx)(gu,{className:"w-5 h-5 text-green-600"});case"refund":return(0,cs.jsx)(fu,{className:"w-5 h-5 text-purple-600"});default:return(0,cs.jsx)(yu,{className:"w-5 h-5 text-gray-600"})}},v=e=>{switch(e){case"completed":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"failed":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},j=[{icon:(0,cs.jsx)(bu.A,{className:"w-6 h-6"}),label:"Add Money",action:()=>f(!0)},{icon:(0,cs.jsx)(yu,{className:"w-6 h-6"}),label:"Cards",action:()=>console.log("Cards")},{icon:(0,cs.jsx)(vu,{className:"w-6 h-6"}),label:"History",action:()=>console.log("History")},{icon:(0,cs.jsx)(gu,{className:"w-6 h-6"}),label:"Rewards",action:()=>console.log("Rewards")}];return l?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Loading wallet..."})]})}):(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50 p-6",children:[(0,cs.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-6 mb-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Wallet"}),(0,cs.jsxs)("button",{onClick:()=>n(!a),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[a?(0,cs.jsx)(ju,{className:"w-5 h-5"}):(0,cs.jsx)(Nu.A,{className:"w-5 h-5"}),(0,cs.jsxs)("span",{children:[a?"Hide":"Show"," Balance"]})]})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("p",{className:"text-gray-600 mb-2",children:"Available Balance"}),(0,cs.jsx)("div",{className:"text-4xl font-bold text-gray-900 mb-4",children:a?(N=t,new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(N)):"****"}),(0,cs.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,cs.jsx)("button",{onClick:()=>f(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Money"}),(0,cs.jsx)("button",{className:"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Withdraw"})]})]})]}),(0,cs.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:j.map((e,t)=>(0,cs.jsxs)("button",{onClick:e.action,className:"bg-white p-4 rounded-xl shadow-sm hover:shadow-md transition-shadow text-center",children:[(0,cs.jsx)("div",{className:"text-blue-600 mb-2",children:e.icon}),(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-700",children:e.label})]},t))}),(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[{label:"Total Spent",value:"\u20b98,500",change:"+12%",trend:"up",color:"text-blue-600"},{label:"Savings",value:"\u20b93,200",change:"+8%",trend:"up",color:"text-green-600"},{label:"Rewards",value:"\u20b91,800",change:"+25%",trend:"up",color:"text-purple-600"}].map((e,t)=>(0,cs.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:e.label}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.value})]}),(0,cs.jsxs)("div",{className:"text-right ".concat(e.color),children:[(0,cs.jsx)("p",{className:"text-sm font-medium",children:e.change}),(0,cs.jsx)("p",{className:"text-xs",children:"This month"})]})]})},t))}),(0,cs.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Recent Transactions"}),(0,cs.jsx)("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View All"})]}),0===i.length?(0,cs.jsxs)("div",{className:"text-center py-8",children:[(0,cs.jsx)(yu,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-500",children:"No transactions yet"}),(0,cs.jsx)("p",{className:"text-sm text-gray-400",children:"Your transaction history will appear here"})]}):(0,cs.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,cs.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-100 rounded-lg",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("div",{className:"p-2 bg-gray-100 rounded-lg",children:b(e.category)}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"font-medium text-gray-900",children:e.description}),(0,cs.jsxs)("p",{className:"text-sm text-gray-500",children:[e.date," \u2022 ",e.time]})]})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsxs)("p",{className:"font-medium ".concat("credit"===e.type?"text-green-600":"text-red-600"),children:["credit"===e.type?"+":"-","\u20b9",e.amount]}),(0,cs.jsx)("span",{className:"inline-block px-2 py-1 text-xs rounded-full ".concat(v(e.status)),children:e.status})]})]},e.id))})]})]}),g&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add Money to Wallet"}),(0,cs.jsxs)("div",{className:"mb-4",children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (\u20b9)"}),(0,cs.jsx)("input",{type:"number",value:p,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter amount",min:"1",step:"1"})]}),(0,cs.jsxs)("div",{className:"flex space-x-3",children:[(0,cs.jsx)("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,cs.jsx)("button",{onClick:async()=>{if(!p||p<=0)Oe.Ay.error("Please enter a valid amount");else{m(!0);try{await pu.default.addMoneyToWallet(parseFloat(p)),f(!1),x(""),y(),Oe.Ay.success("Money added successfully!")}catch(e){console.error("Error adding money:",e),Oe.Ay.error("Failed to add money. Please try again.")}finally{m(!1)}}},disabled:h||!p,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:h?(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)(wu.A,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):"Add Money"})]})]})})]});var N},Au=()=>(0,cs.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Trip Planner"}),(0,cs.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,cs.jsx)("p",{className:"text-gray-600",children:"Trip planning functionality will be implemented here."})})]}),Su=(0,Ns.A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Cu=e=>{let{trip:t,selectedSeats:s,onSeatSelect:a,onBack:n,onContinue:i,passengerGender:o="male"}=e;const[l,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(!1),[h,m]=(0,r.useState)(null),[p,x]=(0,r.useState)((null===t||void 0===t?void 0:t.fare)||499);(0,r.useEffect)(()=>{console.log("\ud83c\udfab ModernSeatSelection received trip:",t),null!==t&&void 0!==t&&t.fare&&x(t.fare),null!==t&&void 0!==t&&t.id||null!==t&&void 0!==t&&t._id?g():console.warn("\u26a0\ufe0f No trip ID found in trip object:",t)},[null===t||void 0===t?void 0:t.id,null===t||void 0===t?void 0:t._id,null===t||void 0===t?void 0:t.fare]);const g=async()=>{try{u(!0),m(null);const e=t.serviceDate||t.date||(new Date).toISOString().split("T")[0],s=t.id||t._id;console.log("\ud83d\udd0d Fetching seats for trip:",s,"Date:",e);const r=await(0,xs.nr)("/api/seats/trip/".concat(s,"?date=").concat(e));if(r.ok){console.log("\u2705 Seat data received:",r.data),c(r.data.seats||[]);const e=(null===t||void 0===t?void 0:t.fare)||r.data.tripFare||r.data.seatPrice||499;x(e),console.log("\ud83d\udcb0 Seat price set to:",e,"from trip fare:",null===t||void 0===t?void 0:t.fare,"API tripFare:",r.data.tripFare)}else console.error("\u274c Seat API error:",r),m("Failed to load seat information: ".concat(r.message||"Unknown error"))}catch(e){console.error("Error fetching seats:",e),m("Failed to load seat information")}finally{u(!1)}},f=e=>{"available"!==e.status&&"available_male"!==e.status&&"available_female"!==e.status||a(e.seatNumber)},y=e=>"booked"===e.status||"booked_male"===e.status||"booked_female"===e.status?"booked":s.includes(e.seatNumber)?"selected":"available_male"===e.status?"male"===o?"available":"restricted_male":"available_female"===e.status?"female"===o?"available":"restricted_female":"available",b=e=>{const t="w-12 h-12 rounded border-2 flex items-center justify-center text-sm font-bold cursor-pointer relative transition-all duration-200";switch(y(e)){case"available":return"available_male"===e.status?"".concat(t," bg-white border-blue-400 text-blue-700 hover:bg-blue-50"):"available_female"===e.status?"".concat(t," bg-white border-pink-400 text-pink-700 hover:bg-pink-50"):"".concat(t," bg-white border-gray-300 text-gray-700 hover:bg-gray-50");case"selected":return"".concat(t,"male"===o?" bg-blue-600 border-blue-700 text-white":" bg-pink-600 border-pink-700 text-white");case"booked":return"".concat(t," bg-gray-200 border-gray-300 text-gray-500 cursor-not-allowed");case"restricted_male":case"restricted_female":return"".concat(t," bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed opacity-50");default:return"".concat(t," bg-white border-gray-300 text-gray-700 hover:bg-gray-50")}},v=e=>{y(e);return"available_male"===e.status||"booked_male"===e.status?(0,cs.jsxs)("div",{className:"flex items-center justify-center relative",children:[(0,cs.jsx)("span",{className:"text-sm font-semibold",children:e.seatNumber}),(0,cs.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-blue-600 rounded-full flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-white text-xs font-bold",children:"\u2642"})})]}):"available_female"===e.status||"booked_female"===e.status?(0,cs.jsxs)("div",{className:"flex items-center justify-center relative",children:[(0,cs.jsx)("span",{className:"text-sm font-semibold",children:e.seatNumber}),(0,cs.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-pink-600 rounded-full flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-white text-xs font-bold",children:"\u2640"})})]}):(0,cs.jsx)("span",{className:"text-sm font-semibold",children:e.seatNumber})},j=s.length*p;return(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,cs.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("button",{onClick:n,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:(0,cs.jsx)(Su,{className:"w-5 h-5"})}),(0,cs.jsx)("div",{children:(0,cs.jsxs)("h1",{className:"text-xl font-semibold text-gray-900",children:[(null===t||void 0===t?void 0:t.fromCity)||(null===t||void 0===t?void 0:t.routeName)||"Kottayam"," \u2192 ",(null===t||void 0===t?void 0:t.toCity)||"Thiruvananthapuram"]})})]}),(0,cs.jsx)("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,cs.jsx)(Bs.A,{className:"w-5 h-5 text-gray-600"})})]})})}),(0,cs.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,cs.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[t&&(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,cs.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-white text-sm font-bold",children:"4.4"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"font-semibold text-gray-900",children:"Madhavi Travels"}),(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"A Rising Star on redBus"})]})]}),(0,cs.jsxs)("div",{className:"text-sm text-gray-600 space-y-2",children:[(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"font-medium",children:"04:50 - 07:30"}),(0,cs.jsx)("span",{children:"Wed 17 Sep"})]}),(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:"Volvo A/C Semi Sleeper (2+2)"})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,cs.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Seat Types"}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{className:"legend-item flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"w-8 h-8 bg-white border-2 border-gray-300 rounded flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-xs font-bold text-gray-700",children:"01"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"Available"}),(0,cs.jsxs)("p",{className:"text-xs text-gray-500",children:["\u20b9",p]})]})]}),(0,cs.jsxs)("div",{className:"legend-item flex items-center space-x-3",children:[(0,cs.jsxs)("div",{className:"w-8 h-8 bg-white border-2 border-blue-400 rounded flex items-center justify-center relative",children:[(0,cs.jsx)("span",{className:"text-xs font-bold text-blue-700",children:"02"}),(0,cs.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-blue-600 rounded-full flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-white text-xs",children:"\u2642"})})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"Male Only"}),(0,cs.jsxs)("p",{className:"text-xs text-gray-500",children:["\u20b9",p]})]})]}),(0,cs.jsxs)("div",{className:"legend-item flex items-center space-x-3",children:[(0,cs.jsxs)("div",{className:"w-8 h-8 bg-white border-2 border-pink-400 rounded flex items-center justify-center relative",children:[(0,cs.jsx)("span",{className:"text-xs font-bold text-pink-700",children:"03"}),(0,cs.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-pink-600 rounded-full flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-white text-xs",children:"\u2640"})})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"Female Only"}),(0,cs.jsxs)("p",{className:"text-xs text-gray-500",children:["\u20b9",p]})]})]}),(0,cs.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-800 mb-3",children:"Selection Colors"}),(0,cs.jsxs)("div",{className:"legend-item flex items-center space-x-3 mb-3",children:[(0,cs.jsx)("div",{className:"w-8 h-8 bg-blue-600 border-2 border-blue-700 rounded flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-xs font-bold text-white",children:"M"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"Male Selection"}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Blue when male selects"})]})]}),(0,cs.jsxs)("div",{className:"legend-item flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"w-8 h-8 bg-pink-600 border-2 border-pink-700 rounded flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-xs font-bold text-white",children:"F"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"Female Selection"}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Pink when female selects"})]})]})]}),(0,cs.jsxs)("div",{className:"legend-item flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"w-8 h-8 bg-gray-200 border-2 border-gray-300 rounded flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-xs font-bold text-gray-500",children:"04"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"Sold"}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Unavailable"})]})]})]})]})]}),(0,cs.jsx)("div",{className:"lg:col-span-3",children:(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,cs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex space-x-8",children:[(0,cs.jsx)("div",{className:"text-pink-600 font-semibold border-b-2 border-pink-600 pb-2",children:"1. Select seats"}),(0,cs.jsx)("div",{className:"text-gray-500 font-medium",children:"2. Board/Drop point"}),(0,cs.jsx)("div",{className:"text-gray-500 font-medium",children:"3. Passenger Info"})]}),(0,cs.jsxs)("div",{className:"text-sm text-gray-600 font-medium",children:[l.filter(e=>"available"===e.status||"available_male"===e.status||"available_female"===e.status).length," seats available"]})]})}),(()=>{if(d)return(0,cs.jsxs)("div",{className:"flex items-center justify-center py-20",children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"}),(0,cs.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading seats..."})]});if(h)return(0,cs.jsx)("div",{className:"flex items-center justify-center py-20 text-red-600",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,cs.jsx)("p",{className:"text-lg font-medium",children:h})]})});const e=[];for(let t=0;t<l.length;t+=4)e.push(l.slice(t,t+4));return(0,cs.jsxs)("div",{className:"p-6",children:[(0,cs.jsx)("div",{className:"flex justify-end mb-8 pr-8",children:(0,cs.jsxs)("div",{className:"bg-gray-100 rounded-lg px-4 py-2 flex items-center space-x-2",children:[(0,cs.jsxs)("svg",{className:"w-5 h-5 text-gray-600",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,cs.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,cs.jsx)("circle",{cx:"12",cy:"12",r:"6"}),(0,cs.jsx)("circle",{cx:"12",cy:"12",r:"2"})]}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Driver"})]})}),(0,cs.jsx)("div",{className:"space-y-4",children:e.map((e,t)=>{const s=e.slice(0,2),r=e.slice(2,4);return(0,cs.jsx)("div",{className:"flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"flex space-x-6",children:[(0,cs.jsx)("div",{className:"flex space-x-3",children:s.map(e=>(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("button",{onClick:()=>f(e),className:b(e),disabled:"booked"===e.status||"booked_male"===e.status||"booked_female"===e.status,title:"Seat ".concat(e.seatNumber," - ").concat(e.status),children:v(e)}),(0,cs.jsx)("div",{className:"seat-price",children:"booked"===e.status||"booked_male"===e.status||"booked_female"===e.status?"Sold":"\u20b9".concat(p)})]},e.seatNumber))}),(0,cs.jsx)("div",{className:"aisle-separator w-16"}),(0,cs.jsx)("div",{className:"flex space-x-3",children:r.map(e=>(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("button",{onClick:()=>f(e),className:b(e),disabled:"booked"===e.status||"booked_male"===e.status||"booked_female"===e.status,title:"Seat ".concat(e.seatNumber," - ").concat(e.status),children:v(e)}),(0,cs.jsx)("div",{className:"seat-price",children:"booked"===e.status||"booked_male"===e.status||"booked_female"===e.status?"Sold":"\u20b9".concat(p)})]},e.seatNumber))})]})},t)})})]})})()]})})]})}),(0,cs.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg",children:(0,cs.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-900",children:s.length>0?"".concat(s.length," seats selected"):"No seats selected"}),s.length>0&&(0,cs.jsxs)("p",{className:"text-xs text-gray-500",children:["Seats: ",s.join(", ")]})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsxs)("div",{className:"text-xl font-bold text-gray-900",children:["\u20b9",j]}),s.length>0&&(0,cs.jsxs)("div",{className:"text-sm text-gray-500",children:[s.length," \xd7 \u20b9",p]})]})]}),(0,cs.jsx)("button",{onClick:i,disabled:0===s.length,className:"bg-pink-600 hover:bg-pink-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold px-8 py-3 rounded-lg transition-colors",children:"Select boarding & dropping points"})]})})}),(0,cs.jsx)("div",{className:"h-20"})]})},_u=e=>{let{trip:t,selectedSeats:s,onSeatSelect:r,onBack:a,onContinue:n,passengerGender:i="male"}=e;return(0,cs.jsx)(Cu,{trip:t,selectedSeats:s,onSeatSelect:r,onBack:a,onContinue:n,passengerGender:i})},Tu=e=>{let{trip:t,selectedSeats:s,boardingPoint:a,dropPoint:n,onBoardingSelect:i,onDropSelect:o,onBack:l,onContinue:c}=e;const[d,u]=(0,r.useState)([]),[h,m]=(0,r.useState)([]),[p,x]=(0,r.useState)(!1),[g,f]=(0,r.useState)(null);(0,r.useEffect)(()=>{null!==t&&void 0!==t&&t.id&&y()},[null===t||void 0===t?void 0:t.id]);const y=async()=>{try{x(!0),f(null);const e=await(0,xs.nr)("/api/routes/".concat(t.routeId,"/stops"));if(e.ok){const t=e.data||[];u(t),m(t)}else f("Failed to load boarding and drop points")}catch(e){console.error("Error fetching route stops:",e),f("Failed to load boarding and drop points")}finally{x(!1)}},b=(()=>{if(!a||!n)return 0;const e=Math.abs(n.sequence-a.sequence);return((null===t||void 0===t?void 0:t.baseFare)||499)+50*e})()*s.length;return p?(0,cs.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"}),(0,cs.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading boarding points..."})]}):g?(0,cs.jsxs)("div",{className:"flex items-center justify-center py-12 text-red-600",children:[(0,cs.jsx)(Nd.A,{className:"w-5 h-5 mr-2"}),(0,cs.jsx)("span",{children:g})]}):(0,cs.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsxs)("button",{onClick:l,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors",children:[(0,cs.jsx)(td,{className:"w-4 h-4 rotate-180"}),(0,cs.jsx)("span",{children:"Back to Seats"})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Boarding & Drop Points"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Select your pickup and destination points"})]})]}),t&&(0,cs.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,cs.jsx)("div",{className:"flex items-center justify-between",children:(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:t.routeName||"".concat(t.from," \u2192 ").concat(t.to)}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-blue-700",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,cs.jsx)(gs.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:[t.from," \u2192 ",t.to]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,cs.jsx)(sd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:t.time||t.departureTime})]}),(0,cs.jsx)("span",{className:"text-blue-600",children:"\u2022"}),(0,cs.jsxs)("span",{children:["Selected Seats: ",s.join(", ")]})]})]})})}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,cs.jsx)(gs.A,{className:"w-5 h-5 mr-2 text-green-600"}),"Boarding Point"]}),(0,cs.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:d.map((e,t)=>(0,cs.jsx)("button",{onClick:()=>(e=>{if(i(e),!n){const t=h.filter(t=>t.sequence>e.sequence);t.length>0&&o(t[0])}})(e),className:"w-full p-4 rounded-lg border-2 text-left transition-all ".concat((null===a||void 0===a?void 0:a.stopName)===e.stopName?"border-green-500 bg-green-50 text-green-800":"border-gray-200 hover:border-green-300 hover:bg-green-50"),children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"font-medium",children:e.stopName}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:e.address}),(0,cs.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Stop #",e.sequence," \u2022 Arrival: ",e.arrivalTime||"--:--"]})]}),(null===a||void 0===a?void 0:a.stopName)===e.stopName&&(0,cs.jsx)(jd.A,{className:"w-5 h-5 text-green-600"})]})},e._id||t))})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,cs.jsx)(gs.A,{className:"w-5 h-5 mr-2 text-red-600"}),"Drop Point"]}),(0,cs.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:h.filter(e=>!a||e.sequence>a.sequence).map((e,t)=>(0,cs.jsx)("button",{onClick:()=>(e=>{o(e)})(e),className:"w-full p-4 rounded-lg border-2 text-left transition-all ".concat((null===n||void 0===n?void 0:n.stopName)===e.stopName?"border-red-500 bg-red-50 text-red-800":"border-gray-200 hover:border-red-300 hover:bg-red-50"),children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"font-medium",children:e.stopName}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:e.address}),(0,cs.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Stop #",e.sequence," \u2022 Departure: ",e.departureTime||"--:--"]})]}),(null===n||void 0===n?void 0:n.stopName)===e.stopName&&(0,cs.jsx)(jd.A,{className:"w-5 h-5 text-red-600"})]})},e._id||t))})]})]}),(a||n)&&(0,cs.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mt-6",children:[(0,cs.jsx)("h4",{className:"font-medium text-gray-800 mb-3",children:"Fare Calculation"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Base Fare:"}),(0,cs.jsxs)("span",{className:"ml-2 font-medium",children:["\u20b9",(null===t||void 0===t?void 0:t.baseFare)||499]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Distance:"}),(0,cs.jsx)("span",{className:"ml-2 font-medium",children:a&&n?"".concat(Math.abs(n.sequence-a.sequence)," stops"):"--"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Seats:"}),(0,cs.jsx)("span",{className:"ml-2 font-medium",children:s.length})]})]}),(0,cs.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,cs.jsxs)("div",{className:"flex justify-between items-center",children:[(0,cs.jsx)("span",{className:"text-lg font-semibold text-gray-800",children:"Total Amount:"}),(0,cs.jsxs)("span",{className:"text-xl font-bold text-green-600",children:["\u20b9",b]})]})})]}),(0,cs.jsxs)("div",{className:"flex justify-between items-center mt-6",children:[(0,cs.jsx)("button",{onClick:l,className:"px-6 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"\u2190 Back to Seats"}),(0,cs.jsxs)("button",{onClick:c,disabled:!a||!n,className:"px-8 py-3 bg-blue-600 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)("span",{children:"Continue to Passenger Details"}),(0,cs.jsx)(jd.A,{className:"w-4 h-4"})]})]})]})},Pu=()=>{var e,t;const{user:s}=(0,Re.A)(),a=Z(),n=te(),[i,o]=(0,r.useState)((null===(e=a.state)||void 0===e?void 0:e.selectedRoute)||null),[l,c]=(0,r.useState)((null===(t=a.state)||void 0===t?void 0:t.selectedDate)||""),[d,u]=(0,r.useState)([]),[h,m]=(0,r.useState)(null),[p,x]=(0,r.useState)([]),[g,f]=(0,r.useState)([]),[y,b]=(0,r.useState)(null),[v,j]=(0,r.useState)(null),[N,w]=(0,r.useState)({name:(null===s||void 0===s?void 0:s.name)||"",email:(null===s||void 0===s?void 0:s.email)||"",phone:(null===s||void 0===s?void 0:s.phone)||"",age:"",gender:(null===s||void 0===s?void 0:s.gender)||"male"}),[k,A]=(0,r.useState)(!1),[S,C]=(0,r.useState)(1),[_,T]=(0,r.useState)(null),[P,E]=(0,r.useState)([]);(0,r.useEffect)(()=>{i?l&&D():n("/kerala-routes")},[i,l]);const D=async()=>{try{const e=await(0,xs.nr)("/api/booking/route/".concat(i.id,"/trips?date=").concat(l));e.ok?u(e.data):Oe.Ay.error("Failed to fetch trips")}catch(e){console.error("Error fetching trips:",e),Oe.Ay.error("Failed to fetch trips")}},M=async e=>{await(async e=>{try{const t=await(0,xs.nr)("/api/booking/trip/".concat(e,"/seats"));t.ok?(x(t.data.seats),m(t.data.trip)):Oe.Ay.error("Failed to fetch seat availability")}catch(t){console.error("Error fetching seats:",t),Oe.Ay.error("Failed to fetch seat availability")}})(e.id),C(2)},O=e=>{f(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},R=(e,t)=>{w(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t}))},I=()=>h&&0!==g.length?h.baseFare*g.length:0,L=async()=>{if(null!==_&&void 0!==_&&_.paymentOrder)try{await pu.default.processPayment(_.paymentOrder,N);const e=await(0,xs.nr)("/api/booking/".concat(_.booking.id,"/confirm"),{method:"POST",body:JSON.stringify({paymentId:"test_payment_id",paymentSignature:"test_signature"})});e.ok?(E(e.data.tickets),C(6),Oe.Ay.success("Booking confirmed! Payment successful.")):Oe.Ay.error("Failed to confirm booking")}catch(e){console.error("Payment error:",e),Oe.Ay.error("Payment failed. Please try again.")}else Oe.Ay.error("No payment order available")};return(0,cs.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Book Tickets"}),(0,cs.jsx)("div",{className:"flex items-center justify-center mb-8",children:(0,cs.jsx)("div",{className:"flex items-center space-x-4",children:[1,2,3,4,5].map(e=>(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(S>=e?"bg-pink-500 text-white":"bg-gray-200 text-gray-600"),children:e}),e<5&&(0,cs.jsx)("div",{className:"w-16 h-1 mx-2 ".concat(S>e?"bg-pink-500":"bg-gray-200")})]},e))})}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[1===S&&(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Select Your Trip"}),(0,cs.jsxs)("button",{onClick:()=>n("/kerala-routes"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800",children:[(0,cs.jsx)(Su,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Back to Routes"})]})]}),i&&(0,cs.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[(0,cs.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:i.routeName}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-blue-700",children:[(0,cs.jsxs)("span",{children:[i.from," \u2192 ",i.to]}),(0,cs.jsx)("span",{children:"\u2022"}),(0,cs.jsxs)("span",{children:[i.distance," km"]}),(0,cs.jsx)("span",{children:"\u2022"}),(0,cs.jsxs)("span",{children:["\u20b9",i.baseFare," starting fare"]})]})]}),(0,cs.jsx)("div",{className:"grid gap-4",children:d.map(e=>(0,cs.jsx)("div",{className:"border rounded-lg p-4 hover:border-pink-500 cursor-pointer transition-colors",onClick:()=>M(e),children:(0,cs.jsxs)("div",{className:"flex justify-between items-start",children:[(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,cs.jsx)(ks.A,{className:"w-5 h-5 text-pink-500"}),(0,cs.jsx)("span",{className:"font-semibold",children:e.busType}),(0,cs.jsx)("span",{className:"text-sm bg-green-100 text-green-800 px-2 py-1 rounded",children:e.status})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,cs.jsx)(gs.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:[e.from," \u2192 ",e.to]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,cs.jsx)(fs.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:new Date(e.date).toLocaleDateString()})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,cs.jsx)(sd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:e.time})]})]}),(0,cs.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:["Bus: ",e.busNumber," \u2022 Capacity: ",e.capacity," seats"]})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsxs)("div",{className:"text-2xl font-bold text-pink-600",children:["\u20b9",e.baseFare]}),(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:"per seat"})]})]})},e.id))}),0===d.length&&(0,cs.jsxs)("div",{className:"text-center py-8",children:[(0,cs.jsx)(ks.A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No trips available"}),(0,cs.jsx)("p",{className:"text-gray-500",children:"No trips found for the selected date."})]})]}),2===S&&(0,cs.jsx)(_u,{trip:h,selectedSeats:g,onSeatSelect:O,onBack:()=>C(1),onContinue:()=>C(3),passengerGender:N.gender}),3===S&&(0,cs.jsx)(Tu,{trip:h,selectedSeats:g,boardingPoint:y,dropPoint:v,onBoardingSelect:b,onDropSelect:j,onBack:()=>C(2),onContinue:()=>C(4)}),4===S&&(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Passenger Details"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),(0,cs.jsx)("input",{type:"text",value:N.name,onChange:e=>R("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Enter full name"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,cs.jsx)("input",{type:"email",value:N.email,onChange:e=>R("email",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Enter email"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),(0,cs.jsx)("input",{type:"tel",value:N.phone,onChange:e=>R("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Enter phone number"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age"}),(0,cs.jsx)("input",{type:"number",value:N.age,onChange:e=>R("age",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Enter age"})]})]})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("button",{onClick:()=>C(3),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"\u2190 Back"}),(0,cs.jsx)("button",{onClick:async()=>{if(h&&0!==g.length)if(N.name&&N.email&&N.phone){A(!0);try{const e=await(0,xs.nr)("/api/booking/create",{method:"POST",body:JSON.stringify({tripId:h.id,seatNumbers:g,passengerDetails:N,boardingPoint:y,dropPoint:v,paymentMethod:"razorpay"})});e.ok?(T(e.data),C(5)):Oe.Ay.error(e.message||"Failed to create booking")}catch(e){console.error("Booking error:",e),Oe.Ay.error("Failed to create booking")}finally{A(!1)}}else Oe.Ay.error("Please fill in all passenger details");else Oe.Ay.error("Please select a trip and seats")},disabled:k,className:"px-6 py-2 bg-pink-600 text-white rounded-lg disabled:opacity-50",children:k?"Creating Booking...":"Create Booking"})]})]}),5===S&&(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Payment"}),(0,cs.jsxs)("button",{onClick:()=>C(3),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800",children:[(0,cs.jsx)(Su,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Back to Details"})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Payment Summary"}),(0,cs.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,cs.jsxs)("div",{className:"space-y-2",children:[(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{children:"From:"}),(0,cs.jsx)("span",{className:"font-medium",children:null===h||void 0===h?void 0:h.from})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{children:"To:"}),(0,cs.jsx)("span",{className:"font-medium",children:null===h||void 0===h?void 0:h.to})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{children:"Date:"}),(0,cs.jsx)("span",{className:"font-medium",children:h?new Date(h.departure).toLocaleDateString():""})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{children:"Seats:"}),(0,cs.jsx)("span",{className:"font-medium",children:g.join(", ")})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{children:"Price per seat:"}),(0,cs.jsxs)("span",{className:"font-medium",children:["\u20b9",null===h||void 0===h?void 0:h.price]})]}),(0,cs.jsx)("hr",{className:"my-2"}),(0,cs.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,cs.jsx)("span",{children:"Total Amount:"}),(0,cs.jsxs)("span",{className:"text-pink-600",children:["\u20b9",I()]})]})]})}),(0,cs.jsx)("button",{onClick:L,disabled:k,className:"w-full bg-pink-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-pink-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:k?(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)(wu.A,{className:"w-5 h-5 animate-spin"}),"Processing Payment..."]}):(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)(yu,{className:"w-5 h-5"}),"Pay \u20b9",I()]})})]}),(0,cs.jsx)("button",{onClick:L,disabled:k,className:"w-full bg-pink-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-pink-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:k?(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)(wu.A,{className:"w-5 h-5 animate-spin"}),"Processing Payment..."]}):(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)(yu,{className:"w-5 h-5"}),"Pay \u20b9",I()]})})]}),6===S&&(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)(jd.A,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),(0,cs.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Booking Confirmed!"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Your payment has been processed successfully. Your tickets are ready!"})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Your Tickets"}),P.map((e,t)=>(0,cs.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("h4",{className:"font-semibold text-gray-900",children:["Ticket #",e.ticketNumber]}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600",children:["PNR: ",e.pnr]})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsxs)("p",{className:"text-lg font-bold text-pink-600",children:["\u20b9",e.fareAmount]}),(0,cs.jsxs)("p",{className:"text-sm text-gray-500",children:["Seat ",e.seatNumber]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"bg-gray-100 p-2 rounded",children:(0,cs.jsx)("img",{src:e.qrCode,alt:"QR Code",className:"w-16 h-16"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Scan QR code for validation"}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Valid until trip completion"})]})]}),(0,cs.jsxs)("button",{onClick:()=>(async e=>{try{const t=await fetch("/api/booking/tickets/".concat(e,"/pdf"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(t.ok){const s=await t.blob(),r=window.URL.createObjectURL(s),a=document.createElement("a");a.href=r,a.download="ticket_".concat(e,".pdf"),document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(r),document.body.removeChild(a)}else Oe.Ay.error("Failed to download ticket")}catch(t){console.error("Error downloading ticket:",t),Oe.Ay.error("Failed to download ticket")}})(e.id),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[(0,cs.jsx)(hd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Download PDF"})]})]})]},e.id))]}),(0,cs.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,cs.jsx)("h4",{className:"font-semibold text-green-900 mb-2",children:"What's Next?"}),(0,cs.jsxs)("ul",{className:"text-sm text-green-800 space-y-1",children:[(0,cs.jsx)("li",{children:"\u2022 Present your QR code at boarding"}),(0,cs.jsx)("li",{children:"\u2022 Keep your ticket safe during the journey"}),(0,cs.jsx)("li",{children:"\u2022 You can view your tickets anytime in your dashboard"})]})]}),(0,cs.jsxs)("div",{className:"flex space-x-4",children:[(0,cs.jsx)("button",{onClick:()=>n("/dashboard"),className:"flex-1 bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700",children:"Go to Dashboard"}),(0,cs.jsx)("button",{onClick:()=>n("/kerala-routes"),className:"flex-1 bg-pink-600 text-white py-2 px-4 rounded-lg hover:bg-pink-700",children:"Book Another Trip"})]})]})]})]})};var Eu,Du=Object.defineProperty,Mu=Object.getOwnPropertySymbols,Ou=Object.prototype.hasOwnProperty,Ru=Object.prototype.propertyIsEnumerable,Iu=(e,t,s)=>t in e?Du(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Lu=(e,t)=>{for(var s in t||(t={}))Ou.call(t,s)&&Iu(e,s,t[s]);if(Mu)for(var s of Mu(t))Ru.call(t,s)&&Iu(e,s,t[s]);return e},Fu=(e,t)=>{var s={};for(var r in e)Ou.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&Mu)for(var r of Mu(e))t.indexOf(r)<0&&Ru.call(e,r)&&(s[r]=e[r]);return s};(e=>{const t=class{constructor(e,s,r,a){if(this.version=e,this.errorCorrectionLevel=s,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(a<-1||a>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let i=[];for(let t=0;t<this.size;t++)i.push(!1);for(let t=0;t<this.size;t++)this.modules.push(i.slice()),this.isFunction.push(i.slice());this.drawFunctionPatterns();const o=this.addEccAndInterleave(r);if(this.drawCodewords(o),-1==a){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const s=this.getPenaltyScore();s<e&&(a=t,e=s),this.applyMask(t)}}n(0<=a&&a<=7),this.mask=a,this.applyMask(a),this.drawFormatBits(a),this.isFunction=[]}static encodeText(s,r){const a=e.QrSegment.makeSegments(s);return t.encodeSegments(a,r)}static encodeBinary(s,r){const a=e.QrSegment.makeBytes(s);return t.encodeSegments([a],r)}static encodeSegments(e,s){let a,i,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(t.MIN_VERSION<=l&&l<=c&&c<=t.MAX_VERSION)||d<-1||d>7)throw new RangeError("Invalid value");for(a=l;;a++){const r=8*t.getNumDataCodewords(a,s),n=o.getTotalBits(e,a);if(n<=r){i=n;break}if(a>=c)throw new RangeError("Data too long")}for(const r of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])u&&i<=8*t.getNumDataCodewords(a,r)&&(s=r);let h=[];for(const t of e){r(t.mode.modeBits,4,h),r(t.numChars,t.mode.numCharCountBits(a),h);for(const e of t.getData())h.push(e)}n(h.length==i);const m=8*t.getNumDataCodewords(a,s);n(h.length<=m),r(0,Math.min(4,m-h.length),h),r(0,(8-h.length%8)%8,h),n(h.length%8==0);for(let t=236;h.length<m;t^=253)r(t,8,h);let p=[];for(;8*p.length<h.length;)p.push(0);return h.forEach((e,t)=>p[t>>>3]|=e<<7-(7&t)),new t(a,s,p,d)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let s=0;s<this.size;s++)this.setFunctionModule(6,s,s%2==0),this.setFunctionModule(s,6,s%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let s=0;s<t;s++)for(let r=0;r<t;r++)0==s&&0==r||0==s&&r==t-1||s==t-1&&0==r||this.drawAlignmentPattern(e[s],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let s=t;for(let a=0;a<10;a++)s=s<<1^1335*(s>>>9);const r=21522^(t<<10|s);n(r>>>15==0);for(let n=0;n<=5;n++)this.setFunctionModule(8,n,a(r,n));this.setFunctionModule(8,7,a(r,6)),this.setFunctionModule(8,8,a(r,7)),this.setFunctionModule(7,8,a(r,8));for(let n=9;n<15;n++)this.setFunctionModule(14-n,8,a(r,n));for(let n=0;n<8;n++)this.setFunctionModule(this.size-1-n,8,a(r,n));for(let n=8;n<15;n++)this.setFunctionModule(8,this.size-15+n,a(r,n));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let s=0;s<12;s++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;n(t>>>18==0);for(let s=0;s<18;s++){const e=a(t,s),r=this.size-11+s%3,n=Math.floor(s/3);this.setFunctionModule(r,n,e),this.setFunctionModule(n,r,e)}}drawFinderPattern(e,t){for(let s=-4;s<=4;s++)for(let r=-4;r<=4;r++){const a=Math.max(Math.abs(r),Math.abs(s)),n=e+r,i=t+s;0<=n&&n<this.size&&0<=i&&i<this.size&&this.setFunctionModule(n,i,2!=a&&4!=a)}}drawAlignmentPattern(e,t){for(let s=-2;s<=2;s++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,t+s,1!=Math.max(Math.abs(r),Math.abs(s)))}setFunctionModule(e,t,s){this.modules[t][e]=s,this.isFunction[t][e]=!0}addEccAndInterleave(e){const s=this.version,r=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(s,r))throw new RangeError("Invalid argument");const a=t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][s],i=t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][s],o=Math.floor(t.getNumRawDataModules(s)/8),l=a-o%a,c=Math.floor(o/a);let d=[];const u=t.reedSolomonComputeDivisor(i);for(let n=0,m=0;n<a;n++){let s=e.slice(m,m+c-i+(n<l?0:1));m+=s.length;const r=t.reedSolomonComputeRemainder(s,u);n<l&&s.push(0),d.push(s.concat(r))}let h=[];for(let t=0;t<d[0].length;t++)d.forEach((e,s)=>{(t!=c-i||s>=l)&&h.push(e[t])});return n(h.length==o),h}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let s=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let r=0;r<this.size;r++)for(let n=0;n<2;n++){const i=t-n,o=0==(t+1&2)?this.size-1-r:r;!this.isFunction[o][i]&&s<8*e.length&&(this.modules[o][i]=a(e[s>>>3],7-(7&s)),s++)}}n(s==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let s=0;s<this.size;s++){let r;switch(e){case 0:r=(s+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=s%3==0;break;case 3:r=(s+t)%3==0;break;case 4:r=(Math.floor(s/3)+Math.floor(t/2))%2==0;break;case 5:r=s*t%2+s*t%3==0;break;case 6:r=(s*t%2+s*t%3)%2==0;break;case 7:r=((s+t)%2+s*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][s]&&r&&(this.modules[t][s]=!this.modules[t][s])}}getPenaltyScore(){let e=0;for(let n=0;n<this.size;n++){let s=!1,r=0,a=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[n][i]==s?(r++,5==r?e+=t.PENALTY_N1:r>5&&e++):(this.finderPenaltyAddHistory(r,a),s||(e+=this.finderPenaltyCountPatterns(a)*t.PENALTY_N3),s=this.modules[n][i],r=1);e+=this.finderPenaltyTerminateAndCount(s,r,a)*t.PENALTY_N3}for(let n=0;n<this.size;n++){let s=!1,r=0,a=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[i][n]==s?(r++,5==r?e+=t.PENALTY_N1:r>5&&e++):(this.finderPenaltyAddHistory(r,a),s||(e+=this.finderPenaltyCountPatterns(a)*t.PENALTY_N3),s=this.modules[i][n],r=1);e+=this.finderPenaltyTerminateAndCount(s,r,a)*t.PENALTY_N3}for(let n=0;n<this.size-1;n++)for(let s=0;s<this.size-1;s++){const r=this.modules[n][s];r==this.modules[n][s+1]&&r==this.modules[n+1][s]&&r==this.modules[n+1][s+1]&&(e+=t.PENALTY_N2)}let s=0;for(const t of this.modules)s=t.reduce((e,t)=>e+(t?1:0),s);const r=this.size*this.size,a=Math.ceil(Math.abs(20*s-10*r)/r)-1;return n(0<=a&&a<=9),e+=a*t.PENALTY_N4,n(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let s=[6];for(let r=this.size-7;s.length<e;r-=t)s.splice(1,0,r);return s}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let s=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;s-=(25*t-10)*t-55,e>=7&&(s-=36)}return n(208<=s&&s<=29648),s}static getNumDataCodewords(e,s){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[s.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[s.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let s=[];for(let t=0;t<e-1;t++)s.push(0);s.push(1);let r=1;for(let a=0;a<e;a++){for(let e=0;e<s.length;e++)s[e]=t.reedSolomonMultiply(s[e],r),e+1<s.length&&(s[e]^=s[e+1]);r=t.reedSolomonMultiply(r,2)}return s}static reedSolomonComputeRemainder(e,s){let r=s.map(e=>0);for(const a of e){const e=a^r.shift();r.push(0),s.forEach((s,a)=>r[a]^=t.reedSolomonMultiply(s,e))}return r}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let s=0;for(let r=7;r>=0;r--)s=s<<1^285*(s>>>7),s^=(t>>>r&1)*e;return n(s>>>8==0),s}finderPenaltyCountPatterns(e){const t=e[1];n(t<=3*this.size);const s=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(s&&e[0]>=4*t&&e[6]>=t?1:0)+(s&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,s){return e&&(this.finderPenaltyAddHistory(t,s),t=0),t+=this.size,this.finderPenaltyAddHistory(t,s),this.finderPenaltyCountPatterns(s)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};let s=t;function r(e,t,s){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let r=t-1;r>=0;r--)s.push(e>>>r&1)}function a(e,t){return 0!=(e>>>t&1)}function n(e){if(!e)throw new Error("Assertion error")}s.MIN_VERSION=1,s.MAX_VERSION=40,s.PENALTY_N1=3,s.PENALTY_N2=3,s.PENALTY_N3=40,s.PENALTY_N4=10,s.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],s.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=s;const i=class{constructor(e,t,s){if(this.mode=e,this.numChars=t,this.bitData=s,t<0)throw new RangeError("Invalid argument");this.bitData=s.slice()}static makeBytes(e){let t=[];for(const s of e)r(s,8,t);return new i(i.Mode.BYTE,e.length,t)}static makeNumeric(e){if(!i.isNumeric(e))throw new RangeError("String contains non-numeric characters");let t=[];for(let s=0;s<e.length;){const a=Math.min(e.length-s,3);r(parseInt(e.substr(s,a),10),3*a+1,t),s+=a}return new i(i.Mode.NUMERIC,e.length,t)}static makeAlphanumeric(e){if(!i.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");let t,s=[];for(t=0;t+2<=e.length;t+=2){let a=45*i.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t));a+=i.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t+1)),r(a,11,s)}return t<e.length&&r(i.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t)),6,s),new i(i.Mode.ALPHANUMERIC,e.length,s)}static makeSegments(e){return""==e?[]:i.isNumeric(e)?[i.makeNumeric(e)]:i.isAlphanumeric(e)?[i.makeAlphanumeric(e)]:[i.makeBytes(i.toUtf8ByteArray(e))]}static makeEci(e){let t=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)r(e,8,t);else if(e<16384)r(2,2,t),r(e,14,t);else{if(!(e<1e6))throw new RangeError("ECI assignment value out of range");r(6,3,t),r(e,21,t)}return new i(i.Mode.ECI,0,t)}static isNumeric(e){return i.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return i.ALPHANUMERIC_REGEX.test(e)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let s=0;for(const r of e){const e=r.mode.numCharCountBits(t);if(r.numChars>=1<<e)return 1/0;s+=4+e+r.bitData.length}return s}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let s=0;s<e.length;s++)"%"!=e.charAt(s)?t.push(e.charCodeAt(s)):(t.push(parseInt(e.substr(s+1,2),16)),s+=2);return t}};let o=i;o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.QrSegment=o})(Eu||(Eu={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};let s=t;s.LOW=new t(0,1),s.MEDIUM=new t(1,0),s.QUARTILE=new t(2,3),s.HIGH=new t(3,2),e.Ecc=s})(t=e.QrCode||(e.QrCode={}))})(Eu||(Eu={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};let s=t;s.NUMERIC=new t(1,[10,12,14]),s.ALPHANUMERIC=new t(2,[9,11,13]),s.BYTE=new t(4,[8,16,16]),s.KANJI=new t(8,[8,10,12]),s.ECI=new t(7,[0,0,0]),e.Mode=s})(t=e.QrSegment||(e.QrSegment={}))})(Eu||(Eu={}));var Bu=Eu,zu={L:Bu.QrCode.Ecc.LOW,M:Bu.QrCode.Ecc.MEDIUM,Q:Bu.QrCode.Ecc.QUARTILE,H:Bu.QrCode.Ecc.HIGH},Uu=128,Vu="L",Ku="#FFFFFF",Wu="#000000",Hu=!1;function qu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const s=[];return e.forEach(function(e,r){let a=null;e.forEach(function(n,i){if(!n&&null!==a)return s.push("M".concat(a+t," ").concat(r+t,"h").concat(i-a,"v1H").concat(a+t,"z")),void(a=null);if(i!==e.length-1)n&&null===a&&(a=i);else{if(!n)return;null===a?s.push("M".concat(i+t,",").concat(r+t," h1v1H").concat(i+t,"z")):s.push("M".concat(a+t,",").concat(r+t," h").concat(i+1-a,"v1H").concat(a+t,"z"))}})}),s.join("")}function Gu(e,t){return e.slice().map((e,s)=>s<t.y||s>=t.y+t.h?e:e.map((e,s)=>(s<t.x||s>=t.x+t.w)&&e))}function Yu(e,t,s,r){if(null==r)return null;const a=s?4:0,n=e.length+2*a,i=Math.floor(.1*t),o=n/t,l=(r.width||i)*o,c=(r.height||i)*o,d=null==r.x?e.length/2-l/2:r.x*o,u=null==r.y?e.length/2-c/2:r.y*o;let h=null;if(r.excavate){let e=Math.floor(d),t=Math.floor(u);h={x:e,y:t,w:Math.ceil(l+d-e),h:Math.ceil(c+u-t)}}return{x:d,y:u,h:c,w:l,excavation:h}}var $u=function(){try{(new Path2D).addPath(new Path2D)}catch(qU){return!1}return!0}();function Ju(e){const t=e,{value:s,size:a=Uu,level:n=Vu,bgColor:i=Ku,fgColor:o=Wu,includeMargin:l=Hu,style:c,imageSettings:d}=t,u=Fu(t,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),h=null==d?void 0:d.src,m=r.useRef(null),p=r.useRef(null),[x,g]=r.useState(!1);r.useEffect(()=>{if(null!=m.current){const e=m.current,t=e.getContext("2d");if(!t)return;let r=Bu.QrCode.encodeText(s,zu[n]).getModules();const c=l?4:0,u=r.length+2*c,h=Yu(r,a,l,d),x=p.current,g=null!=h&&null!==x&&x.complete&&0!==x.naturalHeight&&0!==x.naturalWidth;g&&null!=h.excavation&&(r=Gu(r,h.excavation));const f=window.devicePixelRatio||1;e.height=e.width=a*f;const y=a/u*f;t.scale(y,y),t.fillStyle=i,t.fillRect(0,0,u,u),t.fillStyle=o,$u?t.fill(new Path2D(qu(r,c))):r.forEach(function(e,s){e.forEach(function(e,r){e&&t.fillRect(r+c,s+c,1,1)})}),g&&t.drawImage(x,h.x+c,h.y+c,h.w,h.h)}}),r.useEffect(()=>{g(!1)},[h]);const f=Lu({height:a,width:a},c);let y=null;return null!=h&&(y=r.createElement("img",{src:h,key:h,style:{display:"none"},onLoad:()=>{g(!0)},ref:p})),r.createElement(r.Fragment,null,r.createElement("canvas",Lu({style:f,height:a,width:a,ref:m},u)),y)}function Qu(e){const t=e,{value:s,size:a=Uu,level:n=Vu,bgColor:i=Ku,fgColor:o=Wu,includeMargin:l=Hu,imageSettings:c}=t,d=Fu(t,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let u=Bu.QrCode.encodeText(s,zu[n]).getModules();const h=l?4:0,m=u.length+2*h,p=Yu(u,a,l,c);let x=null;null!=c&&null!=p&&(null!=p.excavation&&(u=Gu(u,p.excavation)),x=r.createElement("image",{xlinkHref:c.src,height:p.h,width:p.w,x:p.x+h,y:p.y+h,preserveAspectRatio:"none"}));const g=qu(u,h);return r.createElement("svg",Lu({height:a,width:a,viewBox:"0 0 ".concat(m," ").concat(m)},d),r.createElement("path",{fill:i,d:"M0,0 h".concat(m,"v").concat(m,"H0z"),shapeRendering:"crispEdges"}),r.createElement("path",{fill:o,d:g,shapeRendering:"crispEdges"}),x)}var Xu=e=>{const t=e,{renderAs:s}=t,a=Fu(t,["renderAs"]);return"svg"===s?r.createElement(Qu,Lu({},a)):r.createElement(Ju,Lu({},a))};const Zu=()=>{const{pnr:e}=se(),[t]=Me(),s=te(),a=e||t.get("pnr"),[n,i]=(0,r.useState)(null),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{!async function(){if(!a)return d("No PNR provided"),void l(!1);try{l(!0);const e={pnr:a,bookingId:"BK".concat(Date.now().toString().slice(-8)),status:"confirmed",passengerName:"Guest Passenger",from:"Mumbai",to:"Pune",departureDate:(new Date).toISOString().split("T")[0],departureTime:"08:00",arrivalTime:"12:00",seatNumbers:"U1B, U2B",amount:500,qrData:JSON.stringify({pnr:a,bookingId:"BK".concat(Date.now().toString().slice(-8)),passengerName:"Guest Passenger",from:"Mumbai",to:"Pune",departureDate:(new Date).toISOString().split("T")[0],departureTime:"08:00",seatNumbers:"U1B, U2B",amount:500})};i(e)}catch(e){console.error("Error loading ticket:",e),d("Failed to load ticket details")}finally{l(!1)}}()},[a]);return o?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Loading ticket..."})]})}):c||!n?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-red-600 text-lg mb-4",children:c||"Ticket not found"}),(0,cs.jsx)("button",{onClick:()=>s("/pax/dashboard"),className:"bg-pink-600 text-white px-6 py-2 rounded-lg hover:bg-pink-700",children:"Back to Dashboard"})]})}):(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,cs.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("button",{onClick:()=>s("/pax/dashboard"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[(0,cs.jsx)(Su,{className:"w-5 h-5"}),"Back to Dashboard"]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(jd.A,{className:"w-5 h-5 text-green-600"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-green-600",children:"Confirmed"})]})]})})}),(0,cs.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[(0,cs.jsx)("div",{className:"bg-gradient-to-r from-pink-600 to-pink-700 text-white p-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold",children:"YATRIK ERP"}),(0,cs.jsx)("p",{className:"text-pink-100",children:"Bus Ticket"})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsx)("p",{className:"text-sm text-pink-100",children:"PNR"}),(0,cs.jsx)("p",{className:"text-xl font-bold",children:n.pnr})]})]})}),(0,cs.jsx)("div",{className:"p-6",children:(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"border rounded-xl p-4",children:[(0,cs.jsxs)("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,cs.jsx)(gs.A,{className:"w-5 h-5"}),"Journey Details"]}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"From"}),(0,cs.jsx)("span",{className:"font-medium",children:n.from})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"To"}),(0,cs.jsx)("span",{className:"font-medium",children:n.to})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Date"}),(0,cs.jsx)("span",{className:"font-medium",children:new Date(n.departureDate).toLocaleDateString()})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Departure"}),(0,cs.jsx)("span",{className:"font-medium",children:n.departureTime})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Arrival"}),(0,cs.jsx)("span",{className:"font-medium",children:n.arrivalTime})]})]})]}),(0,cs.jsxs)("div",{className:"border rounded-xl p-4",children:[(0,cs.jsxs)("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,cs.jsx)(Ts.A,{className:"w-5 h-5"}),"Passenger Details"]}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Name"}),(0,cs.jsx)("span",{className:"font-medium",children:n.passengerName})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Seats"}),(0,cs.jsx)("span",{className:"font-medium",children:n.seatNumbers})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Booking ID"}),(0,cs.jsx)("span",{className:"font-medium text-sm",children:n.bookingId})]})]})]}),(0,cs.jsxs)("div",{className:"border rounded-xl p-4",children:[(0,cs.jsxs)("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,cs.jsx)(yu,{className:"w-5 h-5"}),"Payment Details"]}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Amount Paid"}),(0,cs.jsxs)("span",{className:"font-medium text-lg",children:["\u20b9",n.amount]})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Status"}),(0,cs.jsx)("span",{className:"font-medium text-green-600",children:"Paid"})]})]})]})]}),(0,cs.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-6",children:[(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"QR Code"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Present this at boarding"})]}),(0,cs.jsx)("div",{className:"bg-white p-4 rounded-xl shadow-lg border-2 border-gray-200",children:(0,cs.jsx)(Xu,{value:n.qrData,size:200,includeMargin:!0,level:"M"})}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Valid for this journey only"}),(0,cs.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,cs.jsx)(sd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Boarding starts 30 minutes before departure"})]})]}),(0,cs.jsxs)("button",{onClick:()=>{var e;const t="\nYATRIK ERP - BUS TICKET\n========================\n\nPNR: ".concat(null===n||void 0===n?void 0:n.pnr,"\nBooking ID: ").concat(null===n||void 0===n?void 0:n.bookingId,"\nStatus: ").concat(null===n||void 0===n||null===(e=n.status)||void 0===e?void 0:e.toUpperCase(),"\n\nPASSENGER DETAILS:\nName: ").concat(null===n||void 0===n?void 0:n.passengerName,"\n\nJOURNEY DETAILS:\nFrom: ").concat(null===n||void 0===n?void 0:n.from,"\nTo: ").concat(null===n||void 0===n?void 0:n.to,"\nDate: ").concat(null===n||void 0===n?void 0:n.departureDate,"\nDeparture: ").concat(null===n||void 0===n?void 0:n.departureTime,"\nArrival: ").concat(null===n||void 0===n?void 0:n.arrivalTime,"\nSeats: ").concat(null===n||void 0===n?void 0:n.seatNumbers,"\n\nAMOUNT: \u20b9").concat(null===n||void 0===n?void 0:n.amount,"\n\nPlease present this ticket at boarding.\n    ").trim(),s=new Blob([t],{type:"text/plain"}),r=URL.createObjectURL(s),i=document.createElement("a");i.href=r,i.download="ticket-".concat(a,".txt"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},className:"flex items-center gap-2 bg-pink-600 text-white px-6 py-3 rounded-lg hover:bg-pink-700 transition-colors",children:[(0,cs.jsx)(hd.A,{className:"w-5 h-5"}),"Download Ticket"]})]})]})})]}),(0,cs.jsxs)("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-xl p-6",children:[(0,cs.jsx)("h3",{className:"font-semibold text-blue-900 mb-3",children:"Important Instructions"}),(0,cs.jsxs)("ul",{className:"text-sm text-blue-800 space-y-2",children:[(0,cs.jsx)("li",{children:"\u2022 Arrive at the boarding point at least 30 minutes before departure"}),(0,cs.jsx)("li",{children:"\u2022 Present this QR code to the conductor for validation"}),(0,cs.jsx)("li",{children:"\u2022 Keep your ticket safe throughout the journey"}),(0,cs.jsx)("li",{children:"\u2022 In case of any issues, contact our support team"})]})]}),(0,cs.jsxs)("div",{className:"mt-8 flex flex-col sm:flex-row gap-4",children:[(0,cs.jsx)("button",{onClick:()=>s("/pax/dashboard"),className:"flex-1 bg-gray-600 text-white py-3 px-6 rounded-lg hover:bg-gray-700 transition-colors",children:"Back to Dashboard"}),(0,cs.jsx)("button",{onClick:()=>s("/pax/search"),className:"flex-1 bg-pink-600 text-white py-3 px-6 rounded-lg hover:bg-pink-700 transition-colors",children:"Book Another Trip"})]})]})]})},eh=()=>{const{tripId:e}=se(),{state:t}=Z(),s=te(),a=(null===t||void 0===t?void 0:t.trip)||{},n=(null===t||void 0===t?void 0:t.boarding)||null,i=(null===t||void 0===t?void 0:t.dropping)||null,[o,l]=(0,r.useState)({name:"",email:"",phone:"",age:"",gender:"male"}),[c,d]=(0,r.useState)({}),u=(e,t)=>{l(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t})),c[e]&&d(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:""}))},h=e=>{if(!e)return"--:--";return new Date("2000-01-01T".concat(e)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})};return(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,cs.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("button",{onClick:()=>s("/pax/board-drop/".concat(e),{state:{trip:a,boarding:n,dropping:i}}),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[(0,cs.jsx)(Su,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Back to Boarding Points"})]}),(0,cs.jsx)("div",{className:"text-sm text-gray-600",children:"Step 3 of 4"})]})})}),(0,cs.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,cs.jsx)("div",{className:"lg:col-span-1",children:(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[(0,cs.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Trip Summary"}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("h4",{className:"font-medium text-gray-900",children:[a.fromCity||a.routeName," \u2192 ",a.toCity||"Destination"]}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600",children:[h(a.startTime)," - ",h(a.endTime)]}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:(e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})(a.serviceDate)})]}),n&&(0,cs.jsxs)("div",{className:"border-t pt-3",children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Boarding Point"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:n.title}),(0,cs.jsxs)("p",{className:"text-xs text-gray-500",children:["Pickup: ",n.time]})]}),i&&(0,cs.jsxs)("div",{className:"border-t pt-3",children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Drop Point"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:i.title}),(0,cs.jsxs)("p",{className:"text-xs text-gray-500",children:["Drop: ",i.time]})]}),(0,cs.jsxs)("div",{className:"border-t pt-3",children:[(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Fare per seat"}),(0,cs.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["\u20b9",a.fare||499]})]}),(0,cs.jsxs)("div",{className:"flex justify-between mt-1",children:[(0,cs.jsxs)("span",{className:"text-xs text-gray-500",children:["Route: ",a.routeName||"N/A"]}),(0,cs.jsxs)("span",{className:"text-xs text-gray-500",children:["Distance: ",a.distanceKm||"N/A"," km"]})]})]})]})]})}),(0,cs.jsx)("div",{className:"lg:col-span-2",children:(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,cs.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,cs.jsx)(Ts.A,{className:"w-6 h-6 text-pink-600"}),(0,cs.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Passenger Details"})]}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Please provide your details for booking confirmation"})]}),(0,cs.jsxs)("div",{className:"p-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{className:"md:col-span-2",children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),(0,cs.jsx)("input",{type:"text",value:o.name,onChange:e=>u("name",e.target.value),className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 ".concat(c.name?"border-red-500":"border-gray-300"),placeholder:"Enter your full name"}),c.name&&(0,cs.jsx)("p",{className:"text-red-500 text-sm mt-1",children:c.name})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),(0,cs.jsx)("input",{type:"email",value:o.email,onChange:e=>u("email",e.target.value),className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 ".concat(c.email?"border-red-500":"border-gray-300"),placeholder:"Enter your email"}),c.email&&(0,cs.jsx)("p",{className:"text-red-500 text-sm mt-1",children:c.email})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),(0,cs.jsx)("input",{type:"tel",value:o.phone,onChange:e=>u("phone",e.target.value),className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 ".concat(c.phone?"border-red-500":"border-gray-300"),placeholder:"Enter your phone number"}),c.phone&&(0,cs.jsx)("p",{className:"text-red-500 text-sm mt-1",children:c.phone})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Age *"}),(0,cs.jsx)("input",{type:"number",value:o.age,onChange:e=>u("age",e.target.value),className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 ".concat(c.age?"border-red-500":"border-gray-300"),placeholder:"Enter your age",min:"1",max:"120"}),c.age&&(0,cs.jsx)("p",{className:"text-red-500 text-sm mt-1",children:c.age})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender *"}),(0,cs.jsxs)("div",{className:"flex space-x-4",children:[(0,cs.jsxs)("label",{className:"flex items-center",children:[(0,cs.jsx)("input",{type:"radio",name:"gender",value:"male",checked:"male"===o.gender,onChange:e=>u("gender",e.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),(0,cs.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Male"})]}),(0,cs.jsxs)("label",{className:"flex items-center",children:[(0,cs.jsx)("input",{type:"radio",name:"gender",value:"female",checked:"female"===o.gender,onChange:e=>u("gender",e.target.value),className:"w-4 h-4 text-pink-600 border-gray-300 focus:ring-pink-500"}),(0,cs.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Female"})]})]}),(0,cs.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"This will determine the seat selection color (Blue for Male, Pink for Female)"})]})]}),(0,cs.jsx)("div",{className:"flex justify-end mt-8",children:(0,cs.jsxs)("button",{onClick:()=>{(()=>{const e={};return o.name.trim()||(e.name="Name is required"),o.email.trim()?/\S+@\S+\.\S+/.test(o.email)||(e.email="Please enter a valid email"):e.email="Email is required",o.phone.trim()?/^\d{10}$/.test(o.phone.replace(/\D/g,""))||(e.phone="Please enter a valid 10-digit phone number"):e.phone="Phone number is required",o.age.trim()?(isNaN(o.age)||parseInt(o.age)<1||parseInt(o.age)>120)&&(e.age="Please enter a valid age"):e.age="Age is required",d(e),0===Object.keys(e).length})()&&s("/pax/seats/".concat(e),{state:{trip:a,boarding:n,dropping:i,passengerDetails:o,passengerGender:o.gender}})},className:"bg-pink-600 hover:bg-pink-700 text-white font-semibold px-8 py-3 rounded-lg transition-colors flex items-center space-x-2",children:[(0,cs.jsx)("span",{children:"Continue to Seat Selection"}),(0,cs.jsx)(jd.A,{className:"w-5 h-5"})]})})]})]})})]})})]})},th=(0,Ns.A)("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),sh=(0,Ns.A)("accessibility",[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]]),rh=()=>{const{user:e}=(0,Re.A)(),t=te(),[s,a]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)("");(0,r.useEffect)(()=>{c();const e=new Date;e.setDate(e.getDate()+1),l(e.toISOString().split("T")[0])},[]);const c=async()=>{try{const e=await(0,xs.nr)("/api/booking/routes");console.log("Routes API response:",e),e.ok&&e.data?(console.log("Setting routes:",e.data),a(e.data||[])):(console.error("Failed to fetch routes:",e),Oe.Ay.error("Failed to fetch routes"),a([]))}catch(e){console.error("Error fetching routes:",e),Oe.Ay.error("Failed to fetch routes"),a([])}finally{i(!1)}},d=e=>{switch(e){case"WiFi":return(0,cs.jsx)(Rd,{className:"w-4 h-4"});case"USB_Charging":return(0,cs.jsx)(pd,{className:"w-4 h-4"});case"Refreshments":return(0,cs.jsx)(Hd,{className:"w-4 h-4"});case"Entertainment":return(0,cs.jsx)(th,{className:"w-4 h-4"});case"Wheelchair_Accessible":return(0,cs.jsx)(sh,{className:"w-4 h-4"});default:return(0,cs.jsx)(rd.A,{className:"w-4 h-4"})}},u=e=>{const t=Math.floor(e/60),s=e%60;return"".concat(t,"h ").concat(s,"m")};return n?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Loading Kerala routes..."})]})}):(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-gradient-to-r from-pink-600 to-pink-700 text-white py-8",children:(0,cs.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Kerala Bus Routes"}),(0,cs.jsx)("p",{className:"text-xl opacity-90",children:"Explore the beautiful state of Kerala with our premium bus services"})]})})}),(0,cs.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,cs.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-center space-x-4",children:[(0,cs.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Travel Date:"}),(0,cs.jsx)("input",{type:"date",value:o,onChange:e=>l(e.target.value),min:(new Date).toISOString().split("T")[0],className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500"})]})})}),(0,cs.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,cs.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:Array.isArray(s)&&s.map(s=>(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden",children:[(0,cs.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold",children:s.routeNumber}),(0,cs.jsxs)("span",{className:"text-sm bg-white bg-opacity-20 px-2 py-1 rounded",children:[s.buses.length," buses"]})]}),(0,cs.jsx)("p",{className:"text-sm opacity-90",children:s.routeName})]}),(0,cs.jsxs)("div",{className:"p-4",children:[(0,cs.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(gs.A,{className:"w-4 h-4 text-gray-500"}),(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"From"}),(0,cs.jsx)("p",{className:"font-medium",children:s.from}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:s.fromLocation})]})]}),(0,cs.jsx)("div",{className:"flex justify-center",children:(0,cs.jsx)(td,{className:"w-5 h-5 text-gray-400"})}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(gs.A,{className:"w-4 h-4 text-gray-500"}),(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"To"}),(0,cs.jsx)("p",{className:"font-medium",children:s.to}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:s.toLocation})]})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)(sd.A,{className:"w-5 h-5 text-gray-500 mx-auto mb-1"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Duration"}),(0,cs.jsx)("p",{className:"font-medium",children:u(s.duration)})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)(ks.A,{className:"w-5 h-5 text-gray-500 mx-auto mb-1"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Distance"}),(0,cs.jsxs)("p",{className:"font-medium",children:[s.distance," km"]})]})]}),s.features&&s.features.length>0&&(0,cs.jsxs)("div",{className:"mb-4",children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Features:"}),(0,cs.jsx)("div",{className:"flex flex-wrap gap-2",children:s.features.map((e,t)=>(0,cs.jsxs)("span",{className:"inline-flex items-center space-x-1 bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs",children:[d(e),(0,cs.jsx)("span",{children:e.replace("_"," ")})]},t))})]}),(0,cs.jsxs)("div",{className:"border-t pt-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Starting from"}),(0,cs.jsxs)("p",{className:"text-2xl font-bold text-pink-600",children:["\u20b9",s.baseFare]})]}),(0,cs.jsxs)("button",{onClick:()=>(s=>{if(!e)return Oe.Ay.error("Please login to book tickets"),void t("/login",{state:{from:"/kerala-routes"}});t("/booking",{state:{selectedRoute:s,selectedDate:o}})})(s),className:"bg-pink-600 text-white px-6 py-2 rounded-lg hover:bg-pink-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)("span",{children:"Book Now"}),(0,cs.jsx)(td,{className:"w-4 h-4"})]})]}),(0,cs.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:[s.depot," \u2022 Multiple departures daily"]})]})]})]},s.id))}),(!Array.isArray(s)||0===s.length)&&(0,cs.jsxs)("div",{className:"text-center py-12",children:[(0,cs.jsx)(ks.A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No routes available"}),(0,cs.jsx)("p",{className:"text-gray-500",children:"Please check back later for available routes."})]})]}),(0,cs.jsx)("div",{className:"bg-gray-100 py-8",children:(0,cs.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Why Choose YATRIK ERP?"}),(0,cs.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mt-6",children:[(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,cs.jsx)(rd.A,{className:"w-6 h-6 text-pink-600"})}),(0,cs.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:"Premium Service"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Luxury buses with modern amenities"})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,cs.jsx)(sd.A,{className:"w-6 h-6 text-pink-600"})}),(0,cs.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:"Punctual"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"On-time departures and arrivals"})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,cs.jsx)(Ss.A,{className:"w-6 h-6 text-pink-600"})}),(0,cs.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:"Safe Travel"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Experienced drivers and well-maintained buses"})]})]})]})})})]})},ah=()=>{const e=te(),[t,s]=(0,r.useState)({from:"",to:"",date:"",passengers:1,bookingForWomen:!1}),[a,n]=(0,r.useState)({from:!1,to:!1}),[i,o]=(0,r.useState)({from:[],to:[]}),l=["Kochi","Thiruvananthapuram","Kozhikode","Alappuzha","Kollam","Thrissur","Kottayam","Palakkad","Kannur","Malappuram"];(0,r.useEffect)(()=>{const e=new Date;e.setDate(e.getDate()+1),s(t=>(0,Ie.A)((0,Ie.A)({},t),{},{date:e.toISOString().split("T")[0]}))},[]);const c=(e,t)=>{if(s(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t})),"from"===e||"to"===e){const s=l.filter(e=>e.toLowerCase().includes(t.toLowerCase()));o(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:s})),n(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t.length>0}))}},d=(e,t)=>{s(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t})),n(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:!1}))},u=e=>{const t=new Date;t.setDate(t.getDate()+e),s(e=>(0,Ie.A)((0,Ie.A)({},e),{},{date:t.toISOString().split("T")[0]}))};return(0,cs.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50",children:[(0,cs.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,cs.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("div",{className:"w-8 h-8 bg-red-600 rounded flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-white font-bold text-sm",children:"Y"})}),(0,cs.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"YATRIK ERP"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("button",{className:"text-gray-600 hover:text-gray-900",children:"Bus tickets"}),(0,cs.jsx)("button",{className:"text-gray-600 hover:text-gray-900",children:"Bookings"}),(0,cs.jsx)("button",{className:"text-gray-600 hover:text-gray-900",children:"Help"}),(0,cs.jsx)("button",{className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700",children:"Account"})]})]})})}),(0,cs.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[(0,cs.jsxs)("div",{className:"text-center mb-8",children:[(0,cs.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"India's No. 1 online bus ticket booking site"}),(0,cs.jsx)("p",{className:"text-lg text-gray-600",children:"Book bus tickets online with YATRIK ERP - Kerala's trusted bus booking platform"})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From"}),(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(gs.A,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),(0,cs.jsx)("input",{type:"text",value:t.from,onChange:e=>c("from",e.target.value),onFocus:()=>n(e=>(0,Ie.A)((0,Ie.A)({},e),{},{from:!0})),placeholder:"Enter departure city",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"}),a.from&&i.from.length>0&&(0,cs.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:i.from.map((e,t)=>(0,cs.jsxs)("button",{onClick:()=>d("from",e),className:"w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center space-x-2",children:[(0,cs.jsx)(gs.A,{className:"w-4 h-4 text-gray-400"}),(0,cs.jsx)("span",{children:e})]},t))})]})]}),(0,cs.jsx)("div",{className:"flex items-end",children:(0,cs.jsx)("button",{onClick:()=>{s(e=>(0,Ie.A)((0,Ie.A)({},e),{},{from:e.to,to:e.from}))},className:"w-full py-3 bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center justify-center transition-colors",children:(0,cs.jsx)(td,{className:"w-5 h-5 text-gray-600"})})}),(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To"}),(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(gs.A,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),(0,cs.jsx)("input",{type:"text",value:t.to,onChange:e=>c("to",e.target.value),onFocus:()=>n(e=>(0,Ie.A)((0,Ie.A)({},e),{},{to:!0})),placeholder:"Enter destination city",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"}),a.to&&i.to.length>0&&(0,cs.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:i.to.map((e,t)=>(0,cs.jsxs)("button",{onClick:()=>d("to",e),className:"w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center space-x-2",children:[(0,cs.jsx)(gs.A,{className:"w-4 h-4 text-gray-400"}),(0,cs.jsx)("span",{children:e})]},t))})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Journey"}),(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(fs.A,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),(0,cs.jsx)("input",{type:"date",value:t.date,onChange:e=>s(t=>(0,Ie.A)((0,Ie.A)({},t),{},{date:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),(0,cs.jsxs)("div",{className:"flex space-x-2 mt-2",children:[(0,cs.jsx)("button",{onClick:()=>u(0),className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded",children:"Today"}),(0,cs.jsx)("button",{onClick:()=>u(1),className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded",children:"Tomorrow"})]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)(Ss.A,{className:"w-5 h-5 text-gray-400 mr-2"}),(0,cs.jsx)("select",{value:t.passengers,onChange:e=>s(t=>(0,Ie.A)((0,Ie.A)({},t),{},{passengers:parseInt(e.target.value)})),className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500",children:[1,2,3,4,5,6,7,8,9,10].map(e=>(0,cs.jsxs)("option",{value:e,children:[e," ",1===e?"Passenger":"Passengers"]},e))})]}),(0,cs.jsxs)("label",{className:"flex items-center",children:[(0,cs.jsx)("input",{type:"checkbox",checked:t.bookingForWomen,onChange:e=>s(t=>(0,Ie.A)((0,Ie.A)({},t),{},{bookingForWomen:e.target.checked})),className:"mr-2"}),(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:"Booking for women"})]})]}),(0,cs.jsxs)("button",{onClick:()=>{if(!t.from||!t.to||!t.date)return void alert("Please fill in all required fields");const s=new URLSearchParams({from:t.from,to:t.to,date:t.date,passengers:t.passengers,bookingForWomen:t.bookingForWomen});e("/search-results?".concat(s.toString()))},className:"bg-red-600 text-white px-8 py-3 rounded-lg hover:bg-red-700 flex items-center space-x-2 font-medium",children:[(0,cs.jsx)(ys.A,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Search buses"})]})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,cs.jsxs)("div",{className:"flex items-center mb-4",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4",children:(0,cs.jsx)("span",{className:"text-green-600 font-bold",children:"\u2713"})}),(0,cs.jsx)("h3",{className:"text-lg font-semibold",children:"Free Cancellation"})]}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Cancel bus tickets without paying cancellation charges"})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,cs.jsxs)("div",{className:"flex items-center mb-4",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4",children:(0,cs.jsx)(sd.A,{className:"w-6 h-6 text-blue-600"})}),(0,cs.jsx)("h3",{className:"text-lg font-semibold",children:"Live Bus Tracking"})]}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Track your bus in real-time and plan your journey efficiently"})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,cs.jsxs)("div",{className:"flex items-center mb-4",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-4",children:(0,cs.jsx)("span",{className:"text-purple-600 font-bold",children:"24/7"})}),(0,cs.jsx)("h3",{className:"text-lg font-semibold",children:"24/7 Customer Support"})]}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Receive 24/7 customer service for any assistance"})]})]})]})]})},nh=(0,Ns.A)("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),ih=()=>{const[e]=Me(),t=te(),[s,a]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)({priceRange:[0,2e3],busType:"all",departureTime:"all",amenities:[]}),[c,d]=(0,r.useState)("price"),[u,h]=(0,r.useState)(!1),m=e.get("from")||"",p=e.get("to")||"",x=e.get("date")||"",g=e.get("passengers")||"1",f="true"===e.get("bookingForWomen");(0,r.useEffect)(()=>{y()},[m,p,x]);const y=async()=>{try{i(!0);const t=new URLSearchParams({from:m,to:p,date:x}),s=await(0,xs.nr)("/api/trips/search?".concat(t.toString()));var e;if(s.ok)a((null===(e=s.data.data)||void 0===e?void 0:e.trips)||s.data.trips||[]);else console.error("Failed to fetch trips:",s.message)}catch(t){console.error("Error fetching trips:",t)}finally{i(!1)}},b=e=>{switch(e.toLowerCase()){case"wifi":return(0,cs.jsx)(Rd,{className:"w-4 h-4"});case"ac":return(0,cs.jsx)(nh,{className:"w-4 h-4"});case"charging":return(0,cs.jsx)(pd,{className:"w-4 h-4"});case"refreshments":return(0,cs.jsx)(Hd,{className:"w-4 h-4"});default:return(0,cs.jsx)(ks.A,{className:"w-4 h-4"})}},v=e=>{switch(e.toLowerCase()){case"ac_sleeper":return"bg-blue-100 text-blue-800";case"ac_seater":return"bg-green-100 text-green-800";case"non_ac_sleeper":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},j=e=>{if(!e)return"--:--";return new Date("2000-01-01T".concat(e)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})},N=e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})},w=[...s.filter(e=>!(e.fare<o.priceRange[0]||e.fare>o.priceRange[1])&&("all"===o.busType||e.busType===o.busType))].sort((e,t)=>{switch(c){case"price":return e.fare-t.fare;case"departure":return new Date(e.startTime)-new Date(t.startTime);case"duration":return e.duration-t.duration;default:return 0}});return n?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto"}),(0,cs.jsx)("p",{className:"mt-4 text-gray-600",children:"Searching for buses..."})]})}):(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,cs.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsxs)("button",{onClick:()=>t("/redbus"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[(0,cs.jsx)(Su,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Back to Search"})]}),(0,cs.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,cs.jsx)(gs.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:[m," \u2192 ",p]}),(0,cs.jsx)(fs.A,{className:"w-4 h-4 ml-4"}),(0,cs.jsx)("span",{children:N(x)}),(0,cs.jsx)(Ss.A,{className:"w-4 h-4 ml-4"}),(0,cs.jsxs)("span",{children:[g," ","1"===g?"Passenger":"Passengers"]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsxs)("button",{onClick:()=>h(!u),className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[(0,cs.jsx)(Kd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Filters"})]}),(0,cs.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,cs.jsx)("option",{value:"price",children:"Sort by Price"}),(0,cs.jsx)("option",{value:"departure",children:"Sort by Departure"}),(0,cs.jsx)("option",{value:"duration",children:"Sort by Duration"})]})]})]})})}),(0,cs.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-6",children:(0,cs.jsxs)("div",{className:"flex gap-6",children:[u&&(0,cs.jsxs)("div",{className:"w-64 bg-white rounded-lg shadow-sm p-4 h-fit",children:[(0,cs.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Filters"}),(0,cs.jsxs)("div",{className:"mb-6",children:[(0,cs.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Price Range: \u20b9",o.priceRange[0]," - \u20b9",o.priceRange[1]]}),(0,cs.jsx)("input",{type:"range",min:"0",max:"2000",value:o.priceRange[1],onChange:e=>l(t=>(0,Ie.A)((0,Ie.A)({},t),{},{priceRange:[t.priceRange[0],parseInt(e.target.value)]})),className:"w-full"})]}),(0,cs.jsxs)("div",{className:"mb-6",children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bus Type"}),(0,cs.jsxs)("select",{value:o.busType,onChange:e=>l(t=>(0,Ie.A)((0,Ie.A)({},t),{},{busType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,cs.jsx)("option",{value:"all",children:"All Types"}),(0,cs.jsx)("option",{value:"ac_sleeper",children:"AC Sleeper"}),(0,cs.jsx)("option",{value:"ac_seater",children:"AC Seater"}),(0,cs.jsx)("option",{value:"non_ac_sleeper",children:"Non-AC Sleeper"}),(0,cs.jsx)("option",{value:"non_ac_seater",children:"Non-AC Seater"})]})]})]}),(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsxs)("div",{className:"mb-4",children:[(0,cs.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:[w.length," buses found"]}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600",children:[m," to ",p," \u2022 ",N(x)]})]}),0===w.length?(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[(0,cs.jsx)(ks.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No buses found"}),(0,cs.jsx)("p",{className:"text-gray-600 mb-4",children:"We couldn't find any buses for your selected route and date."}),(0,cs.jsx)("button",{onClick:()=>t("/redbus"),className:"bg-pink-600 text-white px-6 py-2 rounded-lg hover:bg-pink-700",children:"Modify Search"})]}):(0,cs.jsx)("div",{className:"space-y-4",children:w.map(e=>{var s;return(0,cs.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,cs.jsx)("div",{className:"p-6",children:(0,cs.jsxs)("div",{className:"flex items-start justify-between",children:[(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:(0,cs.jsx)(ks.A,{className:"w-6 h-6 text-red-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.operator||"YATRIK Transport"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(v(e.busType)),children:(null===(s=e.busType)||void 0===s?void 0:s.replace("_"," ").toUpperCase())||"BUS"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,cs.jsx)(rd.A,{className:"w-4 h-4 text-yellow-400 fill-current"}),(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"4.5"})]})]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-6 mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(sd.A,{className:"w-4 h-4 text-gray-400"}),(0,cs.jsxs)("span",{className:"text-sm text-gray-600",children:[j(e.startTime)," - ",j(e.endTime)]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(Ss.A,{className:"w-4 h-4 text-gray-400"}),(0,cs.jsxs)("span",{className:"text-sm text-gray-600",children:[e.availableSeats||e.capacity," seats available"]})]}),(0,cs.jsxs)("div",{className:"text-sm text-gray-600",children:["Duration: ",Math.floor((e.duration||240)/60),"h ",(e.duration||240)%60,"m"]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Amenities:"}),(0,cs.jsx)("div",{className:"flex items-center space-x-2",children:["AC","WiFi","Charging","Refreshments"].map(e=>(0,cs.jsxs)("div",{className:"flex items-center space-x-1 text-gray-500",children:[b(e),(0,cs.jsx)("span",{className:"text-xs",children:e})]},e))})]})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsxs)("div",{className:"mb-4",children:[(0,cs.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:["\u20b9",e.fare]}),(0,cs.jsx)("div",{className:"text-sm text-gray-600",children:"per seat"})]}),(0,cs.jsx)("button",{onClick:()=>(e=>{t("/redbus/board-drop/".concat(e._id),{state:{trip:e,searchData:{from:m,to:p,date:x,passengers:g,bookingForWomen:f}}})})(e),className:"bg-pink-600 text-white px-6 py-3 rounded-lg hover:bg-pink-700 font-medium",children:"Book Now"})]})]})})},e._id)})})]})]})})]})},oh=()=>{const{tripId:e}=se(),{state:t}=Z(),s=te(),a=(null===t||void 0===t?void 0:t.trip)||{},n=(null===t||void 0===t?void 0:t.searchData)||{},[i,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)([]),[h,m]=(0,r.useState)([]),[p,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{g()},[e]);const g=async()=>{try{x(!0);const e=[{id:"central_tvm",name:"Central Bus Station",address:"Thampanoor, Thiruvananthapuram",time:"14:00",landmark:"Near Railway Station"},{id:"airport_tvm",name:"Airport Bus Stop",address:"Trivandrum International Airport",time:"14:15",landmark:"Terminal Building"},{id:"kovalam",name:"Kovalam Beach",address:"Kovalam Beach Road",time:"14:30",landmark:"Near Lighthouse"}];u([{id:"central",name:"Central Bus Station",address:"Near Railway Station, Kochi",time:"08:00",landmark:"Opposite Metro Station"},{id:"airport",name:"Airport Bus Stop",address:"Cochin International Airport",time:"08:15",landmark:"Terminal 1"},{id:"marine",name:"Marine Drive",address:"Marine Drive, Kochi",time:"08:30",landmark:"Near Tourist Information Center"}]),m(e)}catch(e){console.error("Error loading boarding/drop points:",e)}finally{x(!1)}},f=e=>{if(!e)return"--:--";return new Date("2000-01-01T".concat(e)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})};return(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,cs.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("button",{onClick:()=>s("/redbus"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[(0,cs.jsx)(Su,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Back to Search"})]}),(0,cs.jsx)("div",{className:"text-sm text-gray-600",children:"Step 2 of 4"})]})})}),(0,cs.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,cs.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:[n.from," \u2192 ",n.to]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,cs.jsx)(sd.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:[f(a.startTime)," - ",f(a.endTime)]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,cs.jsx)(gs.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:(e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})(n.date)})]}),(0,cs.jsxs)("span",{children:[n.passengers," ","1"===n.passengers?"Passenger":"Passengers"]})]})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:["\u20b9",a.fare]}),(0,cs.jsx)("div",{className:"text-sm text-gray-600",children:"per seat"})]})]})}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[(0,cs.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Select Boarding Point"}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600",children:["Choose your preferred boarding point in ",n.from]})]}),(0,cs.jsx)("div",{className:"divide-y divide-gray-200",children:d.map(e=>(0,cs.jsx)("button",{onClick:()=>o(e),className:"w-full text-left p-6 hover:bg-gray-50 transition-colors ".concat((null===i||void 0===i?void 0:i.id)===e.id?"bg-red-50 border-r-4 border-red-600":""),children:(0,cs.jsxs)("div",{className:"flex items-start justify-between",children:[(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,cs.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(null===i||void 0===i?void 0:i.id)===e.id&&(0,cs.jsx)(jd.A,{className:"w-5 h-5 text-red-600"})]}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:e.address}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:e.landmark})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.time}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:"Pickup time"})]})]})},e.id))})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[(0,cs.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Select Drop Point"}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600",children:["Choose your preferred drop point in ",n.to]})]}),(0,cs.jsx)("div",{className:"divide-y divide-gray-200",children:h.map(e=>(0,cs.jsx)("button",{onClick:()=>c(e),className:"w-full text-left p-6 hover:bg-gray-50 transition-colors ".concat((null===l||void 0===l?void 0:l.id)===e.id?"bg-red-50 border-r-4 border-red-600":""),children:(0,cs.jsxs)("div",{className:"flex items-start justify-between",children:[(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,cs.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(null===l||void 0===l?void 0:l.id)===e.id&&(0,cs.jsx)(jd.A,{className:"w-5 h-5 text-red-600"})]}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:e.address}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:e.landmark})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.time}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:"Drop time"})]})]})},e.id))})]}),(0,cs.jsx)("div",{className:"flex justify-end",children:(0,cs.jsx)("button",{onClick:()=>{i&&l?s("/redbus/seats/".concat(e),{state:{trip:a,searchData:n,boardingPoint:i,dropPoint:l}}):alert("Please select both boarding and drop points")},disabled:!i||!l,className:"bg-pink-600 text-white px-8 py-3 rounded-lg hover:bg-pink-700 disabled:bg-gray-300 disabled:cursor-not-allowed font-medium",children:"Continue to Seat Selection"})})]})]})},lh=()=>{const{tripId:e}=se(),{state:t}=Z(),s=te(),a=(null===t||void 0===t?void 0:t.trip)||{},n=(null===t||void 0===t?void 0:t.searchData)||{},i=(null===t||void 0===t?void 0:t.boardingPoint)||{},o=(null===t||void 0===t?void 0:t.dropPoint)||{},[l,c]=(0,r.useState)([]),[d,u]=(0,r.useState)([]),[h,m]=(0,r.useState)(!0),[p,x]=(0,r.useState)(null),[g,f]=(0,r.useState)(499);(0,r.useEffect)(()=>{y()},[e]);const y=async()=>{try{m(!0),x(null);const t=a.serviceDate||a.date||(new Date).toISOString().split("T")[0],s=a.id||a._id||e;console.log("\ud83d\udd0d Fetching seats for trip:",s,"Date:",t);const r=await(0,xs.nr)("/api/seats/trip/".concat(s,"?date=").concat(t));r.ok?(console.log("\u2705 Seat data received:",r.data),c(r.data.seats||[]),f(r.data.seatPrice||a.fare||499)):(console.error("\u274c Seat API error:",r),x("Failed to load seat information: ".concat(r.message||"Unknown error")))}catch(t){console.error("Error fetching seats:",t),x("Failed to load seat information")}finally{m(!1)}},b=e=>{"available"!==e.status&&"available_male"!==e.status&&"available_female"!==e.status||u(t=>t.includes(e.seatNumber)?t.filter(t=>t!==e.seatNumber):[...t,e.seatNumber])},v=e=>{const t="relative w-12 h-12 rounded-lg border-2 transition-all duration-200 flex items-center justify-center text-sm font-bold cursor-pointer shadow-sm hover:shadow-md";if(d.includes(e.seatNumber))return"".concat(t," bg-red-500 border-red-600 text-white shadow-lg transform scale-105");switch(e.status){case"available":return"".concat(t," bg-green-500 border-green-600 text-white hover:bg-green-600");case"available_male":return"".concat(t," bg-blue-500 border-blue-600 text-white hover:bg-blue-600");case"available_female":return"".concat(t," bg-pink-500 border-pink-600 text-white hover:bg-pink-600");case"booked":case"booked_male":case"booked_female":return"".concat(t," bg-gray-300 border-gray-400 text-gray-600 cursor-not-allowed opacity-75");default:return"".concat(t," bg-gray-100 border-gray-300 text-gray-600")}},j=e=>{let{status:t,seatStatus:s}=e;const r="selected"===t?"text-white":"available"===t?"text-green-600":"booked"===t?"text-gray-500":"text-gray-400";return(0,cs.jsxs)("svg",{className:"w-8 h-8 ".concat(r),fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,cs.jsx)("path",{d:"M4 6c0-1 1-2 2-2h12c1 0 2 1 2 2v10c0 1-1 2-2 2H6c-1 0-2-1-2-2V6z",strokeLinecap:"round",strokeLinejoin:"round"}),(0,cs.jsx)("path",{d:"M4 6c0-1 1-2 2-2h12c1 0 2 1 2 2",strokeLinecap:"round",strokeLinejoin:"round"})]})},N=e=>d.includes(e.seatNumber)?(0,cs.jsx)(Ts.A,{className:"w-5 h-5 text-white"}):"available_male"===e.status||"booked_male"===e.status?(0,cs.jsx)("div",{className:"w-6 h-6 bg-white rounded-full flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-blue-600 font-bold text-sm",children:"\u2642"})}):"available_female"===e.status||"booked_female"===e.status?(0,cs.jsx)("div",{className:"w-6 h-6 bg-white rounded-full flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-pink-600 font-bold text-sm",children:"\u2640"})}):"available"===e.status?(0,cs.jsx)(j,{status:"available",seatStatus:e.status}):(0,cs.jsx)(j,{status:"booked",seatStatus:e.status}),w=e=>{if(!e)return"--:--";return new Date("2000-01-01T".concat(e)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})},k=l.length<=35||l.length<=45?5:4,A=[];for(let r=0;r<l.length;r+=k)A.push(l.slice(r,r+k));const S=d.length*g;return h?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto"}),(0,cs.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading seat selection..."})]})}):p?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-red-600 mb-4",children:(0,cs.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,cs.jsx)("p",{className:"text-red-600 mb-4",children:p}),(0,cs.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Retry"})]})}):(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,cs.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("button",{onClick:()=>s("/redbus/board-drop/".concat(e),{state:{trip:a,searchData:n,boardingPoint:i,dropPoint:o}}),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[(0,cs.jsx)(Su,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Back to Boarding Points"})]}),(0,cs.jsx)("div",{className:"text-sm text-gray-600",children:"Step 3 of 4"})]})})}),(0,cs.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,cs.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:[n.from," \u2192 ",n.to]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,cs.jsx)(sd.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:[w(a.startTime)," - ",w(a.endTime)]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,cs.jsx)(gs.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:(e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})(n.date)})]}),(0,cs.jsxs)("span",{children:[n.passengers," ","1"===n.passengers?"Passenger":"Passengers"]})]})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:["\u20b9",g]}),(0,cs.jsx)("div",{className:"text-sm text-gray-600",children:"per seat"})]})]})}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Seat Types"}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"w-10 h-10 bg-green-500 border-2 border-green-600 rounded-lg flex items-center justify-center",children:(0,cs.jsx)(j,{status:"available"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"Available"}),(0,cs.jsxs)("p",{className:"text-xs text-gray-500",children:["\u20b9",g]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"w-10 h-10 bg-blue-500 border-2 border-blue-600 rounded-lg flex items-center justify-center",children:(0,cs.jsx)("div",{className:"w-6 h-6 bg-white rounded-full flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-blue-600 font-bold text-sm",children:"\u2642"})})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"Male Only"}),(0,cs.jsxs)("p",{className:"text-xs text-gray-500",children:["\u20b9",g]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"w-10 h-10 bg-pink-500 border-2 border-pink-600 rounded-lg flex items-center justify-center",children:(0,cs.jsx)("div",{className:"w-6 h-6 bg-white rounded-full flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-pink-600 font-bold text-sm",children:"\u2640"})})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"Female Only"}),(0,cs.jsxs)("p",{className:"text-xs text-gray-500",children:["\u20b9",g]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"w-10 h-10 bg-gray-300 border-2 border-gray-400 rounded-lg flex items-center justify-center opacity-75",children:(0,cs.jsx)("span",{className:"text-gray-600 text-sm font-bold",children:"01"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"Sold"}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Unavailable"})]})]})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Seats"}),(0,cs.jsxs)("div",{className:"text-sm text-gray-500",children:["Total Seats: ",l.length," | Available: ",l.filter(e=>"available"===e.status||"available_male"===e.status||"available_female"===e.status).length]})]}),(0,cs.jsx)("div",{className:"flex justify-center mb-6",children:(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("svg",{className:"w-8 h-8 text-gray-500",fill:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Front of Bus"})]})}),(0,cs.jsx)("div",{className:"space-y-4",children:A.map((e,t)=>{const s=5===k?e.slice(0,3):e.slice(0,2),r=5===k?e.slice(3,5):e.slice(2,4);return(0,cs.jsxs)("div",{className:"flex items-center justify-center space-x-6",children:[(0,cs.jsx)("div",{className:"flex space-x-3",children:s.map(e=>(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("button",{onClick:()=>b(e),className:v(e),disabled:"booked"===e.status||"booked_male"===e.status||"booked_female"===e.status,title:"Seat ".concat(e.seatNumber," - ").concat(e.status),children:N(e)||e.seatNumber}),(0,cs.jsx)("div",{className:"text-xs text-gray-600 mt-1 font-medium",children:"booked"===e.status||"booked_male"===e.status||"booked_female"===e.status?"Sold":"\u20b9".concat(g)})]},e.seatNumber))}),(0,cs.jsx)("div",{className:"w-12 h-8 flex items-center justify-center",children:(0,cs.jsx)("div",{className:"w-full h-1 bg-gray-200 rounded"})}),(0,cs.jsx)("div",{className:"flex space-x-3",children:r.map(e=>(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("button",{onClick:()=>b(e),className:v(e),disabled:"booked"===e.status||"booked_male"===e.status||"booked_female"===e.status,title:"Seat ".concat(e.seatNumber," - ").concat(e.status),children:N(e)||e.seatNumber}),(0,cs.jsx)("div",{className:"text-xs text-gray-600 mt-1 font-medium",children:"booked"===e.status||"booked_male"===e.status||"booked_female"===e.status?"Sold":"\u20b9".concat(g)})]},e.seatNumber))})]},t)})})]}),(0,cs.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"font-medium text-gray-800",children:"Selected Seats"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:d.length>0?"Seats: ".concat(d.join(", ")):"No seats selected"})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsxs)("div",{className:"text-lg font-semibold text-gray-800",children:["Total: \u20b9",S]}),(0,cs.jsxs)("div",{className:"text-sm text-gray-500",children:[d.length," ",1===d.length?"seat":"seats"]})]})]})}),(0,cs.jsx)("div",{className:"flex justify-end",children:(0,cs.jsx)("button",{onClick:()=>{0!==d.length?s("/redbus/passenger-details/".concat(e),{state:{trip:a,searchData:n,boardingPoint:i,dropPoint:o,selectedSeats:d,seatPrice:g}}):alert("Please select at least one seat")},disabled:0===d.length,className:"bg-pink-600 text-white px-8 py-3 rounded-lg hover:bg-pink-700 disabled:bg-gray-300 disabled:cursor-not-allowed font-medium",children:"Continue to Passenger Details"})})]})]})};const ch=new class{constructor(){this.listeners=[],this.notifications=[]}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}notify(){this.listeners.forEach(e=>e(this.notifications))}addNotification(e){const t=(0,Ie.A)({id:Date.now(),timestamp:new Date,read:!1},e);return this.notifications.unshift(t),this.notify(),this.saveToStorage(),t}markAsRead(e){const t=this.notifications.find(t=>t.id===e);t&&(t.read=!0,this.notify(),this.saveToStorage())}markAllAsRead(){this.notifications.forEach(e=>{e.read=!0}),this.notify(),this.saveToStorage()}getUnreadCount(){return this.notifications.filter(e=>!e.read).length}getNotifications(){return this.notifications}saveToStorage(){try{localStorage.setItem("passenger_notifications",JSON.stringify(this.notifications))}catch(e){console.error("Error saving notifications to storage:",e)}}loadFromStorage(){try{const e=localStorage.getItem("passenger_notifications");e&&(this.notifications=JSON.parse(e).map(e=>(0,Ie.A)((0,Ie.A)({},e),{},{timestamp:new Date(e.timestamp)})),this.notify())}catch(e){console.error("Error loading notifications from storage:",e)}}clearAll(){this.notifications=[],this.notify(),this.saveToStorage()}showBookingConfirmation(e){return this.addNotification({type:"booking_confirmed",title:"Booking Confirmed!",message:"Your trip from ".concat(e.from," to ").concat(e.to," has been confirmed."),data:e})}showPaymentSuccess(e){return this.addNotification({type:"payment_success",title:"Payment Successful!",message:"Your payment of \u20b9".concat(e.amount," has been processed successfully."),data:e})}showTripReminder(e){return this.addNotification({type:"trip_reminder",title:"Trip Reminder",message:"Your trip to ".concat(e.to," is tomorrow at ").concat(e.time,"."),data:e})}showInfo(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.addNotification({type:"info",title:e,message:t,data:s})}showError(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.addNotification({type:"error",title:e,message:t,data:s})}};ch.loadFromStorage();const dh=ch,uh=()=>{const{tripId:e}=se(),{state:t}=Z(),s=te(),a=(0,r.useMemo)(()=>(null===t||void 0===t?void 0:t.selectedSeats)||[],[null===t||void 0===t?void 0:t.selectedSeats]),n=(null===t||void 0===t?void 0:t.boarding)||null,i=(null===t||void 0===t?void 0:t.dropping)||null,o=(null===t||void 0===t?void 0:t.trip)||null,[l,c]=(0,r.useState)({phone:"",email:"",countryCode:"+91",state:"",whatsappUpdates:!0}),[d,u]=(0,r.useState)(()=>{const e=Math.max(1,a.length||1);return Array.from({length:e},(e,t)=>({name:"",age:"",gender:"",seat:a[t]||"Seat ".concat(t+1)}))}),[h,m]=(0,r.useState)("none"),[p,x]=(0,r.useState)(!1),[g,f]=(0,r.useState)(null),y=(e,t,s)=>{u(r=>r.map((r,a)=>a===e?(0,Ie.A)((0,Ie.A)({},r),{},{[t]:s}):r))},b=(e,t)=>{c(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t}))},v=()=>((null===o||void 0===o?void 0:o.fare)||0)*d.length+("protect"===h?50:0);return o?(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,cs.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("button",{onClick:()=>s(-1),className:"text-gray-600 hover:text-gray-800",children:(0,cs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,cs.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Passenger Details"})]}),(0,cs.jsx)("div",{className:"text-sm text-gray-600",children:"Step 3 of 4"})]})})}),(0,cs.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-6",children:(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,cs.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,cs.jsxs)("div",{className:"p-6 border-b border-gray-100",children:[(0,cs.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Contact Details"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"We'll use this to send you booking confirmation"})]}),(0,cs.jsxs)("div",{className:"p-6 space-y-4",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,cs.jsxs)("select",{value:l.countryCode,onChange:e=>b("countryCode",e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-pink-500 focus:border-pink-500",children:[(0,cs.jsx)("option",{value:"+91",children:"+91 (IND)"}),(0,cs.jsx)("option",{value:"+1",children:"+1 (USA)"}),(0,cs.jsx)("option",{value:"+44",children:"+44 (UK)"})]}),(0,cs.jsx)("input",{type:"tel",value:l.phone,onChange:e=>b("phone",e.target.value),placeholder:"Phone Number",className:"col-span-2 border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),(0,cs.jsx)("input",{type:"email",value:l.email,onChange:e=>b("email",e.target.value),placeholder:"Email ID",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-red-500 focus:border-red-500"}),(0,cs.jsxs)("select",{value:l.state,onChange:e=>b("state",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-red-500 focus:border-red-500",children:[(0,cs.jsx)("option",{value:"",children:"Select State of Residence"}),(0,cs.jsx)("option",{value:"kerala",children:"Kerala"}),(0,cs.jsx)("option",{value:"tamil-nadu",children:"Tamil Nadu"}),(0,cs.jsx)("option",{value:"karnataka",children:"Karnataka"}),(0,cs.jsx)("option",{value:"maharashtra",children:"Maharashtra"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)("input",{type:"checkbox",id:"whatsapp",checked:l.whatsappUpdates,onChange:e=>b("whatsappUpdates",e.target.checked),className:"sr-only"}),(0,cs.jsx)("label",{htmlFor:"whatsapp",className:"block w-12 h-6 rounded-full cursor-pointer transition-colors ".concat(l.whatsappUpdates?"bg-pink-600":"bg-gray-300"),children:(0,cs.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ".concat(l.whatsappUpdates?"translate-x-7":"translate-x-1")})})]}),(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Send booking details and trip updates on WhatsApp"})]})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,cs.jsxs)("div",{className:"p-6 border-b border-gray-100",children:[(0,cs.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Passenger Details"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Enter details for all passengers"})]}),(0,cs.jsx)("div",{className:"p-6 space-y-6",children:d.map((e,t)=>(0,cs.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsxs)("h3",{className:"font-medium text-gray-900",children:["Passenger ",t+1]}),(0,cs.jsxs)("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded",children:["Seat ",e.seat]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,cs.jsx)("input",{type:"text",value:e.name,onChange:e=>y(t,"name",e.target.value),placeholder:"Full Name",className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-pink-500 focus:border-pink-500"}),(0,cs.jsx)("input",{type:"number",value:e.age,onChange:e=>y(t,"age",e.target.value),placeholder:"Age",min:"1",max:"120",className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-pink-500 focus:border-pink-500"}),(0,cs.jsxs)("div",{className:"flex space-x-4",children:[(0,cs.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("input",{type:"radio",name:"gender-".concat(t),value:"male",checked:"male"===e.gender,onChange:e=>y(t,"gender",e.target.value),className:"text-pink-600 focus:ring-pink-500"}),(0,cs.jsx)("span",{className:"text-sm",children:"Male"})]}),(0,cs.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("input",{type:"radio",name:"gender-".concat(t),value:"female",checked:"female"===e.gender,onChange:e=>y(t,"gender",e.target.value),className:"text-pink-600 focus:ring-pink-500"}),(0,cs.jsx)("span",{className:"text-sm",children:"Female"})]})]})]})]},t))})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,cs.jsxs)("div",{className:"p-6 border-b border-gray-100",children:[(0,cs.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Travel Assurance"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Protect your journey with redBus Assurance"})]}),(0,cs.jsxs)("div",{className:"p-6 space-y-4",children:[(0,cs.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 bg-green-50",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"font-medium text-gray-900",children:"Trip Protection"}),(0,cs.jsxs)("div",{className:"text-sm text-gray-600",children:["Get \u20b9",v()," if your bus gets cancelled"]})]}),(0,cs.jsx)("div",{className:"text-lg font-bold text-green-600",children:"\u20b950"})]})}),(0,cs.jsxs)("div",{className:"space-y-2",children:[(0,cs.jsxs)("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("input",{type:"radio",name:"assurance",value:"protect",checked:"protect"===h,onChange:e=>m(e.target.value),className:"text-red-600 focus:ring-red-500"}),(0,cs.jsx)("span",{className:"font-medium",children:"Yes, protect my trip"})]}),(0,cs.jsx)("span",{className:"text-sm text-gray-500",children:"\u20b950"})]}),(0,cs.jsxs)("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("input",{type:"radio",name:"assurance",value:"none",checked:"none"===h,onChange:e=>m(e.target.value),className:"text-red-600 focus:ring-red-500"}),(0,cs.jsx)("span",{className:"font-medium",children:"Don't add Assurance"})]}),(0,cs.jsx)("span",{className:"text-sm text-gray-500",children:"Free"})]})]})]})]}),g&&(0,cs.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,cs.jsx)("div",{className:"text-red-600 text-sm",children:g})})]}),(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 sticky top-6",children:[(0,cs.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Trip Summary"}),(0,cs.jsx)("div",{className:"text-lg font-semibold text-gray-900 mb-3",children:o.routeName}),(0,cs.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"From"}),(0,cs.jsx)("span",{className:"font-medium",children:o.fromCity})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"To"}),(0,cs.jsx)("span",{className:"font-medium",children:o.toCity})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Date"}),(0,cs.jsx)("span",{className:"font-medium",children:new Date(o.serviceDate).toLocaleDateString("en-IN",{weekday:"short",day:"numeric",month:"short"})})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Departure"}),(0,cs.jsx)("span",{className:"font-medium",children:o.startTime})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Arrival"}),(0,cs.jsx)("span",{className:"font-medium",children:o.endTime})]})]}),(0,cs.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-900 mb-2",children:"Selected Seats"}),(0,cs.jsx)("div",{className:"flex flex-wrap gap-2",children:a.map((e,t)=>(0,cs.jsx)("span",{className:"bg-pink-100 text-pink-800 px-2 py-1 rounded text-xs font-medium",children:e},t))})]}),(0,cs.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-900 mb-2",children:"Boarding & Drop Points"}),(0,cs.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Boarding"}),(0,cs.jsx)("span",{className:"font-medium",children:(null===n||void 0===n?void 0:n.title)||"Central Bus Stand"})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Dropping"}),(0,cs.jsx)("span",{className:"font-medium",children:(null===i||void 0===i?void 0:i.title)||"Central Bus Stand"})]})]})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsxs)("span",{className:"text-gray-600",children:["Base Fare (",d.length," seat",d.length>1?"s":"",")"]}),(0,cs.jsxs)("span",{children:["\u20b9",(o.fare||0)*d.length]})]}),"protect"===h&&(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Travel Assurance"}),(0,cs.jsx)("span",{children:"\u20b950"})]}),(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Taxes & Fees"}),(0,cs.jsx)("span",{children:"\u20b90"})]}),(0,cs.jsx)("div",{className:"border-t border-gray-200 pt-3",children:(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"font-semibold text-gray-900",children:"Total Amount"}),(0,cs.jsxs)("span",{className:"text-xl font-bold text-pink-600",children:["\u20b9",v()]})]})})]}),(0,cs.jsx)("button",{onClick:async()=>{if(!l.phone||!l.email)return void f("Please fill in contact details");if(d.filter(e=>!e.name||!e.age||!e.gender).length>0)f("Please fill in all passenger details");else{x(!0),f(null);try{const u={tripId:e,routeId:e,busId:e,depotId:e,customer:{name:d[0].name,email:l.email,phone:l.phone,age:parseInt(d[0].age),gender:d[0].gender},journey:{from:(null===o||void 0===o?void 0:o.fromCity)||"Origin",to:(null===o||void 0===o?void 0:o.toCity)||"Destination",departureDate:new Date((null===o||void 0===o?void 0:o.serviceDate)||new Date),departureTime:(null===o||void 0===o?void 0:o.startTime)||"08:00",arrivalDate:new Date((null===o||void 0===o?void 0:o.serviceDate)||new Date),arrivalTime:(null===o||void 0===o?void 0:o.endTime)||"12:00",duration:240,boardingPoint:(null===n||void 0===n?void 0:n.title)||"Central Bus Stand",droppingPoint:(null===i||void 0===i?void 0:i.title)||"Central Bus Stand"},seats:d.map((e,t)=>({seatNumber:e.seat,seatType:"seater",seatPosition:"window",price:(null===o||void 0===o?void 0:o.fare)||0,passengerName:e.name,passengerAge:parseInt(e.age),passengerGender:e.gender})),pricing:{baseFare:(null===o||void 0===o?void 0:o.fare)||0,seatFare:((null===o||void 0===o?void 0:o.fare)||0)*(d.length-1),taxes:{gst:0,serviceTax:0,other:0},discounts:{earlyBird:0,loyalty:0,promo:0,other:0},totalAmount:v(),paidAmount:0,refundAmount:0},payment:{method:"upi",paymentStatus:"pending"},status:"pending",source:"web"},h=await(0,xs.nr)("/api/booking",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(h.ok){var t,r,c;const e=(null===(t=h.data)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.bookingId)||(null===(c=h.data)||void 0===c?void 0:c.bookingId);s("/redbus/payment",{state:{trip:o,passengers:d,contactDetails:l,selectedSeats:a,boarding:n,dropping:i,bookingId:e,totalAmount:v()}})}else f("Failed to create booking. Please try again.")}catch(g){console.error("Booking error:",g),f("An error occurred. Please try again.")}finally{x(!1)}}},disabled:p,className:"mt-6 w-full bg-pink-600 hover:bg-pink-700 disabled:bg-gray-400 text-white font-semibold py-3 rounded-lg transition-colors flex items-center justify-center space-x-2",children:p?(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,cs.jsx)("span",{children:"Processing..."})]}):(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)("span",{children:"Continue to Payment"}),(0,cs.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]})]})})]}):(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-red-600 text-lg mb-4",children:"Trip details not found"}),(0,cs.jsx)("button",{onClick:()=>s("/redbus"),className:"bg-red-600 text-white px-6 py-2 rounded-lg",children:"Back to Search"})]})})},hh=()=>{const{state:e}=Z(),t=te(),{trip:a,passengers:n,contactDetails:i,selectedSeats:o,boarding:l,dropping:c,bookingId:d,totalAmount:u}=e||{},[h,m]=(0,r.useState)("upi"),[p,x]=(0,r.useState)(!1),[g,f]=(0,r.useState)(null),[y,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{a&&n&&i||t("/redbus")},[a,n,i,t]);const v=async e=>{try{const c=await(0,xs.nr)("/api/booking/confirm",{method:"POST",body:JSON.stringify({bookingId:d,paymentId:e.razorpay_payment_id,orderId:e.razorpay_order_id,paymentStatus:"completed"})});if(c.ok){var s,r,n,i,l;const e=(null===(s=c.data)||void 0===s||null===(r=s.data)||void 0===r||null===(n=r.ticket)||void 0===n?void 0:n.pnr)||(null===(i=c.data)||void 0===i||null===(l=i.ticket)||void 0===l?void 0:l.pnr)||d||"PNR".concat(Date.now().toString().slice(-8));b(!0),dh.showPaymentSuccess({amount:u,bookingId:d,pnr:e}),dh.showBookingConfirmation({bookingId:d,pnr:e,trip:{from:a.fromCity,to:a.toCity,date:a.serviceDate,time:a.startTime,seats:o}}),setTimeout(()=>{t("/redbus/ticket/".concat(e,"?pnr=").concat(e))},2e3)}else f("Payment verification failed. Please contact support.")}catch(g){console.error("Payment confirmation error:",g),f("Payment verification failed. Please contact support.")}finally{x(!1)}};return y?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[(0,cs.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,cs.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,cs.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),(0,cs.jsx)("p",{className:"text-gray-600 mb-4",children:"Your booking has been confirmed."}),(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:"Redirecting to your ticket..."})]})}):a&&n&&i?(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,cs.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("button",{onClick:()=>t(-1),className:"text-gray-600 hover:text-gray-800",children:(0,cs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,cs.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Payment"})]}),(0,cs.jsx)("div",{className:"text-sm text-gray-600",children:"Step 4 of 4"})]})})}),(0,cs.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-6",children:(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,cs.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,cs.jsxs)("div",{className:"p-6 border-b border-gray-100",children:[(0,cs.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Choose Payment Method"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Select your preferred payment option"})]}),(0,cs.jsx)("div",{className:"p-6 space-y-4",children:(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("label",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("input",{type:"radio",name:"payment",value:"upi",checked:"upi"===h,onChange:e=>m(e.target.value),className:"text-red-600 focus:ring-red-500"}),(0,cs.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded flex items-center justify-center",children:(0,cs.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a2 2 0 114 0 2 2 0 01-4 0zm8 0a2 2 0 114 0 2 2 0 01-4 0z"})})}),(0,cs.jsx)("span",{className:"font-medium",children:"UPI"})]}),(0,cs.jsx)("span",{className:"text-sm text-gray-500",children:"Pay using UPI apps"})]}),(0,cs.jsxs)("label",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("input",{type:"radio",name:"payment",value:"card",checked:"card"===h,onChange:e=>m(e.target.value),className:"text-red-600 focus:ring-red-500"}),(0,cs.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded flex items-center justify-center",children:(0,cs.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a2 2 0 114 0 2 2 0 01-4 0zm8 0a2 2 0 114 0 2 2 0 01-4 0z"})})}),(0,cs.jsx)("span",{className:"font-medium",children:"Credit/Debit Card"})]}),(0,cs.jsx)("span",{className:"text-sm text-gray-500",children:"Visa, Mastercard, RuPay"})]}),(0,cs.jsxs)("label",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("input",{type:"radio",name:"payment",value:"netbanking",checked:"netbanking"===h,onChange:e=>m(e.target.value),className:"text-red-600 focus:ring-red-500"}),(0,cs.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded flex items-center justify-center",children:(0,cs.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a2 2 0 114 0 2 2 0 01-4 0zm8 0a2 2 0 114 0 2 2 0 01-4 0z"})})}),(0,cs.jsx)("span",{className:"font-medium",children:"Net Banking"})]}),(0,cs.jsx)("span",{className:"text-sm text-gray-500",children:"All major banks"})]})]})})]}),(0,cs.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,cs.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,cs.jsx)("svg",{className:"w-5 h-5 text-blue-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"font-medium text-blue-900",children:"Secure Payment"}),(0,cs.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"Your payment is secured with 256-bit SSL encryption. We never store your payment details."})]})]})}),g&&(0,cs.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,cs.jsx)("div",{className:"text-red-600 text-sm",children:g})})]}),(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 sticky top-6",children:[(0,cs.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Booking Summary"}),(0,cs.jsx)("div",{className:"text-lg font-semibold text-gray-900 mb-3",children:a.routeName}),(0,cs.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"From"}),(0,cs.jsx)("span",{className:"font-medium",children:a.fromCity})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"To"}),(0,cs.jsx)("span",{className:"font-medium",children:a.toCity})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Date"}),(0,cs.jsx)("span",{className:"font-medium",children:new Date(a.serviceDate).toLocaleDateString("en-IN",{weekday:"short",day:"numeric",month:"short"})})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Departure"}),(0,cs.jsx)("span",{className:"font-medium",children:a.startTime})]})]}),(0,cs.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-900 mb-2",children:"Passengers"}),(0,cs.jsx)("div",{className:"space-y-1",children:n.map((e,t)=>(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:e.name}),(0,cs.jsxs)("span",{className:"font-medium",children:["Seat ",e.seat]})]},t))})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsxs)("span",{className:"text-gray-600",children:["Base Fare (",n.length," seat",n.length>1?"s":"",")"]}),(0,cs.jsxs)("span",{children:["\u20b9",(a.fare||0)*n.length]})]}),(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Taxes & Fees"}),(0,cs.jsx)("span",{children:"\u20b90"})]}),(0,cs.jsx)("div",{className:"border-t border-gray-200 pt-3",children:(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"font-semibold text-gray-900",children:"Total Amount"}),(0,cs.jsxs)("span",{className:"text-xl font-bold text-red-600",children:["\u20b9",u]})]})})]}),(0,cs.jsx)("button",{onClick:async()=>{if(d){x(!0),f(null);try{const r={amount:Math.round(100*u),currency:"INR",receipt:d.substring(0,15),bookingId:d},o=await(0,xs.nr)("/api/payments/create-order",{method:"POST",body:JSON.stringify(r)});let l,c,h,m;if(o.ok){var e,t;const s=(null===(e=o.data)||void 0===e?void 0:e.order)||o.data||{};l=s.id,c=s.amount,h=s.currency,m=(null===(t=o.data)||void 0===t?void 0:t.key)||o.key}const p={key:m||void 0||"rzp_test_1DP5mmOlF5G5ag",amount:c||Math.round(100*u),currency:h||"INR",name:"YATRIK ERP",description:"".concat(a.fromCity," \u2192 ").concat(a.toCity),order_id:l,theme:{color:"#E91E63"},prefill:{name:n[0].name,email:i.email,contact:i.phone},notes:{bookingId:d,tripId:a._id||a.id},handler:async e=>{console.log("Payment response:",e),await v(e)},modal:{ondismiss:function(){console.log("Payment modal dismissed"),x(!1)}}},{default:g}=await Promise.resolve().then(s.bind(s,9081)),f=await g.initializeRazorpay();new f(p).open()}catch(g){console.error("Payment error:",g),f("Payment failed. Please try again."),x(!1)}}else f("Booking ID not found. Please try again.")},disabled:p,className:"mt-6 w-full bg-pink-600 hover:bg-pink-700 disabled:bg-gray-400 text-white font-semibold py-3 rounded-lg transition-colors flex items-center justify-center space-x-2",children:p?(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,cs.jsx)("span",{children:"Processing..."})]}):(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsxs)("span",{children:["Pay \u20b9",u]}),(0,cs.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),(0,cs.jsx)("button",{onClick:async()=>{x(!0);try{const i=await(0,xs.nr)("/api/booking/confirm",{method:"POST",body:JSON.stringify({bookingId:d,paymentId:"test_pay_".concat(Date.now()),orderId:"test_order_".concat(Date.now()),paymentStatus:"completed"})});if(i.ok){var e,s,r,a,n;const o=(null===(e=i.data)||void 0===e||null===(s=e.data)||void 0===s||null===(r=s.ticket)||void 0===r?void 0:r.pnr)||(null===(a=i.data)||void 0===a||null===(n=a.ticket)||void 0===n?void 0:n.pnr)||d||"PNR".concat(Date.now().toString().slice(-8));b(!0),setTimeout(()=>{t("/redbus/ticket/".concat(o,"?pnr=").concat(o))},2e3)}else f("Test mode failed. Please try again.")}catch(g){console.error("Test mode error:",g),f("Test mode failed. Please try again.")}finally{x(!1)}},disabled:p,className:"mt-3 w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-semibold py-3 rounded-lg transition-colors flex items-center justify-center space-x-2",children:(0,cs.jsx)("span",{children:"\ud83d\ude80 Test Mode: Skip Payment"})})]})]})]})})]}):(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-red-600 text-lg mb-4",children:"Booking details not found"}),(0,cs.jsx)("button",{onClick:()=>t("/redbus"),className:"bg-red-600 text-white px-6 py-2 rounded-lg",children:"Back to Search"})]})})},mh=()=>{const{pnr:e}=se(),t=te(),[s,a]=(0,r.useState)(null),[n,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)(null);(0,r.useEffect)(()=>{e&&(async()=>{try{i(!0);const t=await(0,xs.nr)("/api/bookings/pnr/".concat(e));t.ok?a(t.data):a({pnr:e,bookingId:"BK".concat(Date.now().toString().slice(-8)),status:"confirmed",customer:{name:"John Doe",email:"john@example.com",phone:"+91 9876543210"},journey:{from:"Kochi",to:"Thiruvananthapuram",departureDate:(new Date).toISOString(),departureTime:"08:00",arrivalTime:"12:00",boardingPoint:"Kochi Central",droppingPoint:"Thiruvananthapuram Central"},seats:[{seatNumber:"U1",passengerName:"John Doe",passengerAge:25,passengerGender:"male",price:250}],pricing:{totalAmount:250,paidAmount:250},trip:{routeName:"Kochi - Thiruvananthapuram Express",busNumber:"KL-01-AB-1234",operator:"Kerala State Transport"}})}catch(o){console.error("Error fetching ticket:",o),l("Failed to load ticket details")}finally{i(!1)}})()},[e]);return n?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"}),(0,cs.jsx)("div",{className:"text-gray-600 mt-4",children:"Loading ticket..."})]})}):o||!s?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-red-600 text-lg mb-4",children:o||"Ticket not found"}),(0,cs.jsx)("button",{onClick:()=>t("/redbus"),className:"bg-red-600 text-white px-6 py-2 rounded-lg",children:"Back to Search"})]})}):(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,cs.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("button",{onClick:()=>t("/redbus"),className:"text-gray-600 hover:text-gray-800",children:(0,cs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,cs.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Your Ticket"})]}),(0,cs.jsx)("div",{className:"flex items-center space-x-2",children:(0,cs.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("confirmed"===s.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:s.status.toUpperCase()})})]})})}),(0,cs.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden",children:[(0,cs.jsx)("div",{className:"bg-gradient-to-r from-red-600 to-red-700 text-white p-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h2",{className:"text-2xl font-bold",children:"YATRIK ERP"}),(0,cs.jsx)("p",{className:"text-red-100",children:"Bus Ticket"})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsx)("div",{className:"text-sm text-red-100",children:"PNR Number"}),(0,cs.jsx)("div",{className:"text-xl font-bold",children:s.pnr})]})]})}),(0,cs.jsxs)("div",{className:"p-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Journey Details"}),(0,cs.jsxs)("div",{className:"space-y-2",children:[(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Route"}),(0,cs.jsxs)("span",{className:"font-medium",children:[s.journey.from," \u2192 ",s.journey.to]})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Date"}),(0,cs.jsx)("span",{className:"font-medium",children:new Date(s.journey.departureDate).toLocaleDateString("en-IN",{weekday:"long",day:"numeric",month:"long",year:"numeric"})})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Departure"}),(0,cs.jsx)("span",{className:"font-medium",children:s.journey.departureTime})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Arrival"}),(0,cs.jsx)("span",{className:"font-medium",children:s.journey.arrivalTime})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Boarding Point"}),(0,cs.jsx)("span",{className:"font-medium",children:s.journey.boardingPoint})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Dropping Point"}),(0,cs.jsx)("span",{className:"font-medium",children:s.journey.droppingPoint})]})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Bus Details"}),(0,cs.jsxs)("div",{className:"space-y-2",children:[(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Service"}),(0,cs.jsx)("span",{className:"font-medium",children:s.trip.routeName})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Bus Number"}),(0,cs.jsx)("span",{className:"font-medium",children:s.trip.busNumber})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Operator"}),(0,cs.jsx)("span",{className:"font-medium",children:s.trip.operator})]})]})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Passenger Details"}),(0,cs.jsxs)("div",{className:"space-y-2",children:[(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Name"}),(0,cs.jsx)("span",{className:"font-medium",children:s.customer.name})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Email"}),(0,cs.jsx)("span",{className:"font-medium",children:s.customer.email})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Phone"}),(0,cs.jsx)("span",{className:"font-medium",children:s.customer.phone})]})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Seat Details"}),(0,cs.jsx)("div",{className:"space-y-2",children:s.seats.map((e,t)=>(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsxs)("span",{className:"text-gray-600",children:["Seat ",e.seatNumber]}),(0,cs.jsx)("span",{className:"font-medium",children:e.passengerName})]},t))})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Payment Details"}),(0,cs.jsxs)("div",{className:"space-y-2",children:[(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Total Amount"}),(0,cs.jsxs)("span",{className:"font-medium",children:["\u20b9",s.pricing.totalAmount]})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Paid Amount"}),(0,cs.jsxs)("span",{className:"font-medium text-green-600",children:["\u20b9",s.pricing.paidAmount]})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Booking ID"}),(0,cs.jsx)("span",{className:"font-medium text-sm",children:s.bookingId})]})]})]})]})]}),(0,cs.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,cs.jsx)("div",{className:"flex items-center justify-center",children:(0,cs.jsx)("div",{className:"bg-gray-100 p-4 rounded-lg",children:(0,cs.jsx)("div",{className:"w-32 h-32 bg-white border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm0 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V8zm0 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2z",clipRule:"evenodd"})}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:"QR Code"}),(0,cs.jsx)("div",{className:"text-xs text-gray-400",children:s.pnr})]})})})})})]})]}),(0,cs.jsxs)("div",{className:"mt-6 flex flex-col sm:flex-row gap-4 justify-center",children:[(0,cs.jsxs)("button",{onClick:()=>{const e="\nYATRIK ERP - BUS TICKET\n========================\n\nPNR: ".concat(s.pnr,"\nBooking ID: ").concat(s.bookingId,"\nStatus: ").concat(s.status.toUpperCase(),"\n\nPASSENGER DETAILS:\nName: ").concat(s.customer.name,"\nEmail: ").concat(s.customer.email,"\nPhone: ").concat(s.customer.phone,"\n\nJOURNEY DETAILS:\nRoute: ").concat(s.journey.from," \u2192 ").concat(s.journey.to,"\nDate: ").concat(new Date(s.journey.departureDate).toLocaleDateString(),"\nDeparture: ").concat(s.journey.departureTime,"\nArrival: ").concat(s.journey.arrivalTime,"\nBoarding: ").concat(s.journey.boardingPoint,"\nDropping: ").concat(s.journey.droppingPoint,"\n\nSEAT DETAILS:\n").concat(s.seats.map(e=>"Seat ".concat(e.seatNumber,": ").concat(e.passengerName," (").concat(e.passengerAge," years, ").concat(e.passengerGender,")")).join("\n"),"\n\nPAYMENT:\nTotal Amount: \u20b9").concat(s.pricing.totalAmount,"\nPaid Amount: \u20b9").concat(s.pricing.paidAmount,"\n\nBUS DETAILS:\n").concat(s.trip.routeName,"\nBus: ").concat(s.trip.busNumber,"\nOperator: ").concat(s.trip.operator,"\n\nThank you for choosing YATRIK ERP!\n    "),t=new Blob([e],{type:"text/plain"}),r=window.URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download="ticket-".concat(s.pnr,".txt"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(r)},className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center space-x-2",children:[(0,cs.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,cs.jsx)("span",{children:"Download Ticket"})]}),(0,cs.jsxs)("button",{onClick:()=>t("/redbus"),className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center space-x-2",children:[(0,cs.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),(0,cs.jsx)("span",{children:"Book Another Trip"})]})]}),(0,cs.jsx)("div",{className:"mt-8 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,cs.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,cs.jsx)("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"font-medium text-yellow-800",children:"Important Instructions"}),(0,cs.jsxs)("ul",{className:"text-sm text-yellow-700 mt-1 space-y-1",children:[(0,cs.jsx)("li",{children:"\u2022 Please arrive at the boarding point 15 minutes before departure"}),(0,cs.jsx)("li",{children:"\u2022 Carry a valid ID proof for verification"}),(0,cs.jsx)("li",{children:"\u2022 Show this ticket or PNR number to the conductor"}),(0,cs.jsx)("li",{children:"\u2022 For any queries, contact our customer support"})]})]})]})})]})]})},ph=(0,Ns.A)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),xh=(0,Ns.A)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),gh=(0,Ns.A)("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),fh=(0,Ns.A)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]),yh=(0,Ns.A)("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),bh=(0,Ns.A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var vh=s(6210);const jh=(0,Ns.A)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Nh=()=>{var e;const t=te(),{user:s,logout:a}=(0,Re.A)(),[n,i]=(0,r.useState)(null),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(new Date),[u]=(0,r.useState)(3),[h,m]=(0,r.useState)(navigator.onLine),[p,x]=(0,r.useState)(!0),[g,f]=(0,r.useState)("desktop"),[y,b]=(0,r.useState)(!1),[v,j]=(0,r.useState)("assigned"),[N,w]=(0,r.useState)(null),[k,A]=(0,r.useState)("dashboard"),[S,C]=(0,r.useState)({routeName:"Kochi \u2192 Alappuzha",routeNumber:"KL-07-CD-5678",depotName:"Kochi Depot",dutyId:"DUTY-2024-001",busNumber:"KL-07-CD-5678",startTime:"09:00",endTime:"10:30",totalSeats:45,currentStop:"Cherthala Junction",nextStop:"Alappuzha Central",progress:60}),[_,T]=(0,r.useState)([{id:1,name:"John Doe",seat:"A1",boardingStop:"Kochi Central",destination:"Alappuzha",status:"boarded",pnr:"PNR123456"},{id:2,name:"Jane Smith",seat:"A2",boardingStop:"Edappally",destination:"Alappuzha",status:"boarded",pnr:"PNR123457"},{id:3,name:"Bob Wilson",seat:"B1",boardingStop:"Cherthala",destination:"Alappuzha",status:"expected",pnr:"PNR123458"},{id:4,name:"Alice Johnson",seat:"B2",boardingStop:"Kochi Central",destination:"Alappuzha",status:"expected",pnr:"PNR123459"},{id:5,name:"Charlie Brown",seat:"C1",boardingStop:"Edappally",destination:"Alappuzha",status:"no_show",pnr:"PNR123460"},{id:6,name:"Diana Prince",seat:"C2",boardingStop:"Cherthala",destination:"Alappuzha",status:"boarded",pnr:"PNR123461"}]),[P,E]=(0,r.useState)("all"),[D,M]=(0,r.useState)("seat"),[O,R]=(0,r.useState)(""),[I,L]=(0,r.useState)(!1),[F,B]=(0,r.useState)(null),[z,U]=(0,r.useState)([]),[V,K]=(0,r.useState)(!1),[W,H]=(0,r.useState)(["A3","A4","B2","B3","C1","C2"]),[q,G]=(0,r.useState)([{id:1,type:"warning",message:"Invalid ticket scanned",time:"2 min ago"},{id:2,type:"error",message:"Duplicate ticket detected",time:"5 min ago"},{id:3,type:"info",message:"Passenger request: Seat change",time:"8 min ago"}]),Y=(0,r.useCallback)(e=>{p&&console.log("Playing ".concat(e," sound"))},[p]),$=(0,r.useCallback)(()=>{f(e=>"desktop"===e?"mobile":"desktop"),Y("toggle")},[Y]),J=(0,r.useCallback)(()=>{b(e=>!e),Y("menu")},[Y]),Q=(0,r.useCallback)(()=>{j("active"),w({id:S.dutyId,startTime:new Date,route:S.routeName,bus:S.busNumber}),Y("success")},[S,Y]),X=(0,r.useCallback)(()=>{j("completed"),Y("success")},[Y]),Z=(0,r.useCallback)(()=>{L(!0),B(null),setTimeout(()=>{const e={success:Math.random()>.2,pnr:"PNR"+Math.random().toString().substr(2,8),passenger:"Sample Passenger",seat:"A"+Math.floor(5*Math.random()+1)};B(e),L(!1),U(t=>[e,...t.slice(0,9)]),Y(e.success?"success":"error")},2e3)},[Y]),ee=(0,r.useCallback)(async()=>{l(!0);try{console.log("Refreshing dashboard data...")}catch(e){console.error("Error refreshing dashboard:",e)}finally{l(!1)}},[]),se=(0,r.useCallback)(()=>{a(),t("/login")},[a,t]);return(0,r.useEffect)(()=>{const e=()=>m(!0),t=()=>m(!1);return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]),(0,r.useEffect)(()=>{ee();const e=setInterval(ee,3e4);i(e);const t=setInterval(()=>{d(new Date)},1e3);return()=>{e&&clearInterval(e),t&&clearInterval(t)}},[ee]),(0,r.useEffect)(()=>()=>{n&&clearInterval(n)},[n]),s?(0,cs.jsxs)("div",{className:"conductor-dashboard ".concat("mobile"===g?"mobile-view":"desktop-view"),children:[(0,cs.jsx)("div",{className:"browser-top-bar",children:(0,cs.jsxs)("div",{className:"browser-controls",children:[(0,cs.jsx)("div",{className:"browser-info",children:(0,cs.jsx)("span",{className:"page-title",children:"YATRIK ERP - Smart Bus Travel Management"})}),(0,cs.jsxs)("div",{className:"browser-right",children:[(0,cs.jsxs)("button",{className:"notification-btn-browser",title:"Notifications",children:[(0,cs.jsx)(Vs,{size:14}),u>0&&(0,cs.jsx)("span",{className:"notification-badge-browser",children:u})]}),(0,cs.jsx)("div",{className:"browser-time",children:c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),(0,cs.jsx)("button",{className:"view-mode-btn-browser ".concat("mobile"===g?"mobile-active":"desktop-active"),onClick:$,title:"Currently in ".concat("desktop"===g?"Desktop":"Mobile"," View - Click to switch to ").concat("desktop"===g?"Mobile":"Desktop"," View"),children:"desktop"===g?"DESKTOP":"MOBILE"})]})]})}),(0,cs.jsxs)("div",{className:"dashboard-header",children:[(0,cs.jsxs)("div",{className:"header-left",children:["mobile"===g&&(0,cs.jsx)("button",{className:"mobile-menu-btn",onClick:J,title:"Toggle Menu",children:y?(0,cs.jsx)(Bs.A,{size:18}):(0,cs.jsx)(Us,{size:18})}),(0,cs.jsxs)("div",{className:"logo-section",children:[(0,cs.jsx)("div",{className:"logo-icon",children:(0,cs.jsx)(ks.A,{size:18})}),(0,cs.jsx)("div",{className:"logo-text",children:(0,cs.jsx)("h1",{children:"CONDUCTOR DASHBOARD"})})]})]}),(0,cs.jsx)("div",{className:"header-center",children:(0,cs.jsxs)("div",{className:"conductor-profile",children:[(0,cs.jsxs)("div",{className:"conductor-details",children:[(0,cs.jsx)("span",{className:"conductor-name",children:(null===s||void 0===s?void 0:s.name)||"Joel"}),(0,cs.jsxs)("span",{className:"conductor-id",children:["ID: ",(null===s||void 0===s||null===(e=s.id)||void 0===e?void 0:e.slice(-8))||"2ff588c8"]})]}),(0,cs.jsxs)("div",{className:"connection-status",children:[h?(0,cs.jsx)(Rd,{size:14}):(0,cs.jsx)(ph,{size:14}),(0,cs.jsx)("span",{children:h?"Online":"Offline"})]})]})}),(0,cs.jsxs)("div",{className:"header-right",children:[(0,cs.jsx)("button",{className:"sound-btn ".concat(p?"active":""),onClick:()=>x(!p),title:p?"Sound On":"Sound Off",children:p?(0,cs.jsx)(xh,{size:16}):(0,cs.jsx)(gh,{size:16})}),(0,cs.jsxs)("button",{className:"logout-btn-header",onClick:se,title:"Logout",children:[(0,cs.jsx)(zs,{size:16}),(0,cs.jsx)("span",{className:"logout-text",children:"Logout"})]})]})]}),(0,cs.jsxs)("div",{className:"trip-context-bar",children:[(0,cs.jsxs)("div",{className:"trip-info-main",children:[(0,cs.jsxs)("div",{className:"route-info",children:[(0,cs.jsx)(As.A,{size:16}),(0,cs.jsx)("span",{className:"route-name",children:S.routeName}),(0,cs.jsx)("span",{className:"route-number",children:S.routeNumber})]}),(0,cs.jsxs)("div",{className:"depot-info",children:[(0,cs.jsx)(fh,{size:16}),(0,cs.jsx)("span",{children:S.depotName})]}),(0,cs.jsxs)("div",{className:"duty-info",children:[(0,cs.jsxs)("span",{className:"duty-id",children:["Duty: ",S.dutyId]}),(0,cs.jsxs)("span",{className:"bus-number",children:["Bus: ",S.busNumber]})]})]}),(0,cs.jsxs)("div",{className:"trip-status",children:[(0,cs.jsxs)("div",{className:"current-stop",children:[(0,cs.jsx)(gs.A,{size:14}),(0,cs.jsxs)("span",{children:["Now: ",S.currentStop]})]}),(0,cs.jsx)("div",{className:"next-stop",children:(0,cs.jsxs)("span",{children:["Next: ",S.nextStop]})}),(0,cs.jsx)("div",{className:"progress-bar",children:(0,cs.jsx)("div",{className:"progress-fill",style:{width:"".concat(S.progress,"%")}})})]}),(0,cs.jsxs)("div",{className:"duty-status-indicator",children:[(0,cs.jsx)("div",{className:"duty-status-dot ".concat(v)}),(0,cs.jsx)("span",{className:"duty-status-text",children:"not_assigned"===v?"No Duty":"assigned"===v?"Ready":"active"===v?"On Duty":"Completed"})]})]}),(0,cs.jsxs)("div",{className:"dashboard-nav ".concat("mobile"===g?"mobile-nav":""),children:[(0,cs.jsxs)("button",{className:"nav-tab ".concat("dashboard"===k?"active":""),onClick:()=>{A("dashboard"),"mobile"===g&&b(!1)},children:[(0,cs.jsx)(Ds.A,{size:16}),(0,cs.jsx)("span",{children:"Dashboard"})]}),(0,cs.jsxs)("button",{className:"nav-tab ".concat("passengers"===k?"active":""),onClick:()=>{A("passengers"),"mobile"===g&&b(!1)},children:[(0,cs.jsx)(Ss.A,{size:16}),(0,cs.jsx)("span",{children:"Passengers"})]}),(0,cs.jsxs)("button",{className:"nav-tab ".concat("scanning"===k?"active":""),onClick:()=>{A("scanning"),"mobile"===g&&b(!1)},children:[(0,cs.jsx)(yh,{size:16}),(0,cs.jsx)("span",{children:"Scan Tickets"})]})]}),"mobile"===g&&y&&(0,cs.jsx)("div",{className:"mobile-menu-overlay",children:(0,cs.jsxs)("div",{className:"mobile-menu-content",children:[(0,cs.jsxs)("div",{className:"mobile-menu-header",children:[(0,cs.jsx)("h3",{children:"Menu"}),(0,cs.jsx)("button",{className:"close-menu-btn",onClick:J,children:(0,cs.jsx)(Bs.A,{size:20})})]}),(0,cs.jsxs)("div",{className:"mobile-menu-items",children:[(0,cs.jsxs)("button",{className:"mobile-menu-item ".concat("dashboard"===k?"active":""),onClick:()=>{A("dashboard"),b(!1)},children:[(0,cs.jsx)(Ds.A,{size:20}),(0,cs.jsx)("span",{children:"Dashboard"})]}),(0,cs.jsxs)("button",{className:"mobile-menu-item ".concat("passengers"===k?"active":""),onClick:()=>{A("passengers"),b(!1)},children:[(0,cs.jsx)(Ss.A,{size:20}),(0,cs.jsx)("span",{children:"Passengers"})]}),(0,cs.jsxs)("button",{className:"mobile-menu-item ".concat("scanning"===k?"active":""),onClick:()=>{A("scanning"),b(!1)},children:[(0,cs.jsx)(yh,{size:20}),(0,cs.jsx)("span",{children:"Scan Tickets"})]})]})]})}),(0,cs.jsxs)("div",{className:"dashboard-content",children:["dashboard"===k&&(0,cs.jsxs)("div",{className:"dashboard-view",children:[(0,cs.jsxs)("div",{className:"quick-actions",children:[(0,cs.jsxs)("button",{className:"quick-action-btn ".concat("active"===v?"end-duty":"start-duty"),onClick:"active"===v?X:Q,children:[(0,cs.jsx)("div",{className:"action-icon",children:"active"===v?(0,cs.jsx)(jd.A,{size:24}):(0,cs.jsx)(md.A,{size:24})}),(0,cs.jsxs)("div",{className:"action-text",children:[(0,cs.jsx)("span",{className:"action-title",children:"active"===v?"End Duty":"Start Duty"}),(0,cs.jsx)("span",{className:"action-subtitle",children:"active"===v?"Complete your duty":"Begin ticket scanning"})]})]}),(0,cs.jsxs)("button",{className:"quick-action-btn scan-tickets",onClick:()=>A("scanning"),children:[(0,cs.jsx)("div",{className:"action-icon",children:(0,cs.jsx)(yh,{size:24})}),(0,cs.jsxs)("div",{className:"action-text",children:[(0,cs.jsx)("span",{className:"action-title",children:"Scan Tickets"}),(0,cs.jsx)("span",{className:"action-subtitle",children:"QR code validation"})]})]}),(0,cs.jsxs)("button",{className:"quick-action-btn passenger-list",onClick:()=>A("passengers"),children:[(0,cs.jsx)("div",{className:"action-icon",children:(0,cs.jsx)(Ss.A,{size:24})}),(0,cs.jsxs)("div",{className:"action-text",children:[(0,cs.jsx)("span",{className:"action-title",children:"Passenger List"}),(0,cs.jsx)("span",{className:"action-subtitle",children:"Manage passengers"})]})]}),(0,cs.jsxs)("button",{className:"quick-action-btn vacant-seats",onClick:()=>K(!0),children:[(0,cs.jsx)("div",{className:"action-icon",children:(0,cs.jsx)(bu.A,{size:24})}),(0,cs.jsxs)("div",{className:"action-text",children:[(0,cs.jsx)("span",{className:"action-title",children:"Vacant Seats"}),(0,cs.jsx)("span",{className:"action-subtitle",children:"Sell available seats"})]})]})]}),(0,cs.jsxs)("div",{className:"status-widgets",children:[(0,cs.jsxs)("div",{className:"status-widget",children:[(0,cs.jsxs)("div",{className:"widget-header",children:[(0,cs.jsx)(Ss.A,{size:16}),(0,cs.jsx)("span",{children:"Passengers"})]}),(0,cs.jsxs)("div",{className:"widget-content",children:[(0,cs.jsxs)("div",{className:"stat-row",children:[(0,cs.jsx)("span",{className:"stat-label",children:"Boarded:"}),(0,cs.jsx)("span",{className:"stat-value boarded",children:_.filter(e=>"boarded"===e.status).length})]}),(0,cs.jsxs)("div",{className:"stat-row",children:[(0,cs.jsx)("span",{className:"stat-label",children:"Expected:"}),(0,cs.jsx)("span",{className:"stat-value expected",children:_.filter(e=>"expected"===e.status).length})]}),(0,cs.jsxs)("div",{className:"stat-row",children:[(0,cs.jsx)("span",{className:"stat-label",children:"Total Seats:"}),(0,cs.jsx)("span",{className:"stat-value total",children:S.totalSeats})]})]})]}),(0,cs.jsxs)("div",{className:"status-widget",children:[(0,cs.jsxs)("div",{className:"widget-header",children:[(0,cs.jsx)(gs.A,{size:16}),(0,cs.jsx)("span",{children:"Route Status"})]}),(0,cs.jsxs)("div",{className:"widget-content",children:[(0,cs.jsxs)("div",{className:"stat-row",children:[(0,cs.jsx)("span",{className:"stat-label",children:"Current:"}),(0,cs.jsx)("span",{className:"stat-value current",children:S.currentStop})]}),(0,cs.jsxs)("div",{className:"stat-row",children:[(0,cs.jsx)("span",{className:"stat-label",children:"Next:"}),(0,cs.jsx)("span",{className:"stat-value next",children:S.nextStop})]}),(0,cs.jsxs)("div",{className:"stat-row",children:[(0,cs.jsx)("span",{className:"stat-label",children:"Progress:"}),(0,cs.jsxs)("span",{className:"stat-value progress",children:[S.progress,"%"]})]})]})]}),(0,cs.jsxs)("div",{className:"status-widget",children:[(0,cs.jsxs)("div",{className:"widget-header",children:[(0,cs.jsx)(Cs.A,{size:16}),(0,cs.jsx)("span",{children:"Tickets Scanned"})]}),(0,cs.jsxs)("div",{className:"widget-content",children:[(0,cs.jsxs)("div",{className:"stat-row",children:[(0,cs.jsx)("span",{className:"stat-label",children:"Today:"}),(0,cs.jsx)("span",{className:"stat-value scanned",children:z.filter(e=>e.success).length})]}),(0,cs.jsxs)("div",{className:"stat-row",children:[(0,cs.jsx)("span",{className:"stat-label",children:"Failed:"}),(0,cs.jsx)("span",{className:"stat-value failed",children:z.filter(e=>!e.success).length})]}),(0,cs.jsxs)("div",{className:"stat-row",children:[(0,cs.jsx)("span",{className:"stat-label",children:"Success Rate:"}),(0,cs.jsxs)("span",{className:"stat-value success",children:[z.length>0?Math.round(z.filter(e=>e.success).length/z.length*100):0,"%"]})]})]})]})]}),(0,cs.jsxs)("div",{className:"trip-progress",children:[(0,cs.jsxs)("div",{className:"progress-header",children:[(0,cs.jsx)("h3",{children:"Trip Progress"}),(0,cs.jsxs)("span",{className:"progress-percentage",children:[S.progress,"% Complete"]})]}),(0,cs.jsx)("div",{className:"progress-bar-large",children:(0,cs.jsx)("div",{className:"progress-fill-large",style:{width:"".concat(S.progress,"%")}})}),(0,cs.jsxs)("div",{className:"progress-stops",children:[(0,cs.jsxs)("div",{className:"stop-item completed",children:[(0,cs.jsx)("div",{className:"stop-dot"}),(0,cs.jsx)("span",{children:"Kochi Central"})]}),(0,cs.jsxs)("div",{className:"stop-item completed",children:[(0,cs.jsx)("div",{className:"stop-dot"}),(0,cs.jsx)("span",{children:"Edappally"})]}),(0,cs.jsxs)("div",{className:"stop-item current",children:[(0,cs.jsx)("div",{className:"stop-dot"}),(0,cs.jsx)("span",{children:"Cherthala"})]}),(0,cs.jsxs)("div",{className:"stop-item pending",children:[(0,cs.jsx)("div",{className:"stop-dot"}),(0,cs.jsx)("span",{children:"Alappuzha"})]})]})]}),q.length>0&&(0,cs.jsxs)("div",{className:"alerts-section",children:[(0,cs.jsxs)("div",{className:"alerts-header",children:[(0,cs.jsx)(vd.A,{size:16}),(0,cs.jsx)("span",{children:"Recent Alerts"})]}),(0,cs.jsx)("div",{className:"alerts-list",children:q.slice(0,3).map(e=>(0,cs.jsxs)("div",{className:"alert-item ".concat(e.type),children:[(0,cs.jsx)("div",{className:"alert-icon",children:"error"===e.type?(0,cs.jsx)(Nd.A,{size:14}):"warning"===e.type?(0,cs.jsx)(vd.A,{size:14}):(0,cs.jsx)(Vs,{size:14})}),(0,cs.jsxs)("div",{className:"alert-content",children:[(0,cs.jsx)("span",{className:"alert-message",children:e.message}),(0,cs.jsx)("span",{className:"alert-time",children:e.time})]})]},e.id))})]})]}),"passengers"===k&&(0,cs.jsxs)("div",{className:"passengers-view",children:[(0,cs.jsxs)("div",{className:"view-header",children:[(0,cs.jsx)("h2",{children:"Passenger Management"}),(0,cs.jsx)("p",{children:"Manage current passengers and seat assignments"})]}),(0,cs.jsxs)("div",{className:"passenger-management",children:[(0,cs.jsxs)("div",{className:"passenger-controls",children:[(0,cs.jsxs)("div",{className:"filter-controls",children:[(0,cs.jsxs)("button",{className:"filter-btn ".concat("all"===P?"active":""),onClick:()=>E("all"),children:[(0,cs.jsx)(Ss.A,{size:16}),(0,cs.jsx)("span",{children:"All"}),(0,cs.jsx)("span",{className:"filter-count",children:_.length})]}),(0,cs.jsxs)("button",{className:"filter-btn ".concat("boarded"===P?"active":""),onClick:()=>E("boarded"),children:[(0,cs.jsx)(jd.A,{size:16}),(0,cs.jsx)("span",{children:"Boarded"}),(0,cs.jsx)("span",{className:"filter-count",children:_.filter(e=>"boarded"===e.status).length})]}),(0,cs.jsxs)("button",{className:"filter-btn ".concat("expected"===P?"active":""),onClick:()=>E("expected"),children:[(0,cs.jsx)(sd.A,{size:16}),(0,cs.jsx)("span",{children:"Expected"}),(0,cs.jsx)("span",{className:"filter-count",children:_.filter(e=>"expected"===e.status).length})]}),(0,cs.jsxs)("button",{className:"filter-btn ".concat("no_show"===P?"active":""),onClick:()=>E("no_show"),children:[(0,cs.jsx)(bh,{size:16}),(0,cs.jsx)("span",{children:"No Show"}),(0,cs.jsx)("span",{className:"filter-count",children:_.filter(e=>"no_show"===e.status).length})]})]}),(0,cs.jsxs)("div",{className:"search-sort-controls",children:[(0,cs.jsxs)("div",{className:"search-control",children:[(0,cs.jsx)(ys.A,{size:16}),(0,cs.jsx)("input",{type:"text",placeholder:"Search passengers...",value:O,onChange:e=>R(e.target.value),className:"search-input"})]}),(0,cs.jsxs)("div",{className:"sort-control",children:[(0,cs.jsx)(vh.A,{size:16}),(0,cs.jsxs)("select",{value:D,onChange:e=>M(e.target.value),className:"sort-select",children:[(0,cs.jsx)("option",{value:"seat",children:"Sort by Seat"}),(0,cs.jsx)("option",{value:"name",children:"Sort by Name"}),(0,cs.jsx)("option",{value:"stop",children:"Sort by Stop"}),(0,cs.jsx)("option",{value:"status",children:"Sort by Status"}),(0,cs.jsx)("option",{value:"pnr",children:"Sort by PNR"})]})]})]})]}),(0,cs.jsx)("div",{className:"passenger-list",children:_.filter(e=>{const t="all"===P||e.status===P,s=!O||e.name.toLowerCase().includes(O.toLowerCase())||e.pnr.toLowerCase().includes(O.toLowerCase())||e.seat.toLowerCase().includes(O.toLowerCase())||e.boardingStop.toLowerCase().includes(O.toLowerCase())||e.destination.toLowerCase().includes(O.toLowerCase());return t&&s}).sort((e,t)=>{switch(D){case"seat":return e.seat.localeCompare(t.seat);case"name":return e.name.localeCompare(t.name);case"stop":return e.boardingStop.localeCompare(t.boardingStop);case"status":return e.status.localeCompare(t.status);case"pnr":return e.pnr.localeCompare(t.pnr);default:return 0}}).map(e=>(0,cs.jsxs)("div",{className:"passenger-item ".concat(e.status),children:[(0,cs.jsxs)("div",{className:"passenger-info",children:[(0,cs.jsx)("div",{className:"passenger-name",children:e.name}),(0,cs.jsxs)("div",{className:"passenger-details",children:[(0,cs.jsxs)("span",{className:"seat",children:["Seat: ",e.seat]}),(0,cs.jsxs)("span",{className:"pnr",children:["PNR: ",e.pnr]})]}),(0,cs.jsxs)("div",{className:"passenger-route",children:[e.boardingStop," \u2192 ",e.destination]})]}),(0,cs.jsx)("div",{className:"passenger-status",children:(0,cs.jsx)("span",{className:"status-badge ".concat(e.status),children:"boarded"===e.status?"\u2713 Boarded":"expected"===e.status?"\u23f3 Expected":"\u274c No Show"})})]},e.id))})]})]}),"scanning"===k&&(0,cs.jsxs)("div",{className:"scanning-view",children:[(0,cs.jsxs)("div",{className:"view-header",children:[(0,cs.jsx)("h2",{children:"QR Ticket Scanning"}),(0,cs.jsx)("p",{children:"Scan passenger tickets for validation"})]}),(0,cs.jsxs)("div",{className:"qr-scanning-section",children:[(0,cs.jsxs)("div",{className:"scan-area",children:[(0,cs.jsxs)("div",{className:"scan-camera ".concat(I?"scanning":""),children:[(0,cs.jsx)(jh,{size:48}),I?(0,cs.jsxs)("div",{className:"scanning-overlay",children:[(0,cs.jsx)("div",{className:"scan-line"}),(0,cs.jsx)("p",{children:"Scanning..."})]}):(0,cs.jsx)("p",{children:"Tap to start scanning"})]}),(0,cs.jsx)("button",{className:"scan-btn ".concat(I?"scanning":""),onClick:Z,disabled:I,children:I?"Scanning...":"Start QR Scan"})]}),F&&(0,cs.jsxs)("div",{className:"scan-result ".concat(F.success?"success":"error"),children:[(0,cs.jsx)("div",{className:"result-icon",children:F.success?(0,cs.jsx)(jd.A,{size:24}):(0,cs.jsx)(Nd.A,{size:24})}),(0,cs.jsxs)("div",{className:"result-details",children:[(0,cs.jsx)("h4",{children:F.success?"Ticket Validated!":"Scan Failed"}),F.success?(0,cs.jsxs)("div",{className:"ticket-info",children:[(0,cs.jsxs)("p",{children:[(0,cs.jsx)("strong",{children:"PNR:"})," ",F.pnr]}),(0,cs.jsxs)("p",{children:[(0,cs.jsx)("strong",{children:"Passenger:"})," ",F.passenger]}),(0,cs.jsxs)("p",{children:[(0,cs.jsx)("strong",{children:"Seat:"})," ",F.seat]})]}):(0,cs.jsx)("p",{children:"Invalid or duplicate ticket. Please try again."})]})]}),(0,cs.jsxs)("div",{className:"scan-history",children:[(0,cs.jsx)("h4",{children:"Recent Scans"}),(0,cs.jsx)("div",{className:"history-list",children:z.slice(0,5).map((e,t)=>(0,cs.jsxs)("div",{className:"history-item ".concat(e.success?"success":"error"),children:[(0,cs.jsx)("span",{className:"scan-time",children:(new Date).toLocaleTimeString()}),(0,cs.jsx)("span",{className:"scan-pnr",children:e.pnr}),(0,cs.jsx)("span",{className:"scan-status",children:e.success?"\u2713":"\u2717"})]},t))})]})]})]})]})]}):(0,cs.jsx)("div",{className:"loading-container",children:(0,cs.jsx)("h3",{children:"Loading Conductor Dashboard..."})})};var wh=s(250);const kh=()=>{var e;const{user:t,logout:s}=(0,Re.A)(),a=te(),[n,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)("not_assigned"),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)("dashboard"),[m,p]=(0,r.useState)(null),x=(0,r.useRef)(null),g=(0,r.useRef)(!1),[f]=(0,r.useState)({name:(null===t||void 0===t?void 0:t.name)||"Driver Name",id:(null===t||void 0===t?void 0:t.id)||"DRV001",license:"DL123456789",experience:"5 years",phone:(null===t||void 0===t?void 0:t.phone)||"+91 9876543210",email:(null===t||void 0===t?void 0:t.email)||"driver@yatrik.com"}),[y,b]=(0,r.useState)({busNumber:"",routeName:"",dutyId:"",totalDistance:0,fuelLevel:85,speed:0,nextStop:"",tripProgress:0}),[v,j]=(0,r.useState)(!1),[N,w]=(0,r.useState)("en"),[k,A]=(0,r.useState)([]),[S,C]=(0,r.useState)(null),[_,T]=(0,r.useState)({filled:0,capacity:0}),P=(0,r.useCallback)((e,t)=>"ml"===N&&t||e,[N]),E="#E91E63",D="#00BCD4",M="#00A86B",O="#F44336",R="#FFB300",I="#1976D2",L="#212121",F="#F7F8FA",B="#FFFFFF",z={card:{background:B,borderRadius:"12px",border:"1px solid #E5E7EB",boxShadow:"0 4px 10px rgba(0,0,0,0.06)"},kpiCard:{background:B,borderRadius:"16px",border:"1px solid #E5E7EB",boxShadow:"0 8px 24px rgba(0,0,0,0.06)",textAlign:"center",padding:"24px",minHeight:"120px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},primaryBtn:e=>({background:e?"#9CA3AF":I,color:B,border:"none",padding:"10px 16px",borderRadius:"10px",cursor:e?"not-allowed":"pointer",fontWeight:"700",fontSize:"14px",boxShadow:"0 4px 10px rgba(25,118,210,0.25)"})},U=(0,r.useCallback)(async()=>{try{const e=await(0,xs.nr)("/api/driver/duties/current");e.ok&&e.data?(d(e.data),l(e.data.status||"assigned"),b({busNumber:e.data.busNumber||"KL-07-CD-5678",routeName:e.data.routeName||"Kochi - Alappuzha Express",dutyId:e.data._id||"",totalDistance:e.data.totalDistance||125,fuelLevel:e.data.fuelLevel||85,speed:e.data.currentSpeed||0,nextStop:e.data.nextStop||"Cherthala",tripProgress:e.data.progress||60}),e.data._id&&localStorage.setItem("currentDutyId",e.data._id)):(l("assigned"),d({_id:"demo"}),b({busNumber:"KL-07-CD-5678",routeName:"Kochi - Alappuzha Express",dutyId:"DUTY002",totalDistance:125,fuelLevel:85,speed:0,nextStop:"Cherthala",tripProgress:60}))}catch(e){console.error("Error fetching current duty:",e),l("assigned"),d({_id:"demo"}),b({busNumber:"KL-07-CD-5678",routeName:"Kochi - Alappuzha Express",dutyId:"DUTY002",totalDistance:125,fuelLevel:85,speed:0,nextStop:"Cherthala",tripProgress:60})}},[]),V=(0,r.useRef)(null),K=(0,r.useRef)(null),W=async()=>{try{if(null===c||void 0===c||!c._id||"demo"===c._id)return l("completed"),$(),void G();if((await(0,xs.nr)("/api/driver/duties/".concat(c._id,"/end"),{method:"POST"})).ok){l("completed"),$();try{wh.A.setHighPerformanceMode(!1)}catch(e){}H(),G()}}catch(t){console.error("Error ending trip:",t),l("completed"),$(),G()}},H=(0,r.useCallback)(()=>{V.current&&(clearInterval(V.current),V.current=null),K.current=null},[]),q=(0,r.useCallback)(()=>{K.current=Date.now(),V.current&&clearInterval(V.current),V.current=setInterval(async()=>{if(y.speed>5&&"waiting_movement"===o){try{if(null!==c&&void 0!==c&&c._id&&"demo"!==c._id){if(!(await(0,xs.nr)("/api/driver/duties/".concat(c._id,"/start"),{method:"POST"})).ok)throw new Error("backend start failed")}}catch(qU){}return l("active"),await U(),void H()}if((Date.now()-(K.current||Date.now()))/6e4>=10&&"waiting_movement"===o){try{null!==c&&void 0!==c&&c._id&&"demo"!==c._id&&await(0,xs.nr)("/api/driver/duties/".concat(c._id,"/incident"),{method:"POST",body:JSON.stringify({type:"no_movement_alert",description:"Bus duty not started yet (no movement > 10 minutes)",severity:"medium",location:m})})}catch(qU){}K.current=Date.now()}},2e3)},[y.speed,o,c,m,U,H]),G=()=>{const e={dutyId:y.dutyId,busNumber:y.busNumber,route:y.routeName,totalDistance:y.totalDistance,earnings:y.todayEarnings,fuelConsumed:100-y.fuelLevel,completedAt:(new Date).toISOString()};console.log("Trip Report Generated:",e),alert("Trip completed successfully!\n\nSummary:\n- Distance covered: ".concat(y.totalDistance,"km\n- Earnings: \u20b9").concat(y.todayEarnings,"\n- Fuel remaining: ").concat(y.fuelLevel,"%"))},Y=(0,r.useCallback)(()=>{wh.A.getTrackingStatus().isTracking||wh.A.startTracking((e,t)=>{if(t)return void console.error("Location tracking error:",t);p({lat:e.latitude,lng:e.longitude});const s=Math.round(3.6*(e.speed||0));b(e=>(0,Ie.A)((0,Ie.A)({},e),{},{speed:s})),j(s>0)})},[]),$=(0,r.useCallback)(()=>{wh.A.stopTracking(),x.current&&(clearInterval(x.current),x.current=null)},[]),J=(0,r.useCallback)(e=>{e&&(x.current&&(clearInterval(x.current),x.current=null),x.current=setInterval(async()=>{var t,s;const r=wh.A.getSmoothedLocation(),a=null!==(t=null===r||void 0===r?void 0:r.latitude)&&void 0!==t?t:null===m||void 0===m?void 0:m.lat,n=null!==(s=null===r||void 0===r?void 0:r.longitude)&&void 0!==s?s:null===m||void 0===m?void 0:m.lng;if(null!=a&&null!=n)try{var i,o;await(0,xs.nr)("/api/duty/".concat(e,"/location"),{method:"POST",body:JSON.stringify({latitude:a,longitude:n,speed:null===r||void 0===r?void 0:r.speed,heading:null===r||void 0===r?void 0:r.heading,accuracy:null!==(i=null===r||void 0===r?void 0:r.accuracy)&&void 0!==i?i:0,timestamp:null!==(o=null===r||void 0===r?void 0:r.timestamp)&&void 0!==o?o:(new Date).toISOString()})})}catch(qU){}},3e3))},[m]),Q=async e=>{try{const t={type:e,description:"".concat(e," reported by driver"),severity:"Medical Emergency"===e?"high":"medium",location:m};if(null===c||void 0===c||!c._id||"demo"===c._id)return void alert("".concat(e," reported successfully! Emergency services have been notified."));(await(0,xs.nr)("/api/driver/duties/".concat(c._id,"/incident"),{method:"POST",body:JSON.stringify(t)})).ok?(alert("".concat(e," reported successfully! Emergency services have been notified.")),b(e=>(0,Ie.A)((0,Ie.A)({},e),{},{status:"emergency"}))):alert("Emergency report sent to local authorities. ".concat(e," logged."))}catch(t){console.error("Error reporting emergency:",t),alert("Emergency report sent to local authorities. ".concat(e," logged."))}},X=(0,r.useCallback)(async()=>{try{const e=wh.A.getTrackingStatus();if(e.isTracking&&e.currentLocation)p({lat:e.currentLocation.latitude,lng:e.currentLocation.longitude}),console.log("Using existing location tracking session");else{console.log("Starting new location tracking session...");const e=await wh.A.getCurrentLocation();p({lat:e.latitude,lng:e.longitude}),wh.A.startTracking((e,t)=>{if(t)return void console.error("Location tracking error:",t);p({lat:e.latitude,lng:e.longitude});const s=Math.round(3.6*(e.speed||0));b(e=>(0,Ie.A)((0,Ie.A)({},e),{},{speed:s})),j(s>0)})}console.log("Location tracking initialized successfully")}catch(e){console.error("Failed to initialize location tracking:",e)}},[]),Z=async()=>{try{var e;const t=await(0,xs.nr)("/api/driver/notifications");if(t.ok&&(null===(e=t.data)||void 0===e?void 0:e.length)>0){const e=t.data.filter(e=>"trip_assigned"===e.type);e.length>0&&alert("\ud83d\ude8c New Trip Assignment!\n\nYou have ".concat(e.length," new trip(s) assigned. Please check your dashboard."))}}catch(t){console.error("Error fetching notifications:",t)}},ee=(0,r.useCallback)(async()=>{try{if(null===c||void 0===c||!c._id||"demo"===c._id)return;const s=await(0,xs.nr)("/api/trips/".concat(c._id,"/load"));var e,t;if(s.ok&&s.data)T({filled:null!==(e=s.data.filled)&&void 0!==e?e:0,capacity:null!==(t=s.data.capacity)&&void 0!==t?t:0})}catch(qU){}},[c]),se=(0,r.useCallback)(async()=>{if(!g.current){try{const e=await(0,xs.nr)("/api/alerts/kerala",{suppressError:!0});if(e.ok&&Array.isArray(e.data))return void A(e.data.slice(0,3));g.current=!0}catch(qU){g.current=!0}A([{id:"a1",type:"traffic",level:"medium",text:"NH 66 slow near Alappuzha (10-15 min delay)"},{id:"a2",type:"rain",level:"high",text:"Heavy rain warning in Ernakulam after 6 PM"},{id:"a3",type:"event",level:"info",text:"Temple festival near Cherthala \u2013 expect crowd"}])}},[]);return(0,r.useEffect)(()=>{(async()=>{try{if(i(!0),!t)return;await U(),await Z(),await X(),await se(),await ee(),i(!1)}catch(e){console.error("Error initializing dashboard:",e),i(!1)}})();const e=setInterval(()=>{U(),Z(),ee()},3e4);return()=>{clearInterval(e)}},[t,U,X,se,ee]),(0,r.useEffect)(()=>{if("active"===o){Y();try{wh.A.setHighPerformanceMode(!0)}catch(e){}}else{$();try{wh.A.setHighPerformanceMode(!1)}catch(t){}}},[o,Y,$]),n?(0,cs.jsxs)("div",{className:"driver-loading",children:[(0,cs.jsx)("div",{className:"loading-spinner"}),(0,cs.jsx)("h3",{children:"\ud83d\ude97 Loading Driver Dashboard..."})]}):(0,cs.jsxs)("div",{className:"driver-dashboard-new",style:{fontFamily:"Inter, sans-serif",background:F,minHeight:"100vh",display:"flex",flexDirection:"column"},children:[(0,cs.jsxs)("div",{style:{height:"100vh",display:"flex"},children:[(0,cs.jsxs)("div",{style:{width:"360px",background:B,borderRight:"1px solid #E5E7EB",display:"flex",flexDirection:"column"},children:[(0,cs.jsxs)("div",{style:{padding:"20px",borderBottom:"1px solid #E5E7EB",background:"linear-gradient(135deg, ".concat(I,"15 0%, ").concat(D,"15 100%)")},children:[(0,cs.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,cs.jsxs)("h2",{style:{margin:0,fontSize:"18px",fontWeight:"700",color:L},children:["\ud83d\ude97 ",P("Driver Dashboard","\u0d21\u0d4d\u0d30\u0d48\u0d35\u0d7c \u0d21\u0d3e\u0d37\u0d4d\u0d2c\u0d4b\u0d7c\u0d21\u0d4d")]}),(0,cs.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,cs.jsx)("button",{onClick:()=>w(e=>"en"===e?"ml":"en"),style:{background:D,color:B,border:"none",padding:"6px 10px",borderRadius:"6px",cursor:"pointer",fontWeight:"600",fontSize:"12px"},children:"en"===N?"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02":"English"}),(0,cs.jsx)("button",{onClick:async()=>{try{await s(),a("/login")}catch(e){console.error("Logout error:",e),a("/login")}},style:{background:O,color:B,border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontWeight:"600",fontSize:"12px"},children:"Logout"})]})]}),(0,cs.jsxs)("div",{style:{fontSize:"14px",color:L,fontWeight:"600",marginBottom:"4px"},children:[f.name," \u2022 ",y.busNumber]}),(0,cs.jsxs)("div",{style:{fontSize:"12px",color:"#6B7280"},children:[P("Status","\u0d38\u0d4d\u0d25\u0d3f\u0d24\u0d3f"),": ","active"===o?P("\ud83d\udfe2 On Trip","\ud83d\udfe2 \u0d2f\u0d3e\u0d24\u0d4d\u0d30\u0d2f\u0d3f\u0d32\u0d3e\u0d23\u0d4d"):"assigned"===o?P("\ud83d\udfe1 Assigned","\ud83d\udfe1 \u0d1a\u0d41\u0d2e\u0d24\u0d32 \u0d28\u0d7d\u0d15\u0d3f\u0d2f"):P("\u26aa Off Duty","\u26aa \u0d21\u0d4d\u0d2f\u0d42\u0d1f\u0d4d\u0d1f\u0d3f\u0d2f\u0d3f\u0d7d \u0d07\u0d32\u0d4d\u0d32")]})]}),(0,cs.jsxs)("div",{style:{padding:"16px 16px 20px 16px",flex:1},children:[(0,cs.jsxs)("div",{style:(0,Ie.A)((0,Ie.A)({},z.card),{},{background:"linear-gradient(135deg, ".concat(M,"12 0%, ").concat(I,"12 100%)"),padding:"16px",marginBottom:"16px"}),children:[(0,cs.jsx)("h3",{style:{margin:"0 0 12px 0",fontSize:"16px",fontWeight:"600",color:L},children:"\ud83d\udcc8 Live Vehicle Stats"}),(0,cs.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[(0,cs.jsxs)("div",{style:{textAlign:"center"},children:[(0,cs.jsx)("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Fuel"}),(0,cs.jsxs)("div",{style:{background:y.fuelLevel>25?M:O,color:B,padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"600"},children:["\u26fd ",y.fuelLevel,"%"]})]}),(0,cs.jsxs)("div",{style:{textAlign:"center"},children:[(0,cs.jsx)("div",{style:{fontSize:"12px",color:"#6B7280",marginBottom:"4px"},children:"Speed"}),(0,cs.jsxs)("div",{style:{background:I,color:B,padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"600"},children:["\ud83d\ude97 ",y.speed," km/h"]})]})]})]}),(0,cs.jsxs)("div",{style:(0,Ie.A)((0,Ie.A)({},z.card),{},{padding:"16px",marginBottom:"16px"}),children:[(0,cs.jsxs)("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:L},children:["\ud83c\udfae ",P("Trip Controls","\u0d1f\u0d4d\u0d30\u0d3f\u0d2a\u0d4d\u0d2a\u0d4d \u0d28\u0d3f\u0d2f\u0d28\u0d4d\u0d24\u0d4d\u0d30\u0d23\u0d02")]}),(0,cs.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:["assigned"===o&&(0,cs.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[(0,cs.jsx)("button",{onClick:async()=>{l("ready")},style:{background:v?"#9CA3AF":M,color:B,border:"none",padding:"12px 16px",borderRadius:"8px",cursor:v?"not-allowed":"pointer",fontWeight:"600",fontSize:"14px"},disabled:v,children:"\u2705 Accept Duty"}),(0,cs.jsx)("button",{onClick:async()=>{try{null!==c&&void 0!==c&&c._id&&"demo"!==c._id&&await(0,xs.nr)("/api/driver/duties/".concat(c._id,"/incident"),{method:"POST",body:JSON.stringify({type:"duty_rejected",description:"Driver rejected duty",severity:"medium",location:m})})}catch(qU){}l("not_assigned"),d(null)},style:{background:v?"#9CA3AF":O,color:B,border:"none",padding:"12px 16px",borderRadius:"8px",cursor:v?"not-allowed":"pointer",fontWeight:"600",fontSize:"14px"},disabled:v,children:"\u274c Reject Duty"})]}),"ready"===o&&(0,cs.jsx)("button",{onClick:async()=>{try{if(null===c||void 0===c||!c._id||"demo"===c._id){l("waiting_movement"),Y();try{wh.A.setHighPerformanceMode(!0)}catch(e){}return J(c._id),void q()}l("waiting_movement"),Y();try{wh.A.setHighPerformanceMode(!0)}catch(t){}J(c._id),q()}catch(s){console.error("Error starting trip:",s),l("waiting_movement"),Y();try{wh.A.setHighPerformanceMode(!0)}catch(r){}J(y.dutyId||(null===c||void 0===c?void 0:c._id)),q()}},style:z.primaryBtn(v),disabled:v,children:"\u25b6\ufe0f Start Trip"}),"active"===o&&(0,cs.jsx)("button",{onClick:W,style:{background:v?"#9CA3AF":O,color:B,border:"none",padding:"12px 16px",borderRadius:"8px",cursor:v?"not-allowed":"pointer",fontWeight:"600",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},disabled:v,children:"\u23f9\ufe0f End Trip"}),(0,cs.jsx)("button",{onClick:U,style:{background:v?"#9CA3AF":I,color:B,border:"none",padding:"10px 16px",borderRadius:"6px",cursor:v?"not-allowed":"pointer",fontWeight:"600",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},disabled:v,children:"\ud83d\udd04 Refresh Data"})]})]}),(0,cs.jsxs)("div",{style:(0,Ie.A)((0,Ie.A)({},z.card),{},{padding:"16px",marginBottom:"16px"}),children:[(0,cs.jsxs)("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:L},children:["\u23f1\ufe0f ",P("ETA & Delay Management","ETA & \u0d35\u0d48\u0d15\u0d7d \u0d28\u0d3f\u0d2f\u0d28\u0d4d\u0d24\u0d4d\u0d30\u0d23\u0d02")]}),(0,cs.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[(0,cs.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[(0,cs.jsxs)("button",{onClick:()=>async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{if(null===c||void 0===c||!c._id||"demo"===c._id)return void alert("ETA updated: ".concat(e," minutes"));(await(0,xs.nr)("/api/driver/duties/".concat(c._id,"/eta"),{method:"POST",body:JSON.stringify({etaMinutes:e,reason:t,location:m,timestamp:(new Date).toISOString()})})).ok&&(alert("ETA updated: ".concat(e," minutes")),b(t=>(0,Ie.A)((0,Ie.A)({},t),{},{nextStopETA:e})),C(e))}catch(s){console.error("Error updating ETA:",s),alert("ETA updated locally: ".concat(e," minutes"))}}(10,"Running Late"),style:{background:v?"#9CA3AF":I,color:B,border:"none",padding:"10px 12px",borderRadius:"8px",cursor:v?"not-allowed":"pointer",fontWeight:"700",fontSize:"13px"},disabled:v,children:["\ud83d\udea6 ",P("Running Late (+10 min)","\u0d24\u0d3e\u0d2e\u0d38\u0d02 (+10 \u0d2e\u0d3f\u0d28\u0d3f\u0d31\u0d4d\u0d31\u0d4d)")]}),(0,cs.jsxs)("button",{onClick:()=>Q("Breakdown"),style:{background:v?"#9CA3AF":R,color:B,border:"none",padding:"10px 12px",borderRadius:"8px",cursor:v?"not-allowed":"pointer",fontWeight:"700",fontSize:"13px"},disabled:v,children:["\ud83d\udd27 ",P("Breakdown","\u0d2c\u0d4d\u0d30\u0d47\u0d15\u0d4d\u0d15\u0d4d \u0d21\u0d57\u0d7a")]})]}),"active"===o&&(0,cs.jsxs)("button",{onClick:W,style:{background:v?"#9CA3AF":O,color:B,border:"none",padding:"10px 12px",borderRadius:"8px",cursor:v?"not-allowed":"pointer",fontWeight:"700",fontSize:"13px"},disabled:v,children:["\u23f9 ",P("End Duty","\u0d21\u0d4d\u0d2f\u0d42\u0d1f\u0d4d\u0d1f\u0d3f \u0d05\u0d35\u0d38\u0d3e\u0d28\u0d3f\u0d2a\u0d4d\u0d2a\u0d3f\u0d15\u0d4d\u0d15\u0d41\u0d15")]})]})]}),(0,cs.jsxs)("div",{style:(0,Ie.A)((0,Ie.A)({},z.card),{},{background:"linear-gradient(135deg, ".concat(O,"10 0%, ").concat(R,"10 100%)"),border:"1px solid ".concat(O),padding:"16px"}),children:[(0,cs.jsxs)("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:O},children:["\ud83d\udea8 ",P("Emergency Controls","\u0d0e\u0d2e\u0d7c\u0d1c\u0d7b\u0d38\u0d3f \u0d28\u0d3f\u0d2f\u0d28\u0d4d\u0d24\u0d4d\u0d30\u0d23\u0d02")]}),(0,cs.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,cs.jsxs)("button",{onClick:()=>Q("Breakdown"),style:{background:v?"#9CA3AF":R,color:B,border:"none",padding:"8px 12px",borderRadius:"6px",cursor:v?"not-allowed":"pointer",fontWeight:"600",fontSize:"12px"},disabled:v,children:["\ud83d\udd27 ",P("Report Breakdown","\u0d2c\u0d4d\u0d30\u0d47\u0d15\u0d4d\u0d15\u0d4d\u200c\u0d21\u0d57\u0d7a \u0d31\u0d3f\u0d2a\u0d4d\u0d2a\u0d4b\u0d7c\u0d1f\u0d4d\u0d1f\u0d4d")]}),(0,cs.jsxs)("button",{onClick:()=>Q("Medical Emergency"),style:{background:v?"#9CA3AF":O,color:B,border:"none",padding:"8px 12px",borderRadius:"6px",cursor:v?"not-allowed":"pointer",fontWeight:"600",fontSize:"12px"},disabled:v,children:["\ud83d\ude91 ",P("Medical Emergency","\u0d2e\u0d46\u0d21\u0d3f\u0d15\u0d4d\u0d15\u0d7d \u0d0e\u0d2e\u0d7c\u0d1c\u0d7b\u0d38\u0d3f")]}),(0,cs.jsxs)("button",{onClick:()=>(async(e,t)=>{try{if(null===c||void 0===c||!c._id||"demo"===c._id)return void alert("Delay reported: ".concat(e," minutes - ").concat(t));(await(0,xs.nr)("/api/driver/duties/".concat(c._id,"/delay"),{method:"POST",body:JSON.stringify({delayMinutes:e,reason:t,location:m,timestamp:(new Date).toISOString()})})).ok&&alert("Delay reported: ".concat(e," minutes - ").concat(t))}catch(s){console.error("Error reporting delay:",s),alert("Delay reported locally: ".concat(e," minutes - ").concat(t))}})(15,"Traffic Congestion"),style:{background:v?"#9CA3AF":"#FF8C00",color:B,border:"none",padding:"8px 12px",borderRadius:"6px",cursor:v?"not-allowed":"pointer",fontWeight:"600",fontSize:"12px"},disabled:v,children:["\ud83d\udea6 ",P("Report Traffic Delay","\u0d1f\u0d4d\u0d30\u0d3e\u0d2b\u0d3f\u0d15\u0d4d \u0d35\u0d48\u0d15\u0d7d \u0d31\u0d3f\u0d2a\u0d4d\u0d2a\u0d4b\u0d7c\u0d1f\u0d4d\u0d1f\u0d4d")]})]})]})]})]}),(0,cs.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[(0,cs.jsxs)("div",{style:{background:B,padding:"20px 24px",borderBottom:"1px solid #E5E7EB",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"16px"},children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h2",{style:{margin:"0 0 4px 0",fontSize:"20px",fontWeight:"700",color:L},children:P("Current Trip Status","\u0d28\u0d3f\u0d32\u0d35\u0d3f\u0d32\u0d46 \u0d2f\u0d3e\u0d24\u0d4d\u0d30\u0d2f\u0d41\u0d1f\u0d46 \u0d28\u0d3f\u0d32")}),(0,cs.jsxs)("div",{style:{fontSize:"14px",color:"#6B7280"},children:[P("Distance","\u0d26\u0d42\u0d30\u0d02"),": ",y.totalDistance,"km"]})]}),(0,cs.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,cs.jsxs)("div",{style:{background:m?M:R,color:B,padding:"8px 16px",borderRadius:"20px",fontSize:"12px",fontWeight:"600"},children:["\ud83d\udccd ",m?P("GPS Active","GPS \u0d38\u0d1c\u0d40\u0d35\u0d02"):P("GPS Searching","GPS \u0d24\u0d3f\u0d30\u0d2f\u0d41\u0d28\u0d4d\u0d28\u0d41")]}),(0,cs.jsxs)("button",{onClick:()=>{var e,t;if(!m)return;const s=null===(e=m.lat)||void 0===e?void 0:e.toFixed(6),r=null===(t=m.lng)||void 0===t?void 0:t.toFixed(6),a="https://www.google.com/maps/dir/?api=1&destination=".concat(s,",").concat(r,"&travelmode=driving");window.open(a,"_blank")},style:{background:I,color:B,border:"none",padding:"8px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"700",cursor:v?"not-allowed":"pointer",opacity:v?.7:1},disabled:v,children:["\ud83d\uddfa\ufe0f ",P("Open Map","\u0d2e\u0d3e\u0d2a\u0d4d \u0d24\u0d41\u0d31\u0d15\u0d4d\u0d15\u0d41\u0d15")]}),(0,cs.jsxs)("a",{href:"tel:100",style:{background:D,color:B,padding:"8px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"700",textDecoration:"none",opacity:v?.7:1},children:["\u260e\ufe0f ",P("Call Depot","\u0d21\u0d3f\u0d2a\u0d4d\u0d2a\u0d4b \u0d35\u0d3f\u0d33\u0d3f\u0d15\u0d4d\u0d15\u0d41\u0d15")]})]})]}),(0,cs.jsxs)("div",{style:{background:"#0B3A53",color:B,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 16px",position:"sticky",top:0,zIndex:5,boxShadow:"0 6px 12px rgba(0,0,0,0.12)"},children:[(0,cs.jsxs)("div",{style:{fontWeight:700},children:["\ud83d\ude8f ",P("Next Stop","\u0d05\u0d1f\u0d41\u0d24\u0d4d\u0d24 \u0d38\u0d4d\u0d31\u0d4d\u0d31\u0d4b\u0d2a\u0d4d\u0d2a\u0d4d"),": ",y.nextStop||P("TBD","\u0d28\u0d3f\u0d36\u0d4d\u0d1a\u0d2f\u0d3f\u0d15\u0d4d\u0d15\u0d3e\u0d28\u0d41\u0d23\u0d4d\u0d1f\u0d4d")]}),(0,cs.jsxs)("div",{style:{fontWeight:700},children:["\u23f1\ufe0f ",P("ETA","\u0d2a\u0d4d\u0d30\u0d24\u0d40\u0d15\u0d4d\u0d37\u0d3f\u0d24 \u0d38\u0d2e\u0d2f\u0d02"),": ",null!==(e=null!==S&&void 0!==S?S:y.nextStopETA)&&void 0!==e?e:P("\u2014","\u2014")," ",P("min","\u0d2e\u0d3f\u0d28\u0d3f\u0d31\u0d4d\u0d31\u0d4d")]})]}),(0,cs.jsx)("div",{style:{background:B,borderBottom:"1px solid #E5E7EB",display:"flex"},children:[{key:"dashboard",label:"\ud83d\udcca Dashboard",icon:"\ud83d\udcca"},{key:"gps",label:"\ud83d\uddfa\ufe0f GPS Tracking",icon:"\ud83d\uddfa\ufe0f"},{key:"fuel",label:"\u26fd Fuel Monitor",icon:"\u26fd"},{key:"maintenance",label:"\ud83d\udd27 Maintenance",icon:"\ud83d\udd27"}].map(e=>(0,cs.jsx)("button",{onClick:()=>{v||h(e.key)},style:{background:u===e.key?I:"transparent",color:v?"#9CA3AF":u===e.key?B:L,border:"none",padding:"16px 20px",cursor:v?"not-allowed":"pointer",fontWeight:"600",fontSize:"14px",borderBottom:u===e.key?"3px solid ".concat(I):"3px solid transparent",opacity:v?.6:1},disabled:v,children:e.label},e.key))}),(0,cs.jsxs)("div",{style:{flex:1,overflow:"auto",background:"#FAFAFA"},children:["dashboard"===u&&(0,cs.jsxs)("div",{style:{padding:"24px"},children:[k.length>0&&(0,cs.jsxs)("div",{style:(0,Ie.A)((0,Ie.A)({},z.card),{},{padding:"16px",marginBottom:"16px"}),children:[(0,cs.jsxs)("div",{style:{fontWeight:700,marginBottom:"8px"},children:["\u26a0\ufe0f ",P("Kerala Alerts","\u0d15\u0d47\u0d30\u0d33 \u0d2e\u0d41\u0d28\u0d4d\u0d28\u0d31\u0d3f\u0d2f\u0d3f\u0d2a\u0d4d\u0d2a\u0d41\u0d15\u0d7e")]}),(0,cs.jsx)("div",{style:{display:"grid",gap:"8px"},children:k.map(e=>(0,cs.jsx)("div",{style:{background:"high"===e.level?"#FEE2E2":"medium"===e.level?"#FEF3C7":"#DBEAFE",border:"1px solid #E5E7EB",padding:"8px 10px",borderRadius:"8px",fontSize:"12px",fontWeight:600},children:e.text},e.id))})]}),(0,cs.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",marginBottom:"20px"},children:[(0,cs.jsxs)("div",{style:z.kpiCard,children:[(0,cs.jsxs)("div",{style:{fontSize:"32px",fontWeight:"700",color:I},children:[y.totalDistance,"km"]}),(0,cs.jsx)("div",{style:{fontSize:"14px",color:"#6B7280",marginTop:"4px"},children:P("Total Distance Today","\u0d07\u0d28\u0d4d\u0d28\u0d24\u0d4d\u0d24\u0d46 \u0d06\u0d15\u0d46 \u0d26\u0d42\u0d30\u0d02")})]}),(0,cs.jsxs)("div",{style:z.kpiCard,children:[(0,cs.jsx)("div",{style:{fontSize:"24px",fontWeight:"700",color:E},children:P("Passenger Load","\u0d2f\u0d3e\u0d24\u0d4d\u0d30\u0d15\u0d4d\u0d15\u0d3e\u0d30\u0d41\u0d1f\u0d46 \u0d0e\u0d23\u0d4d\u0d23\u0d02")}),(0,cs.jsxs)("div",{style:{fontSize:"18px",fontWeight:"700",color:M,marginTop:"6px"},children:[_.filled,"/",_.capacity]}),(0,cs.jsx)("div",{style:{fontSize:"12px",color:"#6B7280",marginTop:"4px"},children:P("Seats Filled","\u0d38\u0d40\u0d31\u0d4d\u0d31\u0d41\u0d15\u0d7e \u0d28\u0d3f\u0d31\u0d1e\u0d4d\u0d1e\u0d41")})]}),(0,cs.jsxs)("div",{style:z.kpiCard,children:[(0,cs.jsx)("div",{style:{fontSize:"32px",fontWeight:"700",color:E},children:y.completedTrips}),(0,cs.jsx)("div",{style:{fontSize:"14px",color:"#6B7280",marginTop:"4px"},children:P("Completed Trips","\u0d2a\u0d42\u0d7c\u0d24\u0d4d\u0d24\u0d3f\u0d2f\u0d3e\u0d2f \u0d2f\u0d3e\u0d24\u0d4d\u0d30\u0d15\u0d7e")})]}),(0,cs.jsxs)("div",{style:z.kpiCard,children:[(0,cs.jsxs)("div",{style:{fontSize:"32px",fontWeight:"700",color:R},children:[y.fuelLevel,"%"]}),(0,cs.jsx)("div",{style:{fontSize:"14px",color:"#6B7280",marginTop:"4px"},children:P("Fuel Remaining","\u0d36\u0d47\u0d37\u0d3f\u0d15\u0d4d\u0d15\u0d41\u0d28\u0d4d\u0d28 \u0d07\u0d28\u0d4d\u0d27\u0d28\u0d02")})]})]}),(0,cs.jsxs)("div",{style:(0,Ie.A)((0,Ie.A)({},z.card),{},{padding:"20px"}),children:[(0,cs.jsxs)("h3",{style:{margin:"0 0 20px 0",fontSize:"18px",fontWeight:"700",color:L},children:["\ud83d\udee3\ufe0f ",P("Trip Progress","\u0d2f\u0d3e\u0d24\u0d4d\u0d30 \u0d2a\u0d41\u0d30\u0d4b\u0d17\u0d24\u0d3f")]}),(0,cs.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,cs.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,cs.jsxs)("span",{style:{fontSize:"14px",fontWeight:"600",color:L},children:[P("Next Stop","\u0d05\u0d1f\u0d41\u0d24\u0d4d\u0d24 \u0d38\u0d4d\u0d31\u0d4d\u0d31\u0d4b\u0d2a\u0d4d\u0d2a\u0d4d"),": ",y.nextStop]}),(0,cs.jsxs)("span",{style:{fontSize:"14px",fontWeight:"600",color:I},children:[y.tripProgress,"%"]})]}),(0,cs.jsx)("div",{style:{width:"100%",height:"12px",background:"#E5E7EB",borderRadius:"6px",overflow:"hidden"},children:(0,cs.jsx)("div",{style:{width:"".concat(y.tripProgress,"%"),height:"100%",background:"linear-gradient(90deg, ".concat(I," 0%, ").concat(D," 100%)"),transition:"width 0.3s ease"}})})]})]})]}),"gps"===u&&(0,cs.jsx)("div",{style:{padding:"16px"},children:(0,cs.jsx)("div",{style:(0,Ie.A)((0,Ie.A)({},z.card),{},{padding:0,overflow:"hidden"}),children:(0,cs.jsx)("div",{style:{height:"520px"},children:(0,cs.jsx)(Bd,{trip:{busId:{busNumber:y.busNumber},currentLocation:y.routeName,currentSpeed:"".concat(y.speed," km/h"),lastUpdate:(new Date).toLocaleTimeString(),coordinates:m?{lat:m.lat,lng:m.lng}:void 0},isTracking:!0,onLocationUpdate:()=>{},className:"w-full h-full"})})})}),"fuel"===u&&(0,cs.jsx)("div",{style:{padding:"24px"},children:(0,cs.jsxs)("div",{style:{background:B,borderRadius:"12px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",textAlign:"center"},children:[(0,cs.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\u26fd"}),(0,cs.jsx)("h3",{style:{margin:"0 0 8px 0",fontSize:"20px",fontWeight:"700",color:L},children:"Fuel Monitoring"}),(0,cs.jsx)("p",{style:{margin:"0 0 24px 0",color:"#6B7280"},children:"Current fuel level and consumption tracking"}),(0,cs.jsxs)("div",{style:{background:y.fuelLevel>25?"linear-gradient(135deg, ".concat(M,"15 0%, ").concat(I,"15 100%)"):"linear-gradient(135deg, ".concat(O,"15 0%, ").concat(R,"15 100%)"),borderRadius:"8px",padding:"20px"},children:[(0,cs.jsxs)("div",{style:{fontSize:"48px",fontWeight:"700",color:y.fuelLevel>25?M:O},children:[y.fuelLevel,"%"]}),(0,cs.jsx)("div",{style:{fontSize:"16px",color:L,marginTop:"8px"},children:y.fuelLevel>50?"Fuel level is good":y.fuelLevel>25?"Consider refueling soon":"Low fuel - Refuel immediately"})]})]})}),"maintenance"===u&&(0,cs.jsx)("div",{style:{padding:"24px"},children:(0,cs.jsxs)("div",{style:{background:B,borderRadius:"12px",padding:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[(0,cs.jsx)("div",{style:{fontSize:"48px",textAlign:"center",marginBottom:"16px"},children:"\ud83d\udd27"}),(0,cs.jsx)("h3",{style:{margin:"0 0 8px 0",fontSize:"20px",fontWeight:"700",color:L,textAlign:"center"},children:"Vehicle Maintenance"}),(0,cs.jsx)("p",{style:{margin:"0 0 24px 0",color:"#6B7280",textAlign:"center"},children:"Vehicle health status and maintenance alerts"}),(0,cs.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[(0,cs.jsxs)("div",{style:{background:F,padding:"16px",borderRadius:"8px",textAlign:"center"},children:[(0,cs.jsx)("div",{style:{fontSize:"20px",fontWeight:"700",color:M},children:"\u2705 Good"}),(0,cs.jsx)("div",{style:{fontSize:"14px",color:"#6B7280",marginTop:"4px"},children:"Engine Status"})]}),(0,cs.jsxs)("div",{style:{background:F,padding:"16px",borderRadius:"8px",textAlign:"center"},children:[(0,cs.jsx)("div",{style:{fontSize:"20px",fontWeight:"700",color:M},children:"\u2705 Good"}),(0,cs.jsx)("div",{style:{fontSize:"14px",color:"#6B7280",marginTop:"4px"},children:"Brake System"})]}),(0,cs.jsxs)("div",{style:{background:F,padding:"16px",borderRadius:"8px",textAlign:"center"},children:[(0,cs.jsx)("div",{style:{fontSize:"20px",fontWeight:"700",color:R},children:"\u26a0\ufe0f Check"}),(0,cs.jsx)("div",{style:{fontSize:"14px",color:"#6B7280",marginTop:"4px"},children:"Tire Pressure"})]}),(0,cs.jsxs)("div",{style:{background:F,padding:"16px",borderRadius:"8px",textAlign:"center"},children:[(0,cs.jsx)("div",{style:{fontSize:"20px",fontWeight:"700",color:M},children:"\u2705 Normal"}),(0,cs.jsx)("div",{style:{fontSize:"14px",color:"#6B7280",marginTop:"4px"},children:"Temperature"})]})]})]})})]})]})]}),(0,cs.jsxs)("button",{onClick:()=>Q("SOS"),style:{position:"fixed",right:"16px",bottom:v?"72px":"16px",background:O,color:B,border:"none",padding:"12px 16px",borderRadius:"9999px",fontWeight:800,boxShadow:"0 12px 24px rgba(244,67,54,0.4)",zIndex:1e3,cursor:"pointer"},children:["\ud83d\udea8 ",P("SOS","SOS")]}),v&&(0,cs.jsxs)("div",{style:{position:"fixed",bottom:"16px",left:"50%",transform:"translateX(-50%)",background:"rgba(33,33,33,0.95)",color:B,padding:"10px 16px",borderRadius:"9999px",boxShadow:"0 8px 24px rgba(0,0,0,0.25)",display:"flex",alignItems:"center",gap:"10px",zIndex:1e3},children:[(0,cs.jsx)("span",{style:{fontWeight:700},children:"Driving Safety Mode"}),(0,cs.jsx)("span",{style:{opacity:.85},children:"Controls locked above 0 km/h"}),(0,cs.jsxs)("span",{style:{background:I,padding:"4px 8px",borderRadius:"8px",fontSize:"12px",fontWeight:700},children:["Speed: ",y.speed," km/h"]})]})]})};var Ah=s(2104),Sh=s(3829);const Ch=e=>{let{notifications:t=[],unreadCount:s=0,onClose:r,onMarkAsRead:a,onMarkAllAsRead:n}=e;const i=(e,t)=>{switch(e){case"trip_update":return(0,cs.jsx)(ks.A,{size:16,className:"text-blue-500"});case"trip_assigned":return(0,cs.jsx)(fs.A,{size:16,className:"text-green-500"});case"system_alert":return(0,cs.jsx)(Nd.A,{size:16,className:"text-red-500"});case"message":return(0,cs.jsx)(bd,{size:16,className:"text-gray-500"});default:return(0,cs.jsx)(Vs,{size:16,className:"text-gray-500"})}},o=e=>{switch(e){case"high":return"border-l-red-500 bg-red-50";case"medium":return"border-l-yellow-500 bg-yellow-50";case"low":return"border-l-blue-500 bg-blue-50";default:return"border-l-gray-500 bg-gray-50"}},l=e=>{const t=new Date,s=new Date(e),r=Math.floor((t-s)/6e4);return r<1?"Just now":r<60?"".concat(r,"m ago"):r<1440?"".concat(Math.floor(r/60),"h ago"):s.toLocaleDateString()};return(0,cs.jsxs)("div",{className:"notification-center",children:[(0,cs.jsx)("div",{className:"notification-overlay",onClick:r}),(0,cs.jsxs)("div",{className:"notification-panel",children:[(0,cs.jsxs)("div",{className:"notification-header",children:[(0,cs.jsxs)("div",{className:"header-left",children:[(0,cs.jsx)(Vs,{size:20}),(0,cs.jsx)("h3",{children:"Notifications"}),s>0&&(0,cs.jsx)("span",{className:"unread-count",children:s})]}),(0,cs.jsxs)("div",{className:"header-actions",children:[s>0&&(0,cs.jsx)("button",{className:"mark-all-read-btn",onClick:n,title:"Mark all as read",children:(0,cs.jsx)(Sh.A,{size:16})}),(0,cs.jsx)("button",{className:"close-btn",onClick:r,children:(0,cs.jsx)(Bs.A,{size:20})})]})]}),(0,cs.jsx)("div",{className:"notifications-list",children:t.length>0?t.map(e=>(0,cs.jsxs)("div",{className:"notification-item ".concat(o(e.priority)," ").concat(e.read?"read":"unread"),onClick:()=>!e.read&&a(e.id),children:[(0,cs.jsx)("div",{className:"notification-icon",children:i(e.type,e.priority)}),(0,cs.jsxs)("div",{className:"notification-content",children:[(0,cs.jsxs)("div",{className:"notification-title",children:[e.title,!e.read&&(0,cs.jsx)("div",{className:"unread-dot"})]}),(0,cs.jsx)("div",{className:"notification-message",children:e.message}),(0,cs.jsxs)("div",{className:"notification-time",children:[(0,cs.jsx)(sd.A,{size:12}),(0,cs.jsx)("span",{children:l(e.timestamp)})]})]}),"high"===e.priority&&(0,cs.jsx)("div",{className:"priority-indicator",children:(0,cs.jsx)(Nd.A,{size:16,className:"text-red-500"})})]},e.id)):(0,cs.jsxs)("div",{className:"empty-notifications",children:[(0,cs.jsx)(Vs,{size:48,className:"text-gray-400"}),(0,cs.jsx)("h4",{children:"No notifications"}),(0,cs.jsx)("p",{children:"You're all caught up!"})]})}),(0,cs.jsx)("div",{className:"notification-footer",children:(0,cs.jsxs)("div",{className:"notification-stats",children:[(0,cs.jsxs)("span",{className:"total-count",children:[t.length," total"]}),s>0&&(0,cs.jsxs)("span",{className:"unread-count",children:[s," unread"]})]})})]})]})};var _h=s(3540);const Th=r.lazy(()=>s.e(25).then(s.bind(s,3025))),Ph=r.lazy(()=>Promise.all([s.e(406),s.e(403)]).then(s.bind(s,5403))),Eh=r.lazy(()=>Promise.all([s.e(406),s.e(21)]).then(s.bind(s,9021))),Dh=r.lazy(()=>Promise.all([s.e(406),s.e(717)]).then(s.bind(s,4717))),Mh=r.lazy(()=>s.e(7).then(s.bind(s,7))),Oh=r.lazy(()=>Promise.all([s.e(406),s.e(738)]).then(s.bind(s,9738))),Rh=r.lazy(()=>Promise.all([s.e(406),s.e(806)]).then(s.bind(s,1806))),Ih=()=>{var e,t,s,a;const{user:n,logout:i}=(0,Re.A)(),o=te(),l=Z(),[c,d]=(0,r.useState)(!0),[u,h]=(0,r.useState)({totalBuses:0,activeTrips:0,todayRevenue:0,totalRoutes:0,todayBookings:0,totalBookings:0}),[m,p]=(0,r.useState)({name:"Yatrik Depot",location:"Kerala, India",manager:"Depot Manager"}),[x,g]=(0,r.useState)(!1),[f,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)({database:"online",api:"online",frontend:"online"}),[j,N]=(0,r.useState)([{id:1,type:"trip_assigned",title:"New Trip Assigned",message:"Trip TR-001 has been assigned to you. Route: Kochi to Thiruvananthapuram, Driver: Rajesh Kumar",timestamp:new Date(Date.now()-3e5),read:!1,priority:"high"},{id:2,type:"trip_update",title:"Trip Updated",message:"Trip TR-002 has been updated by admin. Driver: Manoj Pillai, Conductor: Anil Kumar",timestamp:new Date(Date.now()-9e5),read:!1,priority:"medium"},{id:3,type:"message",title:"System Message",message:"Maintenance scheduled for bus KL-76-AB-5114 tomorrow at 10:00 AM",timestamp:new Date(Date.now()-18e5),read:!0,priority:"low"}]),[w,k]=(0,r.useState)(2),[A,S]=(0,r.useState)(null),[C,_]=(0,r.useState)([]),[T,P]=(0,r.useState)([]),[E,D]=(0,r.useState)([]),[M,O]=(0,r.useState)([]),[R,I]=(0,r.useState)([]),[L,F]=(0,r.useState)([]),[B,z]=(0,r.useState)({}),[U,V]=(0,r.useState)({}),[K,W]=(0,r.useState)((new Date).toLocaleTimeString()),[H,q]=(0,r.useState)("dashboard"),[G,Y]=(0,r.useState)(!1),$=e=>{switch(e){case"fleet":J();break;case"routes":Q();break;case"trips":X();break;case"bookings":ee();break;case"staff":se();break;case"scheduling":re();break;case"reports":ae()}},J=async()=>{try{const e=await _h.cx.getBuses();console.log("Fleet API response:",e);let t=[];e.success&&e.data?t=Array.isArray(e.data)?e.data:e.data.buses||[]:Array.isArray(e)?t=e:e.buses&&(t=e.buses),console.log("Parsed buses:",t),_(t)}catch(e){console.error("Error fetching fleet data:",e),_([])}},Q=async()=>{try{const e=await _h.z3.getRoutes();console.log("Routes API response:",e);let t=[];if(e.success&&e.data?t=Array.isArray(e.data)?e.data:e.data.routes||[]:Array.isArray(e)?t=e:e.routes&&(t=e.routes),console.log("Parsed routes:",t),0===t.length){console.log("No routes found, using sample data for testing");P([{_id:"sample1",routeNumber:"KL-001",routeName:"Kochi to Thiruvananthapuram",startingPoint:"Kochi",endingPoint:"Thiruvananthapuram",totalDistance:220,status:"active"},{_id:"sample2",routeNumber:"KL-002",routeName:"Kochi to Kozhikode",startingPoint:"Kochi",endingPoint:"Kozhikode",totalDistance:185,status:"active"},{_id:"sample3",routeNumber:"KL-003",routeName:"Thiruvananthapuram to Kozhikode",startingPoint:"Thiruvananthapuram",endingPoint:"Kozhikode",totalDistance:350,status:"active"}])}else P(t)}catch(e){console.error("Error fetching routes data:",e);P([{_id:"sample1",routeNumber:"KL-001",routeName:"Kochi to Thiruvananthapuram",startingPoint:"Kochi",endingPoint:"Thiruvananthapuram",totalDistance:220,status:"active"},{_id:"sample2",routeNumber:"KL-002",routeName:"Kochi to Kozhikode",startingPoint:"Kochi",endingPoint:"Kozhikode",totalDistance:185,status:"active"}])}},X=async()=>{try{const e=await _h.Tt.getTrips();console.log("Trips API response:",e);let t=[];e.success&&e.data?t=Array.isArray(e.data)?e.data:e.data.trips||[]:Array.isArray(e)?t=e:e.trips&&(t=e.trips),console.log("Parsed trips:",t),D(t)}catch(e){console.error("Error fetching trips data:",e),D([])}},ee=async()=>{try{const e=await _h.hl.getBookings();console.log("Bookings API response:",e);let t=[];e.success&&e.data?t=Array.isArray(e.data)?e.data:e.data.bookings||[]:Array.isArray(e)?t=e:e.bookings&&(t=e.bookings),console.log("Parsed bookings:",t),O(t)}catch(e){console.error("Error fetching bookings data:",e),O([])}},se=async()=>{try{const[e,t]=await Promise.all([_h.mL.getDrivers(),_h.mL.getConductors()]);I({drivers:e.data||[],conductors:t.data||[]})}catch(e){console.error("Error fetching staff data:",e),I({drivers:[],conductors:[]})}},re=async()=>{try{const e=await _h.cV.getBusSchedules();let t=[];e.success&&e.data?t=Array.isArray(e.data)?e.data:e.data.schedules||[]:Array.isArray(e)?t=e:e.schedules&&(t=e.schedules),F(t)}catch(e){console.error("Error fetching schedules data:",e),F([])}},ae=async()=>{try{const e=await _h.pR.getDashboardData();let t={};(e.success&&e.data||e.data)&&(t=e.data),z(t)}catch(e){console.error("Error fetching reports data:",e),z({})}},ne=async()=>{try{const e=await _h.ut.getDepotInfo();let t={};(e.success&&e.data||e.data)&&(t=e.data),V(t)}catch(e){console.error("Error fetching depot data:",e),V({})}},ie=(0,r.useCallback)(async()=>{try{d(!0),await Promise.all([J(),Q(),X(),ee(),se(),re(),ae(),ne()]),h({totalBuses:C.length||6,activeTrips:E.filter(e=>"running"===e.status).length||3,todayRevenue:U.revenue||12500,totalRoutes:T.length||12,todayBookings:M.filter(e=>new Date(e.createdAt).toDateString()===(new Date).toDateString()).length||45,totalBookings:M.length||156}),v({database:"online",api:"online",frontend:"online"}),W((new Date).toLocaleTimeString()),d(!1),console.log("Dashboard data loaded successfully")}catch(e){console.error("Error fetching all data:",e),h({totalBuses:6,activeTrips:3,todayRevenue:12500,totalRoutes:12,todayBookings:45,totalBookings:156}),d(!1)}},[]);(0,r.useEffect)(()=>{ie()},[]),(0,r.useEffect)(()=>{const e=(0,Ah.Ay)({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SOCKET_URL||"http://localhost:5000",{auth:{token:localStorage.getItem("depotToken")||localStorage.getItem("token"),userType:"depot_manager"}});return S(e),e.on("tripUpdated",e=>{var t,s;console.log("Trip updated from admin:",e),D(t=>t.map(t=>t._id===e.tripId?(0,Ie.A)((0,Ie.A)({},t),e.updates):t));const r={id:Date.now(),type:"trip_update",title:"Trip Updated",message:"Trip ".concat(e.tripNumber," has been updated by admin. Driver: ").concat((null===(t=e.updates.driverId)||void 0===t?void 0:t.name)||"N/A",", Conductor: ").concat((null===(s=e.updates.conductorId)||void 0===s?void 0:s.name)||"N/A"),timestamp:new Date,read:!1,priority:"medium"};N(e=>[r,...e]),k(e=>e+1)}),e.on("tripAssigned",e=>{var t,s;console.log("New trip assigned:",e),D(t=>[e.trip,...t]);const r={id:Date.now(),type:"trip_assigned",title:"New Trip Assigned",message:"New trip ".concat(e.trip.tripNumber," has been assigned to you. Route: ").concat(null===(t=e.trip.routeId)||void 0===t?void 0:t.routeName,", Driver: ").concat(null===(s=e.trip.driverId)||void 0===s?void 0:s.name),timestamp:new Date,read:!1,priority:"high"};N(e=>[r,...e]),k(e=>e+1)}),e.on("message",e=>{console.log("New message received:",e);const t={id:Date.now(),type:"message",title:e.title||"New Message",message:e.message,timestamp:new Date,read:!1,priority:e.priority||"low"};N(e=>[t,...e]),k(e=>e+1)}),e.on("systemAlert",e=>{console.log("System alert received:",e);const t={id:Date.now(),type:"system_alert",title:"System Alert",message:e.message,timestamp:new Date,read:!1,priority:"high"};N(e=>[t,...e]),k(e=>e+1)}),()=>{e.close()}},[]);const oe=async e=>{try{switch(Y(!0),q(e),e){case"fleet":o("/depot/fleet-management");break;case"routes":o("/depot/route-management");break;case"trips":o("/depot/trip-management");break;case"bookings":o("/depot/booking-management");break;case"staff":o("/depot/staff-management");break;case"scheduling":o("/depot/bus-scheduling");break;case"reports":o("/depot/reports-analytics");break;case"dashboard":o("/depot/dashboard");break;default:console.warn("Unknown section:",e)}setTimeout(()=>{Y(!1)},150)}catch(t){console.error("Error navigating to section:",e,t),Y(!1);const s={fleet:"/depot/fleet-management",routes:"/depot/route-management",trips:"/depot/trip-management",bookings:"/depot/booking-management",staff:"/depot/staff-management",scheduling:"/depot/bus-scheduling",reports:"/depot/reports-analytics",dashboard:"/depot/dashboard"};s[e]&&(window.location.href=s[e])}},le=()=>{const e=l.pathname;return e.includes("/fleet-management")?"fleet":e.includes("/route-management")?"routes":e.includes("/trip-management")?"trips":e.includes("/booking-management")?"bookings":e.includes("/staff-management")?"staff":e.includes("/bus-scheduling")?"scheduling":e.includes("/reports-analytics")?"reports":"dashboard"};(0,r.useEffect)(()=>{const e=e=>{!x||e.target.closest(".user-profile-top")||e.target.closest(".profile-dropdown")||g(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[x]);const ce=async()=>{try{await i(),o("/login")}catch(e){console.error("Logout error:",e),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("depotToken"),localStorage.removeItem("depotUser"),localStorage.removeItem("depotInfo"),o("/login")}};return(0,cs.jsx)("div",{className:"admin-dashboard",children:c?(0,cs.jsxs)("div",{className:"admin-loading",children:[(0,cs.jsx)("div",{className:"loading-spinner"}),(0,cs.jsx)("h3",{children:"Loading Depot Dashboard..."})]}):(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsxs)("div",{className:"side-menu",children:[(0,cs.jsxs)("div",{className:"sidebar-header",children:[(0,cs.jsx)("h2",{children:"Depot Panel"}),(0,cs.jsxs)("div",{className:"depot-info",children:[(0,cs.jsx)("div",{className:"depot-name",children:m.name}),(0,cs.jsx)("div",{className:"depot-location",children:m.location}),(0,cs.jsxs)("div",{className:"depot-manager",children:["Manager: ",m.manager]})]})]}),(0,cs.jsx)("div",{className:"sidebar-nav",children:(0,cs.jsxs)("ul",{className:"nav-menu",children:[(0,cs.jsxs)("li",{className:"nav-item ".concat("dashboard"===le()?"active":""," ").concat(G?"navigating":""),onClick:()=>oe("dashboard"),onMouseEnter:()=>$("dashboard"),style:{cursor:"pointer",opacity:G?.7:1},children:[(0,cs.jsx)("svg",{className:"nav-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})}),(0,cs.jsx)("span",{children:"Dashboard"})]}),(0,cs.jsxs)("li",{className:"nav-item ".concat("fleet"===le()?"active":""," ").concat(G?"navigating":""),onMouseEnter:()=>$("fleet"),onClick:()=>oe("fleet"),style:{cursor:"pointer",opacity:G?.7:1},children:[(0,cs.jsx)("svg",{className:"nav-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),(0,cs.jsx)("span",{children:"Fleet Management"})]}),(0,cs.jsxs)("li",{className:"nav-item ".concat("routes"===le()?"active":""," ").concat(G?"navigating":""),onMouseEnter:()=>$("routes"),onClick:()=>oe("routes"),style:{cursor:"pointer",opacity:G?.7:1},children:[(0,cs.jsx)("svg",{className:"nav-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),(0,cs.jsx)("span",{children:"Route Management"})]}),(0,cs.jsxs)("li",{className:"nav-item ".concat("trips"===le()?"active":""," ").concat(G?"navigating":""),onMouseEnter:()=>$("trips"),onClick:()=>oe("trips"),style:{cursor:"pointer",opacity:G?.7:1},children:[(0,cs.jsx)("svg",{className:"nav-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),(0,cs.jsx)("span",{children:"Trip Management"})]}),(0,cs.jsxs)("li",{className:"nav-item ".concat("bookings"===le()?"active":""," ").concat(G?"navigating":""),onMouseEnter:()=>$("bookings"),onClick:()=>oe("bookings"),style:{cursor:"pointer",opacity:G?.7:1},children:[(0,cs.jsx)("svg",{className:"nav-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),(0,cs.jsx)("span",{children:"Booking Management"})]}),(0,cs.jsxs)("li",{className:"nav-item ".concat("staff"===le()?"active":""," ").concat(G?"navigating":""),onMouseEnter:()=>$("staff"),onClick:()=>oe("staff"),style:{cursor:"pointer",opacity:G?.7:1},children:[(0,cs.jsx)("svg",{className:"nav-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})}),(0,cs.jsx)("span",{children:"Staff Management"})]}),(0,cs.jsxs)("li",{className:"nav-item ".concat("scheduling"===le()?"active":""," ").concat(G?"navigating":""),onMouseEnter:()=>$("scheduling"),onClick:()=>oe("scheduling"),style:{cursor:"pointer",opacity:G?.7:1},children:[(0,cs.jsx)("svg",{className:"nav-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),(0,cs.jsx)("span",{children:"Bus Scheduling"})]}),(0,cs.jsxs)("li",{className:"nav-item ".concat("reports"===le()?"active":""," ").concat(G?"navigating":""),onMouseEnter:()=>$("reports"),onClick:()=>oe("reports"),style:{cursor:"pointer",opacity:G?.7:1},children:[(0,cs.jsx)("svg",{className:"nav-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,cs.jsx)("span",{children:"Reports & Analytics"})]})]})}),(0,cs.jsxs)("div",{className:"sidebar-footer",children:[(0,cs.jsxs)("div",{className:"user-profile",children:[(0,cs.jsx)("div",{className:"user-avatar",children:(null===n||void 0===n||null===(e=n.name)||void 0===e||null===(t=e.charAt(0))||void 0===t?void 0:t.toUpperCase())||"D"}),(0,cs.jsx)("div",{className:"user-info",children:(0,cs.jsx)("div",{className:"user-name",children:(null===n||void 0===n?void 0:n.name)||"Depot Manager"})})]}),(0,cs.jsxs)("div",{className:"footer-actions",children:[(0,cs.jsxs)("button",{className:"notification-btn",onClick:()=>y(!0),children:[(0,cs.jsx)("svg",{className:"notification-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})}),w>0&&(0,cs.jsx)("span",{className:"notification-badge",children:w})]}),(0,cs.jsxs)("button",{className:"logout-btn",onClick:ce,children:[(0,cs.jsx)("svg",{className:"logout-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z",clipRule:"evenodd"})}),(0,cs.jsx)("span",{children:"Logout"})]})]})]})]}),(0,cs.jsxs)("div",{className:"main-content",children:["dashboard"===le()?(0,cs.jsxs)("div",{className:"dashboard-content",children:[(0,cs.jsxs)("div",{className:"dashboard-header",children:[(0,cs.jsxs)("div",{className:"header-left",children:[(0,cs.jsx)("h1",{children:"Yatrik Depot Dashboard"}),(0,cs.jsx)("p",{className:"welcome-text",children:"Welcome back! Here's what's happening with your depot today."})]}),(0,cs.jsxs)("div",{className:"quick-actions-grid",children:[(0,cs.jsxs)("button",{className:"quick-action blue",children:[(0,cs.jsx)("svg",{className:"action-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"})}),(0,cs.jsx)("span",{className:"qa-title",children:"Add Staff"})]}),(0,cs.jsxs)("button",{className:"quick-action green",children:[(0,cs.jsx)("svg",{className:"action-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),(0,cs.jsx)("span",{className:"qa-title",children:"Schedule Trip"})]}),(0,cs.jsxs)("button",{className:"quick-action purple",children:[(0,cs.jsx)("svg",{className:"action-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,cs.jsx)("span",{className:"qa-title",children:"View Reports"})]}),(0,cs.jsxs)("button",{className:"quick-action orange",children:[(0,cs.jsx)("svg",{className:"action-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,cs.jsx)("span",{className:"qa-title",children:"System Status"})]})]})]}),(0,cs.jsxs)("div",{className:"system-health",children:[(0,cs.jsxs)("div",{className:"section-header",children:[(0,cs.jsxs)("div",{className:"section-left",children:[(0,cs.jsx)("svg",{className:"section-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,cs.jsx)("h3",{children:"System Health"})]}),(0,cs.jsxs)("div",{className:"section-right",children:[(0,cs.jsxs)("button",{className:"action-btn purple",children:[(0,cs.jsx)("svg",{className:"action-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Test Activities"]}),(0,cs.jsxs)("button",{className:"action-btn blue",onClick:async()=>{await ie()},children:[(0,cs.jsx)("svg",{className:"action-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),"Refresh"]})]})]}),(0,cs.jsxs)("div",{className:"health-indicators",children:[(0,cs.jsxs)("div",{className:"health-item",children:[(0,cs.jsx)("div",{className:"health-dot green"}),(0,cs.jsx)("span",{children:"Database"})]}),(0,cs.jsxs)("div",{className:"health-item",children:[(0,cs.jsx)("div",{className:"health-dot green"}),(0,cs.jsx)("span",{children:"API"})]}),(0,cs.jsxs)("div",{className:"health-item",children:[(0,cs.jsx)("div",{className:"health-dot green"}),(0,cs.jsx)("span",{children:"Frontend"})]})]}),(0,cs.jsxs)("div",{style:{marginTop:"12px",fontSize:"12px",color:"#64748b"},children:["Last updated: ",K]})]}),(0,cs.jsx)("div",{className:"kpi-section",children:(0,cs.jsxs)("div",{className:"kpi-grid",children:[(0,cs.jsxs)("div",{className:"kpi-card",children:[(0,cs.jsxs)("div",{className:"kpi-content",children:[(0,cs.jsxs)("div",{className:"kpi-header",children:[(0,cs.jsx)("h3",{children:u.totalBuses}),(0,cs.jsxs)("div",{className:"kpi-trend",children:[(0,cs.jsx)("svg",{className:"trend-icon up",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),(0,cs.jsx)("span",{children:"24 active, 0 new today"})]})]}),(0,cs.jsx)("p",{className:"kpi-label",children:"Total Buses"})]}),(0,cs.jsx)("div",{className:"kpi-icon blue",children:(0,cs.jsx)("svg",{className:"icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})})]}),(0,cs.jsxs)("div",{className:"kpi-card",children:[(0,cs.jsxs)("div",{className:"kpi-content",children:[(0,cs.jsxs)("div",{className:"kpi-header",children:[(0,cs.jsx)("h3",{children:u.activeTrips}),(0,cs.jsxs)("div",{className:"kpi-trend",children:[(0,cs.jsx)("svg",{className:"trend-icon up",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),(0,cs.jsx)("span",{children:"8 today, 0 completed"})]})]}),(0,cs.jsx)("p",{className:"kpi-label",children:"Running Trips"})]}),(0,cs.jsx)("div",{className:"kpi-icon green",children:(0,cs.jsx)("svg",{className:"icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})})})]}),(0,cs.jsxs)("div",{className:"kpi-card",children:[(0,cs.jsxs)("div",{className:"kpi-content",children:[(0,cs.jsxs)("div",{className:"kpi-header",children:[(0,cs.jsx)("h3",{children:(de=u.todayRevenue,new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(de))}),(0,cs.jsxs)("div",{className:"kpi-trend",children:[(0,cs.jsx)("svg",{className:"trend-icon up",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),(0,cs.jsx)("span",{children:"\u20b912,500 this week"})]})]}),(0,cs.jsx)("p",{className:"kpi-label",children:"Today's Revenue"})]}),(0,cs.jsx)("div",{className:"kpi-icon yellow",children:(0,cs.jsx)("svg",{className:"icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})})})]}),(0,cs.jsxs)("div",{className:"kpi-card",children:[(0,cs.jsxs)("div",{className:"kpi-content",children:[(0,cs.jsxs)("div",{className:"kpi-header",children:[(0,cs.jsx)("h3",{children:u.todayBookings}),(0,cs.jsxs)("div",{className:"kpi-trend",children:[(0,cs.jsx)("svg",{className:"trend-icon up",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),(0,cs.jsx)("span",{children:"45 bookings today"})]})]}),(0,cs.jsx)("p",{className:"kpi-label",children:"Pending Bookings"})]}),(0,cs.jsx)("div",{className:"kpi-icon red",children:(0,cs.jsx)("svg",{className:"icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]})}),(0,cs.jsxs)("div",{className:"charts-row",children:[(0,cs.jsxs)("div",{className:"chart-card",children:[(0,cs.jsx)("h4",{children:"Recent Activities"}),(0,cs.jsxs)("div",{className:"activities-list",children:[(0,cs.jsxs)("div",{className:"activity-item",children:[(0,cs.jsx)("div",{className:"activity-icon bus",children:(0,cs.jsx)("svg",{className:"icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})}),(0,cs.jsxs)("div",{className:"activity-content",children:[(0,cs.jsx)("div",{className:"activity-title",children:"Bus KL-01-AB-1234 departed"}),(0,cs.jsx)("div",{className:"activity-time",children:"2 minutes ago"})]}),(0,cs.jsx)("div",{className:"activity-status success",children:"On Time"})]}),(0,cs.jsxs)("div",{className:"activity-item",children:[(0,cs.jsx)("div",{className:"activity-icon booking",children:(0,cs.jsx)("svg",{className:"icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})}),(0,cs.jsxs)("div",{className:"activity-content",children:[(0,cs.jsx)("div",{className:"activity-title",children:"New booking received"}),(0,cs.jsx)("div",{className:"activity-time",children:"5 minutes ago"})]}),(0,cs.jsx)("div",{className:"activity-status info",children:"\u20b9450"})]}),(0,cs.jsxs)("div",{className:"activity-item",children:[(0,cs.jsx)("div",{className:"activity-icon maintenance",children:(0,cs.jsx)("svg",{className:"icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}),(0,cs.jsxs)("div",{className:"activity-content",children:[(0,cs.jsx)("div",{className:"activity-title",children:"Maintenance completed"}),(0,cs.jsx)("div",{className:"activity-time",children:"15 minutes ago"})]}),(0,cs.jsx)("div",{className:"activity-status success",children:"Complete"})]}),(0,cs.jsxs)("div",{className:"activity-item",children:[(0,cs.jsx)("div",{className:"activity-icon route",children:(0,cs.jsx)("svg",{className:"icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})})}),(0,cs.jsxs)("div",{className:"activity-content",children:[(0,cs.jsx)("div",{className:"activity-title",children:"Route updated"}),(0,cs.jsx)("div",{className:"activity-time",children:"1 hour ago"})]}),(0,cs.jsx)("div",{className:"activity-status info",children:"Route 101"})]})]})]}),(0,cs.jsxs)("div",{className:"chart-card",children:[(0,cs.jsx)("h4",{children:"Today's Performance"}),(0,cs.jsxs)("div",{className:"performance-metrics",children:[(0,cs.jsxs)("div",{className:"performance-item",children:[(0,cs.jsx)("div",{className:"performance-label",children:"On-Time Departures"}),(0,cs.jsxs)("div",{className:"performance-value",children:[(0,cs.jsx)("span",{className:"value",children:"92%"}),(0,cs.jsx)("span",{className:"trend up",children:"+3%"})]}),(0,cs.jsx)("div",{className:"performance-bar",children:(0,cs.jsx)("div",{className:"bar-fill",style:{width:"92%"}})})]}),(0,cs.jsxs)("div",{className:"performance-item",children:[(0,cs.jsx)("div",{className:"performance-label",children:"Customer Satisfaction"}),(0,cs.jsxs)("div",{className:"performance-value",children:[(0,cs.jsx)("span",{className:"value",children:"4.7/5"}),(0,cs.jsx)("span",{className:"trend up",children:"+0.2"})]}),(0,cs.jsx)("div",{className:"performance-bar",children:(0,cs.jsx)("div",{className:"bar-fill",style:{width:"94%"}})})]}),(0,cs.jsxs)("div",{className:"performance-item",children:[(0,cs.jsx)("div",{className:"performance-label",children:"Fuel Efficiency"}),(0,cs.jsxs)("div",{className:"performance-value",children:[(0,cs.jsx)("span",{className:"value",children:"8.2 km/L"}),(0,cs.jsx)("span",{className:"trend down",children:"-0.1"})]}),(0,cs.jsx)("div",{className:"performance-bar",children:(0,cs.jsx)("div",{className:"bar-fill",style:{width:"82%"}})})]}),(0,cs.jsxs)("div",{className:"performance-item",children:[(0,cs.jsx)("div",{className:"performance-label",children:"Seat Occupancy"}),(0,cs.jsxs)("div",{className:"performance-value",children:[(0,cs.jsx)("span",{className:"value",children:"78%"}),(0,cs.jsx)("span",{className:"trend up",children:"+5%"})]}),(0,cs.jsx)("div",{className:"performance-bar",children:(0,cs.jsx)("div",{className:"bar-fill",style:{width:"78%"}})})]})]})]})]})]}):(()=>{const e=le(),t=(0,cs.jsxs)("div",{className:"admin-loading",children:[(0,cs.jsx)("div",{className:"loading-spinner"}),(0,cs.jsx)("h3",{children:"Loading..."})]});switch(e){case"fleet":return(0,cs.jsx)(r.Suspense,{fallback:t,children:(0,cs.jsx)(Th,{})});case"routes":return(0,cs.jsx)(r.Suspense,{fallback:t,children:(0,cs.jsx)(Ph,{})});case"trips":return(0,cs.jsx)(r.Suspense,{fallback:t,children:(0,cs.jsx)(Eh,{})});case"bookings":return(0,cs.jsx)(r.Suspense,{fallback:t,children:(0,cs.jsx)(Dh,{})});case"staff":return(0,cs.jsx)(r.Suspense,{fallback:t,children:(0,cs.jsx)(Mh,{})});case"scheduling":return(0,cs.jsx)(r.Suspense,{fallback:t,children:(0,cs.jsx)(Oh,{})});case"reports":return(0,cs.jsx)(r.Suspense,{fallback:t,children:(0,cs.jsx)(Rh,{})});default:return null}})(),x&&(0,cs.jsxs)("div",{className:"profile-dropdown",children:[(0,cs.jsxs)("div",{className:"dropdown-header",children:[(0,cs.jsx)("div",{className:"dropdown-avatar",children:(null===n||void 0===n||null===(s=n.name)||void 0===s||null===(a=s.charAt(0))||void 0===a?void 0:a.toUpperCase())||"D"}),(0,cs.jsxs)("div",{className:"dropdown-user-info",children:[(0,cs.jsx)("div",{className:"dropdown-name",children:(null===n||void 0===n?void 0:n.name)||"Depot Manager"}),(0,cs.jsx)("div",{className:"dropdown-role",children:"Depot Manager"})]})]}),(0,cs.jsx)("div",{className:"dropdown-divider"}),(0,cs.jsxs)("div",{className:"dropdown-menu",children:[(0,cs.jsxs)("div",{className:"dropdown-item",onClick:()=>{g(!1)},children:[(0,cs.jsx)("svg",{className:"dropdown-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"View Profile"]}),(0,cs.jsxs)("div",{className:"dropdown-item",onClick:()=>{g(!1)},children:[(0,cs.jsx)("svg",{className:"dropdown-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z",clipRule:"evenodd"})}),"Edit Profile"]}),(0,cs.jsxs)("div",{className:"dropdown-item",onClick:()=>{g(!1)},children:[(0,cs.jsx)("svg",{className:"dropdown-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),"Account Settings"]}),(0,cs.jsxs)("div",{className:"dropdown-item",onClick:()=>{g(!1)},children:[(0,cs.jsx)("svg",{className:"dropdown-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})}),"Preferences"]}),(0,cs.jsxs)("div",{className:"dropdown-item",onClick:()=>{g(!1)},children:[(0,cs.jsx)("svg",{className:"dropdown-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})}),"Help & Support"]}),(0,cs.jsx)("div",{className:"dropdown-divider"}),(0,cs.jsxs)("div",{className:"dropdown-item logout-item",onClick:ce,children:[(0,cs.jsx)("svg",{className:"dropdown-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,cs.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z",clipRule:"evenodd"})}),"Logout"]})]})]}),f&&(0,cs.jsx)(Ch,{notifications:j,unreadCount:w,onClose:()=>y(!1),onMarkAsRead:e=>{N(t=>t.map(t=>t.id===e?(0,Ie.A)((0,Ie.A)({},t),{},{read:!0}):t)),k(e=>Math.max(0,e-1))},onMarkAllAsRead:()=>{N(e=>e.map(e=>(0,Ie.A)((0,Ie.A)({},e),{},{read:!0}))),k(0)}})]})]})});var de},Lh=(0,Ns.A)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Fh=(0,Ns.A)("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Bh=(0,Ns.A)("chart-line",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),zh=()=>{const[e,t]=(0,r.useState)({users:0,activeUsers:0,newUsersToday:0,newUsersThisWeek:0,totalTrips:0,tripsToday:0,runningTrips:0,completedTripsToday:0,scheduledTrips:0,totalRevenue:0,todayRevenue:0,weekRevenue:0,monthRevenue:0,totalBookings:0,bookingsToday:0,pendingBookings:0,confirmedBookings:0,cancelledBookings:0,totalBuses:0,activeBuses:0,busesInMaintenance:0,busesOnRoute:0,totalDrivers:0,activeDrivers:0,totalConductors:0,activeConductors:0,totalRoutes:0,activeRoutes:0,totalDepots:0,activeDepots:0,validationsToday:0,totalValidations:0,activeLocks:0,systemAlerts:0,occupancyRate:0,bookingSuccessRate:0,tripCompletionRate:0}),[s,a]=(0,r.useState)([]),[n,i]=(0,r.useState)({database:"healthy",api:"healthy",frontend:"healthy",lastCheck:new Date}),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)("all"),[u,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(m(),p(),u){const e=setInterval(()=>{m(),p()},15e3);return()=>clearInterval(e)}},[u]);const m=async()=>{try{l(!0),console.log("\ud83d\udd04 Fetching dashboard data...");const U=await(0,xs.nr)("/api/admin/dashboard");if(U.ok){var e,s,r,a,n,o,c,d,u,h,m,p,x,g,f,y,b,v,j,N,w,k,A,S,C,_,T,P,E,D,M,O,R,I,L,F,B,z;const l=U.data;console.log("\ud83d\udcca Dashboard data received:",{cached:l.cached||!1,processingTime:l.processingTime||"N/A",cacheAge:l.cacheAge||"N/A"}),t({users:(null===(e=l.kpis)||void 0===e?void 0:e.users)||0,activeUsers:(null===(s=l.kpis)||void 0===s?void 0:s.activeUsers)||0,newUsersToday:(null===(r=l.kpis)||void 0===r?void 0:r.newUsersToday)||0,newUsersThisWeek:(null===(a=l.kpis)||void 0===a?void 0:a.newUsersThisWeek)||0,totalTrips:(null===(n=l.kpis)||void 0===n?void 0:n.totalTrips)||0,tripsToday:(null===(o=l.kpis)||void 0===o?void 0:o.tripsToday)||0,runningTrips:(null===(c=l.kpis)||void 0===c?void 0:c.runningTrips)||0,completedTripsToday:(null===(d=l.kpis)||void 0===d?void 0:d.completedTripsToday)||0,scheduledTrips:(null===(u=l.kpis)||void 0===u?void 0:u.scheduledTrips)||0,totalRevenue:(null===(h=l.kpis)||void 0===h?void 0:h.totalRevenue)||0,todayRevenue:(null===(m=l.kpis)||void 0===m?void 0:m.todayRevenue)||0,weekRevenue:(null===(p=l.kpis)||void 0===p?void 0:p.weekRevenue)||0,monthRevenue:(null===(x=l.kpis)||void 0===x?void 0:x.monthRevenue)||0,totalBookings:(null===(g=l.kpis)||void 0===g?void 0:g.totalBookings)||0,bookingsToday:(null===(f=l.kpis)||void 0===f?void 0:f.bookingsToday)||0,pendingBookings:(null===(y=l.kpis)||void 0===y?void 0:y.pendingBookings)||0,confirmedBookings:(null===(b=l.kpis)||void 0===b?void 0:b.confirmedBookings)||0,cancelledBookings:(null===(v=l.kpis)||void 0===v?void 0:v.cancelledBookings)||0,totalBuses:(null===(j=l.kpis)||void 0===j?void 0:j.totalBuses)||0,activeBuses:(null===(N=l.kpis)||void 0===N?void 0:N.activeBuses)||0,busesInMaintenance:(null===(w=l.kpis)||void 0===w?void 0:w.busesInMaintenance)||0,busesOnRoute:(null===(k=l.kpis)||void 0===k?void 0:k.busesOnRoute)||0,totalDrivers:(null===(A=l.kpis)||void 0===A?void 0:A.totalDrivers)||0,activeDrivers:(null===(S=l.kpis)||void 0===S?void 0:S.activeDrivers)||0,totalConductors:(null===(C=l.kpis)||void 0===C?void 0:C.totalConductors)||0,activeConductors:(null===(_=l.kpis)||void 0===_?void 0:_.activeConductors)||0,totalRoutes:(null===(T=l.kpis)||void 0===T?void 0:T.totalRoutes)||0,activeRoutes:(null===(P=l.kpis)||void 0===P?void 0:P.activeRoutes)||0,totalDepots:(null===(E=l.kpis)||void 0===E?void 0:E.totalDepots)||0,activeDepots:(null===(D=l.kpis)||void 0===D?void 0:D.activeDepots)||0,validationsToday:(null===(M=l.kpis)||void 0===M?void 0:M.validationsToday)||0,totalValidations:(null===(O=l.kpis)||void 0===O?void 0:O.totalValidations)||0,activeLocks:(null===(R=l.kpis)||void 0===R?void 0:R.activeLocks)||0,systemAlerts:(null===(I=l.kpis)||void 0===I?void 0:I.systemAlerts)||0,occupancyRate:(null===(L=l.kpis)||void 0===L?void 0:L.occupancyRate)||0,bookingSuccessRate:(null===(F=l.kpis)||void 0===F?void 0:F.bookingSuccessRate)||0,tripCompletionRate:(null===(B=l.kpis)||void 0===B?void 0:B.tripCompletionRate)||0}),null!==l&&void 0!==l&&null!==(z=l.summary)&&void 0!==z&&z.systemHealth&&i(l.summary.systemHealth),console.log("\u2705 Dashboard stats updated successfully")}else console.error("\u274c Dashboard API error:",U.status,U.message)}catch(U){console.error("\ud83d\udca5 Error fetching dashboard data:",U)}finally{l(!1)}},p=async()=>{try{console.log("\ud83d\udd04 Fetching recent activities...");const s=await(0,xs.nr)("/api/admin/recent-activities");if(console.log("\ud83d\udce1 Recent activities response status:",s.status),s.ok){var e,t;const r=s.data;console.log("\ud83d\udcca Recent activities data:",{count:(null===(e=r.activities)||void 0===e?void 0:e.length)||0,processingTime:r.processingTime||"N/A",total:r.total||0}),a(r.activities||[]),console.log("\u2705 Recent activities updated:",(null===(t=r.activities)||void 0===t?void 0:t.length)||0,"activities")}else console.error("\u274c Recent activities failed:",s.status,s.message)}catch(s){console.error("\ud83d\udca5 Error fetching recent activities:",s)}},x=e=>({booking_created:Ss.A,trip_started:ks.A,trip_completed:jd.A,user_registered:bu.A,driver_assigned:Lh,conductor_assigned:Fh,route_created:As.A,depot_created:gs.A,payment_received:Es.A,system_alert:vd.A,backup_completed:Ds.A,maintenance_scheduled:sd.A}[e]||Ds.A),g=e=>{let{title:t,value:s,icon:r,color:a,change:n,subtitle:i}=e;return(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:s}),i&&(0,cs.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:i}),n&&(0,cs.jsxs)("div",{className:"flex items-center mt-2 text-sm ".concat(n>0?"text-green-600":"text-red-600"),children:[n>0?(0,cs.jsx)(xu.A,{className:"w-4 h-4 mr-1"}):(0,cs.jsx)(xu.A,{className:"w-4 h-4 mr-1 rotate-180"}),Math.abs(n),"% from last month"]})]}),(0,cs.jsx)("div",{className:"p-3 rounded-lg ".concat(a),children:(0,cs.jsx)(r,{className:"w-6 h-6 text-white"})})]})})},f=e=>{let{title:t,description:s,icon:r,action:a,color:n}=e;return(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all hover:scale-105 cursor-pointer",children:[(0,cs.jsx)("div",{className:"p-3 rounded-lg ".concat(n," w-fit mb-4"),children:(0,cs.jsx)(r,{className:"w-6 h-6 text-white"})}),(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t}),(0,cs.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:s}),(0,cs.jsxs)("button",{onClick:a,className:"text-blue-600 hover:text-blue-700 font-medium text-sm flex items-center",children:[t," ",(0,cs.jsx)(bu.A,{className:"w-4 h-4 ml-1"})]})]})};return o?(0,cs.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,cs.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"text-center lg:text-left",children:[(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Yatrik Admin Dashboard"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Welcome back! Here's what's happening with your system today."})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("button",{onClick:()=>{console.log("=== TESTING RECENT ACTIVITIES API ==="),p()},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Ds.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Test Activities"})]}),(0,cs.jsxs)("button",{onClick:m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Refresh"})]}),(0,cs.jsxs)("div",{className:"text-sm text-gray-500",children:["Last updated: ",(new Date).toLocaleTimeString()]})]})]}),(0,cs.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)(Ds.A,{className:"w-6 h-6 text-blue-600"}),(0,cs.jsx)("h2",{className:"text-xl font-semibold text-blue-900",children:"System Health"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("healthy"===n.database?"bg-green-500":"bg-red-500")}),(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:"Database"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("healthy"===n.api?"bg-green-500":"bg-red-500")}),(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:"API"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("healthy"===n.frontend?"bg-green-500":"bg-red-500")}),(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:"Frontend"})]})]})]})}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,cs.jsx)(g,{title:"Total Users",value:e.users.toLocaleString(),icon:Ss.A,color:"bg-blue-500",subtitle:"".concat(e.activeUsers," active, ").concat(e.newUsersToday," new today")}),(0,cs.jsx)(g,{title:"Running Trips",value:e.runningTrips,icon:ks.A,color:"bg-green-500",subtitle:"".concat(e.tripsToday," today, ").concat(e.completedTripsToday," completed")}),(0,cs.jsx)(g,{title:"Today's Revenue",value:"\u20b9".concat(e.todayRevenue.toLocaleString()),icon:Es.A,color:"bg-yellow-500",subtitle:"\u20b9".concat(e.weekRevenue.toLocaleString()," this week")}),(0,cs.jsx)(g,{title:"Pending Bookings",value:e.pendingBookings,icon:vd.A,color:"bg-red-500",subtitle:"".concat(e.bookingsToday," bookings today")})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Revenue Overview"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(js.A,{className:"w-5 h-5 text-gray-400"}),(0,cs.jsx)("span",{className:"text-sm text-gray-500",children:"Last 7 days"})]})]}),(0,cs.jsx)("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)(js.A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-500",children:"Revenue chart will be displayed here"}),(0,cs.jsx)("p",{className:"text-sm text-gray-400",children:"Integration with chart library required"})]})})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"User Activity"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(Bh,{className:"w-5 h-5 text-gray-400"}),(0,cs.jsx)("span",{className:"text-sm text-gray-500",children:"Real-time"})]})]}),(0,cs.jsx)("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)(Bh,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-500",children:"User activity chart will be displayed here"}),(0,cs.jsx)("p",{className:"text-sm text-gray-400",children:"Integration with chart library required"})]})})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Quick Actions"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,cs.jsx)(f,{title:"Add User",description:"Create new user accounts with specific roles and permissions",icon:Ss.A,color:"bg-blue-500",action:()=>window.location.href="/admin/users"}),(0,cs.jsx)(f,{title:"Enhanced Routes",description:"Create routes with multiple stops and auto-calculate fare matrix",icon:As.A,color:"bg-green-500",action:()=>window.location.href="/admin/streamlined-routes"}),(0,cs.jsx)(f,{title:"Enhanced Trips",description:"Schedule trips with auto-generated seating and stop-to-stop fares",icon:fs.A,color:"bg-purple-500",action:()=>window.location.href="/admin/streamlined-trips"}),(0,cs.jsx)(f,{title:"Bus Management",description:"Manage fleet, maintenance, and real-time monitoring",icon:ks.A,color:"bg-indigo-500",action:()=>window.location.href="/admin/buses"}),(0,cs.jsx)(f,{title:"Manage Depots",description:"Manage bus depots, capacity, and facilities",icon:gs.A,color:"bg-purple-500",action:()=>window.location.href="/admin/depot-management"}),(0,cs.jsx)(f,{title:"View Reports",description:"Access detailed analytics and performance reports",icon:js.A,color:"bg-orange-500",action:()=>window.location.href="/admin/reports"})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(u?"bg-green-500 animate-pulse":"bg-gray-400")}),(0,cs.jsx)("span",{className:"text-xs text-gray-500",children:u?"Live":"Paused"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"all",children:"All Activities"}),(0,cs.jsx)("option",{value:"bookings",children:"Bookings"}),(0,cs.jsx)("option",{value:"trips",children:"Trips"}),(0,cs.jsx)("option",{value:"users",children:"Users"}),(0,cs.jsx)("option",{value:"system",children:"System"}),(0,cs.jsx)("option",{value:"payments",children:"Payments"})]}),(0,cs.jsx)("button",{onClick:()=>h(!u),className:"px-3 py-1 text-sm rounded-lg transition-colors ".concat(u?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:u?"Live":"Paused"}),(0,cs.jsxs)("button",{onClick:p,className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center space-x-1",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Refresh"})]})]})]}),(0,cs.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:s.length>0?s.filter(e=>"all"===c||e.category===c).map((e,t)=>{const s=x(e.type),r={booking_created:"bg-blue-100 text-blue-600",trip_started:"bg-green-100 text-green-600",trip_completed:"bg-green-100 text-green-600",user_registered:"bg-purple-100 text-purple-600",driver_assigned:"bg-indigo-100 text-indigo-600",conductor_assigned:"bg-indigo-100 text-indigo-600",route_created:"bg-orange-100 text-orange-600",depot_created:"bg-teal-100 text-teal-600",payment_received:"bg-green-100 text-green-600",system_alert:"bg-red-100 text-red-600",backup_completed:"bg-blue-100 text-blue-600",maintenance_scheduled:"bg-yellow-100 text-yellow-600"}[e.type]||"bg-gray-100 text-gray-600";return(0,cs.jsxs)("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,cs.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(r),children:(0,cs.jsx)(s,{className:"w-5 h-5"})}),(0,cs.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title||e.description||"System Activity"}),(0,cs.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.details||e.message||"No additional details"}),(0,cs.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,cs.jsx)("span",{className:"text-xs text-gray-400",children:e.user||e.actor||"System"}),(0,cs.jsx)("span",{className:"text-xs text-gray-400",children:e.timestamp?new Date(e.timestamp).toLocaleString():e.createdAt?new Date(e.createdAt).toLocaleString():"Just now"})]})]}),"high"===e.priority&&(0,cs.jsx)("div",{className:"flex-shrink-0",children:(0,cs.jsx)(vd.A,{className:"w-4 h-4 text-red-500"})})]},e._id||t)}):(0,cs.jsxs)("div",{className:"text-center py-8",children:[(0,cs.jsx)(sd.A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-500",children:"No recent activities"}),(0,cs.jsx)("p",{className:"text-sm text-gray-400",children:"Activities will appear here as they happen"})]})}),(0,cs.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,cs.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-lg font-bold text-blue-600",children:s.filter(e=>"bookings"===e.category).length}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:"Bookings"})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-lg font-bold text-green-600",children:s.filter(e=>"trips"===e.category).length}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:"Trips"})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-lg font-bold text-purple-600",children:s.filter(e=>"users"===e.category).length}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:"Users"})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-lg font-bold text-orange-600",children:s.filter(e=>"system"===e.category).length}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:"System"})]})]})})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"System Alerts"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(vd.A,{className:"w-5 h-5 text-yellow-500"}),(0,cs.jsx)("span",{className:"text-sm text-yellow-600 font-medium",children:"2 Active Alerts"})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,cs.jsx)(vd.A,{className:"w-5 h-5 text-yellow-600"}),(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"High CPU Usage"}),(0,cs.jsx)("p",{className:"text-sm text-yellow-700",children:"Server CPU usage is at 85% - consider scaling"})]}),(0,cs.jsx)("span",{className:"text-sm text-yellow-600",children:"2 min ago"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4 p-4 bg-red-50 rounded-lg border border-red-200",children:[(0,cs.jsx)(vd.A,{className:"w-5 h-5 text-red-600"}),(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Database Connection Issues"}),(0,cs.jsx)("p",{className:"text-sm text-red-700",children:"Multiple failed connection attempts detected"})]}),(0,cs.jsx)("span",{className:"text-sm text-red-600",children:"15 min ago"})]})]})]})]})};var Uh=s(8693);const Vh=()=>{var e,t,s,a,n,i,o;const[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!0),[h,m]=(0,r.useState)(!1),[p,x]=(0,r.useState)(!1),[g,f]=(0,r.useState)(null);(0,r.useEffect)(()=>{y()},[]);const y=async()=>{try{u(!0);const e=await(0,xs.nr)("/api/admin/config");c(e),f(JSON.parse(JSON.stringify(e)))}catch(e){console.error("Failed to fetch config:",e)}finally{u(!1)}},b=()=>!(!g||!l)&&JSON.stringify(g)!==JSON.stringify(l),v=(e,t)=>{const s=e.split(".");c(e=>{const r=(0,Ie.A)({},e);let a=r;for(let t=0;t<s.length-1;t++)a=a[s[t]];return a[s[s.length-1]]=t,r})};return d?(0,cs.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,cs.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-accent"})}):(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50 p-6",children:[(0,cs.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,cs.jsx)(ed.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"System Configuration"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Manage global system settings and features"})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-3",children:[b()&&(0,cs.jsxs)("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-4 py-2 bg-yellow-100 text-yellow-800 rounded-xl hover:bg-yellow-200 transition-colors",children:[(0,cs.jsx)(vd.A,{className:"w-4 h-4"}),"View Changes"]}),(0,cs.jsxs)("button",{onClick:()=>{c(JSON.parse(JSON.stringify(g))),x(!1)},disabled:!b(),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4"}),"Reset"]}),(0,cs.jsxs)("button",{onClick:async()=>{try{m(!0),await(0,xs.nr)("/api/admin/config",{method:"PUT",body:JSON.stringify(l)}),f(JSON.parse(JSON.stringify(l))),x(!1),alert("Configuration saved successfully!")}catch(e){console.error("Failed to save config:",e),alert("Failed to save configuration")}finally{m(!1)}},disabled:!b()||h,className:"flex items-center gap-2 px-4 py-2 bg-accent text-white rounded-xl hover:bg-accent-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[h?(0,cs.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):(0,cs.jsx)(Uh.A,{className:"w-4 h-4"}),h?"Saving...":"Save Changes"]})]})]})}),(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[(0,cs.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,cs.jsx)(Ps,{className:"w-5 h-5 text-accent"}),"Authentication Settings"]}),(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"JWT Expiry (minutes)"}),(0,cs.jsx)("input",{type:"number",min:"5",max:"1440",value:(null===l||void 0===l?void 0:l.jwtExpiryMinutes)||30,onChange:e=>v("jwtExpiryMinutes",parseInt(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-accent focus:border-transparent"}),(0,cs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Token validity period in minutes (5-1440)"})]})})]}),(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[(0,cs.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,cs.jsx)(Rd,{className:"w-5 h-5 text-accent"}),"CORS Origins"]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allowed Origins (one per line)"}),(0,cs.jsx)("textarea",{value:(null===l||void 0===l||null===(e=l.corsOrigins)||void 0===e?void 0:e.join("\n"))||"",onChange:e=>v("corsOrigins",e.target.value.split("\n").filter(e=>e.trim())),rows:4,placeholder:"http://localhost:3000\nhttps://yourdomain.com",className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-accent focus:border-transparent"}),(0,cs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"One origin per line. Leave empty to allow all origins."})]})]}),(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[(0,cs.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,cs.jsx)(Os.A,{className:"w-5 h-5 text-accent"}),"Feature Toggles"]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-3",children:[(0,cs.jsx)(Ts.A,{className:"w-5 h-5 text-blue-600"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Passenger Module"})]}),(0,cs.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,cs.jsx)("input",{type:"checkbox",checked:(null===l||void 0===l||null===(t=l.features)||void 0===t?void 0:t.pax)||!1,onChange:e=>v("features.pax",e.target.checked),className:"sr-only peer"}),(0,cs.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-3",children:[(0,cs.jsx)(ks.A,{className:"w-5 h-5 text-green-600"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Driver Module"})]}),(0,cs.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,cs.jsx)("input",{type:"checkbox",checked:(null===l||void 0===l||null===(s=l.features)||void 0===s?void 0:s.driver)||!1,onChange:e=>v("features.driver",e.target.checked),className:"sr-only peer"}),(0,cs.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent"})]})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-3",children:[(0,cs.jsx)(Ts.A,{className:"w-5 h-5 text-purple-600"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Conductor Module"})]}),(0,cs.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,cs.jsx)("input",{type:"checkbox",checked:(null===l||void 0===l||null===(a=l.features)||void 0===a?void 0:a.occ)||!1,onChange:e=>v("features.occ",e.target.checked),className:"sr-only peer"}),(0,cs.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-3",children:[(0,cs.jsx)(_s,{className:"w-5 h-5 text-orange-600"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"ETM Module"})]}),(0,cs.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,cs.jsx)("input",{type:"checkbox",checked:(null===l||void 0===l||null===(n=l.features)||void 0===n?void 0:n.etm)||!1,onChange:e=>v("features.etm",e.target.checked),className:"sr-only peer"}),(0,cs.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent"})]})]})]})]})]}),(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[(0,cs.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,cs.jsx)(vd.A,{className:"w-5 h-5 text-accent"}),"Maintenance Mode"]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Enable Maintenance Mode"}),(0,cs.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,cs.jsx)("input",{type:"checkbox",checked:(null===l||void 0===l||null===(i=l.maintenance)||void 0===i?void 0:i.enabled)||!1,onChange:e=>v("maintenance.enabled",e.target.checked),className:"sr-only peer"}),(0,cs.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maintenance Message"}),(0,cs.jsx)("textarea",{value:(null===l||void 0===l||null===(o=l.maintenance)||void 0===o?void 0:o.message)||"",onChange:e=>v("maintenance.message",e.target.value),rows:3,placeholder:"System is under maintenance. Please try again later.",className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-accent focus:border-transparent"}),(0,cs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Message displayed to users when maintenance mode is enabled"})]})]})]})]})]}),p&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,cs.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Configuration Changes"}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,cs.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Before:"}),(0,cs.jsx)("pre",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:JSON.stringify(g,null,2)})]}),(0,cs.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,cs.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"After:"}),(0,cs.jsx)("pre",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:JSON.stringify(l,null,2)})]})]}),(0,cs.jsx)("div",{className:"flex justify-end gap-3 mt-6",children:(0,cs.jsx)("button",{onClick:()=>x(!1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors",children:"Close"})})]})})]})};var Kh=s(6533),Wh=s(9855);const Hh=()=>{const[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)(!1),[n,i]=(0,r.useState)(""),[o,l]=(0,r.useState)("all"),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null),[m,p]=(0,r.useState)(!1),[x,g]=(0,r.useState)({busType:"",routeType:"",ratePerKm:0,minimumFare:0,maximumFare:0,distanceBrackets:[{fromKm:0,toKm:50,ratePerKm:0,description:""}],timeBasedPricing:{morning:1,afternoon:1,evening:1,night:1},peakHourMultiplier:1,isActive:!0}),f=(0,r.useCallback)(async()=>{try{a(!0),console.log("\ud83d\udcb0 Fetching fare policies...");const e=await fetch("/api/admin/fare-policies",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(console.log("\ud83d\udce1 Fare policies response:",e.status),e.ok){const s=await e.json();console.log("\ud83d\udcca Fare policies data:",s),t(s.data||[])}else console.error("\u274c Fare policies failed:",e.status),await y(),t([{_id:"1",name:"City Center to Airport",description:"Standard fare policy for city to airport route",routeId:"route1",routeName:"City Center - Airport",depotId:"depot1",depotName:"Central Depot",baseFare:150,distanceFare:5,timeFare:2,peakHourMultiplier:1.2,weekendMultiplier:1.1,holidayMultiplier:1.3,studentDiscount:.1,seniorDiscount:.15,groupDiscount:.05,advanceBookingDiscount:.05,cancellationFee:.1,refundPolicy:"partial",validityStart:"2024-01-01",validityEnd:"2024-12-31",isActive:!0,conditions:["Valid ID required for discounts","Advance booking 24 hours"],createdAt:new Date,updatedAt:new Date},{_id:"2",name:"Intercity Express",description:"Premium fare policy for intercity routes",routeId:"route2",routeName:"City A - City B",depotId:"depot2",depotName:"North Depot",baseFare:300,distanceFare:8,timeFare:3,peakHourMultiplier:1.3,weekendMultiplier:1.2,holidayMultiplier:1.5,studentDiscount:.15,seniorDiscount:.2,groupDiscount:.1,advanceBookingDiscount:.08,cancellationFee:.15,refundPolicy:"full",validityStart:"2024-01-01",validityEnd:"2024-12-31",isActive:!0,conditions:["Minimum 2 passengers for group discount","Refund within 2 hours"],createdAt:new Date,updatedAt:new Date}])}catch(e){console.error("\ud83d\udca5 Error fetching fare policies:",e)}finally{a(!1)}},[]);(0,r.useEffect)(()=>{f()},[f]);const y=async()=>{try{console.log("\ud83d\ude80 Initializing default fare policies...");if((await fetch("/api/fare-policy/initialize-defaults",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).ok)return console.log("\u2705 Default fare policies initialized"),!0}catch(e){console.error("\u274c Error initializing default policies:",e)}return!1},b=()=>{g({busType:"",routeType:"",ratePerKm:0,minimumFare:0,maximumFare:0,distanceBrackets:[{fromKm:0,toKm:50,ratePerKm:0,description:""}],timeBasedPricing:{morning:1,afternoon:1,evening:1,night:1},peakHourMultiplier:1,isActive:!0})},v=e.filter(e=>{const t=e.busType&&e.busType.toLowerCase().includes(n.toLowerCase())||e.routeType&&e.routeType.toLowerCase().includes(n.toLowerCase()),s="all"===o||"active"===o&&e.isActive||"inactive"===o&&!e.isActive;return t&&s}),j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(e.ratePerKm||0)*t;return r=Math.max(r,e.minimumFare||0),s&&(r*=e.peakHourMultiplier||1),e.maximumFare&&e.maximumFare>0&&(r=Math.min(r,e.maximumFare)),Math.round(r)};return(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,cs.jsx)("div",{className:"px-6 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Fare Policy Management"}),(0,cs.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage pricing rules and fare policies for all routes"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("button",{onClick:f,className:"px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors",children:(0,cs.jsx)(Od.A,{className:"w-5 h-5"})}),(0,cs.jsxs)("button",{onClick:async()=>{try{console.log("\ud83e\uddea Testing Fare Policy API...");const t=await fetch("/api/admin/fare-policies",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(console.log("\ud83d\udce1 Fare Policy API response:",t.status),t.ok){var e;const s=await t.json();console.log("\ud83d\udcca Fare Policy data:",s),alert("Fare Policy API working! Found ".concat((null===(e=s.policies)||void 0===e?void 0:e.length)||0," policies."))}else alert("Fare Policy API failed: ".concat(t.status))}catch(t){console.error("\u274c Fare Policy API error:",t),alert("Fare Policy API error: "+t.message)}},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Es.A,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Test API"})]}),(0,cs.jsxs)("button",{onClick:async()=>{if(window.confirm("This will create default fare policies for all KSRTC bus types. Continue?"))try{a(!0);await y()?(alert("Default fare policies initialized successfully!"),f()):alert("Failed to initialize default policies")}catch(e){alert("Error initializing default policies: "+e.message)}finally{a(!1)}},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Os.A,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Initialize Defaults"})]}),(0,cs.jsxs)("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(bu.A,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"New Policy"})]})]})]})})}),(0,cs.jsxs)("div",{className:"px-6 py-6 space-y-6",children:[(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(ys.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search policies...",value:n,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,cs.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"all",children:"All Status"}),(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"inactive",children:"Inactive"})]}),(0,cs.jsxs)("button",{onClick:()=>p(!m),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center space-x-2",children:[(0,cs.jsx)(Os.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Bulk Edit"})]})]})}),(0,cs.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:v.map(s=>{var r,n,i;return(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[(0,cs.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:(i=s.busType,{ordinary:"Ordinary",lspf:"Limited Stop Fast Passenger",fast_passenger:"Fast Passenger",venad:"Venad",super_fast:"Super Fast",super_deluxe:"Super Deluxe",deluxe_express:"Deluxe Express",ananthapuri_fast:"Ananthapuri Fast",rajadhani:"Rajadhani",minnal:"Minnal",garuda_king_long:"Garuda King Long",garuda_volvo:"Garuda Volvo",garuda_scania:"Garuda Scania",garuda_maharaja:"Garuda Maharaja",low_floor_non_ac:"Low Floor Non-AC",low_floor_ac:"Low Floor AC",jnnurm_city:"JNNURM City Circular"}[i]||i)}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[(n=s.routeType,{local:"Local",city:"City",intercity:"Intercity",district:"District",long_distance:"Long Distance",interstate:"Interstate"}[n]||n)," Route"]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,cs.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:s.busType}),(0,cs.jsx)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:s.routeType}),(0,cs.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat(s.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:s.isActive?"Active":"Inactive"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,cs.jsx)("button",{onClick:()=>(e=>{h(e),g({busType:e.busType||"",routeType:e.routeType||"",baseFarePerKm:e.baseFarePerKm||0,minimumFare:e.minimumFare||0,maximumFare:e.maximumFare||0,distanceBrackets:e.distanceBrackets||[{fromKm:0,toKm:50,ratePerKm:0,description:""}],timeBasedPricing:e.timeBasedPricing||{morning:1,afternoon:1,evening:1,night:1},peakHourMultiplier:e.peakHourMultiplier||1,isActive:void 0===e.isActive||e.isActive})})(s),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",children:(0,cs.jsx)(Kh.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>(async s=>{if(window.confirm("Are you sure you want to delete this fare policy?"))try{a(!0),console.log("\ud83d\udcb0 Deleting fare policy:",s);const r=await fetch("/api/admin/fare-policies/".concat(s),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});r.ok?(console.log("\u2705 Fare policy deleted"),t(e.filter(e=>e._id!==s)),alert("Fare policy deleted successfully!")):(console.error("\u274c Delete failed:",r.status),alert("Failed to delete fare policy"))}catch(r){console.error("\ud83d\udca5 Delete error:",r),alert("Error deleting fare policy: "+r.message)}finally{a(!1)}})(s._id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:(0,cs.jsx)(Wh.A,{className:"w-4 h-4"})})]})]}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Base Rate"}),(0,cs.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:["\u20b9",s.ratePerKm,"/km"]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Minimum Fare"}),(0,cs.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:["\u20b9",s.minimumFare]})]})]}),s.maximumFare&&(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Maximum Fare"}),(0,cs.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:["\u20b9",s.maximumFare]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Peak Multiplier"}),(0,cs.jsxs)("p",{className:"text-sm font-medium text-orange-600",children:[s.peakHourMultiplier,"x"]})]})]}),(0,cs.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,cs.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Sample Fare (10km, Peak Hour)"}),(0,cs.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:["\u20b9",j(s,10,!0)]})]})]}),(0,cs.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,cs.jsxs)("span",{children:["Distance Brackets: ",(null===(r=s.distanceBrackets)||void 0===r?void 0:r.length)||0]}),(0,cs.jsxs)("span",{children:["Created: ",new Date(s.createdAt||Date.now()).toLocaleDateString()]})]})})]},s._id)})}),0===v.length&&(0,cs.jsxs)("div",{className:"text-center py-12",children:[(0,cs.jsx)(Es.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No fare policies found"}),(0,cs.jsx)("p",{className:"text-gray-600 mb-4",children:"Create your first fare policy to get started"}),(0,cs.jsx)("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Fare Policy"})]})]}),(c||u)&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,cs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:u?"Edit Fare Policy":"Create New Fare Policy"}),(0,cs.jsx)("button",{onClick:()=>{d(!1),h(null),b()},className:"text-gray-400 hover:text-gray-600",children:(0,cs.jsx)(Bs.A,{className:"w-6 h-6"})})]})}),(0,cs.jsxs)("div",{className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bus Type"}),(0,cs.jsxs)("select",{value:x.busType,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{busType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"",children:"Select Bus Type"}),(0,cs.jsx)("option",{value:"ordinary",children:"Ordinary"}),(0,cs.jsx)("option",{value:"lspf",children:"Limited Stop Fast Passenger"}),(0,cs.jsx)("option",{value:"fast_passenger",children:"Fast Passenger"}),(0,cs.jsx)("option",{value:"venad",children:"Venad"}),(0,cs.jsx)("option",{value:"super_fast",children:"Super Fast"}),(0,cs.jsx)("option",{value:"super_deluxe",children:"Super Deluxe"}),(0,cs.jsx)("option",{value:"deluxe_express",children:"Deluxe Express"}),(0,cs.jsx)("option",{value:"ananthapuri_fast",children:"Ananthapuri Fast"}),(0,cs.jsx)("option",{value:"rajadhani",children:"Rajadhani"}),(0,cs.jsx)("option",{value:"minnal",children:"Minnal"}),(0,cs.jsx)("option",{value:"garuda_king_long",children:"Garuda King Long"}),(0,cs.jsx)("option",{value:"garuda_volvo",children:"Garuda Volvo"}),(0,cs.jsx)("option",{value:"garuda_scania",children:"Garuda Scania"}),(0,cs.jsx)("option",{value:"garuda_maharaja",children:"Garuda Maharaja"}),(0,cs.jsx)("option",{value:"low_floor_non_ac",children:"Low Floor Non-AC"}),(0,cs.jsx)("option",{value:"low_floor_ac",children:"Low Floor AC"}),(0,cs.jsx)("option",{value:"jnnurm_city",children:"JNNURM City Circular"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Route Type"}),(0,cs.jsxs)("select",{value:x.routeType,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{routeType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"",children:"Select Route Type"}),(0,cs.jsx)("option",{value:"local",children:"Local"}),(0,cs.jsx)("option",{value:"city",children:"City"}),(0,cs.jsx)("option",{value:"intercity",children:"Intercity"}),(0,cs.jsx)("option",{value:"district",children:"District"}),(0,cs.jsx)("option",{value:"long_distance",children:"Long Distance"}),(0,cs.jsx)("option",{value:"interstate",children:"Interstate"})]})]})]}),(0,cs.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Fare Structure"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Base Fare/Km (\u20b9)"}),(0,cs.jsx)("input",{type:"number",step:"0.1",value:x.baseFarePerKm,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{baseFarePerKm:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Fare (\u20b9)"}),(0,cs.jsx)("input",{type:"number",value:x.minimumFare,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{minimumFare:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Fare (\u20b9) - Optional"}),(0,cs.jsx)("input",{type:"number",value:x.maximumFare,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{maximumFare:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0"})]})]})]}),(0,cs.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Time-based Pricing"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Morning (6AM-12PM)"}),(0,cs.jsx)("input",{type:"number",step:"0.1",value:x.timeBasedPricing.morning,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{timeBasedPricing:(0,Ie.A)((0,Ie.A)({},x.timeBasedPricing),{},{morning:parseFloat(e.target.value)||1})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Afternoon (12PM-6PM)"}),(0,cs.jsx)("input",{type:"number",step:"0.1",value:x.timeBasedPricing.afternoon,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{timeBasedPricing:(0,Ie.A)((0,Ie.A)({},x.timeBasedPricing),{},{afternoon:parseFloat(e.target.value)||1})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Evening (6PM-10PM)"}),(0,cs.jsx)("input",{type:"number",step:"0.1",value:x.timeBasedPricing.evening,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{timeBasedPricing:(0,Ie.A)((0,Ie.A)({},x.timeBasedPricing),{},{evening:parseFloat(e.target.value)||1})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Night (10PM-6AM)"}),(0,cs.jsx)("input",{type:"number",step:"0.1",value:x.timeBasedPricing.night,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{timeBasedPricing:(0,Ie.A)((0,Ie.A)({},x.timeBasedPricing),{},{night:parseFloat(e.target.value)||1})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,cs.jsxs)("div",{className:"mt-4",children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Peak Hour Multiplier"}),(0,cs.jsx)("input",{type:"number",step:"0.1",value:x.peakHourMultiplier,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{peakHourMultiplier:parseFloat(e.target.value)||1})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,cs.jsx)("div",{className:"flex items-center space-x-4",children:(0,cs.jsxs)("label",{className:"flex items-center",children:[(0,cs.jsx)("input",{type:"checkbox",checked:x.isActive,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{isActive:e.target.checked})),className:"mr-2"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Active Policy"})]})})]}),(0,cs.jsxs)("div",{className:"p-6 border-t border-gray-200 flex justify-end space-x-3",children:[(0,cs.jsx)("button",{onClick:()=>{d(!1),h(null),b()},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,cs.jsxs)("button",{onClick:u?async()=>{try{a(!0),console.log("\ud83d\udcb0 Updating fare policy:",u._id,x);const s=await fetch("/api/admin/fare-policies/".concat(u._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(x)});if(s.ok){const r=await s.json();console.log("\u2705 Fare policy updated:",r),t(e.map(e=>e._id===u._id?r.policy:e)),h(null),b(),alert("Fare policy updated successfully!")}else console.error("\u274c Update failed:",s.status),alert("Failed to update fare policy")}catch(s){console.error("\ud83d\udca5 Update error:",s),alert("Error updating fare policy: "+s.message)}finally{a(!1)}}:async()=>{try{a(!0),console.log("\ud83d\udcb0 Creating fare policy:",x);const s=await fetch("/api/admin/fare-policies",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(x)});if(s.ok){const r=await s.json();console.log("\u2705 Fare policy created:",r),t([...e,r.policy]),d(!1),b(),alert("Fare policy created successfully!")}else console.error("\u274c Create failed:",s.status),alert("Failed to create fare policy")}catch(s){console.error("\ud83d\udca5 Create error:",s),alert("Error creating fare policy: "+s.message)}finally{a(!1)}},disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s?(0,cs.jsx)(Od.A,{className:"w-4 h-4 animate-spin"}):(0,cs.jsx)(Uh.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:[u?"Update":"Create"," Policy"]})]})]})]})})]})},qh=(0,Ns.A)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Gh=(0,Ns.A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),Yh=()=>{const[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)("all"),[u,h]=(0,r.useState)("all"),[m,p]=(0,r.useState)([]),[x,g]=(0,r.useState)(!1),[f,y]=(0,r.useState)(null),[b,v]=(0,r.useState)(null),[j,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)(null),[A,S]=(0,r.useState)({name:"",email:"",phone:"",role:"passenger",status:"active",password:"",address:"",emergencyContact:"",dateOfBirth:"",gender:""});(0,r.useEffect)(()=>{C()},[]),(0,r.useEffect)(()=>{_()},[e,o,c,u]);const C=async()=>{try{i(!0);const e=localStorage.getItem("token")||localStorage.getItem("depotToken"),s=await fetch("/api/admin/users",{headers:{Authorization:e?"Bearer ".concat(e):""}});if(s.ok){const e=await s.json();t(e.users||[])}else console.error("Failed to fetch users")}catch(e){console.error("Error fetching users:",e)}finally{i(!1)}},_=()=>{if(!Array.isArray(e))return void a([]);let t=[...e];o&&(t=t.filter(e=>{var t,s,r;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(o.toLowerCase()))||(null===(s=e.email)||void 0===s?void 0:s.toLowerCase().includes(o.toLowerCase()))||(null===(r=e.phone)||void 0===r?void 0:r.includes(o))})),"all"!==c&&(t=t.filter(e=>e.role===c)),"all"!==u&&(t=t.filter(e=>e.status===u)),a(t)},T=()=>{S({name:"",email:"",phone:"",role:"passenger",status:"active",password:"",address:"",emergencyContact:"",dateOfBirth:"",gender:""})},P=e=>{const t={admin:{color:"bg-red-100 text-red-800 border-red-200",label:"Admin",icon:Ps},passenger:{color:"bg-blue-100 text-blue-800 border-blue-200",label:"Passenger",icon:Ss.A},driver:{color:"bg-green-100 text-green-800 border-green-200",label:"Driver",icon:ks.A},conductor:{color:"bg-purple-100 text-purple-800 border-purple-200",label:"Conductor",icon:As.A},depot_manager:{color:"bg-orange-100 text-orange-800 border-orange-200",label:"Depot Manager",icon:_s}}[e]||{color:"bg-gray-100 text-gray-800 border-gray-200",label:e,icon:Ss.A},s=t.icon;return(0,cs.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-medium border ".concat(t.color," flex items-center gap-1"),children:[(0,cs.jsx)(s,{className:"w-3 h-3"}),t.label]})},E=e=>{const t={active:{color:"bg-green-100 text-green-800 border-green-200",label:"Active",icon:jd.A},inactive:{color:"bg-gray-100 text-gray-800 border-gray-200",label:"Inactive",icon:qh},suspended:{color:"bg-red-100 text-red-800 border-red-200",label:"Suspended",icon:bh},pending:{color:"bg-yellow-100 text-yellow-800 border-yellow-200",label:"Pending",icon:sd.A}}[e]||{color:"bg-gray-100 text-gray-800 border-gray-200",label:e,icon:vd.A},s=t.icon;return(0,cs.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-medium border ".concat(t.color," flex items-center gap-1"),children:[(0,cs.jsx)(s,{className:"w-3 h-3"}),t.label]})};return n?(0,cs.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,cs.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"text-center lg:text-left",children:[(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Yatrik User Management"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Manage all users and their roles in the system"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("button",{onClick:()=>{const e=[["Name","Email","Phone","Role","Status","Address","Created Date"].join(","),...s.map(e=>[e.name,e.email,e.phone,e.role,e.status,e.address,new Date(e.createdAt).toLocaleDateString()].join(","))].join("\n"),t=new Blob([e],{type:"text/csv"}),r=window.URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download="users_".concat((new Date).toISOString().split("T")[0],".csv"),a.click(),window.URL.revokeObjectURL(r),alert("Users exported successfully")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(hd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Export"})]}),(0,cs.jsxs)("button",{onClick:()=>g(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(bu.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Add User"})]})]})]}),(0,cs.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,cs.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,cs.jsx)("div",{className:"flex-1",children:(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(ys.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search users by name, email, phone, or address...",value:o,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,cs.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"all",children:"All Roles"}),(0,cs.jsx)("option",{value:"admin",children:"Admin"}),(0,cs.jsx)("option",{value:"passenger",children:"Passenger"}),(0,cs.jsx)("option",{value:"driver",children:"Driver"}),(0,cs.jsx)("option",{value:"conductor",children:"Conductor"}),(0,cs.jsx)("option",{value:"depot_manager",children:"Depot Manager"})]}),(0,cs.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"all",children:"All Status"}),(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"inactive",children:"Inactive"}),(0,cs.jsx)("option",{value:"suspended",children:"Suspended"}),(0,cs.jsx)("option",{value:"pending",children:"Pending"})]}),(0,cs.jsxs)("button",{onClick:C,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Refresh"})]})]})}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,cs.jsx)("div",{className:"overflow-x-auto",children:(0,cs.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,cs.jsx)("thead",{className:"bg-gray-50",children:(0,cs.jsxs)("tr",{children:[(0,cs.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,cs.jsx)("input",{type:"checkbox",checked:Array.isArray(s)&&m.length===s.length&&s.length>0,onChange:e=>{e.target.checked&&Array.isArray(s)?p(s.map(e=>e._id)):p([])},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,cs.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,cs.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,cs.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,cs.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,cs.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,cs.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,cs.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Array.isArray(s)&&s.map(e=>{var t,s;return(0,cs.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,cs.jsx)("input",{type:"checkbox",checked:m.includes(e._id),onChange:t=>{t.target.checked?p([...m,e._id]):p(m.filter(t=>t!==e._id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-white font-semibold text-lg",children:(null===(t=e.name)||void 0===t||null===(s=t.charAt(0))||void 0===s?void 0:s.toUpperCase())||"U"})}),(0,cs.jsxs)("div",{className:"ml-4",children:[(0,cs.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:e.name}),(0,cs.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e._id.slice(-8)]}),e.address&&(0,cs.jsxs)("div",{className:"text-xs text-gray-400 flex items-center mt-1",children:[(0,cs.jsx)(gs.A,{className:"w-3 h-3 mr-1"}),e.address]})]})]})}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:P(e.role)}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:E(e.status)}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,cs.jsxs)("div",{className:"space-y-1",children:[(0,cs.jsxs)("div",{className:"flex items-center text-sm text-gray-900",children:[(0,cs.jsx)(Gh,{className:"w-4 h-4 mr-2 text-gray-400"}),e.email]}),(0,cs.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,cs.jsx)(ad,{className:"w-4 h-4 mr-2 text-gray-400"}),e.phone]})]})}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)(fs.A,{className:"w-4 h-4 mr-2 text-gray-400"}),new Date(e.createdAt).toLocaleDateString()]})}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>(e=>{v(e)})(e),className:"text-blue-600 hover:text-blue-900 p-2 rounded-lg hover:bg-blue-50 transition-colors",title:"View Details",children:(0,cs.jsx)(Nu.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>(e=>{y(e),S({name:e.name||"",email:e.email||"",phone:e.phone||"",role:e.role||"passenger",status:e.status||"active",password:"",address:e.address||"",emergencyContact:e.emergencyContact||"",dateOfBirth:e.dateOfBirth||"",gender:e.gender||""})})(e),className:"text-green-600 hover:text-green-900 p-2 rounded-lg hover:bg-green-50 transition-colors",title:"Edit User",children:(0,cs.jsx)(Kh.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>(e=>{k(e),N(!0)})(e),className:"text-red-600 hover:text-red-900 p-2 rounded-lg hover:bg-red-50 transition-colors",title:"Delete User",children:(0,cs.jsx)(Wh.A,{className:"w-4 h-4"})})]})})]},e._id)})})]})}),(!Array.isArray(s)||0===s.length)&&(0,cs.jsxs)("div",{className:"text-center py-12",children:[(0,cs.jsx)(Ss.A,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:Array.isArray(s)?"No users found":"Loading users..."}),(0,cs.jsx)("p",{className:"text-gray-500 mb-6",children:Array.isArray(s)?o||"all"!==c||"all"!==u?"Try adjusting your filters or search terms.":"Get started by creating your first user.":"Please wait while we fetch user data..."}),Array.isArray(s)&&0===s.length&&(0,cs.jsxs)("button",{onClick:()=>g(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[(0,cs.jsx)(bu.A,{className:"w-4 h-4 inline mr-2"}),"Add First User"]})]})]}),(x||f)&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,cs.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,cs.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:f?"Edit User":"Create New User"}),(0,cs.jsx)("p",{className:"text-gray-600 mt-2",children:f?"Update user information and permissions":"Add a new user to the system"})]}),(0,cs.jsxs)("form",{onSubmit:f?async e=>{e.preventDefault();try{const e=localStorage.getItem("token")||localStorage.getItem("depotToken"),t=await fetch("/api/admin/users/".concat(f._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:e?"Bearer ".concat(e):""},body:JSON.stringify(A)});if(t.ok)alert("User updated successfully"),y(null),T(),C();else{const e=await t.json();alert(e.error||"Failed to update user")}}catch(t){console.error("Error updating user:",t),alert("Error updating user")}}:async e=>{e.preventDefault();try{const e=localStorage.getItem("token")||localStorage.getItem("depotToken"),t=await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:e?"Bearer ".concat(e):""},body:JSON.stringify(A)});if(t.ok)alert("User created successfully"),g(!1),T(),l(""),d("all"),h("all"),C();else{const e=await t.json();alert(e.error||"Failed to create user")}}catch(t){console.error("Error creating user:",t),alert("Error creating user")}},className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),(0,cs.jsx)("input",{type:"text",required:!0,value:A.name,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter full name"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),(0,cs.jsx)("input",{type:"email",required:!0,value:A.email,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone *"}),(0,cs.jsx)("input",{type:"tel",required:!0,value:A.phone,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{phone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter phone number"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),(0,cs.jsxs)("select",{required:!0,value:A.role,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{role:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"passenger",children:"Passenger"}),(0,cs.jsx)("option",{value:"driver",children:"Driver"}),(0,cs.jsx)("option",{value:"conductor",children:"Conductor"}),(0,cs.jsx)("option",{value:"depot_manager",children:"Depot Manager"}),(0,cs.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,cs.jsxs)("select",{value:A.status,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"inactive",children:"Inactive"}),(0,cs.jsx)("option",{value:"suspended",children:"Suspended"}),(0,cs.jsx)("option",{value:"pending",children:"Pending"})]})]}),!f&&(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),(0,cs.jsx)("input",{type:"password",required:!0,value:A.password,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{password:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter password"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,cs.jsx)("button",{type:"button",onClick:()=>{g(!1),y(null),T()},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,cs.jsx)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:f?"Update User":"Create User"})]})]})]})}),j&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:(0,cs.jsxs)("div",{className:"p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,cs.jsx)(vd.A,{className:"w-6 h-6 text-red-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete User"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"This action cannot be undone."})]})]}),(0,cs.jsxs)("p",{className:"text-gray-700 mb-6",children:["Are you sure you want to delete ",(0,cs.jsx)("strong",{children:null===w||void 0===w?void 0:w.name}),"? This will permanently remove their account and all associated data."]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,cs.jsx)("button",{onClick:()=>N(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,cs.jsx)("button",{onClick:async()=>{if(w)try{const e=localStorage.getItem("token")||localStorage.getItem("depotToken"),t=await fetch("/api/admin/users/".concat(w._id),{method:"DELETE",headers:{Authorization:e?"Bearer ".concat(e):""}});if(t.ok)alert("User deleted successfully"),N(!1),k(null),C();else{const e=await t.json();alert(e.error||"Failed to delete user")}}catch(e){console.error("Error deleting user:",e),alert("Error deleting user")}},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete User"})]})]})})})]})},$h=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")},Jh=(e,t)=>{const s=$h(e)||$h(t)||"depot";return"depot-".concat(s,"@yatrik.com")},Qh=()=>{var e,t,s,a,n,i,o,l,c,d,u,h,m;const p=te(),[x,g]=(0,r.useState)([]),[f,y]=(0,r.useState)([]),[b,v]=(0,r.useState)(!0),[j,N]=(0,r.useState)(null),[w,k]=(0,r.useState)(!1),[A,S]=(0,r.useState)(!1),[C,_]=(0,r.useState)(null),[T,P]=(0,r.useState)(!1),[E,D]=(0,r.useState)(null),[M,O]=(0,r.useState)(!1),[R,I]=(0,r.useState)(""),[L,F]=(0,r.useState)("all"),[B,z]=(0,r.useState)({code:"",name:"",address:{street:"",city:"",state:"",pincode:""},contact:{phone:"",email:""},manager:"",capacity:{buses:0,staff:0},status:"active",createLogin:!1,login:{email:"",password:""},assignedStaff:[]}),U=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{v(!0),e||(0,xs.I3)();const r=Date.now(),[a,n]=await Promise.all([(0,xs.nr)("/api/admin/depots?showAll=".concat(M,"&_=").concat(r)),(0,xs.nr)("/api/admin/users?_=".concat(r))]);if(null!==a&&void 0!==a&&a.ok){var t;const e=a.data||{},s=e.depots||(null===(t=e.data)||void 0===t?void 0:t.depots)||[];console.log("\ud83c\udfe2 Raw depot data from API:",s);const r=(s||[]).map(e=>{var t,s,r,a,n,i,o,l,c,d;return{_id:e._id||e.id,code:e.code||e.depotCode||"",name:e.name||e.depotName||e.code||"Depot",address:{street:(null===(t=e.address)||void 0===t?void 0:t.street)||(null===(s=e.location)||void 0===s?void 0:s.address)||"Address not available",city:(null===(r=e.address)||void 0===r?void 0:r.city)||(null===(a=e.location)||void 0===a?void 0:a.city)||"City not available",state:(null===(n=e.address)||void 0===n?void 0:n.state)||(null===(i=e.location)||void 0===i?void 0:i.state)||"State not available",pincode:(null===(o=e.address)||void 0===o?void 0:o.pincode)||(null===(l=e.location)||void 0===l?void 0:l.pincode)||"000000"},contact:{phone:(null===(c=e.contact)||void 0===c?void 0:c.phone)||"Contact not available",email:(null===(d=e.contact)||void 0===d?void 0:d.email)||"Email not available"},manager:e.manager||e.createdBy||null,capacity:e.capacity||{buses:0,staff:0},status:e.status||"active",createdAt:e.createdAt}});console.log("\ud83c\udfe2 Normalized depot data:",r),g(r)}else g([]);if(null!==n&&void 0!==n&&n.ok){var s;const e=n.data||{},t=(e.users||(null===(s=e.data)||void 0===s?void 0:s.users)||[]||[]).map(e=>{var t;return{_id:e._id||e.id,name:e.name||e.fullName||"Unnamed",email:e.email||"",phone:e.phone||"",role:e.role||"user",depotId:e.depotId||("object"===typeof e.depot?null===(t=e.depot)||void 0===t?void 0:t._id:e.depot)||null,status:e.status||"active"}});console.log("\ud83d\udc65 All users loaded:",t),console.log("\ud83d\udc65 Users with depot assignments:",t.filter(e=>e.depotId)),y(t)}else y([])}catch(r){console.error("\u274c Error fetching data:",r),alert("Network error while fetching data. Please check your connection.")}finally{v(!1)}},[M]);(0,r.useEffect)(()=>{if(!B.createLogin)return;const e=Jh(B.code,B.name);z(t=>(0,Ie.A)((0,Ie.A)({},t),{},{login:(0,Ie.A)((0,Ie.A)({},t.login),{},{email:e})}))},[B.createLogin,B.name,B.code]),(0,r.useEffect)(()=>{U()},[M,U]),(0,r.useEffect)(()=>{const e=setInterval(()=>{U(!0)},3e4);return()=>clearInterval(e)},[U]);const V=e=>{var t,s;console.log("\ud83d\udd0d Opening edit for depot:",e),N(e);const r=W(e._id);console.log("\ud83d\udc65 Current staff for depot:",r),console.log("\ud83d\udc65 Staff IDs to assign:",r.map(e=>e._id)),z({code:e.depotCode||e.code||"",name:e.depotName||e.name||"",address:e.location||e.address||{street:"",city:"",state:"",pincode:""},contact:e.contact||{phone:"",email:""},manager:(null===(t=e.contact)||void 0===t||null===(s=t.manager)||void 0===s?void 0:s.name)||e.manager||"",capacity:e.capacity||{buses:0,staff:0},status:e.status||"active",createLogin:!1,login:{email:"",password:""},assignedStaff:r.map(e=>e._id)})},K=()=>{z({code:"",name:"",address:{street:"",city:"",state:"",pincode:""},contact:{phone:"",email:""},manager:"",capacity:{buses:0,staff:0},status:"active",createLogin:!1,login:{email:"",password:""},assignedStaff:[]})},W=e=>{const t=f.filter(t=>t.depotId===e&&["conductor","driver","depot_manager"].includes(t.role));return console.log("\ud83d\udd0d Users for depot ".concat(e,":"),t),t},H=e=>{if(!e)return"Unassigned";const t=x.find(t=>t._id===e);return t?t.depotName||t.name:"Unknown Depot"},q=e=>{const t={active:{color:"bg-green-100 text-green-800 border-green-200",icon:jd.A},inactive:{color:"bg-red-100 text-red-800 border-red-200",icon:bh}}[e]||{color:"bg-gray-100 text-gray-800 border-gray-200",icon:vd.A},s=t.icon;return(0,cs.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium border ".concat(t.color," flex items-center gap-1"),children:[(0,cs.jsx)(s,{className:"w-3 h-3"}),e]})},G=e=>{const t={conductor:{color:"bg-purple-100 text-purple-800 border-purple-200",label:"Conductor"},driver:{color:"bg-green-100 text-green-800 border-green-200",label:"Driver"},depot_manager:{color:"bg-orange-100 text-orange-800 border-orange-200",label:"Depot Manager"}}[e]||{color:"bg-gray-100 text-gray-800 border-gray-200",label:e};return(0,cs.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium border ".concat(t.color),children:t.label})};return b?(0,cs.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,cs.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Depot Management"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Manage bus depots and provision depot manager login"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("button",{onClick:U,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2",title:"Refresh data",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Refresh"})]}),(0,cs.jsxs)("button",{onClick:()=>{const e=[["Depot Code","Depot Name","Address","Phone","Email","Manager","Capacity","Status","Conductors","Drivers","Depot Managers"].join(","),...x.map(e=>{var t,s,r,a,n,i,o;const l=W(e._id),c=l.filter(e=>"conductor"===e.role).length,d=l.filter(e=>"driver"===e.role).length,u=l.filter(e=>"depot_manager"===e.role).length,h=null!==(t=e.address)&&void 0!==t&&t.street?"".concat(e.address.street,", ").concat(e.address.city,", ").concat(e.address.state," - ").concat(e.address.pincode):"Address not available";return[e.depotCode||e.code,e.depotName||e.name,h,(null===(s=e.contact)||void 0===s?void 0:s.phone)||"N/A",(null===(r=e.contact)||void 0===r?void 0:r.email)||"N/A",(null===(a=e.contact)||void 0===a||null===(n=a.manager)||void 0===n?void 0:n.name)||e.manager||"N/A",null!==(i=e.capacity)&&void 0!==i&&i.totalBuses||null!==(o=e.capacity)&&void 0!==o&&o.buses?"".concat(e.capacity.totalBuses||e.capacity.buses," buses"):"N/A",e.status,c,d,u].join(",")})].join("\n"),t=new Blob([e],{type:"text/csv"}),s=window.URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download="depots_".concat((new Date).toISOString().split("T")[0],".csv"),r.click(),window.URL.revokeObjectURL(s),alert("Depot data exported successfully")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2",title:"Export depot data",children:[(0,cs.jsx)(hd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Export"})]}),(0,cs.jsxs)("button",{onClick:()=>p("/admin/depot-management"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(bu.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Add Depot"})]})]})]}),(0,cs.jsx)("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:(0,cs.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,cs.jsx)("div",{className:"flex-1",children:(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(ys.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search depots by name, code, or address...",value:R,onChange:e=>I(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,cs.jsxs)("select",{value:L,onChange:e=>F(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"all",children:"All Roles"}),(0,cs.jsx)("option",{value:"conductor",children:"Conductors"}),(0,cs.jsx)("option",{value:"driver",children:"Drivers"}),(0,cs.jsx)("option",{value:"depot_manager",children:"Depot Managers"})]}),(0,cs.jsxs)("select",{value:B.status,onChange:e=>z(t=>(0,Ie.A)((0,Ie.A)({},t),{},{status:e.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"all",children:"All Status"}),(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"inactive",children:"Inactive"})]}),(0,cs.jsxs)("button",{onClick:()=>O(!M),className:"px-4 py-2 border rounded-lg transition-colors flex items-center space-x-2 ".concat(M?"bg-gray-800 text-white border-gray-800 hover:bg-gray-700":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),title:M?"Hide inactive depots":"Show inactive depots",children:[(0,cs.jsx)(Nu.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:M?"Hide Inactive":"Show Inactive"})]}),(0,cs.jsxs)("button",{onClick:U,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Refresh"})]})]})}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("div",{className:"flex items-center justify-end",children:(0,cs.jsxs)("button",{onClick:()=>{U()},className:"px-3 py-2 text-sm bg-gray-100 rounded hover:bg-gray-200 flex items-center space-x-2",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Refresh"})]})}),x.filter(e=>{var t,s,r,a,n,i,o,l;return!R||(e.depotName||e.name||"").toLowerCase().includes(R.toLowerCase())||(e.depotCode||e.code||"").toLowerCase().includes(R.toLowerCase())||((null===(t=e.location)||void 0===t?void 0:t.address)||(null===(s=e.address)||void 0===s?void 0:s.street)||"").toLowerCase().includes(R.toLowerCase())||((null===(r=e.location)||void 0===r?void 0:r.city)||(null===(a=e.address)||void 0===a?void 0:a.city)||"").toLowerCase().includes(R.toLowerCase())||((null===(n=e.location)||void 0===n?void 0:n.state)||(null===(i=e.address)||void 0===i?void 0:i.state)||"").toLowerCase().includes(R.toLowerCase())||((null===(o=e.location)||void 0===o?void 0:o.pincode)||(null===(l=e.address)||void 0===l?void 0:l.pincode)||"").toLowerCase().includes(R.toLowerCase())}).map(e=>{var t,s,r,a;console.log("\ud83c\udfe2 Processing depot: ".concat(e.depotName||e.name," (ID: ").concat(e._id,")"));const n=W(e._id),i="all"===L?n:n.filter(e=>e.role===L);return console.log("\ud83d\udc65 Filtered users for ".concat(e.depotName||e.name,":"),i),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,cs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,cs.jsx)(_s,{className:"w-6 h-6 text-white"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:e.depotName||e.name}),q(e.status)]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,cs.jsxs)("span",{className:"font-medium",children:["Code: ",e.depotCode||e.code]}),(0,cs.jsxs)("span",{className:"flex items-center",children:[(0,cs.jsx)(gs.A,{className:"w-4 h-4 mr-1"}),null!==(t=e.address)&&void 0!==t&&t.street?"".concat(e.address.street,", ").concat(e.address.city,", ").concat(e.address.state," - ").concat(e.address.pincode):"Address not available"]}),(null===(s=e.contact)||void 0===s?void 0:s.phone)&&(0,cs.jsxs)("span",{className:"flex items-center",children:[(0,cs.jsx)(ad,{className:"w-4 h-4 mr-1"}),e.contact.phone]})]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:"Capacity"}),(0,cs.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:null!==(r=e.capacity)&&void 0!==r&&r.totalBuses||null!==(a=e.capacity)&&void 0!==a&&a.buses?"".concat(e.capacity.totalBuses||e.capacity.buses," buses"):"N/A"})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:"Staff"}),(0,cs.jsxs)("div",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[n.length,(0,cs.jsx)("button",{onClick:()=>{console.log("\ud83d\udd04 Manual refresh for depot:",e._id),U()},className:"ml-2 text-blue-500 hover:text-blue-700 p-1",title:"Refresh staff data",children:(0,cs.jsx)(Od.A,{className:"w-4 h-4"})})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>V(e),className:"text-green-600 hover:text-green-900 p-2 rounded-lg hover:bg-green-50 transition-colors",title:"Edit Depot",children:(0,cs.jsx)(Kh.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>(e=>{_(e),S(!0)})(e),className:"text-blue-600 hover:text-blue-900 p-2 rounded-lg hover:bg-blue-50 transition-colors",title:"View Depot",children:(0,cs.jsx)(Nu.A,{className:"w-4 h-4"})}),"active"===e.status?(0,cs.jsx)("button",{onClick:()=>(e=>{D(e),P(!0)})(e),className:"text-red-600 hover:text-red-900 p-2 rounded-lg hover:bg-red-50 transition-colors",title:"Delete Depot",children:(0,cs.jsx)(Wh.A,{className:"w-4 h-4"})}):(0,cs.jsx)("button",{onClick:()=>(async e=>{try{const t=await fetch("/api/admin/depots/".concat(e._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify((0,Ie.A)((0,Ie.A)({},e),{},{status:"active"}))});if(t.ok)g(t=>t.map(t=>t._id===e._id?(0,Ie.A)((0,Ie.A)({},t),{},{status:"active"}):t)),alert("Depot restored successfully");else{const e=await t.json();alert(e.error||"Failed to restore depot")}}catch(t){console.error("Error restoring depot:",t),alert("Error restoring depot")}})(e),className:"text-green-600 hover:text-green-900 p-2 rounded-lg hover:bg-green-50 transition-colors",title:"Restore Depot",children:(0,cs.jsx)(jd.A,{className:"w-4 h-4"})})]})]})]})}),i.length>0?(0,cs.jsxs)("div",{className:"p-6",children:[(0,cs.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Assigned Staff"}),(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(e=>{var t,s;return(0,cs.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,cs.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-white font-semibold text-sm",children:(null===(t=e.name)||void 0===t||null===(s=t.charAt(0))||void 0===s?void 0:s.toUpperCase())||"U"})}),(0,cs.jsx)("div",{children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,cs.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.email,")"]})]})})]})}),(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[G(e.role),q(e.status)]}),(0,cs.jsx)("div",{className:"mt-3 text-xs text-gray-500",children:(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)(ad,{className:"w-3 h-3 mr-1"}),e.phone]})})]},e._id)})})]}):(0,cs.jsxs)("div",{className:"p-6 text-center",children:[(0,cs.jsx)(Ss.A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-500",children:"all"===L?"No staff assigned to this depot":"No ".concat(L,"s assigned to this depot")}),(0,cs.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Assign staff members to get started"})]})]},e._id)})]}),0===x.length&&(0,cs.jsxs)("div",{className:"text-center py-12",children:[(0,cs.jsx)(_s,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No depots found"}),(0,cs.jsx)("p",{className:"text-gray-500 mb-6",children:"Get started by creating your first depot"}),(0,cs.jsxs)("button",{onClick:()=>p("/admin/depot-management"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[(0,cs.jsx)(bu.A,{className:"w-4 h-4 inline mr-2"}),"Add First Depot"]})]}),(w||j)&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-40",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto lg:ml-64",children:[(0,cs.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,cs.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:j?"Edit Depot":"Create New Depot"}),(0,cs.jsx)("p",{className:"text-gray-600 mt-2",children:j?"Update depot information":"Add a new depot to the system"})]}),(0,cs.jsxs)("form",{onSubmit:j?async e=>{if(e.preventDefault(),B.code&&B.name&&B.contact.phone)try{const e={depotCode:B.code,depotName:B.name,location:{address:B.address.street||"Address not provided",city:B.address.city||"City not provided",state:B.address.state||"State not provided",pincode:B.address.pincode||"000000"},contact:{phone:B.contact.phone,email:B.contact.email||"".concat(B.code.toLowerCase(),"@yatrik.com"),manager:{name:B.manager||""}},capacity:{totalBuses:parseInt(B.capacity.buses)||25,availableBuses:parseInt(B.capacity.buses)||25,maintenanceBuses:0},operatingHours:{openTime:"06:00",closeTime:"22:00",workingDays:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"]},facilities:[],status:B.status};console.log("\ud83d\udd04 Updating depot with staff assignments:",{depotId:j._id,assignedStaff:B.assignedStaff,staffCount:B.assignedStaff.length});const r=await fetch("/api/admin/depots/".concat(j._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify((0,Ie.A)((0,Ie.A)({},e),{},{assignedStaff:B.assignedStaff}))});if(r.ok){const e=await r.json();g(t=>t.map(t=>t._id===j._id?e.depot:t)),console.log("\ud83d\udd04 Refreshing data after depot update..."),await new Promise(e=>setTimeout(e,2e3)),console.log("\ud83d\udd04 Starting data refresh...");const a=Date.now(),[n,i]=await Promise.all([(0,xs.nr)("/api/admin/depots?showAll=".concat(M,"&_=").concat(a)),(0,xs.nr)("/api/admin/users?_=".concat(a))]);if(console.log("\ud83d\udd04 API responses:",{depotsRes:null===n||void 0===n?void 0:n.ok,usersRes:null===i||void 0===i?void 0:i.ok}),null!==n&&void 0!==n&&n.ok){var t;const e=n.data||{},s=e.depots||(null===(t=e.data)||void 0===t?void 0:t.depots)||[];console.log("\ud83d\udd04 Raw depot data from refresh:",s);const r=(s||[]).map(e=>{var t,s,r,a,n,i,o,l,c,d;return{_id:e._id||e.id,code:e.code||e.depotCode||"",name:e.name||e.depotName||e.code||"Depot",address:{street:(null===(t=e.address)||void 0===t?void 0:t.street)||(null===(s=e.location)||void 0===s?void 0:s.address)||"Address not available",city:(null===(r=e.address)||void 0===r?void 0:r.city)||(null===(a=e.location)||void 0===a?void 0:a.city)||"City not available",state:(null===(n=e.address)||void 0===n?void 0:n.state)||(null===(i=e.location)||void 0===i?void 0:i.state)||"State not available",pincode:(null===(o=e.address)||void 0===o?void 0:o.pincode)||(null===(l=e.location)||void 0===l?void 0:l.pincode)||"000000"},contact:{phone:(null===(c=e.contact)||void 0===c?void 0:c.phone)||"Contact not available",email:(null===(d=e.contact)||void 0===d?void 0:d.email)||"Email not available"},manager:e.manager||e.createdBy||null,capacity:e.capacity||{buses:0,staff:0},status:e.status||"active",createdAt:e.createdAt}});console.log("\ud83d\udd04 Updated depot data after assignment:",r),g(r)}else console.error("\u274c Failed to fetch depot data:",n);if(null!==i&&void 0!==i&&i.ok){var s;const e=i.data||{},t=e.users||(null===(s=e.data)||void 0===s?void 0:s.users)||[];console.log("\ud83d\udd04 Raw user data from refresh:",t);const r=(t||[]).map(e=>{var t;return{_id:e._id||e.id,name:e.name||e.fullName||"Unnamed",email:e.email||"",phone:e.phone||"",role:e.role||"user",depotId:e.depotId||("object"===typeof e.depot?null===(t=e.depot)||void 0===t?void 0:t._id:e.depot)||null,status:e.status||"active"}});console.log("\ud83d\udd04 Updated user data after assignment:",r),console.log("\ud83d\udd04 Users with depot assignments:",r.filter(e=>e.depotId)),y(r)}else console.error("\u274c Failed to fetch user data:",i);alert("Depot updated successfully! Assigned ".concat(B.assignedStaff.length," staff members to ").concat(B.name)),N(null),K(),setTimeout(()=>{console.log("\ud83d\udd04 Final refresh after alert..."),U()},500)}else{const e=await r.json();alert(e.error||"Failed to update depot")}}catch(r){console.error("Error updating depot:",r),alert("Error updating depot")}else alert("Please fill in all required fields (Code, Name, and Phone)")}:async e=>{if(e.preventDefault(),B.code&&B.name&&B.contact.phone)try{const e={depotCode:B.code,depotName:B.name,location:{address:B.address.street||"Address not provided",city:B.address.city||"City not provided",state:B.address.state||"State not provided",pincode:B.address.pincode||"000000"},contact:{phone:B.contact.phone,email:B.contact.email||"".concat(B.code.toLowerCase(),"@yatrik.com"),manager:{name:B.manager||""}},capacity:{totalBuses:parseInt(B.capacity.buses)||25,availableBuses:parseInt(B.capacity.buses)||25,maintenanceBuses:0},operatingHours:{openTime:"06:00",closeTime:"22:00",workingDays:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"]},facilities:[],createUserAccount:B.createLogin,userAccount:B.createLogin?{username:B.code.toLowerCase(),email:B.login.email||"".concat(B.code.toLowerCase(),"@yatrik.com"),password:B.login.password,role:"depot_manager",permissions:["manage_buses","view_buses","manage_routes","view_routes"]}:null},n=await fetch("/api/admin/depots",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(e)});if(n.ok){var t;const e=await n.json(),a=(null===e||void 0===e?void 0:e.depot)||(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.depot)||(null===e||void 0===e?void 0:e.data)||e,i=(null===a||void 0===a?void 0:a._id)||(null===a||void 0===a?void 0:a.id);if(g(e=>[a,...e]),B.createLogin){const t=B.login.email||Jh(B.code,B.name),a=B.login.password;if(!a||a.length<8)alert("Please set a temporary password (min 8 chars) for the depot login.");else if(i)try{const e=await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({name:B.manager||"".concat(B.name," Manager"),email:t,password:a,role:"depot_manager",depotId:i,status:"active"})});if(e.ok)alert("Depot created and login provisioned: ".concat(t));else{let t={};try{t=await e.json()}catch(s){}console.error("Failed to create depot login:",t),alert(t.error||t.message||"Depot created, but failed to create login. Check email uniqueness and password policy.")}}catch(r){console.error("Network error creating depot login:",r),alert("Depot created, but network error while creating login.")}else console.error("Could not resolve depotId from create response:",e),alert("Depot created, but could not create login because depotId was missing in the response.")}else alert("Depot created successfully");k(!1),K()}else{let e={};try{e=await n.json()}catch(a){}console.error("Error response creating depot:",e),alert(e.error||e.message||"Failed to create depot")}}catch(n){console.error("Error creating depot:",n),alert("Error creating depot")}else alert("Please fill in all required fields (Code, Name, and Phone)")},className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot Code *"}),(0,cs.jsx)("input",{type:"text",required:!0,value:B.code,onChange:e=>z(t=>(0,Ie.A)((0,Ie.A)({},t),{},{code:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., TVM, BLR"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot Name *"}),(0,cs.jsx)("input",{type:"text",required:!0,value:B.name,onChange:e=>z(t=>(0,Ie.A)((0,Ie.A)({},t),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Trivandrum Depot"})]}),(0,cs.jsxs)("div",{className:"md:col-span-2",children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address *"}),(0,cs.jsx)("textarea",{required:!0,value:B.address.street,onChange:e=>z(t=>(0,Ie.A)((0,Ie.A)({},t),{},{address:(0,Ie.A)((0,Ie.A)({},t.address),{},{street:e.target.value})})),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter street address"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),(0,cs.jsx)("input",{type:"text",required:!0,value:B.address.city,onChange:e=>z(t=>(0,Ie.A)((0,Ie.A)({},t),{},{address:(0,Ie.A)((0,Ie.A)({},t.address),{},{city:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter city name"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),(0,cs.jsx)("input",{type:"text",required:!0,value:B.address.state,onChange:e=>z(t=>(0,Ie.A)((0,Ie.A)({},t),{},{address:(0,Ie.A)((0,Ie.A)({},t.address),{},{state:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter state name"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pincode *"}),(0,cs.jsx)("input",{type:"text",required:!0,value:B.address.pincode,onChange:e=>z(t=>(0,Ie.A)((0,Ie.A)({},t),{},{address:(0,Ie.A)((0,Ie.A)({},t.address),{},{pincode:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter pincode",pattern:"[1-9][0-9]{5}",title:"Please enter a valid 6-digit pincode"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone *"}),(0,cs.jsx)("input",{type:"tel",required:!0,value:B.contact.phone,onChange:e=>z(t=>(0,Ie.A)((0,Ie.A)({},t),{},{contact:(0,Ie.A)((0,Ie.A)({},t.contact),{},{phone:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter phone number",pattern:"[6-9][0-9]{9}",title:"Please enter a valid 10-digit phone number starting with 6-9"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,cs.jsx)("input",{type:"email",value:B.login.email,onChange:e=>z(t=>(0,Ie.A)((0,Ie.A)({},t),{},{login:(0,Ie.A)((0,Ie.A)({},t.login),{},{email:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address",readOnly:!0})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Manager"}),(0,cs.jsx)("input",{type:"text",value:B.manager,onChange:e=>z(t=>(0,Ie.A)((0,Ie.A)({},t),{},{manager:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter manager name"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bus Capacity"}),(0,cs.jsx)("input",{type:"number",min:"0",value:B.capacity.buses,onChange:e=>z(t=>(0,Ie.A)((0,Ie.A)({},t),{},{capacity:(0,Ie.A)((0,Ie.A)({},t.capacity),{},{buses:parseInt(e.target.value)||0})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter bus capacity"})]})]}),(0,cs.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Assign Staff to Depot"}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Select Staff Members"}),(0,cs.jsxs)("span",{className:"text-sm text-gray-500",children:[B.assignedStaff.length," staff selected"]})]}),(0,cs.jsx)("div",{className:"border border-gray-200 rounded-lg max-h-64 overflow-y-auto",children:0===f.filter(e=>"driver"===e.role||"conductor"===e.role).length?(0,cs.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No drivers or conductors available"}):(0,cs.jsx)("div",{className:"divide-y divide-gray-200",children:f.filter(e=>"driver"===e.role||"conductor"===e.role).map(e=>{var t,s;return(0,cs.jsx)("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors ".concat(B.assignedStaff.includes(e._id)?"bg-blue-50 border-l-4 border-blue-500":""),onClick:()=>{z(t=>(0,Ie.A)((0,Ie.A)({},t),{},{assignedStaff:t.assignedStaff.includes(e._id)?t.assignedStaff.filter(t=>t!==e._id):[...t.assignedStaff,e._id]}))},children:(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("input",{type:"checkbox",checked:B.assignedStaff.includes(e._id),onChange:()=>{},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,cs.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-white font-semibold text-sm",children:(null===(t=e.name)||void 0===t||null===(s=t.charAt(0))||void 0===s?void 0:s.toUpperCase())||"U"})}),(0,cs.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,cs.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("driver"===e.role?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"),children:e.role}),(0,cs.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})]}),(0,cs.jsxs)("p",{className:"text-sm text-gray-500 truncate",children:[e.email," \u2022 ",e.phone]}),(0,cs.jsxs)("p",{className:"text-xs text-gray-400",children:[e.employeeCode||"No ID"," \u2022 Current Depot: ",H(e.depotId)]})]})]})},e._id)})})}),B.assignedStaff.length>0&&(0,cs.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Selected Staff:"}),(0,cs.jsx)("div",{className:"flex flex-wrap gap-2",children:B.assignedStaff.map(e=>{const t=f.find(t=>t._id===e);return t?(0,cs.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[t.name," (",t.role,")"]},e):null})})]})]})]}),(0,cs.jsxs)("div",{className:"rounded-lg border border-gray-200 p-4 bg-gray-50",children:[(0,cs.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm font-medium text-gray-700",children:[(0,cs.jsx)("input",{type:"checkbox",className:"rounded",checked:B.createLogin,onChange:e=>z(t=>(0,Ie.A)((0,Ie.A)({},t),{},{createLogin:e.target.checked}))}),"Create Depot Manager login now"]}),B.createLogin&&(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-3",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Depot Login Email *"}),(0,cs.jsx)("input",{type:"email",required:!0,value:B.login.email,onChange:e=>z(t=>(0,Ie.A)((0,Ie.A)({},t),{},{login:(0,Ie.A)((0,Ie.A)({},t.login),{},{email:e.target.value})})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"manager@depot.com"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Temporary Password *"}),(0,cs.jsx)("input",{type:"password",required:!0,value:B.login.password,onChange:e=>z(t=>(0,Ie.A)((0,Ie.A)({},t),{},{login:(0,Ie.A)((0,Ie.A)({},t.login),{},{password:e.target.value})})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Set temp password"}),(0,cs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Share these credentials with the depot. On first login, they\u2019ll be redirected to the Depot Dashboard."})]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,cs.jsx)("button",{type:"button",onClick:()=>{k(!1),N(null),K()},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,cs.jsx)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:j?"Update Depot":"Create Depot"})]})]})]})}),A&&C&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-40",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto lg:ml-64",children:[(0,cs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Depot Details"}),(0,cs.jsx)("p",{className:"text-gray-600 mt-2",children:"View complete depot information"})]}),(0,cs.jsx)("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600",children:(0,cs.jsx)(bh,{className:"w-6 h-6"})})]})}),(0,cs.jsxs)("div",{className:"p-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Basic Information"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Depot Code"}),(0,cs.jsx)("p",{className:"text-lg text-gray-900 font-mono bg-gray-50 px-3 py-2 rounded-lg",children:C.depotCode||C.code})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Depot Name"}),(0,cs.jsx)("p",{className:"text-lg text-gray-900",children:C.depotName||C.name})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,cs.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("active"===C.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:C.status})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Manager"}),(0,cs.jsx)("p",{className:"text-gray-900",children:C.manager||"Not assigned"})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Address"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Street"}),(0,cs.jsx)("p",{className:"text-gray-900",children:(null===(e=C.location)||void 0===e?void 0:e.address)||(null===(t=C.address)||void 0===t?void 0:t.street)||"Not specified"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),(0,cs.jsx)("p",{className:"text-gray-900",children:(null===(s=C.location)||void 0===s?void 0:s.city)||(null===(a=C.address)||void 0===a?void 0:a.city)||"Not specified"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"State"}),(0,cs.jsx)("p",{className:"text-gray-900",children:(null===(n=C.location)||void 0===n?void 0:n.state)||(null===(i=C.address)||void 0===i?void 0:i.state)||"Not specified"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Pincode"}),(0,cs.jsx)("p",{className:"text-gray-900",children:(null===(o=C.location)||void 0===o?void 0:o.pincode)||(null===(l=C.address)||void 0===l?void 0:l.pincode)||"Not specified"})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Contact"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,cs.jsx)("p",{className:"text-gray-900",children:(null===(c=C.contact)||void 0===c?void 0:c.phone)||"Not specified"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,cs.jsx)("p",{className:"text-gray-900",children:(null===(d=C.contact)||void 0===d?void 0:d.email)||"Not specified"})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Capacity"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bus Capacity"}),(0,cs.jsxs)("p",{className:"text-gray-900",children:[(null===(u=C.capacity)||void 0===u?void 0:u.totalBuses)||(null===(h=C.capacity)||void 0===h?void 0:h.buses)||0," buses"]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Available Buses"}),(0,cs.jsxs)("p",{className:"text-gray-900",children:[(null===(m=C.capacity)||void 0===m?void 0:m.availableBuses)||0," buses"]})]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,cs.jsx)("button",{onClick:()=>S(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"}),(0,cs.jsx)("button",{onClick:()=>{S(!1),V(C)},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Edit Depot"})]})]})]})}),T&&E&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-40",children:(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full lg:ml-64",children:(0,cs.jsxs)("div",{className:"p-6",children:[(0,cs.jsx)("h3",{className:"text-xl font-bold text-red-900 mb-4",children:"Confirm Deletion"}),(0,cs.jsxs)("p",{className:"text-gray-700 mb-6",children:['Are you sure you want to delete depot "',E.depotName||E.name,'"? This action cannot be undone.']}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,cs.jsx)("button",{onClick:()=>P(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,cs.jsx)("button",{onClick:async()=>{if(!E)return;const e=E._id;g(t=>t.filter(t=>t._id!==e)),P(!1),D(null);try{const t=await fetch("/api/admin/depots/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(t.ok)console.log("Depot deleted successfully from backend");else{const e=await t.json();console.error("Failed to delete depot:",e.error),g(e=>[...e,E]),alert("Failed to delete depot: ".concat(e.error||"Unknown error"))}}catch(t){console.error("Error deleting depot:",t),g(e=>[...e,E]),alert("Network error while deleting depot. Please try again.")}},className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete Depot"})]})]})})})]})},Xh=()=>{const e=te();return(0,r.useEffect)(()=>{const t=setTimeout(()=>{e("/admin/routes-management")},3e3);return()=>clearTimeout(t)},[e]),(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,cs.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,cs.jsx)(As.A,{className:"w-8 h-8 text-green-600"}),(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Route Management"})]}),(0,cs.jsx)("p",{className:"text-gray-600 mb-6",children:"Manage bus routes, stops, and route configurations"}),(0,cs.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6",children:(0,cs.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,cs.jsx)(jd.A,{className:"w-8 h-8 text-green-600 mt-1"}),(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"\ud83c\udf89 Route Management System is Now Live!"}),(0,cs.jsx)("p",{className:"text-green-700 mb-4",children:"Your comprehensive route management system is ready with depot scheduling, starting/ending points, intermediate stops, and full CRUD operations."}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-4",children:[(0,cs.jsx)("h4",{className:"font-semibold text-green-800 mb-2",children:"\u2728 New Features:"}),(0,cs.jsxs)("ul",{className:"text-green-700 text-sm space-y-1",children:[(0,cs.jsx)("li",{children:"\u2022 Complete route creation with starting/ending points"}),(0,cs.jsx)("li",{children:"\u2022 Depot integration and scheduling"}),(0,cs.jsx)("li",{children:"\u2022 Intermediate stops management"}),(0,cs.jsx)("li",{children:"\u2022 Advanced filtering and search"}),(0,cs.jsx)("li",{children:"\u2022 Beautiful admin interface"}),(0,cs.jsx)("li",{children:"\u2022 Real-time statistics and analytics"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsxs)("button",{onClick:()=>e("/admin/routes-management"),className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors flex items-center",children:["Go to Routes Management",(0,cs.jsx)(td,{className:"w-4 h-4 ml-2"})]}),(0,cs.jsx)("span",{className:"text-green-600 text-sm",children:"Auto-redirecting in 3 seconds..."})]})]})]})}),(0,cs.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[(0,cs.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"\ud83d\ude8c Routes Management"}),(0,cs.jsx)("p",{className:"text-blue-700 text-sm mb-3",children:"Access the full routes management system with depot scheduling capabilities."}),(0,cs.jsxs)("button",{onClick:()=>e("/admin/routes-management"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center",children:["Open Routes Management ",(0,cs.jsx)(td,{className:"w-3 h-3 ml-1"})]})]}),(0,cs.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4",children:[(0,cs.jsx)("h4",{className:"font-semibold text-purple-800 mb-2",children:"\ud83c\udfe2 Depot Management"}),(0,cs.jsx)("p",{className:"text-purple-700 text-sm mb-3",children:"Manage bus depots, capacity, facilities, and operating hours."}),(0,cs.jsxs)("button",{onClick:()=>e("/admin/depot-management"),className:"text-purple-600 hover:text-purple-700 text-sm font-medium flex items-center",children:["Open Depot Management ",(0,cs.jsx)(td,{className:"w-3 h-3 ml-1"})]})]})]})]})})})},Zh=(0,Ns.A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),em=(0,Ns.A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var tm=s(5686);const sm=e=>{let{children:t,className:s="",hoverEffect:a=!0,gradient:n=!1,glow:i=!1,delay:o=0,onClick:l=null}=e;const[c,d]=(0,r.useState)(!1),u="\n    relative overflow-hidden rounded-2xl border border-gray-100 \n    bg-white shadow-sm transition-all duration-300 ease-out\n    ".concat(n?"bg-gradient-to-br from-white to-gray-50":"","\n    ").concat(i?"ring-1 ring-blue-100":"","\n    ").concat(l?"cursor-pointer":"","\n    ").concat(s,"\n  ");return(0,cs.jsxs)(ed.div,{variants:{initial:{scale:1,y:0,rotateX:0,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},hover:{scale:1.02,y:-8,rotateX:2,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},tap:{scale:.98,y:-4}},initial:"initial",whileHover:a?"hover":"initial",whileTap:l?"tap":"initial",transition:{duration:.3,ease:"easeOut",delay:.1*o},onHoverStart:()=>d(!0),onHoverEnd:()=>d(!1),onClick:l,className:u,children:[n&&(0,cs.jsx)(ed.div,{className:"absolute inset-0 bg-gradient-to-br from-blue-50/50 via-transparent to-purple-50/50",initial:{opacity:0},animate:{opacity:c?1:0},transition:{duration:.3}}),i&&(0,cs.jsx)(ed.div,{variants:{initial:{opacity:0,scale:.8},hover:{opacity:1,scale:1.2}},className:"absolute -inset-1 bg-gradient-to-r from-blue-400 to-purple-400 rounded-2xl blur opacity-20",initial:"initial",animate:c?"hover":"initial"}),(0,cs.jsx)("div",{className:"relative z-10",children:t}),a&&(0,cs.jsx)(ed.div,{className:"absolute inset-0 rounded-2xl border-2 border-transparent",initial:{opacity:0},animate:{opacity:c?1:0,borderColor:c?"rgba(59, 130, 246, 0.3)":"transparent"},transition:{duration:.3}})]})},rm=e=>{let{children:t,className:s="",hoverEffect:r=!0,blur:a="backdrop-blur-md",transparency:n="bg-white/20",border:i="border-white/30",shadow:o="shadow-2xl"}=e;const l="\n    relative overflow-hidden rounded-2xl \n    ".concat(n," ").concat(i," ").concat(o,"\n    transition-all duration-300 ease-out\n    ").concat(s,"\n  ");return(0,cs.jsxs)(ed.div,{variants:{initial:{scale:1,y:0,rotateX:0},hover:{scale:1.02,y:-5,rotateX:1},tap:{scale:.98,y:-2}},initial:"initial",whileHover:r?"hover":"initial",whileTap:"tap",transition:{duration:.3,ease:"easeOut"},className:l,children:[(0,cs.jsx)("div",{className:"absolute inset-0 ".concat(a," bg-white/10")}),(0,cs.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 via-transparent to-white/10"}),(0,cs.jsx)("div",{className:"relative z-10",children:t}),(0,cs.jsx)("div",{className:"absolute inset-0 rounded-2xl border border-white/20"})]})},am=()=>{const[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[x,g]=(0,r.useState)(!1),[f,y]=(0,r.useState)(null),[b,v]=(0,r.useState)(null),[j,N]=(0,r.useState)({fromCity:"",toCity:"",depotId:"",status:""}),[w,k]=(0,r.useState)(""),[A,S]=(0,r.useState)("grid"),[C,_]=(0,r.useState)(1),[T,P]=(0,r.useState)(24),[E,D]=(0,r.useState)(0),[M,O]=(0,r.useState)({routeNumber:"",routeName:"",startingCity:"",startingLocation:"",endingCity:"",endingLocation:"",totalDistance:"",estimatedDuration:"",baseFare:"",depotId:"",features:[],departureTime:"",arrivalTime:"",frequency:""}),[R,I]=(0,r.useState)({departureTime:"",arrivalTime:"",frequency:""}),[L,F]=(0,r.useState)(null),[B,z]=(0,r.useState)(!1),[U,V]=(0,r.useState)("add"),[K,W]=(0,r.useState)("single"),[H,q]=(0,r.useState)({frequency:"daily",interval:1,daysOfWeek:[],endDate:"",maxOccurrences:10}),[G,Y]=(0,r.useState)({pattern:"custom",customPattern:[],timeSlots:[]}),$=async()=>{try{var e,s;i(!0);const r=new URLSearchParams;r.set("page",String(C)),r.set("limit",String(T)),w&&r.set("search",w.trim()),j.fromCity&&r.set("fromCity",j.fromCity.trim()),j.toCity&&r.set("toCity",j.toCity.trim()),j.depotId&&r.set("depotId",j.depotId),j.status&&r.set("status",j.status);const a=await(0,xs.nr)("/api/admin/routes?"+r.toString()),n=(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data)||(null===a||void 0===a?void 0:a.data)||{},o=(e=>(e||[]).map(e=>{var t,s,r,a;const n=e.depotId||e.depot||null,i=n&&"object"===typeof n?n._id||n.depotId||n.id:n||"",o=n&&"object"===typeof n?n.name||n.depotName||n.code||"Depot":"",l=n&&"object"===typeof n&&((null===(t=n.location)||void 0===t?void 0:t.city)||n.city)||"",c=e.startingPoint,d=e.endingPoint,u="object"===typeof c?{city:c.city||c.location||c.name||"",location:c.location||""}:{city:c||"",location:""},h="object"===typeof d?{city:d.city||d.location||d.name||"",location:d.location||""}:{city:d||"",location:""},m=Array.isArray(e.schedules)?e.schedules.map((e,t)=>({scheduleId:e.scheduleId||e._id||"SCH".concat(t),departureTime:e.departureTime||e.departure||e.startTime||"",arrivalTime:e.arrivalTime||e.arrival||e.endTime||"",frequency:e.frequency||e.recurrence||"daily"})):[];return{id:e._id||e.id,routeNumber:e.routeNumber||e.code||"",routeName:e.routeName||e.name||"",startingPoint:u,endingPoint:h,totalDistance:Number(null!==(s=e.totalDistance)&&void 0!==s?s:0),estimatedDuration:Number(null!==(r=e.estimatedDuration)&&void 0!==r?r:0),baseFare:Number(null!==(a=e.baseFare)&&void 0!==a?a:0),depot:{depotId:i,depotName:o,depotLocation:l},status:e.status||"active",schedules:m,features:Array.isArray(e.features)?e.features:[]}}))(n.routes||n.routeList||Array.isArray(n)?n:[]);t(o);const l=n.pagination||n.meta||{};D(l.total||(null===a||void 0===a||null===(s=a.data)||void 0===s?void 0:s.total)||o.length)}catch(qU){console.error("Failed to load routes",qU),t([])}finally{i(!1)}};(0,r.useEffect)(()=>{(async()=>{try{var e,t,s;(0,xs.I3)();const r=await(0,xs.nr)("/api/admin/depots?showAll=true&_="+Date.now()),n=((null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.depots)||(null===r||void 0===r||null===(t=r.data)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.depots)||(null===r||void 0===r?void 0:r.data)||[]||[]).map(e=>{var t,s,r,a,n,i;return{id:e._id||e.id,depotCode:e.depotCode||e.code||"",depotName:e.depotName||e.name||"Unknown Depot",location:{city:(null===(t=e.location)||void 0===t?void 0:t.city)||(null===(s=e.address)||void 0===s?void 0:s.city)||"Unknown City",state:(null===(r=e.location)||void 0===r?void 0:r.state)||(null===(a=e.address)||void 0===a?void 0:a.state)||"",address:(null===(n=e.location)||void 0===n?void 0:n.address)||(null===(i=e.address)||void 0===i?void 0:i.address)||""},capacity:e.capacity||{totalBuses:0,availableBuses:0,maintenanceBuses:0},status:e.status||"active"}});a(n)}catch(qU){console.error("Failed to load depots",qU),a([])}})()},[]),(0,r.useEffect)(()=>{$()},[C,T,w,j.fromCity,j.toCity,j.depotId,j.status]);const J=e=>{const{name:t,value:s}=e.target;O(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:s}))},Q=e=>{const{name:t,value:s}=e.target;v(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:s}))},X=e=>{const{value:t,checked:s}=e.target;O(e=>(0,Ie.A)((0,Ie.A)({},e),{},{features:s?[...e.features,t]:e.features.filter(e=>e!==t)}))},Z=e=>{const{value:t,checked:s}=e.target;v(e=>(0,Ie.A)((0,Ie.A)({},e),{},{features:s?[...e.features,t]:e.features.filter(e=>e!==t)}))},ee=e=>{v({id:e.id,routeNumber:e.routeNumber,routeName:e.routeName,startingCity:e.startingPoint.city,startingLocation:e.startingPoint.location,endingCity:e.endingPoint.city,endingLocation:e.endingPoint.location,totalDistance:e.totalDistance.toString(),estimatedDuration:e.estimatedDuration.toString(),baseFare:e.baseFare.toString(),depotId:e.depot.depotId.toString(),features:e.features||[],status:e.status}),h(!0)},te=async s=>{const r=e.find(e=>e.id===s),a=r?r.routeName:"this route";if(window.confirm('Are you sure you want to delete "'.concat(a,'"? This will permanently remove the route from the database and cannot be undone.'))){l(s);const r=[...e];t(e=>e.filter(e=>e.id!==s));try{var n;console.log("\ud83d\uddd1\ufe0f Deleting route:",a);const e=await(0,xs.nr)("/api/admin/routes/".concat(s),{method:"DELETE"});if(e.ok&&null!==(n=e.data)&&void 0!==n&&n.success)console.log("\u2705 Route deleted successfully from database");else{var i;console.error("\u274c Route deletion failed, restoring UI"),t(r);const s=(null===(i=e.data)||void 0===i?void 0:i.message)||e.message||"Unknown error";window.alert("Failed to delete route: ".concat(s))}}catch(o){console.error("\u274c Route deletion error, restoring UI:",o),t(r),window.alert("Failed to delete route: ".concat(o.message||"Please try again"))}finally{l(null)}}},se=async t=>{try{var s;i(!0);const a=e.find(e=>e.id===t);if(!a)return;const n="active"===a.status?"inactive":"active";console.log("Toggling route status:",t,"to",n);const o=await(0,xs.nr)("/api/admin/routes/".concat(t),{method:"PUT",body:JSON.stringify({status:n})});if(console.log("Toggle status response:",o),o.ok&&null!==(s=o.data)&&void 0!==s&&s.success)await $(),window.alert("Route ".concat("active"===n?"activated":"deactivated"," successfully!"));else{var r;const e=(null===(r=o.data)||void 0===r?void 0:r.message)||o.message||"Failed to update route status";window.alert(e)}}catch(a){console.error("Error toggling route status:",a),window.alert("Failed to update route status. Please try again.")}finally{i(!1)}},re=e=>{const{name:t,value:s}=e.target,r=t.replace("new","").toLowerCase();I(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[r]:s}))},ae=e=>{const{name:t,value:s}=e.target;F(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:s}))},ne=()=>{F(null),z(!1),V("add"),I({departureTime:"",arrivalTime:"",frequency:""}),W("single"),q({frequency:"daily",interval:1,daysOfWeek:[],endDate:"",maxOccurrences:10}),Y({pattern:"custom",customPattern:[],timeSlots:[]})},ie=e=>{if(!e)return"";const[t,s]=e.split(":"),r=parseInt(t),a=r>=12?"PM":"AM";return"".concat(0===r?12:r>12?r-12:r,":").concat(s," ").concat(a)},oe=e.filter(e=>{const t=e.routeName.toLowerCase().includes(w.toLowerCase())||e.routeNumber.toLowerCase().includes(w.toLowerCase()),s=(!j.fromCity||e.startingPoint.city.toLowerCase().includes(j.fromCity.toLowerCase()))&&(!j.toCity||e.endingPoint.city.toLowerCase().includes(j.toCity.toLowerCase()))&&(!j.depotId||e.depot.depotId.toString()===j.depotId)&&(!j.status||e.status===j.status);return t&&s}),le=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"maintenance":return"bg-yellow-100 text-yellow-800";case"suspended":return"bg-red-100 text-red-800"}},ce=e=>{switch(e){case"active":return"\ud83d\udfe2";case"inactive":default:return"\u26aa";case"maintenance":return"\ud83d\udfe1";case"suspended":return"\ud83d\udd34"}};return n?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),(0,cs.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading routes..."})]})}):(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50 p-3",children:[(0,cs.jsx)("div",{className:"mb-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Routes Management"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Manage bus routes and depot scheduling"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsxs)("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-3 py-2 rounded-lg flex items-center hover:bg-blue-700 transition-colors text-sm",children:[(0,cs.jsx)(bu.A,{className:"w-4 h-4 mr-1"}),"Create Route"]}),(0,cs.jsx)("button",{onClick:()=>S("grid"===A?"list":"grid"),className:"bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:"grid"===A?"List View":"Grid View"}),(0,cs.jsx)("button",{onClick:$,disabled:n,className:"bg-green-100 text-green-700 px-3 py-2 rounded-lg hover:bg-green-200 transition-colors disabled:opacity-50 text-sm",children:n?"Refreshing...":"Refresh Data"})]})]})}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[(0,cs.jsx)(sm,{className:"p-3",delay:0,children:(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:(0,cs.jsx)(As.A,{className:"w-5 h-5 text-blue-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-xs text-gray-600",children:"Total Routes"}),(0,cs.jsx)("p",{className:"text-lg font-bold text-gray-900",children:e.length})]})]})}),(0,cs.jsx)(sm,{className:"p-3",delay:1,children:(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)("div",{className:"p-2 bg-green-100 rounded-lg mr-3",children:(0,cs.jsx)(fh,{className:"w-5 h-5 text-green-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-xs text-gray-600",children:"Active Depots"}),(0,cs.jsx)("p",{className:"text-lg font-bold text-gray-900",children:s.filter(e=>"active"===e.status).length})]})]})}),(0,cs.jsx)(sm,{className:"p-3",delay:2,children:(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg mr-3",children:(0,cs.jsx)(sd.A,{className:"w-5 h-5 text-purple-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-xs text-gray-600",children:"Total Schedules"}),(0,cs.jsx)("p",{className:"text-lg font-bold text-gray-900",children:e.reduce((e,t)=>e+t.schedules.length,0)})]})]})}),(0,cs.jsx)(sm,{className:"p-3",delay:3,children:(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg mr-3",children:(0,cs.jsx)(ks.A,{className:"w-5 h-5 text-orange-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-xs text-gray-600",children:"Available Buses"}),(0,cs.jsx)("p",{className:"text-lg font-bold text-gray-900",children:s.reduce((e,t)=>e+t.capacity.availableBuses,0)})]})]})})]}),(0,cs.jsx)(rm,{className:"p-3 mb-4",children:(0,cs.jsxs)("div",{className:"flex flex-col lg:flex-row gap-2",children:[(0,cs.jsx)("div",{className:"flex-1",children:(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(ys.A,{className:"w-4 h-4 absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search routes...",value:w,onChange:e=>{_(1),k(e.target.value)},className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]})}),(0,cs.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,cs.jsxs)("select",{value:j.fromCity,onChange:e=>{_(1),N((0,Ie.A)((0,Ie.A)({},j),{},{fromCity:e.target.value}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[(0,cs.jsx)("option",{value:"",children:"From City"}),[...new Set(e.map(e=>e.startingPoint.city).filter(Boolean))].slice(0,100).map(e=>(0,cs.jsx)("option",{value:e,children:e},e))]}),(0,cs.jsxs)("select",{value:j.toCity,onChange:e=>{_(1),N((0,Ie.A)((0,Ie.A)({},j),{},{toCity:e.target.value}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[(0,cs.jsx)("option",{value:"",children:"To City"}),[...new Set(e.map(e=>e.endingPoint.city).filter(Boolean))].slice(0,100).map(e=>(0,cs.jsx)("option",{value:e,children:e},e))]}),(0,cs.jsxs)("select",{value:j.depotId,onChange:e=>{_(1),N((0,Ie.A)((0,Ie.A)({},j),{},{depotId:e.target.value}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[(0,cs.jsx)("option",{value:"",children:"All Depots"}),s.map(e=>(0,cs.jsx)("option",{value:e.id,children:e.depotName},e.id))]}),(0,cs.jsxs)("select",{value:j.status,onChange:e=>{_(1),N((0,Ie.A)((0,Ie.A)({},j),{},{status:e.target.value}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[(0,cs.jsx)("option",{value:"",children:"All Status"}),(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"inactive",children:"Inactive"}),(0,cs.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,cs.jsx)("option",{value:"suspended",children:"Suspended"})]})]})]})}),(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,cs.jsxs)("div",{className:"text-sm text-gray-600",children:[E," total \xb7 Page ",C]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>_(e=>Math.max(1,e-1)),disabled:1===C,className:"px-2 py-1 border rounded disabled:opacity-50",children:(0,cs.jsx)(Zh,{className:"w-4 h-4"})}),(0,cs.jsx)("select",{value:T,onChange:e=>{_(1),P(parseInt(e.target.value)||24)},className:"px-2 py-1 border rounded",children:[12,24,48,96].map(e=>(0,cs.jsxs)("option",{value:e,children:[e,"/page"]},e))}),(0,cs.jsx)("button",{onClick:()=>_(e=>e+1),disabled:e.length<T&&C*T>=E,className:"px-2 py-1 border rounded disabled:opacity-50",children:(0,cs.jsx)(em,{className:"w-4 h-4"})})]})]}),(0,cs.jsx)("div",{className:"space-y-4",children:"grid"===A?(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:(0,cs.jsx)(Md,{children:oe.map((e,t)=>(0,cs.jsx)(ed.div,{initial:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.3},children:(0,cs.jsxs)(sm,{delay:t,className:"p-4",children:[(0,cs.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:e.routeName}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:e.routeNumber})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,cs.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(le(e.status)),children:[ce(e.status)," ",e.status]}),(0,cs.jsx)("button",{className:"p-1 hover:bg-gray-100 rounded",children:(0,cs.jsx)(tm.A,{className:"w-3 h-3 text-gray-500"})})]})]}),(0,cs.jsxs)("div",{className:"space-y-2 mb-3",children:[(0,cs.jsxs)("div",{className:"flex items-center text-xs text-gray-600",children:[(0,cs.jsx)(gs.A,{className:"w-3 h-3 mr-1"}),(0,cs.jsxs)("span",{children:[e.startingPoint.city," \u2192 ",e.endingPoint.city]})]}),(0,cs.jsxs)("div",{className:"flex items-center text-xs text-gray-600",children:[(0,cs.jsx)(As.A,{className:"w-3 h-3 mr-1"}),(0,cs.jsxs)("span",{children:[e.totalDistance," km \u2022 ",Math.floor(e.estimatedDuration/60),"h ",e.estimatedDuration%60,"m"]})]}),(0,cs.jsxs)("div",{className:"flex items-center text-xs text-gray-600",children:[(0,cs.jsx)(fh,{className:"w-3 h-3 mr-1"}),(0,cs.jsx)("span",{children:e.depot.depotName})]}),(0,cs.jsxs)("div",{className:"flex items-center text-xs text-gray-600",children:[(0,cs.jsx)(sd.A,{className:"w-3 h-3 mr-1"}),(0,cs.jsxs)("span",{children:[e.schedules.length," schedules"]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,cs.jsxs)("div",{className:"text-sm font-bold text-blue-600",children:["\u20b9",e.baseFare]}),(0,cs.jsxs)("div",{className:"flex space-x-1",children:[e.features.slice(0,2).map((e,t)=>(0,cs.jsx)("span",{className:"px-1 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:e},t)),e.features.length>2&&(0,cs.jsxs)("span",{className:"px-1 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:["+",e.features.length-2]})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-1",children:[(0,cs.jsxs)("button",{onClick:()=>{y(e),g(!0)},className:"bg-blue-100 text-blue-700 py-1 px-2 rounded text-xs hover:bg-blue-200 transition-colors",children:[(0,cs.jsx)(fs.A,{className:"w-3 h-3 mr-1 inline"}),"Schedule"]}),(0,cs.jsxs)("button",{onClick:()=>ee(e),disabled:n,className:"bg-gray-100 text-gray-700 py-1 px-2 rounded text-xs hover:bg-gray-200 transition-colors disabled:opacity-50",children:[(0,cs.jsx)(Kh.A,{className:"w-3 h-3 mr-1 inline"}),n?"Loading...":"Edit"]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-1 mt-1",children:[(0,cs.jsx)("button",{onClick:()=>se(e.id),disabled:n,className:"py-1 px-2 rounded text-xs transition-colors disabled:opacity-50 ".concat("active"===e.status?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"),children:n?"Updating...":"active"===e.status?"Deactivate":"Activate"}),(0,cs.jsxs)("button",{onClick:()=>te(e.id),disabled:n||o===e.id,className:"bg-red-100 text-red-700 py-1 px-2 rounded hover:bg-red-200 transition-colors text-xs disabled:opacity-50",children:[(0,cs.jsx)(Wh.A,{className:"w-3 h-3 mr-1 inline"}),o===e.id?"Deleting...":"Delete"]})]})]})},e.id))})}):(0,cs.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,cs.jsx)("div",{className:"overflow-x-auto",children:(0,cs.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,cs.jsx)("thead",{className:"bg-gray-50",children:(0,cs.jsxs)("tr",{children:[(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route"}),(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"From \u2192 To"}),(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Depot"}),(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Schedules"}),(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,cs.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:oe.map(e=>(0,cs.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.routeName}),(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:e.routeNumber})]})}),(0,cs.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,cs.jsxs)("div",{className:"text-sm text-gray-900",children:[e.startingPoint.city," \u2192 ",e.endingPoint.city]}),(0,cs.jsxs)("div",{className:"text-sm text-gray-500",children:[e.totalDistance," km \u2022 ",Math.floor(e.estimatedDuration/60),"h ",e.estimatedDuration%60,"m"]})]}),(0,cs.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,cs.jsx)("div",{className:"text-sm text-gray-900",children:e.depot.depotName}),(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:e.depot.depotLocation})]}),(0,cs.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,cs.jsxs)("div",{className:"text-sm text-gray-900",children:[e.schedules.length," schedules"]}),(0,cs.jsxs)("div",{className:"text-sm text-gray-500",children:["\u20b9",e.baseFare]})]}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,cs.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(le(e.status)),children:[ce(e.status)," ",e.status]})}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,cs.jsxs)("div",{className:"flex space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>{y(e),g(!0)},className:"text-blue-600 hover:text-blue-900",title:"Manage Schedules",children:(0,cs.jsx)(fs.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>ee(e),className:"text-gray-600 hover:text-gray-900",title:"Edit Route",children:(0,cs.jsx)(Kh.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>se(e.id),className:"".concat("active"===e.status?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"),title:"active"===e.status?"Deactivate Route":"Activate Route",children:"active"===e.status?"\u23f8\ufe0f":"\u25b6\ufe0f"}),(0,cs.jsx)("button",{onClick:()=>te(e.id),disabled:o===e.id,className:"text-red-600 hover:text-red-900 disabled:opacity-50",title:o===e.id?"Deleting...":"Delete Route",children:(0,cs.jsx)(Wh.A,{className:"w-4 h-4"})})]})})]},e.id))})]})})})}),c&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,cs.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Create New Route"}),(0,cs.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!M.routeNumber||!M.routeName||!M.depotId)return void window.alert("Please fill in all required fields");console.log("Selected depot ID:",M.depotId),console.log("Available depots:",s);const t=s.find(e=>e.id===M.depotId||e.id===parseInt(M.depotId));if(console.log("Found depot:",t),t)try{var r;i(!0);const e={routeNumber:M.routeNumber,routeName:M.routeName,startingPoint:{city:M.startingCity,location:M.startingLocation},endingPoint:{city:M.endingCity,location:M.endingLocation},totalDistance:parseInt(M.totalDistance),estimatedDuration:parseInt(M.estimatedDuration),baseFare:parseInt(M.baseFare),depotId:t.id,status:"active",features:M.features,schedules:[{departureTime:M.departureTime,arrivalTime:M.arrivalTime,frequency:M.frequency||"daily"}]};console.log("Creating route with data:",e);const s=await(0,xs.nr)("/api/admin/routes",{method:"POST",body:JSON.stringify(e)});if(console.log("Create route response:",s),s.ok&&null!==(r=s.data)&&void 0!==r&&r.success)await $(),O({routeNumber:"",routeName:"",startingCity:"",startingLocation:"",endingCity:"",endingLocation:"",totalDistance:"",estimatedDuration:"",baseFare:"",depotId:"",features:[],departureTime:"",arrivalTime:"",frequency:""}),d(!1),window.alert("Route created successfully!");else{var a;const e=(null===(a=s.data)||void 0===a?void 0:a.message)||s.message||"Failed to create route";window.alert(e)}}catch(n){console.error("Error creating route:",n),window.alert("Failed to create route. Please try again.")}finally{i(!1)}else window.alert("Please select a valid depot")},className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Route Number *"}),(0,cs.jsx)("input",{type:"text",name:"routeNumber",value:M.routeNumber,onChange:J,placeholder:"e.g., RT009",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Route Name *"}),(0,cs.jsx)("input",{type:"text",name:"routeName",value:M.routeName,onChange:J,placeholder:"e.g., Kochi - Goa Express",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Starting City *"}),(0,cs.jsx)("input",{type:"text",name:"startingCity",value:M.startingCity,onChange:J,placeholder:"e.g., Kochi",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Starting Location *"}),(0,cs.jsx)("input",{type:"text",name:"startingLocation",value:M.startingLocation,onChange:J,placeholder:"e.g., Kochi Central Bus Stand",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ending City *"}),(0,cs.jsx)("input",{type:"text",name:"endingCity",value:M.endingCity,onChange:J,placeholder:"e.g., Goa",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ending Location *"}),(0,cs.jsx)("input",{type:"text",name:"endingLocation",value:M.endingLocation,onChange:J,placeholder:"e.g., Goa Central Bus Station",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Distance (km) *"}),(0,cs.jsx)("input",{type:"number",name:"totalDistance",value:M.totalDistance,onChange:J,placeholder:"e.g., 800",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Duration (minutes) *"}),(0,cs.jsx)("input",{type:"number",name:"estimatedDuration",value:M.estimatedDuration,onChange:J,placeholder:"e.g., 600",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Base Fare (\u20b9) *"}),(0,cs.jsx)("input",{type:"number",name:"baseFare",value:M.baseFare,onChange:J,placeholder:"e.g., 1800",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign Depot *"}),(0,cs.jsxs)("select",{name:"depotId",value:M.depotId,onChange:J,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:n,children:[(0,cs.jsx)("option",{value:"",children:n?"Loading depots...":"Select a depot"}),s.map(e=>{var t,s;return(0,cs.jsxs)("option",{value:e.id,children:[e.depotName," - ",(null===(t=e.location)||void 0===t?void 0:t.city)||(null===(s=e.location)||void 0===s?void 0:s.address)||"Location not set"]},e.id)})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Route Features"}),(0,cs.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["AC","WiFi","USB_Charging","Entertainment","Refreshments","Wheelchair_Accessible"].map(e=>(0,cs.jsxs)("label",{className:"flex items-center",children:[(0,cs.jsx)("input",{type:"checkbox",name:"features",value:e,checked:M.features.includes(e),onChange:X,className:"mr-2 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:e.replace("_"," ")})]},e))})]}),(0,cs.jsxs)("div",{className:"border-t pt-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Initial Schedule"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Departure Time *"}),(0,cs.jsx)("input",{type:"time",name:"departureTime",value:M.departureTime,onChange:J,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Arrival Time *"}),(0,cs.jsx)("input",{type:"time",name:"arrivalTime",value:M.arrivalTime,onChange:J,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frequency *"}),(0,cs.jsxs)("select",{name:"frequency",value:M.frequency,onChange:J,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,cs.jsx)("option",{value:"",children:"Select frequency"}),(0,cs.jsx)("option",{value:"daily",children:"Daily"}),(0,cs.jsx)("option",{value:"weekly",children:"Weekly"}),(0,cs.jsx)("option",{value:"monthly",children:"Monthly"})]})]})]})]}),(0,cs.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[(0,cs.jsx)("button",{type:"button",onClick:()=>d(!1),className:"px-6 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,cs.jsx)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Create Route"})]})]})]})}),u&&b&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsx)("h2",{className:"text-2xl font-bold",children:"Edit Route"}),(0,cs.jsx)("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600",children:(0,cs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,cs.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!b.routeNumber||!b.routeName||!b.depotId)return void window.alert("Please fill in all required fields");console.log("Edit - Selected depot ID:",b.depotId),console.log("Edit - Available depots:",s);const t=s.find(e=>e.id===b.depotId||e.id===parseInt(b.depotId));if(console.log("Edit - Found depot:",t),t)try{var r;i(!0);const e={routeName:b.routeName,startingPoint:{city:b.startingCity,location:b.startingLocation},endingPoint:{city:b.endingCity,location:b.endingLocation},totalDistance:parseInt(b.totalDistance),estimatedDuration:parseInt(b.estimatedDuration),baseFare:parseInt(b.baseFare),depotId:t.id,status:b.status,features:b.features};console.log("Updating route with data:",e);const s=await(0,xs.nr)("/api/admin/routes/".concat(b.id),{method:"PUT",body:JSON.stringify(e)});if(console.log("Update route response:",s),s.ok&&null!==(r=s.data)&&void 0!==r&&r.success)await $(),v(null),h(!1),window.alert("Route updated successfully!");else{var a;const e=(null===(a=s.data)||void 0===a?void 0:a.message)||s.message||"Failed to update route";window.alert(e)}}catch(n){console.error("Error updating route:",n),window.alert("Failed to update route. Please try again.")}finally{i(!1)}else window.alert("Please select a valid depot")},className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Route Number *"}),(0,cs.jsx)("input",{type:"text",name:"routeNumber",value:b.routeNumber,onChange:Q,placeholder:"e.g., RT009",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Route Name *"}),(0,cs.jsx)("input",{type:"text",name:"routeName",value:b.routeName,onChange:Q,placeholder:"e.g., Kochi - Goa Express",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Starting City *"}),(0,cs.jsx)("input",{type:"text",name:"startingCity",value:b.startingCity,onChange:Q,placeholder:"e.g., Kochi",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Starting Location *"}),(0,cs.jsx)("input",{type:"text",name:"startingLocation",value:b.startingLocation,onChange:Q,placeholder:"e.g., Kochi Central Bus Stand",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ending City *"}),(0,cs.jsx)("input",{type:"text",name:"endingCity",value:b.endingCity,onChange:Q,placeholder:"e.g., Goa",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ending Location *"}),(0,cs.jsx)("input",{type:"text",name:"endingLocation",value:b.endingLocation,onChange:Q,placeholder:"e.g., Goa Central Bus Station",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Distance (km) *"}),(0,cs.jsx)("input",{type:"number",name:"totalDistance",value:b.totalDistance,onChange:Q,placeholder:"e.g., 250",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Duration (minutes) *"}),(0,cs.jsx)("input",{type:"number",name:"estimatedDuration",value:b.estimatedDuration,onChange:Q,placeholder:"e.g., 300",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Base Fare (\u20b9) *"}),(0,cs.jsx)("input",{type:"number",name:"baseFare",value:b.baseFare,onChange:Q,placeholder:"e.g., 500",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned Depot *"}),(0,cs.jsxs)("select",{name:"depotId",value:b.depotId,onChange:Q,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:n,children:[(0,cs.jsx)("option",{value:"",children:n?"Loading depots...":"Select Depot"}),s.map(e=>{var t,s;return(0,cs.jsxs)("option",{value:e.id,children:[e.depotName," - ",(null===(t=e.location)||void 0===t?void 0:t.city)||(null===(s=e.location)||void 0===s?void 0:s.address)||"Location not set"]},e.id)})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,cs.jsxs)("select",{name:"status",value:b.status,onChange:Q,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"inactive",children:"Inactive"}),(0,cs.jsx)("option",{value:"maintenance",children:"Maintenance"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Route Features"}),(0,cs.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:["AC","Non-AC","Sleeper","Semi-Sleeper","WiFi","Charging","TV","Refreshments"].map(e=>(0,cs.jsxs)("label",{className:"flex items-center",children:[(0,cs.jsx)("input",{type:"checkbox",value:e,checked:b.features.includes(e),onChange:Z,className:"mr-2"}),(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:e})]},e))})]}),(0,cs.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[(0,cs.jsx)("button",{type:"button",onClick:()=>h(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),(0,cs.jsx)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Update Route"})]})]})]})}),x&&f&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["Manage Schedules - ",f.routeName]}),(0,cs.jsx)("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:(0,cs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,cs.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,cs.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"font-medium text-blue-800",children:"Route:"}),(0,cs.jsxs)("p",{className:"text-blue-700",children:[f.routeNumber," - ",f.routeName]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"font-medium text-blue-800",children:"From:"}),(0,cs.jsx)("p",{className:"text-blue-700",children:f.startingPoint.city})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"font-medium text-blue-800",children:"To:"}),(0,cs.jsx)("p",{className:"text-blue-700",children:f.endingPoint.city})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"font-medium text-blue-800",children:"Total Schedules:"}),(0,cs.jsx)("p",{className:"text-blue-700",children:f.schedules.length})]})]})}),(0,cs.jsxs)("div",{className:"mb-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Current Schedules"}),(0,cs.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:[f.schedules.length," schedule",1!==f.schedules.length?"s":""]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("button",{onClick:()=>{const t=e.find(e=>e.id===f.id);t&&y(t)},className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center",title:"Refresh schedules",children:(0,cs.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,cs.jsxs)("button",{onClick:()=>{z(!0),V("add"),I({departureTime:"",arrivalTime:"",frequency:""})},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 flex items-center",children:[(0,cs.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add New Schedule"]})]})]}),0===f.schedules.length?(0,cs.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[(0,cs.jsx)("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,cs.jsx)("p",{className:"text-gray-500",children:"No schedules found"}),(0,cs.jsx)("p",{className:"text-sm text-gray-400",children:"Add your first schedule to get started"})]}):(0,cs.jsx)("div",{className:"grid gap-4",children:f.schedules.map((e,s)=>(0,cs.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:s+1}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:"Schedule"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Departure"}),(0,cs.jsx)("div",{className:"text-lg font-bold text-gray-900",children:e.departureTime})]}),(0,cs.jsx)("div",{className:"text-gray-400",children:(0,cs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Arrival"}),(0,cs.jsx)("div",{className:"text-lg font-bold text-gray-900",children:e.arrivalTime})]})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Frequency"}),(0,cs.jsx)("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium capitalize",children:e.frequency})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>(e=>{F((0,Ie.A)({},e)),V("edit"),z(!0)})(e),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Schedule",children:(0,cs.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,cs.jsx)("button",{onClick:()=>((e,s)=>{if(window.confirm("Are you sure you want to delete this schedule?")){const r=(0,Ie.A)((0,Ie.A)({},f),{},{schedules:f.schedules.filter(e=>e.scheduleId!==s)});t(t=>t.map(t=>t.id===e?r:t)),y(r),window.alert("Schedule deleted successfully!")}})(f.id,e.scheduleId),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Schedule",children:(0,cs.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.scheduleId))})]}),B&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:(0,cs.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"add"===U?"Add New Schedule":"Edit Schedule"}),(0,cs.jsx)("button",{onClick:ne,className:"text-gray-400 hover:text-gray-600",children:(0,cs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,cs.jsxs)("form",{onSubmit:"add"===U?e=>{if(e.preventDefault(),!R.departureTime||!R.arrivalTime||!R.frequency)return void window.alert("Please fill in all schedule fields");if(R.departureTime>=R.arrivalTime)return void window.alert("Arrival time must be after departure time");const s={scheduleId:"SCH".concat(Date.now()),departureTime:R.departureTime,arrivalTime:R.arrivalTime,frequency:R.frequency},r=(0,Ie.A)((0,Ie.A)({},f),{},{schedules:[...f.schedules,s]});t(e=>e.map(e=>e.id===f.id?r:e)),y(r),I({departureTime:"",arrivalTime:"",frequency:""}),z(!1),window.alert("Schedule added successfully!")}:e=>{if(e.preventDefault(),!L.departureTime||!L.arrivalTime||!L.frequency)return void window.alert("Please fill in all schedule fields");if(L.departureTime>=L.arrivalTime)return void window.alert("Arrival time must be after departure time");const s=(0,Ie.A)((0,Ie.A)({},f),{},{schedules:f.schedules.map(e=>e.scheduleId===L.scheduleId?(0,Ie.A)({},L):e)});t(e=>e.map(e=>e.id===f.id?s:e)),y(s),F(null),z(!1),V("add"),window.alert("Schedule updated successfully!")},className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Schedule Type"}),(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[{value:"single",label:"Single Schedule",description:"One-time schedule"},{value:"recurring",label:"Recurring Schedule",description:"Repeats at intervals"},{value:"pattern",label:"Pattern Schedule",description:"Custom time patterns"}].map(e=>(0,cs.jsxs)("label",{className:"flex items-start p-3 border border-gray-200 rounded-lg hover:bg-white cursor-pointer",children:[(0,cs.jsx)("input",{type:"radio",value:e.value,checked:K===e.value,onChange:e=>W(e.target.value),className:"mr-3 mt-1 text-blue-600 focus:ring-blue-500"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"font-medium text-gray-900",children:e.label}),(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})]},e.value))})]}),(0,cs.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,cs.jsx)("h4",{className:"text-lg font-medium text-blue-900 mb-4",children:"Time Selection"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-blue-700 mb-3",children:"Departure Time *"}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsx)("input",{type:"time",name:"departureTime",value:"add"===U?R.departureTime:(null===L||void 0===L?void 0:L.departureTime)||"",onChange:"add"===U?re:ae,className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),(0,cs.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["06:00","08:00","10:00","12:00","14:00","16:00","18:00","20:00"].map(e=>(0,cs.jsx)("button",{type:"button",onClick:()=>(e=>{"add"===U?I(t=>(0,Ie.A)((0,Ie.A)({},t),{},{departureTime:e})):F(t=>(0,Ie.A)((0,Ie.A)({},t),{},{departureTime:e}))})(e),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",children:ie(e)},e))})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-blue-700 mb-3",children:"Arrival Time *"}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsx)("input",{type:"time",name:"arrivalTime",value:"add"===U?R.arrivalTime:(null===L||void 0===L?void 0:L.arrivalTime)||"",onChange:"add"===U?re:ae,className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),(0,cs.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["10:00","12:00","14:00","16:00","18:00","20:00","22:00","02:00"].map(e=>(0,cs.jsx)("button",{type:"button",onClick:()=>(e=>{"add"===U?I(t=>(0,Ie.A)((0,Ie.A)({},t),{},{arrivalTime:e})):F(t=>(0,Ie.A)((0,Ie.A)({},t),{},{arrivalTime:e}))})(e),className:"px-2 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200 transition-colors",children:ie(e)},e))})]})]})]}),(0,cs.jsx)("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Departure"}),(0,cs.jsx)("div",{className:"text-lg font-bold text-blue-600",children:ie("add"===U?R.departureTime:null===L||void 0===L?void 0:L.departureTime)})]}),(0,cs.jsx)("div",{className:"text-gray-400",children:(0,cs.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Arrival"}),(0,cs.jsx)("div",{className:"text-lg font-bold text-green-600",children:ie("add"===U?R.arrivalTime:null===L||void 0===L?void 0:L.arrivalTime)})]})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Duration"}),(0,cs.jsx)("div",{className:"text-lg font-bold text-purple-600",children:(()=>{const e="add"===U?R.departureTime:null===L||void 0===L?void 0:L.departureTime,t="add"===U?R.arrivalTime:null===L||void 0===L?void 0:L.arrivalTime;if(!e||!t)return"--";const[s,r]=e.split(":").map(Number),[a,n]=t.split(":").map(Number);let i=60*s+r,o=60*a+n;o<=i&&(o+=1440);const l=o-i,c=Math.floor(l/60),d=l%60;return"".concat(c,"h ").concat(d,"m")})()})]})]})})]}),"recurring"===K&&(0,cs.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[(0,cs.jsx)("h4",{className:"text-lg font-medium text-green-900 mb-4",children:"Recurring Schedule Options"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-green-700 mb-2",children:"Frequency"}),(0,cs.jsxs)("select",{value:H.frequency,onChange:e=>q(t=>(0,Ie.A)((0,Ie.A)({},t),{},{frequency:e.target.value})),className:"w-full px-3 py-2 border border-green-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,cs.jsx)("option",{value:"daily",children:"Daily"}),(0,cs.jsx)("option",{value:"weekly",children:"Weekly"}),(0,cs.jsx)("option",{value:"monthly",children:"Monthly"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-green-700 mb-2",children:"Interval"}),(0,cs.jsx)("input",{type:"number",min:"1",max:"30",value:H.interval,onChange:e=>q(t=>(0,Ie.A)((0,Ie.A)({},t),{},{interval:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-green-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-green-700 mb-2",children:"Max Occurrences"}),(0,cs.jsx)("input",{type:"number",min:"1",max:"100",value:H.maxOccurrences,onChange:e=>q(t=>(0,Ie.A)((0,Ie.A)({},t),{},{maxOccurrences:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-green-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),"weekly"===H.frequency&&(0,cs.jsxs)("div",{className:"mt-4",children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-green-700 mb-2",children:"Days of Week"}),(0,cs.jsx)("div",{className:"grid grid-cols-7 gap-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e,t)=>(0,cs.jsxs)("label",{className:"flex items-center justify-center p-2 border border-green-200 rounded hover:bg-green-100 cursor-pointer",children:[(0,cs.jsx)("input",{type:"checkbox",checked:H.daysOfWeek.includes(t),onChange:e=>{e.target.checked?q(e=>(0,Ie.A)((0,Ie.A)({},e),{},{daysOfWeek:[...e.daysOfWeek,t]})):q(e=>(0,Ie.A)((0,Ie.A)({},e),{},{daysOfWeek:e.daysOfWeek.filter(e=>e!==t)}))},className:"mr-1 text-green-600 focus:ring-green-500"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-green-800",children:e})]},e))})]})]}),"pattern"===K&&(0,cs.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-6",children:[(0,cs.jsx)("h4",{className:"text-lg font-medium text-purple-900 mb-4",children:"Pattern Schedule Options"}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Pattern Type"}),(0,cs.jsxs)("select",{value:G.pattern,onChange:e=>Y(t=>(0,Ie.A)((0,Ie.A)({},t),{},{pattern:e.target.value})),className:"w-full px-3 py-2 border border-purple-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,cs.jsx)("option",{value:"custom",children:"Custom Pattern"}),(0,cs.jsx)("option",{value:"peak_hours",children:"Peak Hours (6 AM - 9 AM, 5 PM - 8 PM)"}),(0,cs.jsx)("option",{value:"off_peak",children:"Off-Peak Hours (10 AM - 4 PM)"}),(0,cs.jsx)("option",{value:"night",children:"Night Service (10 PM - 6 AM)"})]})]}),"custom"===G.pattern&&(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Custom Time Slots"}),(0,cs.jsx)("div",{className:"grid grid-cols-4 gap-2",children:(()=>{const e=[];for(let t=0;t<24;t++)for(let s=0;s<60;s+=15){const r="".concat(t.toString().padStart(2,"0"),":").concat(s.toString().padStart(2,"0"));e.push(r)}return e})().slice(0,48).map(e=>(0,cs.jsx)("button",{type:"button",onClick:()=>{G.timeSlots.includes(e)?Y(t=>(0,Ie.A)((0,Ie.A)({},t),{},{timeSlots:t.timeSlots.filter(t=>t!==e)})):Y(t=>(0,Ie.A)((0,Ie.A)({},t),{},{timeSlots:[...t.timeSlots,e]}))},className:"px-2 py-1 text-xs rounded transition-colors ".concat(G.timeSlots.includes(e)?"bg-purple-600 text-white":"bg-purple-100 text-purple-700 hover:bg-purple-200"),children:ie(e)},e))})]})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Basic Frequency *"}),(0,cs.jsxs)("select",{name:"frequency",value:"add"===U?R.frequency:(null===L||void 0===L?void 0:L.frequency)||"",onChange:"add"===U?re:ae,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,cs.jsx)("option",{value:"",children:"Select frequency"}),(0,cs.jsx)("option",{value:"daily",children:"Daily"}),(0,cs.jsx)("option",{value:"weekly",children:"Weekly"}),(0,cs.jsx)("option",{value:"monthly",children:"Monthly"}),(0,cs.jsx)("option",{value:"weekdays",children:"Weekdays Only"}),(0,cs.jsx)("option",{value:"weekends",children:"Weekends Only"}),(0,cs.jsx)("option",{value:"custom",children:"Custom Pattern"})]})]}),(0,cs.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,cs.jsxs)("div",{className:"flex items-start",children:[(0,cs.jsx)("svg",{className:"w-5 h-5 text-yellow-600 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,cs.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,cs.jsx)("strong",{children:"Time Validation:"}),(()=>{const e="add"===U?R.departureTime:null===L||void 0===L?void 0:L.departureTime,t="add"===U?R.arrivalTime:null===L||void 0===L?void 0:L.arrivalTime;return e&&t?((e,t)=>{if(!e||!t)return!1;const[s,r]=e.split(":").map(Number),[a,n]=t.split(":").map(Number),i=60*s+r;let o=60*a+n;return o<=i&&(o+=1440),o>i})(e,t)?" Time validation passed. Schedule is valid.":" Invalid time combination. Arrival time must be after departure time.":" Please select both departure and arrival times."})()]})]})}),(0,cs.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[(0,cs.jsx)("button",{type:"button",onClick:ne,className:"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,cs.jsx)("button",{type:"submit",className:"px-6 py-2 text-white rounded-lg focus:outline-none focus:ring-2 ".concat("add"===U?"bg-green-600 hover:bg-green-700 focus:ring-green-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"),children:"add"===U?"Add Schedule":"Update Schedule"})]})]})]})}),(0,cs.jsx)("div",{className:"flex justify-end space-x-4 mt-6 pt-6 border-t",children:(0,cs.jsx)("button",{onClick:()=>g(!1),className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Close Schedule Manager"})})]})})]})};var nm=s(4105),im=s(2284);const om=(0,Ns.A)("store",[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]]);var lm=s(5711),cm=s(2313);const dm=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";const s="main"===t||"sub"===t?"depot":"opcenter";return"".concat(e.toLowerCase(),"-").concat(s,"@yatrik.com")},um=e=>"".concat(e,"@2024"),hm=e=>"".concat(e.toLowerCase(),"-manager"),mm=e=>{switch(e){case"main":return"Main Depot";case"sub":return"Sub Depot";case"operating":return"Operating Center";default:return"Depot"}},pm=e=>{switch(e){case"main":return"#E91E63";case"sub":return"#00BCD4";case"operating":return"#1976D2";default:return"#9E9E9E"}},xm=e=>{switch(e){case"main":default:return"\ud83c\udfe2";case"sub":return"\ud83c\udfea";case"operating":return"\ud83d\udccd"}},gm=()=>{var e,t,s,a,n,i,o,l,c,d,u,h;const[m,p]=(0,r.useState)([]),[x,g]=(0,r.useState)({totalDepots:0,mainDepots:0,subDepots:0,operatingCenters:0}),[f,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)({}),[A,S]=(te(),(0,r.useState)("")),[C,_]=(0,r.useState)("all"),[T,P]=(0,r.useState)(!1),[E,D]=(0,r.useState)(new Set),[M,O]=(0,r.useState)("cards"),[R,I]=(0,r.useState)(!1),[L,F]=(0,r.useState)(!1),[B,z]=(0,r.useState)(!1),[U,V]=(0,r.useState)(null),[K,W]=(0,r.useState)(null),[H,q]=(0,r.useState)(null),[G,Y]=(0,r.useState)(!1),[$,J]=(0,r.useState)(!1),[Q,X]=(0,r.useState)(!0),[Z,ee]=(0,r.useState)(!0),[se,re]=(0,r.useState)(""),[ae,ne]=(0,r.useState)(!1),[ie,oe]=(0,r.useState)({depotCode:"",depotName:"",category:"main",location:{address:"",city:"",state:"Kerala",pincode:""},contact:{phone:"",email:"",managerName:"",stdCode:""},capacity:{totalBuses:""},facilities:[],status:"active",operatingHours:{openTime:"06:00",closeTime:"22:00",workingDays:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"]}}),le=ie.depotCode?dm(ie.depotCode,ie.category):"",ce=ie.depotCode?hm(ie.depotCode):"",de=ie.depotCode?um(ie.depotCode):"";(0,r.useEffect)(()=>{he(),ue()},[]);const ue=async()=>{try{const e=await fetch("/api/depots/stats/overview",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();t.success&&g({totalDepots:t.data.totalDepots||0,mainDepots:t.data.mainDepots||0,subDepots:t.data.subDepots||0,operatingCenters:t.data.operatingCenters||0})}}catch(e){console.error("Error fetching depot stats:",e)}},he=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";try{y(!0);const t=new URLSearchParams;"all"!==e&&t.append("category",e);const s=await fetch("/api/admin/depots?".concat(t.toString()),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(s.ok){const e=await s.json(),t=(e.depots||e.data||[]).map(e=>{var t,s,r,a;const n=e.category||"main",i=e.depotCode||"",o=e.depotName||"";return(0,Ie.A)((0,Ie.A)({},e),{},{id:e._id||e.id,type:n,category:n,abbr:i,name:o,code:i,username:hm(i),email:dm(i,n),password:um(i),stdCode:(null===(t=e.contact)||void 0===t||null===(s=t.phone)||void 0===s?void 0:s.substring(0,4))||"0000",phoneNo:(null===(r=e.contact)||void 0===r||null===(a=r.phone)||void 0===a?void 0:a.substring(4))||"0000000",staff:Math.floor(20*Math.random())+5,createdAt:e.createdAt||(new Date).toISOString(),status:e.status||"active"})});p(t)}else console.error("Failed to fetch depots:",s.statusText),p([])}catch(t){console.error("Error fetching depots:",t),p([])}finally{y(!1)}},me=(e,t)=>{oe(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t}))},pe=(e,t)=>{oe(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t}))},xe=(e,t,s)=>{oe(r=>(0,Ie.A)((0,Ie.A)({},r),{},{[e]:(0,Ie.A)((0,Ie.A)({},r[e]),{},{[t]:s})}))},ge=(e=>{let t=0;return e?(e.length>=8&&t++,e.length>=12&&t++,/[A-Z]/.test(e)&&t++,/[a-z]/.test(e)&&t++,/[0-9]/.test(e)&&t++,/[^A-Za-z0-9]/.test(e)&&t++,Math.min(t,5)):0})(se),fe=ge<=2?"Weak":ge<=4?"Medium":"Strong",ye=ge<=2?"bg-red-500":ge<=4?"bg-amber-500":"bg-emerald-600",be=ge<=2?"text-red-600":ge<=4?"text-amber-600":"text-emerald-600",ve=(m||[]).filter(e=>{const t=(e.name||"").toLowerCase().includes(A.toLowerCase())||(e.abbr||"").toLowerCase().includes(A.toLowerCase())||(e.code||"").toLowerCase().includes(A.toLowerCase())||(e.depotName||"").toLowerCase().includes(A.toLowerCase())||(e.depotCode||"").toLowerCase().includes(A.toLowerCase()),s="all"===C||e.type===C||e.category===C,r=T||"active"===e.status;return t&&s&&r}),je=e=>{const t="Username: ".concat(e.username,"\nEmail: ").concat(e.email,"\nPassword: ").concat(e.password);navigator.clipboard.writeText(t),Oe.oR.success("Credentials copied to clipboard")},Ne=e=>{var t,s,r,a,n,i,o,l;V(e),oe({depotCode:e.depotCode||e.code,depotName:e.depotName||e.name,category:e.category||e.type,location:{address:(null===(t=e.location)||void 0===t?void 0:t.address)||"",city:(null===(s=e.location)||void 0===s?void 0:s.city)||"",state:(null===(r=e.location)||void 0===r?void 0:r.state)||"Kerala",pincode:(null===(a=e.location)||void 0===a?void 0:a.pincode)||""},contact:{phone:(null===(n=e.contact)||void 0===n?void 0:n.phone)||"".concat(e.stdCode||"").concat(e.phoneNo||""),email:(null===(i=e.contact)||void 0===i?void 0:i.email)||e.email,managerName:(null===(o=e.contact)||void 0===o?void 0:o.managerName)||"",stdCode:e.stdCode||""},capacity:{totalBuses:(null===(l=e.capacity)||void 0===l?void 0:l.totalBuses)||""},facilities:e.facilities||[],status:e.status||"active",operatingHours:e.operatingHours||{openTime:"06:00",closeTime:"22:00",workingDays:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"]}}),I(!0)},we=e=>w[e]&&(0,cs.jsx)("p",{className:"text-xs text-red-600 mt-1",children:w[e]});return(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Depot Management"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Manage bus depots and provision depot manager login"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("button",{onClick:()=>{he(C),ue()},className:"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg flex items-center gap-2 hover:bg-gray-50",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4"}),"Refresh"]}),(0,cs.jsxs)("button",{className:"px-4 py-2 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg flex items-center gap-2 hover:bg-gray-50",children:[(0,cs.jsx)(hd.A,{className:"w-4 h-4"}),"Export"]}),(0,cs.jsxs)("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg flex items-center gap-2 hover:bg-blue-700",children:[(0,cs.jsx)(bu.A,{className:"w-4 h-4"}),"Add Depot"]})]})]})}),(0,cs.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,cs.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,cs.jsx)("div",{className:"flex-1",children:(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(ys.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search depots by name, code, or address...",value:A,onChange:e=>S(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,cs.jsxs)("div",{className:"flex gap-3",children:[(0,cs.jsxs)("select",{value:C,onChange:e=>{_(e.target.value),he(e.target.value)},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"all",children:"All Types"}),(0,cs.jsx)("option",{value:"main",children:"Main Depots"}),(0,cs.jsx)("option",{value:"sub",children:"Sub Depots"}),(0,cs.jsx)("option",{value:"operating",children:"Operating Centers"})]}),(0,cs.jsxs)("button",{onClick:()=>P(!T),className:"px-3 py-2 border rounded-lg flex items-center gap-2 ".concat(T?"bg-blue-100 text-blue-700 border-blue-300":"text-gray-600 border-gray-300 hover:bg-gray-50"),children:[(0,cs.jsx)(Nu.A,{className:"w-4 h-4"}),"Show Inactive"]}),(0,cs.jsxs)("div",{className:"flex border border-gray-300 rounded-lg overflow-hidden",children:[(0,cs.jsx)("button",{onClick:()=>O("cards"),className:"px-3 py-2 ".concat("cards"===M?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-50"),children:(0,cs.jsx)(nm.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>O("list"),className:"px-3 py-2 ".concat("list"===M?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-50"),children:(0,cs.jsx)(im.A,{className:"w-4 h-4"})})]})]})]})}),(0,cs.jsxs)("div",{className:"px-6 py-4",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,cs.jsx)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Total Depots"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.totalDepots||0})]}),(0,cs.jsx)(fh,{className:"w-8 h-8 text-blue-600"})]})}),(0,cs.jsx)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Main Depots"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-pink-600",children:x.mainDepots||0})]}),(0,cs.jsx)(_s,{className:"w-8 h-8 text-pink-600"})]})}),(0,cs.jsx)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Sub Depots"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-cyan-600",children:x.subDepots||0})]}),(0,cs.jsx)(om,{className:"w-8 h-8 text-cyan-600"})]})}),(0,cs.jsx)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Operating Centers"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:x.operatingCenters||0})]}),(0,cs.jsx)(Ad,{className:"w-8 h-8 text-blue-600"})]})})]}),(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ve.map(e=>(0,cs.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 hover:shadow-lg transition-shadow duration-200",children:[(0,cs.jsx)("div",{className:"p-4 border-b border-gray-100",children:(0,cs.jsxs)("div",{className:"flex items-start justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-3",children:[(0,cs.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-white text-lg",style:{backgroundColor:pm(e.type)},children:xm(e.type)}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600",children:["Code: ",e.abbr]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status}),(0,cs.jsx)("button",{onClick:()=>{return t=e.id,void D(e=>{const s=new Set(e);return s.has(t)?s.delete(t):s.add(t),s});var t},className:"p-1 hover:bg-gray-100 rounded",children:E.has(e.id)?(0,cs.jsx)(lm.A,{className:"w-4 h-4 text-gray-500"}):(0,cs.jsx)(qd.A,{className:"w-4 h-4 text-gray-500"})})]})]})}),(0,cs.jsxs)("div",{className:"p-4 space-y-3",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,cs.jsx)(ad,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:[e.stdCode,"-",e.phoneNo]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,cs.jsx)(fh,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:["Capacity: ",e.capacity.totalBuses," buses"]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,cs.jsx)(Ss.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:["Staff: ",e.staff]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,cs.jsx)(Gh,{className:"w-4 h-4"}),(0,cs.jsx)("span",{className:"truncate",children:e.email})]})]}),E.has(e.id)&&(0,cs.jsx)("div",{className:"px-4 pb-4 border-t border-gray-100",children:(0,cs.jsxs)("div",{className:"pt-3 space-y-3",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Facilities"}),(0,cs.jsx)("div",{className:"flex flex-wrap gap-1",children:e.facilities.map((e,t)=>(0,cs.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:e.replace("_"," ")},t))})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Manager Credentials"}),(0,cs.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Username:"}),(0,cs.jsx)("span",{className:"text-sm font-mono",children:e.username})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Email:"}),(0,cs.jsx)("span",{className:"text-sm font-mono",children:e.email})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Password:"}),(0,cs.jsx)("span",{className:"text-sm font-mono",children:e.password})]}),(0,cs.jsxs)("button",{onClick:()=>je(e),className:"w-full mt-2 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 flex items-center justify-center gap-2",children:[(0,cs.jsx)(cm.A,{className:"w-3 h-3"}),"Copy Credentials"]})]})]})]})}),(0,cs.jsx)("div",{className:"px-4 pb-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("button",{onClick:()=>Ne(e),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded",title:"Edit Depot",children:(0,cs.jsx)(Kh.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>{q(e),z(!0)},className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded",title:"View Details",children:(0,cs.jsx)(Nu.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>{W(e),F(!0)},className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete Depot",children:(0,cs.jsx)(Wh.A,{className:"w-4 h-4"})})]}),(0,cs.jsx)("button",{className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded hover:bg-gray-50",children:(0,cs.jsx)(tm.A,{className:"w-4 h-4"})})]})})]},e.id))}),0===ve.length&&(0,cs.jsxs)("div",{className:"text-center py-12",children:[(0,cs.jsx)(fh,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No depots found"}),(0,cs.jsx)("p",{className:"text-gray-600 mb-4",children:"Try adjusting your search or filter criteria"}),(0,cs.jsx)("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create First Depot"})]})]}),b&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,cs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Create New Depot"}),(0,cs.jsx)("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,cs.jsx)(bh,{className:"w-5 h-5 text-gray-500"})})]})}),(0,cs.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=(()=>{const e={};return ie.depotCode&&ie.depotCode.trim()?/^[A-Za-z0-9]{3,10}$/.test(ie.depotCode.trim())||(e.depotCode="Depot Code must be 3-10 letters/numbers"):e.depotCode="Depot Code is required",ie.depotName&&ie.depotName.trim()||(e.depotName="Depot Name is required"),ie.location.address&&ie.location.address.trim()||(e["location.address"]="Address is required"),ie.location.city&&ie.location.city.trim()||(e["location.city"]="City is required"),ie.location.state&&ie.location.state.trim()||(e["location.state"]="State is required"),ie.location.pincode&&ie.location.pincode.trim()||(e["location.pincode"]="Pincode is required"),ie.contact.stdCode&&ie.contact.stdCode.trim()||(e["contact.stdCode"]="STD Code is required"),ie.contact.phone&&/^[0-9]{7,10}$/.test(ie.contact.phone.trim())||(e["contact.phone"]="Phone must be 7-10 digits"),Q||!ie.contact.email||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ie.contact.email.trim())||(e["contact.email"]="Invalid email address"),Z&&(!se||se.length<8)&&(e["account.password"]="Password must be at least 8 characters"),(!ie.capacity.totalBuses||Number(ie.capacity.totalBuses)<=0)&&(e["capacity.totalBuses"]="Total Buses must be greater than 0"),ie.operatingHours.openTime||(e["operatingHours.openTime"]="Opening time is required"),ie.operatingHours.closeTime||(e["operatingHours.closeTime"]="Closing time is required"),ie.operatingHours.workingDays&&0!==ie.operatingHours.workingDays.length||(e["operatingHours.workingDays"]="At least one working day must be selected"),e})();if(k(t),!(Object.keys(t).length>0))try{var s;N(!0);const e={depotCode:ie.depotCode.trim().toUpperCase(),depotName:ie.depotName.trim(),category:ie.category,location:{address:ie.location.address.trim(),city:ie.location.city.trim(),state:ie.location.state.trim(),pincode:ie.location.pincode.trim()},contact:{phone:ie.contact.phone.trim(),email:Q?le:(null===(s=ie.contact.email)||void 0===s?void 0:s.trim().toLowerCase())||le,manager:{name:ie.contact.managerName.trim()}},capacity:{totalBuses:parseInt(ie.capacity.totalBuses,10),availableBuses:parseInt(ie.capacity.totalBuses,10),maintenanceBuses:0},facilities:ie.facilities,status:ie.status||"active",operatingHours:{openTime:"06:00",closeTime:"22:00",workingDays:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"]},createUserAccount:Z,userAccount:Z?{username:ce,email:le,password:se||de,role:"depot_manager",permissions:["manage_buses","view_buses","manage_routes","view_routes","manage_schedules","view_schedules","view_reports","view_depot_info"]}:null},t=localStorage.getItem("token");if(!t)return void Oe.oR.error("Please log in to create depots");console.log("\ud83d\ude80 Sending create depot request:",e),console.log("\ud83d\udd11 Using token:",t?"".concat(t.substring(0,20),"..."):"No token"),console.log("\ud83d\udcca Request payload:",JSON.stringify(e,null,2));const r=await fetch("/api/admin/depots",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)});if(console.log("\ud83d\udce1 Response status:",r.status),console.log("\ud83d\udce1 Response ok:",r.ok),!r.ok){const e=await r.json();return console.error("\u274c Failed to create depot:",e),console.error("\u274c Error details:",{status:r.status,statusText:r.statusText,error:e}),e.details&&Array.isArray(e.details)&&(console.error("\u274c Validation errors:",e.details),e.details.forEach((e,t)=>{console.error("\u274c Validation error ".concat(t+1,":"),e)})),void(401===r.status?Oe.oR.error("Authentication failed. Please log in again."):403===r.status?Oe.oR.error("You do not have permission to create depots."):400===r.status?Oe.oR.error(e.message||e.error||"Invalid depot data. Please check your inputs."):Oe.oR.error(e.message||e.error||"Failed to create depot"))}{const e=await r.json();console.log("\u2705 Depot created successfully:",e),await he(),await ue(),Oe.oR.success("Depot created successfully"),v(!1)}oe({depotCode:"",depotName:"",category:"main",location:{address:"",city:"",state:"Kerala",pincode:""},contact:{phone:"",email:"",managerName:"",stdCode:""},capacity:{totalBuses:""},facilities:[],status:"active",operatingHours:{openTime:"06:00",closeTime:"22:00",workingDays:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"]}}),re(""),k({})}catch(r){console.error("\u274c Error:",r),Oe.oR.error(r.message||"Failed to create depot")}finally{N(!1)}},className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot Type *"}),(0,cs.jsxs)("select",{value:ie.category,onChange:e=>me("category",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"main",children:"Main Depot"}),(0,cs.jsx)("option",{value:"sub",children:"Sub Depot"}),(0,cs.jsx)("option",{value:"operating",children:"Operating Center"})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot Code *"}),(0,cs.jsx)("input",{type:"text",placeholder:"e.g., TVM, ALP",value:ie.depotCode,onChange:e=>me("depotCode",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),we("depotCode")]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot Name *"}),(0,cs.jsx)("input",{type:"text",placeholder:"e.g., Trivandrum Depot",value:ie.depotName,onChange:e=>me("depotName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),we("depotName")]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Location Information"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),(0,cs.jsx)("input",{type:"text",placeholder:"e.g., Main Road, Alappuzha",value:ie.location.address,onChange:e=>xe("location","address",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),we("location.address")]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),(0,cs.jsx)("input",{type:"text",placeholder:"e.g., Alappuzha",value:ie.location.city,onChange:e=>xe("location","city",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),we("location.city")]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),(0,cs.jsx)("input",{type:"text",placeholder:"e.g., Kerala",value:ie.location.state,onChange:e=>xe("location","state",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),we("location.state")]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pincode *"}),(0,cs.jsx)("input",{type:"text",placeholder:"e.g., 688001",value:ie.location.pincode,onChange:e=>xe("location","pincode",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),we("location.pincode")]})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"STD Code *"}),(0,cs.jsx)("input",{type:"text",placeholder:"e.g., 0471",value:ie.contact.stdCode,onChange:e=>xe("contact","stdCode",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),we("contact.stdCode")]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),(0,cs.jsx)("input",{type:"text",placeholder:"e.g., 2323979",value:ie.contact.phone,onChange:e=>xe("contact","phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),we("contact.phone")]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email Configuration"}),(0,cs.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,cs.jsx)("input",{type:"checkbox",checked:Q,onChange:e=>X(e.target.checked),className:"rounded"}),"Use auto-generated email"]})]}),(0,cs.jsx)("input",{type:"email",placeholder:"Enter email address",value:Q?le:ie.contact.email,onChange:e=>!Q&&xe("contact","email",e.target.value),disabled:Q,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100"}),Q&&le&&(0,cs.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Auto-generated: ",le]}),we("contact.email")]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bus Capacity *"}),(0,cs.jsx)("input",{type:"number",placeholder:"Enter total number of buses",value:ie.capacity.totalBuses,onChange:e=>xe("capacity","totalBuses",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),we("capacity.totalBuses")]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Operating Hours"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opening Time *"}),(0,cs.jsx)("input",{type:"time",value:ie.operatingHours.openTime,onChange:e=>xe("operatingHours","openTime",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),we("operatingHours.openTime")]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Closing Time *"}),(0,cs.jsx)("input",{type:"time",value:ie.operatingHours.closeTime,onChange:e=>xe("operatingHours","closeTime",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),we("operatingHours.closeTime")]})]}),(0,cs.jsxs)("div",{className:"mt-4",children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Working Days *"}),(0,cs.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}].map(e=>{let{value:t,label:s}=e;return(0,cs.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("input",{type:"checkbox",checked:ie.operatingHours.workingDays.includes(t),onChange:e=>{const s=ie.operatingHours.workingDays,r=e.target.checked?[...s,t]:s.filter(e=>e!==t);xe("operatingHours","workingDays",r)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:s})]},t)})}),we("operatingHours.workingDays")]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Facilities"}),(0,cs.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["Fuel_Station","Maintenance_Bay","Washing_Bay","Parking_Lot","Driver_Rest_Room","Canteen","Security_Office","Admin_Office","Training_Room","Spare_Parts_Store"].map(e=>(0,cs.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("input",{type:"checkbox",checked:ie.facilities.includes(e),onChange:t=>{oe(s=>(0,Ie.A)((0,Ie.A)({},s),{},{facilities:t.target.checked?[...s.facilities,e]:s.facilities.filter(t=>t!==e)}))},className:"rounded"}),(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:e.replaceAll("_"," ")})]},e))})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,cs.jsxs)("select",{value:ie.status,onChange:e=>me("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"inactive",children:"Inactive"}),(0,cs.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,cs.jsx)("option",{value:"closed",children:"Closed"})]})]}),(0,cs.jsxs)("div",{className:"border-t pt-4",children:[(0,cs.jsxs)("label",{className:"flex items-center gap-2 mb-3",children:[(0,cs.jsx)("input",{type:"checkbox",checked:Z,onChange:e=>ee(e.target.checked),className:"rounded"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Create Depot Manager login account"})]}),Z&&(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)("input",{type:ae?"text":"password",placeholder:"Enter password (min 8 chars)",value:se,onChange:e=>re(e.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,cs.jsx)("button",{type:"button",onClick:()=>ne(e=>!e),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:ae?(0,cs.jsx)(ju,{className:"w-4 h-4"}):(0,cs.jsx)(Nu.A,{className:"w-4 h-4"})})]}),we("account.password")]}),(0,cs.jsxs)("div",{className:"space-y-1",children:[(0,cs.jsx)("div",{className:"flex gap-1",children:[0,1,2,3,4].map(e=>(0,cs.jsx)("div",{className:"h-2 flex-1 rounded ".concat(e<ge?ye:"bg-gray-200")},e))}),(0,cs.jsxs)("div",{className:"text-xs ".concat(be),children:["Strength: ",fe]})]}),ie.depotCode&&(0,cs.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Auto-generated Credentials"}),(0,cs.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-blue-700",children:"Username:"}),(0,cs.jsx)("span",{className:"font-mono text-blue-900",children:ce})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-blue-700",children:"Email:"}),(0,cs.jsx)("span",{className:"font-mono text-blue-900",children:le})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-blue-700",children:"Password:"}),(0,cs.jsx)("span",{className:"font-mono text-blue-900",children:de})]})]})]})]})]}),(0,cs.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,cs.jsx)("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,cs.jsx)("button",{type:"submit",disabled:j,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:j?(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)(bu.A,{className:"w-4 h-4"}),"Create Depot"]})})]})]})]})}),B&&H&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,cs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Depot Details - ",H.name]}),(0,cs.jsx)("button",{onClick:()=>z(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,cs.jsx)(bh,{className:"w-5 h-5 text-gray-500"})})]})}),(0,cs.jsxs)("div",{className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Depot Code"}),(0,cs.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:H.code||H.depotCode})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Depot Name"}),(0,cs.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:H.name||H.depotName})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,cs.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:mm(H.category||H.type)})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,cs.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("active"===H.status?"bg-green-100 text-green-800":"inactive"===H.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:H.status||"Active"})]})]})]}),(0,cs.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Location Information"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),(0,cs.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:(null===(e=H.location)||void 0===e?void 0:e.city)||"N/A"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"State"}),(0,cs.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:(null===(t=H.location)||void 0===t?void 0:t.state)||"N/A"})]}),(0,cs.jsxs)("div",{className:"md:col-span-2",children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,cs.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:(null===(s=H.location)||void 0===s?void 0:s.address)||"N/A"})]})]})]}),(0,cs.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contact Information"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,cs.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:(null===(a=H.contact)||void 0===a?void 0:a.phone)||"".concat(H.stdCode||"").concat(H.phoneNo||"")||"N/A"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,cs.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:(null===(n=H.contact)||void 0===n?void 0:n.email)||H.email||"N/A"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Manager"}),(0,cs.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:(null===(i=H.contact)||void 0===i?void 0:i.managerName)||"N/A"})]})]})]}),(0,cs.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Capacity Information"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Total Buses"}),(0,cs.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:(null===(o=H.capacity)||void 0===o?void 0:o.totalBuses)||"N/A"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Available Buses"}),(0,cs.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:(null===(l=H.capacity)||void 0===l?void 0:l.availableBuses)||"N/A"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Staff Count"}),(0,cs.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:H.staff||"N/A"})]})]})]}),(0,cs.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Operating Hours"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Opening Time"}),(0,cs.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:(null===(c=H.operatingHours)||void 0===c?void 0:c.openTime)||"N/A"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Closing Time"}),(0,cs.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:(null===(d=H.operatingHours)||void 0===d?void 0:d.closeTime)||"N/A"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Working Days"}),(0,cs.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:(null===(u=H.operatingHours)||void 0===u||null===(h=u.workingDays)||void 0===h?void 0:h.length)>0?H.operatingHours.workingDays.join(", "):"N/A"})]})]})]}),(0,cs.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Manager Credentials"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,cs.jsx)("p",{className:"mt-1 text-sm font-mono text-gray-900",children:H.username||"N/A"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,cs.jsx)("p",{className:"mt-1 text-sm font-mono text-gray-900",children:H.email||"N/A"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,cs.jsx)("p",{className:"mt-1 text-sm font-mono text-gray-900",children:H.password||"N/A"})]}),(0,cs.jsx)("div",{className:"flex items-end",children:(0,cs.jsxs)("button",{onClick:()=>je(H),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 flex items-center gap-2",children:[(0,cs.jsx)(cm.A,{className:"w-3 h-3"}),"Copy Credentials"]})})]})]}),H.facilities&&H.facilities.length>0&&(0,cs.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Facilities"}),(0,cs.jsx)("div",{className:"flex flex-wrap gap-2",children:H.facilities.map((e,t)=>(0,cs.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e},t))})]}),(0,cs.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,cs.jsx)("button",{onClick:()=>z(!1),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Close"}),(0,cs.jsxs)("button",{onClick:()=>{z(!1),Ne(H)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,cs.jsx)(Kh.A,{className:"w-4 h-4"}),"Edit Depot"]})]})]})]})}),R&&U&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,cs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Edit Depot - ",U.name]}),(0,cs.jsx)("button",{onClick:()=>I(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,cs.jsx)(bh,{className:"w-5 h-5 text-gray-500"})})]})}),(0,cs.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{try{var e;Y(!0),k({});const t={};if(ie.depotCode.trim()||(t.depotCode="Depot code is required"),ie.depotName.trim()||(t.depotName="Depot name is required"),ie.location.address.trim()||(t["location.address"]="Address is required"),ie.location.city.trim()||(t["location.city"]="City is required"),ie.location.state.trim()||(t["location.state"]="State is required"),ie.location.pincode.trim()||(t["location.pincode"]="Pincode is required"),ie.contact.phone.trim()||(t["contact.phone"]="Phone is required"),(!ie.capacity.totalBuses||Number(ie.capacity.totalBuses)<=0)&&(t["capacity.totalBuses"]="Total Buses must be greater than 0"),Object.keys(t).length>0)return void k(t);const s={depotCode:ie.depotCode.trim().toUpperCase(),depotName:ie.depotName.trim(),category:ie.category,location:{address:ie.location.address.trim(),city:ie.location.city.trim(),state:ie.location.state.trim(),pincode:ie.location.pincode.trim()},contact:{phone:ie.contact.phone.trim(),email:null===(e=ie.contact.email)||void 0===e?void 0:e.trim().toLowerCase(),manager:{name:ie.contact.managerName.trim()}},capacity:{totalBuses:parseInt(ie.capacity.totalBuses,10),availableBuses:parseInt(ie.capacity.totalBuses,10),maintenanceBuses:0},facilities:ie.facilities,status:ie.status,operatingHours:ie.operatingHours},r=await fetch("/api/admin/depots/".concat(U.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(s)});if(r.ok)Oe.oR.success("Depot updated successfully"),I(!1),V(null),he();else{const e=await r.json();Oe.oR.error(e.message||"Failed to update depot")}}catch(t){console.error("Error updating depot:",t),Oe.oR.error("Failed to update depot")}finally{Y(!1)}})()},className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot Code *"}),(0,cs.jsx)("input",{type:"text",value:ie.depotCode,onChange:e=>pe("depotCode",e.target.value.toUpperCase()),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., ALP"}),we("depotCode")]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot Name *"}),(0,cs.jsx)("input",{type:"text",value:ie.depotName,onChange:e=>pe("depotName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., ALAPPUZHA"}),we("depotName")]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,cs.jsxs)("select",{value:ie.category,onChange:e=>pe("category",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"main",children:"Main Depot"}),(0,cs.jsx)("option",{value:"sub",children:"Sub Depot"}),(0,cs.jsx)("option",{value:"operating",children:"Operating Center"})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Location Information"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),(0,cs.jsx)("input",{type:"text",value:ie.location.city,onChange:e=>xe("location","city",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Alappuzha"}),we("location.city")]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),(0,cs.jsx)("input",{type:"text",value:ie.location.state,onChange:e=>xe("location","state",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Kerala"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,cs.jsx)("textarea",{value:ie.location.address,onChange:e=>xe("location","address",e.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Full address"})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Contact Information"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),(0,cs.jsx)("input",{type:"tel",value:ie.contact.phone,onChange:e=>xe("contact","phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 04772251518"}),we("contact.phone")]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,cs.jsx)("input",{type:"email",value:ie.contact.email,onChange:e=>xe("contact","email",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., manager@alappuzha.com"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Manager Name"}),(0,cs.jsx)("input",{type:"text",value:ie.contact.managerName,onChange:e=>xe("contact","managerName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., John Doe"})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Capacity Information"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Buses *"}),(0,cs.jsx)("input",{type:"number",min:"1",value:ie.capacity.totalBuses,onChange:e=>xe("capacity","totalBuses",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 25"}),we("capacity.totalBuses")]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Operating Hours"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opening Time *"}),(0,cs.jsx)("input",{type:"time",value:ie.operatingHours.openTime,onChange:e=>xe("operatingHours","openTime",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),we("operatingHours.openTime")]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Closing Time *"}),(0,cs.jsx)("input",{type:"time",value:ie.operatingHours.closeTime,onChange:e=>xe("operatingHours","closeTime",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),we("operatingHours.closeTime")]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Working Days *"}),(0,cs.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}].map(e=>{let{value:t,label:s}=e;return(0,cs.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("input",{type:"checkbox",checked:ie.operatingHours.workingDays.includes(t),onChange:e=>{const s=ie.operatingHours.workingDays,r=e.target.checked?[...s,t]:s.filter(e=>e!==t);xe("operatingHours","workingDays",r)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:s})]},t)})}),we("operatingHours.workingDays")]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,cs.jsxs)("select",{value:ie.status,onChange:e=>pe("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"inactive",children:"Inactive"}),(0,cs.jsx)("option",{value:"maintenance",children:"Under Maintenance"})]})]}),(0,cs.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,cs.jsx)("button",{type:"button",onClick:()=>I(!1),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,cs.jsx)("button",{type:"submit",disabled:G,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:G?(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4 animate-spin"}),"Updating..."]}):(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)(Kh.A,{className:"w-4 h-4"}),"Update Depot"]})})]})]})]})}),L&&K&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,cs.jsx)("div",{className:"bg-white rounded-xl max-w-md w-full",children:(0,cs.jsxs)("div",{className:"p-6",children:[(0,cs.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:(0,cs.jsx)(Wh.A,{className:"w-6 h-6 text-red-600"})}),(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 text-center mb-2",children:"Delete Depot"}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600 text-center mb-6",children:["Are you sure you want to delete ",(0,cs.jsx)("strong",{children:K.name}),"? This action cannot be undone and will also delete the associated depot manager account."]}),(0,cs.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-6",children:[(0,cs.jsxs)("p",{className:"text-sm text-red-800",children:[(0,cs.jsx)("strong",{children:"Warning:"})," This will permanently remove:"]}),(0,cs.jsxs)("ul",{className:"text-sm text-red-700 mt-1 list-disc list-inside",children:[(0,cs.jsx)("li",{children:"Depot information and settings"}),(0,cs.jsx)("li",{children:"Associated depot manager account"}),(0,cs.jsx)("li",{children:"All depot-related data"})]})]}),(0,cs.jsxs)("div",{className:"flex space-x-3",children:[(0,cs.jsx)("button",{onClick:()=>F(!1),className:"flex-1 px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",disabled:$,children:"Cancel"}),(0,cs.jsx)("button",{onClick:async()=>{try{J(!0);const e=await fetch("/api/admin/depots/".concat(K.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok)Oe.oR.success("Depot deleted successfully"),F(!1),W(null),he();else{const t=await e.json();Oe.oR.error(t.message||"Failed to delete depot")}}catch(e){console.error("Error deleting depot:",e),Oe.oR.error("Failed to delete depot")}finally{J(!1)}},disabled:$,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:$?(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)(Wh.A,{className:"w-4 h-4"}),"Delete Depot"]})})]})]})})})]})},fm=()=>(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,cs.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,cs.jsx)(gs.A,{className:"w-8 h-8 text-accent"}),(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Stop Management"})]}),(0,cs.jsx)("p",{className:"text-gray-600 mb-6",children:"Manage bus stops, locations, and stop configurations"}),(0,cs.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:(0,cs.jsxs)("p",{className:"text-blue-800 text-sm",children:[(0,cs.jsx)("strong",{children:"Coming Soon:"})," Stop management interface will be implemented here. This will include stop CRUD operations, location coordinates, and stop facilities."]})})]})})});var ym=s(4991);const bm=e=>{var t,s,a,n,i;let{title:o,trip:l,routes:c,buses:d,drivers:u,conductors:h,onClose:m,onSave:p}=e;const[x,g]=(0,r.useState)({routeId:(null===l||void 0===l||null===(t=l.routeId)||void 0===t?void 0:t._id)||"",busId:(null===l||void 0===l||null===(s=l.busId)||void 0===s?void 0:s._id)||"",driverId:(null===l||void 0===l||null===(a=l.driverId)||void 0===a?void 0:a._id)||"",conductorId:(null===l||void 0===l||null===(n=l.conductorId)||void 0===n?void 0:n._id)||"",serviceDate:null!==l&&void 0!==l&&l.serviceDate?l.serviceDate.split("T")[0]:"",startTime:(null===l||void 0===l?void 0:l.startTime)||"",endTime:(null===l||void 0===l?void 0:l.endTime)||"",fare:(null===l||void 0===l?void 0:l.fare)||0,status:(null===l||void 0===l?void 0:l.status)||"scheduled",depotId:(null===l||void 0===l||null===(i=l.depotId)||void 0===i?void 0:i._id)||"",notes:(null===l||void 0===l?void 0:l.notes)||""}),[f,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)({}),[j,N]=(0,r.useState)(Array.isArray(d)?d:[]);(0,r.useEffect)(()=>{console.log("\ud83d\ude8c TripModal: Modal opened with buses:",d),Array.isArray(d)&&d.length>0?N(d):(console.log("\ud83d\ude8c TripModal: No buses provided, fetching directly..."),w())},[d]);const w=async()=>{try{console.log("\ud83d\ude8c TripModal: Fetching buses directly...");const r=await(0,xs.nr)("/api/admin/buses");if(r.ok){var e,t,s;const a=(null===(e=r.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.buses)||(null===(s=r.data)||void 0===s?void 0:s.buses)||r.data||[],n=Array.isArray(a)?a:[];console.log("\ud83d\ude8c TripModal: Direct fetch got buses:",n.length),N(n)}}catch(r){console.error("\ud83d\ude8c TripModal: Direct fetch error:",r),N([])}},k=Array.isArray(j)?j.filter(e=>e&&"active"===e.status):[];console.log("\ud83d\ude8c TripModal: Buses data:",d),console.log("\ud83d\ude8c TripModal: Local buses:",j),console.log("\ud83d\ude8c TripModal: Available buses:",k),console.log("\ud83d\ude8c TripModal: First bus structure:",k[0]);const A=!0;return console.log("\ud83d\ude8c TripModal: Data loading status:",{busesLength:d.length,localBusesLength:j.length,isDataLoaded:A,buses:d,localBuses:j}),(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,cs.jsxs)("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[(0,cs.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:o}),(0,cs.jsx)("button",{onClick:m,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,cs.jsx)(bh,{className:"w-5 h-5"})})]}),(0,cs.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};x.routeId||(e.routeId="Route is required"),x.busId||(e.busId="Bus is required"),x.serviceDate||(e.serviceDate="Service date is required"),x.startTime||(e.startTime="Start time is required"),x.endTime||(e.endTime="End time is required"),x.startTime&&x.endTime&&x.startTime>=x.endTime&&(e.endTime="End time must be after start time"),x.fare<0&&(e.fare="Fare cannot be negative");const t=j.find(e=>e._id===x.busId);return null!==t&&void 0!==t&&t.depotId||x.depotId||(e.busId="Selected bus must have a depot assigned"),v(e),0===Object.keys(e).length})()){y(!0);try{const e=j.find(e=>e._id===x.busId),t=(null===e||void 0===e?void 0:e.depotId)||x.depotId;console.log("\ud83d\ude8c TripModal: Submitting trip with depotId:",t),console.log("\ud83d\ude8c TripModal: Selected bus:",e),await p((0,Ie.A)((0,Ie.A)({},x),{},{depotId:t,fare:parseFloat(x.fare)||0}))}catch(t){console.error("Error saving trip:",t),Oe.oR.error("Failed to save trip: "+(t.message||"Unknown error"))}finally{y(!1)}}else Oe.oR.error("Please fix the errors before submitting")},className:"p-6 space-y-4",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Route *"}),(0,cs.jsxs)("select",{value:x.routeId,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{routeId:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(b.routeId?"border-red-500":"border-gray-300"),required:!0,children:[(0,cs.jsx)("option",{value:"",children:"Select Route"}),(c||[]).map(e=>(0,cs.jsxs)("option",{value:e._id,children:[e.routeNumber," - ",e.routeName]},e._id))]}),b.routeId&&(0,cs.jsx)("p",{className:"text-red-500 text-xs mt-1",children:b.routeId})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bus *"}),(0,cs.jsxs)("select",{value:x.busId,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{busId:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(b.busId?"border-red-500":"border-gray-300"),required:!0,children:[(0,cs.jsx)("option",{value:"",children:0===k.length?"Loading buses...":"Select Bus"}),k.map(e=>{var t,s,r;console.log("\ud83d\ude8c TripModal: Rendering bus:",e);const a=e.busNumber||e.registrationNumber||(null===(t=e._id)||void 0===t?void 0:t.slice(-6))||"Unknown",n=e.busType||"Standard",i=(null===(s=e.assignedConductor)||void 0===s?void 0:s.name)||"No Conductor",o=(null===(r=e.capacity)||void 0===r?void 0:r.total)||"N/A";return(0,cs.jsxs)("option",{value:e._id,children:[a," - ",n," (Capacity: ",o,", Conductor: ",i,")"]},e._id)})]}),b.busId&&(0,cs.jsx)("p",{className:"text-red-500 text-xs mt-1",children:b.busId})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Driver"}),(0,cs.jsxs)("select",{value:x.driverId,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{driverId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"",children:"Select Driver"}),(u||[]).map(e=>(0,cs.jsxs)("option",{value:e._id,children:[e.name," (",e.driverId,")"]},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Conductor"}),(0,cs.jsxs)("select",{value:x.conductorId,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{conductorId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"",children:"Select Conductor"}),(h||[]).map(e=>(0,cs.jsxs)("option",{value:e._id,children:[e.name," (",e.conductorId,")"]},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Date *"}),(0,cs.jsx)("input",{type:"date",value:x.serviceDate,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{serviceDate:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(b.serviceDate?"border-red-500":"border-gray-300"),required:!0}),b.serviceDate&&(0,cs.jsx)("p",{className:"text-red-500 text-xs mt-1",children:b.serviceDate})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fare (\u20b9)"}),(0,cs.jsx)("input",{type:"number",value:x.fare,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{fare:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time *"}),(0,cs.jsx)("input",{type:"time",value:x.startTime,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{startTime:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(b.startTime?"border-red-500":"border-gray-300"),required:!0}),b.startTime&&(0,cs.jsx)("p",{className:"text-red-500 text-xs mt-1",children:b.startTime})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time *"}),(0,cs.jsx)("input",{type:"time",value:x.endTime,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{endTime:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(b.endTime?"border-red-500":"border-gray-300"),required:!0}),b.endTime&&(0,cs.jsx)("p",{className:"text-red-500 text-xs mt-1",children:b.endTime})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,cs.jsx)("textarea",{value:x.notes,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{notes:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Additional notes about the trip..."})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t",children:[(0,cs.jsx)("button",{type:"button",onClick:m,className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",disabled:f,children:"Cancel"}),(0,cs.jsxs)("button",{type:"submit",disabled:f,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[f&&(0,cs.jsx)(wu.A,{className:"w-4 h-4 animate-spin"}),(0,cs.jsx)("span",{children:f?"Saving...":l?"Update Trip":"Create Trip"})]})]})]})]})})},vm=()=>{const[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,d]=(0,r.useState)([]),[u,h]=(0,r.useState)(!0),[m,p]=(0,r.useState)(""),[x,g]=(0,r.useState)({status:"all",route:"all",date:""}),[f,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),[j,N]=(0,r.useState)(null),[w,k]=(0,r.useState)("list"),[A,S]=(0,r.useState)(null),C=(0,r.useCallback)(async()=>{try{console.log("\ud83d\ude8c AdminTrips: Fetching trips...");const a=new URLSearchParams(x).toString();console.log("\ud83d\ude8c AdminTrips: Query params:",a);const n=await(0,xs.nr)("/api/admin/trips?".concat(a));if(console.log("\ud83d\ude8c AdminTrips: Trips API response:",n),console.log("\ud83d\ude8c AdminTrips: Response status:",null===n||void 0===n?void 0:n.status),console.log("\ud83d\ude8c AdminTrips: Response ok:",null===n||void 0===n?void 0:n.ok),console.log("\ud83d\ude8c AdminTrips: Response data:",null===n||void 0===n?void 0:n.data),n.ok){var e,s,r;const a=(null===(e=n.data)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.trips)||(null===(r=n.data)||void 0===r?void 0:r.trips)||n.data||[];console.log("\ud83d\ude8c AdminTrips: Trips data extracted:",a),console.log("\ud83d\ude8c AdminTrips: Number of trips:",a.length),t(Array.isArray(a)?a:[]),console.log("\ud83d\ude8c AdminTrips: Trips state updated successfully")}else console.error("\ud83d\ude8c AdminTrips: Trips API error:",n),console.error("\ud83d\ude8c AdminTrips: Error message:",null===n||void 0===n?void 0:n.message),console.error("\ud83d\ude8c AdminTrips: Error status:",null===n||void 0===n?void 0:n.status),t([])}catch(A){throw console.error("\ud83d\ude8c AdminTrips: Error fetching trips:",A),console.error("\ud83d\ude8c AdminTrips: Error stack:",A.stack),t([]),A}},[x]),_=(0,r.useCallback)(async()=>{try{const t=await(0,xs.nr)("/api/admin/routes");if(t.ok){var e;const s=(null===(e=t.data)||void 0===e?void 0:e.routes)||t.data||[];a(Array.isArray(s)?s:[])}else a([])}catch(A){console.error("Error fetching routes:",A),a([])}},[]),T=(0,r.useCallback)(async()=>{try{console.log("\ud83d\ude8c AdminTrips: Fetching buses..."),console.log("\ud83d\ude8c AdminTrips: Making request to /api/admin/buses");const r=await(0,xs.nr)("/api/admin/buses");if(console.log("\ud83d\ude8c AdminTrips: Buses API response:",r),console.log("\ud83d\ude8c AdminTrips: Response status:",null===r||void 0===r?void 0:r.status),console.log("\ud83d\ude8c AdminTrips: Response ok:",null===r||void 0===r?void 0:r.ok),console.log("\ud83d\ude8c AdminTrips: Response data:",null===r||void 0===r?void 0:r.data),r.ok){var e,t,s;const a=(null===(e=r.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.buses)||(null===(s=r.data)||void 0===s?void 0:s.buses)||r.data||[];console.log("\ud83d\ude8c AdminTrips: Raw buses data:",a),console.log("\ud83d\ude8c AdminTrips: Number of buses:",a.length);const n=a.map(e=>({_id:e._id,busNumber:e.busNumber,registrationNumber:e.registrationNumber,busType:e.busType,status:e.status,capacity:e.capacity,amenities:e.amenities||[],depotId:e.depotId,assignedDriver:e.assignedDriver,assignedConductor:e.assignedConductor,maintenance:e.maintenance,fuel:e.fuel,notes:e.notes,createdAt:e.createdAt,updatedAt:e.updatedAt}));console.log("\ud83d\ude8c AdminTrips: Processed buses:",n),i(n),console.log("\ud83d\ude8c AdminTrips: Buses state updated successfully")}else console.error("\ud83d\ude8c AdminTrips: Buses API error:",r),i([])}catch(A){console.error("\ud83d\ude8c AdminTrips: Error fetching buses:",A),console.error("\ud83d\ude8c AdminTrips: Error stack:",A.stack),i([])}},[]),P=(0,r.useCallback)(async()=>{try{const[i,o]=await Promise.all([(0,xs.nr)("/api/admin/all-drivers"),(0,xs.nr)("/api/admin/all-conductors")]);if(i.ok){var e,t,s;const r=(null===(e=i.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.drivers)||(null===(s=i.data)||void 0===s?void 0:s.drivers)||i.data||[];l(Array.isArray(r)?r:[])}else l([]);if(o.ok){var r,a,n;const e=(null===(r=o.data)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.conductors)||(null===(n=o.data)||void 0===n?void 0:n.conductors)||o.data||[];d(Array.isArray(e)?e:[])}else d([])}catch(A){console.error("Error fetching staff:",A),l([]),d([])}},[]),E=(0,r.useCallback)(async()=>{h(!0);try{console.log("\ud83d\ude8c AdminTrips: Fetching all data..."),console.log("\ud83d\ude8c AdminTrips: Current user token:",localStorage.getItem("token")),console.log("\ud83d\ude8c AdminTrips: Depot token:",localStorage.getItem("depotToken"));if(!(localStorage.getItem("token")||localStorage.getItem("depotToken")))return console.error("\ud83d\ude8c AdminTrips: No authentication token found!"),Oe.oR.error("Please log in to access Trip Management"),void S(new Error("No authentication token found"));console.log("\ud83d\ude8c AdminTrips: Fetching buses first..."),await T(),h(!1),console.log("\ud83d\ude8c AdminTrips: Buses loaded, modal ready"),Promise.allSettled([C(),_(),P()]).then(e=>{console.log("\ud83d\ude8c AdminTrips: Background data fetch completed:",e);const t=e.filter(e=>"rejected"===e.status);t.length>0&&console.error("\ud83d\ude8c AdminTrips: Some background API calls failed:",t)})}catch(A){console.error("\ud83d\ude8c AdminTrips: Error fetching data:",A),console.error("\ud83d\ude8c AdminTrips: Error details:",{message:A.message,stack:A.stack,name:A.name}),S(A),Oe.oR.error("Failed to fetch data: "+A.message)}finally{h(!1)}},[T,C,_,P]);if((0,r.useEffect)(()=>{try{E()}catch(A){console.error("\ud83d\ude8c AdminTrips: useEffect error:",A),S(A)}},[x,E]),A)return console.error("\ud83d\ude8c AdminTrips: Component error:",A),(0,cs.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-red-600 text-lg font-semibold mb-2",children:"Error in Trip Management"}),(0,cs.jsx)("div",{className:"text-gray-600 mb-4",children:A.message}),(0,cs.jsx)("button",{onClick:()=>S(null),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Try Again"})]})});const D=async e=>{try{console.log("\ud83d\ude8c AdminTrips: Creating trip with data:",e);const t=await(0,xs.nr)("/api/admin/trips",{method:"POST",body:JSON.stringify(e)});console.log("\ud83d\ude8c AdminTrips: Trip creation response:",t),t.ok?(Oe.oR.success("Trip created successfully"),y(!1),console.log("\ud83d\ude8c AdminTrips: Refreshing trips list..."),await E(),console.log("\ud83d\ude8c AdminTrips: Trips list refreshed")):(console.error("\ud83d\ude8c AdminTrips: Trip creation failed:",t),Oe.oR.error("Failed to create trip: "+(t.message||"Unknown error")))}catch(A){console.error("\ud83d\ude8c AdminTrips: Trip creation error:",A),Oe.oR.error("Failed to create trip: "+A.message)}},M=async e=>{try{(await(0,xs.nr)("/api/admin/trips/".concat(j._id),{method:"PUT",body:JSON.stringify(e)})).ok?(Oe.oR.success("Trip updated successfully"),v(!1),N(null),C()):Oe.oR.error("Failed to update trip")}catch(A){Oe.oR.error("Failed to update trip")}},O=async(e,t)=>{try{await(0,xs.nr)("/api/admin/trips/".concat(e),{method:"PUT",body:JSON.stringify({status:t})}),Oe.oR.success("Trip ".concat(t," successfully")),C()}catch(A){Oe.oR.error("Failed to ".concat(t," trip"))}},R=e.filter(e=>{var t,s,r,a,n;const i=(null===(t=e.routeId)||void 0===t||null===(s=t.routeName)||void 0===s?void 0:s.toLowerCase().includes(m.toLowerCase()))||(null===(r=e.busId)||void 0===r||null===(a=r.busNumber)||void 0===a?void 0:a.toLowerCase().includes(m.toLowerCase())),o="all"===x.status||e.status===x.status,l="all"===x.route||(null===(n=e.routeId)||void 0===n?void 0:n._id)===x.route,c=!x.date||new Date(e.serviceDate).toDateString()===new Date(x.date).toDateString();return i&&o&&l&&c});console.log("\ud83d\ude8c AdminTrips: Current trips state:",e),console.log("\ud83d\ude8c AdminTrips: Filtered trips:",R),console.log("\ud83d\ude8c AdminTrips: Filters:",x),console.log("\ud83d\ude8c AdminTrips: Search term:",m);const I=e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800";case"running":return"bg-green-100 text-green-800";case"completed":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800"}},L=e=>{switch(e){case"scheduled":default:return(0,cs.jsx)(sd.A,{className:"w-4 h-4"});case"running":return(0,cs.jsx)(md.A,{className:"w-4 h-4"});case"completed":return(0,cs.jsx)(jd.A,{className:"w-4 h-4"});case"cancelled":return(0,cs.jsx)(bh,{className:"w-4 h-4"})}};return(()=>{try{return(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white shadow-sm sticky top-0 z-40",children:(0,cs.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,cs.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,cs.jsx)(ks.A,{className:"w-8 h-8 text-blue-600"}),"Trip Management"]}),(0,cs.jsx)("div",{className:"flex items-center gap-2",children:["list","calendar"].map(e=>(0,cs.jsx)("button",{onClick:()=>k(e),className:"px-4 py-2 rounded-lg font-medium transition-all ".concat(w===e?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})})}),(0,cs.jsx)("div",{className:"bg-white border-b sticky top-16 z-30",children:(0,cs.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,cs.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,cs.jsx)("div",{className:"flex-1 min-w-[300px]",children:(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(ys.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search trips...",value:m,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),(0,cs.jsxs)("select",{value:x.status,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{status:e.target.value})),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"all",children:"All Status"}),(0,cs.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,cs.jsx)("option",{value:"running",children:"Running"}),(0,cs.jsx)("option",{value:"completed",children:"Completed"}),(0,cs.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),(0,cs.jsxs)("select",{value:x.route,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{route:e.target.value})),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"all",children:"All Routes"}),(s||[]).map(e=>(0,cs.jsxs)("option",{value:e._id,children:[e.routeNumber," - ",e.routeName]},e._id))]}),(0,cs.jsx)("input",{type:"date",value:x.date,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{date:e.target.value})),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,cs.jsxs)("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,cs.jsx)(bu.A,{className:"w-5 h-5"}),"Add Trip"]}),(0,cs.jsxs)("button",{onClick:E,className:"px-4 py-2 border rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[(0,cs.jsx)(Od.A,{className:"w-5 h-5 ".concat(u?"animate-spin":"")}),"Refresh"]}),(0,cs.jsx)("button",{onClick:async()=>{try{var e;const t=await(0,xs.nr)("/api/admin/db-health");console.log("Database Health Check:",t),t.ok&&null!==(e=t.data)&&void 0!==e&&e.success?Oe.oR.success("Database Status: ".concat(t.data.data.status,"\nConnected: ").concat(t.data.data.database.connected,"\nTrips: ").concat(t.data.data.collections.trips)):Oe.oR.error("Database health check failed")}catch(A){console.error("Database health check error:",A),Oe.oR.error("Database health check failed: "+A.message)}},className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 flex items-center gap-2",children:"DB Health"}),(0,cs.jsx)("button",{onClick:async()=>{try{var e,t,r,a,i,l,d,u,h;const p={routeId:(null===(e=s[0])||void 0===e?void 0:e._id)||(null===(t=s[0])||void 0===t?void 0:t.id),busId:(null===(r=n[0])||void 0===r?void 0:r._id)||(null===(a=n[0])||void 0===a?void 0:a.id),driverId:(null===(i=o[0])||void 0===i?void 0:i._id)||(null===(l=o[0])||void 0===l?void 0:l.id),conductorId:(null===(d=c[0])||void 0===d?void 0:d._id)||(null===(u=c[0])||void 0===u?void 0:u.id),serviceDate:(new Date).toISOString().split("T")[0],startTime:"10:00",endTime:"12:00",status:"scheduled"};console.log("Creating test trip:",p);const x=await(0,xs.nr)("/api/admin/trips",{method:"POST",body:JSON.stringify(p)});if(x.ok&&null!==(h=x.data)&&void 0!==h&&h.trip){const e=x.data.trip._id;console.log("Test trip created with ID:",e),setTimeout(async()=>{var t;console.log("Deleting test trip:",e);const s=await(0,xs.nr)("/api/admin/trips/".concat(e),{method:"DELETE"});var r;s.ok&&null!==(t=s.data)&&void 0!==t&&t.success?(Oe.oR.success("Test trip created and deleted successfully!"),await C()):(console.error("Test trip delete failed:",s),Oe.oR.error("Test trip created but delete failed: "+((null===(r=s.data)||void 0===r?void 0:r.message)||"Unknown error")))},1e3),Oe.oR.success("Test trip created, testing delete...")}else{var m;console.error("Test trip creation failed:",x),Oe.oR.error("Test trip creation failed: "+((null===(m=x.data)||void 0===m?void 0:m.message)||"Unknown error"))}}catch(A){console.error("Test trip error:",A),Oe.oR.error("Test trip failed: "+A.message)}},className:"px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 flex items-center gap-2",children:"Test Trip Delete"})]})})}),(0,cs.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u?(0,cs.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,cs.jsx)(wu.A,{className:"w-8 h-8 animate-spin text-blue-600"})}):(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,cs.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,cs.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Trips (",R.length,")"]})}),(0,cs.jsxs)("div",{className:"overflow-x-auto",children:[(0,cs.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,cs.jsx)("thead",{className:"bg-gray-50",children:(0,cs.jsxs)("tr",{children:[(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trip Details"}),(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route"}),(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bus & Crew"}),(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Schedule"}),(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,cs.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(t=>{var s,r,a,n;return(0,cs.jsxs)(ed.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50",children:[(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.tripId||t._id}),(0,cs.jsxs)("div",{className:"text-sm text-gray-500",children:["Service Date: ",new Date(t.serviceDate).toLocaleDateString()]})]})}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)(As.A,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(null===(s=t.routeId)||void 0===s?void 0:s.routeName)||"Unknown Route"}),(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:(null===(r=t.routeId)||void 0===r?void 0:r.routeNumber)||"N/A"})]})]})}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("div",{className:"flex items-center text-sm",children:[(0,cs.jsx)(ks.A,{className:"w-4 h-4 text-gray-400 mr-1"}),(0,cs.jsx)("span",{className:"font-medium",children:(null===(a=t.busId)||void 0===a?void 0:a.busNumber)||"No Bus"})]}),(0,cs.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,cs.jsx)(Ss.A,{className:"w-4 h-4 text-gray-400 mr-1"}),(0,cs.jsx)("span",{children:(null===(n=t.driverId)||void 0===n?void 0:n.name)||"No Driver"})]})]})}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,cs.jsxs)("div",{className:"text-sm",children:[(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)(sd.A,{className:"w-4 h-4 text-gray-400 mr-1"}),(0,cs.jsxs)("span",{children:[t.startTime," - ",t.endTime]})]}),(0,cs.jsxs)("div",{className:"text-gray-500 text-xs mt-1",children:["Duration: ",t.estimatedDuration||"N/A"]})]})}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,cs.jsxs)("div",{className:"flex items-center",children:[L(t.status),(0,cs.jsx)("span",{className:"ml-2 px-2 py-1 text-xs font-medium rounded-full ".concat(I(t.status)),children:t.status})]})}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>{N(t),v(!0)},className:"text-blue-600 hover:text-blue-900",children:(0,cs.jsx)(Kh.A,{className:"w-4 h-4"})}),"scheduled"===t.status&&(0,cs.jsx)("button",{onClick:()=>O(t._id,"running"),className:"text-green-600 hover:text-green-900",children:(0,cs.jsx)(md.A,{className:"w-4 h-4"})}),"running"===t.status&&(0,cs.jsx)("button",{onClick:()=>O(t._id,"completed"),className:"text-orange-600 hover:text-orange-900",children:(0,cs.jsx)(ym.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>(async t=>{var s;const r=e.find(e=>e._id===t),a=r&&(r.tripNumber||(null===(s=r.routeId)||void 0===s?void 0:s.routeName))||"this trip";if(window.confirm('Are you sure you want to delete "'.concat(a,'"? This will permanently remove the trip from the database and cannot be undone.')))try{var n;h(!0),console.log("Deleting trip with ID:",t);const e=await(0,xs.nr)("/api/admin/trips/".concat(t),{method:"DELETE"});if(console.log("Delete trip response:",e),e.ok&&null!==(n=e.data)&&void 0!==n&&n.success)Oe.oR.success('Trip "'.concat(a,'" permanently deleted from database!')),await C();else{var i;console.error("Delete failed:",e);const t=(null===(i=e.data)||void 0===i?void 0:i.message)||e.message||"Unknown error";Oe.oR.error("Failed to delete trip: ".concat(t))}}catch(A){console.error("Error deleting trip:",A),Oe.oR.error("Failed to delete trip: ".concat(A.message||"Please try again"))}finally{h(!1)}})(t._id),disabled:u,className:"text-red-600 hover:text-red-900 disabled:opacity-50 disabled:cursor-not-allowed",title:u?"Deleting...":"Delete trip",children:u?(0,cs.jsx)(wu.A,{className:"w-4 h-4 animate-spin"}):(0,cs.jsx)(Wh.A,{className:"w-4 h-4"})})]})})]},t._id)})})]}),0===R.length&&(0,cs.jsxs)("div",{className:"text-center py-12",children:[(0,cs.jsx)(ks.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-500 text-lg",children:"No trips found"}),(0,cs.jsx)("p",{className:"text-gray-400",children:"Create your first trip to get started"})]})]})]})}),f&&(0,cs.jsx)(bm,{title:"Add New Trip",trip:null,routes:s,buses:n,drivers:o,conductors:c,onClose:()=>y(!1),onSave:D}),b&&j&&!u&&(0,cs.jsx)(bm,{title:"Edit Trip",trip:j,routes:s,buses:n,drivers:o,conductors:c,onClose:()=>{v(!1),N(null)},onSave:M})]})}catch(A){return console.error("\ud83d\ude8c AdminTrips: Render error:",A),S(A),(0,cs.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-red-600 text-lg font-semibold mb-2",children:"Render Error in Trip Management"}),(0,cs.jsx)("div",{className:"text-gray-600 mb-4",children:A.message}),(0,cs.jsx)("button",{onClick:()=>S(null),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Try Again"})]})})}})()},jm=()=>{const[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0),[n,i]=(0,r.useState)(""),[o,l]=(0,r.useState)("all"),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)("createdAt"),[m,p]=(0,r.useState)("desc"),[x,g]=(0,r.useState)(1),[f,y]=(0,r.useState)(20),[b,v]=(0,r.useState)([]),[j,N]=(0,r.useState)("table"),[w,k]=(0,r.useState)(!1),[A,S]=(0,r.useState)({totalBookings:0,confirmedBookings:0,pendingBookings:0,cancelledBookings:0,totalRevenue:0}),[C,_]=(0,r.useState)(!1),[T,P]=(0,r.useState)(!1),[E,D]=(0,r.useState)(!1),[M,O]=(0,r.useState)(!1),[R,I]=(0,r.useState)(null),[L,F]=(0,r.useState)(null),[B,z]=(0,r.useState)(null),[U,V]=(0,r.useState)(null),[K,W]=(0,r.useState)({tripId:"",routeId:"",busId:"",depotId:"",customer:{name:"",email:"",phone:"",age:"",gender:"",idProof:{type:"",number:""}},journey:{from:"",to:"",departureDate:"",departureTime:"",arrivalDate:"",arrivalTime:"",duration:0},seats:[{seatNumber:"",seatType:"seater",price:0}],pricing:{baseFare:0,seatFare:0,taxes:{gst:0,serviceTax:0,other:0},discounts:{earlyBird:0,loyalty:0,promo:0,other:0},totalAmount:0,paidAmount:0},payment:{method:"cash",paymentStatus:"pending"},specialRequests:{wheelchair:!1,meal:!1,blanket:!1,pillow:!1,other:""}}),[H,q]=(0,r.useState)([]),[G,Y]=(0,r.useState)([]),[$,J]=(0,r.useState)([]),[Q,X]=(0,r.useState)([]),Z=async()=>{try{a(!0);const h=new URLSearchParams((0,Ie.A)((0,Ie.A)((0,Ie.A)((0,Ie.A)({page:x,limit:f},n&&{search:n}),"all"!==o&&{status:o}),c&&{date:c}),{},{sortBy:u,sortOrder:m})),p=await(0,xs.nr)("/api/admin/bookings?".concat(h));if(p.ok){var e,s,r,i,l,d;const a=(null===(e=p.data)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.bookings)||(null===(r=p.data)||void 0===r?void 0:r.bookings)||[],n=(null===(i=p.data)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.stats)||(null===(d=p.data)||void 0===d?void 0:d.stats)||{};t(a),S(n)}else console.error("Failed to fetch bookings:",p.message)}catch(h){console.error("Error fetching bookings:",h)}finally{a(!1)}};(0,r.useEffect)(()=>{Z(),ee()},[x,f,n,o,c,u,m]);const ee=async()=>{try{var e,t,s,r;const[a,n,i,o]=await Promise.all([(0,xs.nr)("/api/admin/trips?limit=100"),(0,xs.nr)("/api/admin/routes?limit=100"),(0,xs.nr)("/api/admin/buses?limit=100"),(0,xs.nr)("/api/admin/depots?limit=100")]);null!==a&&void 0!==a&&a.ok&&q((null===(e=a.data)||void 0===e?void 0:e.trips)||a.data||[]),null!==n&&void 0!==n&&n.ok&&Y((null===(t=n.data)||void 0===t?void 0:t.routes)||n.data||[]),null!==i&&void 0!==i&&i.ok&&J((null===(s=i.data)||void 0===s?void 0:s.buses)||i.data||[]),null!==o&&void 0!==o&&o.ok&&X((null===(r=o.data)||void 0===r?void 0:r.depots)||o.data||[])}catch(a){console.error("Error fetching reference data:",a)}},te=async(e,s)=>{try{(await(0,xs.nr)("/api/admin/bookings/".concat(e,"/status"),{method:"PUT",body:JSON.stringify({status:s})})).ok?(t(t=>t.map(t=>t._id===e?(0,Ie.A)((0,Ie.A)({},t),{},{status:s}):t)),Oe.oR.success("Booking status updated successfully")):Oe.oR.error("Failed to update booking status")}catch(r){console.error("Error updating booking status:",r),Oe.oR.error("Failed to update booking status")}},se=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{const t=e?"/api/admin/bookings/".concat(U,"?force=true"):"/api/admin/bookings/".concat(U),s=await(0,xs.nr)(t,{method:"DELETE"});s.ok?(Oe.oR.success("Booking deleted successfully"),O(!1),V(null),Z()):Oe.oR.error(s.message||"Failed to delete booking")}catch(t){console.error("Error deleting booking:",t),Oe.oR.error("Failed to delete booking")}},re=()=>{W({tripId:"",routeId:"",busId:"",depotId:"",customer:{name:"",email:"",phone:"",age:"",gender:"",idProof:{type:"",number:""}},journey:{from:"",to:"",departureDate:"",departureTime:"",arrivalDate:"",arrivalTime:"",duration:0},seats:[{seatNumber:"",seatType:"seater",price:0}],pricing:{baseFare:0,seatFare:0,taxes:{gst:0,serviceTax:0,other:0},discounts:{earlyBird:0,loyalty:0,promo:0,other:0},totalAmount:0,paidAmount:0},payment:{method:"cash",paymentStatus:"pending"},specialRequests:{wheelchair:!1,meal:!1,blanket:!1,pillow:!1,other:""}})},ae=e=>{switch(e){case"confirmed":return"green";case"pending":return"yellow";case"cancelled":return"red";case"completed":return"blue";default:return"gray"}},ne=e=>{switch(e){case"confirmed":case"completed":return(0,cs.jsx)(jd.A,{className:"w-4 h-4"});case"pending":return(0,cs.jsx)(sd.A,{className:"w-4 h-4"});case"cancelled":return(0,cs.jsx)(bh,{className:"w-4 h-4"});default:return(0,cs.jsx)(Nd.A,{className:"w-4 h-4"})}},ie=e=>new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}),oe=e=>new Date(e).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}),le=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e);return s?(0,cs.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,cs.jsx)("span",{className:"ml-2",children:"Loading bookings..."})]}):(0,cs.jsxs)("div",{className:"p-6",children:[(0,cs.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Booking Management"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Manage all passenger bookings and reservations"})]}),(0,cs.jsxs)("button",{onClick:()=>{re(),_(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[(0,cs.jsx)(bu.A,{className:"w-4 h-4"}),"Create Booking"]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[(0,cs.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,cs.jsx)(fs.A,{className:"w-6 h-6 text-blue-600"})}),(0,cs.jsxs)("div",{className:"ml-3",children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Bookings"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:A.totalBookings})]})]})}),(0,cs.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,cs.jsx)(jd.A,{className:"w-6 h-6 text-green-600"})}),(0,cs.jsxs)("div",{className:"ml-3",children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Confirmed"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:A.confirmedBookings})]})]})}),(0,cs.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,cs.jsx)(sd.A,{className:"w-6 h-6 text-yellow-600"})}),(0,cs.jsxs)("div",{className:"ml-3",children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:A.pendingBookings})]})]})}),(0,cs.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,cs.jsx)(bh,{className:"w-6 h-6 text-red-600"})}),(0,cs.jsxs)("div",{className:"ml-3",children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Cancelled"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:A.cancelledBookings})]})]})}),(0,cs.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,cs.jsx)(Es.A,{className:"w-6 h-6 text-green-600"})}),(0,cs.jsxs)("div",{className:"ml-3",children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:le(A.totalRevenue)})]})]})})]}),(0,cs.jsx)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:(0,cs.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,cs.jsx)("div",{className:"flex-1",children:(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(ys.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search by Booking ID, Reference, passenger name, phone, email...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:n,onChange:e=>i(e.target.value)})]})}),(0,cs.jsxs)("div",{className:"flex gap-2",children:[(0,cs.jsx)("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:o,onChange:e=>l(e.target.value),children:[{value:"all",label:"All Status"},{value:"pending",label:"Pending"},{value:"confirmed",label:"Confirmed"},{value:"cancelled",label:"Cancelled"},{value:"completed",label:"Completed"},{value:"no_show",label:"No Show"},{value:"refunded",label:"Refunded"}].map(e=>(0,cs.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,cs.jsx)("input",{type:"date",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:c,onChange:e=>d(e.target.value)}),(0,cs.jsxs)("button",{onClick:Z,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4"}),"Refresh"]})]})]})}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,cs.jsx)("div",{className:"overflow-x-auto",children:(0,cs.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,cs.jsx)("thead",{className:"bg-gray-50",children:(0,cs.jsxs)("tr",{children:[(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Booking ID"}),(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Passenger"}),(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trip Details"}),(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Booking Date"}),(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,cs.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{var t,s,r,a,n,i,o,l,c,d,u;return(0,cs.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,cs.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.bookingId}),(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:e.bookingReference})]}),(0,cs.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,cs.jsx)("div",{className:"text-sm text-gray-900",children:null===(t=e.customer)||void 0===t?void 0:t.name}),(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:null===(s=e.customer)||void 0===s?void 0:s.phone}),(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:null===(r=e.customer)||void 0===r?void 0:r.email})]}),(0,cs.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,cs.jsx)("div",{className:"text-sm text-gray-900",children:(null===(a=e.tripId)||void 0===a||null===(n=a.routeId)||void 0===n?void 0:n.routeName)||"N/A"}),(0,cs.jsxs)("div",{className:"text-sm text-gray-500",children:[(null===(i=e.tripId)||void 0===i||null===(o=i.busId)||void 0===o?void 0:o.busNumber)||"N/A"," \u2022 ",(null===(l=e.seats)||void 0===l?void 0:l.map(e=>e.seatNumber).join(", "))||"N/A"]}),(0,cs.jsxs)("div",{className:"text-sm text-gray-500",children:[ie(null===(c=e.tripId)||void 0===c?void 0:c.serviceDate)," \u2022 ",null===(d=e.tripId)||void 0===d?void 0:d.startTime]})]}),(0,cs.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,cs.jsx)("div",{className:"text-sm text-gray-900",children:ie(e.createdAt)}),(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:oe(e.createdAt)})]}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:le((null===(u=e.pricing)||void 0===u?void 0:u.totalAmount)||0)})}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,cs.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-".concat(ae(e.status),"-100 text-").concat(ae(e.status),"-800"),children:[ne(e.status),(0,cs.jsx)("span",{className:"ml-1 capitalize",children:e.status})]})}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,cs.jsxs)("div",{className:"flex space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>(async e=>{try{const t=await(0,xs.nr)("/api/admin/bookings/".concat(e));t.ok?(z(t.data),D(!0)):Oe.oR.error("Failed to fetch booking details")}catch(t){console.error("Error fetching booking:",t),Oe.oR.error("Failed to fetch booking details")}})(e._id),className:"text-blue-600 hover:text-blue-900",title:"View Details",children:(0,cs.jsx)(Nu.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>(e=>{var t,s,r,a,n,i,o,l,c,d;F(e),W({tripId:(null===(t=e.tripId)||void 0===t?void 0:t._id)||e.tripId||"",routeId:(null===(s=e.routeId)||void 0===s?void 0:s._id)||e.routeId||"",busId:(null===(r=e.busId)||void 0===r?void 0:r._id)||e.busId||"",depotId:(null===(a=e.depotId)||void 0===a?void 0:a._id)||e.depotId||"",customer:{name:(null===(n=e.customer)||void 0===n?void 0:n.name)||"",email:(null===(i=e.customer)||void 0===i?void 0:i.email)||"",phone:(null===(o=e.customer)||void 0===o?void 0:o.phone)||"",age:(null===(l=e.customer)||void 0===l?void 0:l.age)||"",gender:(null===(c=e.customer)||void 0===c?void 0:c.gender)||"",idProof:(null===(d=e.customer)||void 0===d?void 0:d.idProof)||{type:"",number:""}},journey:e.journey||{},seats:e.seats||[{seatNumber:"",seatType:"seater",price:0}],pricing:e.pricing||{},payment:e.payment||{method:"cash",paymentStatus:"pending"},specialRequests:e.specialRequests||{}}),P(!0)})(e),className:"text-green-600 hover:text-green-900",title:"Edit Booking",children:(0,cs.jsx)(Kh.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>{return t=e._id,V(t),void O(!0);var t},className:"text-red-600 hover:text-red-900",title:"Delete Booking",children:(0,cs.jsx)(Wh.A,{className:"w-4 h-4"})}),"pending"===e.status&&(0,cs.jsx)("button",{onClick:()=>te(e._id,"confirmed"),className:"text-green-600 hover:text-green-900",title:"Confirm Booking",children:(0,cs.jsx)(Sh.A,{className:"w-4 h-4"})}),"confirmed"===e.status&&(0,cs.jsx)("button",{onClick:()=>te(e._id,"cancelled"),className:"text-red-600 hover:text-red-900",title:"Cancel Booking",children:(0,cs.jsx)(Bs.A,{className:"w-4 h-4"})})]})})]},e._id)})})]})}),0===e.length&&(0,cs.jsxs)("div",{className:"text-center py-12",children:[(0,cs.jsx)(fs.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,cs.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No bookings found"}),(0,cs.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:n||"all"!==o||c?"Try adjusting your search or filters":"No bookings have been made yet"})]})]}),e.length>0&&(0,cs.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(x-1)*f+1," to ",Math.min(x*f,A.totalBookings)," of ",A.totalBookings," bookings"]}),(0,cs.jsxs)("div",{className:"flex space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>g(e=>Math.max(1,e-1)),disabled:1===x,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,cs.jsx)("button",{onClick:()=>g(e=>e+1),disabled:x*f>=A.totalBookings,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}),C&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,cs.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,cs.jsx)("h2",{className:"text-xl font-bold",children:"Create New Booking"}),(0,cs.jsx)("button",{onClick:()=>_(!1),className:"text-gray-500 hover:text-gray-700",children:(0,cs.jsx)(Bs.A,{className:"w-6 h-6"})})]}),(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),(0,cs.jsx)("input",{type:"text",value:K.customer.name,onChange:e=>W(t=>(0,Ie.A)((0,Ie.A)({},t),{},{customer:(0,Ie.A)((0,Ie.A)({},t.customer),{},{name:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter customer name"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,cs.jsx)("input",{type:"email",value:K.customer.email,onChange:e=>W(t=>(0,Ie.A)((0,Ie.A)({},t),{},{customer:(0,Ie.A)((0,Ie.A)({},t.customer),{},{email:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,cs.jsx)("input",{type:"tel",value:K.customer.phone,onChange:e=>W(t=>(0,Ie.A)((0,Ie.A)({},t),{},{customer:(0,Ie.A)((0,Ie.A)({},t.customer),{},{phone:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter phone number"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age"}),(0,cs.jsx)("input",{type:"number",value:K.customer.age,onChange:e=>W(t=>(0,Ie.A)((0,Ie.A)({},t),{},{customer:(0,Ie.A)((0,Ie.A)({},t.customer),{},{age:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter age"})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From"}),(0,cs.jsx)("input",{type:"text",value:K.journey.from,onChange:e=>W(t=>(0,Ie.A)((0,Ie.A)({},t),{},{journey:(0,Ie.A)((0,Ie.A)({},t.journey),{},{from:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Departure location"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To"}),(0,cs.jsx)("input",{type:"text",value:K.journey.to,onChange:e=>W(t=>(0,Ie.A)((0,Ie.A)({},t),{},{journey:(0,Ie.A)((0,Ie.A)({},t.journey),{},{to:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Destination"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Departure Date"}),(0,cs.jsx)("input",{type:"date",value:K.journey.departureDate,onChange:e=>W(t=>(0,Ie.A)((0,Ie.A)({},t),{},{journey:(0,Ie.A)((0,Ie.A)({},t.journey),{},{departureDate:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Departure Time"}),(0,cs.jsx)("input",{type:"time",value:K.journey.departureTime,onChange:e=>W(t=>(0,Ie.A)((0,Ie.A)({},t),{},{journey:(0,Ie.A)((0,Ie.A)({},t.journey),{},{departureTime:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trip"}),(0,cs.jsxs)("select",{value:K.tripId,onChange:e=>W(t=>(0,Ie.A)((0,Ie.A)({},t),{},{tripId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"",children:"Select Trip"}),H.map(e=>{var t;return(0,cs.jsxs)("option",{value:e._id,children:[e.tripNumber||e._id," - ",(null===(t=e.routeId)||void 0===t?void 0:t.routeName)||"Unknown Route"]},e._id)})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Depot"}),(0,cs.jsxs)("select",{value:K.depotId,onChange:e=>W(t=>(0,Ie.A)((0,Ie.A)({},t),{},{depotId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"",children:"Select Depot"}),Q.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.depotName||e.name},e._id))]})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Amount"}),(0,cs.jsx)("input",{type:"number",value:K.pricing.totalAmount,onChange:e=>W(t=>(0,Ie.A)((0,Ie.A)({},t),{},{pricing:(0,Ie.A)((0,Ie.A)({},t.pricing),{},{totalAmount:parseFloat(e.target.value)||0})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter total amount"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method"}),(0,cs.jsxs)("select",{value:K.payment.method,onChange:e=>W(t=>(0,Ie.A)((0,Ie.A)({},t),{},{payment:(0,Ie.A)((0,Ie.A)({},t.payment),{},{method:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"cash",children:"Cash"}),(0,cs.jsx)("option",{value:"card",children:"Card"}),(0,cs.jsx)("option",{value:"upi",children:"UPI"}),(0,cs.jsx)("option",{value:"netbanking",children:"Net Banking"})]})]})]})]}),(0,cs.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,cs.jsx)("button",{onClick:()=>_(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,cs.jsxs)("button",{onClick:async()=>{try{const e=await(0,xs.nr)("/api/admin/bookings",{method:"POST",body:JSON.stringify(K)});e.ok?(Oe.oR.success("Booking created successfully"),_(!1),re(),Z()):Oe.oR.error(e.message||"Failed to create booking")}catch(e){console.error("Error creating booking:",e),Oe.oR.error("Failed to create booking")}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,cs.jsx)(Uh.A,{className:"w-4 h-4"}),"Create Booking"]})]})]})}),M&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,cs.jsxs)("div",{className:"flex items-center mb-4",children:[(0,cs.jsx)(Nd.A,{className:"w-8 h-8 text-red-600 mr-3"}),(0,cs.jsx)("h2",{className:"text-xl font-bold",children:"Confirm Deletion"})]}),(0,cs.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this booking? This action cannot be undone."}),(0,cs.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,cs.jsx)("button",{onClick:()=>O(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,cs.jsx)("button",{onClick:()=>se(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Force Delete"}),(0,cs.jsx)("button",{onClick:()=>se(!1),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})})]})},Nm=()=>(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,cs.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,cs.jsx)(sd.A,{className:"w-8 h-8 text-accent"}),(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Duty Management"})]}),(0,cs.jsx)("p",{className:"text-gray-600 mb-6",children:"Manage conductor duties, validations, and duty assignments"}),(0,cs.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:(0,cs.jsxs)("p",{className:"text-blue-800 text-sm",children:[(0,cs.jsx)("strong",{children:"Coming Soon:"})," Duty management interface will be implemented here. This will include duty monitoring, validation tracking, and force close operations."]})})]})})});var wm=s(1884);const km=(0,Ns.A)("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]),Am=(0,Ns.A)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Sm=e=>{let{isOpen:t,onClose:s,staffType:a,onAssign:n}=e;const[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[d,u]=(0,r.useState)([]),[h,m]=(0,r.useState)(""),[p,x]=(0,r.useState)(""),[g,f]=(0,r.useState)([]),[y,b]=(0,r.useState)(""),[v,j]=(0,r.useState)("active"),[N,w]=(0,r.useState)(!1),[k,A]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&S()},[t,a]),(0,r.useEffect)(()=>{h&&C(h)},[h]);const S=async()=>{w(!0);try{const s="drivers"===a?"driver":"conductor",[r,n]=await Promise.all([(0,xs.nr)("/api/admin/depots"),(0,xs.nr)("/api/admin/users?role=".concat(s))]);if(null!==r&&void 0!==r&&r.ok){var e;const t=r.data||{};o(t.depots||(null===(e=t.data)||void 0===e?void 0:e.depots)||[])}if(null!==n&&void 0!==n&&n.ok){var t;const e=n.data||{},s=e.users||(null===(t=e.data)||void 0===t?void 0:t.users)||e.data||[];u(Array.isArray(s)?s:[])}}catch(s){console.error("Error fetching data:",s)}finally{w(!1)}},C=async e=>{try{const t=await(0,xs.nr)("/api/routes?depotId=".concat(e));if(null!==t&&void 0!==t&&t.ok){const s=t.data,r=Array.isArray(null===s||void 0===s?void 0:s.routes)?s.routes:Array.isArray(null===s||void 0===s?void 0:s.data)?s.data:[];console.log("Loaded routes for depot",e,r),c(r)}}catch(t){console.error("Error fetching routes:",t)}},_=d.filter(e=>{var t,s,r;const n=!y||e.name.toLowerCase().includes(y.toLowerCase())||e.email.toLowerCase().includes(y.toLowerCase())||e.phone.includes(y)||e.employeeCode&&e.employeeCode.toLowerCase().includes(y.toLowerCase()),i=e.status||e.state||"active",o="all"===v||i===v,l=!h||"object"===typeof e.depotId&&(null===(t=e.depotId)||void 0===t?void 0:t._id)===h||"string"===typeof e.depotId&&e.depotId===h||"object"===typeof e.depot&&((null===(s=e.depot)||void 0===s?void 0:s._id)===h||(null===(r=e.depot)||void 0===r?void 0:r.depotId)===h),c=("drivers"===a?["driver","DRIVER"]:["conductor","CONDUCTOR"]).includes((e.role||"").toLowerCase());return n&&o&&l&&c}),T=e=>{f(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},P=e=>{const t=i.find(t=>t._id===e);return t?t.name||t.depotName:"Unknown Depot"},E=e=>{const t={active:{color:"bg-green-100 text-green-800",icon:jd.A},inactive:{color:"bg-gray-100 text-gray-800",icon:bh},suspended:{color:"bg-red-100 text-red-800",icon:vd.A}}[e]||{color:"bg-gray-100 text-gray-800",icon:vd.A},s=t.icon;return(0,cs.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1 ".concat(t.color),children:[(0,cs.jsx)(s,{className:"w-3 h-3"}),e]})},D=e=>{var t,s,r,a,n,i,o,l;if(!e)return"Unknown route";const c=e.routeName||e.name||e.routeNumber||"",d=(null===(t=e.startingPoint)||void 0===t?void 0:t.city)||(null===(s=e.startPoint)||void 0===s?void 0:s.city)||(null===(r=e.startPoint)||void 0===r?void 0:r.name)||e.startPoint||(null===(a=e.origin)||void 0===a?void 0:a.city)||e.fromCity||e.from,u=(null===(n=e.endingPoint)||void 0===n?void 0:n.city)||(null===(i=e.endPoint)||void 0===i?void 0:i.city)||(null===(o=e.endPoint)||void 0===o?void 0:o.name)||e.endPoint||(null===(l=e.destination)||void 0===l?void 0:l.city)||e.toCity||e.to;return d||u?"".concat(c?c+" \u2014 ":"").concat(d||"?"," to ").concat(u||"?"):c||"Unnamed route"};return t?(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-40",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden lg:ml-64",children:[(0,cs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:["drivers"===a?(0,cs.jsx)(Lh,{className:"w-8 h-8 text-blue-600"}):(0,cs.jsx)(Fh,{className:"w-8 h-8 text-purple-600"}),(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["Bulk Assign ","drivers"===a?"Drivers":"Conductors"]}),(0,cs.jsxs)("p",{className:"text-gray-600",children:["Assign multiple ",a," to a specific route under a depot"]})]})]}),(0,cs.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 p-2 rounded-lg hover:bg-gray-100",children:(0,cs.jsx)(bh,{className:"w-6 h-6"})})]})}),(0,cs.jsxs)("div",{className:"flex h-[calc(90vh-120px)]",children:[(0,cs.jsx)("div",{className:"w-1/2 border-r border-gray-200 p-6",children:(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Depot *"}),(0,cs.jsxs)("select",{value:h,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"",children:"Choose a depot"}),i.map(e=>(0,cs.jsxs)("option",{value:e._id,children:[e.name||e.depotName," (",e.depotCode||e.code,")"]},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Route *"}),(0,cs.jsxs)("select",{value:p,onChange:e=>x(e.target.value),disabled:!h,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100",children:[(0,cs.jsx)("option",{value:"",children:"Choose a route"}),l.map(e=>(0,cs.jsx)("option",{value:e._id,children:D(e)},e._id))]})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Select ","drivers"===a?"Drivers":"Conductors"]}),(0,cs.jsxs)("div",{className:"flex space-x-2",children:[(0,cs.jsxs)("button",{onClick:()=>{const e=_.map(e=>e._id);f(e)},className:"text-sm text-blue-600 hover:text-blue-700 flex items-center",children:[(0,cs.jsx)(bu.A,{className:"w-4 h-4 mr-1"}),"Select All"]}),(0,cs.jsxs)("button",{onClick:()=>{f([])},className:"text-sm text-gray-600 hover:text-gray-700 flex items-center",children:[(0,cs.jsx)(Am,{className:"w-4 h-4 mr-1"}),"Deselect All"]})]})]}),(0,cs.jsxs)("div",{className:"flex space-x-4 mb-4",children:[(0,cs.jsx)("div",{className:"flex-1",children:(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(ys.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search ".concat(a,"..."),value:y,onChange:e=>b(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,cs.jsxs)("select",{value:v,onChange:e=>j(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"all",children:"All Status"}),(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"inactive",children:"Inactive"}),(0,cs.jsx)("option",{value:"suspended",children:"Suspended"})]})]}),(0,cs.jsx)("div",{className:"border border-gray-200 rounded-lg max-h-96 overflow-y-auto",children:N?(0,cs.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,cs.jsx)(Od.A,{className:"w-6 h-6 animate-spin text-blue-600"})}):0===_.length?(0,cs.jsxs)("div",{className:"text-center py-8 text-gray-500",children:["No ",a," found matching your criteria"]}):(0,cs.jsx)("div",{className:"divide-y divide-gray-200",children:_.map(e=>{var t,s;return(0,cs.jsx)("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors ".concat(g.includes(e._id)?"bg-blue-50 border-l-4 border-blue-500":""),onClick:()=>T(e._id),children:(0,cs.jsxs)("div",{className:"flex items-center space-x-3",onClick:e=>e.stopPropagation(),children:[(0,cs.jsx)("input",{type:"checkbox",checked:g.includes(e._id),onChange:t=>{t.stopPropagation(),T(e._id)},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer"}),(0,cs.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-white font-semibold text-sm",children:(null===(t=e.name)||void 0===t||null===(s=t.charAt(0))||void 0===s?void 0:s.toUpperCase())||"S"})}),(0,cs.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),E(e.status)]}),(0,cs.jsx)("p",{className:"text-sm text-gray-500 truncate",children:e.email}),(0,cs.jsxs)("p",{className:"text-xs text-gray-400",children:[e.employeeCode||"No ID"," \u2022 ",P(e.depotId)]})]})]})},e._id)})})})]})]})}),(0,cs.jsx)("div",{className:"w-1/2 p-6",children:(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Assignment Summary"}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,cs.jsx)(_s,{className:"w-5 h-5 text-gray-600"}),(0,cs.jsx)("span",{className:"font-medium text-gray-900",children:"Depot"})]}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:h?P(h):"No depot selected"})]}),(0,cs.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,cs.jsx)(As.A,{className:"w-5 h-5 text-gray-600"}),(0,cs.jsx)("span",{className:"font-medium text-gray-900",children:"Route"})]}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:p?D(l.find(e=>e._id===p)):"No route selected"})]}),(0,cs.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:["drivers"===a?(0,cs.jsx)(Lh,{className:"w-5 h-5 text-gray-600"}):(0,cs.jsx)(Fh,{className:"w-5 h-5 text-gray-600"}),(0,cs.jsxs)("span",{className:"font-medium text-gray-900",children:["Selected ","drivers"===a?"Drivers":"Conductors"]})]}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600",children:[g.length," ",a," selected"]}),g.length>0&&(0,cs.jsx)("div",{className:"mt-2 max-h-32 overflow-y-auto",children:(0,cs.jsx)("div",{className:"space-y-1",children:g.map(e=>{const t=d.find(t=>t._id===e);return t?(0,cs.jsxs)("div",{className:"text-xs text-gray-500 flex items-center space-x-2",children:[(0,cs.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,cs.jsx)("span",{children:t.name})]},e):null})})})]})]})]}),(0,cs.jsx)("div",{className:"pt-6 border-t border-gray-200",children:(0,cs.jsxs)("div",{className:"flex space-x-3",children:[(0,cs.jsx)("button",{onClick:s,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,cs.jsx)("button",{onClick:async()=>{if(h&&p&&0!==g.length){A(!0);try{const e=await(0,xs.nr)("/api/admin/bulk-assign-staff",{method:"POST",body:JSON.stringify({staffType:a,staffIds:g,depotId:h,routeId:p})});if(null!==e&&void 0!==e&&e.ok){const t=e.data;alert("Successfully assigned ".concat(g.length," ").concat(a," to the selected route")),n&&n(t),s()}else alert((null===e||void 0===e?void 0:e.message)||"Failed to assign staff")}catch(e){console.error("Error assigning staff:",e),alert("Error assigning staff")}finally{A(!1)}}else alert("Please select depot, route, and at least one staff member")},disabled:!h||!p||0===g.length||k,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:k?(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Assigning..."]}):(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)(td,{className:"w-4 h-4 mr-2"}),"Assign ",g.length," ",a]})})]})})]})})]})]})}):null},Cm=()=>{const[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)("all"),[u,h]=(0,r.useState)("all"),[m,p]=(0,r.useState)(!1),[x,g]=(0,r.useState)(null),[f,y]=(0,r.useState)(null),[b,v]=(0,r.useState)(!1),[j,N]=(0,r.useState)(null),[w,k]=(0,r.useState)(!1),[A,S]=(0,r.useState)({name:"",email:"",phone:"",depotId:"",employeeId:"",joiningDate:"",salary:"",licenseNumber:"",licenseExpiry:"",status:"active",password:""});(0,r.useEffect)(()=>{C()},[]),(0,r.useEffect)(()=>{(async()=>{try{console.log("=== FORCE FETCHING DEPOTS ON MOUNT ===");const e=await fetch("/api/admin/depots",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();console.log("Depots fetched on mount:",t),a(t.depots||[])}else console.error("Failed to fetch depots on mount:",e.status)}catch(e){console.error("Error fetching depots on mount:",e)}})()},[]);const C=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{i(!0),console.log("=== FRONTEND FETCHING DRIVERS ===",e?"(FORCE REFRESH)":"");const d=Date.now(),u=e?"/api/admin/drivers?t=".concat(d):"/api/admin/drivers",h=e?"/api/admin/depots?t=".concat(d):"/api/admin/depots",[m,p]=await Promise.all([fetch(u,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Cache-Control":"no-cache",Pragma:"no-cache"}}),fetch(h,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Cache-Control":"no-cache",Pragma:"no-cache"}})]);if(console.log("Drivers response status:",m.status),console.log("Depots response status:",p.status),m.ok){var s,r,n,o,l;const e=await m.json();console.log("Drivers data received:",e),console.log("Drivers count:",(null===(s=e.data)||void 0===s||null===(r=s.drivers)||void 0===r?void 0:r.length)||0),console.log("Full response structure:",JSON.stringify(e,null,2)),t((null===(n=e.data)||void 0===n?void 0:n.drivers)||[]),(null===(o=e.data)||void 0===o||null===(l=o.drivers)||void 0===l?void 0:l.length)>0&&console.log("First driver sample:",e.data.drivers[0])}else{console.error("Drivers response not ok:",m.status);const e=await m.text();console.error("Drivers error response:",e)}if(p.ok){var c;const e=await p.json();console.log("Depots data received:",e),console.log("Depots count:",(null===(c=e.depots)||void 0===c?void 0:c.length)||0),console.log("Depots array:",e.depots),a(e.depots||[]),e.depots&&e.depots.length>0&&console.log("First depot sample:",e.depots[0])}else{console.error("Depots response not ok:",p.status);const e=await p.text();console.error("Depots error response:",e)}}catch(d){console.error("Error fetching data:",d)}finally{i(!1)}},_=()=>{S({name:"",email:"",phone:"",depotId:"",employeeId:"",joiningDate:"",salary:"",licenseNumber:"",licenseExpiry:"",status:"active",password:""})},T=e=>{const t={active:{color:"bg-green-100 text-green-800 border-green-200",icon:jd.A},inactive:{color:"bg-gray-100 text-gray-800 border-gray-200",icon:qh},suspended:{color:"bg-red-100 text-red-800 border-red-200",icon:bh}}[e]||{color:"bg-gray-100 text-gray-800 border-gray-200",icon:vd.A},s=t.icon;return(0,cs.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-medium border ".concat(t.color," flex items-center gap-1"),children:[(0,cs.jsx)(s,{className:"w-3 h-3"}),e]})},P=e=>{if("object"===typeof e&&null!==e)return e.depotName||"Unassigned";const t=s.find(t=>t._id===e);return t?t.name:"Unassigned"},E=e=>{if("object"===typeof e&&null!==e)return e.depotCode||"N/A";const t=s.find(t=>t._id===e);return t?t.depotCode||t.code:"N/A"},D=e.filter(e=>{var t,s;const r=!o||e.name.toLowerCase().includes(o.toLowerCase())||e.email.toLowerCase().includes(o.toLowerCase())||e.phone.includes(o)||e.employeeCode&&e.employeeCode.toLowerCase().includes(o.toLowerCase())||(null===(t=e.drivingLicense)||void 0===t?void 0:t.licenseNumber)&&e.drivingLicense.licenseNumber.toLowerCase().includes(o.toLowerCase()),a="all"===c||"object"===typeof e.depotId&&(null===(s=e.depotId)||void 0===s?void 0:s._id)===c||"string"===typeof e.depotId&&e.depotId===c,n="all"===u||e.status===u;return r&&a&&n});return console.log("=== FRONTEND DEBUG ==="),console.log("drivers state:",e),console.log("drivers length:",e.length),console.log("filteredDrivers length:",D.length),console.log("searchTerm:",o),console.log("depotFilter:",c),console.log("statusFilter:",u),console.log("depots state:",s),console.log("depots length:",s.length),0===s.length?console.warn("\u26a0\ufe0f No depots loaded! This might be why the dropdown is empty."):console.log("\u2705 Depots loaded successfully:",s.map(e=>({id:e._id,name:e.name}))),n?(0,cs.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,cs.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"text-center lg:text-left",children:[(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Yatrik Driver Management"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Manage drivers and their depot assignments"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("button",{onClick:()=>{const t=[["Name","Email","Phone","Employee ID","Depot","License Number","License Expiry","Joining Date","Salary","Status"].join(","),...e.map(e=>{var t,s,r;return[e.name,e.email,e.phone,e.employeeCode||"N/A",P(e.depotId),(null===(t=e.drivingLicense)||void 0===t?void 0:t.licenseNumber)||"N/A",null!==(s=e.staffDetails)&&void 0!==s&&s.licenseExpiry?new Date(e.staffDetails.licenseExpiry).toLocaleDateString():"N/A",e.joiningDate?new Date(e.joiningDate).toLocaleDateString():"N/A",(null===(r=e.staffDetails)||void 0===r?void 0:r.salary)||"N/A",e.status].join(",")})].join("\n"),s=new Blob([t],{type:"text/csv"}),r=window.URL.createObjectURL(s),a=document.createElement("a");a.href=r,a.download="drivers_".concat((new Date).toISOString().split("T")[0],".csv"),a.click(),window.URL.revokeObjectURL(r),alert("Drivers exported successfully")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(hd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Export"})]}),(0,cs.jsxs)("button",{onClick:()=>{console.log("=== FORCE REFRESH TRIGGERED ==="),C(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Refresh All"})]}),(0,cs.jsx)("button",{onClick:async()=>{try{console.log("=== TESTING COMPREHENSIVE STAFF DEBUG ===");const e=await fetch("/api/admin/debug-all-staff",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();console.log("Comprehensive staff debug:",t),alert("Debug complete! Found ".concat(t.counts.allDrivers," drivers and ").concat(t.counts.allConductors," conductors. Check console for details."))}else console.error("Debug failed:",e.status),alert("Debug failed with status ".concat(e.status))}catch(e){console.error("Debug error:",e),alert("Debug error. Check console for details.")}},className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:(0,cs.jsx)("span",{children:"Debug All Staff"})}),(0,cs.jsxs)("button",{onClick:()=>k(!0),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(wm.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Bulk Assign"})]}),(0,cs.jsxs)("button",{onClick:()=>p(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(bu.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Add Driver"})]})]})]}),(0,cs.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,cs.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,cs.jsx)("div",{className:"flex-1",children:(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(ys.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search drivers by name, email, phone, employee ID, or license number...",value:o,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,cs.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",style:{minHeight:"40px"},children:[(0,cs.jsxs)("option",{value:"all",children:["All Depots (",s.length,")"]}),s&&s.length>0?s.map(e=>(console.log("Rendering depot option:",e),(0,cs.jsx)("option",{value:e._id,style:{padding:"8px",backgroundColor:"white"},children:e.name||e.depotName||"Unknown Depot"},e._id))):(0,cs.jsx)("option",{disabled:!0,children:"No depots available"})]}),(0,cs.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"all",children:"All Status"}),(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"inactive",children:"Inactive"}),(0,cs.jsx)("option",{value:"suspended",children:"Suspended"})]}),(0,cs.jsxs)("button",{onClick:C,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Refresh"})]})]})}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,cs.jsx)("div",{className:"overflow-x-auto",children:(0,cs.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,cs.jsx)("thead",{className:"bg-gray-50",children:(0,cs.jsxs)("tr",{children:[(0,cs.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Driver"}),(0,cs.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),(0,cs.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Depot Assignment"}),(0,cs.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"License"}),(0,cs.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,cs.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,cs.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,cs.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(e=>{var t,s,r,a,n;const i=(e=>{if(!e)return{status:"unknown",color:"text-gray-500",icon:vd.A};const t=new Date,s=new Date(e),r=Math.ceil((s-t)/864e5);return r<0?{status:"expired",color:"text-red-500",icon:bh}:r<=30?{status:"expiring_soon",color:"text-yellow-500",icon:vd.A}:{status:"valid",color:"text-green-500",icon:jd.A}})(null===(t=e.drivingLicense)||void 0===t?void 0:t.licenseExpiry),o=i.icon;return(0,cs.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-white font-semibold text-lg",children:(null===(s=e.name)||void 0===s||null===(r=s.charAt(0))||void 0===r?void 0:r.toUpperCase())||"D"})}),(0,cs.jsxs)("div",{className:"ml-4",children:[(0,cs.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:e.name}),(0,cs.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e._id.slice(-8)]})]})]})}),(0,cs.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,cs.jsx)("div",{className:"text-sm text-gray-900",children:e.employeeCode||"N/A"}),e.joiningDate&&(0,cs.jsxs)("div",{className:"text-sm text-gray-500",children:["Joined: ",new Date(e.joiningDate).toLocaleDateString()]})]}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(_s,{className:"w-4 h-4 text-gray-400"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:P(e.depotId)}),(0,cs.jsxs)("div",{className:"text-sm text-gray-500",children:["Code: ",E(e.depotId)]})]})]})}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,cs.jsxs)("div",{className:"space-y-1",children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(null===(a=e.drivingLicense)||void 0===a?void 0:a.licenseNumber)||"N/A"}),(null===(n=e.drivingLicense)||void 0===n?void 0:n.licenseExpiry)&&(0,cs.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,cs.jsx)(o,{className:"w-4 h-4 ".concat(i.color)}),(0,cs.jsx)("span",{className:"text-sm ".concat(i.color),children:new Date(e.drivingLicense.licenseExpiry).toLocaleDateString()})]})]})}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,cs.jsxs)("div",{className:"space-y-1",children:[(0,cs.jsxs)("div",{className:"flex items-center text-sm text-gray-900",children:[(0,cs.jsx)(Gh,{className:"w-4 h-4 mr-2 text-gray-400"}),e.email]}),(0,cs.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,cs.jsx)(ad,{className:"w-4 h-4 mr-2 text-gray-400"}),e.phone]})]})}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:T(e.status)}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>(e=>{y(e)})(e),className:"text-blue-600 hover:text-blue-900 p-2 rounded-lg hover:bg-blue-50 transition-colors",title:"View Details",children:(0,cs.jsx)(Nu.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>(e=>{var t,s,r,a,n;g(e),S({name:e.name||"",email:e.email||"",phone:e.phone||"",depotId:e.depotId||"",employeeId:(null===(t=e.staffDetails)||void 0===t?void 0:t.employeeId)||"",joiningDate:null!==(s=e.staffDetails)&&void 0!==s&&s.joiningDate?new Date(e.staffDetails.joiningDate).toISOString().split("T")[0]:"",salary:(null===(r=e.staffDetails)||void 0===r?void 0:r.salary)||"",licenseNumber:(null===(a=e.staffDetails)||void 0===a?void 0:a.licenseNumber)||"",licenseExpiry:null!==(n=e.staffDetails)&&void 0!==n&&n.licenseExpiry?new Date(e.staffDetails.licenseExpiry).toISOString().split("T")[0]:"",status:e.status||"active",password:""})})(e),className:"text-green-600 hover:text-green-900 p-2 rounded-lg hover:bg-green-50 transition-colors",title:"Edit Driver",children:(0,cs.jsx)(Kh.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>(e=>{N(e),v(!0)})(e),className:"text-red-600 hover:text-red-900 p-2 rounded-lg hover:bg-red-50 transition-colors",title:"Delete Driver",children:(0,cs.jsx)(Wh.A,{className:"w-4 h-4"})})]})})]},e._id)})})]})}),0===D.length&&(0,cs.jsxs)("div",{className:"text-center py-12",children:[(0,cs.jsx)(km,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:0===e.length?"No drivers found":"No drivers match your filters"}),(0,cs.jsx)("p",{className:"text-gray-500 mb-6",children:0===e.length?"Get started by adding your first driver":"Try adjusting your search terms or filters"}),0===e.length&&(0,cs.jsxs)("button",{onClick:()=>p(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[(0,cs.jsx)(bu.A,{className:"w-4 h-4 inline mr-2"}),"Add First Driver"]})]})]}),(m||x)&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,cs.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,cs.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:x?"Edit Driver":"Create New Driver"}),(0,cs.jsx)("p",{className:"text-gray-600 mt-2",children:x?"Update driver information":"Add a new driver to the system"})]}),(0,cs.jsxs)("form",{onSubmit:x?async e=>{e.preventDefault();try{const e=await fetch("/api/admin/users/".concat(x._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify((0,Ie.A)((0,Ie.A)({},A),{},{role:"driver"}))});if(e.ok)alert("Driver updated successfully"),g(null),_(),C();else{const t=await e.json();alert(t.error||"Failed to update driver")}}catch(t){console.error("Error updating driver:",t),alert("Error updating driver")}}:async e=>{e.preventDefault();try{const e=await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify((0,Ie.A)((0,Ie.A)({},A),{},{role:"driver"}))});if(e.ok)alert("Driver created successfully"),p(!1),_(),C(!0);else{const t=await e.json();alert(t.error||"Failed to create driver")}}catch(t){console.error("Error creating driver:",t),alert("Error creating driver")}},className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),(0,cs.jsx)("input",{type:"text",required:!0,value:A.name,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter full name"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),(0,cs.jsx)("input",{type:"email",required:!0,value:A.email,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone *"}),(0,cs.jsx)("input",{type:"tel",required:!0,value:A.phone,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{phone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter phone number"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID"}),(0,cs.jsx)("input",{type:"text",value:A.employeeId,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{employeeId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter employee ID"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot Assignment *"}),(0,cs.jsxs)("select",{required:!0,value:A.depotId,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{depotId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"",children:"Select Depot"}),s.map(e=>(0,cs.jsxs)("option",{value:e._id,children:[e.depotName||e.name," (",e.depotCode||e.code,")"]},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,cs.jsxs)("select",{value:A.status,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"inactive",children:"Inactive"}),(0,cs.jsx)("option",{value:"suspended",children:"Suspended"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"License Number *"}),(0,cs.jsx)("input",{type:"text",required:!0,value:A.licenseNumber,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{licenseNumber:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter license number"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"License Expiry *"}),(0,cs.jsx)("input",{type:"date",required:!0,value:A.licenseExpiry,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{licenseExpiry:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Joining Date"}),(0,cs.jsx)("input",{type:"date",value:A.joiningDate,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{joiningDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salary"}),(0,cs.jsx)("input",{type:"number",value:A.salary,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{salary:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter salary"})]}),!x&&(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),(0,cs.jsx)("input",{type:"password",required:!0,value:A.password,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{password:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter password"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,cs.jsx)("button",{type:"button",onClick:()=>{p(!1),g(null),_()},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,cs.jsx)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:x?"Update Driver":"Create Driver"})]})]})]})}),b&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:(0,cs.jsxs)("div",{className:"p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,cs.jsx)(vd.A,{className:"w-6 h-6 text-red-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Driver"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"This action cannot be undone."})]})]}),(0,cs.jsxs)("p",{className:"text-gray-700 mb-6",children:["Are you sure you want to delete ",(0,cs.jsx)("strong",{children:null===j||void 0===j?void 0:j.name}),"? This will permanently remove their account and all associated data."]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,cs.jsx)("button",{onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,cs.jsx)("button",{onClick:async()=>{if(j)try{const e=await fetch("/api/admin/users/".concat(j._id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok)alert("Driver deleted successfully"),v(!1),N(null),C();else{const t=await e.json();alert(t.error||"Failed to delete driver")}}catch(e){console.error("Error deleting driver:",e),alert("Error deleting driver")}},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete Driver"})]})]})})}),(0,cs.jsx)(Sm,{isOpen:w,onClose:()=>k(!1),staffType:"drivers",onAssign:e=>{console.log("Bulk assignment completed:",e),C(!0)}})]})},_m=()=>(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,cs.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,cs.jsx)(Ss.A,{className:"w-8 h-8 text-accent"}),(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Passenger Management"})]}),(0,cs.jsx)("p",{className:"text-gray-600 mb-6",children:"Manage passengers, bookings, and ticket operations"}),(0,cs.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:(0,cs.jsxs)("p",{className:"text-blue-800 text-sm",children:[(0,cs.jsx)("strong",{children:"Coming Soon:"})," Passenger management interface will be implemented here. This will include passenger profiles, booking history, and ticket management."]})})]})})}),Tm=(0,Ns.A)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),Pm=(0,Ns.A)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]),Em=(0,Ns.A)("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),Dm=(0,Ns.A)("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]),Mm=(0,Ns.A)("network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),Om=(0,Ns.A)("memory-stick",[["path",{d:"M6 19v-3",key:"1nvgqn"}],["path",{d:"M10 19v-3",key:"iu8nkm"}],["path",{d:"M14 19v-3",key:"kcehxu"}],["path",{d:"M18 19v-3",key:"1vh91z"}],["path",{d:"M8 11V9",key:"63erz4"}],["path",{d:"M16 11V9",key:"fru6f3"}],["path",{d:"M12 11V9",key:"ha00sb"}],["path",{d:"M2 15h20",key:"16ne18"}],["path",{d:"M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1.1a2 2 0 0 0 0 3.837V17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5.1a2 2 0 0 0 0-3.837Z",key:"lhddv3"}]]),Rm=(0,Ns.A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Im=()=>{var e;const[t,s]=(0,r.useState)({server:{status:"unknown",uptime:0,memory:0,cpu:0,load:0},database:{status:"unknown",connections:0,responseTime:0,queries:0},api:{status:"unknown",responseTime:0,requestCount:0,errorRate:0},websocket:{status:"unknown",connections:0,messages:0},security:{status:"unknown",threats:0,lastScan:null,vulnerabilities:0},backup:{status:"unknown",lastBackup:null,size:0,nextBackup:null}}),[a,n]=(0,r.useState)({activeUsers:0,activeTrips:0,ongoingBookings:0,systemLoad:0,networkLatency:0,errorRate:0,memoryUsage:0,diskUsage:0}),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(!1),[h,m]=(0,r.useState)(!0),[p,x]=(0,r.useState)(5),[g,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{y(),v(),j()},[]),(0,r.useEffect)(()=>{if(!h)return;const e=setInterval(()=>{y(),b()},1e3*p);return()=>clearInterval(e)},[h,p]);const y=async()=>{try{u(!0),console.log("\ud83d\udd04 Fetching system status...");const e=await fetch("/api/admin/system/status",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(console.log("\ud83d\udce1 System status response:",e.status),e.ok){const r=await e.json();console.log("\ud83d\udcca System status data:",r),s(r.status||t),n(r.metrics||a)}else console.error("\u274c System status failed:",e.status),s({server:{status:"healthy",uptime:86400,memory:2147483648,cpu:45,load:.6},database:{status:"healthy",connections:25,responseTime:12,queries:1250},api:{status:"healthy",responseTime:85,requestCount:450,errorRate:.2},websocket:{status:"healthy",connections:150,messages:2800},security:{status:"healthy",threats:0,lastScan:new Date,vulnerabilities:0},backup:{status:"healthy",lastBackup:new Date,size:25e8,nextBackup:new Date(Date.now()+864e5)}}),n({activeUsers:125,activeTrips:45,ongoingBookings:23,systemLoad:45,networkLatency:85,errorRate:.2,memoryUsage:68,diskUsage:42})}catch(e){console.error("\ud83d\udca5 Error fetching system status:",e)}finally{u(!1)}},b=async()=>{try{const e=await fetch("/api/admin/system/metrics",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();n(t.metrics||a)}}catch(e){console.error("Error fetching realtime metrics:",e)}},v=async()=>{try{const e=await fetch("/api/admin/system/logs?limit=50",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();o(t.logs||[])}else o([{level:"info",message:"System startup completed",timestamp:new Date,details:"All services initialized successfully"},{level:"warn",message:"High memory usage detected",timestamp:new Date(Date.now()-3e5),details:"Memory usage: 85%"},{level:"info",message:"Database backup completed",timestamp:new Date(Date.now()-6e5),details:"Backup size: 2.5GB"},{level:"error",message:"Failed login attempt",timestamp:new Date(Date.now()-9e5),details:"IP: 192.168.1.100"},{level:"info",message:"New user registered",timestamp:new Date(Date.now()-12e5),details:"User: john@example.com"}])}catch(e){console.error("Error fetching system logs:",e)}},j=async()=>{try{const e=await fetch("/api/admin/system/alerts",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();c(t.alerts||[])}else c([{title:"High CPU Usage",message:"Server CPU usage is at 85% - consider scaling",timestamp:new Date(Date.now()-12e4),severity:"warning"},{title:"Database Connection Issues",message:"Multiple failed connection attempts detected",timestamp:new Date(Date.now()-9e5),severity:"critical"}])}catch(e){console.error("Error fetching alerts:",e)}},N=e=>{const t={error:"text-red-600 bg-red-50 border-red-200",warn:"text-yellow-600 bg-yellow-50 border-yellow-200",info:"text-blue-600 bg-blue-50 border-blue-200",debug:"text-gray-600 bg-gray-50 border-gray-200"};return t[e]||t.info},w=e=>{const t=Math.floor(e/86400),s=Math.floor(e%86400/3600),r=Math.floor(e%3600/60);return"".concat(t,"d ").concat(s,"h ").concat(r,"m")},k=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]};return(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,cs.jsx)("div",{className:"px-6 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"System Status"}),(0,cs.jsx)("p",{className:"text-gray-600 mt-1",children:"Real-time system monitoring and health dashboard"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Auto Refresh:"}),(0,cs.jsxs)("button",{onClick:()=>m(!h),className:"px-3 py-1 rounded-lg text-sm font-medium transition-colors flex items-center space-x-1 ".concat(h?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[h?(0,cs.jsx)(md.A,{className:"w-3 h-3"}):(0,cs.jsx)(Pm,{className:"w-3 h-3"}),(0,cs.jsx)("span",{children:h?"ON":"OFF"})]})]}),(0,cs.jsxs)("select",{value:p,onChange:e=>x(parseInt(e.target.value)),className:"px-3 py-1 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:5,children:"5s"}),(0,cs.jsx)("option",{value:10,children:"10s"}),(0,cs.jsx)("option",{value:30,children:"30s"}),(0,cs.jsx)("option",{value:60,children:"1m"})]}),(0,cs.jsxs)("button",{onClick:y,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Od.A,{className:"w-5 h-5 ".concat(d?"animate-spin":"")}),(0,cs.jsx)("span",{children:"Refresh"})]}),(0,cs.jsxs)("button",{onClick:async()=>{try{console.log("\ud83e\uddea Testing System Status API...");const s=await fetch("/api/admin/system/status",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(console.log("\ud83d\udce1 System Status API response:",s.status),s.ok){var e,t;const r=await s.json();console.log("\ud83d\udcca System Status data:",r),alert("System Status API working! Server uptime: ".concat(Math.floor((null===(e=r.status)||void 0===e||null===(t=e.server)||void 0===t?void 0:t.uptime)/3600)," hours"))}else alert("System Status API failed: ".concat(s.status))}catch(s){console.error("\u274c System Status API error:",s),alert("System Status API error: "+s.message)}},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Ds.A,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Test API"})]})]})]})})}),(0,cs.jsxs)("div",{className:"px-6 py-6 space-y-6",children:[(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(t).map(e=>{let[t,s]=e;const r=(e=>{const t={healthy:jd.A,warning:vd.A,critical:bh,unknown:Tm};return t[e]||t.unknown})(s.status),a=(e=>{const t={healthy:"text-green-600 bg-green-100",warning:"text-yellow-600 bg-yellow-100",critical:"text-red-600 bg-red-100",unknown:"text-gray-600 bg-gray-100"};return t[e]||t.unknown})(s.status),n={server:Is,database:Rs,api:Ls,websocket:Rd,security:Ps,backup:Em}[t]||Tm;return(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,cs.jsx)(n,{className:"w-6 h-6 text-blue-600"})}),(0,cs.jsx)("div",{children:(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 capitalize",children:t})})]}),(0,cs.jsx)("div",{className:"p-2 rounded-lg ".concat(a),children:(0,cs.jsx)(r,{className:"w-5 h-5"})})]}),(0,cs.jsxs)("div",{className:"space-y-2",children:["server"===t&&(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Uptime:"}),(0,cs.jsx)("span",{className:"font-medium",children:w(s.uptime||0)})]}),(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Memory:"}),(0,cs.jsx)("span",{className:"font-medium",children:k(s.memory||0)})]}),(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"CPU:"}),(0,cs.jsxs)("span",{className:"font-medium",children:[(s.cpu||0).toFixed(1),"%"]})]}),(0,cs.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:(0,cs.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(s.cpu>80?"bg-red-500":s.cpu>60?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(Math.min(100,s.cpu||0),"%")}})})]}),"database"===t&&(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Connections:"}),(0,cs.jsx)("span",{className:"font-medium",children:s.connections||0})]}),(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Response Time:"}),(0,cs.jsxs)("span",{className:"font-medium",children:[s.responseTime||0,"ms"]})]}),(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Queries/min:"}),(0,cs.jsx)("span",{className:"font-medium",children:s.queries||0})]})]}),"api"===t&&(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Response Time:"}),(0,cs.jsxs)("span",{className:"font-medium",children:[s.responseTime||0,"ms"]})]}),(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Requests/min:"}),(0,cs.jsx)("span",{className:"font-medium",children:s.requestCount||0})]}),(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Error Rate:"}),(0,cs.jsxs)("span",{className:"font-medium",children:[s.errorRate||0,"%"]})]})]}),"websocket"===t&&(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Active Connections:"}),(0,cs.jsx)("span",{className:"font-medium",children:s.connections||0})]}),(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Messages/min:"}),(0,cs.jsx)("span",{className:"font-medium",children:s.messages||0})]})]}),"security"===t&&(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Threats Blocked:"}),(0,cs.jsx)("span",{className:"font-medium",children:s.threats||0})]}),(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Vulnerabilities:"}),(0,cs.jsx)("span",{className:"font-medium",children:s.vulnerabilities||0})]}),(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Last Scan:"}),(0,cs.jsx)("span",{className:"font-medium",children:s.lastScan?new Date(s.lastScan).toLocaleTimeString():"Never"})]})]}),"backup"===t&&(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Last Backup:"}),(0,cs.jsx)("span",{className:"font-medium",children:s.lastBackup?new Date(s.lastBackup).toLocaleDateString():"Never"})]}),(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Backup Size:"}),(0,cs.jsx)("span",{className:"font-medium",children:k(s.size||0)})]}),(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Next Backup:"}),(0,cs.jsx)("span",{className:"font-medium",children:s.nextBackup?new Date(s.nextBackup).toLocaleDateString():"Not scheduled"})]})]})]})]},t)})}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,cs.jsx)(Ds.A,{className:"w-5 h-5 mr-2 text-blue-600"}),"Real-time Metrics",(0,cs.jsx)("div",{className:"ml-2 w-2 h-2 rounded-full ".concat(h?"bg-green-500 animate-pulse":"bg-gray-400")})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,cs.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-blue-700",children:"Active Users"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:a.activeUsers})]}),(0,cs.jsx)(Ss.A,{className:"w-8 h-8 text-blue-600"})]})}),(0,cs.jsx)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-green-700",children:"Active Trips"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-green-900",children:a.activeTrips})]}),(0,cs.jsx)(Ds.A,{className:"w-8 h-8 text-green-600"})]})}),(0,cs.jsx)("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-purple-700",children:"Ongoing Bookings"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-purple-900",children:a.ongoingBookings})]}),(0,cs.jsx)(sd.A,{className:"w-8 h-8 text-purple-600"})]})}),(0,cs.jsx)("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-orange-700",children:"System Load"}),(0,cs.jsxs)("p",{className:"text-2xl font-bold text-orange-900",children:[a.systemLoad,"%"]})]}),(0,cs.jsx)(Dm,{className:"w-8 h-8 text-orange-600"})]})})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,cs.jsx)(Vs,{className:"w-5 h-5 mr-2 text-red-600"}),"System Alerts",l.length>0&&(0,cs.jsx)("span",{className:"ml-2 px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:l.length})]}),(0,cs.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:l.length>0?l.map((e,t)=>(0,cs.jsxs)("div",{className:"flex items-start space-x-3 p-3 border rounded-lg ".concat("critical"===e.severity?"bg-red-50 border-red-200":"warning"===e.severity?"bg-yellow-50 border-yellow-200":"bg-blue-50 border-blue-200"),children:[(0,cs.jsx)(vd.A,{className:"w-5 h-5 mt-0.5 ".concat("critical"===e.severity?"text-red-600":"warning"===e.severity?"text-yellow-600":"text-blue-600")}),(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsx)("p",{className:"text-sm font-medium ".concat("critical"===e.severity?"text-red-900":"warning"===e.severity?"text-yellow-900":"text-blue-900"),children:e.title}),(0,cs.jsx)("p",{className:"text-xs mt-1 ".concat("critical"===e.severity?"text-red-700":"warning"===e.severity?"text-yellow-700":"text-blue-700"),children:e.message}),(0,cs.jsx)("p",{className:"text-xs mt-2 ".concat("critical"===e.severity?"text-red-600":"warning"===e.severity?"text-yellow-600":"text-blue-600"),children:new Date(e.timestamp).toLocaleString()})]})]},t)):(0,cs.jsxs)("div",{className:"text-center py-6",children:[(0,cs.jsx)(jd.A,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"No active alerts"}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"System is running smoothly"})]})})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,cs.jsx)(Mm,{className:"w-5 h-5 mr-2 text-green-600"}),"Network"]}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{className:"flex justify-between items-center",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Latency"}),(0,cs.jsxs)("span",{className:"text-sm font-medium",children:[a.networkLatency,"ms"]})]}),(0,cs.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,cs.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(a.networkLatency>200?"bg-red-500":a.networkLatency>100?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(Math.min(100,(200-a.networkLatency)/2),"%")}})})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,cs.jsx)(pd,{className:"w-5 h-5 mr-2 text-yellow-600"}),"Error Rate"]}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{className:"flex justify-between items-center",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Error Rate"}),(0,cs.jsxs)("span",{className:"text-sm font-medium",children:[a.errorRate,"%"]})]}),(0,cs.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,cs.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(a.errorRate>5?"bg-red-600":a.errorRate>2?"bg-yellow-600":"bg-green-600"),style:{width:"".concat(Math.min(100,10*a.errorRate),"%")}})})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,cs.jsx)(Om,{className:"w-5 h-5 mr-2 text-purple-600"}),"Memory"]}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{className:"flex justify-between items-center",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Usage"}),(0,cs.jsxs)("span",{className:"text-sm font-medium",children:[a.memoryUsage,"%"]})]}),(0,cs.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,cs.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(a.memoryUsage>80?"bg-red-500":a.memoryUsage>60?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(a.memoryUsage,"%")}})})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,cs.jsx)(Em,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Disk"]}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{className:"flex justify-between items-center",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Usage"}),(0,cs.jsxs)("span",{className:"text-sm font-medium",children:[a.diskUsage,"%"]})]}),(0,cs.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,cs.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(a.diskUsage>80?"bg-red-500":a.diskUsage>60?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(a.diskUsage,"%")}})})]})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,cs.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"System Logs"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>f(!g),className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:g?(0,cs.jsx)(ju,{className:"w-4 h-4"}):(0,cs.jsx)(Nu.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:v,className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:(0,cs.jsx)(Od.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:(0,cs.jsx)(hd.A,{className:"w-4 h-4"})})]})]})}),(0,cs.jsx)("div",{className:"max-h-96 overflow-y-auto",children:i.length>0?(0,cs.jsx)("div",{className:"p-4 space-y-2",children:i.map((e,t)=>{var s;return(0,cs.jsxs)("div",{className:"flex items-start space-x-3 p-3 rounded-lg border transition-colors ".concat(N(e.level)),children:[(0,cs.jsx)("div",{className:"px-2 py-1 rounded text-xs font-medium ".concat("error"===e.level?"bg-red-200 text-red-800":"warn"===e.level?"bg-yellow-200 text-yellow-800":"info"===e.level?"bg-blue-200 text-blue-800":"bg-gray-200 text-gray-800"),children:null===(s=e.level)||void 0===s?void 0:s.toUpperCase()}),(0,cs.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,cs.jsx)("p",{className:"text-sm text-gray-900",children:e.message}),g&&e.details&&(0,cs.jsx)("p",{className:"text-xs text-gray-500 mt-1 font-mono bg-gray-100 p-2 rounded",children:e.details}),(0,cs.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:new Date(e.timestamp).toLocaleString()})]})]},t)})}):(0,cs.jsxs)("div",{className:"p-8 text-center",children:[(0,cs.jsx)(Ds.A,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"No system logs available"})]})})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Actions"}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,cs.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you want to restart the server? This will cause temporary downtime.")&&(fetch("/api/admin/system/restart",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),alert("Server restart initiated. Please wait..."))},className:"p-4 bg-red-50 hover:bg-red-100 rounded-lg transition-colors text-center border border-red-200",children:[(0,cs.jsx)(Rm,{className:"w-6 h-6 text-red-600 mx-auto mb-2"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-red-700",children:"Restart Server"})]}),(0,cs.jsxs)("button",{onClick:()=>{fetch("/api/admin/system/clear-cache",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),alert("Cache cleared successfully!")},className:"p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors text-center border border-blue-200",children:[(0,cs.jsx)(pd,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-blue-700",children:"Clear Cache"})]}),(0,cs.jsxs)("button",{onClick:()=>{fetch("/api/admin/system/backup",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),alert("Backup initiated. This may take a few minutes...")},className:"p-4 bg-green-50 hover:bg-green-100 rounded-lg transition-colors text-center border border-green-200",children:[(0,cs.jsx)(Em,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-green-700",children:"Create Backup"})]}),(0,cs.jsxs)("button",{onClick:()=>{fetch("/api/admin/system/security-scan",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),alert("Security scan initiated...")},className:"p-4 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors text-center border border-purple-200",children:[(0,cs.jsx)(Ps,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-purple-700",children:"Security Scan"})]}),(0,cs.jsxs)("button",{onClick:v,className:"p-4 bg-orange-50 hover:bg-orange-100 rounded-lg transition-colors text-center border border-orange-200",children:[(0,cs.jsx)(Nu.A,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-orange-700",children:"Refresh Logs"})]}),(0,cs.jsxs)("button",{onClick:()=>{const e={status:t,metrics:a,logs:i,alerts:l,exportedAt:(new Date).toISOString()},s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(s),n=document.createElement("a");n.href=r,n.download="system-status-".concat((new Date).toISOString().split("T")[0],".json"),n.click(),URL.revokeObjectURL(r)},className:"p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors text-center border border-gray-200",children:[(0,cs.jsx)(hd.A,{className:"w-6 h-6 text-gray-600 mx-auto mb-2"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Export Status"})]})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Information"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Server Details"}),(0,cs.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Node.js Version:"}),(0,cs.jsx)("span",{className:"font-medium",children:"v18.17.0"})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Environment:"}),(0,cs.jsx)("span",{className:"font-medium",children:"Production"})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Platform:"}),(0,cs.jsx)("span",{className:"font-medium",children:"Windows x64"})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Process ID:"}),(0,cs.jsx)("span",{className:"font-medium",children:"N/A"})]})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Database Info"}),(0,cs.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"MongoDB Version:"}),(0,cs.jsx)("span",{className:"font-medium",children:"v6.0.8"})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Collections:"}),(0,cs.jsx)("span",{className:"font-medium",children:"12"})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Total Documents:"}),(0,cs.jsx)("span",{className:"font-medium",children:"15,847"})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Index Size:"}),(0,cs.jsx)("span",{className:"font-medium",children:"245 MB"})]})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Application Info"}),(0,cs.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Version:"}),(0,cs.jsx)("span",{className:"font-medium",children:"v2.1.0"})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Build:"}),(0,cs.jsx)("span",{className:"font-medium",children:"#1234"})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Last Deploy:"}),(0,cs.jsx)("span",{className:"font-medium",children:"2 hours ago"})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Uptime:"}),(0,cs.jsx)("span",{className:"font-medium",children:w((null===(e=t.server)||void 0===e?void 0:e.uptime)||0)})]})]})]})]})]})]})]})};var Lm=s(6401);const Fm=(0,Ns.A)("fuel",[["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 4 0v-6.998a2 2 0 0 0-.59-1.42L18 5",key:"1wtuz0"}],["path",{d:"M14 21V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v16",key:"e09ifn"}],["path",{d:"M2 21h13",key:"1x0fut"}],["path",{d:"M3 9h11",key:"1p7c0w"}]]),Bm=(0,Ns.A)("gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);var zm=s(797);const Um=()=>{const[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0),[n,i]=(0,r.useState)(""),[o,l]=(0,r.useState)("all"),[c,d]=(0,r.useState)("all"),[u,h]=(0,r.useState)(1),[m,p]=(0,r.useState)(20),[x,g]=(0,r.useState)(""),[f,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),[A,S]=(0,r.useState)(null),[C,_]=(0,r.useState)(null),[T,P]=(0,r.useState)([]),[E,D]=(0,r.useState)("grid"),[M,O]=(0,r.useState)({totalBuses:0,activeBuses:0,maintenanceBuses:0,retiredBuses:0,averageUtilization:0,fuelEfficiency:0,maintenanceCost:0}),[R,I]=(0,r.useState)({busNumber:"",registrationNumber:"",depotId:"",status:"active",busType:"standard",capacity:{total:40,seater:40,sleeper:0},specifications:{mileage:0}}),[L,F]=(0,r.useState)(new Date),[B,z]=(0,r.useState)({});(0,r.useEffect)(()=>{(async()=>{await Promise.all([U(),V(),K()]),F(new Date)})();const e=setInterval(()=>{W(),F(new Date)},3e4);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{const e=setTimeout(()=>g(n.trim()),300);return()=>clearTimeout(e)},[n]),(0,r.useEffect)(()=>{U()},[o,c,x,u,m]);const U=async()=>{try{a(!0);const e=new URLSearchParams;o&&"all"!==o&&e.set("status",o),c&&"all"!==c&&e.set("depotId",c),x&&e.set("search",x),e.set("page",String(u)),e.set("limit",String(m));const s=await(0,xs.nr)("/api/admin/buses?"+e.toString());if(null!==s&&void 0!==s&&s.ok){const e=s.data||{},r=e.buses?{buses:e.buses,pagination:e.pagination}:e.data||{},{buses:a=[],pagination:n}=r,i=(a||[]).map(e=>{const t=e.depotId,s=t&&"object"===typeof t?t._id:t||null,r=t&&"object"===typeof t?t.name||t.depotName||t.code||"Unknown":void 0;return(0,Ie.A)((0,Ie.A)({},e),{},{busNumber:e.busNumber||"N/A",registrationNumber:e.registrationNumber||"N/A",status:e.status||"unknown",depotId:s,depotName:r,capacity:e.capacity||{total:0,seater:0,sleeper:0},busType:e.busType||"standard"})});t(i),n&&u>(n.pages||u)&&h(1)}else console.error("Failed to fetch buses:",null===s||void 0===s?void 0:s.status),Oe.oR.error("Failed to fetch buses"),t([])}catch(e){console.error("Error fetching buses:",e),Oe.oR.error("Failed to fetch buses"),t([])}finally{a(!1)}},V=async()=>{try{(0,xs.I3)();const t=await(0,xs.nr)("/api/admin/depots?showAll=true&_=".concat(Date.now()));if(null!==t&&void 0!==t&&t.ok){var e;const s=t.data||{},r=(s.depots||(null===(e=s.data)||void 0===e?void 0:e.depots)||[]).map(e=>(0,Ie.A)((0,Ie.A)({},e),{},{_id:e._id||e.id,name:e.name||e.depotName||e.code||"Depot"}));P(r)}}catch(t){console.error("Error fetching depots:",t)}},K=async()=>{try{const t=await(0,xs.nr)("/api/admin/buses/analytics");if(null!==t&&void 0!==t&&t.ok){var e;const s=t.data||{};O(s.analytics||(null===(e=s.data)||void 0===e?void 0:e.analytics)||{})}}catch(t){console.error("Error fetching analytics:",t)}},W=async()=>{try{const t=await(0,xs.nr)("/api/admin/buses/realtime");if(null!==t&&void 0!==t&&t.ok){var e;const s=t.data||{};z(s.realTimeData||(null===(e=s.data)||void 0===e?void 0:e.realTimeData)||{})}}catch(t){console.error("Error fetching real-time data:",t)}},H=(0,r.useMemo)(()=>e||[],[e]),q=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"maintenance":return"bg-yellow-100 text-yellow-800";case"retired":default:return"bg-gray-100 text-gray-800";case"suspended":return"bg-red-100 text-red-800"}},G=e=>{switch(e){case"active":return(0,cs.jsx)(jd.A,{className:"w-4 h-4"});case"maintenance":return(0,cs.jsx)(Lm.A,{className:"w-4 h-4"});case"retired":return(0,cs.jsx)(bh,{className:"w-4 h-4"});case"suspended":return(0,cs.jsx)(vd.A,{className:"w-4 h-4"});default:return(0,cs.jsx)(sd.A,{className:"w-4 h-4"})}},Y=e=>{switch(e){case"ac_sleeper":case"ac_seater":return(0,cs.jsx)(Ss.A,{className:"w-4 h-4"});default:return(0,cs.jsx)(ks.A,{className:"w-4 h-4"})}},$=e=>{let{title:t,value:s,icon:r,color:a,change:n,subtitle:i}=e;return(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:s}),i&&(0,cs.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:i}),n&&(0,cs.jsxs)("div",{className:"flex items-center mt-2 text-sm ".concat(n>0?"text-green-600":"text-red-600"),children:[(0,cs.jsx)(xu.A,{className:"w-4 h-4 mr-1 ".concat(n<0?"rotate-180":"")}),Math.abs(n),"% from last month"]})]}),(0,cs.jsx)("div",{className:"p-3 rounded-lg ".concat(a),children:(0,cs.jsx)(r,{className:"w-6 h-6 text-white"})})]})})},J=e=>{var t,s,r;let{bus:a}=e;const n=B[a._id]||{};return(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-all hover:scale-105",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:Y(a.busType)}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a.busNumber}),(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:a.registrationNumber})]})]}),(0,cs.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ".concat(q(a.status)),children:[G(a.status),(0,cs.jsx)("span",{className:"capitalize",children:a.status})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(Ss.A,{className:"w-4 h-4 text-gray-400"}),(0,cs.jsxs)("span",{className:"text-sm text-gray-600",children:[a.capacity.total," seats"]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(gs.A,{className:"w-4 h-4 text-gray-400"}),(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:a.depotName||(null===(t=T.find(e=>e._id===a.depotId))||void 0===t?void 0:t.name)||"Unknown"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(Fm,{className:"w-4 h-4 text-gray-400"}),(0,cs.jsxs)("span",{className:"text-sm text-gray-600",children:[(null===(s=a.fuel)||void 0===s?void 0:s.currentLevel)||0,"%"]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(Bm,{className:"w-4 h-4 text-gray-400"}),(0,cs.jsxs)("span",{className:"text-sm text-gray-600",children:[(null===(r=a.specifications)||void 0===r?void 0:r.mileage)||0," km/l"]})]})]}),n.location&&(0,cs.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-blue-700 font-medium",children:"Current Location"}),(0,cs.jsxs)("span",{className:"text-blue-600",children:[n.location.speed||0," km/h"]})]}),(0,cs.jsx)("div",{className:"text-xs text-blue-600 mt-1",children:n.location.stopName||"In Transit"})]}),a.maintenance&&(0,cs.jsx)("div",{className:"bg-yellow-50 rounded-lg p-3 mb-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-yellow-700 font-medium",children:"Next Service"}),(0,cs.jsx)("span",{className:"text-yellow-600",children:new Date(a.maintenance.nextService).toLocaleDateString()})]})}),(0,cs.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[(0,cs.jsxs)("div",{className:"flex space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>{var e,t,s,r;_(a),I({busNumber:a.busNumber||"",registrationNumber:a.registrationNumber||"",depotId:a.depotId||"",status:a.status||"active",busType:a.busType||"standard",capacity:{total:(null===(e=a.capacity)||void 0===e?void 0:e.total)||40,seater:(null===(t=a.capacity)||void 0===t?void 0:t.seater)||40,sleeper:(null===(s=a.capacity)||void 0===s?void 0:s.sleeper)||0},specifications:{mileage:(null===(r=a.specifications)||void 0===r?void 0:r.mileage)||0}}),v(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Bus",children:(0,cs.jsx)(Kh.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>{},className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"View Details",children:(0,cs.jsx)(Nu.A,{className:"w-4 h-4"})})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[(0,cs.jsx)(sd.A,{className:"w-3 h-3"}),(0,cs.jsxs)("span",{children:["Updated ",new Date(a.updatedAt).toLocaleTimeString()]})]})]})]})},Q=e=>{var t;let{bus:s}=e;return(0,cs.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:Y(s.busType)}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"font-semibold text-gray-900",children:s.busNumber}),(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:s.registrationNumber})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"Capacity"}),(0,cs.jsx)("p",{className:"font-medium",children:s.capacity.total})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"Fuel"}),(0,cs.jsxs)("p",{className:"font-medium",children:[(null===(t=s.fuel)||void 0===t?void 0:t.currentLevel)||0,"%"]})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"Status"}),(0,cs.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(q(s.status)),children:s.status})]}),(0,cs.jsxs)("div",{className:"flex space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>{var e,t,r,a;_(s),I({busNumber:s.busNumber||"",registrationNumber:s.registrationNumber||"",depotId:s.depotId||"",status:s.status||"active",busType:s.busType||"standard",capacity:{total:(null===(e=s.capacity)||void 0===e?void 0:e.total)||40,seater:(null===(t=s.capacity)||void 0===t?void 0:t.seater)||40,sleeper:(null===(r=s.capacity)||void 0===r?void 0:r.sleeper)||0},specifications:{mileage:(null===(a=s.specifications)||void 0===a?void 0:a.mileage)||0}}),v(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:(0,cs.jsx)(Kh.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{className:"p-2 text-green-600 hover:bg-green-50 rounded-lg",children:(0,cs.jsx)(Nu.A,{className:"w-4 h-4"})})]})]})]})})},X=()=>{try{const e=H.map(e=>{var t,s;return{busNumber:e.busNumber,registrationNumber:e.registrationNumber,status:e.status,depot:e.depotName||(null===(t=T.find(t=>t._id===e.depotId))||void 0===t?void 0:t.name)||"",capacityTotal:(null===(s=e.capacity)||void 0===s?void 0:s.total)||0,busType:e.busType||""}}),t=Object.keys(e[0]||{busNumber:"",registrationNumber:"",status:"",depot:"",capacityTotal:"",busType:""}),s=[t.join(","),...e.map(e=>t.map(t=>{var s;return String(null!==(s=e[t])&&void 0!==s?s:"").replace(/"/g,'""')}).map(e=>e.includes(",")?'"'.concat(e,'"'):e).join(","))].join("\n"),r=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(r),n=document.createElement("a");n.href=a,n.download="buses.csv",n.click(),URL.revokeObjectURL(a)}catch(qU){console.error(qU),Oe.oR.error("CSV export failed")}};return s?(0,cs.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,cs.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Bus Management"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Manage all buses in the fleet with real-time monitoring"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("button",{onClick:U,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Refresh"})]}),(0,cs.jsxs)("div",{className:"hidden md:flex items-center space-x-2 text-sm text-gray-500",children:[(0,cs.jsx)("span",{children:"Page"}),(0,cs.jsx)("button",{onClick:()=>h(e=>Math.max(1,e-1)),className:"px-2 py-1 border rounded",children:"-"}),(0,cs.jsx)("span",{className:"min-w-[2ch] text-center",children:u}),(0,cs.jsx)("button",{onClick:()=>h(e=>e+1),className:"px-2 py-1 border rounded",children:"+"}),(0,cs.jsx)("span",{children:"Rows"}),(0,cs.jsx)("select",{value:m,onChange:e=>p(parseInt(e.target.value)||20),className:"border rounded px-2 py-1",children:[10,20,50,100].map(e=>(0,cs.jsx)("option",{value:e,children:e},e))})]}),(0,cs.jsxs)("button",{onClick:()=>{I({busNumber:"",registrationNumber:"",depotId:"",status:"active",busType:"standard",capacity:{total:40,seater:40,sleeper:0},specifications:{mileage:0}}),y(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(bu.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Add Bus"})]})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,cs.jsx)($,{title:"Total Buses",value:M.totalBuses,icon:ks.A,color:"bg-blue-500",subtitle:"Fleet size"}),(0,cs.jsx)($,{title:"Active Buses",value:M.activeBuses,icon:jd.A,color:"bg-green-500",subtitle:"In service"}),(0,cs.jsx)($,{title:"Maintenance",value:M.maintenanceBuses,icon:Lm.A,color:"bg-yellow-500",subtitle:"Under repair"}),(0,cs.jsx)($,{title:"Utilization",value:"".concat(M.averageUtilization,"%"),icon:Ds.A,color:"bg-purple-500",subtitle:"Average capacity"})]}),(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,cs.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[(0,cs.jsx)("div",{className:"flex-1 max-w-md",children:(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(ys.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search buses by number or registration...",value:n,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"all",children:"All Status"}),(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,cs.jsx)("option",{value:"retired",children:"Retired"}),(0,cs.jsx)("option",{value:"suspended",children:"Suspended"})]}),(0,cs.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"all",children:"All Depots"}),T.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.name},e._id))]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1",children:[(0,cs.jsx)("button",{onClick:()=>D("grid"),className:"p-2 rounded-md transition-colors ".concat("grid"===E?"bg-white shadow-sm":"text-gray-500"),children:(0,cs.jsx)(js.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>D("list"),className:"p-2 rounded-md transition-colors ".concat("list"===E?"bg-white shadow-sm":"text-gray-500"),children:(0,cs.jsx)(Ds.A,{className:"w-4 h-4"})})]})]})]})}),(0,cs.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)(Ds.A,{className:"w-5 h-5 text-blue-600"}),(0,cs.jsx)("span",{className:"text-blue-900 font-medium",children:"Real-time Monitoring Active"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-blue-700",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,cs.jsx)("span",{children:"GPS Tracking"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,cs.jsx)("span",{children:"Fuel Monitoring"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,cs.jsx)("span",{children:"Maintenance Alerts"})]}),(0,cs.jsxs)("span",{children:["Last updated: ",L.toLocaleTimeString()]})]})]})}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Fleet Overview (",H.length," buses)"]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("button",{onClick:()=>(async e=>{try{const t=await(0,xs.nr)("/api/admin/buses/export/".concat(e),{method:"GET"});null!==t&&void 0!==t&&t.ok?("excel"!==e&&"pdf"!==e||Oe.oR.success("".concat(e.toUpperCase()," export prepared (demo). Falling back to CSV download.")),X()):X()}catch(t){X()}})("excel"),className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 flex items-center space-x-2",children:[(0,cs.jsx)(hd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Export"})]}),(0,cs.jsxs)("button",{onClick:()=>N(!0),className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 flex items-center space-x-2",children:[(0,cs.jsx)(zm.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Import"})]}),(0,cs.jsxs)("button",{className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 flex items-center space-x-2",children:[(0,cs.jsx)(Os.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Settings"})]})]})]}),0===H.length?(0,cs.jsxs)("div",{className:"text-center py-12",children:[(0,cs.jsx)(ks.A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-500 text-lg",children:"No buses found"}),(0,cs.jsx)("p",{className:"text-gray-400",children:"Try adjusting your search or filters"})]}):(0,cs.jsx)("div",{className:"grid"===E?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:H.map(e=>"grid"===E?(0,cs.jsx)(J,{bus:e},e._id):(0,cs.jsx)(Q,{bus:e},e._id))})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer",children:[(0,cs.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg w-fit mb-4",children:(0,cs.jsx)(As.A,{className:"w-6 h-6 text-blue-600"})}),(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Route Assignment"}),(0,cs.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Assign buses to specific routes and schedules"}),(0,cs.jsxs)("button",{className:"text-blue-600 hover:text-blue-700 font-medium text-sm flex items-center",children:["Manage Routes ",(0,cs.jsx)(bu.A,{className:"w-4 h-4 ml-1"})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer",children:[(0,cs.jsx)("div",{className:"p-3 bg-yellow-100 rounded-lg w-fit mb-4",children:(0,cs.jsx)(Lm.A,{className:"w-6 h-6 text-yellow-600"})}),(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Maintenance"}),(0,cs.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Schedule and track bus maintenance"}),(0,cs.jsxs)("button",{className:"text-yellow-600 hover:text-yellow-700 font-medium text-sm flex items-center",children:["View Schedule ",(0,cs.jsx)(fs.A,{className:"w-4 h-4 ml-1"})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer",children:[(0,cs.jsx)("div",{className:"p-3 bg-green-100 rounded-lg w-fit mb-4",children:(0,cs.jsx)(Lh,{className:"w-6 h-6 text-green-600"})}),(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Staff Assignment"}),(0,cs.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Assign drivers and conductors to buses"}),(0,cs.jsxs)("button",{className:"text-green-600 hover:text-green-700 font-medium text-sm flex items-center",children:["Manage Staff ",(0,cs.jsx)(Ss.A,{className:"w-4 h-4 ml-1"})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer",children:[(0,cs.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg w-fit mb-4",children:(0,cs.jsx)(js.A,{className:"w-6 h-6 text-purple-600"})}),(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Analytics"}),(0,cs.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"View detailed fleet performance reports"}),(0,cs.jsxs)("button",{className:"text-purple-600 hover:text-purple-700 font-medium text-sm flex items-center",children:["View Reports ",(0,cs.jsx)(js.A,{className:"w-4 h-4 ml-1"})]})]})]}),f&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl mx-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Add New Bus"}),(0,cs.jsx)("button",{onClick:()=>y(!1),className:"p-1 text-gray-500 hover:text-gray-700",children:(0,cs.jsx)(Bs.A,{className:"w-5 h-5"})})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Bus Number"}),(0,cs.jsx)("input",{value:R.busNumber,onChange:e=>I((0,Ie.A)((0,Ie.A)({},R),{},{busNumber:e.target.value})),className:"w-full border rounded-lg px-3 py-2",placeholder:"BUS-1001"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Registration Number"}),(0,cs.jsx)("input",{value:R.registrationNumber,onChange:e=>I((0,Ie.A)((0,Ie.A)({},R),{},{registrationNumber:e.target.value})),className:"w-full border rounded-lg px-3 py-2",placeholder:"KL-01-AB-1234"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Depot"}),(0,cs.jsxs)("select",{value:R.depotId,onChange:e=>I((0,Ie.A)((0,Ie.A)({},R),{},{depotId:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"",children:"Select depot"}),T.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Status"}),(0,cs.jsxs)("select",{value:R.status,onChange:e=>I((0,Ie.A)((0,Ie.A)({},R),{},{status:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,cs.jsx)("option",{value:"retired",children:"Retired"}),(0,cs.jsx)("option",{value:"suspended",children:"Suspended"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Bus Type"}),(0,cs.jsx)("input",{value:R.busType,onChange:e=>I((0,Ie.A)((0,Ie.A)({},R),{},{busType:e.target.value})),className:"w-full border rounded-lg px-3 py-2",placeholder:"standard"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Mileage (km/l)"}),(0,cs.jsx)("input",{type:"number",value:R.specifications.mileage,onChange:e=>I((0,Ie.A)((0,Ie.A)({},R),{},{specifications:(0,Ie.A)((0,Ie.A)({},R.specifications),{},{mileage:e.target.value})})),className:"w-full border rounded-lg px-3 py-2"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Capacity Total"}),(0,cs.jsx)("input",{type:"number",value:R.capacity.total,onChange:e=>I((0,Ie.A)((0,Ie.A)({},R),{},{capacity:(0,Ie.A)((0,Ie.A)({},R.capacity),{},{total:e.target.value,seater:e.target.value})})),className:"w-full border rounded-lg px-3 py-2"})]})]}),(0,cs.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,cs.jsx)("button",{onClick:()=>y(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,cs.jsx)("button",{onClick:async()=>{try{var e;if(!R.busNumber||!R.registrationNumber)return void Oe.oR.error("Bus number and registration are required");const t=(0,Ie.A)((0,Ie.A)({},R),{},{capacity:{total:Number(R.capacity.total)||0,seater:Number(R.capacity.seater)||0,sleeper:Number(R.capacity.sleeper)||0},specifications:{mileage:Number(null===(e=R.specifications)||void 0===e?void 0:e.mileage)||0}}),s=await(0,xs.nr)("/api/admin/buses",{method:"POST",body:JSON.stringify(t)});null!==s&&void 0!==s&&s.ok?(Oe.oR.success("Bus added"),y(!1),I({busNumber:"",registrationNumber:"",depotId:"",status:"active",busType:"standard",capacity:{total:40,seater:40,sleeper:0},specifications:{mileage:0}}),U(),K()):Oe.oR.error((null===s||void 0===s?void 0:s.message)||"Failed to add bus")}catch(qU){console.error(qU),Oe.oR.error("Failed to add bus")}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Bus"})]})]})}),b&&C&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl mx-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsxs)("h3",{className:"text-xl font-semibold text-gray-900",children:["Edit Bus: ",C.busNumber]}),(0,cs.jsx)("button",{onClick:()=>v(!1),className:"p-1 text-gray-500 hover:text-gray-700",children:(0,cs.jsx)(Bs.A,{className:"w-5 h-5"})})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Depot"}),(0,cs.jsxs)("select",{value:R.depotId,onChange:e=>I((0,Ie.A)((0,Ie.A)({},R),{},{depotId:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"",children:"Select depot"}),T.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Status"}),(0,cs.jsxs)("select",{value:R.status,onChange:e=>I((0,Ie.A)((0,Ie.A)({},R),{},{status:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,cs.jsx)("option",{value:"retired",children:"Retired"}),(0,cs.jsx)("option",{value:"suspended",children:"Suspended"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Bus Type"}),(0,cs.jsx)("input",{value:R.busType,onChange:e=>I((0,Ie.A)((0,Ie.A)({},R),{},{busType:e.target.value})),className:"w-full border rounded-lg px-3 py-2"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Mileage (km/l)"}),(0,cs.jsx)("input",{type:"number",value:R.specifications.mileage,onChange:e=>I((0,Ie.A)((0,Ie.A)({},R),{},{specifications:(0,Ie.A)((0,Ie.A)({},R.specifications),{},{mileage:e.target.value})})),className:"w-full border rounded-lg px-3 py-2"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Capacity Total"}),(0,cs.jsx)("input",{type:"number",value:R.capacity.total,onChange:e=>I((0,Ie.A)((0,Ie.A)({},R),{},{capacity:(0,Ie.A)((0,Ie.A)({},R.capacity),{},{total:e.target.value,seater:e.target.value})})),className:"w-full border rounded-lg px-3 py-2"})]})]}),(0,cs.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,cs.jsx)("button",{onClick:()=>v(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,cs.jsx)("button",{onClick:async()=>{try{var e;if(null===C||void 0===C||!C._id)return;const t={status:R.status,depotId:R.depotId||null,busType:R.busType,capacity:{total:Number(R.capacity.total)||0,seater:Number(R.capacity.seater)||0,sleeper:Number(R.capacity.sleeper)||0},specifications:{mileage:Number(null===(e=R.specifications)||void 0===e?void 0:e.mileage)||0}},s=await(0,xs.nr)("/api/admin/buses/".concat(C._id),{method:"PUT",body:JSON.stringify(t)});null!==s&&void 0!==s&&s.ok?(Oe.oR.success("Bus updated"),v(!1),_(null),U(),K()):Oe.oR.error((null===s||void 0===s?void 0:s.message)||"Failed to update bus")}catch(qU){console.error(qU),Oe.oR.error("Failed to update bus")}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})}),j&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl mx-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Bulk Import Buses"}),(0,cs.jsx)("button",{onClick:()=>N(!1),className:"p-1 text-gray-500 hover:text-gray-700",children:(0,cs.jsx)(Bs.A,{className:"w-5 h-5"})})]}),(0,cs.jsxs)("p",{className:"text-gray-600 text-sm mb-4",children:["Upload a CSV with headers: ",(0,cs.jsx)("span",{className:"font-mono",children:"busNumber,registrationNumber,depotId,status,busType,capacityTotal"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("input",{type:"file",accept:".csv",onChange:e=>{var t;return(async t=>{try{if(!t)return;k(!0),S(null);const e=(e=>{const t=e.trim().split(/\r?\n/);if(!t.length)return[];const s=t[0].split(",").map(e=>e.trim());return t.slice(1).map(e=>{const t=[];let r="",a=!1;for(let s=0;s<e.length;s++){const n=e[s];'"'===n?a&&'"'===e[s+1]?(r+='"',s++):a=!a:","!==n||a?r+=n:(t.push(r),r="")}t.push(r);const n={};return s.forEach((e,s)=>n[e]=(t[s]||"").trim()),n})})(await t.text());if(!e.length)return Oe.oR.error("No rows found in CSV"),void k(!1);const s=e.map((e,t)=>{const s={busNumber:e.busNumber||e.BusNumber||e.bus_no||"BUS_".concat(Date.now(),"_").concat(t),registrationNumber:e.registrationNumber||e.RegNo||e.registration||"",depotId:e.depotId||"",status:e.status||"active",busType:e.busType||"standard",capacity:{total:Number(e.capacityTotal||e.capacity||40),seater:Number(e.capacityTotal||40),sleeper:0},specifications:{mileage:Number(e.mileage||0)}};return(0,xs.nr)("/api/admin/buses",{method:"POST",body:JSON.stringify(s),suppressError:!0})}),r=await Promise.allSettled(s),a={total:r.length,success:r.filter(e=>{var t;return"fulfilled"===e.status&&(null===(t=e.value)||void 0===t?void 0:t.ok)}).length,failed:r.filter(e=>{var t;return!("fulfilled"===e.status&&null!==(t=e.value)&&void 0!==t&&t.ok)}).length};S(a),Oe.oR.success("Import completed: ".concat(a.success,"/").concat(a.total)),U(),K()}catch(e){console.error(e),Oe.oR.error("Import failed")}finally{k(!1)}})(null===(t=e.target.files)||void 0===t?void 0:t[0])},disabled:w}),w&&(0,cs.jsx)("span",{className:"text-blue-600 text-sm",children:"Importing..."}),A&&(0,cs.jsxs)("span",{className:"text-sm text-gray-700",children:["Done: ",A.success,"/",A.total," imported"]})]}),(0,cs.jsx)("div",{className:"flex justify-end mt-6",children:(0,cs.jsx)("button",{onClick:()=>N(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Close"})})]})})]})},Vm=(0,Ns.A)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]);var Km,Wm,Hm,qm,Gm,Ym,$m,Jm,Qm,Xm,Zm,ep,tp,sp,rp,ap=(Km=new WeakMap,Wm=new WeakMap,Hm=new WeakMap,qm=new WeakMap,Gm=new WeakMap,Ym=new WeakMap,$m=new WeakMap,Jm=new WeakMap,Qm=new WeakMap,Xm=new WeakMap,Zm=new WeakMap,ep=new WeakMap,tp=new WeakMap,sp=new WeakMap,rp=new WeakSet,class extends mt{constructor(e,t){super(),nt(this,rp),Fe(this,Km,void 0),Fe(this,Wm,void 0),Fe(this,Hm,void 0),Fe(this,qm,void 0),Fe(this,Gm,void 0),Fe(this,Ym,void 0),Fe(this,$m,void 0),Fe(this,Jm,void 0),Fe(this,Qm,void 0),Fe(this,Xm,void 0),Fe(this,Zm,void 0),Fe(this,ep,void 0),Fe(this,tp,void 0),Fe(this,sp,void 0),Ue(Wm,this,void 0),Ue(Hm,this,void 0),Ue(qm,this,void 0),Ue(sp,this,new Set),Ue(Km,this,e),this.options=t,Ue($m,this,null),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(ze(Wm,this).addObserver(this),pp(ze(Wm,this),this.options)?Be(rp,this,np).call(this):this.updateResult(),Be(rp,this,cp).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return xp(ze(Wm,this),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return xp(ze(Wm,this),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Be(rp,this,dp).call(this),Be(rp,this,up).call(this),ze(Wm,this).removeObserver(this)}setOptions(e,t){const s=this.options,r=ze(Wm,this);if(this.options=ze(Km,this).defaultQueryOptions(e),Xe(s,this.options)||ze(Km,this).getQueryCache().notify({type:"observerOptionsUpdated",query:ze(Wm,this),observer:this}),"undefined"!==typeof this.options.enabled&&"boolean"!==typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=s.queryKey),Be(rp,this,hp).call(this);const a=this.hasListeners();a&&gp(ze(Wm,this),r,this.options,s)&&Be(rp,this,np).call(this),this.updateResult(t),!a||ze(Wm,this)===r&&this.options.enabled===s.enabled&&this.options.staleTime===s.staleTime||Be(rp,this,ip).call(this);const n=Be(rp,this,op).call(this);!a||ze(Wm,this)===r&&this.options.enabled===s.enabled&&n===ze(tp,this)||Be(rp,this,lp).call(this,n)}getOptimisticResult(e){const t=ze(Km,this).getQueryCache().build(ze(Km,this),e),s=this.createResult(t,e);return function(e,t){if(!Xe(e.getCurrentResult(),t))return!0;return!1}(this,s)&&(Ue(qm,this,s),Ue(Ym,this,this.options),Ue(Gm,this,ze(Wm,this).state)),s}getCurrentResult(){return ze(qm,this)}trackResult(e){const t={};return Object.keys(e).forEach(s=>{Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:()=>(ze(sp,this).add(s),e[s])})}),t}getCurrentQuery(){return ze(Wm,this)}refetch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},(wc(e),e));return this.fetch((0,Ie.A)({},t))}fetchOptimistic(e){const t=ze(Km,this).defaultQueryOptions(e),s=ze(Km,this).getQueryCache().build(ze(Km,this),t);return s.isFetchingOptimistic=!0,s.fetch().then(()=>this.createResult(s,t))}fetch(e){var t;return Be(rp,this,np).call(this,(0,Ie.A)((0,Ie.A)({},e),{},{cancelRefetch:null===(t=e.cancelRefetch)||void 0===t||t})).then(()=>(this.updateResult(),ze(qm,this)))}createResult(e,t){const s=ze(Wm,this),r=this.options,a=ze(qm,this),n=ze(Gm,this),i=ze(Ym,this),o=e!==s?e.state:ze(Hm,this),{state:l}=e;let c,{error:d,errorUpdatedAt:u,fetchStatus:h,status:m}=l,p=!1;if(t._optimisticResults){const a=this.hasListeners(),n=!a&&pp(e,t),i=a&&gp(e,s,t,r);(n||i)&&(h=ft(e.options.networkMode)?"fetching":"paused",l.dataUpdatedAt||(m="pending")),"isRestoring"===t._optimisticResults&&(h="idle")}if(t.select&&"undefined"!==typeof l.data)if(a&&l.data===(null===n||void 0===n?void 0:n.data)&&t.select===ze(Jm,this))c=ze(Qm,this);else try{Ue(Jm,this,t.select),c=t.select(l.data),c=st(null===a||void 0===a?void 0:a.data,c,t),Ue(Qm,this,c),Ue($m,this,null)}catch(v){Ue($m,this,v)}else c=l.data;if("undefined"!==typeof t.placeholderData&&"undefined"===typeof c&&"pending"===m){let e;var x;if(null!==a&&void 0!==a&&a.isPlaceholderData&&t.placeholderData===(null===i||void 0===i?void 0:i.placeholderData))e=a.data;else if(e="function"===typeof t.placeholderData?t.placeholderData(null===(x=ze(Xm,this))||void 0===x?void 0:x.state.data,ze(Xm,this)):t.placeholderData,t.select&&"undefined"!==typeof e)try{e=t.select(e),Ue($m,this,null)}catch(v){Ue($m,this,v)}"undefined"!==typeof e&&(m="success",c=st(null===a||void 0===a?void 0:a.data,e,t),p=!0)}ze($m,this)&&(d=ze($m,this),c=ze(Qm,this),u=Date.now(),m="error");const g="fetching"===h,f="pending"===m,y="error"===m,b=f&&g;return{status:m,fetchStatus:h,isPending:f,isSuccess:"success"===m,isError:y,isInitialLoading:b,isLoading:b,data:c,dataUpdatedAt:l.dataUpdatedAt,error:d,errorUpdatedAt:u,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>o.dataUpdateCount||l.errorUpdateCount>o.errorUpdateCount,isFetching:g,isRefetching:g&&!f,isLoadingError:y&&0===l.dataUpdatedAt,isPaused:"paused"===h,isPlaceholderData:p,isRefetchError:y&&0!==l.dataUpdatedAt,isStale:fp(e,t),refetch:this.refetch}}updateResult(e){const t=ze(qm,this),s=this.createResult(ze(Wm,this),this.options);if(Ue(Gm,this,ze(Wm,this).state),Ue(Ym,this,this.options),void 0!==ze(Gm,this).data&&Ue(Xm,this,ze(Wm,this)),Xe(s,t))return;Ue(qm,this,s);const r={};!1!==(null===e||void 0===e?void 0:e.listeners)&&(()=>{if(!t)return!0;const{notifyOnChangeProps:e}=this.options,s="function"===typeof e?e():e;if("all"===s||!s&&!ze(sp,this).size)return!0;const r=new Set(null!==s&&void 0!==s?s:ze(sp,this));return this.options.throwOnError&&r.add("error"),Object.keys(ze(qm,this)).some(e=>{const s=e;return ze(qm,this)[s]!==t[s]&&r.has(s)})})()&&(r.listeners=!0),Be(rp,this,mp).call(this,(0,Ie.A)((0,Ie.A)({},r),e))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Be(rp,this,cp).call(this)}});function np(e){Be(rp,this,hp).call(this);let t=ze(Wm,this).fetch(this.options,e);return null!==e&&void 0!==e&&e.throwOnError||(t=t.catch(Ke)),t}function ip(){if(Be(rp,this,dp).call(this),Ve||ze(qm,this).isStale||!We(this.options.staleTime))return;const e=He(ze(qm,this).dataUpdatedAt,this.options.staleTime);Ue(Zm,this,setTimeout(()=>{ze(qm,this).isStale||this.updateResult()},e+1))}function op(){var e;return null!==(e="function"===typeof this.options.refetchInterval?this.options.refetchInterval(ze(Wm,this)):this.options.refetchInterval)&&void 0!==e&&e}function lp(e){Be(rp,this,up).call(this),Ue(tp,this,e),!Ve&&!1!==this.options.enabled&&We(ze(tp,this))&&0!==ze(tp,this)&&Ue(ep,this,setInterval(()=>{(this.options.refetchIntervalInBackground||pt.isFocused())&&Be(rp,this,np).call(this)},ze(tp,this)))}function cp(){Be(rp,this,ip).call(this),Be(rp,this,lp).call(this,Be(rp,this,op).call(this))}function dp(){ze(Zm,this)&&(clearTimeout(ze(Zm,this)),Ue(Zm,this,void 0))}function up(){ze(ep,this)&&(clearInterval(ze(ep,this)),Ue(ep,this,void 0))}function hp(){const e=ze(Km,this).getQueryCache().build(ze(Km,this),this.options);if(e===ze(Wm,this))return;const t=ze(Wm,this);Ue(Wm,this,e),Ue(Hm,this,e.state),this.hasListeners()&&(null===t||void 0===t||t.removeObserver(this),e.addObserver(this))}function mp(e){ht.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(ze(qm,this))}),ze(Km,this).getQueryCache().notify({query:ze(Wm,this),type:"observerResultsUpdated"})})}function pp(e,t){return function(e,t){return!1!==t.enabled&&!e.state.dataUpdatedAt&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||e.state.dataUpdatedAt>0&&xp(e,t,t.refetchOnMount)}function xp(e,t,s){if(!1!==t.enabled){const r="function"===typeof s?s(e):s;return"always"===r||!1!==r&&fp(e,t)}return!1}function gp(e,t,s,r){return!1!==s.enabled&&(e!==t||!1===r.enabled)&&(!s.suspense||"error"!==e.state.status)&&fp(e,s)}function fp(e,t){return e.isStaleByTime(t.staleTime)}function yp(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var bp=r.createContext(yp()),vp=r.createContext(!1);vp.Provider;function jp(e,t){return"function"===typeof e?e(...t):!!e}var Np,wp,kp,Ap,Sp;function Cp(e,t,s){const a=os(s),n=r.useContext(vp),i=r.useContext(bp),o=a.defaultQueryOptions(e);o._optimisticResults=n?"isRestoring":"optimistic",(e=>{e.suspense&&"number"!==typeof e.staleTime&&(e.staleTime=1e3)})(o),((e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))})(o,i),(e=>{r.useEffect(()=>{e.clearReset()},[e])})(i);const[l]=r.useState(()=>new t(a,o)),c=l.getOptimisticResult(o);if(r.useSyncExternalStore(r.useCallback(e=>{const t=n?()=>{}:l.subscribe(ht.batchCalls(e));return l.updateResult(),t},[l,n]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),r.useEffect(()=>{l.setOptions(o,{listeners:!1})},[o,l]),((e,t)=>(null===e||void 0===e?void 0:e.suspense)&&t.isPending)(o,c))throw((e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()}))(o,l,i);if((e=>{let{result:t,errorResetBoundary:s,throwOnError:r,query:a}=e;return t.isError&&!s.isReset()&&!t.isFetching&&a&&jp(r,[t.error,a])})({result:c,errorResetBoundary:i,throwOnError:o.throwOnError,query:a.getQueryCache().get(o.queryHash)}))throw c.error;return o.notifyOnChangeProps?c:l.trackResult(c)}var _p=(Np=new WeakMap,wp=new WeakMap,kp=new WeakMap,Ap=new WeakMap,Sp=new WeakSet,class extends mt{constructor(e,t){super(),nt(this,Sp),Fe(this,Np,void 0),Fe(this,wp,void 0),Fe(this,kp,void 0),Fe(this,Ap,void 0),Ue(wp,this,void 0),Ue(Np,this,e),this.setOptions(t),this.bindMethods(),Be(Sp,this,Tp).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const s=this.options;this.options=ze(Np,this).defaultMutationOptions(e),Xe(s,this.options)||ze(Np,this).getMutationCache().notify({type:"observerOptionsUpdated",mutation:ze(kp,this),observer:this}),null===(t=ze(kp,this))||void 0===t||t.setOptions(this.options),null!==s&&void 0!==s&&s.mutationKey&&this.options.mutationKey&&$e(s.mutationKey)!==$e(this.options.mutationKey)&&this.reset()}onUnsubscribe(){var e;this.hasListeners()||(null===(e=ze(kp,this))||void 0===e||e.removeObserver(this))}onMutationUpdate(e){Be(Sp,this,Tp).call(this),Be(Sp,this,Pp).call(this,e)}getCurrentResult(){return ze(wp,this)}reset(){var e;null===(e=ze(kp,this))||void 0===e||e.removeObserver(this),Ue(kp,this,void 0),Be(Sp,this,Tp).call(this),Be(Sp,this,Pp).call(this)}mutate(e,t){var s;return Ue(Ap,this,t),null===(s=ze(kp,this))||void 0===s||s.removeObserver(this),Ue(kp,this,ze(Np,this).getMutationCache().build(ze(Np,this),this.options)),ze(kp,this).addObserver(this),ze(kp,this).execute(e)}});function Tp(){var e,t;const s=null!==(e=null===(t=ze(kp,this))||void 0===t?void 0:t.state)&&void 0!==e?e:{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};Ue(wp,this,(0,Ie.A)((0,Ie.A)({},s),{},{isPending:"pending"===s.status,isSuccess:"success"===s.status,isError:"error"===s.status,isIdle:"idle"===s.status,mutate:this.mutate,reset:this.reset}))}function Pp(e){ht.batch(()=>{if(ze(Ap,this)&&this.hasListeners()){const c=ze(wp,this).variables,d=ze(wp,this).context;var t,s,r,a;if("success"===(null===e||void 0===e?void 0:e.type))null===(t=(s=ze(Ap,this)).onSuccess)||void 0===t||t.call(s,e.data,c,d),null===(r=(a=ze(Ap,this)).onSettled)||void 0===r||r.call(a,e.data,null,c,d);else if("error"===(null===e||void 0===e?void 0:e.type)){var n,i,o,l;null===(n=(i=ze(Ap,this)).onError)||void 0===n||n.call(i,e.error,c,d),null===(o=(l=ze(Ap,this)).onSettled)||void 0===o||o.call(l,void 0,e.error,c,d)}}this.listeners.forEach(e=>{e(ze(wp,this))})})}function Ep(e,t){const s=os(t),[a]=r.useState(()=>new _p(s,e));r.useEffect(()=>{a.setOptions(e)},[a,e]);const n=r.useSyncExternalStore(r.useCallback(e=>a.subscribe(ht.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=r.useCallback((e,t)=>{a.mutate(e,t).catch(Dp)},[a]);if(n.error&&jp(a.options.throwOnError,[n.error]))throw n.error;return(0,Ie.A)((0,Ie.A)({},n),{},{mutate:i,mutateAsync:n.mutate})}function Dp(){}const Mp=()=>{const e=os(),[t,s]=(0,r.useState)({}),{data:a,isLoading:n,error:i,refetch:o}=function(e,t){return Cp(e,ap,t)}({queryKey:["buses"],queryFn:async()=>{console.log("useBusManagement: Fetching buses...");try{const e=await(0,xs.nr)("/api/admin/buses");return console.log("useBusManagement: Buses fetched successfully:",e),Array.isArray(e)?e:e&&Array.isArray(e.data)?e.data:e&&Array.isArray(e.buses)?e.buses:(console.warn("useBusManagement: Unexpected data format, returning empty array"),[])}catch(i){throw console.error("useBusManagement: Error fetching buses:",i),i}},staleTime:3e4,refetchInterval:6e4,retry:3}),l=Ep({mutationFn:async e=>await(0,xs.nr)("/api/admin/buses",{method:"POST",body:JSON.stringify(e)}),onSuccess:t=>{e.setQueryData(["buses"],e=>e?[...e,t]:[t])},onError:e=>{Oe.Ay.error("Failed to create bus: ".concat(e.message))}}),c=Ep({mutationFn:async e=>{let{id:t,data:s}=e;return await(0,xs.nr)("/api/admin/buses/".concat(t),{method:"PUT",body:JSON.stringify(s)})},onSuccess:t=>{e.setQueryData(["buses"],e=>e?e.map(e=>e._id===t._id?t:e):[t])},onError:e=>{Oe.Ay.error("Failed to update bus: ".concat(e.message))}}),d=Ep({mutationFn:async e=>(await(0,xs.nr)("/api/admin/buses/".concat(e),{method:"DELETE"}),e),onSuccess:(t,s)=>{e.setQueryData(["buses"],e=>e?e.filter(e=>e._id!==s):[])},onError:e=>{Oe.Ay.error("Failed to delete bus: ".concat(e.message))}}),u=Ep({mutationFn:async e=>{let{busIds:t,action:s,data:r}=e;return await(0,xs.nr)("/api/admin/buses/bulk",{method:"POST",body:JSON.stringify({busIds:t,action:s,data:r})})},onSuccess:()=>{e.invalidateQueries(["buses"])},onError:e=>{Oe.Ay.error("Bulk operation failed: ".concat(e.message))}}),h=(0,r.useCallback)(async e=>{if(t[e])return t[e];try{const t=await(0,xs.nr)("/api/admin/buses/".concat(e,"/insights"));return s(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t})),t}catch(i){return console.error("Failed to fetch bus insights:",i),null}},[t]),m=(0,r.useCallback)(e=>{let t=80;"active"===e.status&&(t+=10),"maintenance"===e.status&&(t-=20),"inactive"===e.status&&(t-=30),e.odometerReading&&(e.odometerReading>1e5&&(t-=10),e.odometerReading<5e4&&(t+=5)),t=Math.max(0,Math.min(100,t));const s={performanceScore:t,efficiencyTrend:Math.random()>.5?1:-1,recommendations:[],rating:Math.ceil(t/20)};return t<60&&s.recommendations.push("Consider scheduling maintenance"),e.fuelLevel&&e.fuelLevel<20&&s.recommendations.push("Low fuel level - consider refueling"),e.nextMaintenance&&new Date(e.nextMaintenance)<new Date(Date.now()+6048e5)&&s.recommendations.push("Service due soon"),s},[]),p=(0,r.useMemo)(()=>{if(!a||!Array.isArray(a))return{};const e={};return a.forEach(t=>{e[t._id]=m(t)}),e},[a,m]),x=(0,r.useCallback)(async e=>l.mutateAsync(e),[l]),g=(0,r.useCallback)(async(e,t)=>c.mutateAsync({id:e,data:t}),[c]),f=(0,r.useCallback)(async e=>d.mutateAsync(e),[d]),y=(0,r.useCallback)(async(e,t,s)=>u.mutateAsync({busIds:e,action:t,data:s}),[u]);return{buses:a,isLoading:n,error:i,refetch:o,createBus:x,updateBus:g,deleteBus:f,bulkUpdateBuses:y,getBusInsights:h,busInsights:p,isCreating:l.isPending,isUpdating:c.isPending,isDeleting:d.isPending,isBulkUpdating:u.isPending}},Op=e=>{const[t,s]=(0,r.useState)(!1),[a,n]=(0,r.useState)(null),i=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(e){try{i.current=(0,Ah.Ay)(e,{transports:["websocket"],auth:{token:localStorage.getItem("token")}}),i.current.on("connect",()=>{console.log("WebSocket connected"),s(!0)}),i.current.on("disconnect",()=>{console.log("WebSocket disconnected"),s(!1)}),i.current.on("error",e=>{console.error("WebSocket error:",e)}),i.current.on("message",e=>{n(e)})}catch(t){console.error("WebSocket initialization error:",t)}return()=>{i.current&&i.current.disconnect()}}},[e]);return{socket:i.current,isConnected:t,lastMessage:a,sendMessage:(e,s)=>{i.current&&t&&i.current.emit(e,s)},on:(e,t)=>{i.current&&i.current.on(e,t)},off:(e,t)=>{i.current&&i.current.off(e,t)},emit:(e,s)=>{i.current&&t&&i.current.emit(e,s)}}},Rp=e=>{let{filters:t,onFiltersChange:s,depots:a=[],savedFilters:n=[],onSaveFilter:i,onLoadFilter:o,onDeleteFilter:l}=e;const[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),[m,p]=(0,r.useState)(""),x=(e,r)=>{s((0,Ie.A)((0,Ie.A)({},t),{},{[e]:r}))},g=Object.values(t).filter(e=>e&&"all"!==e&&""!==e).length;return(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 mb-4",children:[(0,cs.jsx)("div",{className:"flex-1 max-w-md",children:(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(ys.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search by bus number, registration, or driver...",value:t.search||"",onChange:e=>x("search",e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]})}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[n.length>0&&(0,cs.jsx)("div",{className:"relative",children:(0,cs.jsxs)("select",{onChange:e=>e.target.value&&(null===o||void 0===o?void 0:o(e.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",defaultValue:"",children:[(0,cs.jsx)("option",{value:"",children:"Saved Filters"}),n.map((e,t)=>(0,cs.jsx)("option",{value:t,children:e.name},t))]})}),(0,cs.jsxs)("button",{onClick:()=>d(!c),className:"px-4 py-2 rounded-lg border transition-all flex items-center space-x-2 ".concat(c?"bg-blue-50 border-blue-300 text-blue-700":"bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100"),children:[(0,cs.jsx)(Kd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Advanced"}),g>0&&(0,cs.jsx)("span",{className:"bg-blue-600 text-white text-xs rounded-full px-2 py-1 min-w-[20px]",children:g}),(0,cs.jsx)(qd.A,{className:"w-4 h-4 transition-transform ".concat(c?"rotate-180":"")})]}),g>0&&(0,cs.jsxs)("button",{onClick:()=>{s({search:"",status:"all",depotId:"all",busType:"all",fuelLevel:"all",maintenanceStatus:"all",performanceScore:"all",dateRange:"all"})},className:"px-3 py-2 text-gray-600 hover:text-gray-800 rounded-lg hover:bg-gray-100 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Rm,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Reset"})]})]})]}),(0,cs.jsx)(Md,{children:c&&(0,cs.jsx)(ed.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:(0,cs.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,cs.jsxs)("select",{value:t.status||"all",onChange:e=>x("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",children:[(0,cs.jsx)("option",{value:"all",children:"All Status"}),(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,cs.jsx)("option",{value:"retired",children:"Retired"}),(0,cs.jsx)("option",{value:"suspended",children:"Suspended"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot"}),(0,cs.jsxs)("select",{value:t.depotId||"all",onChange:e=>x("depotId",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",children:[(0,cs.jsx)("option",{value:"all",children:"All Depots"}),a.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bus Type"}),(0,cs.jsxs)("select",{value:t.busType||"all",onChange:e=>x("busType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",children:[(0,cs.jsx)("option",{value:"all",children:"All Types"}),(0,cs.jsx)("option",{value:"ac_sleeper",children:"AC Sleeper"}),(0,cs.jsx)("option",{value:"ac_seater",children:"AC Seater"}),(0,cs.jsx)("option",{value:"non_ac_sleeper",children:"Non-AC Sleeper"}),(0,cs.jsx)("option",{value:"non_ac_seater",children:"Non-AC Seater"}),(0,cs.jsx)("option",{value:"volvo",children:"Volvo"}),(0,cs.jsx)("option",{value:"mini",children:"Mini Bus"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuel Level"}),(0,cs.jsxs)("select",{value:t.fuelLevel||"all",onChange:e=>x("fuelLevel",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",children:[(0,cs.jsx)("option",{value:"all",children:"All Levels"}),(0,cs.jsx)("option",{value:"high",children:"High (80%+)"}),(0,cs.jsx)("option",{value:"medium",children:"Medium (40-79%)"}),(0,cs.jsx)("option",{value:"low",children:"Low (20-39%)"}),(0,cs.jsx)("option",{value:"critical",children:"Critical (<20%)"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Performance"}),(0,cs.jsxs)("select",{value:t.performanceScore||"all",onChange:e=>x("performanceScore",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",children:[(0,cs.jsx)("option",{value:"all",children:"All Scores"}),(0,cs.jsx)("option",{value:"excellent",children:"Excellent (90%+)"}),(0,cs.jsx)("option",{value:"good",children:"Good (70-89%)"}),(0,cs.jsx)("option",{value:"average",children:"Average (50-69%)"}),(0,cs.jsx)("option",{value:"poor",children:"Poor (<50%)"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maintenance"}),(0,cs.jsxs)("select",{value:t.maintenanceStatus||"all",onChange:e=>x("maintenanceStatus",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",children:[(0,cs.jsx)("option",{value:"all",children:"All"}),(0,cs.jsx)("option",{value:"overdue",children:"Overdue"}),(0,cs.jsx)("option",{value:"due_soon",children:"Due Soon (7 days)"}),(0,cs.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,cs.jsx)("option",{value:"up_to_date",children:"Up to Date"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Added"}),(0,cs.jsxs)("select",{value:t.dateRange||"all",onChange:e=>x("dateRange",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",children:[(0,cs.jsx)("option",{value:"all",children:"All Time"}),(0,cs.jsx)("option",{value:"today",children:"Today"}),(0,cs.jsx)("option",{value:"week",children:"This Week"}),(0,cs.jsx)("option",{value:"month",children:"This Month"}),(0,cs.jsx)("option",{value:"quarter",children:"This Quarter"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),(0,cs.jsxs)("select",{value:t.capacityRange||"all",onChange:e=>x("capacityRange",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",children:[(0,cs.jsx)("option",{value:"all",children:"All Sizes"}),(0,cs.jsx)("option",{value:"small",children:"Small (1-20)"}),(0,cs.jsx)("option",{value:"medium",children:"Medium (21-40)"}),(0,cs.jsx)("option",{value:"large",children:"Large (41-60)"}),(0,cs.jsx)("option",{value:"extra_large",children:"Extra Large (60+)"})]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[(0,cs.jsx)("div",{className:"text-sm text-gray-600",children:g>0&&"".concat(g," filter").concat(g>1?"s":""," applied")}),(0,cs.jsx)("div",{className:"flex items-center space-x-2",children:(0,cs.jsxs)("button",{onClick:()=>h(!0),disabled:0===g,className:"px-3 py-2 text-sm text-blue-600 hover:text-blue-700 disabled:text-gray-400 flex items-center space-x-2",children:[(0,cs.jsx)(Uh.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Save Filter"})]})})]})]})})}),(0,cs.jsx)(Md,{children:u&&(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,cs.jsxs)(ed.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Save Filter Preset"}),(0,cs.jsx)("input",{type:"text",placeholder:"Enter filter name...",value:m,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 mb-4",autoFocus:!0}),(0,cs.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,cs.jsx)("button",{onClick:()=>h(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,cs.jsx)("button",{onClick:()=>{m.trim()&&(null===i||void 0===i||i(m,t),p(""),h(!1))},disabled:!m.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"Save Filter"})]})]})})})]})},Ip=(0,Ns.A)("chart-no-axes-column-increasing",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]]),Lp=e=>{let{selectedBuses:t=[],onClose:s,onAction:a}=e;const[n,i]=(0,r.useState)(""),[o,l]=(0,r.useState)({}),[c,d]=(0,r.useState)(!1),u=[{id:"status_update",title:"Update Status",description:"Change status of selected buses",icon:Os.A,color:"blue",fields:[{name:"status",type:"select",label:"New Status",options:[{value:"active",label:"Active"},{value:"maintenance",label:"Maintenance"},{value:"suspended",label:"Suspended"},{value:"retired",label:"Retired"}]}]},{id:"assign_driver",title:"Assign Driver",description:"Assign driver to selected buses",icon:Ss.A,color:"green",fields:[{name:"driverId",type:"select",label:"Select Driver",options:[{value:"driver1",label:"John Doe"},{value:"driver2",label:"Jane Smith"},{value:"driver3",label:"Mike Johnson"}]}]},{id:"assign_conductor",title:"Assign Conductor",description:"Assign conductor to selected buses",icon:Ss.A,color:"purple",fields:[{name:"conductorId",type:"select",label:"Select Conductor",options:[{value:"conductor1",label:"Alice Brown"},{value:"conductor2",label:"Bob Wilson"},{value:"conductor3",label:"Carol Davis"}]}]},{id:"schedule_maintenance",title:"Schedule Maintenance",description:"Schedule maintenance for selected buses",icon:Lm.A,color:"yellow",fields:[{name:"maintenanceType",type:"select",label:"Maintenance Type",options:[{value:"routine",label:"Routine Service"},{value:"repair",label:"Repair"},{value:"inspection",label:"Inspection"}]},{name:"scheduledDate",type:"date",label:"Scheduled Date"},{name:"notes",type:"textarea",label:"Notes (Optional)",placeholder:"Additional notes for maintenance..."}]},{id:"update_fuel",title:"Update Fuel Level",description:"Update fuel level for selected buses",icon:Fm,color:"orange",fields:[{name:"fuelLevel",type:"number",label:"Fuel Level (%)",min:0,max:100},{name:"refuelDate",type:"datetime-local",label:"Refuel Date & Time"}]},{id:"update_location",title:"Update Location",description:"Update current location of selected buses",icon:gs.A,color:"indigo",fields:[{name:"latitude",type:"number",label:"Latitude",step:"any"},{name:"longitude",type:"number",label:"Longitude",step:"any"},{name:"stopName",type:"text",label:"Stop Name",placeholder:"Current stop or location name"}]},{id:"export_data",title:"Export Data",description:"Export selected buses data",icon:hd.A,color:"gray",fields:[{name:"format",type:"select",label:"Export Format",options:[{value:"csv",label:"CSV"},{value:"excel",label:"Excel"},{value:"pdf",label:"PDF"}]},{name:"includeDetails",type:"checkbox",label:"Include detailed information"}]},{id:"performance_analysis",title:"Performance Analysis",description:"Generate performance report for selected buses",icon:Ip,color:"teal",fields:[{name:"reportType",type:"select",label:"Report Type",options:[{value:"summary",label:"Summary Report"},{value:"detailed",label:"Detailed Report"},{value:"comparison",label:"Comparison Report"}]},{name:"dateRange",type:"select",label:"Date Range",options:[{value:"week",label:"Last Week"},{value:"month",label:"Last Month"},{value:"quarter",label:"Last Quarter"},{value:"year",label:"Last Year"}]}]}],h=(e,t)=>{l(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t}))},m=u.find(e=>e.id===n);return(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,cs.jsxs)(ed.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[(0,cs.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-purple-50",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,cs.jsx)(Os.A,{className:"w-6 h-6 text-blue-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Bulk Operations"}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600",children:[t.length," bus",1!==t.length?"es":""," selected"]})]})]}),(0,cs.jsx)("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,cs.jsx)(Bs.A,{className:"w-5 h-5"})})]})}),(0,cs.jsxs)("div",{className:"flex h-[600px]",children:[(0,cs.jsxs)("div",{className:"w-1/3 border-r border-gray-200 bg-gray-50 p-4 overflow-y-auto",children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Select Action"}),(0,cs.jsx)("div",{className:"space-y-2",children:u.map(e=>{const t=e.icon;return(0,cs.jsx)("button",{onClick:()=>{return t=e.id,i(t),void l({});var t},className:"w-full p-3 rounded-lg text-left transition-all ".concat(n===e.id?"bg-".concat(e.color,"-100 border-2 border-").concat(e.color,"-300 text-").concat(e.color,"-700"):"bg-white border border-gray-200 hover:border-gray-300 hover:shadow-sm"),children:(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 rounded-lg ".concat(n===e.id?"bg-".concat(e.color,"-200"):"bg-gray-100"),children:(0,cs.jsx)(t,{className:"w-4 h-4 ".concat(n===e.id?"text-".concat(e.color,"-600"):"text-gray-600")})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"font-medium text-sm",children:e.title}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]})]})},e.id)})})]}),(0,cs.jsx)("div",{className:"flex-1 p-6 overflow-y-auto",children:n?(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,cs.jsx)("div",{className:"p-3 bg-".concat(m.color,"-100 rounded-lg"),children:(0,cs.jsx)(m.icon,{className:"w-6 h-6 text-".concat(m.color,"-600")})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:m.title}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:m.description})]})]}),(0,cs.jsx)("div",{className:"space-y-4",children:m.fields.map(e=>(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.label,e.required&&(0,cs.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),"select"===e.type&&(0,cs.jsxs)("select",{value:o[e.name]||"",onChange:t=>h(e.name,t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsxs)("option",{value:"",children:["Select ",e.label]}),e.options.map(e=>(0,cs.jsx)("option",{value:e.value,children:e.label},e.value))]}),"text"===e.type&&(0,cs.jsx)("input",{type:"text",value:o[e.name]||"",onChange:t=>h(e.name,t.target.value),placeholder:e.placeholder,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),"number"===e.type&&(0,cs.jsx)("input",{type:"number",value:o[e.name]||"",onChange:t=>h(e.name,t.target.value),min:e.min,max:e.max,step:e.step,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),"date"===e.type&&(0,cs.jsx)("input",{type:"date",value:o[e.name]||"",onChange:t=>h(e.name,t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),"datetime-local"===e.type&&(0,cs.jsx)("input",{type:"datetime-local",value:o[e.name]||"",onChange:t=>h(e.name,t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),"textarea"===e.type&&(0,cs.jsx)("textarea",{value:o[e.name]||"",onChange:t=>h(e.name,t.target.value),placeholder:e.placeholder,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),"checkbox"===e.type&&(0,cs.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("input",{type:"checkbox",checked:o[e.name]||!1,onChange:t=>h(e.name,t.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:e.label})]})]},e.name))}),(0,cs.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,cs.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Action Summary"}),(0,cs.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,cs.jsxs)("p",{children:["\u2022 ",m.title," will be applied to ",t.length," bus",1!==t.length?"es":""]}),Object.entries(o).map(e=>{let[t,s]=e;return(0,cs.jsxs)("p",{children:["\u2022 ",t,": ","boolean"===typeof s?s?"Yes":"No":s]},t)})]})]})]}):(0,cs.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)(Os.A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-500 text-lg",children:"Select an action to continue"}),(0,cs.jsx)("p",{className:"text-gray-400 text-sm",children:"Choose from the available bulk operations"})]})})})]}),(0,cs.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"text-sm text-gray-600",children:[t.length," bus",1!==t.length?"es":""," will be affected"]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("button",{onClick:s,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,cs.jsx)("button",{onClick:async()=>{if(n){d(!0);try{await a(n,o),s()}catch(e){Oe.Ay.error("Bulk operation failed: ".concat(e.message))}finally{d(!1)}}},disabled:!n||c,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:c?(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,cs.jsx)("span",{children:"Processing..."})]}):(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)(jd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Execute Action"})]})})]})]})})]})})};var Fp=s(3165);const Bp=(0,Ns.A)("signal-high",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}]]),zp=(0,Ns.A)("signal-low",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}]]),Up=(0,Ns.A)("thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),Vp=(0,Ns.A)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),Kp=(0,Ns.A)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),Wp=(0,Ns.A)("share",[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]]),Hp=(0,Ns.A)("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),qp=(0,Ns.A)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),Gp=(0,Ns.A)("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),Yp=(0,Ns.A)("fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]),$p=(0,Ns.A)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);var Jp=s(8139),Qp=s.n(Jp),Xp=s(3950),Zp=s.n(Xp),ex=s(9889),tx=s.n(ex),sx=function(e,t){return sx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])},sx(e,t)};function rx(e,t){function s(){this.constructor=e}sx(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}function ax(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]])}return s}var nx=function(e,t,s,r){switch(t){case"debounce":return Zp()(e,s,r);case"throttle":return tx()(e,s,r);default:return e}},ix=function(e){return"function"===typeof e},ox=function(){return"undefined"===typeof window},lx=function(e){return e instanceof Element||e instanceof HTMLDocument},cx=function(e,t,s){return function(r){var a=r.width,n=r.height;e(function(e){return e.width===a&&e.height===n||e.width===a&&!s||e.height===n&&!t?e:{width:a,height:n}})}},dx=function(e){function t(t){var s=e.call(this,t)||this;s.cancelHandler=function(){s.resizeHandler&&s.resizeHandler.cancel&&(s.resizeHandler.cancel(),s.resizeHandler=null)},s.attachObserver=function(){var e=s.props,t=e.targetRef,r=e.observerOptions;if(!ox()){t&&t.current&&(s.targetRef.current=t.current);var a=s.getElement();a&&(s.observableElement&&s.observableElement===a||(s.observableElement=a,s.resizeObserver.observe(a,r)))}},s.getElement=function(){var e=s.props,t=e.querySelector,r=e.targetDomEl;if(ox())return null;if(t)return document.querySelector(t);if(r&&lx(r))return r;if(s.targetRef&&lx(s.targetRef.current))return s.targetRef.current;var a=(0,i.findDOMNode)(s);if(!a)return null;switch(s.getRenderType()){case"renderProp":case"childFunction":case"child":case"childArray":return a;default:return a.parentElement}},s.createResizeHandler=function(e){var t=s.props,r=t.handleWidth,a=void 0===r||r,n=t.handleHeight,i=void 0===n||n,o=t.onResize;if(a||i){var l=cx(function(e){return s.setState(e,function(){return null===o||void 0===o?void 0:o(s.state.width,s.state.height)})},a,i);e.forEach(function(e){var t=e&&e.contentRect||{},r=t.width,a=t.height;!s.skipOnMount&&!ox()&&l({width:r,height:a}),s.skipOnMount=!1})}},s.getRenderType=function(){var e=s.props,t=e.render,a=e.children;return ix(t)?"renderProp":ix(a)?"childFunction":(0,r.isValidElement)(a)?"child":Array.isArray(a)?"childArray":"parent"};var a=t.skipOnMount,n=t.refreshMode,o=t.refreshRate,l=void 0===o?1e3:o,c=t.refreshOptions;return s.state={width:void 0,height:void 0},s.skipOnMount=a,s.targetRef=(0,r.createRef)(),s.observableElement=null,ox()||(s.resizeHandler=nx(s.createResizeHandler,n,l,c),s.resizeObserver=new window.ResizeObserver(s.resizeHandler)),s}return rx(t,e),t.prototype.componentDidMount=function(){this.attachObserver()},t.prototype.componentDidUpdate=function(){this.attachObserver()},t.prototype.componentWillUnmount=function(){ox()||(this.observableElement=null,this.resizeObserver.disconnect(),this.cancelHandler())},t.prototype.render=function(){var e=this.props,t=e.render,s=e.children,a=e.nodeType,n=void 0===a?"div":a,i=this.state,o={width:i.width,height:i.height,targetRef:this.targetRef};switch(this.getRenderType()){case"renderProp":return null===t||void 0===t?void 0:t(o);case"childFunction":return null===s||void 0===s?void 0:s(o);case"child":var l=s;if(l.type&&"string"===typeof l.type){var c=ax(o,["targetRef"]);return(0,r.cloneElement)(l,c)}return(0,r.cloneElement)(l,o);case"childArray":return s.map(function(e){return!!e&&(0,r.cloneElement)(e,o)});default:return r.createElement(n,null)}},t}(r.PureComponent);ox()?r.useEffect:r.useLayoutEffect;var ux=s(3097),hx=s.n(ux),mx=s(4052),px=s.n(mx),xx=s(5268),gx=s.n(xx),fx=s(9160),yx=s.n(fx),bx=s(620),vx=s.n(bx),jx=function(e){return 0===e?0:e>0?1:-1},Nx=function(e){return vx()(e)&&e.indexOf("%")===e.length-1},wx=function(e){return yx()(e)&&!gx()(e)},kx=function(e){return wx(e)||vx()(e)},Ax=0,Sx=function(e){var t=++Ax;return"".concat(e||"").concat(t)},Cx=function(e,t){var s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!wx(e)&&!vx()(e))return r;if(Nx(e)){var n=e.indexOf("%");s=t*parseFloat(e.slice(0,n))/100}else s=+e;return gx()(s)&&(s=r),a&&s>t&&(s=t),s},_x=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},Tx=function(e,t){return wx(e)&&wx(t)?function(s){return e+s*(t-e)}:function(){return t}};function Px(e,t,s){return e&&e.length?e.find(function(e){return e&&("function"===typeof t?t(e):hx()(e,t))===s}):null}var Ex=function(e,t){for(var s=arguments.length,r=new Array(s>2?s-2:0),a=2;a<s;a++)r[a-2]=arguments[a]};function Dx(){return Dx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Dx.apply(this,arguments)}function Mx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var r,a,n,i,o=[],l=!0,c=!1;try{if(n=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;l=!1}else for(;!(l=(r=n.call(s)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=s.return&&(i=s.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ox(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Ox(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ox(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}var Rx=(0,r.forwardRef)(function(e,t){var s=e.aspect,a=e.initialDimension,n=void 0===a?{width:-1,height:-1}:a,i=e.width,o=void 0===i?"100%":i,l=e.height,c=void 0===l?"100%":l,d=e.minWidth,u=void 0===d?0:d,h=e.minHeight,m=e.maxHeight,p=e.children,x=e.debounce,g=void 0===x?0:x,f=e.id,y=e.className,b=e.onResize,v=Mx((0,r.useState)({containerWidth:n.width,containerHeight:n.height}),2),j=v[0],N=v[1],w=(0,r.useRef)(null);(0,r.useImperativeHandle)(t,function(){return w},[w]);var k=(0,r.useCallback)(function(){return w.current?{containerWidth:w.current.clientWidth,containerHeight:w.current.clientHeight}:null},[]),A=(0,r.useCallback)(function(){var e=k();if(e){var t=e.containerWidth,s=e.containerHeight;b&&b(t,s),N(function(e){var r=e.containerWidth,a=e.containerHeight;return t!==r||s!==a?{containerWidth:t,containerHeight:s}:e})}},[k,b]),S=(0,r.useMemo)(function(){var e=j.containerWidth,t=j.containerHeight;if(e<0||t<0)return null;Ex(Nx(o)||Nx(c),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",o,c),Ex(!s||s>0,"The aspect(%s) must be greater than zero.",s);var a=Nx(o)?e:o,n=Nx(c)?t:c;return s&&s>0&&(a?n=a/s:n&&(a=n*s),m&&n>m&&(n=m)),Ex(a>0||n>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",a,n,o,c,u,h,s),(0,r.cloneElement)(p,{width:a,height:n})},[s,p,c,m,h,u,j,o]);(0,r.useEffect)(function(){var e=k();e&&N(e)},[k]);var C={width:o,height:c,minWidth:u,minHeight:h,maxHeight:m};return r.createElement(dx,{handleWidth:!0,handleHeight:!0,onResize:A,targetRef:w,refreshMode:g>0?"debounce":void 0,refreshRate:g},r.createElement("div",Dx({},null!=f?{id:"".concat(f)}:{},{className:Qp()("recharts-responsive-container",y),style:C,ref:w}),S))}),Ix=s(7002),Lx=s.n(Ix),Fx=s(8990),Bx=s.n(Fx),zx=s(1629),Ux=s.n(zx),Vx=s(7424),Kx=s.n(Vx),Wx=s(6604),Hx=s.n(Wx),qx=s(9686),Gx=s.n(qx),Yx=s(6361),$x=s.n(Yx),Jx={isSsr:!("undefined"!==typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return Jx[e]},set:function(e,t){if("string"===typeof e)Jx[e]=t;else{var s=Object.keys(e);s&&s.length&&s.forEach(function(t){Jx[t]=e[t]})}}};function Qx(e){return Qx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qx(e)}function Xx(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function Zx(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Xx(Object(s),!0).forEach(function(t){eg(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Xx(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function eg(e,t,s){return(t=function(e){var t=function(e,t){if("object"!==Qx(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==Qx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Qx(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function tg(e){return function(e){if(Array.isArray(e))return sg(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return sg(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return sg(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sg(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}var rg={widthCache:{},cacheCount:0},ag={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ng=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","lineHeight","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"],ig="recharts_measurement_span";var og=function(e){return Object.keys(e).reduce(function(t,s){return"".concat(t).concat((r=s,r.split("").reduce(function(e,t){return t===t.toUpperCase()?[].concat(tg(e),["-",t.toLowerCase()]):[].concat(tg(e),[t])},[]).join("")),":").concat(function(e,t){return ng.indexOf(e)>=0&&t===+t?"".concat(t,"px"):t}(s,e[s]),";");var r},"")},lg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||Jx.isSsr)return{width:0,height:0};var s="".concat(e),r=og(t),a="".concat(s,"-").concat(r);if(rg.widthCache[a])return rg.widthCache[a];try{var n=document.getElementById(ig);n||((n=document.createElement("span")).setAttribute("id",ig),n.setAttribute("aria-hidden","true"),document.body.appendChild(n));var i=Zx(Zx({},ag),t);Object.keys(i).map(function(e){return n.style[e]=i[e],e}),n.textContent=s;var o=n.getBoundingClientRect(),l={width:o.width,height:o.height};return rg.widthCache[a]=l,++rg.cacheCount>2e3&&(rg.cacheCount=0,rg.widthCache={}),l}catch(qU){return{width:0,height:0}}};function cg(e,t,s){if(t<1)return[];if(1===t&&void 0===s)return e;for(var r=[],a=0;a<e.length;a+=t){if(void 0!==s&&!0!==s(e[a]))return;r.push(e[a])}return r}var dg=s(1733),ug=s.n(dg),hg=s(9853),mg=s.n(hg),pg=s(643),xg=s.n(pg),gg=s(539),fg=s.n(gg),yg=s(6745),bg=s.n(yg),vg=s(3538),jg=s.n(vg);function Ng(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function wg(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class kg extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_g;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[s,r]of e)this.set(s,r)}get(e){return super.get(Ag(this,e))}has(e){return super.has(Ag(this,e))}set(e,t){return super.set(Sg(this,e),t)}delete(e){return super.delete(Cg(this,e))}}Set;function Ag(e,t){let{_intern:s,_key:r}=e;const a=r(t);return s.has(a)?s.get(a):t}function Sg(e,t){let{_intern:s,_key:r}=e;const a=r(t);return s.has(a)?s.get(a):(s.set(a,t),t)}function Cg(e,t){let{_intern:s,_key:r}=e;const a=r(t);return s.has(a)&&(t=s.get(a),s.delete(a)),t}function _g(e){return null!==e&&"object"===typeof e?e.valueOf():e}const Tg=Symbol("implicit");function Pg(){var e=new kg,t=[],s=[],r=Tg;function a(a){let n=e.get(a);if(void 0===n){if(r!==Tg)return r;e.set(a,n=t.push(a)-1)}return s[n%s.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new kg;for(const r of s)e.has(r)||e.set(r,t.push(r)-1);return a},a.range=function(e){return arguments.length?(s=Array.from(e),a):s.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.copy=function(){return Pg(t,s).unknown(r)},Ng.apply(a,arguments),a}function Eg(){var e,t,s=Pg().unknown(void 0),r=s.domain,a=s.range,n=0,i=1,o=!1,l=0,c=0,d=.5;function u(){var s=r().length,u=i<n,h=u?i:n,m=u?n:i;e=(m-h)/Math.max(1,s-l+2*c),o&&(e=Math.floor(e)),h+=(m-h-e*(s-l))*d,t=e*(1-l),o&&(h=Math.round(h),t=Math.round(t));var p=function(e,t,s){e=+e,t=+t,s=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+s;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/s)),n=new Array(a);++r<a;)n[r]=e+r*s;return n}(s).map(function(t){return h+e*t});return a(u?p.reverse():p)}return delete s.unknown,s.domain=function(e){return arguments.length?(r(e),u()):r()},s.range=function(e){return arguments.length?([n,i]=e,n=+n,i=+i,u()):[n,i]},s.rangeRound=function(e){return[n,i]=e,n=+n,i=+i,o=!0,u()},s.bandwidth=function(){return t},s.step=function(){return e},s.round=function(e){return arguments.length?(o=!!e,u()):o},s.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),u()):l},s.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),u()):l},s.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},s.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},s.copy=function(){return Eg(r(),[n,i]).round(o).paddingInner(l).paddingOuter(c).align(d)},Ng.apply(u(),arguments)}function Dg(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Dg(t())},e}function Mg(){return Dg(Eg.apply(null,arguments).paddingInner(1))}const Og=Math.sqrt(50),Rg=Math.sqrt(10),Ig=Math.sqrt(2);function Lg(e,t,s){const r=(t-e)/Math.max(0,s),a=Math.floor(Math.log10(r)),n=r/Math.pow(10,a),i=n>=Og?10:n>=Rg?5:n>=Ig?2:1;let o,l,c;return a<0?(c=Math.pow(10,-a)/i,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,a)*i,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=s&&s<2?Lg(e,t,2*s):[o,l,c]}function Fg(e,t,s){if(!((s=+s)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[a,n,i]=r?Lg(t,e,s):Lg(e,t,s);if(!(n>=a))return[];const o=n-a+1,l=new Array(o);if(r)if(i<0)for(let c=0;c<o;++c)l[c]=(n-c)/-i;else for(let c=0;c<o;++c)l[c]=(n-c)*i;else if(i<0)for(let c=0;c<o;++c)l[c]=(a+c)/-i;else for(let c=0;c<o;++c)l[c]=(a+c)*i;return l}function Bg(e,t,s){return Lg(e=+e,t=+t,s=+s)[2]}function zg(e,t,s){s=+s;const r=(t=+t)<(e=+e),a=r?Bg(t,e,s):Bg(e,t,s);return(r?-1:1)*(a<0?1/-a:a)}function Ug(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Vg(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Kg(e){let t,s,r;function a(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<n){if(0!==t(r,r))return n;do{const t=a+n>>>1;s(e[t],r)<0?a=t+1:n=t}while(a<n)}return a}return 2!==e.length?(t=Ug,s=(t,s)=>Ug(e(t),s),r=(t,s)=>e(t)-s):(t=e===Ug||e===Vg?e:Wg,s=e,r=e),{left:a,center:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=a(e,t,s,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return n>s&&r(e[n-1],t)>-r(e[n],t)?n-1:n},right:function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<n){if(0!==t(r,r))return n;do{const t=a+n>>>1;s(e[t],r)<=0?a=t+1:n=t}while(a<n)}return a}}}function Wg(){return 0}function Hg(e){return null===e?NaN:+e}const qg=Kg(Ug),Gg=qg.right,Yg=(qg.left,Kg(Hg).center,Gg);function $g(e,t,s){e.prototype=t.prototype=s,s.constructor=e}function Jg(e,t){var s=Object.create(e.prototype);for(var r in t)s[r]=t[r];return s}function Qg(){}var Xg=.7,Zg=1/Xg,ef="\\s*([+-]?\\d+)\\s*",tf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rf=/^#([0-9a-f]{3,8})$/,af=new RegExp("^rgb\\(".concat(ef,",").concat(ef,",").concat(ef,"\\)$")),nf=new RegExp("^rgb\\(".concat(sf,",").concat(sf,",").concat(sf,"\\)$")),of=new RegExp("^rgba\\(".concat(ef,",").concat(ef,",").concat(ef,",").concat(tf,"\\)$")),lf=new RegExp("^rgba\\(".concat(sf,",").concat(sf,",").concat(sf,",").concat(tf,"\\)$")),cf=new RegExp("^hsl\\(".concat(tf,",").concat(sf,",").concat(sf,"\\)$")),df=new RegExp("^hsla\\(".concat(tf,",").concat(sf,",").concat(sf,",").concat(tf,"\\)$")),uf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function hf(){return this.rgb().formatHex()}function mf(){return this.rgb().formatRgb()}function pf(e){var t,s;return e=(e+"").trim().toLowerCase(),(t=rf.exec(e))?(s=t[1].length,t=parseInt(t[1],16),6===s?xf(t):3===s?new yf(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===s?gf(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===s?gf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=af.exec(e))?new yf(t[1],t[2],t[3],1):(t=nf.exec(e))?new yf(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=of.exec(e))?gf(t[1],t[2],t[3],t[4]):(t=lf.exec(e))?gf(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=cf.exec(e))?kf(t[1],t[2]/100,t[3]/100,1):(t=df.exec(e))?kf(t[1],t[2]/100,t[3]/100,t[4]):uf.hasOwnProperty(e)?xf(uf[e]):"transparent"===e?new yf(NaN,NaN,NaN,0):null}function xf(e){return new yf(e>>16&255,e>>8&255,255&e,1)}function gf(e,t,s,r){return r<=0&&(e=t=s=NaN),new yf(e,t,s,r)}function ff(e,t,s,r){return 1===arguments.length?((a=e)instanceof Qg||(a=pf(a)),a?new yf((a=a.rgb()).r,a.g,a.b,a.opacity):new yf):new yf(e,t,s,null==r?1:r);var a}function yf(e,t,s,r){this.r=+e,this.g=+t,this.b=+s,this.opacity=+r}function bf(){return"#".concat(wf(this.r)).concat(wf(this.g)).concat(wf(this.b))}function vf(){const e=jf(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(Nf(this.r),", ").concat(Nf(this.g),", ").concat(Nf(this.b)).concat(1===e?")":", ".concat(e,")"))}function jf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function wf(e){return((e=Nf(e))<16?"0":"")+e.toString(16)}function kf(e,t,s,r){return r<=0?e=t=s=NaN:s<=0||s>=1?e=t=NaN:t<=0&&(e=NaN),new Sf(e,t,s,r)}function Af(e){if(e instanceof Sf)return new Sf(e.h,e.s,e.l,e.opacity);if(e instanceof Qg||(e=pf(e)),!e)return new Sf;if(e instanceof Sf)return e;var t=(e=e.rgb()).r/255,s=e.g/255,r=e.b/255,a=Math.min(t,s,r),n=Math.max(t,s,r),i=NaN,o=n-a,l=(n+a)/2;return o?(i=t===n?(s-r)/o+6*(s<r):s===n?(r-t)/o+2:(t-s)/o+4,o/=l<.5?n+a:2-n-a,i*=60):o=l>0&&l<1?0:i,new Sf(i,o,l,e.opacity)}function Sf(e,t,s,r){this.h=+e,this.s=+t,this.l=+s,this.opacity=+r}function Cf(e){return(e=(e||0)%360)<0?e+360:e}function _f(e){return Math.max(0,Math.min(1,e||0))}function Tf(e,t,s){return 255*(e<60?t+(s-t)*e/60:e<180?s:e<240?t+(s-t)*(240-e)/60:t)}function Pf(e,t,s,r,a){var n=e*e,i=n*e;return((1-3*e+3*n-i)*t+(4-6*n+3*i)*s+(1+3*e+3*n-3*i)*r+i*a)/6}$g(Qg,pf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:hf,formatHex:hf,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Af(this).formatHsl()},formatRgb:mf,toString:mf}),$g(yf,ff,Jg(Qg,{brighter(e){return e=null==e?Zg:Math.pow(Zg,e),new yf(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Xg:Math.pow(Xg,e),new yf(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new yf(Nf(this.r),Nf(this.g),Nf(this.b),jf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bf,formatHex:bf,formatHex8:function(){return"#".concat(wf(this.r)).concat(wf(this.g)).concat(wf(this.b)).concat(wf(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:vf,toString:vf})),$g(Sf,function(e,t,s,r){return 1===arguments.length?Af(e):new Sf(e,t,s,null==r?1:r)},Jg(Qg,{brighter(e){return e=null==e?Zg:Math.pow(Zg,e),new Sf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Xg:Math.pow(Xg,e),new Sf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,s=this.l,r=s+(s<.5?s:1-s)*t,a=2*s-r;return new yf(Tf(e>=240?e-240:e+120,a,r),Tf(e,a,r),Tf(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new Sf(Cf(this.h),_f(this.s),_f(this.l),jf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=jf(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(Cf(this.h),", ").concat(100*_f(this.s),"%, ").concat(100*_f(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const Ef=e=>()=>e;function Df(e,t){return function(s){return e+s*t}}function Mf(e){return 1===(e=+e)?Of:function(t,s){return s-t?function(e,t,s){return e=Math.pow(e,s),t=Math.pow(t,s)-e,s=1/s,function(r){return Math.pow(e+r*t,s)}}(t,s,e):Ef(isNaN(t)?s:t)}}function Of(e,t){var s=t-e;return s?Df(e,s):Ef(isNaN(e)?t:e)}const Rf=function e(t){var s=Mf(t);function r(e,t){var r=s((e=ff(e)).r,(t=ff(t)).r),a=s(e.g,t.g),n=s(e.b,t.b),i=Of(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=n(t),e.opacity=i(t),e+""}}return r.gamma=e,r}(1);function If(e){return function(t){var s,r,a=t.length,n=new Array(a),i=new Array(a),o=new Array(a);for(s=0;s<a;++s)r=ff(t[s]),n[s]=r.r||0,i[s]=r.g||0,o[s]=r.b||0;return n=e(n),i=e(i),o=e(o),r.opacity=1,function(e){return r.r=n(e),r.g=i(e),r.b=o(e),r+""}}}If(function(e){var t=e.length-1;return function(s){var r=s<=0?s=0:s>=1?(s=1,t-1):Math.floor(s*t),a=e[r],n=e[r+1],i=r>0?e[r-1]:2*a-n,o=r<t-1?e[r+2]:2*n-a;return Pf((s-r/t)*t,i,a,n,o)}}),If(function(e){var t=e.length;return function(s){var r=Math.floor(((s%=1)<0?++s:s)*t),a=e[(r+t-1)%t],n=e[r%t],i=e[(r+1)%t],o=e[(r+2)%t];return Pf((s-r/t)*t,a,n,i,o)}});function Lf(e,t){var s,r=t?t.length:0,a=e?Math.min(r,e.length):0,n=new Array(a),i=new Array(r);for(s=0;s<a;++s)n[s]=Hf(e[s],t[s]);for(;s<r;++s)i[s]=t[s];return function(e){for(s=0;s<a;++s)i[s]=n[s](e);return i}}function Ff(e,t){var s=new Date;return e=+e,t=+t,function(r){return s.setTime(e*(1-r)+t*r),s}}function Bf(e,t){return e=+e,t=+t,function(s){return e*(1-s)+t*s}}function zf(e,t){var s,r={},a={};for(s in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)s in e?r[s]=Hf(e[s],t[s]):a[s]=t[s];return function(e){for(s in r)a[s]=r[s](e);return a}}var Uf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vf=new RegExp(Uf.source,"g");function Kf(e,t){var s,r,a,n=Uf.lastIndex=Vf.lastIndex=0,i=-1,o=[],l=[];for(e+="",t+="";(s=Uf.exec(e))&&(r=Vf.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),o[i]?o[i]+=a:o[++i]=a),(s=s[0])===(r=r[0])?o[i]?o[i]+=r:o[++i]=r:(o[++i]=null,l.push({i:i,x:Bf(s,r)})),n=Vf.lastIndex;return n<t.length&&(a=t.slice(n),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var s,r=0;r<t;++r)o[(s=l[r]).i]=s.x(e);return o.join("")})}function Wf(e,t){t||(t=[]);var s,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(n){for(s=0;s<r;++s)a[s]=e[s]*(1-n)+t[s]*n;return a}}function Hf(e,t){var s,r=typeof t;return null==t||"boolean"===r?Ef(t):("number"===r?Bf:"string"===r?(s=pf(t))?(t=s,Rf):Kf:t instanceof pf?Rf:t instanceof Date?Ff:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?Wf:Array.isArray(t)?Lf:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?zf:Bf)(e,t)}function qf(e,t){return e=+e,t=+t,function(s){return Math.round(e*(1-s)+t*s)}}function Gf(e){return+e}var Yf=[0,1];function $f(e){return e}function Jf(e,t){return(t-=e=+e)?function(s){return(s-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function Qf(e,t,s){var r=e[0],a=e[1],n=t[0],i=t[1];return a<r?(r=Jf(a,r),n=s(i,n)):(r=Jf(r,a),n=s(n,i)),function(e){return n(r(e))}}function Xf(e,t,s){var r=Math.min(e.length,t.length)-1,a=new Array(r),n=new Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)a[i]=Jf(e[i],e[i+1]),n[i]=s(t[i],t[i+1]);return function(t){var s=Yg(e,t,1,r)-1;return n[s](a[s](t))}}function Zf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ey(){var e,t,s,r,a,n,i=Yf,o=Yf,l=Hf,c=$f;function d(){var e=Math.min(i.length,o.length);return c!==$f&&(c=function(e,t){var s;return e>t&&(s=e,e=t,t=s),function(s){return Math.max(e,Math.min(t,s))}}(i[0],i[e-1])),r=e>2?Xf:Qf,a=n=null,u}function u(t){return null==t||isNaN(t=+t)?s:(a||(a=r(i.map(e),o,l)))(e(c(t)))}return u.invert=function(s){return c(t((n||(n=r(o,i.map(e),Bf)))(s)))},u.domain=function(e){return arguments.length?(i=Array.from(e,Gf),d()):i.slice()},u.range=function(e){return arguments.length?(o=Array.from(e),d()):o.slice()},u.rangeRound=function(e){return o=Array.from(e),l=qf,d()},u.clamp=function(e){return arguments.length?(c=!!e||$f,d()):c!==$f},u.interpolate=function(e){return arguments.length?(l=e,d()):l},u.unknown=function(e){return arguments.length?(s=e,u):s},function(s,r){return e=s,t=r,d()}}function ty(){return ey()($f,$f)}var sy,ry=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ay(e){if(!(t=ry.exec(e)))throw new Error("invalid format: "+e);var t;return new ny({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function ny(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function iy(e,t){if((s=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var s,r=e.slice(0,s);return[r.length>1?r[0]+r.slice(2):r,+e.slice(s+1)]}function oy(e){return(e=iy(Math.abs(e)))?e[1]:NaN}function ly(e,t){var s=iy(e,t);if(!s)return e+"";var r=s[0],a=s[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}ay.prototype=ny.prototype,ny.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const cy={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ly(100*e,t),r:ly,s:function(e,t){var s=iy(e,t);if(!s)return e+"";var r=s[0],a=s[1],n=a-(sy=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,i=r.length;return n===i?r:n>i?r+new Array(n-i+1).join("0"):n>0?r.slice(0,n)+"."+r.slice(n):"0."+new Array(1-n).join("0")+iy(e,Math.max(0,t+n-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function dy(e){return e}var uy,hy,my,py=Array.prototype.map,xy=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function gy(e){var t,s,r=void 0===e.grouping||void 0===e.thousands?dy:(t=py.call(e.grouping,Number),s=e.thousands+"",function(e,r){for(var a=e.length,n=[],i=0,o=t[0],l=0;a>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),n.push(e.substring(a-=o,a+o)),!((l+=o+1)>r));)o=t[i=(i+1)%t.length];return n.reverse().join(s)}),a=void 0===e.currency?"":e.currency[0]+"",n=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?dy:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(py.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=ay(e)).fill,s=e.align,u=e.sign,h=e.symbol,m=e.zero,p=e.width,x=e.comma,g=e.precision,f=e.trim,y=e.type;"n"===y?(x=!0,y="g"):cy[y]||(void 0===g&&(g=12),f=!0,y="g"),(m||"0"===t&&"="===s)&&(m=!0,t="0",s="=");var b="$"===h?a:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",v="$"===h?n:/[%p]/.test(y)?l:"",j=cy[y],N=/[defgprs%]/.test(y);function w(e){var a,n,l,h=b,w=v;if("c"===y)w=j(e)+w,e="";else{var k=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:j(Math.abs(e),g),f&&(e=function(e){e:for(var t,s=e.length,r=1,a=-1;r<s;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),k&&0===+e&&"+"!==u&&(k=!1),h=(k?"("===u?u:c:"-"===u||"("===u?"":u)+h,w=("s"===y?xy[8+sy/3]:"")+w+(k&&"("===u?")":""),N)for(a=-1,n=e.length;++a<n;)if(48>(l=e.charCodeAt(a))||l>57){w=(46===l?i+e.slice(a+1):e.slice(a))+w,e=e.slice(0,a);break}}x&&!m&&(e=r(e,1/0));var A=h.length+e.length+w.length,S=A<p?new Array(p-A+1).join(t):"";switch(x&&m&&(e=r(S+e,S.length?p-w.length:1/0),S=""),s){case"<":e=h+e+w+S;break;case"=":e=h+S+e+w;break;case"^":e=S.slice(0,A=S.length>>1)+h+e+w+S.slice(A);break;default:e=S+h+e+w}return o(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),w.toString=function(){return e+""},w}return{format:u,formatPrefix:function(e,t){var s=u(((e=ay(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(oy(t)/3))),a=Math.pow(10,-r),n=xy[8+r/3];return function(e){return s(a*e)+n}}}}function fy(e,t,s,r){var a,n=zg(e,t,s);switch((r=ay(null==r?",f":r)).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(oy(t)/3)))-oy(Math.abs(e)))}(n,i))||(r.precision=a),my(r,i);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,oy(t)-oy(e))+1}(n,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=function(e){return Math.max(0,-oy(Math.abs(e)))}(n))||(r.precision=a-2*("%"===r.type))}return hy(r)}function yy(e){var t=e.domain;return e.ticks=function(e){var s=t();return Fg(s[0],s[s.length-1],null==e?10:e)},e.tickFormat=function(e,s){var r=t();return fy(r[0],r[r.length-1],null==e?10:e,s)},e.nice=function(s){null==s&&(s=10);var r,a,n=t(),i=0,o=n.length-1,l=n[i],c=n[o],d=10;for(c<l&&(a=l,l=c,c=a,a=i,i=o,o=a);d-- >0;){if((a=Bg(l,c,s))===r)return n[i]=l,n[o]=c,t(n);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}r=a}return e},e}function by(){var e=ty();return e.copy=function(){return Zf(e,by())},Ng.apply(e,arguments),yy(e)}function vy(e){var t;function s(e){return null==e||isNaN(e=+e)?t:e}return s.invert=s,s.domain=s.range=function(t){return arguments.length?(e=Array.from(t,Gf),s):e.slice()},s.unknown=function(e){return arguments.length?(t=e,s):t},s.copy=function(){return vy(e).unknown(t)},e=arguments.length?Array.from(e,Gf):[0,1],yy(s)}function jy(e,t){var s,r=0,a=(e=e.slice()).length-1,n=e[r],i=e[a];return i<n&&(s=r,r=a,a=s,s=n,n=i,i=s),e[r]=t.floor(n),e[a]=t.ceil(i),e}function Ny(e){return Math.log(e)}function wy(e){return Math.exp(e)}function ky(e){return-Math.log(-e)}function Ay(e){return-Math.exp(-e)}function Sy(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Cy(e){return(t,s)=>-e(-t,s)}function _y(e){const t=e(Ny,wy),s=t.domain;let r,a,n=10;function i(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(n),a=function(e){return 10===e?Sy:e===Math.E?Math.exp:t=>Math.pow(e,t)}(n),s()[0]<0?(r=Cy(r),a=Cy(a),e(ky,Ay)):e(Ny,wy),t}return t.base=function(e){return arguments.length?(n=+e,i()):n},t.domain=function(e){return arguments.length?(s(e),i()):s()},t.ticks=e=>{const t=s();let i=t[0],o=t[t.length-1];const l=o<i;l&&([i,o]=[o,i]);let c,d,u=r(i),h=r(o);const m=null==e?10:+e;let p=[];if(!(n%1)&&h-u<m){if(u=Math.floor(u),h=Math.ceil(h),i>0){for(;u<=h;++u)for(c=1;c<n;++c)if(d=u<0?c/a(-u):c*a(u),!(d<i)){if(d>o)break;p.push(d)}}else for(;u<=h;++u)for(c=n-1;c>=1;--c)if(d=u>0?c/a(-u):c*a(u),!(d<i)){if(d>o)break;p.push(d)}2*p.length<m&&(p=Fg(i,o,m))}else p=Fg(u,h,Math.min(h-u,m)).map(a);return l?p.reverse():p},t.tickFormat=(e,s)=>{if(null==e&&(e=10),null==s&&(s=10===n?"s":","),"function"!==typeof s&&(n%1||null!=(s=ay(s)).precision||(s.trim=!0),s=hy(s)),e===1/0)return s;const i=Math.max(1,n*e/t.ticks().length);return e=>{let t=e/a(Math.round(r(e)));return t*n<n-.5&&(t*=n),t<=i?s(e):""}},t.nice=()=>s(jy(s(),{floor:e=>a(Math.floor(r(e))),ceil:e=>a(Math.ceil(r(e)))})),t}function Ty(){const e=_y(ey()).domain([1,10]);return e.copy=()=>Zf(e,Ty()).base(e.base()),Ng.apply(e,arguments),e}function Py(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Ey(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Dy(e){var t=1,s=e(Py(t),Ey(t));return s.constant=function(s){return arguments.length?e(Py(t=+s),Ey(t)):t},yy(s)}function My(){var e=Dy(ey());return e.copy=function(){return Zf(e,My()).constant(e.constant())},Ng.apply(e,arguments)}function Oy(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Ry(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Iy(e){return e<0?-e*e:e*e}function Ly(e){var t=e($f,$f),s=1;return t.exponent=function(t){return arguments.length?1===(s=+t)?e($f,$f):.5===s?e(Ry,Iy):e(Oy(s),Oy(1/s)):s},yy(t)}function Fy(){var e=Ly(ey());return e.copy=function(){return Zf(e,Fy()).exponent(e.exponent())},Ng.apply(e,arguments),e}function By(){return Fy.apply(null,arguments).exponent(.5)}function zy(e){return Math.sign(e)*e*e}function Uy(){var e,t=ty(),s=[0,1],r=!1;function a(s){var a=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(s));return isNaN(a)?e:r?Math.round(a):a}return a.invert=function(e){return t.invert(zy(e))},a.domain=function(e){return arguments.length?(t.domain(e),a):t.domain()},a.range=function(e){return arguments.length?(t.range((s=Array.from(e,Gf)).map(zy)),a):s.slice()},a.rangeRound=function(e){return a.range(e).round(!0)},a.round=function(e){return arguments.length?(r=!!e,a):r},a.clamp=function(e){return arguments.length?(t.clamp(e),a):t.clamp()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return Uy(t.domain(),s).round(r).clamp(t.clamp()).unknown(e)},Ng.apply(a,arguments),yy(a)}function Vy(e,t){let s;if(void 0===t)for(const r of e)null!=r&&(s<r||void 0===s&&r>=r)&&(s=r);else{let r=-1;for(let a of e)null!=(a=t(a,++r,e))&&(s<a||void 0===s&&a>=a)&&(s=a)}return s}function Ky(e,t){let s;if(void 0===t)for(const r of e)null!=r&&(s>r||void 0===s&&r>=r)&&(s=r);else{let r=-1;for(let a of e)null!=(a=t(a,++r,e))&&(s>a||void 0===s&&a>=a)&&(s=a)}return s}function Wy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ug;if(e===Ug)return Hy;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,s)=>{const r=e(t,s);return r||0===r?r:(0===e(s,s))-(0===e(t,t))}}function Hy(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function qy(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,a=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),s=Math.floor(Math.max(0,s)),r=Math.floor(Math.min(e.length-1,r)),!(s<=t&&t<=r))return e;for(a=void 0===a?Hy:Wy(a);r>s;){if(r-s>600){const n=r-s+1,i=t-s+1,o=Math.log(n),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(n-l)/n)*(i-n/2<0?-1:1);qy(e,t,Math.max(s,Math.floor(t-i*l/n+c)),Math.min(r,Math.floor(t+(n-i)*l/n+c)),a)}const n=e[t];let i=s,o=r;for(Gy(e,s,t),a(e[r],n)>0&&Gy(e,s,r);i<o;){for(Gy(e,i,o),++i,--o;a(e[i],n)<0;)++i;for(;a(e[o],n)>0;)--o}0===a(e[s],n)?Gy(e,s,o):(++o,Gy(e,o,r)),o<=t&&(s=o+1),t<=o&&(r=o-1)}return e}function Gy(e,t,s){const r=e[t];e[t]=e[s],e[s]=r}function Yy(e,t,s){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let s of e)null!=s&&(s=+s)>=s&&(yield s);else{let s=-1;for(let r of e)null!=(r=t(r,++s,e))&&(r=+r)>=r&&(yield r)}}(e,s)),(r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return Ky(e);if(t>=1)return Vy(e);var r,a=(r-1)*t,n=Math.floor(a),i=Vy(qy(e,n).subarray(0,n+1));return i+(Ky(e.subarray(n+1))-i)*(a-n)}}function $y(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hg;if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+s(e[0],0,e);if(t>=1)return+s(e[r-1],r-1,e);var r,a=(r-1)*t,n=Math.floor(a),i=+s(e[n],n,e);return i+(+s(e[n+1],n+1,e)-i)*(a-n)}}function Jy(){var e,t=[],s=[],r=[];function a(){var e=0,a=Math.max(1,s.length);for(r=new Array(a-1);++e<a;)r[e-1]=$y(t,e/a);return n}function n(t){return null==t||isNaN(t=+t)?e:s[Yg(r,t)]}return n.invertExtent=function(e){var a=s.indexOf(e);return a<0?[NaN,NaN]:[a>0?r[a-1]:t[0],a<r.length?r[a]:t[t.length-1]]},n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let s of e)null==s||isNaN(s=+s)||t.push(s);return t.sort(Ug),a()},n.range=function(e){return arguments.length?(s=Array.from(e),a()):s.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.quantiles=function(){return r.slice()},n.copy=function(){return Jy().domain(t).range(s).unknown(e)},Ng.apply(n,arguments)}function Qy(){var e,t=0,s=1,r=1,a=[.5],n=[0,1];function i(t){return null!=t&&t<=t?n[Yg(a,t,0,r)]:e}function o(){var e=-1;for(a=new Array(r);++e<r;)a[e]=((e+1)*s-(e-r)*t)/(r+1);return i}return i.domain=function(e){return arguments.length?([t,s]=e,t=+t,s=+s,o()):[t,s]},i.range=function(e){return arguments.length?(r=(n=Array.from(e)).length-1,o()):n.slice()},i.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:i<1?[t,a[0]]:i>=r?[a[r-1],s]:[a[i-1],a[i]]},i.unknown=function(t){return arguments.length?(e=t,i):i},i.thresholds=function(){return a.slice()},i.copy=function(){return Qy().domain([t,s]).range(n).unknown(e)},Ng.apply(yy(i),arguments)}function Xy(){var e,t=[.5],s=[0,1],r=1;function a(a){return null!=a&&a<=a?s[Yg(t,a,0,r)]:e}return a.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,s.length-1),a):t.slice()},a.range=function(e){return arguments.length?(s=Array.from(e),r=Math.min(t.length,s.length-1),a):s.slice()},a.invertExtent=function(e){var r=s.indexOf(e);return[t[r-1],t[r]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return Xy().domain(t).range(s).unknown(e)},Ng.apply(a,arguments)}uy=gy({thousands:",",grouping:[3],currency:["$",""]}),hy=uy.format,my=uy.formatPrefix;const Zy=1e3,eb=6e4,tb=36e5,sb=864e5,rb=6048e5,ab=2592e6,nb=31536e6,ib=new Date,ob=new Date;function lb(e,t,s,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=t=>(e(t=new Date(+t)),t),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=e=>{const t=a(e),s=a.ceil(e);return e-t<s-e?t:s},a.offset=(e,s)=>(t(e=new Date(+e),null==s?1:Math.floor(s)),e),a.range=(s,r,n)=>{const i=[];if(s=a.ceil(s),n=null==n?1:Math.floor(n),!(s<r)||!(n>0))return i;let o;do{i.push(o=new Date(+s)),t(s,n),e(s)}while(o<s&&s<r);return i},a.filter=s=>lb(t=>{if(t>=t)for(;e(t),!s(t);)t.setTime(t-1)},(e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!s(e););else for(;--r>=0;)for(;t(e,1),!s(e););}),s&&(a.count=(t,r)=>(ib.setTime(+t),ob.setTime(+r),e(ib),e(ob),Math.floor(s(ib,ob))),a.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?t=>r(t)%e===0:t=>a.count(0,t)%e===0):a:null)),a}const cb=lb(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);cb.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?lb(t=>{t.setTime(Math.floor(t/e)*e)},(t,s)=>{t.setTime(+t+s*e)},(t,s)=>(s-t)/e):cb:null);cb.range;const db=lb(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Zy)},(e,t)=>(t-e)/Zy,e=>e.getUTCSeconds()),ub=(db.range,lb(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zy)},(e,t)=>{e.setTime(+e+t*eb)},(e,t)=>(t-e)/eb,e=>e.getMinutes())),hb=(ub.range,lb(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*eb)},(e,t)=>(t-e)/eb,e=>e.getUTCMinutes())),mb=(hb.range,lb(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zy-e.getMinutes()*eb)},(e,t)=>{e.setTime(+e+t*tb)},(e,t)=>(t-e)/tb,e=>e.getHours())),pb=(mb.range,lb(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*tb)},(e,t)=>(t-e)/tb,e=>e.getUTCHours())),xb=(pb.range,lb(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*eb)/sb,e=>e.getDate()-1)),gb=(xb.range,lb(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/sb,e=>e.getUTCDate()-1)),fb=(gb.range,lb(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/sb,e=>Math.floor(e/sb)));fb.range;function yb(e){return lb(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*eb)/rb)}const bb=yb(0),vb=yb(1),jb=yb(2),Nb=yb(3),wb=yb(4),kb=yb(5),Ab=yb(6);bb.range,vb.range,jb.range,Nb.range,wb.range,kb.range,Ab.range;function Sb(e){return lb(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/rb)}const Cb=Sb(0),_b=Sb(1),Tb=Sb(2),Pb=Sb(3),Eb=Sb(4),Db=Sb(5),Mb=Sb(6),Ob=(Cb.range,_b.range,Tb.range,Pb.range,Eb.range,Db.range,Mb.range,lb(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth())),Rb=(Ob.range,lb(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth())),Ib=(Rb.range,lb(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));Ib.every=e=>isFinite(e=Math.floor(e))&&e>0?lb(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,s)=>{t.setFullYear(t.getFullYear()+s*e)}):null;Ib.range;const Lb=lb(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Lb.every=e=>isFinite(e=Math.floor(e))&&e>0?lb(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCFullYear(t.getUTCFullYear()+s*e)}):null;Lb.range;function Fb(e,t,s,r,a,n){const i=[[db,1,Zy],[db,5,5e3],[db,15,15e3],[db,30,3e4],[n,1,eb],[n,5,3e5],[n,15,9e5],[n,30,18e5],[a,1,tb],[a,3,108e5],[a,6,216e5],[a,12,432e5],[r,1,sb],[r,2,1728e5],[s,1,rb],[t,1,ab],[t,3,7776e6],[e,1,nb]];function o(t,s,r){const a=Math.abs(s-t)/r,n=Kg(e=>{let[,,t]=e;return t}).right(i,a);if(n===i.length)return e.every(zg(t/nb,s/nb,r));if(0===n)return cb.every(Math.max(zg(t,s,r),1));const[o,l]=i[a/i[n-1][2]<i[n][2]/a?n-1:n];return o.every(l)}return[function(e,t,s){const r=t<e;r&&([e,t]=[t,e]);const a=s&&"function"===typeof s.range?s:o(e,t,s),n=a?a.range(e,+t+1):[];return r?n.reverse():n},o]}const[Bb,zb]=Fb(Lb,Rb,Cb,fb,pb,hb),[Ub,Vb]=Fb(Ib,Ob,bb,xb,mb,ub);function Kb(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Wb(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Hb(e,t,s){return{y:e,m:t,d:s,H:0,M:0,S:0,L:0}}var qb,Gb,Yb,$b={"-":"",_:" ",0:"0"},Jb=/^\s*\d+/,Qb=/^%/,Xb=/[\\^$*+?|[\]().{}]/g;function Zb(e,t,s){var r=e<0?"-":"",a=(r?-e:e)+"",n=a.length;return r+(n<s?new Array(s-n+1).join(t)+a:a)}function ev(e){return e.replace(Xb,"\\$&")}function tv(e){return new RegExp("^(?:"+e.map(ev).join("|")+")","i")}function sv(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function rv(e,t,s){var r=Jb.exec(t.slice(s,s+1));return r?(e.w=+r[0],s+r[0].length):-1}function av(e,t,s){var r=Jb.exec(t.slice(s,s+1));return r?(e.u=+r[0],s+r[0].length):-1}function nv(e,t,s){var r=Jb.exec(t.slice(s,s+2));return r?(e.U=+r[0],s+r[0].length):-1}function iv(e,t,s){var r=Jb.exec(t.slice(s,s+2));return r?(e.V=+r[0],s+r[0].length):-1}function ov(e,t,s){var r=Jb.exec(t.slice(s,s+2));return r?(e.W=+r[0],s+r[0].length):-1}function lv(e,t,s){var r=Jb.exec(t.slice(s,s+4));return r?(e.y=+r[0],s+r[0].length):-1}function cv(e,t,s){var r=Jb.exec(t.slice(s,s+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),s+r[0].length):-1}function dv(e,t,s){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(s,s+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),s+r[0].length):-1}function uv(e,t,s){var r=Jb.exec(t.slice(s,s+1));return r?(e.q=3*r[0]-3,s+r[0].length):-1}function hv(e,t,s){var r=Jb.exec(t.slice(s,s+2));return r?(e.m=r[0]-1,s+r[0].length):-1}function mv(e,t,s){var r=Jb.exec(t.slice(s,s+2));return r?(e.d=+r[0],s+r[0].length):-1}function pv(e,t,s){var r=Jb.exec(t.slice(s,s+3));return r?(e.m=0,e.d=+r[0],s+r[0].length):-1}function xv(e,t,s){var r=Jb.exec(t.slice(s,s+2));return r?(e.H=+r[0],s+r[0].length):-1}function gv(e,t,s){var r=Jb.exec(t.slice(s,s+2));return r?(e.M=+r[0],s+r[0].length):-1}function fv(e,t,s){var r=Jb.exec(t.slice(s,s+2));return r?(e.S=+r[0],s+r[0].length):-1}function yv(e,t,s){var r=Jb.exec(t.slice(s,s+3));return r?(e.L=+r[0],s+r[0].length):-1}function bv(e,t,s){var r=Jb.exec(t.slice(s,s+6));return r?(e.L=Math.floor(r[0]/1e3),s+r[0].length):-1}function vv(e,t,s){var r=Qb.exec(t.slice(s,s+1));return r?s+r[0].length:-1}function jv(e,t,s){var r=Jb.exec(t.slice(s));return r?(e.Q=+r[0],s+r[0].length):-1}function Nv(e,t,s){var r=Jb.exec(t.slice(s));return r?(e.s=+r[0],s+r[0].length):-1}function wv(e,t){return Zb(e.getDate(),t,2)}function kv(e,t){return Zb(e.getHours(),t,2)}function Av(e,t){return Zb(e.getHours()%12||12,t,2)}function Sv(e,t){return Zb(1+xb.count(Ib(e),e),t,3)}function Cv(e,t){return Zb(e.getMilliseconds(),t,3)}function _v(e,t){return Cv(e,t)+"000"}function Tv(e,t){return Zb(e.getMonth()+1,t,2)}function Pv(e,t){return Zb(e.getMinutes(),t,2)}function Ev(e,t){return Zb(e.getSeconds(),t,2)}function Dv(e){var t=e.getDay();return 0===t?7:t}function Mv(e,t){return Zb(bb.count(Ib(e)-1,e),t,2)}function Ov(e){var t=e.getDay();return t>=4||0===t?wb(e):wb.ceil(e)}function Rv(e,t){return e=Ov(e),Zb(wb.count(Ib(e),e)+(4===Ib(e).getDay()),t,2)}function Iv(e){return e.getDay()}function Lv(e,t){return Zb(vb.count(Ib(e)-1,e),t,2)}function Fv(e,t){return Zb(e.getFullYear()%100,t,2)}function Bv(e,t){return Zb((e=Ov(e)).getFullYear()%100,t,2)}function zv(e,t){return Zb(e.getFullYear()%1e4,t,4)}function Uv(e,t){var s=e.getDay();return Zb((e=s>=4||0===s?wb(e):wb.ceil(e)).getFullYear()%1e4,t,4)}function Vv(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Zb(t/60|0,"0",2)+Zb(t%60,"0",2)}function Kv(e,t){return Zb(e.getUTCDate(),t,2)}function Wv(e,t){return Zb(e.getUTCHours(),t,2)}function Hv(e,t){return Zb(e.getUTCHours()%12||12,t,2)}function qv(e,t){return Zb(1+gb.count(Lb(e),e),t,3)}function Gv(e,t){return Zb(e.getUTCMilliseconds(),t,3)}function Yv(e,t){return Gv(e,t)+"000"}function $v(e,t){return Zb(e.getUTCMonth()+1,t,2)}function Jv(e,t){return Zb(e.getUTCMinutes(),t,2)}function Qv(e,t){return Zb(e.getUTCSeconds(),t,2)}function Xv(e){var t=e.getUTCDay();return 0===t?7:t}function Zv(e,t){return Zb(Cb.count(Lb(e)-1,e),t,2)}function ej(e){var t=e.getUTCDay();return t>=4||0===t?Eb(e):Eb.ceil(e)}function tj(e,t){return e=ej(e),Zb(Eb.count(Lb(e),e)+(4===Lb(e).getUTCDay()),t,2)}function sj(e){return e.getUTCDay()}function rj(e,t){return Zb(_b.count(Lb(e)-1,e),t,2)}function aj(e,t){return Zb(e.getUTCFullYear()%100,t,2)}function nj(e,t){return Zb((e=ej(e)).getUTCFullYear()%100,t,2)}function ij(e,t){return Zb(e.getUTCFullYear()%1e4,t,4)}function oj(e,t){var s=e.getUTCDay();return Zb((e=s>=4||0===s?Eb(e):Eb.ceil(e)).getUTCFullYear()%1e4,t,4)}function lj(){return"+0000"}function cj(){return"%"}function dj(e){return+e}function uj(e){return Math.floor(+e/1e3)}function hj(e){return new Date(e)}function mj(e){return e instanceof Date?+e:+new Date(+e)}function pj(e,t,s,r,a,n,i,o,l,c){var d=ty(),u=d.invert,h=d.domain,m=c(".%L"),p=c(":%S"),x=c("%I:%M"),g=c("%I %p"),f=c("%a %d"),y=c("%b %d"),b=c("%B"),v=c("%Y");function j(e){return(l(e)<e?m:o(e)<e?p:i(e)<e?x:n(e)<e?g:r(e)<e?a(e)<e?f:y:s(e)<e?b:v)(e)}return d.invert=function(e){return new Date(u(e))},d.domain=function(e){return arguments.length?h(Array.from(e,mj)):h().map(hj)},d.ticks=function(t){var s=h();return e(s[0],s[s.length-1],null==t?10:t)},d.tickFormat=function(e,t){return null==t?j:c(t)},d.nice=function(e){var s=h();return e&&"function"===typeof e.range||(e=t(s[0],s[s.length-1],null==e?10:e)),e?h(jy(s,e)):d},d.copy=function(){return Zf(d,pj(e,t,s,r,a,n,i,o,l,c))},d}function xj(){return Ng.apply(pj(Ub,Vb,Ib,Ob,bb,xb,mb,ub,db,Gb).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function gj(){return Ng.apply(pj(Bb,zb,Lb,Rb,Cb,gb,pb,hb,db,Yb).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function fj(){var e,t,s,r,a,n=0,i=1,o=$f,l=!1;function c(t){return null==t||isNaN(t=+t)?a:o(0===s?.5:(t=(r(t)-e)*s,l?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var s,r;return arguments.length?([s,r]=t,o=e(s,r),c):[o(0),o(1)]}}return c.domain=function(a){return arguments.length?([n,i]=a,e=r(n=+n),t=r(i=+i),s=e===t?0:1/(t-e),c):[n,i]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=d(Hf),c.rangeRound=d(qf),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return r=a,e=a(n),t=a(i),s=e===t?0:1/(t-e),c}}function yj(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function bj(){var e=yy(fj()($f));return e.copy=function(){return yj(e,bj())},wg.apply(e,arguments)}function vj(){var e=_y(fj()).domain([1,10]);return e.copy=function(){return yj(e,vj()).base(e.base())},wg.apply(e,arguments)}function jj(){var e=Dy(fj());return e.copy=function(){return yj(e,jj()).constant(e.constant())},wg.apply(e,arguments)}function Nj(){var e=Ly(fj());return e.copy=function(){return yj(e,Nj()).exponent(e.exponent())},wg.apply(e,arguments)}function wj(){return Nj.apply(null,arguments).exponent(.5)}function kj(){var e=[],t=$f;function s(s){if(null!=s&&!isNaN(s=+s))return t((Yg(e,s,1)-1)/(e.length-1))}return s.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let s of t)null==s||isNaN(s=+s)||e.push(s);return e.sort(Ug),s},s.interpolator=function(e){return arguments.length?(t=e,s):t},s.range=function(){return e.map((s,r)=>t(r/(e.length-1)))},s.quantiles=function(t){return Array.from({length:t+1},(s,r)=>Yy(e,r/t))},s.copy=function(){return kj(t).domain(e)},wg.apply(s,arguments)}function Aj(){var e,t,s,r,a,n,i,o=0,l=.5,c=1,d=1,u=$f,h=!1;function m(e){return isNaN(e=+e)?i:(e=.5+((e=+n(e))-t)*(d*e<d*t?r:a),u(h?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var s,r,a;return arguments.length?([s,r,a]=t,u=function(e,t){void 0===t&&(t=e,e=Hf);for(var s=0,r=t.length-1,a=t[0],n=new Array(r<0?0:r);s<r;)n[s]=e(a,a=t[++s]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return n[t](e-t)}}(e,[s,r,a]),m):[u(0),u(.5),u(1)]}}return m.domain=function(i){return arguments.length?([o,l,c]=i,e=n(o=+o),t=n(l=+l),s=n(c=+c),r=e===t?0:.5/(t-e),a=t===s?0:.5/(s-t),d=t<e?-1:1,m):[o,l,c]},m.clamp=function(e){return arguments.length?(h=!!e,m):h},m.interpolator=function(e){return arguments.length?(u=e,m):u},m.range=p(Hf),m.rangeRound=p(qf),m.unknown=function(e){return arguments.length?(i=e,m):i},function(i){return n=i,e=i(o),t=i(l),s=i(c),r=e===t?0:.5/(t-e),a=t===s?0:.5/(s-t),d=t<e?-1:1,m}}function Sj(){var e=yy(Aj()($f));return e.copy=function(){return yj(e,Sj())},wg.apply(e,arguments)}function Cj(){var e=_y(Aj()).domain([.1,1,10]);return e.copy=function(){return yj(e,Cj()).base(e.base())},wg.apply(e,arguments)}function _j(){var e=Dy(Aj());return e.copy=function(){return yj(e,_j()).constant(e.constant())},wg.apply(e,arguments)}function Tj(){var e=Ly(Aj());return e.copy=function(){return yj(e,Tj()).exponent(e.exponent())},wg.apply(e,arguments)}function Pj(){return Tj.apply(null,arguments).exponent(.5)}function Ej(e,t){if((a=e.length)>1)for(var s,r,a,n=1,i=e[t[0]],o=i.length;n<a;++n)for(r=i,i=e[t[n]],s=0;s<o;++s)i[s][1]+=i[s][0]=isNaN(r[s][1])?r[s][0]:r[s][1]}!function(e){qb=function(e){var t=e.dateTime,s=e.date,r=e.time,a=e.periods,n=e.days,i=e.shortDays,o=e.months,l=e.shortMonths,c=tv(a),d=sv(a),u=tv(n),h=sv(n),m=tv(i),p=sv(i),x=tv(o),g=sv(o),f=tv(l),y=sv(l),b={a:function(e){return i[e.getDay()]},A:function(e){return n[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:wv,e:wv,f:_v,g:Bv,G:Uv,H:kv,I:Av,j:Sv,L:Cv,m:Tv,M:Pv,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:dj,s:uj,S:Ev,u:Dv,U:Mv,V:Rv,w:Iv,W:Lv,x:null,X:null,y:Fv,Y:zv,Z:Vv,"%":cj},v={a:function(e){return i[e.getUTCDay()]},A:function(e){return n[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:Kv,e:Kv,f:Yv,g:nj,G:oj,H:Wv,I:Hv,j:qv,L:Gv,m:$v,M:Jv,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:dj,s:uj,S:Qv,u:Xv,U:Zv,V:tj,w:sj,W:rj,x:null,X:null,y:aj,Y:ij,Z:lj,"%":cj},j={a:function(e,t,s){var r=m.exec(t.slice(s));return r?(e.w=p.get(r[0].toLowerCase()),s+r[0].length):-1},A:function(e,t,s){var r=u.exec(t.slice(s));return r?(e.w=h.get(r[0].toLowerCase()),s+r[0].length):-1},b:function(e,t,s){var r=f.exec(t.slice(s));return r?(e.m=y.get(r[0].toLowerCase()),s+r[0].length):-1},B:function(e,t,s){var r=x.exec(t.slice(s));return r?(e.m=g.get(r[0].toLowerCase()),s+r[0].length):-1},c:function(e,s,r){return k(e,t,s,r)},d:mv,e:mv,f:bv,g:cv,G:lv,H:xv,I:xv,j:pv,L:yv,m:hv,M:gv,p:function(e,t,s){var r=c.exec(t.slice(s));return r?(e.p=d.get(r[0].toLowerCase()),s+r[0].length):-1},q:uv,Q:jv,s:Nv,S:fv,u:av,U:nv,V:iv,w:rv,W:ov,x:function(e,t,r){return k(e,s,t,r)},X:function(e,t,s){return k(e,r,t,s)},y:cv,Y:lv,Z:dv,"%":vv};function N(e,t){return function(s){var r,a,n,i=[],o=-1,l=0,c=e.length;for(s instanceof Date||(s=new Date(+s));++o<c;)37===e.charCodeAt(o)&&(i.push(e.slice(l,o)),null!=(a=$b[r=e.charAt(++o)])?r=e.charAt(++o):a="e"===r?" ":"0",(n=t[r])&&(r=n(s,a)),i.push(r),l=o+1);return i.push(e.slice(l,o)),i.join("")}}function w(e,t){return function(s){var r,a,n=Hb(1900,void 0,1);if(k(n,e,s+="",0)!=s.length)return null;if("Q"in n)return new Date(n.Q);if("s"in n)return new Date(1e3*n.s+("L"in n?n.L:0));if(t&&!("Z"in n)&&(n.Z=0),"p"in n&&(n.H=n.H%12+12*n.p),void 0===n.m&&(n.m="q"in n?n.q:0),"V"in n){if(n.V<1||n.V>53)return null;"w"in n||(n.w=1),"Z"in n?(a=(r=Wb(Hb(n.y,0,1))).getUTCDay(),r=a>4||0===a?_b.ceil(r):_b(r),r=gb.offset(r,7*(n.V-1)),n.y=r.getUTCFullYear(),n.m=r.getUTCMonth(),n.d=r.getUTCDate()+(n.w+6)%7):(a=(r=Kb(Hb(n.y,0,1))).getDay(),r=a>4||0===a?vb.ceil(r):vb(r),r=xb.offset(r,7*(n.V-1)),n.y=r.getFullYear(),n.m=r.getMonth(),n.d=r.getDate()+(n.w+6)%7)}else("W"in n||"U"in n)&&("w"in n||(n.w="u"in n?n.u%7:"W"in n?1:0),a="Z"in n?Wb(Hb(n.y,0,1)).getUTCDay():Kb(Hb(n.y,0,1)).getDay(),n.m=0,n.d="W"in n?(n.w+6)%7+7*n.W-(a+5)%7:n.w+7*n.U-(a+6)%7);return"Z"in n?(n.H+=n.Z/100|0,n.M+=n.Z%100,Wb(n)):Kb(n)}}function k(e,t,s,r){for(var a,n,i=0,o=t.length,l=s.length;i<o;){if(r>=l)return-1;if(37===(a=t.charCodeAt(i++))){if(a=t.charAt(i++),!(n=j[a in $b?t.charAt(i++):a])||(r=n(e,s,r))<0)return-1}else if(a!=s.charCodeAt(r++))return-1}return r}return b.x=N(s,b),b.X=N(r,b),b.c=N(t,b),v.x=N(s,v),v.X=N(r,v),v.c=N(t,v),{format:function(e){var t=N(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=w(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=N(e+="",v);return t.toString=function(){return e},t},utcParse:function(e){var t=w(e+="",!0);return t.toString=function(){return e},t}}}(e),Gb=qb.format,qb.parse,Yb=qb.utcFormat,qb.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Array.prototype.slice;function Dj(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Mj(e){return function(){return e}}function Oj(e){for(var t=e.length,s=new Array(t);--t>=0;)s[t]=t;return s}function Rj(e,t){return e[t]}function Ij(e){const t=[];return t.key=e,t}var Lj=s(8210),Fj=s.n(Lj);function Bj(e){return function(e){if(Array.isArray(e))return zj(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return zj(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return zj(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zj(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}var Uj=function(e){return e},Vj={"@@functional/placeholder":!0},Kj=function(e){return e===Vj},Wj=function(e){return function t(){return 0===arguments.length||1===arguments.length&&Kj(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},Hj=function e(t,s){return 1===t?s:Wj(function(){for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];var i=a.filter(function(e){return e!==Vj}).length;return i>=t?s.apply(void 0,a):e(t-i,Wj(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=a.map(function(e){return Kj(e)?t.shift():e});return s.apply(void 0,Bj(n).concat(t))}))})},qj=function(e){return Hj(e.length,e)},Gj=function(e,t){for(var s=[],r=e;r<t;++r)s[r-e]=r;return s},Yj=qj(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(e){return t[e]}).map(e)}),$j=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];if(!t.length)return Uj;var r=t.reverse(),a=r[0],n=r.slice(1);return function(){return n.reduce(function(e,t){return t(e)},a.apply(void 0,arguments))}},Jj=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Qj=function(e){var t=null,s=null;return function(){for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return t&&a.every(function(e,s){return e===t[s]})?s:(t=a,s=e.apply(void 0,a))}};var Xj=qj(function(e,t,s){var r=+e;return r+s*(+t-r)}),Zj=qj(function(e,t,s){var r=t-+e;return(s-e)/(r=r||1/0)}),eN=qj(function(e,t,s){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(s-e)/r))});const tN={rangeStep:function(e,t,s){for(var r=new(Fj())(e),a=0,n=[];r.lt(t)&&a<1e5;)n.push(r.toNumber()),r=r.add(s),a++;return n},getDigitCount:function(e){return 0===e?1:Math.floor(new(Fj())(e).abs().log(10).toNumber())+1},interpolateNumber:Xj,uninterpolateNumber:Zj,uninterpolateTruncation:eN};function sN(e){return function(e){if(Array.isArray(e))return nN(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||aN(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var s=[],r=!0,a=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(s.push(i.value),!t||s.length!==t);r=!0);}catch(l){a=!0,n=l}finally{try{r||null==o.return||o.return()}finally{if(a)throw n}}return s}(e,t)||aN(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aN(e,t){if(e){if("string"===typeof e)return nN(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?nN(e,t):void 0}}function nN(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}function iN(e){var t=rN(e,2),s=t[0],r=t[1],a=s,n=r;return s>r&&(a=r,n=s),[a,n]}function oN(e,t,s){if(e.lte(0))return new(Fj())(0);var r=tN.getDigitCount(e.toNumber()),a=new(Fj())(10).pow(r),n=e.div(a),i=1!==r?.05:.1,o=new(Fj())(Math.ceil(n.div(i).toNumber())).add(s).mul(i).mul(a);return t?o:new(Fj())(Math.ceil(o))}function lN(e,t,s){var r=1,a=new(Fj())(e);if(!a.isint()&&s){var n=Math.abs(e);n<1?(r=new(Fj())(10).pow(tN.getDigitCount(e)-1),a=new(Fj())(Math.floor(a.div(r).toNumber())).mul(r)):n>1&&(a=new(Fj())(Math.floor(e)))}else 0===e?a=new(Fj())(Math.floor((t-1)/2)):s||(a=new(Fj())(Math.floor(e)));var i=Math.floor((t-1)/2);return $j(Yj(function(e){return a.add(new(Fj())(e-i).mul(r)).toNumber()}),Gj)(0,t)}function cN(e,t,s,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(s-1)))return{step:new(Fj())(0),tickMin:new(Fj())(0),tickMax:new(Fj())(0)};var n,i=oN(new(Fj())(t).sub(e).div(s-1),r,a);n=e<=0&&t>=0?new(Fj())(0):(n=new(Fj())(e).add(t).div(2)).sub(new(Fj())(n).mod(i));var o=Math.ceil(n.sub(e).div(i).toNumber()),l=Math.ceil(new(Fj())(t).sub(n).div(i).toNumber()),c=o+l+1;return c>s?cN(e,t,s,r,a+1):(c<s&&(l=t>0?l+(s-c):l,o=t>0?o:o+(s-c)),{step:i,tickMin:n.sub(new(Fj())(o).mul(i)),tickMax:n.add(new(Fj())(l).mul(i))})}var dN=Qj(function(e){var t=rN(e,2),s=t[0],r=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Math.max(a,2),o=rN(iN([s,r]),2),l=o[0],c=o[1];if(l===-1/0||c===1/0){var d=c===1/0?[l].concat(sN(Gj(0,a-1).map(function(){return 1/0}))):[].concat(sN(Gj(0,a-1).map(function(){return-1/0})),[c]);return s>r?Jj(d):d}if(l===c)return lN(l,a,n);var u=cN(l,c,i,n),h=u.step,m=u.tickMin,p=u.tickMax,x=tN.rangeStep(m,p.add(new(Fj())(.1).mul(h)),h);return s>r?Jj(x):x}),uN=(Qj(function(e){var t=rN(e,2),s=t[0],r=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Math.max(a,2),o=rN(iN([s,r]),2),l=o[0],c=o[1];if(l===-1/0||c===1/0)return[s,r];if(l===c)return lN(l,a,n);var d=oN(new(Fj())(c).sub(l).div(i-1),n,0),u=$j(Yj(function(e){return new(Fj())(l).add(new(Fj())(e).mul(d)).toNumber()}),Gj)(0,i).filter(function(e){return e>=l&&e<=c});return s>r?Jj(u):u}),Qj(function(e,t){var s=rN(e,2),r=s[0],a=s[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=rN(iN([r,a]),2),o=i[0],l=i[1];if(o===-1/0||l===1/0)return[r,a];if(o===l)return[o];var c=Math.max(t,2),d=oN(new(Fj())(l).sub(o).div(c-1),n,0),u=[].concat(sN(tN.rangeStep(new(Fj())(o),new(Fj())(l).sub(new(Fj())(.99).mul(d)),d)),[l]);return r>a?Jj(u):u})),hN=s(6686),mN=s.n(hN),pN=s(9062);function xN(e,t){for(var s in e)if({}.hasOwnProperty.call(e,s)&&(!{}.hasOwnProperty.call(t,s)||e[s]!==t[s]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function gN(e){return gN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gN(e)}var fN=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],yN=["points","pathLength"],bN={svg:["viewBox","children"],polygon:yN,polyline:yN},vN=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],jN=function(e,t){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var s=e;if((0,r.isValidElement)(e)&&(s=e.props),!mN()(s))return null;var a={};return Object.keys(s).forEach(function(e){vN.includes(e)&&(a[e]=t||function(t){return s[e](s,t)})}),a},NN=function(e,t,s){if(!mN()(e)||"object"!==gN(e))return null;var r=null;return Object.keys(e).forEach(function(a){var n=e[a];vN.includes(a)&&"function"===typeof n&&(r||(r={}),r[a]=function(e,t,s){return function(r){return e(t,s,r),null}}(n,t,s))}),r},wN=["children"],kN=["children"];function AN(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function SN(e){return SN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SN(e)}var CN={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},_N=function(e){return"string"===typeof e?e:e?e.displayName||e.name||"Component":""},TN=null,PN=null,EN=function e(t){if(t===TN&&px()(PN))return PN;var s=[];return r.Children.forEach(t,function(t){Gx()(t)||((0,pN.isFragment)(t)?s=s.concat(e(t.props.children)):s.push(t))}),PN=s,TN=t,s};function DN(e,t){var s=[],r=[];return r=px()(t)?t.map(function(e){return _N(e)}):[_N(t)],EN(e).forEach(function(e){var t=hx()(e,"type.displayName")||hx()(e,"type.name");-1!==r.indexOf(t)&&s.push(e)}),s}function MN(e,t){var s=DN(e,t);return s&&s[0]}var ON=function(e){if(!e||!e.props)return!1;var t=e.props,s=t.width,r=t.height;return!(!wx(s)||s<=0||!wx(r)||r<=0)},RN=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],IN=function(e){return e&&e.type&&vx()(e.type)&&RN.indexOf(e.type)>=0},LN=function(e,t,s){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var a=e;if((0,r.isValidElement)(e)&&(a=e.props),!mN()(a))return null;var n={};return Object.keys(a).forEach(function(e){var r;(function(e,t,s,r){var a,n=null!==(a=null===bN||void 0===bN?void 0:bN[r])&&void 0!==a?a:[];return!Ux()(e)&&(r&&n.includes(t)||fN.includes(t))||s&&vN.includes(t)})(null===(r=a)||void 0===r?void 0:r[e],e,t,s)&&(n[e]=a[e])}),n},FN=function e(t,s){if(t===s)return!0;var a=r.Children.count(t);if(a!==r.Children.count(s))return!1;if(0===a)return!0;if(1===a)return BN(px()(t)?t[0]:t,px()(s)?s[0]:s);for(var n=0;n<a;n++){var i=t[n],o=s[n];if(px()(i)||px()(o)){if(!e(i,o))return!1}else if(!BN(i,o))return!1}return!0},BN=function(e,t){if(Gx()(e)&&Gx()(t))return!0;if(!Gx()(e)&&!Gx()(t)){var s=e.props||{},r=s.children,a=AN(s,wN),n=t.props||{},i=n.children,o=AN(n,kN);return r&&i?xN(a,o)&&FN(r,i):!r&&!i&&xN(a,o)}return!1},zN=function(e,t){var s=[],r={};return EN(e).forEach(function(e,a){if(IN(e))s.push(e);else if(e){var n=_N(e.type),i=t[n]||{},o=i.handler,l=i.once;if(o&&(!l||!r[n])){var c=o(e,n,a);s.push(c),r[n]=!0}}}),s},UN=["children","className"];function VN(){return VN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},VN.apply(this,arguments)}function KN(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var WN=r.forwardRef(function(e,t){var s=e.children,a=e.className,n=KN(e,UN),i=Qp()("recharts-layer",a);return r.createElement("g",VN({className:i},LN(n,!0),{ref:t}),s)}),HN=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function qN(){return qN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},qN.apply(this,arguments)}function GN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var r,a,n,i,o=[],l=!0,c=!1;try{if(n=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;l=!1}else for(;!(l=(r=n.call(s)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=s.return&&(i=s.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return YN(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return YN(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YN(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}function $N(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function JN(e){var t=e.offset,s=e.layout,a=e.width,n=e.dataKey,i=e.data,o=e.dataPointFormatter,l=e.xAxis,c=e.yAxis,d=$N(e,HN),u=LN(d),h=i.map(function(e,i){var d=o(e,n),h=d.x,m=d.y,p=d.value,x=d.errorVal;if(!x)return null;var g,f,y=[];if(Array.isArray(x)){var b=GN(x,2);g=b[0],f=b[1]}else g=f=x;if("vertical"===s){var v=l.scale,j=m+t,N=j+a,w=j-a,k=v(p-g),A=v(p+f);y.push({x1:A,y1:N,x2:A,y2:w}),y.push({x1:k,y1:j,x2:A,y2:j}),y.push({x1:k,y1:N,x2:k,y2:w})}else if("horizontal"===s){var S=c.scale,C=h+t,_=C-a,T=C+a,P=S(p-g),E=S(p+f);y.push({x1:_,y1:E,x2:T,y2:E}),y.push({x1:C,y1:P,x2:C,y2:E}),y.push({x1:_,y1:P,x2:T,y2:P})}return r.createElement(WN,qN({className:"recharts-errorBar",key:"bar-".concat(i)},u),y.map(function(e,t){return r.createElement("line",qN({},e,{key:"line-".concat(t)}))}))});return r.createElement(WN,{className:"recharts-errorBars"},h)}JN.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"},JN.displayName="ErrorBar";var QN=s(977),XN=s.n(QN),ZN=["children","width","height","viewBox","className","style"];function ew(){return ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},ew.apply(this,arguments)}function tw(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function sw(e){var t=e.children,s=e.width,a=e.height,n=e.viewBox,i=e.className,o=e.style,l=tw(e,ZN),c=n||{width:s,height:a,x:0,y:0},d=Qp()("recharts-surface",i);return r.createElement("svg",ew({},LN(l,!0,"svg"),{className:d,width:s,height:a,style:o,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),r.createElement("title",null,e.title),r.createElement("desc",null,e.desc),t)}Math.abs,Math.atan2;const rw=Math.cos,aw=(Math.max,Math.min,Math.sin),nw=Math.sqrt,iw=Math.PI,ow=2*iw;const lw={draw(e,t){const s=nw(t/iw);e.moveTo(s,0),e.arc(0,0,s,0,ow)}},cw={draw(e,t){const s=nw(t/5)/2;e.moveTo(-3*s,-s),e.lineTo(-s,-s),e.lineTo(-s,-3*s),e.lineTo(s,-3*s),e.lineTo(s,-s),e.lineTo(3*s,-s),e.lineTo(3*s,s),e.lineTo(s,s),e.lineTo(s,3*s),e.lineTo(-s,3*s),e.lineTo(-s,s),e.lineTo(-3*s,s),e.closePath()}},dw=nw(1/3),uw=2*dw,hw={draw(e,t){const s=nw(t/uw),r=s*dw;e.moveTo(0,-s),e.lineTo(r,0),e.lineTo(0,s),e.lineTo(-r,0),e.closePath()}},mw={draw(e,t){const s=nw(t),r=-s/2;e.rect(r,r,s,s)}},pw=aw(iw/10)/aw(7*iw/10),xw=aw(ow/10)*pw,gw=-rw(ow/10)*pw,fw={draw(e,t){const s=nw(.8908130915292852*t),r=xw*s,a=gw*s;e.moveTo(0,-s),e.lineTo(r,a);for(let n=1;n<5;++n){const t=ow*n/5,i=rw(t),o=aw(t);e.lineTo(o*s,-i*s),e.lineTo(i*r-o*a,o*r+i*a)}e.closePath()}},yw=nw(3),bw={draw(e,t){const s=-nw(t/(3*yw));e.moveTo(0,2*s),e.lineTo(-yw*s,-s),e.lineTo(yw*s,-s),e.closePath()}},vw=-.5,jw=nw(3)/2,Nw=1/nw(12),ww=3*(Nw/2+1),kw={draw(e,t){const s=nw(t/ww),r=s/2,a=s*Nw,n=r,i=s*Nw+s,o=-n,l=i;e.moveTo(r,a),e.lineTo(n,i),e.lineTo(o,l),e.lineTo(vw*r-jw*a,jw*r+vw*a),e.lineTo(vw*n-jw*i,jw*n+vw*i),e.lineTo(vw*o-jw*l,jw*o+vw*l),e.lineTo(vw*r+jw*a,vw*a-jw*r),e.lineTo(vw*n+jw*i,vw*i-jw*n),e.lineTo(vw*o+jw*l,vw*l-jw*o),e.closePath()}};var Aw,Sw,Cw,_w,Tw,Pw,Ew,Dw,Mw,Ow,Rw,Iw,Lw,Fw,Bw=s(7528);const zw=Math.PI,Uw=2*zw,Vw=1e-6,Kw=Uw-Vw;function Ww(e){this._+=e[0];for(let t=1,s=e.length;t<s;++t)this._+=arguments[t]+e[t]}class Hw{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?Ww:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return Ww;const s=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*s)/s+e[t]}}(e)}moveTo(e,t){this._append(Aw||(Aw=(0,Bw.A)(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(Sw||(Sw=(0,Bw.A)(["Z"]))))}lineTo(e,t){this._append(Cw||(Cw=(0,Bw.A)(["L",",",""])),this._x1=+e,this._y1=+t)}quadraticCurveTo(e,t,s,r){this._append(_w||(_w=(0,Bw.A)(["Q",",",",",",",""])),+e,+t,this._x1=+s,this._y1=+r)}bezierCurveTo(e,t,s,r,a,n){this._append(Tw||(Tw=(0,Bw.A)(["C",",",",",",",",",",",""])),+e,+t,+s,+r,this._x1=+a,this._y1=+n)}arcTo(e,t,s,r,a){if(e=+e,t=+t,s=+s,r=+r,(a=+a)<0)throw new Error("negative radius: ".concat(a));let n=this._x1,i=this._y1,o=s-e,l=r-t,c=n-e,d=i-t,u=c*c+d*d;if(null===this._x1)this._append(Pw||(Pw=(0,Bw.A)(["M",",",""])),this._x1=e,this._y1=t);else if(u>Vw)if(Math.abs(d*o-l*c)>Vw&&a){let h=s-n,m=r-i,p=o*o+l*l,x=h*h+m*m,g=Math.sqrt(p),f=Math.sqrt(u),y=a*Math.tan((zw-Math.acos((p+u-x)/(2*g*f)))/2),b=y/f,v=y/g;Math.abs(b-1)>Vw&&this._append(Dw||(Dw=(0,Bw.A)(["L",",",""])),e+b*c,t+b*d),this._append(Mw||(Mw=(0,Bw.A)(["A",",",",0,0,",",",",",""])),a,a,+(d*h>c*m),this._x1=e+v*o,this._y1=t+v*l)}else this._append(Ew||(Ew=(0,Bw.A)(["L",",",""])),this._x1=e,this._y1=t);else;}arc(e,t,s,r,a,n){if(e=+e,t=+t,n=!!n,(s=+s)<0)throw new Error("negative radius: ".concat(s));let i=s*Math.cos(r),o=s*Math.sin(r),l=e+i,c=t+o,d=1^n,u=n?r-a:a-r;null===this._x1?this._append(Ow||(Ow=(0,Bw.A)(["M",",",""])),l,c):(Math.abs(this._x1-l)>Vw||Math.abs(this._y1-c)>Vw)&&this._append(Rw||(Rw=(0,Bw.A)(["L",",",""])),l,c),s&&(u<0&&(u=u%Uw+Uw),u>Kw?this._append(Iw||(Iw=(0,Bw.A)(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),s,s,d,e-i,t-o,s,s,d,this._x1=l,this._y1=c):u>Vw&&this._append(Lw||(Lw=(0,Bw.A)(["A",",",",0,",",",",",",",""])),s,s,+(u>=zw),d,this._x1=e+s*Math.cos(a),this._y1=t+s*Math.sin(a)))}rect(e,t,s,r){this._append(Fw||(Fw=(0,Bw.A)(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,s=+s,+r,-s)}toString(){return this._}}function qw(e){let t=3;return e.digits=function(s){if(!arguments.length)return t;if(null==s)t=null;else{const e=Math.floor(s);if(!(e>=0))throw new RangeError("invalid digits: ".concat(s));t=e}return e},()=>new Hw(t)}nw(3),nw(3);function Gw(e){return Gw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gw(e)}var Yw=["type","size","sizeType"];function $w(){return $w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},$w.apply(this,arguments)}function Jw(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function Qw(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Jw(Object(s),!0).forEach(function(t){Xw(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Jw(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function Xw(e,t,s){return(t=function(e){var t=function(e,t){if("object"!==Gw(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==Gw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Gw(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Zw(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var ek={symbolCircle:lw,symbolCross:cw,symbolDiamond:hw,symbolSquare:mw,symbolStar:fw,symbolTriangle:bw,symbolWye:kw},tk=Math.PI/180,sk=function(e){var t=e.type,s=void 0===t?"circle":t,a=e.size,n=void 0===a?64:a,i=e.sizeType,o=void 0===i?"area":i,l=Qw(Qw({},Zw(e,Yw)),{},{type:s,size:n,sizeType:o}),c=l.className,d=l.cx,u=l.cy,h=LN(l,!0);return d===+d&&u===+u&&n===+n?r.createElement("path",$w({},h,{className:Qp()("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(u,")"),d:function(){var e=function(e){var t="symbol".concat(xg()(e));return ek[t]||lw}(s),t=function(e,t){let s=null,r=qw(a);function a(){let a;if(s||(s=a=r()),e.apply(this,arguments).draw(s,+t.apply(this,arguments)),a)return s=null,a+""||null}return e="function"===typeof e?e:Mj(e||lw),t="function"===typeof t?t:Mj(void 0===t?64:+t),a.type=function(t){return arguments.length?(e="function"===typeof t?t:Mj(t),a):e},a.size=function(e){return arguments.length?(t="function"===typeof e?e:Mj(+e),a):t},a.context=function(e){return arguments.length?(s=null==e?null:e,a):s},a}().type(e).size(function(e,t,s){if("area"===t)return e;switch(s){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*tk;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(n,o,s));return t()}()})):null};function rk(e){return rk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rk(e)}function ak(){return ak=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},ak.apply(this,arguments)}function nk(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function ik(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uk(r.key),r)}}function ok(e,t){return ok=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ok(e,t)}function lk(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(qU){return!1}}();return function(){var s,r=ck(e);if(t){var a=ck(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return function(e,t){if(t&&("object"===rk(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,s)}}function ck(e){return ck=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ck(e)}function dk(e,t,s){return(t=uk(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function uk(e){var t=function(e,t){if("object"!==rk(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==rk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===rk(t)?t:String(t)}sk.registerSymbol=function(e,t){ek["symbol".concat(xg()(e))]=t};var hk=32,mk=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ok(e,t)}(i,e);var t,s,a,n=lk(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return t=i,s=[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,s=16,a=hk/6,n=hk/3,i=e.inactive?t:e.color;if("plainline"===e.type)return r.createElement("line",{strokeWidth:4,fill:"none",stroke:i,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:s,x2:hk,y2:s,className:"recharts-legend-icon"});if("line"===e.type)return r.createElement("path",{strokeWidth:4,fill:"none",stroke:i,d:"M0,".concat(s,"h").concat(n,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(2*n,",").concat(s,"\n            H").concat(hk,"M").concat(2*n,",").concat(s,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(n,",").concat(s),className:"recharts-legend-icon"});if("rect"===e.type)return r.createElement("path",{stroke:"none",fill:i,d:"M0,".concat(4,"h").concat(hk,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(r.isValidElement(e.legendIcon)){var o=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?nk(Object(s),!0).forEach(function(t){dk(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):nk(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({},e);return delete o.legendIcon,r.cloneElement(e.legendIcon,o)}return r.createElement(sk,{fill:i,cx:s,cy:s,size:hk,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,s=t.payload,a=t.iconSize,n=t.layout,i=t.formatter,o=t.inactiveColor,l={x:0,y:0,width:hk,height:hk},c={display:"horizontal"===n?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(t,s){var n,u=t.formatter||i,h=Qp()((dk(n={"recharts-legend-item":!0},"legend-item-".concat(s),!0),dk(n,"inactive",t.inactive),n));if("none"===t.type)return null;var m=t.inactive?o:t.color;return r.createElement("li",ak({className:h,style:c,key:"legend-item-".concat(s)},NN(e.props,t,s)),r.createElement(sw,{width:a,height:a,viewBox:l,style:d},e.renderIcon(t)),r.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},u?u(t.value,t,s):t.value))})}},{key:"render",value:function(){var e=this.props,t=e.payload,s=e.layout,a=e.align;if(!t||!t.length)return null;var n={padding:0,margin:0,textAlign:"horizontal"===s?a:"left"};return r.createElement("ul",{className:"recharts-default-legend",style:n},this.renderItems())}}],s&&ik(t.prototype,s),a&&ik(t,a),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);function pk(e){return pk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pk(e)}dk(mk,"displayName","Legend"),dk(mk,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var xk=["ref"];function gk(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function fk(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?gk(Object(s),!0).forEach(function(t){wk(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):gk(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function yk(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kk(r.key),r)}}function bk(e,t){return bk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bk(e,t)}function vk(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(qU){return!1}}();return function(){var s,r=Nk(e);if(t){var a=Nk(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return function(e,t){if(t&&("object"===pk(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jk(e)}(this,s)}}function jk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nk(e){return Nk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nk(e)}function wk(e,t,s){return(t=kk(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function kk(e){var t=function(e,t){if("object"!==pk(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==pk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===pk(t)?t:String(t)}function Ak(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Sk(e){return e.value}function Ck(e,t){return!0===e?XN()(t,Sk):Ux()(e)?XN()(t,e):t}var _k=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bk(e,t)}(i,e);var t,s,a,n=vk(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return wk(jk(e=n.call.apply(n,[this].concat(s))),"state",{boxWidth:-1,boxHeight:-1}),e}return t=i,s=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){return this.wrapperNode&&this.wrapperNode.getBoundingClientRect?this.wrapperNode.getBoundingClientRect():null}},{key:"getBBoxSnapshot",value:function(){var e=this.state,t=e.boxWidth,s=e.boxHeight;return t>=0&&s>=0?{width:t,height:s}:null}},{key:"getDefaultPosition",value:function(e){var t,s,r=this.props,a=r.layout,n=r.align,i=r.verticalAlign,o=r.margin,l=r.chartWidth,c=r.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===n&&"vertical"===a?{left:((l||0)-(this.getBBoxSnapshot()||{width:0}).width)/2}:"right"===n?{right:o&&o.right||0}:{left:o&&o.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(s="middle"===i?{top:((c||0)-(this.getBBoxSnapshot()||{height:0}).height)/2}:"bottom"===i?{bottom:o&&o.bottom||0}:{top:o&&o.top||0}),fk(fk({},t),s)}},{key:"updateBBox",value:function(){var e=this.state,t=e.boxWidth,s=e.boxHeight,r=this.props.onBBoxUpdate;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-t)>1||Math.abs(a.height-s)>1)&&this.setState({boxWidth:a.width,boxHeight:a.height},function(){r&&r(a)})}else-1===t&&-1===s||this.setState({boxWidth:-1,boxHeight:-1},function(){r&&r(null)})}},{key:"render",value:function(){var e=this,t=this.props,s=t.content,a=t.width,n=t.height,i=t.wrapperStyle,o=t.payloadUniqBy,l=t.payload,c=fk(fk({position:"absolute",width:a||"auto",height:n||"auto"},this.getDefaultPosition(i)),i);return r.createElement("div",{className:"recharts-legend-wrapper",style:c,ref:function(t){e.wrapperNode=t}},function(e,t){if(r.isValidElement(e))return r.cloneElement(e,t);if(Ux()(e))return r.createElement(e,t);t.ref;var s=Ak(t,xk);return r.createElement(mk,s)}(s,fk(fk({},this.props),{},{payload:Ck(o,l)})))}}],a=[{key:"getWithHeight",value:function(e,t){var s=e.props.layout;return"vertical"===s&&wx(e.props.height)?{height:e.props.height}:"horizontal"===s?{width:e.props.width||t}:null}}],s&&yk(t.prototype,s),a&&yk(t,a),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);function Tk(e){return Tk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tk(e)}function Pk(e){return function(e){if(Array.isArray(e))return Ek(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ek(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Ek(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ek(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}function Dk(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function Mk(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Dk(Object(s),!0).forEach(function(t){Ok(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Dk(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function Ok(e,t,s){return(t=function(e){var t=function(e,t){if("object"!==Tk(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==Tk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Tk(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Rk(e,t,s){return Gx()(e)||Gx()(t)?s:kx(t)?hx()(e,t,s):Ux()(t)?t(e):s}function Ik(e,t,s,r){var a=jg()(e,function(e){return Rk(e,t)});if("number"===s){var n=a.filter(function(e){return wx(e)||parseFloat(e)});return n.length?[bg()(n),fg()(n)]:[1/0,-1/0]}return(r?a.filter(function(e){return!Gx()(e)}):a).map(function(e){return kx(e)||e instanceof Date?e:""})}wk(_k,"displayName","Legend"),wk(_k,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Lk=function(e){var t,s=e.type.displayName,r=e.props,a=r.stroke,n=r.fill;switch(s){case"Line":t=a;break;case"Area":case"Radar":t=a&&"none"!==a?a:n;break;default:t=n}return t},Fk=function(e){var t,s=e.children,r=e.formattedGraphicalItems,a=e.legendWidth,n=e.legendContent,i=MN(s,_k);return i?(t=i.props&&i.props.payload?i.props&&i.props.payload:"children"===n?(r||[]).reduce(function(e,t){var s=t.item,r=t.props,a=r.sectors||r.data||[];return e.concat(a.map(function(e){return{type:i.props.iconType||s.props.legendType,value:e.name,color:e.fill,payload:e}}))},[]):(r||[]).map(function(e){var t=e.item,s=t.props,r=s.dataKey,a=s.name,n=s.legendType;return{inactive:s.hide,dataKey:r,type:i.props.iconType||n||"square",color:Lk(t),value:a||r,payload:t.props}}),Mk(Mk(Mk({},i.props),_k.getWithHeight(i,a)),{},{payload:t,item:i})):null},Bk=function(e,t,s,r,a){var n=DN(t.props.children,JN).filter(function(e){return function(e,t,s){return!!Gx()(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===s?"xAxis"===t:"y"!==s||"yAxis"===t)}(r,a,e.props.direction)});if(n&&n.length){var i=n.map(function(e){return e.props.dataKey});return e.reduce(function(e,t){var r=Rk(t,s,0),a=px()(r)?[bg()(r),fg()(r)]:[r,r],n=i.reduce(function(e,s){var r=Rk(t,s,0),n=a[0]-Math.abs(px()(r)?r[0]:r),i=a[1]+Math.abs(px()(r)?r[1]:r);return[Math.min(n,e[0]),Math.max(i,e[1])]},[1/0,-1/0]);return[Math.min(n[0],e[0]),Math.max(n[1],e[1])]},[1/0,-1/0])}return null},zk=function(e,t,s,r,a){var n=t.map(function(t){var n=t.props.dataKey;return"number"===s&&n&&Bk(e,t,n,r)||Ik(e,n,s,a)});if("number"===s)return n.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]);var i={};return n.reduce(function(e,t){for(var s=0,r=t.length;s<r;s++)i[t[s]]||(i[t[s]]=!0,e.push(t[s]));return e},[])},Uk=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},Vk=function(e,t,s){var r,a,n=e.map(function(e){return e.coordinate===t&&(r=!0),e.coordinate===s&&(a=!0),e.coordinate});return r||n.push(t),a||n.push(s),n},Kk=function(e,t,s){if(!e)return null;var r=e.scale,a=e.duplicateDomain,n=e.type,i=e.range,o="scaleBand"===e.realScaleType?r.bandwidth()/2:2,l=(t||s)&&"category"===n&&r.bandwidth?r.bandwidth()/o:0;return l="angleAxis"===e.axisType&&(null===i||void 0===i?void 0:i.length)>=2?2*jx(i[0]-i[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map(function(e){var t=a?a.indexOf(e):e;return{coordinate:r(t)+l,value:e,offset:l}}).filter(function(e){return!gx()(e.coordinate)}):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(e,t){return{coordinate:r(e)+l,value:e,index:t,offset:l}}):r.ticks&&!s?r.ticks(e.tickCount).map(function(e){return{coordinate:r(e)+l,value:e,offset:l}}):r.domain().map(function(e,t){return{coordinate:r(e)+l,value:a?a[e]:e,index:t,offset:l}})},Wk=function(e,t,s){var r;return Ux()(s)?r=s:Ux()(t)&&(r=t),Ux()(e)||r?function(t,s,a,n){Ux()(e)&&e(t,s,a,n),Ux()(r)&&r(t,s,a,n)}:null},Hk=function(t,s,r){var a=t.scale,n=t.type,i=t.layout,o=t.axisType;if("auto"===a)return"radial"===i&&"radiusAxis"===o?{scale:Eg(),realScaleType:"band"}:"radial"===i&&"angleAxis"===o?{scale:by(),realScaleType:"linear"}:"category"===n&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!r)?{scale:Mg(),realScaleType:"point"}:"category"===n?{scale:Eg(),realScaleType:"band"}:{scale:by(),realScaleType:"linear"};if(vx()(a)){var l="scale".concat(xg()(a));return{scale:(e[l]||Mg)(),realScaleType:e[l]?l:"point"}}return Ux()(a)?{scale:a}:{scale:Mg(),realScaleType:"point"}},qk=1e-4,Gk=function(e){var t=e.domain();if(t&&!(t.length<=2)){var s=t.length,r=e.range(),a=Math.min(r[0],r[1])-qk,n=Math.max(r[0],r[1])+qk,i=e(t[0]),o=e(t[s-1]);(i<a||i>n||o<a||o>n)&&e.domain([t[0],t[s-1]])}},Yk={sign:function(e){var t=e.length;if(!(t<=0))for(var s=0,r=e[0].length;s<r;++s)for(var a=0,n=0,i=0;i<t;++i){var o=gx()(e[i][s][1])?e[i][s][0]:e[i][s][1];o>=0?(e[i][s][0]=a,e[i][s][1]=a+o,a=e[i][s][1]):(e[i][s][0]=n,e[i][s][1]=n+o,n=e[i][s][1])}},expand:function(e,t){if((r=e.length)>0){for(var s,r,a,n=0,i=e[0].length;n<i;++n){for(a=s=0;s<r;++s)a+=e[s][n][1]||0;if(a)for(s=0;s<r;++s)e[s][n][1]/=a}Ej(e,t)}},none:Ej,silhouette:function(e,t){if((s=e.length)>0){for(var s,r=0,a=e[t[0]],n=a.length;r<n;++r){for(var i=0,o=0;i<s;++i)o+=e[i][r][1]||0;a[r][1]+=a[r][0]=-o/2}Ej(e,t)}},wiggle:function(e,t){if((a=e.length)>0&&(r=(s=e[t[0]]).length)>0){for(var s,r,a,n=0,i=1;i<r;++i){for(var o=0,l=0,c=0;o<a;++o){for(var d=e[t[o]],u=d[i][1]||0,h=(u-(d[i-1][1]||0))/2,m=0;m<o;++m){var p=e[t[m]];h+=(p[i][1]||0)-(p[i-1][1]||0)}l+=u,c+=h*u}s[i-1][1]+=s[i-1][0]=n,l&&(n-=c/l)}s[i-1][1]+=s[i-1][0]=n,Ej(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var s=0,r=e[0].length;s<r;++s)for(var a=0,n=0;n<t;++n){var i=gx()(e[n][s][1])?e[n][s][0]:e[n][s][1];i>=0?(e[n][s][0]=a,e[n][s][1]=a+i,a=e[n][s][1]):(e[n][s][0]=0,e[n][s][1]=0)}}},$k=function(e,t,s){var r=t.map(function(e){return e.props.dataKey}),a=function(){var e=Mj([]),t=Oj,s=Ej,r=Rj;function a(a){var n,i,o=Array.from(e.apply(this,arguments),Ij),l=o.length,c=-1;for(const e of a)for(n=0,++c;n<l;++n)(o[n][c]=[0,+r(e,o[n].key,c,a)]).data=e;for(n=0,i=Dj(t(o));n<l;++n)o[i[n]].index=n;return s(o,i),o}return a.keys=function(t){return arguments.length?(e="function"===typeof t?t:Mj(Array.from(t)),a):e},a.value=function(e){return arguments.length?(r="function"===typeof e?e:Mj(+e),a):r},a.order=function(e){return arguments.length?(t=null==e?Oj:"function"===typeof e?e:Mj(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(s=null==e?Ej:e,a):s},a}().keys(r).value(function(e,t){return+Rk(e,t,0)}).order(Oj).offset(Yk[s]);return a(e)},Jk=function(e,t){var s=t.realScaleType,r=t.type,a=t.tickCount,n=t.originalDomain,i=t.allowDecimals,o=s||t.scale;if("auto"!==o&&"linear"!==o)return null;if(a&&"number"===r&&n&&("auto"===n[0]||"auto"===n[1])){var l=e.domain();if(!l.length)return null;var c=dN(l,a,i);return e.domain([bg()(c),fg()(c)]),{niceTicks:c}}if(a&&"number"===r){var d=e.domain();return{niceTicks:uN(d,a,i)}}return null},Qk=function(e){var t=e.axis,s=e.ticks,r=e.bandSize,a=e.entry,n=e.index,i=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!Gx()(a[t.dataKey])){var o=Px(s,"value",a[t.dataKey]);if(o)return o.coordinate+r/2}return s[n]?s[n].coordinate+r/2:null}var l=Rk(a,Gx()(i)?t.dataKey:i);return Gx()(l)?null:t.scale(l)},Xk=function(e){var t=e.axis,s=e.ticks,r=e.offset,a=e.bandSize,n=e.entry,i=e.index;if("category"===t.type)return s[i]?s[i].coordinate+r:null;var o=Rk(n,t.dataKey,t.domain[i]);return Gx()(o)?null:t.scale(o)-a/2+r},Zk=function(e,t,s){return Object.keys(e).reduce(function(r,a){var n=e[a].stackedData.reduce(function(e,r){var a=function(e){return e.reduce(function(e,t){return[bg()(t.concat([e[0]]).filter(wx)),fg()(t.concat([e[1]]).filter(wx))]},[1/0,-1/0])}(r.slice(t,s+1));return[Math.min(e[0],a[0]),Math.max(e[1],a[1])]},[1/0,-1/0]);return[Math.min(n[0],r[0]),Math.max(n[1],r[1])]},[1/0,-1/0]).map(function(e){return e===1/0||e===-1/0?0:e})},eA=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,tA=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,sA=function(e,t,s){if(Ux()(e))return e(t,s);if(!px()(e))return t;var r=[];if(wx(e[0]))r[0]=s?e[0]:Math.min(e[0],t[0]);else if(eA.test(e[0])){var a=+eA.exec(e[0])[1];r[0]=t[0]-a}else Ux()(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(wx(e[1]))r[1]=s?e[1]:Math.max(e[1],t[1]);else if(tA.test(e[1])){var n=+tA.exec(e[1])[1];r[1]=t[1]+n}else Ux()(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},rA=function(e,t,s){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!s||r>0)return r}if(e&&t&&t.length>=2){for(var a=Kx()(t,function(e){return e.coordinate}),n=1/0,i=1,o=a.length;i<o;i++){var l=a[i],c=a[i-1];n=Math.min((l.coordinate||0)-(c.coordinate||0),n)}return n===1/0?0:n}return s?void 0:0},aA=function(e,t,s){return e&&e.length?mg()(e,hx()(s,"type.defaultProps.domain"))?t:e:t},nA=function(e,t){var s=e.props,r=s.dataKey,a=s.name,n=s.unit,i=s.formatter,o=s.tooltipType,l=s.chartType;return Mk(Mk({},LN(e)),{},{dataKey:r,unit:n,formatter:i,name:a||r,color:Lk(e),value:Rk(t,r),type:o,payload:t,chartType:l})},iA=s(5173),oA=s.n(iA),lA=Object.getOwnPropertyNames,cA=Object.getOwnPropertySymbols,dA=Object.prototype.hasOwnProperty;function uA(e,t){return function(s,r,a){return e(s,r,a)&&t(s,r,a)}}function hA(e){return function(t,s,r){if(!t||!s||"object"!==typeof t||"object"!==typeof s)return e(t,s,r);var a=r.cache,n=a.get(t),i=a.get(s);if(n&&i)return n===s&&i===t;a.set(t,s),a.set(s,t);var o=e(t,s,r);return a.delete(t),a.delete(s),o}}function mA(e){return lA(e).concat(cA(e))}var pA=Object.hasOwn||function(e,t){return dA.call(e,t)};function xA(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var gA=Object.getOwnPropertyDescriptor,fA=Object.keys;function yA(e,t,s){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!s.equals(e[r],t[r],r,r,e,t,s))return!1;return!0}function bA(e,t){return xA(e.getTime(),t.getTime())}function vA(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function jA(e,t){return e===t}function NA(e,t,s){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a,n,i=new Array(r),o=e.entries(),l=0;(a=o.next())&&!a.done;){for(var c=t.entries(),d=!1,u=0;(n=c.next())&&!n.done;)if(i[u])u++;else{var h=a.value,m=n.value;if(s.equals(h[0],m[0],l,u,e,t,s)&&s.equals(h[1],m[1],h[0],m[0],e,t,s)){d=i[u]=!0;break}u++}if(!d)return!1;l++}return!0}var wA=xA;function kA(e,t,s){var r=fA(e),a=r.length;if(fA(t).length!==a)return!1;for(;a-- >0;)if(!EA(e,t,s,r[a]))return!1;return!0}function AA(e,t,s){var r,a,n,i=mA(e),o=i.length;if(mA(t).length!==o)return!1;for(;o-- >0;){if(!EA(e,t,s,r=i[o]))return!1;if(a=gA(e,r),n=gA(t,r),(a||n)&&(!a||!n||a.configurable!==n.configurable||a.enumerable!==n.enumerable||a.writable!==n.writable))return!1}return!0}function SA(e,t){return xA(e.valueOf(),t.valueOf())}function CA(e,t){return e.source===t.source&&e.flags===t.flags}function _A(e,t,s){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a,n,i=new Array(r),o=e.values();(a=o.next())&&!a.done;){for(var l=t.values(),c=!1,d=0;(n=l.next())&&!n.done;){if(!i[d]&&s.equals(a.value,n.value,a.value,n.value,e,t,s)){c=i[d]=!0;break}d++}if(!c)return!1}return!0}function TA(e,t){var s=e.length;if(t.length!==s)return!1;for(;s-- >0;)if(e[s]!==t[s])return!1;return!0}function PA(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function EA(e,t,s,r){return!("_owner"!==r&&"__o"!==r&&"__v"!==r||!e.$$typeof&&!t.$$typeof)||pA(t,r)&&s.equals(e[r],t[r],r,r,e,t,s)}var DA=Array.isArray,MA="function"===typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,OA=Object.assign,RA=Object.prototype.toString.call.bind(Object.prototype.toString);var IA=LA();LA({strict:!0}),LA({circular:!0}),LA({circular:!0,strict:!0}),LA({createInternalComparator:function(){return xA}}),LA({strict:!0,createInternalComparator:function(){return xA}}),LA({circular:!0,createInternalComparator:function(){return xA}}),LA({circular:!0,createInternalComparator:function(){return xA},strict:!0});function LA(e){void 0===e&&(e={});var t,s=e.circular,r=void 0!==s&&s,a=e.createInternalComparator,n=e.createState,i=e.strict,o=void 0!==i&&i,l=function(e){var t=e.circular,s=e.createCustomConfig,r=e.strict,a={areArraysEqual:r?AA:yA,areDatesEqual:bA,areErrorsEqual:vA,areFunctionsEqual:jA,areMapsEqual:r?uA(NA,AA):NA,areNumbersEqual:wA,areObjectsEqual:r?AA:kA,arePrimitiveWrappersEqual:SA,areRegExpsEqual:CA,areSetsEqual:r?uA(_A,AA):_A,areTypedArraysEqual:r?AA:TA,areUrlsEqual:PA};if(s&&(a=OA({},a,s(a))),t){var n=hA(a.areArraysEqual),i=hA(a.areMapsEqual),o=hA(a.areObjectsEqual),l=hA(a.areSetsEqual);a=OA({},a,{areArraysEqual:n,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return a}(e),c=function(e){var t=e.areArraysEqual,s=e.areDatesEqual,r=e.areErrorsEqual,a=e.areFunctionsEqual,n=e.areMapsEqual,i=e.areNumbersEqual,o=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,d=e.areSetsEqual,u=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(e,m,p){if(e===m)return!0;if(null==e||null==m)return!1;var x=typeof e;if(x!==typeof m)return!1;if("object"!==x)return"number"===x?i(e,m,p):"function"===x&&a(e,m,p);var g=e.constructor;if(g!==m.constructor)return!1;if(g===Object)return o(e,m,p);if(DA(e))return t(e,m,p);if(null!=MA&&MA(e))return u(e,m,p);if(g===Date)return s(e,m,p);if(g===RegExp)return c(e,m,p);if(g===Map)return n(e,m,p);if(g===Set)return d(e,m,p);var f=RA(e);return"[object Date]"===f?s(e,m,p):"[object RegExp]"===f?c(e,m,p):"[object Map]"===f?n(e,m,p):"[object Set]"===f?d(e,m,p):"[object Object]"===f?"function"!==typeof e.then&&"function"!==typeof m.then&&o(e,m,p):"[object URL]"===f?h(e,m,p):"[object Error]"===f?r(e,m,p):"[object Arguments]"===f?o(e,m,p):("[object Boolean]"===f||"[object Number]"===f||"[object String]"===f)&&l(e,m,p)}}(l),d=a?a(c):(t=c,function(e,s,r,a,n,i,o){return t(e,s,o)});return function(e){var t=e.circular,s=e.comparator,r=e.createState,a=e.equals,n=e.strict;if(r)return function(e,i){var o=r(),l=o.cache,c=void 0===l?t?new WeakMap:void 0:l,d=o.meta;return s(e,i,{cache:c,equals:a,meta:d,strict:n})};if(t)return function(e,t){return s(e,t,{cache:new WeakMap,equals:a,meta:void 0,strict:n})};var i={cache:void 0,equals:a,meta:void 0,strict:n};return function(e,t){return s(e,t,i)}}({circular:r,comparator:c,createState:n,equals:d,strict:o})}function FA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=-1;requestAnimationFrame(function r(a){s<0&&(s=a),a-s>t?(e(a),s=-1):function(e){"undefined"!==typeof requestAnimationFrame&&requestAnimationFrame(e)}(r)})}function BA(e){return BA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BA(e)}function zA(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return UA(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return UA(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UA(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}function VA(){var e=function(){return null},t=!1,s=function s(r){if(!t){if(Array.isArray(r)){if(!r.length)return;var a=zA(r),n=a[0],i=a.slice(1);return"number"===typeof n?void FA(s.bind(null,i),n):(s(n),void FA(s.bind(null,i)))}"object"===BA(r)&&e(r),"function"===typeof r&&r()}};return{stop:function(){t=!0},start:function(e){t=!1,s(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function KA(e){return KA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KA(e)}function WA(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function HA(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?WA(Object(s),!0).forEach(function(t){qA(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):WA(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function qA(e,t,s){return(t=function(e){var t=function(e,t){if("object"!==KA(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==KA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===KA(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var GA=["Webkit","Moz","O","ms"],YA=["-webkit-","-moz-","-o-","-ms-"],$A=["transform","transformOrigin","transition"],JA=function(e){return e},QA=function(e,t){return Object.keys(t).reduce(function(s,r){return HA(HA({},s),{},qA({},r,e(r,t[r])))},{})},XA=function(e){return Object.keys(e).reduce(function(e,t){return HA(HA({},e),function(e,t){if(-1===$A.indexOf(e))return qA({},e,Number.isNaN(t)?0:t);var s="transition"===e,r=e.replace(/(\w)/,function(e){return e.toUpperCase()}),a=t;return GA.reduce(function(e,n,i){return s&&(a=t.replace(/(transform|transform-origin)/gim,"".concat(YA[i],"$1"))),HA(HA({},e),{},qA({},n+r,a))},{})}(t,e[t]))},e)},ZA=function(e,t,s){return e.map(function(e){return"".concat((r=e,r.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())}))," ").concat(t,"ms ").concat(s);var r}).join(",")};function eS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var r,a,n,i,o=[],l=!0,c=!1;try{if(n=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;l=!1}else for(;!(l=(r=n.call(s)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=s.return&&(i=s.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||sS(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tS(e){return function(e){if(Array.isArray(e))return rS(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||sS(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sS(e,t){if(e){if("string"===typeof e)return rS(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?rS(e,t):void 0}}function rS(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}var aS=1e-4,nS=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},iS=function(e,t){return e.map(function(e,s){return e*Math.pow(t,s)}).reduce(function(e,t){return e+t})},oS=function(e,t){return function(s){var r=nS(e,t);return iS(r,s)}},lS=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];var r=t[0],a=t[1],n=t[2],i=t[3];if(1===t.length)switch(t[0]){case"linear":r=0,a=0,n=1,i=1;break;case"ease":r=.25,a=.1,n=.25,i=1;break;case"ease-in":r=.42,a=0,n=1,i=1;break;case"ease-out":r=.42,a=0,n=.58,i=1;break;case"ease-in-out":r=0,a=0,n=.58,i=1;break;default:var o=t[0].split("(");if("cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length){var l=o[1].split(")")[0].split(",").map(function(e){return parseFloat(e)}),c=eS(l,4);r=c[0],a=c[1],n=c[2],i=c[3]}}[r,n,a,i].every(function(e){return"number"===typeof e&&e>=0&&e<=1});var d,u,h=oS(r,n),m=oS(a,i),p=(d=r,u=n,function(e){var t=nS(d,u),s=[].concat(tS(t.map(function(e,t){return e*t}).slice(1)),[0]);return iS(s,e)}),x=function(e){return e>1?1:e<0?0:e},g=function(e){for(var t=e>1?1:e,s=t,r=0;r<8;++r){var a=h(s)-t,n=p(s);if(Math.abs(a-t)<aS||n<aS)return m(s);s=x(s-a/n)}return m(s)};return g.isStepper=!1,g},cS=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];var r=t[0];if("string"===typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return lS(r);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,s=void 0===t?100:t,r=e.damping,a=void 0===r?8:r,n=e.dt,i=void 0===n?17:n,o=function(e,t,r){var n=r+(-(e-t)*s-r*a)*i/1e3,o=r*i/1e3+e;return Math.abs(o-t)<aS&&Math.abs(n)<aS?[t,0]:[o,n]};return o.isStepper=!0,o.dt=i,o}();default:if("cubic-bezier"===r.split("(")[0])return lS(r)}return"function"===typeof r?r:null};function dS(e){return dS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dS(e)}function uS(e){return function(e){if(Array.isArray(e))return fS(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||gS(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hS(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function mS(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?hS(Object(s),!0).forEach(function(t){pS(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):hS(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function pS(e,t,s){return(t=function(e){var t=function(e,t){if("object"!==dS(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==dS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===dS(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function xS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var r,a,n,i,o=[],l=!0,c=!1;try{if(n=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;l=!1}else for(;!(l=(r=n.call(s)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=s.return&&(i=s.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||gS(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gS(e,t){if(e){if("string"===typeof e)return fS(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?fS(e,t):void 0}}function fS(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}var yS=function(e,t,s){return e+(t-e)*s},bS=function(e){return e.from!==e.to},vS=function e(t,s,r){var a=QA(function(e,s){if(bS(s)){var r=xS(t(s.from,s.to,s.velocity),2),a=r[0],n=r[1];return mS(mS({},s),{},{from:a,velocity:n})}return s},s);return r<1?QA(function(e,t){return bS(t)?mS(mS({},t),{},{velocity:yS(t.velocity,a[e].velocity,r),from:yS(t.from,a[e].from,r)}):t},s):e(t,a,r-1)};const jS=function(e,t,s,r,a){var n,i,o,l,c=(n=e,i=t,[Object.keys(n),Object.keys(i)].reduce(function(e,t){return e.filter(function(e){return t.includes(e)})})),d=c.reduce(function(s,r){return mS(mS({},s),{},pS({},r,[e[r],t[r]]))},{}),u=c.reduce(function(s,r){return mS(mS({},s),{},pS({},r,{from:e[r],velocity:0,to:t[r]}))},{}),h=-1,m=function(){return null};return m=s.isStepper?function(r){o||(o=r);var n=(r-o)/s.dt;u=vS(s,u,n),a(mS(mS(mS({},e),t),QA(function(e,t){return t.from},u))),o=r,Object.values(u).filter(bS).length&&(h=requestAnimationFrame(m))}:function(n){l||(l=n);var i=(n-l)/r,o=QA(function(e,t){return yS.apply(void 0,uS(t).concat([s(i)]))},d);if(a(mS(mS(mS({},e),t),o)),i<1)h=requestAnimationFrame(m);else{var c=QA(function(e,t){return yS.apply(void 0,uS(t).concat([s(1)]))},d);a(mS(mS(mS({},e),t),c))}},function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(h)}}};function NS(e){return NS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NS(e)}var wS=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function kS(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function AS(e){return function(e){if(Array.isArray(e))return SS(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return SS(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return SS(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SS(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}function CS(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function _S(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?CS(Object(s),!0).forEach(function(t){TS(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):CS(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function TS(e,t,s){return(t=ES(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function PS(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ES(r.key),r)}}function ES(e){var t=function(e,t){if("object"!==NS(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==NS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===NS(t)?t:String(t)}function DS(e,t){return DS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},DS(e,t)}function MS(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(qU){return!1}}();return function(){var s,r=IS(e);if(t){var a=IS(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return OS(this,s)}}function OS(e,t){if(t&&("object"===NS(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return RS(e)}function RS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IS(e){return IS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},IS(e)}var LS=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DS(e,t)}(i,e);var t,s,a,n=MS(i);function i(e,t){var s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=(s=n.call(this,e,t)).props,a=r.isActive,o=r.attributeName,l=r.from,c=r.to,d=r.steps,u=r.children,h=r.duration;if(s.handleStyleChange=s.handleStyleChange.bind(RS(s)),s.changeStyle=s.changeStyle.bind(RS(s)),!a||h<=0)return s.state={style:{}},"function"===typeof u&&(s.state={style:c}),OS(s);if(d&&d.length)s.state={style:d[0].style};else if(l){if("function"===typeof u)return s.state={style:l},OS(s);s.state={style:o?TS({},o,l):l}}else s.state={style:{}};return s}return t=i,s=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,s=e.canBegin;this.mounted=!0,t&&s&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,s=t.isActive,r=t.canBegin,a=t.attributeName,n=t.shouldReAnimate,i=t.to,o=t.from,l=this.state.style;if(r)if(s){if(!(IA(e.to,i)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var d=c||n?o:e.to;if(this.state&&l){var u={style:a?TS({},a,d):d};(a&&[a]!==d||!a&&l!==d)&&this.setState(u)}this.runAnimation(_S(_S({},this.props),{},{from:d,begin:0}))}}else{var h={style:a?TS({},a,i):i};this.state&&l&&(a&&l[a]!==i||!a&&l!==i)&&this.setState(h)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,s=e.from,r=e.to,a=e.duration,n=e.easing,i=e.begin,o=e.onAnimationEnd,l=e.onAnimationStart,c=jS(s,r,cS(n),a,this.changeStyle);this.manager.start([l,i,function(){t.stopJSAnimation=c()},a,o])}},{key:"runStepAnimation",value:function(e){var t=this,s=e.steps,r=e.begin,a=e.onAnimationStart,n=s[0],i=n.style,o=n.duration,l=void 0===o?0:o;return this.manager.start([a].concat(AS(s.reduce(function(e,r,a){if(0===a)return e;var n=r.duration,i=r.easing,o=void 0===i?"ease":i,l=r.style,c=r.properties,d=r.onAnimationEnd,u=a>0?s[a-1]:r,h=c||Object.keys(l);if("function"===typeof o||"spring"===o)return[].concat(AS(e),[t.runJSAnimation.bind(t,{from:u.style,to:l,duration:n,easing:o}),n]);var m=ZA(h,n,o),p=_S(_S(_S({},u.style),l),{},{transition:m});return[].concat(AS(e),[p,n,d]).filter(JA)},[i,Math.max(l,r)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=VA());var t=e.begin,s=e.duration,r=e.attributeName,a=e.to,n=e.easing,i=e.onAnimationStart,o=e.onAnimationEnd,l=e.steps,c=e.children,d=this.manager;if(this.unSubscribe=d.subscribe(this.handleStyleChange),"function"!==typeof n&&"function"!==typeof c&&"spring"!==n)if(l.length>1)this.runStepAnimation(e);else{var u=r?TS({},r,a):a,h=ZA(Object.keys(u),s,n);d.start([i,t,_S(_S({},u),{},{transition:h}),s,o])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,t=e.children,s=(e.begin,e.duration),a=(e.attributeName,e.easing,e.isActive),n=(e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart,kS(e,wS)),i=r.Children.count(t),o=XA(this.state.style);if("function"===typeof t)return t(o);if(!a||0===i||s<=0)return t;var l=function(e){var t=e.props,s=t.style,a=void 0===s?{}:s,i=t.className;return(0,r.cloneElement)(e,_S(_S({},n),{},{style:_S(_S({},a),o),className:i}))};return 1===i?l(r.Children.only(t)):r.createElement("div",null,r.Children.map(t,function(e){return l(e)}))}}],s&&PS(t.prototype,s),a&&PS(t,a),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);LS.displayName="Animate",LS.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},LS.propTypes={from:oA().oneOfType([oA().object,oA().string]),to:oA().oneOfType([oA().object,oA().string]),attributeName:oA().string,duration:oA().number,begin:oA().number,easing:oA().oneOfType([oA().string,oA().func]),steps:oA().arrayOf(oA().shape({duration:oA().number.isRequired,style:oA().object.isRequired,easing:oA().oneOfType([oA().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),oA().func]),properties:oA().arrayOf("string"),onAnimationEnd:oA().func})),children:oA().oneOfType([oA().node,oA().func]),isActive:oA().bool,canBegin:oA().bool,onAnimationEnd:oA().func,shouldReAnimate:oA().bool,onAnimationStart:oA().func,onAnimationReStart:oA().func};const FS=LS;var BS=s(7111),zS=["children","appearOptions","enterOptions","leaveOptions"];function US(e){return US="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},US(e)}function VS(){return VS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},VS.apply(this,arguments)}function KS(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function WS(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function HS(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?WS(Object(s),!0).forEach(function(t){QS(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):WS(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function qS(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,XS(r.key),r)}}function GS(e,t){return GS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},GS(e,t)}function YS(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(qU){return!1}}();return function(){var s,r=JS(e);if(t){var a=JS(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return function(e,t){if(t&&("object"===US(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $S(e)}(this,s)}}function $S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JS(e){return JS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},JS(e)}function QS(e,t,s){return(t=XS(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function XS(e){var t=function(e,t){if("object"!==US(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==US(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===US(t)?t:String(t)}void 0===Number.isFinite&&(Number.isFinite=function(e){return"number"===typeof e&&isFinite(e)});var ZS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.steps,s=e.duration;return t&&t.length?t.reduce(function(e,t){return e+(Number.isFinite(t.duration)&&t.duration>0?t.duration:0)},0):Number.isFinite(s)?s:0},eC=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GS(e,t)}(i,e);var t,s,a,n=YS(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),QS($S(e=n.call(this)),"handleEnter",function(t,s){var r=e.props,a=r.appearOptions,n=r.enterOptions;e.handleStyleActive(s?a:n)}),QS($S(e),"handleExit",function(){var t=e.props.leaveOptions;e.handleStyleActive(t)}),e.state={isActive:!1},e}return t=i,(s=[{key:"handleStyleActive",value:function(e){if(e){var t=e.onAnimationEnd?function(){e.onAnimationEnd()}:null;this.setState(HS(HS({},e),{},{onAnimationEnd:t,isActive:!0}))}}},{key:"parseTimeout",value:function(){var e=this.props,t=e.appearOptions,s=e.enterOptions,r=e.leaveOptions;return ZS(t)+ZS(s)+ZS(r)}},{key:"render",value:function(){var e=this,t=this.props,s=t.children,a=(t.appearOptions,t.enterOptions,t.leaveOptions,KS(t,zS));return r.createElement(BS.Transition,VS({},a,{onEnter:this.handleEnter,onExit:this.handleExit,timeout:this.parseTimeout()}),function(){return r.createElement(FS,e.state,r.Children.only(s))})}}])&&qS(t.prototype,s),a&&qS(t,a),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);eC.propTypes={appearOptions:oA().object,enterOptions:oA().object,leaveOptions:oA().object,children:oA().element};const tC=eC;function sC(e){var t=e.component,s=e.children,a=e.appear,n=e.enter,i=e.leave;return r.createElement(BS.TransitionGroup,{component:t},r.Children.map(s,function(e,t){return r.createElement(tC,{appearOptions:a,enterOptions:n,leaveOptions:i,key:"child-".concat(t)},e)}))}sC.propTypes={appear:oA().object,enter:oA().object,leave:oA().object,children:oA().oneOfType([oA().array,oA().element]),component:oA().any},sC.defaultProps={component:"span"};const rC=FS;function aC(e){return aC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aC(e)}function nC(){return nC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},nC.apply(this,arguments)}function iC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var r,a,n,i,o=[],l=!0,c=!1;try{if(n=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;l=!1}else for(;!(l=(r=n.call(s)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=s.return&&(i=s.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return oC(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return oC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oC(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}function lC(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function cC(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?lC(Object(s),!0).forEach(function(t){dC(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):lC(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function dC(e,t,s){return(t=function(e){var t=function(e,t){if("object"!==aC(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==aC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===aC(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var uC=function(e,t,s,r,a){var n,i=Math.min(Math.abs(s)/2,Math.abs(r)/2),o=r>=0?1:-1,l=s>=0?1:-1,c=r>=0&&s>=0||r<0&&s<0?1:0;if(i>0&&a instanceof Array){for(var d=[0,0,0,0],u=0;u<4;u++)d[u]=a[u]>i?i:a[u];n="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(n+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),n+="L ".concat(e+s-l*d[1],",").concat(t),d[1]>0&&(n+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,",\n        ").concat(e+s,",").concat(t+o*d[1])),n+="L ".concat(e+s,",").concat(t+r-o*d[2]),d[2]>0&&(n+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,",\n        ").concat(e+s-l*d[2],",").concat(t+r)),n+="L ".concat(e+l*d[3],",").concat(t+r),d[3]>0&&(n+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+r-o*d[3])),n+="Z"}else if(i>0&&a===+a&&a>0){var h=Math.min(i,a);n="M ".concat(e,",").concat(t+o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+s-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+s,",").concat(t+o*h,"\n            L ").concat(e+s,",").concat(t+r-o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+s-l*h,",").concat(t+r,"\n            L ").concat(e+l*h,",").concat(t+r,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+r-o*h," Z")}else n="M ".concat(e,",").concat(t," h ").concat(s," v ").concat(r," h ").concat(-s," Z");return n},hC=function(e,t){if(!e||!t)return!1;var s=e.x,r=e.y,a=t.x,n=t.y,i=t.width,o=t.height;if(Math.abs(i)>0&&Math.abs(o)>0){var l=Math.min(a,a+i),c=Math.max(a,a+i),d=Math.min(n,n+o),u=Math.max(n,n+o);return s>=l&&s<=c&&r>=d&&r<=u}return!1},mC={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},pC=function(e){var t=cC(cC({},mC),e),s=(0,r.useRef)(),a=iC((0,r.useState)(-1),2),n=a[0],i=a[1];(0,r.useEffect)(function(){if(s.current&&s.current.getTotalLength)try{var e=s.current.getTotalLength();e&&i(e)}catch(t){}},[]);var o=t.x,l=t.y,c=t.width,d=t.height,u=t.radius,h=t.className,m=t.animationEasing,p=t.animationDuration,x=t.animationBegin,g=t.isAnimationActive,f=t.isUpdateAnimationActive;if(o!==+o||l!==+l||c!==+c||d!==+d||0===c||0===d)return null;var y=Qp()("recharts-rectangle",h);return f?r.createElement(rC,{canBegin:n>0,from:{width:c,height:d,x:o,y:l},to:{width:c,height:d,x:o,y:l},duration:p,animationEasing:m,isActive:f},function(e){var a=e.width,i=e.height,o=e.x,l=e.y;return r.createElement(rC,{canBegin:n>0,from:"0px ".concat(-1===n?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:p,isActive:g,easing:m},r.createElement("path",nC({},LN(t,!0),{className:y,d:uC(o,l,a,i,u),ref:s})))}):r.createElement("path",nC({},LN(t,!0),{className:y,d:uC(o,l,c,d,u)}))},xC=function(e){return null};xC.displayName="Cell";var gC=s(4065),fC=s.n(gC),yC=s(4443),bC=s.n(yC),vC=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],jC=["dx","dy","angle","className","breakAll"];function NC(){return NC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},NC.apply(this,arguments)}function wC(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function kC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var r,a,n,i,o=[],l=!0,c=!1;try{if(n=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;l=!1}else for(;!(l=(r=n.call(s)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=s.return&&(i=s.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return AC(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return AC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AC(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}var SC=/[ \f\n\r\t\v\u2028\u2029]+/,CC=function(e){var t=e.children,s=e.breakAll,r=e.style;try{var a=[];return Gx()(t)||(a=s?t.toString().split(""):t.toString().split(SC)),{wordsWithComputedWidth:a.map(function(e){return{word:e,width:lg(e,r).width}}),spaceWidth:s?0:lg("\xa0",r).width}}catch(qU){return null}},_C=function(e){return[{words:Gx()(e)?[]:e.toString().split(SC)}]},TC=function(e){var t=e.width,s=e.scaleToFit,r=e.children,a=e.style,n=e.breakAll,i=e.maxLines;if((t||s)&&!Jx.isSsr){var o=CC({breakAll:n,children:r,style:a});return o?function(e,t,s,r,a){var n=e.maxLines,i=e.children,o=e.style,l=e.breakAll,c=wx(n),d=i,u=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){var n=t.word,i=t.width,o=e[e.length-1];if(o&&(null==r||a||o.width+i+s<Number(r)))o.words.push(n),o.width+=i+s;else{var l={words:[n],width:i};e.push(l)}return e},[])},h=u(t);if(!c)return h;for(var m,p=function(e){var t=d.slice(0,e),s=CC({breakAll:l,style:o,children:t+"\u2026"}).wordsWithComputedWidth,a=u(s),i=a.length>n||function(e){return e.reduce(function(e,t){return e.width>t.width?e:t})}(a).width>Number(r);return[i,a]},x=0,g=d.length-1,f=0;x<=g&&f<=d.length-1;){var y=Math.floor((x+g)/2),b=kC(p(y-1),2),v=b[0],j=b[1],N=kC(p(y),1)[0];if(v||N||(x=y+1),v&&N&&(g=y-1),!v&&N){m=j;break}f++}return m||h}({breakAll:n,children:r,maxLines:i,style:a},o.wordsWithComputedWidth,o.spaceWidth,t,s):_C(r)}return _C(r)},PC="#808080",EC=function(e){var t=e.x,s=void 0===t?0:t,a=e.y,n=void 0===a?0:a,i=e.lineHeight,o=void 0===i?"1em":i,l=e.capHeight,c=void 0===l?"0.71em":l,d=e.scaleToFit,u=void 0!==d&&d,h=e.textAnchor,m=void 0===h?"start":h,p=e.verticalAnchor,x=void 0===p?"end":p,g=e.fill,f=void 0===g?PC:g,y=wC(e,vC),b=(0,r.useMemo)(function(){return TC({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:u,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,u,y.style,y.width]),v=y.dx,j=y.dy,N=y.angle,w=y.className,k=y.breakAll,A=wC(y,jC);if(!kx(s)||!kx(n))return null;var S,C=s+(wx(v)?v:0),_=n+(wx(j)?j:0);switch(x){case"start":S=bC()("calc(".concat(c,")"));break;case"middle":S=bC()("calc(".concat((b.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:S=bC()("calc(".concat(b.length-1," * -").concat(o,")"))}var T=[];if(u){var P=b[0].width,E=y.width;T.push("scale(".concat((wx(E)?E/P:1)/P,")"))}return N&&T.push("rotate(".concat(N,", ").concat(C,", ").concat(_,")")),T.length&&(A.transform=T.join(" ")),r.createElement("text",NC({},LN(A,!0),{x:C,y:_,className:Qp()("recharts-text",w),textAnchor:m,fill:f.includes("url")?PC:f}),b.map(function(e,t){return r.createElement("tspan",{x:C,dy:0===t?S:o,key:t},e.words.join(k?"":" "))}))};function DC(e){return DC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DC(e)}function MC(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function OC(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?MC(Object(s),!0).forEach(function(t){RC(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):MC(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function RC(e,t,s){return(t=function(e){var t=function(e,t){if("object"!==DC(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==DC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===DC(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function IC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var r,a,n,i,o=[],l=!0,c=!1;try{if(n=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;l=!1}else for(;!(l=(r=n.call(s)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=s.return&&(i=s.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return LC(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return LC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LC(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}var FC=Math.PI/180,BC=function(e){return 180*e/Math.PI},zC=function(e,t,s,r){return{x:e+Math.cos(-FC*r)*s,y:t+Math.sin(-FC*r)*s}},UC=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(s.left||0)-(s.right||0)),Math.abs(t-(s.top||0)-(s.bottom||0)))/2},VC=function(e,t){var s=e.x,r=e.y,a=t.cx,n=t.cy,i=function(e,t){var s=e.x,r=e.y,a=t.x,n=t.y;return Math.sqrt(Math.pow(s-a,2)+Math.pow(r-n,2))}({x:s,y:r},{x:a,y:n});if(i<=0)return{radius:i};var o=(s-a)/i,l=Math.acos(o);return r>n&&(l=2*Math.PI-l),{radius:i,angle:BC(l),angleInRadian:l}},KC=function(e,t){var s=t.startAngle,r=t.endAngle,a=Math.floor(s/360),n=Math.floor(r/360);return e+360*Math.min(a,n)},WC=function(e,t){var s=e.x,r=e.y,a=VC({x:s,y:r},t),n=a.radius,i=a.angle,o=t.innerRadius,l=t.outerRadius;if(n<o||n>l)return!1;if(0===n)return!0;var c,d=function(e){var t=e.startAngle,s=e.endAngle,r=Math.floor(t/360),a=Math.floor(s/360),n=Math.min(r,a);return{startAngle:t-360*n,endAngle:s-360*n}}(t),u=d.startAngle,h=d.endAngle,m=i;if(u<=h){for(;m>h;)m-=360;for(;m<u;)m+=360;c=m>=u&&m<=h}else{for(;m>u;)m-=360;for(;m<h;)m+=360;c=m>=h&&m<=u}return c?OC(OC({},t),{},{radius:n,angle:KC(m,t)}):null};function HC(e){return HC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HC(e)}var qC=["offset"];function GC(e){return function(e){if(Array.isArray(e))return YC(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return YC(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return YC(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YC(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}function $C(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function JC(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function QC(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?JC(Object(s),!0).forEach(function(t){XC(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):JC(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function XC(e,t,s){return(t=function(e){var t=function(e,t){if("object"!==HC(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==HC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===HC(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ZC(){return ZC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},ZC.apply(this,arguments)}var e_=function(e,t,s){var a,n,i=e.position,o=e.viewBox,l=e.offset,c=e.className,d=o,u=d.cx,h=d.cy,m=d.innerRadius,p=d.outerRadius,x=d.startAngle,g=d.endAngle,f=d.clockWise,y=(m+p)/2,b=function(e,t){return jx(t-e)*Math.min(Math.abs(t-e),360)}(x,g),v=b>=0?1:-1;"insideStart"===i?(a=x+v*l,n=f):"insideEnd"===i?(a=g-v*l,n=!f):"end"===i&&(a=g+v*l,n=f),n=b<=0?n:!n;var j=zC(u,h,y,a),N=zC(u,h,y,a+359*(n?1:-1)),w="M".concat(j.x,",").concat(j.y,"\n    A").concat(y,",").concat(y,",0,1,").concat(n?0:1,",\n    ").concat(N.x,",").concat(N.y),k=Gx()(e.id)?Sx("recharts-radial-line-"):e.id;return r.createElement("text",ZC({},s,{dominantBaseline:"central",className:Qp()("recharts-radial-bar-label",c)}),r.createElement("defs",null,r.createElement("path",{id:k,d:w})),r.createElement("textPath",{xlinkHref:"#".concat(k)},t))};function t_(e){var t,s=e.offset,a=QC({offset:void 0===s?5:s},$C(e,qC)),n=a.viewBox,i=a.position,o=a.value,l=a.children,c=a.content,d=a.className,u=void 0===d?"":d,h=a.textBreakAll;if(!n||Gx()(o)&&Gx()(l)&&!(0,r.isValidElement)(c)&&!Ux()(c))return null;if((0,r.isValidElement)(c))return(0,r.cloneElement)(c,a);if(Ux()(c)){if(t=(0,r.createElement)(c,a),(0,r.isValidElement)(t))return t}else t=function(e){var t=e.value,s=e.formatter,r=Gx()(e.children)?t:e.children;return Ux()(s)?s(r):r}(a);var m=function(e){return"cx"in e&&wx(e.cx)}(n),p=LN(a,!0);if(m&&("insideStart"===i||"insideEnd"===i||"end"===i))return e_(a,t,p);var x=m?function(e){var t=e.viewBox,s=e.offset,r=e.position,a=t,n=a.cx,i=a.cy,o=a.innerRadius,l=a.outerRadius,c=(a.startAngle+a.endAngle)/2;if("outside"===r){var d=zC(n,i,l+s,c),u=d.x;return{x:u,y:d.y,textAnchor:u>=n?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=zC(n,i,(o+l)/2,c);return{x:h.x,y:h.y,textAnchor:"middle",verticalAnchor:"middle"}}(a):function(e){var t=e.viewBox,s=e.parentViewBox,r=e.offset,a=e.position,n=t,i=n.x,o=n.y,l=n.width,c=n.height,d=c>=0?1:-1,u=d*r,h=d>0?"end":"start",m=d>0?"start":"end",p=l>=0?1:-1,x=p*r,g=p>0?"end":"start",f=p>0?"start":"end";if("top"===a)return QC(QC({},{x:i+l/2,y:o-d*r,textAnchor:"middle",verticalAnchor:h}),s?{height:Math.max(o-s.y,0),width:l}:{});if("bottom"===a)return QC(QC({},{x:i+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:m}),s?{height:Math.max(s.y+s.height-(o+c),0),width:l}:{});if("left"===a){var y={x:i-x,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return QC(QC({},y),s?{width:Math.max(y.x-s.x,0),height:c}:{})}if("right"===a){var b={x:i+l+x,y:o+c/2,textAnchor:f,verticalAnchor:"middle"};return QC(QC({},b),s?{width:Math.max(s.x+s.width-b.x,0),height:c}:{})}var v=s?{width:l,height:c}:{};return"insideLeft"===a?QC({x:i+x,y:o+c/2,textAnchor:f,verticalAnchor:"middle"},v):"insideRight"===a?QC({x:i+l-x,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},v):"insideTop"===a?QC({x:i+l/2,y:o+u,textAnchor:"middle",verticalAnchor:m},v):"insideBottom"===a?QC({x:i+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:h},v):"insideTopLeft"===a?QC({x:i+x,y:o+u,textAnchor:f,verticalAnchor:m},v):"insideTopRight"===a?QC({x:i+l-x,y:o+u,textAnchor:g,verticalAnchor:m},v):"insideBottomLeft"===a?QC({x:i+x,y:o+c-u,textAnchor:f,verticalAnchor:h},v):"insideBottomRight"===a?QC({x:i+l-x,y:o+c-u,textAnchor:g,verticalAnchor:h},v):mN()(a)&&(wx(a.x)||Nx(a.x))&&(wx(a.y)||Nx(a.y))?QC({x:i+Cx(a.x,l),y:o+Cx(a.y,c),textAnchor:"end",verticalAnchor:"end"},v):QC({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},v)}(a);return r.createElement(EC,ZC({className:Qp()("recharts-label",u)},p,x,{breakAll:h}),t)}t_.displayName="Label";var s_=function(e){var t=e.cx,s=e.cy,r=e.angle,a=e.startAngle,n=e.endAngle,i=e.r,o=e.radius,l=e.innerRadius,c=e.outerRadius,d=e.x,u=e.y,h=e.top,m=e.left,p=e.width,x=e.height,g=e.clockWise,f=e.labelViewBox;if(f)return f;if(wx(p)&&wx(x)){if(wx(d)&&wx(u))return{x:d,y:u,width:p,height:x};if(wx(h)&&wx(m))return{x:h,y:m,width:p,height:x}}return wx(d)&&wx(u)?{x:d,y:u,width:0,height:0}:wx(t)&&wx(s)?{cx:t,cy:s,startAngle:a||r||0,endAngle:n||r||0,innerRadius:l||0,outerRadius:c||o||i||0,clockWise:g}:e.viewBox?e.viewBox:{}};function r_(e){return r_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r_(e)}t_.parseViewBox=s_,t_.renderCallByParent=function(e,t){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&s&&!e.label)return null;var a=e.children,n=s_(e),i=DN(a,t_).map(function(e,s){return(0,r.cloneElement)(e,{viewBox:t||n,key:"label-".concat(s)})});if(!s)return i;var o=function(e,t){return e?!0===e?r.createElement(t_,{key:"label-implicit",viewBox:t}):kx(e)?r.createElement(t_,{key:"label-implicit",viewBox:t,value:e}):(0,r.isValidElement)(e)?e.type===t_?(0,r.cloneElement)(e,{key:"label-implicit",viewBox:t}):r.createElement(t_,{key:"label-implicit",content:e,viewBox:t}):Ux()(e)?r.createElement(t_,{key:"label-implicit",content:e,viewBox:t}):mN()(e)?r.createElement(t_,ZC({viewBox:t},e,{key:"label-implicit"})):null:null}(e.label,t||n);return[o].concat(GC(i))};var a_=["valueAccessor"],n_=["data","dataKey","clockWise","id","textBreakAll"];function i_(e){return function(e){if(Array.isArray(e))return o_(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return o_(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return o_(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o_(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}function l_(){return l_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},l_.apply(this,arguments)}function c_(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function d_(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c_(Object(s),!0).forEach(function(t){u_(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c_(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function u_(e,t,s){return(t=function(e){var t=function(e,t){if("object"!==r_(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==r_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r_(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function h_(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var m_=function(e){return px()(e.value)?fC()(e.value):e.value};function p_(e){var t=e.valueAccessor,s=void 0===t?m_:t,a=h_(e,a_),n=a.data,i=a.dataKey,o=a.clockWise,l=a.id,c=a.textBreakAll,d=h_(a,n_);return n&&n.length?r.createElement(WN,{className:"recharts-label-list"},n.map(function(e,t){var a=Gx()(i)?s(e,t):Rk(e&&e.payload,i),n=Gx()(l)?{}:{id:"".concat(l,"-").concat(t)};return r.createElement(t_,l_({},LN(e,!0),d,n,{parentViewBox:e.parentViewBox,index:t,value:a,textBreakAll:c,viewBox:t_.parseViewBox(Gx()(o)?e:d_(d_({},e),{},{clockWise:o})),key:"label-".concat(t)}))})):null}p_.displayName="LabelList",p_.renderCallByParent=function(e,t){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&s&&!e.label)return null;var a=DN(e.children,p_).map(function(e,s){return(0,r.cloneElement)(e,{data:t,key:"labelList-".concat(s)})});if(!s)return a;var n=function(e,t){return e?!0===e?r.createElement(p_,{key:"labelList-implicit",data:t}):r.isValidElement(e)||Ux()(e)?r.createElement(p_,{key:"labelList-implicit",data:t,content:e}):mN()(e)?r.createElement(p_,l_({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t);return[n].concat(i_(a))};var x_=["value","background"];function g_(e){return g_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g_(e)}function f_(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function y_(){return y_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},y_.apply(this,arguments)}function b_(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function v_(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b_(Object(s),!0).forEach(function(t){S_(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b_(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function j_(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C_(r.key),r)}}function N_(e,t){return N_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},N_(e,t)}function w_(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(qU){return!1}}();return function(){var s,r=A_(e);if(t){var a=A_(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return function(e,t){if(t&&("object"===g_(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k_(e)}(this,s)}}function k_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A_(e){return A_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A_(e)}function S_(e,t,s){return(t=C_(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function C_(e){var t=function(e,t){if("object"!==g_(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==g_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===g_(t)?t:String(t)}var __=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N_(e,t)}(i,e);var t,s,a,n=w_(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return S_(k_(e=n.call.apply(n,[this].concat(s))),"state",{isAnimationFinished:!1}),S_(k_(e),"id",Sx("recharts-bar-")),S_(k_(e),"handleAnimationEnd",function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),t&&t()}),S_(k_(e),"handleAnimationStart",function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),t&&t()}),e}return t=i,s=[{key:"renderRectanglesStatically",value:function(e){var t=this,s=this.props.shape,a=LN(this.props);return e&&e.map(function(e,n){var o=v_(v_(v_({},a),e),{},{index:n});return r.createElement(WN,y_({className:"recharts-bar-rectangle"},NN(t.props,e,n),{key:"rectangle-".concat(n)}),i.renderRectangle(s,o))})}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,t=this.props,s=t.data,a=t.layout,n=t.isAnimationActive,i=t.animationBegin,o=t.animationDuration,l=t.animationEasing,c=t.animationId,d=this.state.prevData;return r.createElement(rC,{begin:i,duration:o,isActive:n,easing:l,from:{t:0},to:{t:1},key:"bar-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var n=t.t,i=s.map(function(e,t){var s=d&&d[t];if(s){var r=Tx(s.x,e.x),i=Tx(s.y,e.y),o=Tx(s.width,e.width),l=Tx(s.height,e.height);return v_(v_({},e),{},{x:r(n),y:i(n),width:o(n),height:l(n)})}if("horizontal"===a){var c=Tx(0,e.height)(n);return v_(v_({},e),{},{y:e.y+e.height-c,height:c})}var u=Tx(0,e.width)(n);return v_(v_({},e),{},{width:u})});return r.createElement(WN,null,e.renderRectanglesStatically(i))})}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,s=e.isAnimationActive,r=this.state.prevData;return!(s&&t&&t.length)||r&&mg()(r,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var e=this,t=this.props.data,s=LN(this.props.background);return t.map(function(t,r){t.value;var a=t.background,n=f_(t,x_);if(!a)return null;var o=v_(v_(v_(v_(v_({},n),{},{fill:"#eee"},a),s),NN(e.props,t,r)),{},{index:r,key:"background-bar-".concat(r),className:"recharts-bar-background-rectangle"});return i.renderRectangle(e.props.background,o)})}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.data,n=s.xAxis,i=s.yAxis,o=s.layout,l=DN(s.children,JN);if(!l)return null;var c="vertical"===o?a[0].height/2:a[0].width/2,d=function(e,t){var s=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:s,errorVal:Rk(e,t)}},u={clipPath:e?"url(#clipPath-".concat(t,")"):null};return r.createElement(WN,u,l.map(function(e,t){return r.cloneElement(e,{key:"error-bar-".concat(t),data:a,xAxis:n,yAxis:i,layout:o,offset:c,dataPointFormatter:d})}))}},{key:"render",value:function(){var e=this.props,t=e.hide,s=e.data,a=e.className,n=e.xAxis,i=e.yAxis,o=e.left,l=e.top,c=e.width,d=e.height,u=e.isAnimationActive,h=e.background,m=e.id;if(t||!s||!s.length)return null;var p=this.state.isAnimationFinished,x=Qp()("recharts-bar",a),g=n&&n.allowDataOverflow,f=i&&i.allowDataOverflow,y=g||f,b=Gx()(m)?this.id:m;return r.createElement(WN,{className:x},g||f?r.createElement("defs",null,r.createElement("clipPath",{id:"clipPath-".concat(b)},r.createElement("rect",{x:g?o:o-c/2,y:f?l:l-d/2,width:g?c:2*c,height:f?d:2*d}))):null,r.createElement(WN,{className:"recharts-bar-rectangles",clipPath:y?"url(#clipPath-".concat(b,")"):null},h?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(y,b),(!u||p)&&p_.renderCallByParent(this.props,s))}}],a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}},{key:"renderRectangle",value:function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):Ux()(e)?e(t):r.createElement(pC,t)}}],s&&j_(t.prototype,s),a&&j_(t,a),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);function T_(e){return T_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T_(e)}function P_(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O_(r.key),r)}}function E_(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function D_(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E_(Object(s),!0).forEach(function(t){M_(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E_(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function M_(e,t,s){return(t=O_(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function O_(e){var t=function(e,t){if("object"!==T_(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==T_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===T_(t)?t:String(t)}S_(__,"displayName","Bar"),S_(__,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",isAnimationActive:!Jx.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),S_(__,"getComposedData",function(e){var t=e.props,s=e.item,r=e.barPosition,a=e.bandSize,n=e.xAxis,i=e.yAxis,o=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,d=e.dataStartIndex,u=e.displayedData,h=e.offset,m=function(e,t){if(!e)return null;for(var s=0,r=e.length;s<r;s++)if(e[s].item===t)return e[s].position;return null}(r,s);if(!m)return null;var p=t.layout,x=s.props,g=x.dataKey,f=x.children,y=x.minPointSize,b="horizontal"===p?i:n,v=c?b.scale.domain():null,j=function(e){var t=e.numericAxis,s=t.scale.domain();if("number"===t.type){var r=Math.min(s[0],s[1]),a=Math.max(s[0],s[1]);return r<=0&&a>=0?0:a<0?a:r}return s[0]}({numericAxis:b}),N=DN(f,xC),w=u.map(function(e,t){var r,u,h,x,f,b;if(c?r=function(e,t){if(!t||2!==t.length||!wx(t[0])||!wx(t[1]))return e;var s=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!wx(e[0])||e[0]<s)&&(a[0]=s),(!wx(e[1])||e[1]>r)&&(a[1]=r),a[0]>r&&(a[0]=r),a[1]<s&&(a[1]=s),a}(c[d+t],v):(r=Rk(e,g),px()(r)||(r=[j,r])),"horizontal"===p){var w,k=[i.scale(r[0]),i.scale(r[1])],A=k[0],S=k[1];u=Xk({axis:n,ticks:o,bandSize:a,offset:m.offset,entry:e,index:t}),h=null!==(w=null!==S&&void 0!==S?S:A)&&void 0!==w?w:void 0,x=m.size;var C=A-S;if(f=Number.isNaN(C)?0:C,b={x:u,y:i.y,width:x,height:i.height},Math.abs(y)>0&&Math.abs(f)<Math.abs(y)){var _=jx(f||y)*(Math.abs(y)-Math.abs(f));h-=_,f+=_}}else{var T=[n.scale(r[0]),n.scale(r[1])],P=T[0],E=T[1];if(u=P,h=Xk({axis:i,ticks:l,bandSize:a,offset:m.offset,entry:e,index:t}),x=E-P,f=m.size,b={x:n.x,y:h,width:n.width,height:f},Math.abs(y)>0&&Math.abs(x)<Math.abs(y))x+=jx(x||y)*(Math.abs(y)-Math.abs(x))}return v_(v_(v_({},e),{},{x:u,y:h,width:x,height:f,value:c?r:r[1],payload:e,background:b},N&&N[t]&&N[t].props),{},{tooltipPayload:[nA(s,e)],tooltipPosition:{x:u+x/2,y:h+f/2}})});return v_({data:w,layout:p},h)});var R_=function(e,t){var s=e.x,r=e.y,a=t.x,n=t.y;return{x:Math.min(s,a),y:Math.min(r,n),width:Math.abs(a-s),height:Math.abs(n-r)}},I_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}var t,s,r;return t=e,s=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=t.bandAware,r=t.position;if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a;case"end":var n=this.bandwidth?this.bandwidth():0;return this.scale(e)+n}if(s){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),s=t[0],r=t[t.length-1];return s<=r?e>=s&&e<=r:e>=r&&e<=s}}],r=[{key:"create",value:function(t){return new e(t)}}],s&&P_(t.prototype,s),r&&P_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();M_(I_,"EPS",1e-4);var L_=function(e){var t=Object.keys(e).reduce(function(t,s){return D_(D_({},t),{},M_({},s,I_.create(e[s])))},{});return D_(D_({},t),{},{apply:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s.bandAware,a=s.position;return ug()(e,function(e,s){return t[s].apply(e,{bandAware:r,position:a})})},isInRange:function(e){return Lx()(e,function(e,s){return t[s].isInRange(e)})}})};function F_(e){return F_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F_(e)}function B_(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function z_(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?B_(Object(s),!0).forEach(function(t){U_(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):B_(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function U_(e,t,s){return(t=function(e){var t=function(e,t){if("object"!==F_(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==F_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===F_(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function V_(e,t,s){return function(e){var t=e.width,s=e.height,r=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=r*Math.PI/180,n=Math.atan(s/t),i=a>n&&a<Math.PI-n?s/Math.sin(a):t/Math.cos(a);return Math.abs(i)}({width:e.width+t.width,height:e.height+t.height},s)}function K_(e,t){var s,r,a=e.angle,n=e.ticks,i=e.tickFormatter,o=e.viewBox,l=e.orientation,c=e.minTickGap,d=e.unit,u=e.fontSize,h=e.letterSpacing,m=o.x,p=o.y,x=o.width,g=o.height,f="top"===l||"bottom"===l?"width":"height",y=(n||[]).slice(),b=d&&"width"===f?lg(d,{fontSize:u,letterSpacing:h}):{width:0,height:0},v=y.length,j=v>=2?jx(y[1].coordinate-y[0].coordinate):1;if(1===j?(s="width"===f?m:p,r="width"===f?m+x:p+g):(s="width"===f?m+x:p+g,r="width"===f?m:p),t){var N=n[v-1],w=Ux()(i)?i(N.value,v-1):N.value,k="width"===f?V_(lg(w,{fontSize:u,letterSpacing:h}),b,a):lg(w,{fontSize:u,letterSpacing:h})[f],A=j*(N.coordinate+j*k/2-r);y[v-1]=N=z_(z_({},N),{},{tickCoord:A>0?N.coordinate-A*j:N.coordinate}),j*(N.tickCoord-j*k/2-s)>=0&&j*(N.tickCoord+j*k/2-r)<=0&&(r=N.tickCoord-j*(k/2+c),y[v-1]=z_(z_({},N),{},{isShow:!0}))}for(var S=t?v-1:v,C=0;C<S;C++){var _=y[C],T=Ux()(i)?i(_.value,C):_.value,P="width"===f?V_(lg(T,{fontSize:u,letterSpacing:h}),b,a):lg(T,{fontSize:u,letterSpacing:h})[f];if(0===C){var E=j*(_.coordinate-j*P/2-s);y[C]=_=z_(z_({},_),{},{tickCoord:E<0?_.coordinate-E*j:_.coordinate})}else y[C]=_=z_(z_({},_),{},{tickCoord:_.coordinate});j*(_.tickCoord-j*P/2-s)>=0&&j*(_.tickCoord+j*P/2-r)<=0&&(s=_.tickCoord+j*(P/2+c),y[C]=z_(z_({},_),{},{isShow:!0}))}return y}function W_(e,t,s){var r=e.tick,a=e.ticks,n=e.viewBox,i=e.minTickGap,o=e.orientation,l=e.interval,c=e.tickFormatter,d=e.unit,u=e.angle;if(!a||!a.length||!r)return[];if(wx(l)||Jx.isSsr)return function(e,t){return cg(e,t+1)}(a,"number"===typeof l&&wx(l)?l:0);var h=[];return"equidistantPreserveStart"===l?function(e){for(var t=1,s=cg(e,t,function(e){return e.isShow});t<=e.length;){if(void 0!==s)return s;s=cg(e,++t,function(e){return e.isShow})}return e.slice(0,1)}(h=K_({angle:u,ticks:a,tickFormatter:c,viewBox:n,orientation:o,minTickGap:i,unit:d,fontSize:t,letterSpacing:s})):(h="preserveStart"===l||"preserveStartEnd"===l?K_({angle:u,ticks:a,tickFormatter:c,viewBox:n,orientation:o,minTickGap:i,unit:d,fontSize:t,letterSpacing:s},"preserveStartEnd"===l):function(e){var t,s,r=e.angle,a=e.ticks,n=e.tickFormatter,i=e.viewBox,o=e.orientation,l=e.minTickGap,c=e.unit,d=e.fontSize,u=e.letterSpacing,h=i.x,m=i.y,p=i.width,x=i.height,g="top"===o||"bottom"===o?"width":"height",f=c&&"width"===g?lg(c,{fontSize:d,letterSpacing:u}):{width:0,height:0},y=(a||[]).slice(),b=y.length,v=b>=2?jx(y[1].coordinate-y[0].coordinate):1;1===v?(t="width"===g?h:m,s="width"===g?h+p:m+x):(t="width"===g?h+p:m+x,s="width"===g?h:m);for(var j=b-1;j>=0;j--){var N=y[j],w=Ux()(n)?n(N.value,b-j-1):N.value,k="width"===g?V_(lg(w,{fontSize:d,letterSpacing:u}),f,r):lg(w,{fontSize:d,letterSpacing:u})[g];if(j===b-1){var A=v*(N.coordinate+v*k/2-s);y[j]=N=z_(z_({},N),{},{tickCoord:A>0?N.coordinate-A*v:N.coordinate})}else y[j]=N=z_(z_({},N),{},{tickCoord:N.coordinate});v*(N.tickCoord-v*k/2-t)>=0&&v*(N.tickCoord+v*k/2-s)<=0&&(s=N.tickCoord-v*(k/2+l),y[j]=z_(z_({},N),{},{isShow:!0}))}return y}({angle:u,ticks:a,tickFormatter:c,viewBox:n,orientation:o,minTickGap:i,unit:d,fontSize:t,letterSpacing:s}),h.filter(function(e){return e.isShow}))}function H_(e){return H_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H_(e)}function q_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var r,a,n,i,o=[],l=!0,c=!1;try{if(n=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;l=!1}else for(;!(l=(r=n.call(s)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=s.return&&(i=s.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return G_(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return G_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G_(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}function Y_(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function $_(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Y_(Object(s),!0).forEach(function(t){J_(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Y_(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function J_(e,t,s){return(t=function(e){var t=function(e,t){if("object"!==H_(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==H_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===H_(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Q_(e){return px()(e)&&kx(e[0])&&kx(e[1])?e.join(" ~ "):e}var X_=function(e){var t=e.separator,s=void 0===t?" : ":t,a=e.contentStyle,n=void 0===a?{}:a,i=e.itemStyle,o=void 0===i?{}:i,l=e.labelStyle,c=void 0===l?{}:l,d=e.payload,u=e.formatter,h=e.itemSorter,m=e.wrapperClassName,p=e.labelClassName,x=e.label,g=e.labelFormatter,f=$_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),y=$_({margin:0},c),b=!Gx()(x),v=b?x:"",j=Qp()("recharts-default-tooltip",m),N=Qp()("recharts-tooltip-label",p);return b&&g&&void 0!==d&&null!==d&&(v=g(x,d)),r.createElement("div",{className:j,style:f},r.createElement("p",{className:N,style:y},r.isValidElement(v)?v:"".concat(v)),function(){if(d&&d.length){var e=(h?Kx()(d,h):d).map(function(e,t){if("none"===e.type)return null;var a=$_({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},o),n=e.formatter||u||Q_,i=e.value,l=e.name,c=i,h=l;if(n&&null!=c&&null!=h){var m=n(i,l,e,t,d);if(Array.isArray(m)){var p=q_(m,2);c=p[0],h=p[1]}else c=m}return r.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:a},kx(h)?r.createElement("span",{className:"recharts-tooltip-item-name"},h):null,kx(h)?r.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,r.createElement("span",{className:"recharts-tooltip-item-value"},c),r.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return r.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function Z_(e){return Z_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z_(e)}function eT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function tT(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?eT(Object(s),!0).forEach(function(t){oT(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):eT(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function sT(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lT(r.key),r)}}function rT(e,t){return rT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rT(e,t)}function aT(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(qU){return!1}}();return function(){var s,r=iT(e);if(t){var a=iT(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return function(e,t){if(t&&("object"===Z_(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nT(e)}(this,s)}}function nT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iT(e){return iT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},iT(e)}function oT(e,t,s){return(t=lT(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function lT(e){var t=function(e,t){if("object"!==Z_(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==Z_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Z_(t)?t:String(t)}var cT="recharts-tooltip-wrapper";function dT(e){return e.dataKey}var uT=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rT(e,t)}(i,e);var t,s,a,n=aT(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return oT(nT(e=n.call.apply(n,[this].concat(s))),"state",{boxWidth:-1,boxHeight:-1,dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),oT(nT(e),"handleKeyDown",function(t){"Escape"===t.key&&e.setState({dismissed:!0,dismissedAtCoordinate:tT(tT({},e.state.dismissedAtCoordinate),{},{x:e.props.coordinate.x,y:e.props.coordinate.y})})}),oT(nT(e),"getTranslate",function(t){var s=t.key,r=t.tooltipDimension,a=t.viewBoxDimension,n=e.props,i=n.allowEscapeViewBox,o=n.reverseDirection,l=n.coordinate,c=n.offset,d=n.position,u=n.viewBox;if(d&&wx(d[s]))return d[s];var h=l[s]-r-c,m=l[s]+c;return i[s]?o[s]?h:m:o[s]?h<u[s]?Math.max(m,u[s]):Math.max(h,u[s]):m+r>u[s]+a?Math.max(h,u[s]):Math.max(m,u[s])}),e}return t=i,(s=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"updateBBox",value:function(){var e=this.state,t=e.boxWidth,s=e.boxHeight;if(e.dismissed?(document.removeEventListener("keydown",this.handleKeyDown),this.props.coordinate.x===this.state.dismissedAtCoordinate.x&&this.props.coordinate.y===this.state.dismissedAtCoordinate.y||this.setState({dismissed:!1})):document.addEventListener("keydown",this.handleKeyDown),this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-t)>1||Math.abs(r.height-s)>1)&&this.setState({boxWidth:r.width,boxHeight:r.height})}else-1===t&&-1===s||this.setState({boxWidth:-1,boxHeight:-1})}},{key:"render",value:function(){var e,t,s,a=this,n=this.props,i=n.payload,o=n.isAnimationActive,l=n.animationDuration,c=n.animationEasing,d=n.filterNull,u=function(e,t){return!0===e?XN()(t,dT):Ux()(e)?XN()(t,e):t}(n.payloadUniqBy,d&&i&&i.length?i.filter(function(e){return!Gx()(e.value)}):i),h=u&&u.length,m=this.props,p=m.content,x=m.viewBox,g=m.coordinate,f=m.position,y=m.active,b=m.wrapperStyle,v=tT({pointerEvents:"none",visibility:!this.state.dismissed&&y&&h?"visible":"hidden",position:"absolute",top:0,left:0},b);if(f&&wx(f.x)&&wx(f.y))t=f.x,s=f.y;else{var j=this.state,N=j.boxWidth,w=j.boxHeight;N>0&&w>0&&g?(t=this.getTranslate({key:"x",tooltipDimension:N,viewBoxDimension:x.width}),s=this.getTranslate({key:"y",tooltipDimension:w,viewBoxDimension:x.height})):v.visibility="hidden"}v=tT(tT({},XA({transform:this.props.useTranslate3d?"translate3d(".concat(t,"px, ").concat(s,"px, 0)"):"translate(".concat(t,"px, ").concat(s,"px)")})),v),o&&y&&(v=tT(tT({},XA({transition:"transform ".concat(l,"ms ").concat(c)})),v));var k=Qp()(cT,(oT(e={},"".concat(cT,"-right"),wx(t)&&g&&wx(g.x)&&t>=g.x),oT(e,"".concat(cT,"-left"),wx(t)&&g&&wx(g.x)&&t<g.x),oT(e,"".concat(cT,"-bottom"),wx(s)&&g&&wx(g.y)&&s>=g.y),oT(e,"".concat(cT,"-top"),wx(s)&&g&&wx(g.y)&&s<g.y),e));return r.createElement("div",{tabIndex:-1,role:"dialog",className:k,style:v,ref:function(e){a.wrapperNode=e}},function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):Ux()(e)?r.createElement(e,t):r.createElement(X_,t)}(p,tT(tT({},this.props),{},{payload:u})))}}])&&sT(t.prototype,s),a&&sT(t,a),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);function hT(){}function mT(e,t,s){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+s)/6)}function pT(e){this._context=e}function xT(e){this._context=e}function gT(e){this._context=e}oT(uT,"displayName","Tooltip"),oT(uT,"defaultProps",{active:!1,allowEscapeViewBox:{x:!1,y:!1},reverseDirection:{x:!1,y:!1},offset:10,viewBox:{x:0,y:0,height:0,width:0},coordinate:{x:0,y:0},cursorStyle:{},separator:" : ",wrapperStyle:{},contentStyle:{},itemStyle:{},labelStyle:{},cursor:!0,trigger:"hover",isAnimationActive:!Jx.isSsr,animationEasing:"ease",animationDuration:400,filterNull:!0,useTranslate3d:!1}),pT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mT(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mT(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},xT.prototype={areaStart:hT,areaEnd:hT,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:mT(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},gT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var s=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(s,r):this._context.moveTo(s,r);break;case 3:this._point=4;default:mT(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class fT{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function yT(e){this._context=e}function bT(e){this._context=e}function vT(e){return new bT(e)}function jT(e){return e<0?-1:1}function NT(e,t,s){var r=e._x1-e._x0,a=t-e._x1,n=(e._y1-e._y0)/(r||a<0&&-0),i=(s-e._y1)/(a||r<0&&-0),o=(n*a+i*r)/(r+a);return(jT(n)+jT(i))*Math.min(Math.abs(n),Math.abs(i),.5*Math.abs(o))||0}function wT(e,t){var s=e._x1-e._x0;return s?(3*(e._y1-e._y0)/s-t)/2:t}function kT(e,t,s){var r=e._x0,a=e._y0,n=e._x1,i=e._y1,o=(n-r)/3;e._context.bezierCurveTo(r+o,a+o*t,n-o,i-o*s,n,i)}function AT(e){this._context=e}function ST(e){this._context=new CT(e)}function CT(e){this._context=e}function _T(e){this._context=e}function TT(e){var t,s,r=e.length-1,a=new Array(r),n=new Array(r),i=new Array(r);for(a[0]=0,n[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,n[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,n[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)s=a[t]/n[t-1],n[t]-=s,i[t]-=s*i[t-1];for(a[r-1]=i[r-1]/n[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/n[t];for(n[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)n[t]=2*e[t+1]-a[t+1];return[a,n]}function PT(e,t){this._context=e,this._t=t}function ET(e){return e[0]}function DT(e){return e[1]}function MT(e,t){var s=Mj(!0),r=null,a=vT,n=null,i=qw(o);function o(o){var l,c,d,u=(o=Dj(o)).length,h=!1;for(null==r&&(n=a(d=i())),l=0;l<=u;++l)!(l<u&&s(c=o[l],l,o))===h&&((h=!h)?n.lineStart():n.lineEnd()),h&&n.point(+e(c,l,o),+t(c,l,o));if(d)return n=null,d+""||null}return e="function"===typeof e?e:void 0===e?ET:Mj(e),t="function"===typeof t?t:void 0===t?DT:Mj(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:Mj(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:Mj(+e),o):t},o.defined=function(e){return arguments.length?(s="function"===typeof e?e:Mj(!!e),o):s},o.curve=function(e){return arguments.length?(a=e,null!=r&&(n=a(r)),o):a},o.context=function(e){return arguments.length?(null==e?r=n=null:n=a(r=e),o):r},o}function OT(e,t,s){var r=null,a=Mj(!0),n=null,i=vT,o=null,l=qw(c);function c(c){var d,u,h,m,p,x=(c=Dj(c)).length,g=!1,f=new Array(x),y=new Array(x);for(null==n&&(o=i(p=l())),d=0;d<=x;++d){if(!(d<x&&a(m=c[d],d,c))===g)if(g=!g)u=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=d-1;h>=u;--h)o.point(f[h],y[h]);o.lineEnd(),o.areaEnd()}g&&(f[d]=+e(m,d,c),y[d]=+t(m,d,c),o.point(r?+r(m,d,c):f[d],s?+s(m,d,c):y[d]))}if(p)return o=null,p+""||null}function d(){return MT().defined(a).curve(i).context(n)}return e="function"===typeof e?e:void 0===e?ET:Mj(+e),t="function"===typeof t?t:Mj(void 0===t?0:+t),s="function"===typeof s?s:void 0===s?DT:Mj(+s),c.x=function(t){return arguments.length?(e="function"===typeof t?t:Mj(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:Mj(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:Mj(+e),c):r},c.y=function(e){return arguments.length?(t="function"===typeof e?e:Mj(+e),s=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:Mj(+e),c):t},c.y1=function(e){return arguments.length?(s=null==e?null:"function"===typeof e?e:Mj(+e),c):s},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(s)},c.lineX1=function(){return d().x(r).y(t)},c.defined=function(e){return arguments.length?(a="function"===typeof e?e:Mj(!!e),c):a},c.curve=function(e){return arguments.length?(i=e,null!=n&&(o=i(n)),c):i},c.context=function(e){return arguments.length?(null==e?n=o=null:o=i(n=e),c):n},c}function RT(e){return RT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RT(e)}function IT(){return IT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},IT.apply(this,arguments)}function LT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function FT(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?LT(Object(s),!0).forEach(function(t){BT(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):LT(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function BT(e,t,s){return(t=function(e){var t=function(e,t){if("object"!==RT(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==RT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===RT(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}yT.prototype={areaStart:hT,areaEnd:hT,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},bT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},AT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kT(this,this._t0,wT(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var s=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,kT(this,wT(this,s=NT(this,e,t)),s);break;default:kT(this,this._t0,s=NT(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=s}}},(ST.prototype=Object.create(AT.prototype)).point=function(e,t){AT.prototype.point.call(this,t,e)},CT.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,s,r,a,n){this._context.bezierCurveTo(t,e,r,s,n,a)}},_T.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,s=e.length;if(s)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===s)this._context.lineTo(e[1],t[1]);else for(var r=TT(e),a=TT(t),n=0,i=1;i<s;++n,++i)this._context.bezierCurveTo(r[0][n],a[0][n],r[1][n],a[1][n],e[i],t[i]);(this._line||0!==this._line&&1===s)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},PT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var s=this._x*(1-this._t)+e*this._t;this._context.lineTo(s,this._y),this._context.lineTo(s,t)}}this._x=e,this._y=t}};var zT={curveBasisClosed:function(e){return new xT(e)},curveBasisOpen:function(e){return new gT(e)},curveBasis:function(e){return new pT(e)},curveBumpX:function(e){return new fT(e,!0)},curveBumpY:function(e){return new fT(e,!1)},curveLinearClosed:function(e){return new yT(e)},curveLinear:vT,curveMonotoneX:function(e){return new AT(e)},curveMonotoneY:function(e){return new ST(e)},curveNatural:function(e){return new _T(e)},curveStep:function(e){return new PT(e,.5)},curveStepAfter:function(e){return new PT(e,1)},curveStepBefore:function(e){return new PT(e,0)}},UT=function(e){return e.x===+e.x&&e.y===+e.y},VT=function(e){return e.x},KT=function(e){return e.y},WT=function(e){var t,s=e.type,r=void 0===s?"linear":s,a=e.points,n=void 0===a?[]:a,i=e.baseLine,o=e.layout,l=e.connectNulls,c=void 0!==l&&l,d=function(e,t){if(Ux()(e))return e;var s="curve".concat(xg()(e));return"curveMonotone"!==s&&"curveBump"!==s||!t?zT[s]||vT:zT["".concat(s).concat("vertical"===t?"Y":"X")]}(r,o),u=c?n.filter(function(e){return UT(e)}):n;if(px()(i)){var h=c?i.filter(function(e){return UT(e)}):i,m=u.map(function(e,t){return FT(FT({},e),{},{base:h[t]})});return(t="vertical"===o?OT().y(KT).x1(VT).x0(function(e){return e.base.x}):OT().x(VT).y1(KT).y0(function(e){return e.base.y})).defined(UT).curve(d),t(m)}return(t="vertical"===o&&wx(i)?OT().y(KT).x1(VT).x0(i):wx(i)?OT().x(VT).y1(KT).y0(i):MT().x(VT).y(KT)).defined(UT).curve(d),t(u)},HT=function(e){var t=e.className,s=e.points,a=e.path,n=e.pathRef;if((!s||!s.length)&&!a)return null;var i=s&&s.length?WT(e):a;return r.createElement("path",IT({},LN(e),jN(e),{className:Qp()("recharts-curve",t),d:i,ref:n}))};function qT(e){return qT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qT(e)}var GT=["x","y","top","left","width","height","className"];function YT(){return YT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},YT.apply(this,arguments)}function $T(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function JT(e,t,s){return(t=function(e){var t=function(e,t){if("object"!==qT(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==qT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===qT(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function QT(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var XT=function(e,t,s,r,a,n){return"M".concat(e,",").concat(a,"v").concat(r,"M").concat(n,",").concat(t,"h").concat(s)},ZT=function(e){var t=e.x,s=void 0===t?0:t,a=e.y,n=void 0===a?0:a,i=e.top,o=void 0===i?0:i,l=e.left,c=void 0===l?0:l,d=e.width,u=void 0===d?0:d,h=e.height,m=void 0===h?0:h,p=e.className,x=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$T(Object(s),!0).forEach(function(t){JT(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$T(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({x:s,y:n,top:o,left:c,width:u,height:m},QT(e,GT));return wx(s)&&wx(n)&&wx(u)&&wx(m)&&wx(o)&&wx(c)?r.createElement("path",YT({},LN(x,!0),{className:Qp()("recharts-cross",p),d:XT(s,n,u,m,o,c)})):null};function eP(e){return eP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eP(e)}function tP(){return tP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},tP.apply(this,arguments)}function sP(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function rP(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sP(Object(s),!0).forEach(function(t){aP(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sP(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function aP(e,t,s){return(t=function(e){var t=function(e,t){if("object"!==eP(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==eP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eP(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var nP=function(e){var t=e.cx,s=e.cy,r=e.radius,a=e.angle,n=e.sign,i=e.isExternal,o=e.cornerRadius,l=e.cornerIsExternal,c=o*(i?1:-1)+r,d=Math.asin(o/c)/FC,u=l?a:a+n*d,h=l?a-n*d:a;return{center:zC(t,s,c,u),circleTangency:zC(t,s,r,u),lineTangency:zC(t,s,c*Math.cos(d*FC),h),theta:d}},iP=function(e){var t=e.cx,s=e.cy,r=e.innerRadius,a=e.outerRadius,n=e.startAngle,i=function(e,t){return jx(t-e)*Math.min(Math.abs(t-e),359.999)}(n,e.endAngle),o=n+i,l=zC(t,s,a,n),c=zC(t,s,a,o),d="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(a,",").concat(a,",0,\n    ").concat(+(Math.abs(i)>180),",").concat(+(n>o),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(r>0){var u=zC(t,s,r,n),h=zC(t,s,r,o);d+="L ".concat(h.x,",").concat(h.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(i)>180),",").concat(+(n<=o),",\n            ").concat(u.x,",").concat(u.y," Z")}else d+="L ".concat(t,",").concat(s," Z");return d},oP={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},lP=function(e){var t=rP(rP({},oP),e),s=t.cx,a=t.cy,n=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,h=t.className;if(i<n||d===u)return null;var m,p=Qp()("recharts-sector",h),x=i-n,g=Cx(o,x,0,!0);return m=g>0&&Math.abs(d-u)<360?function(e){var t=e.cx,s=e.cy,r=e.innerRadius,a=e.outerRadius,n=e.cornerRadius,i=e.forceCornerRadius,o=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,d=jx(c-l),u=nP({cx:t,cy:s,radius:a,angle:l,sign:d,cornerRadius:n,cornerIsExternal:o}),h=u.circleTangency,m=u.lineTangency,p=u.theta,x=nP({cx:t,cy:s,radius:a,angle:c,sign:-d,cornerRadius:n,cornerIsExternal:o}),g=x.circleTangency,f=x.lineTangency,y=x.theta,b=o?Math.abs(l-c):Math.abs(l-c)-p-y;if(b<0)return i?"M ".concat(m.x,",").concat(m.y,"\n        a").concat(n,",").concat(n,",0,0,1,").concat(2*n,",0\n        a").concat(n,",").concat(n,",0,0,1,").concat(2*-n,",0\n      "):iP({cx:t,cy:s,innerRadius:r,outerRadius:a,startAngle:l,endAngle:c});var v="M ".concat(m.x,",").concat(m.y,"\n    A").concat(n,",").concat(n,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,"\n    A").concat(a,",").concat(a,",0,").concat(+(b>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(n,",").concat(n,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,"\n  ");if(r>0){var j=nP({cx:t,cy:s,radius:r,angle:l,sign:d,isExternal:!0,cornerRadius:n,cornerIsExternal:o}),N=j.circleTangency,w=j.lineTangency,k=j.theta,A=nP({cx:t,cy:s,radius:r,angle:c,sign:-d,isExternal:!0,cornerRadius:n,cornerIsExternal:o}),S=A.circleTangency,C=A.lineTangency,_=A.theta,T=o?Math.abs(l-c):Math.abs(l-c)-k-_;if(T<0&&0===n)return"".concat(v,"L").concat(t,",").concat(s,"Z");v+="L".concat(C.x,",").concat(C.y,"\n      A").concat(n,",").concat(n,",0,0,").concat(+(d<0),",").concat(S.x,",").concat(S.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(T>180),",").concat(+(d>0),",").concat(N.x,",").concat(N.y,"\n      A").concat(n,",").concat(n,",0,0,").concat(+(d<0),",").concat(w.x,",").concat(w.y,"Z")}else v+="L".concat(t,",").concat(s,"Z");return v}({cx:s,cy:a,innerRadius:n,outerRadius:i,cornerRadius:Math.min(g,x/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):iP({cx:s,cy:a,innerRadius:n,outerRadius:i,startAngle:d,endAngle:u}),r.createElement("path",tP({},LN(t,!0),{className:p,d:m,role:"img"}))};function cP(){return cP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},cP.apply(this,arguments)}var dP=function(e){var t=e.cx,s=e.cy,a=e.r,n=e.className,i=Qp()("recharts-dot",n);return t===+t&&s===+s&&a===+a?r.createElement("circle",cP({},LN(e),jN(e),{className:i,cx:t,cy:s,r:a})):null},uP=["viewBox"],hP=["viewBox"],mP=["ticks"];function pP(e){return pP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pP(e)}function xP(){return xP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},xP.apply(this,arguments)}function gP(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function fP(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?gP(Object(s),!0).forEach(function(t){wP(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):gP(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function yP(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function bP(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kP(r.key),r)}}function vP(e,t){return vP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vP(e,t)}function jP(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(qU){return!1}}();return function(){var s,r=NP(e);if(t){var a=NP(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return function(e,t){if(t&&("object"===pP(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,s)}}function NP(e){return NP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},NP(e)}function wP(e,t,s){return(t=kP(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function kP(e){var t=function(e,t){if("object"!==pP(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==pP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===pP(t)?t:String(t)}var AP=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vP(e,t)}(i,e);var t,s,a,n=jP(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=n.call(this,e)).state={fontSize:"",letterSpacing:""},t}return t=i,s=[{key:"shouldComponentUpdate",value:function(e,t){var s=e.viewBox,r=yP(e,uP),a=this.props,n=a.viewBox,i=yP(a,hP);return!xN(s,n)||!xN(r,i)||!xN(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,s,r,a,n,i,o=this.props,l=o.x,c=o.y,d=o.width,u=o.height,h=o.orientation,m=o.tickSize,p=o.mirror,x=o.tickMargin,g=p?-1:1,f=e.tickSize||m,y=wx(e.tickCoord)?e.tickCoord:e.coordinate;switch(h){case"top":t=s=e.coordinate,i=(r=(a=c+ +!p*u)-g*f)-g*x,n=y;break;case"left":r=a=e.coordinate,n=(t=(s=l+ +!p*d)-g*f)-g*x,i=y;break;case"right":r=a=e.coordinate,n=(t=(s=l+ +p*d)+g*f)+g*x,i=y;break;default:t=s=e.coordinate,i=(r=(a=c+ +p*u)+g*f)+g*x,n=y}return{line:{x1:t,y1:r,x2:s,y2:a},tick:{x:n,y:i}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,s=t.orientation,r=t.mirror;switch(s){case"left":e=r?"start":"end";break;case"right":e=r?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,s=e.mirror,r="end";switch(t){case"left":case"right":r="middle";break;case"top":r=s?"start":"end";break;default:r=s?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,s=e.y,a=e.width,n=e.height,i=e.orientation,o=e.mirror,l=e.axisLine,c=fP(fP(fP({},LN(this.props)),LN(l)),{},{fill:"none"});if("top"===i||"bottom"===i){var d=+("top"===i&&!o||"bottom"===i&&o);c=fP(fP({},c),{},{x1:t,y1:s+d*n,x2:t+a,y2:s+d*n})}else{var u=+("left"===i&&!o||"right"===i&&o);c=fP(fP({},c),{},{x1:t+u*a,y1:s,x2:t+u*a,y2:s+n})}return r.createElement("line",xP({},c,{className:Qp()("recharts-cartesian-axis-line",hx()(l,"className"))}))}},{key:"renderTicks",value:function(e,t,s){var a=this,n=this.props,o=n.tickLine,l=n.stroke,c=n.tick,d=n.tickFormatter,u=n.unit,h=W_(fP(fP({},this.props),{},{ticks:e}),t,s),m=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),x=LN(this.props),g=LN(c),f=fP(fP({},x),{},{fill:"none"},LN(o)),y=h.map(function(e,t){var s=a.getTickLineCoord(e),n=s.line,y=s.tick,b=fP(fP(fP(fP({textAnchor:m,verticalAnchor:p},x),{},{stroke:"none",fill:l},g),y),{},{index:t,payload:e,visibleTicksCount:h.length,tickFormatter:d});return r.createElement(WN,xP({className:"recharts-cartesian-axis-tick",key:"tick-".concat(t)},NN(a.props,e,t)),o&&r.createElement("line",xP({},f,n,{className:Qp()("recharts-cartesian-axis-tick-line",hx()(o,"className"))})),c&&i.renderTickItem(c,b,"".concat(Ux()(d)?d(e.value,t):e.value).concat(u||"")))});return r.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var e=this,t=this.props,s=t.axisLine,a=t.width,n=t.height,i=t.ticksGenerator,o=t.className;if(t.hide)return null;var l=this.props,c=l.ticks,d=yP(l,mP),u=c;return Ux()(i)&&(u=c&&c.length>0?i(this.props):i(d)),a<=0||n<=0||!u||!u.length?null:r.createElement(WN,{className:Qp()("recharts-cartesian-axis",o),ref:function(t){e.layerReference=t}},s&&this.renderAxisLine(),this.renderTicks(u,this.state.fontSize,this.state.letterSpacing),t_.renderCallByParent(this.props))}}],a=[{key:"renderTickItem",value:function(e,t,s){return r.isValidElement(e)?r.cloneElement(e,t):Ux()(e)?e(t):r.createElement(EC,xP({},t,{className:"recharts-cartesian-axis-tick-value"}),s)}}],s&&bP(t.prototype,s),a&&bP(t,a),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.Component);function SP(e){return SP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SP(e)}function CP(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function _P(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?CP(Object(s),!0).forEach(function(t){TP(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):CP(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function TP(e,t,s){return(t=function(e){var t=function(e,t){if("object"!==SP(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==SP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===SP(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}wP(AP,"displayName","CartesianAxis"),wP(AP,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var PP=["Webkit","Moz","O","ms"];function EP(e){return EP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EP(e)}function DP(){return DP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},DP.apply(this,arguments)}function MP(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function OP(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?MP(Object(s),!0).forEach(function(t){zP(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):MP(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function RP(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,UP(r.key),r)}}function IP(e,t){return IP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},IP(e,t)}function LP(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(qU){return!1}}();return function(){var s,r=BP(e);if(t){var a=BP(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return function(e,t){if(t&&("object"===EP(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return FP(e)}(this,s)}}function FP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BP(e){return BP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},BP(e)}function zP(e,t,s){return(t=UP(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function UP(e){var t=function(e,t){if("object"!==EP(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==EP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===EP(t)?t:String(t)}var VP=function(e){return e.changedTouches&&!!e.changedTouches.length},KP=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IP(e,t)}(i,e);var t,s,a,n=LP(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),zP(FP(t=n.call(this,e)),"handleDrag",function(e){t.leaveTimer&&(clearTimeout(t.leaveTimer),t.leaveTimer=null),t.state.isTravellerMoving?t.handleTravellerMove(e):t.state.isSlideMoving&&t.handleSlideDrag(e)}),zP(FP(t),"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleDrag(e.changedTouches[0])}),zP(FP(t),"handleDragEnd",function(){t.setState({isTravellerMoving:!1,isSlideMoving:!1}),t.detachDragEndListener()}),zP(FP(t),"handleLeaveWrapper",function(){(t.state.isTravellerMoving||t.state.isSlideMoving)&&(t.leaveTimer=window.setTimeout(t.handleDragEnd,t.props.leaveTimeOut))}),zP(FP(t),"handleEnterSlideOrTraveller",function(){t.setState({isTextActive:!0})}),zP(FP(t),"handleLeaveSlideOrTraveller",function(){t.setState({isTextActive:!1})}),zP(FP(t),"handleSlideDragStart",function(e){var s=VP(e)?e.changedTouches[0]:e;t.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),t.attachDragEndListener()}),t.travellerDragStartHandlers={startX:t.handleTravellerDragStart.bind(FP(t),"startX"),endX:t.handleTravellerDragStart.bind(FP(t),"endX")},t.state={},t}return t=i,s=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(e){var t=e.startX,s=e.endX,r=this.state.scaleValues,a=this.props,n=a.gap,o=a.data.length-1,l=Math.min(t,s),c=Math.max(t,s),d=i.getIndexInRange(r,l),u=i.getIndexInRange(r,c);return{startIndex:d-d%n,endIndex:u===o?o:u-u%n}}},{key:"getTextOfTick",value:function(e){var t=this.props,s=t.data,r=t.tickFormatter,a=t.dataKey,n=Rk(s[e],a,e);return Ux()(r)?r(n,e):n}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,s=t.slideMoveStartX,r=t.startX,a=t.endX,n=this.props,i=n.x,o=n.width,l=n.travellerWidth,c=n.startIndex,d=n.endIndex,u=n.onChange,h=e.pageX-s;h>0?h=Math.min(h,i+o-l-a,i+o-l-r):h<0&&(h=Math.max(h,i-r,i-a));var m=this.getIndex({startX:r+h,endX:a+h});m.startIndex===c&&m.endIndex===d||!u||u(m),this.setState({startX:r+h,endX:a+h,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var s=VP(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t,s=this.state,r=s.brushMoveStartX,a=s.movingTravellerId,n=s.endX,i=s.startX,o=this.state[a],l=this.props,c=l.x,d=l.width,u=l.travellerWidth,h=l.onChange,m=l.gap,p=l.data,x={startX:this.state.startX,endX:this.state.endX},g=e.pageX-r;g>0?g=Math.min(g,c+d-u-o):g<0&&(g=Math.max(g,c-o)),x[a]=o+g;var f=this.getIndex(x),y=f.startIndex,b=f.endIndex;this.setState((zP(t={},a,o+g),zP(t,"brushMoveStartX",e.pageX),t),function(){h&&function(){var e=p.length-1;return"startX"===a&&(n>i?y%m===0:b%m===0)||n<i&&b===e||"endX"===a&&(n>i?b%m===0:y%m===0)||n>i&&b===e}()&&h(f)})}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var s=this,r=this.state,a=r.scaleValues,n=r.startX,i=r.endX,o=this.state[t],l=a.indexOf(o);if(-1!==l){var c=l+e;if(!(-1===c||c>=a.length)){var d=a[c];"startX"===t&&d>=i||"endX"===t&&d<=n||this.setState(zP({},t,d),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,s=e.y,a=e.width,n=e.height,i=e.fill,o=e.stroke;return r.createElement("rect",{stroke:o,fill:i,x:t,y:s,width:a,height:n})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,s=e.y,a=e.width,n=e.height,i=e.data,o=e.children,l=e.padding,c=r.Children.only(o);return c?r.cloneElement(c,{x:t,y:s,width:a,height:n,margin:l,compact:!0,data:i}):null}},{key:"renderTravellerLayer",value:function(e,t){var s=this,a=this.props,n=a.y,o=a.travellerWidth,l=a.height,c=a.traveller,d=Math.max(e,this.props.x),u=OP(OP({},LN(this.props)),{},{x:d,y:n,width:o,height:l});return r.createElement(WN,{tabIndex:0,role:"slider",className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[t],onTouchStart:this.travellerDragStartHandlers[t],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),s.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,t))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},i.renderTraveller(c,u))}},{key:"renderSlide",value:function(e,t){var s=this.props,a=s.y,n=s.height,i=s.stroke,o=s.travellerWidth,l=Math.min(e,t)+o,c=Math.max(Math.abs(t-e)-o,0);return r.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:i,fillOpacity:.2,x:l,y:a,width:c,height:n})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,s=e.endIndex,a=e.y,n=e.height,i=e.travellerWidth,o=e.stroke,l=this.state,c=l.startX,d=l.endX,u={pointerEvents:"none",fill:o};return r.createElement(WN,{className:"recharts-brush-texts"},r.createElement(EC,DP({textAnchor:"end",verticalAnchor:"middle",x:Math.min(c,d)-5,y:a+n/2},u),this.getTextOfTick(t)),r.createElement(EC,DP({textAnchor:"start",verticalAnchor:"middle",x:Math.max(c,d)+i+5,y:a+n/2},u),this.getTextOfTick(s)))}},{key:"render",value:function(){var e=this.props,t=e.data,s=e.className,a=e.children,n=e.x,i=e.y,o=e.width,l=e.height,c=e.alwaysShowText,d=this.state,u=d.startX,h=d.endX,m=d.isTextActive,p=d.isSlideMoving,x=d.isTravellerMoving,g=d.isTravellerFocused;if(!t||!t.length||!wx(n)||!wx(i)||!wx(o)||!wx(l)||o<=0||l<=0)return null;var f=Qp()("recharts-brush",s),y=1===r.Children.count(a),b=function(e,t){if(!e)return null;var s=e.replace(/(\w)/,function(e){return e.toUpperCase()}),r=PP.reduce(function(e,r){return _P(_P({},e),{},TP({},r+s,t))},{});return r[e]=t,r}("userSelect","none");return r.createElement(WN,{className:f,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),y&&this.renderPanorama(),this.renderSlide(u,h),this.renderTravellerLayer(u,"startX"),this.renderTravellerLayer(h,"endX"),(m||p||x||g||c)&&this.renderText())}}],a=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,s=e.y,a=e.width,n=e.height,i=e.stroke,o=Math.floor(s+n/2)-1;return r.createElement(r.Fragment,null,r.createElement("rect",{x:t,y:s,width:a,height:n,fill:i,stroke:"none"}),r.createElement("line",{x1:t+1,y1:o,x2:t+a-1,y2:o,fill:"none",stroke:"#fff"}),r.createElement("line",{x1:t+1,y1:o+2,x2:t+a-1,y2:o+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):Ux()(e)?e(t):i.renderDefaultTraveller(t)}},{key:"getDerivedStateFromProps",value:function(e,t){var s=e.data,r=e.width,a=e.x,n=e.travellerWidth,i=e.updateId,o=e.startIndex,l=e.endIndex;if(s!==t.prevData||i!==t.prevUpdateId)return OP({prevData:s,prevTravellerWidth:n,prevUpdateId:i,prevX:a,prevWidth:r},s&&s.length?function(e){var t=e.data,s=e.startIndex,r=e.endIndex,a=e.x,n=e.width,i=e.travellerWidth;if(!t||!t.length)return{};var o=t.length,l=Mg().domain(Hx()(0,o)).range([a,a+n-i]),c=l.domain().map(function(e){return l(e)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(s),endX:l(r),scale:l,scaleValues:c}}({data:s,width:r,x:a,travellerWidth:n,startIndex:o,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(r!==t.prevWidth||a!==t.prevX||n!==t.prevTravellerWidth)){t.scale.range([a,a+r-n]);var c=t.scale.domain().map(function(e){return t.scale(e)});return{prevData:s,prevTravellerWidth:n,prevUpdateId:i,prevX:a,prevWidth:r,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var s=0,r=e.length-1;r-s>1;){var a=Math.floor((s+r)/2);e[a]>t?r=a:s=a}return t>=e[r]?r:s}}],s&&RP(t.prototype,s),a&&RP(t,a),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);zP(KP,"displayName","Brush"),zP(KP,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var WP=function(e,t){var s=e.alwaysShow,r=e.ifOverflow;return s&&(r="extendDomain"),r===t};function HP(e){return HP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HP(e)}function qP(){return qP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},qP.apply(this,arguments)}function GP(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function YP(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?GP(Object(s),!0).forEach(function(t){$P(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):GP(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function $P(e,t,s){return(t=function(e){var t=function(e,t){if("object"!==HP(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==HP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===HP(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function JP(e){var t=e.x,s=e.y,a=e.r,n=e.alwaysShow,i=e.clipPathId,o=kx(t),l=kx(s);if(Ex(void 0===n,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!o||!l)return null;var c=function(e){var t=e.x,s=e.y,r=e.xAxis,a=e.yAxis,n=L_({x:r.scale,y:a.scale}),i=n.apply({x:t,y:s},{bandAware:!0});return WP(e,"discard")&&!n.isInRange(i)?null:i}(e);if(!c)return null;var d=c.x,u=c.y,h=e.shape,m=e.className,p=YP(YP({clipPath:WP(e,"hidden")?"url(#".concat(i,")"):void 0},LN(e,!0)),{},{cx:d,cy:u});return r.createElement(WN,{className:Qp()("recharts-reference-dot",m)},JP.renderDot(h,p),t_.renderCallByParent(e,{x:d-a,y:u-a,width:2*a,height:2*a}))}JP.displayName="ReferenceDot",JP.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1},JP.renderDot=function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):Ux()(e)?e(t):r.createElement(dP,qP({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))};var QP=s(4597),XP=s.n(QP);function ZP(e){return ZP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZP(e)}function eE(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function tE(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?eE(Object(s),!0).forEach(function(t){sE(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):eE(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function sE(e,t,s){return(t=function(e){var t=function(e,t){if("object"!==ZP(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==ZP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ZP(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function rE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var r,a,n,i,o=[],l=!0,c=!1;try{if(n=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;l=!1}else for(;!(l=(r=n.call(s)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=s.return&&(i=s.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return aE(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return aE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aE(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}function nE(){return nE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},nE.apply(this,arguments)}function iE(e){var t=e.x,s=e.y,a=e.segment,n=e.xAxis,i=e.yAxis,o=e.shape,l=e.className,c=e.alwaysShow,d=e.clipPathId;Ex(void 0===c,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=function(e,t,s,r,a){var n=a.viewBox,i=n.x,o=n.y,l=n.width,c=n.height,d=a.position;if(s){var u=a.y,h=a.yAxis.orientation,m=e.y.apply(u,{position:d});if(WP(a,"discard")&&!e.y.isInRange(m))return null;var p=[{x:i+l,y:m},{x:i,y:m}];return"left"===h?p.reverse():p}if(t){var x=a.x,g=a.xAxis.orientation,f=e.x.apply(x,{position:d});if(WP(a,"discard")&&!e.x.isInRange(f))return null;var y=[{x:f,y:o+c},{x:f,y:o}];return"top"===g?y.reverse():y}if(r){var b=a.segment.map(function(t){return e.apply(t,{position:d})});return WP(a,"discard")&&XP()(b,function(t){return!e.isInRange(t)})?null:b}return null}(L_({x:n.scale,y:i.scale}),kx(t),kx(s),a&&2===a.length,e);if(!u)return null;var h=rE(u,2),m=h[0],p=m.x,x=m.y,g=h[1],f=g.x,y=g.y,b=tE(tE({clipPath:WP(e,"hidden")?"url(#".concat(d,")"):void 0},LN(e,!0)),{},{x1:p,y1:x,x2:f,y2:y});return r.createElement(WN,{className:Qp()("recharts-reference-line",l)},function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):Ux()(e)?e(t):r.createElement("line",nE({},t,{className:"recharts-reference-line-line"}))}(o,b),t_.renderCallByParent(e,function(e){var t=e.x1,s=e.y1,r=e.x2,a=e.y2;return R_({x:t,y:s},{x:r,y:a})}({x1:p,y1:x,x2:f,y2:y})))}function oE(e){return oE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oE(e)}function lE(){return lE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},lE.apply(this,arguments)}function cE(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function dE(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?cE(Object(s),!0).forEach(function(t){uE(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):cE(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function uE(e,t,s){return(t=function(e){var t=function(e,t){if("object"!==oE(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==oE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===oE(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}iE.displayName="ReferenceLine",iE.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function hE(e){var t=e.x1,s=e.x2,a=e.y1,n=e.y2,i=e.className,o=e.alwaysShow,l=e.clipPathId;Ex(void 0===o,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var c=kx(t),d=kx(s),u=kx(a),h=kx(n),m=e.shape;if(!c&&!d&&!u&&!h&&!m)return null;var p=function(e,t,s,r,a){var n=a.x1,i=a.x2,o=a.y1,l=a.y2,c=a.xAxis,d=a.yAxis;if(!c||!d)return null;var u=L_({x:c.scale,y:d.scale}),h={x:e?u.x.apply(n,{position:"start"}):u.x.rangeMin,y:s?u.y.apply(o,{position:"start"}):u.y.rangeMin},m={x:t?u.x.apply(i,{position:"end"}):u.x.rangeMax,y:r?u.y.apply(l,{position:"end"}):u.y.rangeMax};return!WP(a,"discard")||u.isInRange(h)&&u.isInRange(m)?R_(h,m):null}(c,d,u,h,e);if(!p&&!m)return null;var x=WP(e,"hidden")?"url(#".concat(l,")"):void 0;return r.createElement(WN,{className:Qp()("recharts-reference-area",i)},hE.renderRect(m,dE(dE({clipPath:x},LN(e,!0)),p)),t_.renderCallByParent(e,p))}function mE(e){return function(e){if(Array.isArray(e))return pE(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return pE(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return pE(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pE(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}hE.displayName="ReferenceArea",hE.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1},hE.renderRect=function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):Ux()(e)?e(t):r.createElement(pC,lE({},t,{className:"recharts-reference-area-rect"}))};var xE=function(e,t,s,r,a){var n=DN(e,iE),i=DN(e,JP),o=[].concat(mE(n),mE(i)),l=DN(e,hE),c="".concat(r,"Id"),d=r[0],u=t;if(o.length&&(u=o.reduce(function(e,t){if(t.props[c]===s&&WP(t.props,"extendDomain")&&wx(t.props[d])){var r=t.props[d];return[Math.min(e[0],r),Math.max(e[1],r)]}return e},u)),l.length){var h="".concat(d,"1"),m="".concat(d,"2");u=l.reduce(function(e,t){if(t.props[c]===s&&WP(t.props,"extendDomain")&&wx(t.props[h])&&wx(t.props[m])){var r=t.props[h],a=t.props[m];return[Math.min(e[0],r,a),Math.max(e[1],r,a)]}return e},u)}return a&&a.length&&(u=a.reduce(function(e,t){return wx(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e},u)),u},gE=s(7283),fE=new(s.n(gE)());fE.setMaxListeners&&fE.setMaxListeners(10);var yE="recharts.syncMouseEvents";function bE(e){return bE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bE(e)}function vE(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,NE(r.key),r)}}function jE(e,t,s){return(t=NE(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function NE(e){var t=function(e,t){if("object"!==bE(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==bE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===bE(t)?t:String(t)}var wE=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),jE(this,"activeIndex",0),jE(this,"coordinateList",[]),jE(this,"layout","horizontal")}var t,s,r;return t=e,s=[{key:"setDetails",value:function(e){var t=e.coordinateList,s=void 0===t?[]:t,r=e.container,a=void 0===r?null:r,n=e.layout,i=void 0===n?null:n,o=e.offset,l=void 0===o?null:o,c=e.mouseHandlerCallback,d=void 0===c?null:c;this.coordinateList=null!==s&&void 0!==s?s:this.coordinateList,this.container=null!==a&&void 0!==a?a:this.container,this.layout=null!==i&&void 0!==i?i:this.layout,this.offset=null!==l&&void 0!==l?l:this.offset,this.mouseHandlerCallback=null!==d&&void 0!==d?d:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"spoofMouse",value:function(){if("horizontal"===this.layout&&0!==this.coordinateList.length){var e=this.container.getBoundingClientRect(),t=e.x,s=e.y,r=e.height,a=t+this.coordinateList[this.activeIndex].coordinate,n=s+this.offset.top+r/2;this.mouseHandlerCallback({pageX:a,pageY:n})}}}],s&&vE(t.prototype,s),r&&vE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),kE=["item"],AE=["children","className","width","height","style","compact","title","desc"];function SE(e){return SE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SE(e)}function CE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var r,a,n,i,o=[],l=!0,c=!1;try{if(n=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;l=!1}else for(;!(l=(r=n.call(s)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=s.return&&(i=s.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||IE(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _E(){return _E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},_E.apply(this,arguments)}function TE(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function PE(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,UE(r.key),r)}}function EE(e,t){return EE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},EE(e,t)}function DE(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(qU){return!1}}();return function(){var s,r=OE(e);if(t){var a=OE(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return function(e,t){if(t&&("object"===SE(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ME(e)}(this,s)}}function ME(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OE(e){return OE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},OE(e)}function RE(e){return function(e){if(Array.isArray(e))return LE(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||IE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IE(e,t){if(e){if("string"===typeof e)return LE(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?LE(e,t):void 0}}function LE(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}function FE(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function BE(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?FE(Object(s),!0).forEach(function(t){zE(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):FE(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function zE(e,t,s){return(t=UE(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function UE(e){var t=function(e,t){if("object"!==SE(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==SE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===SE(t)?t:String(t)}var VE={xAxis:["bottom","top"],yAxis:["left","right"]},KE={x:0,y:0},WE=Number.isFinite?Number.isFinite:isFinite,HE="function"===typeof requestAnimationFrame?requestAnimationFrame:"function"===typeof setImmediate?setImmediate:setTimeout,qE="function"===typeof cancelAnimationFrame?cancelAnimationFrame:"function"===typeof clearImmediate?clearImmediate:clearTimeout,GE=function(e,t,s){var r=t.graphicalItems,a=t.dataStartIndex,n=t.dataEndIndex,i=(r||[]).reduce(function(e,t){var s=t.props.data;return s&&s.length?[].concat(RE(e),RE(s)):e},[]);return i&&i.length>0?i:s&&s.props&&s.props.data&&s.props.data.length>0?s.props.data:e&&e.length&&wx(a)&&wx(n)?e.slice(a,n+1):[]};function YE(e){return"number"===e?[0,"auto"]:void 0}var $E=function(e,t,s,r){var a=e.graphicalItems,n=e.tooltipAxis,i=GE(t,e);return s<0||!a||!a.length||s>=i.length?null:a.reduce(function(e,t){if(t.props.hide)return e;var a,o=t.props.data;n.dataKey&&!n.allowDuplicatedCategory?a=Px(void 0===o?i:o,n.dataKey,r):a=o&&o[s]||i[s];return a?[].concat(RE(e),[nA(t,a)]):e},[])},JE=function(e,t,s,r){var a=r||{x:e.chartX,y:e.chartY},n=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(a,s),i=e.orderedTooltipTicks,o=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,n=-1,i=null!==(t=null===s||void 0===s?void 0:s.length)&&void 0!==t?t:0;if(i<=1)return 0;if(a&&"angleAxis"===a.axisType&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var o=a.range,l=0;l<i;l++){var c=l>0?r[l-1].coordinate:r[i-1].coordinate,d=r[l].coordinate,u=l>=i-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(jx(d-c)!==jx(u-d)){var m=[];if(jx(u-d)===jx(o[1]-o[0])){h=u;var p=d+o[1]-o[0];m[0]=Math.min(p,(p+c)/2),m[1]=Math.max(p,(p+c)/2)}else{h=c;var x=u+o[1]-o[0];m[0]=Math.min(d,(x+d)/2),m[1]=Math.max(d,(x+d)/2)}var g=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>g[0]&&e<=g[1]||e>=m[0]&&e<=m[1]){n=r[l].index;break}}else{var f=Math.min(c,u),y=Math.max(c,u);if(e>(f+d)/2&&e<=(y+d)/2){n=r[l].index;break}}}else for(var b=0;b<i;b++)if(0===b&&e<=(s[b].coordinate+s[b+1].coordinate)/2||b>0&&b<i-1&&e>(s[b].coordinate+s[b-1].coordinate)/2&&e<=(s[b].coordinate+s[b+1].coordinate)/2||b===i-1&&e>(s[b].coordinate+s[b-1].coordinate)/2){n=s[b].index;break}return n}(n,i,l,o);if(c>=0&&l){var d=l[c]&&l[c].value,u=$E(e,t,c,d),h=function(e,t,s,r){var a=t.find(function(e){return e&&e.index===s});if(a){if("horizontal"===e)return{x:a.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:a.coordinate};if("centric"===e){var n=a.coordinate,i=r.radius;return BE(BE(BE({},r),zC(r.cx,r.cy,i,n)),{},{angle:n,radius:i})}var o=a.coordinate,l=r.angle;return BE(BE(BE({},r),zC(r.cx,r.cy,o,l)),{},{angle:l,radius:o})}return KE}(s,i,c,a);return{activeTooltipIndex:c,activeLabel:d,activePayload:u,activeCoordinate:h}}return null},QE=function(e,t){var s=t.axes,r=t.graphicalItems,a=t.axisType,n=t.axisIdKey,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,d=e.children,u=e.stackOffset,h=Uk(c,a),m=s.reduce(function(t,s){var m,p=s.props,x=p.type,g=p.dataKey,f=p.allowDataOverflow,y=p.allowDuplicatedCategory,b=p.scale,v=p.ticks,j=p.includeHidden,N=s.props[n];if(t[N])return t;var w,k,A,S=GE(e.data,{graphicalItems:r.filter(function(e){return e.props[n]===N}),dataStartIndex:o,dataEndIndex:l}),C=S.length;(function(e,t,s){if("number"===s&&!0===t&&Array.isArray(e)){var r=null===e||void 0===e?void 0:e[0],a=null===e||void 0===e?void 0:e[1];if(r&&a&&wx(r)&&wx(a))return!0}return!1})(s.props.domain,f,x)&&(w=sA(s.props.domain,null,f),!h||"number"!==x&&"auto"===b||(A=Ik(S,g,"category")));var _=YE(x);if(!w||0===w.length){var T,P=null!==(T=s.props.domain)&&void 0!==T?T:_;if(g){if(w=Ik(S,g,x),"category"===x&&h){var E=function(e){if(!px()(e))return!1;for(var t=e.length,s={},r=0;r<t;r++){if(s[e[r]])return!0;s[e[r]]=!0}return!1}(w);y&&E?(k=w,w=Hx()(0,C)):y||(w=aA(P,w,s).reduce(function(e,t){return e.indexOf(t)>=0?e:[].concat(RE(e),[t])},[]))}else if("category"===x)w=y?w.filter(function(e){return""!==e&&!Gx()(e)}):aA(P,w,s).reduce(function(e,t){return e.indexOf(t)>=0||""===t||Gx()(t)?e:[].concat(RE(e),[t])},[]);else if("number"===x){var D=function(e,t,s,r,a){var n=t.map(function(t){return Bk(e,t,s,a,r)}).filter(function(e){return!Gx()(e)});return n&&n.length?n.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]):null}(S,r.filter(function(e){return e.props[n]===N&&(j||!e.props.hide)}),g,a,c);D&&(w=D)}!h||"number"!==x&&"auto"===b||(A=Ik(S,g,"category"))}else w=h?Hx()(0,C):i&&i[N]&&i[N].hasStack&&"number"===x?"expand"===u?[0,1]:Zk(i[N].stackGroups,o,l):zk(S,r.filter(function(e){return e.props[n]===N&&(j||!e.props.hide)}),x,c,!0);if("number"===x)w=xE(d,w,N,a,v),P&&(w=sA(P,w,f));else if("category"===x&&P){var M=P;w.every(function(e){return M.indexOf(e)>=0})&&(w=M)}}return BE(BE({},t),{},zE({},N,BE(BE({},s.props),{},{axisType:a,domain:w,categoricalDomain:A,duplicateDomain:k,originalDomain:null!==(m=s.props.domain)&&void 0!==m?m:_,isCategorical:h,layout:c})))},{});return m},XE=function(e,t){var s=t.axisType,r=void 0===s?"xAxis":s,a=t.AxisComp,n=t.graphicalItems,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.children,d="".concat(r,"Id"),u=DN(c,a),h={};return u&&u.length?h=QE(e,{axes:u,graphicalItems:n,axisType:r,axisIdKey:d,stackGroups:i,dataStartIndex:o,dataEndIndex:l}):n&&n.length&&(h=function(e,t){var s=t.graphicalItems,r=t.Axis,a=t.axisType,n=t.axisIdKey,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,d=e.children,u=GE(e.data,{graphicalItems:s,dataStartIndex:o,dataEndIndex:l}),h=u.length,m=Uk(c,a),p=-1;return s.reduce(function(e,t){var x,g=t.props[n],f=YE("number");return e[g]?e:(p++,m?x=Hx()(0,h):i&&i[g]&&i[g].hasStack?(x=Zk(i[g].stackGroups,o,l),x=xE(d,x,g,a)):(x=sA(f,zk(u,s.filter(function(e){return e.props[n]===g&&!e.props.hide}),"number",c),r.defaultProps.allowDataOverflow),x=xE(d,x,g,a)),BE(BE({},e),{},zE({},g,BE(BE({axisType:a},r.defaultProps),{},{hide:!0,orientation:hx()(VE,"".concat(a,".").concat(p%2),null),domain:x,originalDomain:f,isCategorical:m,layout:c}))))},{})}(e,{Axis:a,graphicalItems:n,axisType:r,axisIdKey:d,stackGroups:i,dataStartIndex:o,dataEndIndex:l})),h},ZE=function(e){var t,s,r=e.children,a=e.defaultShowTooltip,n=MN(r,KP);return{chartX:0,chartY:0,dataStartIndex:n&&n.props&&n.props.startIndex||0,dataEndIndex:void 0!==(null===n||void 0===n||null===(t=n.props)||void 0===t?void 0:t.endIndex)?null===n||void 0===n||null===(s=n.props)||void 0===s?void 0:s.endIndex:e.data&&e.data.length-1||0,activeTooltipIndex:-1,isTooltipActive:!Gx()(a)&&a}},eD=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},tD=function(e,t){var s=e.props,r=(e.graphicalItems,e.xAxisMap),a=void 0===r?{}:r,n=e.yAxisMap,i=void 0===n?{}:n,o=s.width,l=s.height,c=s.children,d=s.margin||{},u=MN(c,KP),h=MN(c,_k),m=Object.keys(i).reduce(function(e,t){var s=i[t],r=s.orientation;return s.mirror||s.hide?e:BE(BE({},e),{},zE({},r,e[r]+s.width))},{left:d.left||0,right:d.right||0}),p=Object.keys(a).reduce(function(e,t){var s=a[t],r=s.orientation;return s.mirror||s.hide?e:BE(BE({},e),{},zE({},r,hx()(e,"".concat(r))+s.height))},{top:d.top||0,bottom:d.bottom||0}),x=BE(BE({},p),m),g=x.bottom;return u&&(x.bottom+=u.props.height||KP.defaultProps.height),h&&t&&(x=function(e,t,s,r){var a=s.children,n=s.width,i=s.margin,o=n-(i.left||0)-(i.right||0),l=Fk({children:a,legendWidth:o}),c=e;if(l){var d=r||{},u=l.align,h=l.verticalAlign,m=l.layout;("vertical"===m||"horizontal"===m&&"middle"===h)&&wx(e[u])&&(c=Mk(Mk({},e),{},Ok({},u,c[u]+(d.width||0)))),("horizontal"===m||"vertical"===m&&"center"===u)&&wx(e[h])&&(c=Mk(Mk({},e),{},Ok({},h,c[h]+(d.height||0))))}return c}(x,0,s,t)),BE(BE({brushBottom:g},x),{},{width:o-x.left-x.right,height:l-x.top-x.bottom})},sD=function(e){var t,s=e.chartName,a=e.GraphicalChild,n=e.defaultTooltipEventType,i=void 0===n?"axis":n,o=e.validateTooltipEventTypes,l=void 0===o?["axis"]:o,c=e.axisComponents,d=e.legendContent,u=e.formatAxisMap,h=e.defaultProps,m=function(e,t){var s=t.graphicalItems,r=t.stackGroups,a=t.offset,n=t.updateId,i=t.dataStartIndex,o=t.dataEndIndex,l=e.barSize,d=e.layout,u=e.barGap,h=e.barCategoryGap,m=e.maxBarSize,p=eD(d),x=p.numericAxisName,g=p.cateAxisName,f=function(e){return!(!e||!e.length)&&e.some(function(e){var t=_N(e&&e.type);return t&&t.indexOf("Bar")>=0})}(s),y=f&&function(e){var t=e.barSize,s=e.stackGroups,r=void 0===s?{}:s;if(!r)return{};for(var a={},n=Object.keys(r),i=0,o=n.length;i<o;i++)for(var l=r[n[i]].stackGroups,c=Object.keys(l),d=0,u=c.length;d<u;d++){var h=l[c[d]],m=h.items,p=h.cateAxisId,x=m.filter(function(e){return _N(e.type).indexOf("Bar")>=0});if(x&&x.length){var g=x[0].props.barSize,f=x[0].props[p];a[f]||(a[f]=[]),a[f].push({item:x[0],stackList:x.slice(1),barSize:Gx()(g)?t:g})}}return a}({barSize:l,stackGroups:r}),b=[];return s.forEach(function(s,l){var p=GE(e.data,{dataStartIndex:i,dataEndIndex:o},s),f=s.props,v=f.dataKey,j=f.maxBarSize,N=s.props["".concat(x,"Id")],w=s.props["".concat(g,"Id")],k=c.reduce(function(e,r){var a,n=t["".concat(r.axisType,"Map")],i=s.props["".concat(r.axisType,"Id")],o=n&&n[i];return BE(BE({},e),{},(zE(a={},r.axisType,o),zE(a,"".concat(r.axisType,"Ticks"),Kk(o)),a))},{}),A=k[g],S=k["".concat(g,"Ticks")],C=r&&r[N]&&r[N].hasStack&&function(e,t){var s=e.props.stackId;if(kx(s)){var r=t[s];if(r&&r.items.length){for(var a=-1,n=0,i=r.items.length;n<i;n++)if(r.items[n]===e){a=n;break}return a>=0?r.stackedData[a]:null}}return null}(s,r[N].stackGroups),_=_N(s.type).indexOf("Bar")>=0,T=rA(A,S),P=[];if(_){var E,D,M=Gx()(j)?m:j,O=null!==(E=null!==(D=rA(A,S,!0))&&void 0!==D?D:M)&&void 0!==E?E:0;P=function(e){var t=e.barGap,s=e.barCategoryGap,r=e.bandSize,a=e.sizeList,n=void 0===a?[]:a,i=e.maxBarSize,o=n.length;if(o<1)return null;var l,c=Cx(t,r,0,!0);if(n[0].barSize===+n[0].barSize){var d=!1,u=r/o,h=n.reduce(function(e,t){return e+t.barSize||0},0);(h+=(o-1)*c)>=r&&(h-=(o-1)*c,c=0),h>=r&&u>0&&(d=!0,h=o*(u*=.9));var m={offset:((r-h)/2|0)-c,size:0};l=n.reduce(function(e,t){var s=[].concat(Pk(e),[{item:t.item,position:{offset:m.offset+m.size+c,size:d?u:t.barSize}}]);return m=s[s.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){s.push({item:e,position:m})}),s},[])}else{var p=Cx(s,r,0,!0);r-2*p-(o-1)*c<=0&&(c=0);var x=(r-2*p-(o-1)*c)/o;x>1&&(x>>=0);var g=i===+i?Math.min(x,i):x;l=n.reduce(function(e,t,s){var r=[].concat(Pk(e),[{item:t.item,position:{offset:p+(x+c)*s+(x-g)/2,size:g}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){r.push({item:e,position:r[r.length-1].position})}),r},[])}return l}({barGap:u,barCategoryGap:h,bandSize:O!==T?O:T,sizeList:y[w],maxBarSize:M}),O!==T&&(P=P.map(function(e){return BE(BE({},e),{},{position:BE(BE({},e.position),{},{offset:e.position.offset-O/2})})}))}var R,I,L,F=s&&s.type&&s.type.getComposedData;F&&b.push({props:BE(BE({},F(BE(BE({},k),{},{displayedData:p,props:e,dataKey:v,item:s,bandSize:T,barPosition:P,offset:a,stackedData:C,layout:d,dataStartIndex:i,dataEndIndex:o}))),{},(R={key:s.key||"item-".concat(l)},zE(R,x,k[x]),zE(R,g,k[g]),zE(R,"animationId",n),R)),childIndex:(I=s,L=e.children,EN(L).indexOf(I)),item:s})}),b},p=function(e,t){var r=e.props,n=e.dataStartIndex,i=e.dataEndIndex,o=e.updateId;if(!ON({props:r}))return null;var l=r.children,d=r.layout,h=r.stackOffset,p=r.data,x=r.reverseStackOrder,g=eD(d),f=g.numericAxisName,y=g.cateAxisName,b=DN(l,a),v=function(e,t,s,r,a,n){if(!e)return null;var i=(n?t.reverse():t).reduce(function(e,t){var a=t.props,n=a.stackId;if(a.hide)return e;var i=t.props[s],o=e[i]||{hasStack:!1,stackGroups:{}};if(kx(n)){var l=o.stackGroups[n]||{numericAxisId:s,cateAxisId:r,items:[]};l.items.push(t),o.hasStack=!0,o.stackGroups[n]=l}else o.stackGroups[Sx("_stackId_")]={numericAxisId:s,cateAxisId:r,items:[t]};return Mk(Mk({},e),{},Ok({},i,o))},{});return Object.keys(i).reduce(function(t,n){var o=i[n];return o.hasStack&&(o.stackGroups=Object.keys(o.stackGroups).reduce(function(t,n){var i=o.stackGroups[n];return Mk(Mk({},t),{},Ok({},n,{numericAxisId:s,cateAxisId:r,items:i.items,stackedData:$k(e,i.items,a)}))},{})),Mk(Mk({},t),{},Ok({},n,o))},{})}(p,b,"".concat(f,"Id"),"".concat(y,"Id"),h,x),j=c.reduce(function(e,t){var s="".concat(t.axisType,"Map");return BE(BE({},e),{},zE({},s,XE(r,BE(BE({},t),{},{graphicalItems:b,stackGroups:t.axisType===f&&v,dataStartIndex:n,dataEndIndex:i}))))},{}),N=tD(BE(BE({},j),{},{props:r,graphicalItems:b}),null===t||void 0===t?void 0:t.legendBBox);Object.keys(j).forEach(function(e){j[e]=u(r,j[e],N,e.replace("Map",""),s)});var w=function(e){var t=_x(e),s=Kk(t,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:Kx()(s,function(e){return e.coordinate}),tooltipAxis:t,tooltipAxisBandSize:rA(t,s)}}(j["".concat(y,"Map")]),k=m(r,BE(BE({},j),{},{dataStartIndex:n,dataEndIndex:i,updateId:o,graphicalItems:b,stackGroups:v,offset:N}));return BE(BE({formattedGraphicalItems:k,graphicalItems:b,offset:N,stackGroups:v},w),j)};return t=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EE(e,t)}(c,e);var t,a,n,o=DE(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),zE(ME(t=o.call(this,e)),"accessibilityManager",new wE),zE(ME(t),"clearDeferId",function(){!Gx()(t.deferId)&&qE&&qE(t.deferId),t.deferId=null}),zE(ME(t),"handleLegendBBoxUpdate",function(e){if(e){var s=t.state,r=s.dataStartIndex,a=s.dataEndIndex,n=s.updateId;t.setState(BE({legendBBox:e},p({props:t.props,dataStartIndex:r,dataEndIndex:a,updateId:n},BE(BE({},t.state),{},{legendBBox:e}))))}}),zE(ME(t),"handleReceiveSyncEvent",function(e,s,r){t.props.syncId===e&&s!==t.uniqueChartId&&(t.clearDeferId(),t.deferId=HE&&HE(t.applySyncEvent.bind(ME(t),r)))}),zE(ME(t),"handleBrushChange",function(e){var s=e.startIndex,r=e.endIndex;if(s!==t.state.dataStartIndex||r!==t.state.dataEndIndex){var a=t.state.updateId;t.setState(function(){return BE({dataStartIndex:s,dataEndIndex:r},p({props:t.props,dataStartIndex:s,dataEndIndex:r,updateId:a},t.state))}),t.triggerSyncEvent({dataStartIndex:s,dataEndIndex:r})}}),zE(ME(t),"handleMouseEnter",function(e){var s=t.props.onMouseEnter,r=t.getMouseInfo(e);if(r){var a=BE(BE({},r),{},{isTooltipActive:!0});t.setState(a),t.triggerSyncEvent(a),Ux()(s)&&s(a,e)}}),zE(ME(t),"triggeredAfterMouseMove",function(e){var s=t.props.onMouseMove,r=t.getMouseInfo(e),a=r?BE(BE({},r),{},{isTooltipActive:!0}):{isTooltipActive:!1};t.setState(a),t.triggerSyncEvent(a),Ux()(s)&&s(a,e)}),zE(ME(t),"handleItemMouseEnter",function(e){t.setState(function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}})}),zE(ME(t),"handleItemMouseLeave",function(){t.setState(function(){return{isTooltipActive:!1}})}),zE(ME(t),"handleMouseMove",function(e){e&&Ux()(e.persist)&&e.persist(),t.triggeredAfterMouseMove(e)}),zE(ME(t),"handleMouseLeave",function(e){var s=t.props.onMouseLeave,r={isTooltipActive:!1};t.setState(r),t.triggerSyncEvent(r),Ux()(s)&&s(r,e),t.cancelThrottledTriggerAfterMouseMove()}),zE(ME(t),"handleOuterEvent",function(e){var s=function(e){var t=e&&e.type;return t&&CN[t]?CN[t]:null}(e),r=hx()(t.props,"".concat(s));s&&Ux()(r)&&r(/.*touch.*/i.test(s)?t.getMouseInfo(e.changedTouches[0]):t.getMouseInfo(e),e)}),zE(ME(t),"handleClick",function(e){var s=t.props.onClick,r=t.getMouseInfo(e);if(r){var a=BE(BE({},r),{},{isTooltipActive:!0});t.setState(a),t.triggerSyncEvent(a),Ux()(s)&&s(a,e)}}),zE(ME(t),"handleMouseDown",function(e){var s=t.props.onMouseDown;Ux()(s)&&s(t.getMouseInfo(e),e)}),zE(ME(t),"handleMouseUp",function(e){var s=t.props.onMouseUp;Ux()(s)&&s(t.getMouseInfo(e),e)}),zE(ME(t),"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleMouseMove(e.changedTouches[0])}),zE(ME(t),"handleTouchStart",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleMouseDown(e.changedTouches[0])}),zE(ME(t),"handleTouchEnd",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleMouseUp(e.changedTouches[0])}),zE(ME(t),"verticalCoordinatesGenerator",function(e){var t=e.xAxis,s=e.width,r=e.height,a=e.offset;return Vk(W_(BE(BE(BE({},AP.defaultProps),t),{},{ticks:Kk(t,!0),viewBox:{x:0,y:0,width:s,height:r}})),a.left,a.left+a.width)}),zE(ME(t),"horizontalCoordinatesGenerator",function(e){var t=e.yAxis,s=e.width,r=e.height,a=e.offset;return Vk(W_(BE(BE(BE({},AP.defaultProps),t),{},{ticks:Kk(t,!0),viewBox:{x:0,y:0,width:s,height:r}})),a.top,a.top+a.height)}),zE(ME(t),"axesTicksGenerator",function(e){return Kk(e,!0)}),zE(ME(t),"renderCursor",function(e){var a=t.state,n=a.isTooltipActive,i=a.activeCoordinate,o=a.activePayload,l=a.offset,c=a.activeTooltipIndex,d=t.getTooltipEventType();if(!e||!e.props.cursor||!n||!i||"ScatterChart"!==s&&"axis"!==d)return null;var u,h=t.props.layout,m=HT;if("ScatterChart"===s)u=i,m=ZT;else if("BarChart"===s)u=t.getCursorRectangle(),m=pC;else if("radial"===h){var p=t.getCursorPoints(),x=p.cx,g=p.cy,f=p.radius;u={cx:x,cy:g,startAngle:p.startAngle,endAngle:p.endAngle,innerRadius:f,outerRadius:f},m=lP}else u={points:t.getCursorPoints()},m=HT;var y=e.key||"_recharts-cursor",b=BE(BE(BE(BE({stroke:"#ccc",pointerEvents:"none"},l),u),LN(e.props.cursor)),{},{payload:o,payloadIndex:c,key:y,className:"recharts-tooltip-cursor"});return(0,r.isValidElement)(e.props.cursor)?(0,r.cloneElement)(e.props.cursor,b):(0,r.createElement)(m,b)}),zE(ME(t),"renderPolarAxis",function(e,s,a){var n=hx()(e,"type.axisType"),i=hx()(t.state,"".concat(n,"Map")),o=i&&i[e.props["".concat(n,"Id")]];return(0,r.cloneElement)(e,BE(BE({},o),{},{className:n,key:e.key||"".concat(s,"-").concat(a),ticks:Kk(o,!0)}))}),zE(ME(t),"renderXAxis",function(e,s,r){var a=t.state.xAxisMap[e.props.xAxisId];return t.renderAxis(a,e,s,r)}),zE(ME(t),"renderYAxis",function(e,s,r){var a=t.state.yAxisMap[e.props.yAxisId];return t.renderAxis(a,e,s,r)}),zE(ME(t),"renderGrid",function(e){var s=t.state,a=s.xAxisMap,n=s.yAxisMap,i=s.offset,o=t.props,l=o.width,c=o.height,d=_x(a),u=Bx()(n,function(e){return Lx()(e.domain,WE)})||_x(n),h=e.props||{};return(0,r.cloneElement)(e,{key:e.key||"grid",x:wx(h.x)?h.x:i.left,y:wx(h.y)?h.y:i.top,width:wx(h.width)?h.width:i.width,height:wx(h.height)?h.height:i.height,xAxis:d,yAxis:u,offset:i,chartWidth:l,chartHeight:c,verticalCoordinatesGenerator:h.verticalCoordinatesGenerator||t.verticalCoordinatesGenerator,horizontalCoordinatesGenerator:h.horizontalCoordinatesGenerator||t.horizontalCoordinatesGenerator})}),zE(ME(t),"renderPolarGrid",function(e){var s=e.props,a=s.radialLines,n=s.polarAngles,i=s.polarRadius,o=t.state,l=o.radiusAxisMap,c=o.angleAxisMap,d=_x(l),u=_x(c),h=u.cx,m=u.cy,p=u.innerRadius,x=u.outerRadius;return(0,r.cloneElement)(e,{polarAngles:px()(n)?n:Kk(u,!0).map(function(e){return e.coordinate}),polarRadius:px()(i)?i:Kk(d,!0).map(function(e){return e.coordinate}),cx:h,cy:m,innerRadius:p,outerRadius:x,key:e.key||"polar-grid",radialLines:a})}),zE(ME(t),"renderLegend",function(){var e=t.state.formattedGraphicalItems,s=t.props,a=s.children,n=s.width,i=s.height,o=t.props.margin||{},l=n-(o.left||0)-(o.right||0),c=Fk({children:a,formattedGraphicalItems:e,legendWidth:l,legendContent:d});if(!c)return null;var u=c.item,h=TE(c,kE);return(0,r.cloneElement)(u,BE(BE({},h),{},{chartWidth:n,chartHeight:i,margin:o,ref:function(e){t.legendInstance=e},onBBoxUpdate:t.handleLegendBBoxUpdate}))}),zE(ME(t),"renderTooltip",function(){var e=MN(t.props.children,uT);if(!e)return null;var s=t.state,a=s.isTooltipActive,n=s.activeCoordinate,i=s.activePayload,o=s.activeLabel,l=s.offset;return(0,r.cloneElement)(e,{viewBox:BE(BE({},l),{},{x:l.left,y:l.top}),active:a,label:o,payload:a?i:[],coordinate:n})}),zE(ME(t),"renderBrush",function(e){var s=t.props,a=s.margin,n=s.data,i=t.state,o=i.offset,l=i.dataStartIndex,c=i.dataEndIndex,d=i.updateId;return(0,r.cloneElement)(e,{key:e.key||"_recharts-brush",onChange:Wk(t.handleBrushChange,null,e.props.onChange),data:n,x:wx(e.props.x)?e.props.x:o.left,y:wx(e.props.y)?e.props.y:o.top+o.height+o.brushBottom-(a.bottom||0),width:wx(e.props.width)?e.props.width:o.width,startIndex:l,endIndex:c,updateId:"brush-".concat(d)})}),zE(ME(t),"renderReferenceElement",function(e,s,a){if(!e)return null;var n=ME(t).clipPathId,i=t.state,o=i.xAxisMap,l=i.yAxisMap,c=i.offset,d=e.props,u=d.xAxisId,h=d.yAxisId;return(0,r.cloneElement)(e,{key:e.key||"".concat(s,"-").concat(a),xAxis:o[u],yAxis:l[h],viewBox:{x:c.left,y:c.top,width:c.width,height:c.height},clipPathId:n})}),zE(ME(t),"renderActivePoints",function(e){var t=e.item,s=e.activePoint,r=e.basePoint,a=e.childIndex,n=e.isRange,i=[],o=t.props.key,l=t.item.props,d=l.activeDot,u=BE(BE({index:a,dataKey:l.dataKey,cx:s.x,cy:s.y,r:4,fill:Lk(t.item),strokeWidth:2,stroke:"#fff",payload:s.payload,value:s.value,key:"".concat(o,"-activePoint-").concat(a)},LN(d)),jN(d));return i.push(c.renderActiveDot(d,u)),r?i.push(c.renderActiveDot(d,BE(BE({},u),{},{cx:r.x,cy:r.y,key:"".concat(o,"-basePoint-").concat(a)}))):n&&i.push(null),i}),zE(ME(t),"renderGraphicChild",function(e,s,a){var n=t.filterFormatItem(e,s,a);if(!n)return null;var i=t.getTooltipEventType(),o=t.state,l=o.isTooltipActive,c=o.tooltipAxis,d=o.activeTooltipIndex,u=o.activeLabel,h=MN(t.props.children,uT),m=n.props,p=m.points,x=m.isRange,g=m.baseLine,f=n.item.props,y=f.activeDot,b=!f.hide&&l&&h&&y&&d>=0,v={};"axis"!==i&&h&&"click"===h.props.trigger?v={onClick:Wk(t.handleItemMouseEnter,null,e.props.onCLick)}:"axis"!==i&&(v={onMouseLeave:Wk(t.handleItemMouseLeave,null,e.props.onMouseLeave),onMouseEnter:Wk(t.handleItemMouseEnter,null,e.props.onMouseEnter)});var j=(0,r.cloneElement)(e,BE(BE({},n.props),v));if(b){var N,w;if(c.dataKey&&!c.allowDuplicatedCategory){var k="function"===typeof c.dataKey?function(e){return"function"===typeof c.dataKey?c.dataKey(e.payload):null}:"payload.".concat(c.dataKey.toString());N=Px(p,k,u),w=x&&g&&Px(g,k,u)}else N=p[d],w=x&&g&&g[d];if(!Gx()(N))return[j].concat(RE(t.renderActivePoints({item:n,activePoint:N,basePoint:w,childIndex:d,isRange:x})))}return x?[j,null,null]:[j,null]}),zE(ME(t),"renderCustomized",function(e,s,a){return(0,r.cloneElement)(e,BE(BE({key:"recharts-customized-".concat(a)},t.props),t.state))}),t.uniqueChartId=Gx()(e.id)?Sx("recharts"):e.id,t.clipPathId="".concat(t.uniqueChartId,"-clip"),e.throttleDelay&&(t.triggeredAfterMouseMove=tx()(t.triggeredAfterMouseMove,e.throttleDelay)),t.state={},t}return t=c,a=[{key:"componentDidMount",value:function(){var e,t;Gx()(this.props.syncId)||this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.handleMouseMove,layout:this.props.layout})}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return this.props.accessibilityLayer?(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(s=this.props.margin.left)&&void 0!==s?s:0,top:null!==(r=this.props.margin.top)&&void 0!==r?r:0}}),null):null;var s,r}},{key:"componentDidUpdate",value:function(e){Gx()(e.syncId)&&!Gx()(this.props.syncId)&&this.addListener(),!Gx()(e.syncId)&&Gx()(this.props.syncId)&&this.removeListener()}},{key:"componentWillUnmount",value:function(){this.clearDeferId(),Gx()(this.props.syncId)||this.removeListener(),this.cancelThrottledTriggerAfterMouseMove()}},{key:"cancelThrottledTriggerAfterMouseMove",value:function(){"function"===typeof this.triggeredAfterMouseMove.cancel&&this.triggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=MN(this.props.children,uT);if(e&&$x()(e.props.shared)){var t=e.props.shared?"axis":"item";return l.indexOf(t)>=0?t:i}return i}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t=function(e,t){return{chartX:Math.round(e.pageX-t.left),chartY:Math.round(e.pageY-t.top)}}(e,function(e){var t=e.ownerDocument.documentElement,s={top:0,left:0};return"undefined"!==typeof e.getBoundingClientRect&&(s=e.getBoundingClientRect()),{top:s.top+window.pageYOffset-t.clientTop,left:s.left+window.pageXOffset-t.clientLeft}}(this.container)),s=this.inRange(t.chartX,t.chartY);if(!s)return null;var r=this.state,a=r.xAxisMap,n=r.yAxisMap;if("axis"!==this.getTooltipEventType()&&a&&n){var i=_x(a).scale,o=_x(n).scale,l=i&&i.invert?i.invert(t.chartX):null,c=o&&o.invert?o.invert(t.chartY):null;return BE(BE({},t),{},{xValue:l,yValue:c})}var d=JE(this.state,this.props.data,this.props.layout,s);return d?BE(BE({},t),d):null}},{key:"getCursorRectangle",value:function(){var e=this.props.layout,t=this.state,s=t.activeCoordinate,r=t.offset,a=t.tooltipAxisBandSize,n=a/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?s.x-n:r.left+.5,y:"horizontal"===e?r.top+.5:s.y-n,width:"horizontal"===e?a:r.width-1,height:"horizontal"===e?r.height-1:a}}},{key:"getCursorPoints",value:function(){var e,t,s,r,a=this.props.layout,n=this.state,i=n.activeCoordinate,o=n.offset;if("horizontal"===a)s=e=i.x,t=o.top,r=o.top+o.height;else if("vertical"===a)r=t=i.y,e=o.left,s=o.left+o.width;else if(!Gx()(i.cx)||!Gx()(i.cy)){if("centric"!==a){var l=i.cx,c=i.cy,d=i.radius,u=i.startAngle,h=i.endAngle;return{points:[zC(l,c,d,u),zC(l,c,d,h)],cx:l,cy:c,radius:d,startAngle:u,endAngle:h}}var m=i.cx,p=i.cy,x=i.innerRadius,g=i.outerRadius,f=i.angle,y=zC(m,p,x,f),b=zC(m,p,g,f);e=y.x,t=y.y,s=b.x,r=b.y}return[{x:e,y:t},{x:s,y:r}]}},{key:"inRange",value:function(e,t){var s=this.props.layout;if("horizontal"===s||"vertical"===s){var r=this.state.offset;return e>=r.left&&e<=r.left+r.width&&t>=r.top&&t<=r.top+r.height?{x:e,y:t}:null}var a=this.state,n=a.angleAxisMap,i=a.radiusAxisMap;if(n&&i){var o=_x(n);return WC({x:e,y:t},o)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),s=MN(e,uT),r={};return s&&"axis"===t&&(r="click"===s.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd}),BE(BE({},jN(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){fE.on(yE,this.handleReceiveSyncEvent),fE.setMaxListeners&&fE._maxListeners&&fE.setMaxListeners(fE._maxListeners+1)}},{key:"removeListener",value:function(){fE.removeListener(yE,this.handleReceiveSyncEvent),fE.setMaxListeners&&fE._maxListeners&&fE.setMaxListeners(fE._maxListeners-1)}},{key:"triggerSyncEvent",value:function(e){var t=this.props.syncId;Gx()(t)||fE.emit(yE,t,this.uniqueChartId,e)}},{key:"applySyncEvent",value:function(e){var t=this.props,s=t.layout,r=t.syncMethod,a=this.state.updateId,n=e.dataStartIndex,i=e.dataEndIndex;if(Gx()(e.dataStartIndex)&&Gx()(e.dataEndIndex))if(Gx()(e.activeTooltipIndex))this.setState(e);else{var o=e.chartX,l=e.chartY,c=e.activeTooltipIndex,d=this.state,u=d.offset,h=d.tooltipTicks;if(!u)return;if("function"===typeof r)c=r(h,e);else if("value"===r){c=-1;for(var m=0;m<h.length;m++)if(h[m].value===e.activeLabel){c=m;break}}var x=BE(BE({},u),{},{x:u.left,y:u.top}),g=Math.min(o,x.x+x.width),f=Math.min(l,x.y+x.height),y=h[c]&&h[c].value,b=$E(this.state,this.props.data,c),v=h[c]?{x:"horizontal"===s?h[c].coordinate:g,y:"horizontal"===s?f:h[c].coordinate}:KE;this.setState(BE(BE({},e),{},{activeLabel:y,activeCoordinate:v,activePayload:b,activeTooltipIndex:c}))}else this.setState(BE({dataStartIndex:n,dataEndIndex:i},p({props:this.props,dataStartIndex:n,dataEndIndex:i,updateId:a},this.state)))}},{key:"filterFormatItem",value:function(e,t,s){for(var r=this.state.formattedGraphicalItems,a=0,n=r.length;a<n;a++){var i=r[a];if(i.item===e||i.props.key===e.key||t===_N(i.item.type)&&s===i.childIndex)return i}return null}},{key:"renderAxis",value:function(e,t,s,a){var n=this.props,i=n.width,o=n.height;return r.createElement(AP,_E({},e,{className:Qp()("recharts-".concat(e.axisType," ").concat(e.axisType),e.className),key:t.key||"".concat(s,"-").concat(a),viewBox:{x:0,y:0,width:i,height:o},ticksGenerator:this.axesTicksGenerator}))}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,s=t.left,a=t.top,n=t.height,i=t.width;return r.createElement("defs",null,r.createElement("clipPath",{id:e},r.createElement("rect",{x:s,y:a,height:n,width:i})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce(function(e,t){var s=CE(t,2),r=s[0],a=s[1];return BE(BE({},e),{},zE({},r,a.scale))},{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce(function(e,t){var s=CE(t,2),r=s[0],a=s[1];return BE(BE({},e),{},zE({},r,a.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(e){var t,s;return null===(t=this.state.xAxisMap)||void 0===t||null===(s=t[e])||void 0===s?void 0:s.scale}},{key:"getYScaleByAxisId",value:function(e){var t,s;return null===(t=this.state.yAxisMap)||void 0===t||null===(s=t[e])||void 0===s?void 0:s.scale}},{key:"getItemByXY",value:function(e){var t=this.state.formattedGraphicalItems;if(t&&t.length)for(var s=0,r=t.length;s<r;s++){var a=t[s],n=a.props,i=a.item,o=_N(i.type);if("Bar"===o){var l=(n.data||[]).find(function(t){return hC(e,t)});if(l)return{graphicalItem:a,payload:l}}else if("RadialBar"===o){var c=(n.data||[]).find(function(t){return WC(e,t)});if(c)return{graphicalItem:a,payload:c}}}return null}},{key:"render",value:function(){var e=this;if(!ON(this))return null;var t=this.props,s=t.children,a=t.className,n=t.width,i=t.height,o=t.style,l=t.compact,c=t.title,d=t.desc,u=TE(t,AE),h=LN(u),m={CartesianGrid:{handler:this.renderGrid,once:!0},ReferenceArea:{handler:this.renderReferenceElement},ReferenceLine:{handler:this.renderReferenceElement},ReferenceDot:{handler:this.renderReferenceElement},XAxis:{handler:this.renderXAxis},YAxis:{handler:this.renderYAxis},Brush:{handler:this.renderBrush,once:!0},Bar:{handler:this.renderGraphicChild},Line:{handler:this.renderGraphicChild},Area:{handler:this.renderGraphicChild},Radar:{handler:this.renderGraphicChild},RadialBar:{handler:this.renderGraphicChild},Scatter:{handler:this.renderGraphicChild},Pie:{handler:this.renderGraphicChild},Funnel:{handler:this.renderGraphicChild},Tooltip:{handler:this.renderCursor,once:!0},PolarGrid:{handler:this.renderPolarGrid,once:!0},PolarAngleAxis:{handler:this.renderPolarAxis},PolarRadiusAxis:{handler:this.renderPolarAxis},Customized:{handler:this.renderCustomized}};if(l)return r.createElement(sw,_E({},h,{width:n,height:i,title:c,desc:d}),this.renderClipPath(),zN(s,m));this.props.accessibilityLayer&&(h.tabIndex=0,h.role="img",h.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},h.onFocus=function(){e.accessibilityManager.focus()});var p=this.parseEventsOfWrapper();return r.createElement("div",_E({className:Qp()("recharts-wrapper",a),style:BE({position:"relative",cursor:"default",width:n,height:i},o)},p,{ref:function(t){e.container=t},role:"region"}),r.createElement(sw,_E({},h,{width:n,height:i,title:c,desc:d}),this.renderClipPath(),zN(s,m)),this.renderLegend(),this.renderTooltip())}}],a&&PE(t.prototype,a),n&&PE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component),zE(t,"displayName",s),zE(t,"defaultProps",BE({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),zE(t,"getDerivedStateFromProps",function(e,t){var s=e.data,r=e.children,a=e.width,n=e.height,i=e.layout,o=e.stackOffset,l=e.margin;if(Gx()(t.updateId)){var c=ZE(e);return BE(BE(BE({},c),{},{updateId:0},p(BE(BE({props:e},c),{},{updateId:0}),t)),{},{prevData:s,prevWidth:a,prevHeight:n,prevLayout:i,prevStackOffset:o,prevMargin:l,prevChildren:r})}if(s!==t.prevData||a!==t.prevWidth||n!==t.prevHeight||i!==t.prevLayout||o!==t.prevStackOffset||!xN(l,t.prevMargin)){var d=ZE(e),u={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},h=BE(BE({},JE(t,s,i)),{},{updateId:t.updateId+1}),m=BE(BE(BE({},d),u),h);return BE(BE(BE({},m),p(BE({props:e},m),t)),{},{prevData:s,prevWidth:a,prevHeight:n,prevLayout:i,prevStackOffset:o,prevMargin:l,prevChildren:r})}if(!FN(r,t.prevChildren)){var x=!Gx()(s)?t.updateId:t.updateId+1;return BE(BE({updateId:x},p(BE(BE({props:e},t),{},{updateId:x}),t)),{},{prevChildren:r})}return null}),zE(t,"renderActiveDot",function(e,t){var s;return s=(0,r.isValidElement)(e)?(0,r.cloneElement)(e,t):Ux()(e)?e(t):r.createElement(dP,t),r.createElement(WN,{className:"recharts-active-dot",key:t.key},s)}),t},rD=["type","layout","connectNulls","ref"];function aD(e){return aD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aD(e)}function nD(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function iD(){return iD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},iD.apply(this,arguments)}function oD(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function lD(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?oD(Object(s),!0).forEach(function(t){gD(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):oD(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function cD(e){return function(e){if(Array.isArray(e))return dD(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return dD(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return dD(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dD(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}function uD(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fD(r.key),r)}}function hD(e,t){return hD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hD(e,t)}function mD(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(qU){return!1}}();return function(){var s,r=xD(e);if(t){var a=xD(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return function(e,t){if(t&&("object"===aD(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pD(e)}(this,s)}}function pD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xD(e){return xD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xD(e)}function gD(e,t,s){return(t=fD(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function fD(e){var t=function(e,t){if("object"!==aD(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==aD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===aD(t)?t:String(t)}var yD=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hD(e,t)}(i,e);var t,s,a,n=mD(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return gD(pD(e=n.call.apply(n,[this].concat(s))),"state",{isAnimationFinished:!0,totalLength:0}),gD(pD(e),"getStrokeDasharray",function(e,t,s){for(var r=s.reduce(function(e,t){return e+t}),a=Math.floor(e/r),n=e%r,o=t-e,l=[],c=0,d=0;;d+=s[c],++c)if(d+s[c]>n){l=[].concat(cD(s.slice(0,c)),[n-d]);break}var u=l.length%2===0?[0,o]:[o];return[].concat(cD(i.repeat(s,a)),cD(l),u).map(function(e){return"".concat(e,"px")}).join(", ")}),gD(pD(e),"id",Sx("recharts-line-")),gD(pD(e),"pathRef",function(t){e.mainCurve=t}),gD(pD(e),"handleAnimationEnd",function(){e.setState({isAnimationFinished:!0}),e.props.onAnimationEnd&&e.props.onAnimationEnd()}),gD(pD(e),"handleAnimationStart",function(){e.setState({isAnimationFinished:!1}),e.props.onAnimationStart&&e.props.onAnimationStart()}),e}return t=i,s=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.points,n=s.xAxis,i=s.yAxis,o=s.layout,l=DN(s.children,JN);if(!l)return null;var c=function(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:Rk(e.payload,t)}},d={clipPath:e?"url(#clipPath-".concat(t,")"):null};return r.createElement(WN,d,l.map(function(e,t){return r.cloneElement(e,{key:"bar-".concat(t),data:a,xAxis:n,yAxis:i,layout:o,dataPointFormatter:c})}))}},{key:"renderDots",value:function(e,t,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,n=a.dot,o=a.points,l=a.dataKey,c=LN(this.props),d=LN(n,!0),u=o.map(function(e,t){var s=lD(lD(lD({key:"dot-".concat(t),r:3},c),d),{},{value:e.value,dataKey:l,cx:e.x,cy:e.y,index:t,payload:e.payload});return i.renderDotItem(n,s)}),h={clipPath:e?"url(#clipPath-".concat(t?"":"dots-").concat(s,")"):null};return r.createElement(WN,iD({className:"recharts-line-dots",key:"dots"},h),u)}},{key:"renderCurveStatically",value:function(e,t,s,a){var n=this.props,i=n.type,o=n.layout,l=n.connectNulls,c=(n.ref,nD(n,rD)),d=lD(lD(lD({},LN(c,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:t?"url(#clipPath-".concat(s,")"):null,points:e},a),{},{type:i,layout:o,connectNulls:l});return r.createElement(HT,iD({},d,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,t){var s=this,a=this.props,n=a.points,i=a.strokeDasharray,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,d=a.animationEasing,u=a.animationId,h=a.animateNewValues,m=a.width,p=a.height,x=this.state,g=x.prevPoints,f=x.totalLength;return r.createElement(rC,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"line-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(r){var a=r.t;if(g){var o=g.length/n.length,l=n.map(function(e,t){var s=Math.floor(t*o);if(g[s]){var r=g[s],n=Tx(r.x,e.x),i=Tx(r.y,e.y);return lD(lD({},e),{},{x:n(a),y:i(a)})}if(h){var l=Tx(2*m,e.x),c=Tx(p/2,e.y);return lD(lD({},e),{},{x:l(a),y:c(a)})}return lD(lD({},e),{},{x:e.x,y:e.y})});return s.renderCurveStatically(l,e,t)}var c,d=Tx(0,f)(a);if(i){var u="".concat(i).split(/[,\s]+/gim).map(function(e){return parseFloat(e)});c=s.getStrokeDasharray(d,f,u)}else c="".concat(d,"px ").concat(f-d,"px");return s.renderCurveStatically(n,e,t,{strokeDasharray:c})})}},{key:"renderCurve",value:function(e,t){var s=this.props,r=s.points,a=s.isAnimationActive,n=this.state,i=n.prevPoints,o=n.totalLength;return a&&r&&r.length&&(!i&&o>0||!mg()(i,r))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(r,e,t)}},{key:"render",value:function(){var e,t=this.props,s=t.hide,a=t.dot,n=t.points,i=t.className,o=t.xAxis,l=t.yAxis,c=t.top,d=t.left,u=t.width,h=t.height,m=t.isAnimationActive,p=t.id;if(s||!n||!n.length)return null;var x=this.state.isAnimationFinished,g=1===n.length,f=Qp()("recharts-line",i),y=o&&o.allowDataOverflow,b=l&&l.allowDataOverflow,v=y||b,j=Gx()(p)?this.id:p,N=null!==(e=LN(a))&&void 0!==e?e:{r:3,strokeWidth:2},w=N.r,k=void 0===w?3:w,A=N.strokeWidth,S=void 0===A?2:A,C=(function(e){return e&&"object"===SN(e)&&"cx"in e&&"cy"in e&&"r"in e}(a)?a:{}).clipDot,_=void 0===C||C,T=2*k+S;return r.createElement(WN,{className:f},y||b?r.createElement("defs",null,r.createElement("clipPath",{id:"clipPath-".concat(j)},r.createElement("rect",{x:y?d:d-u/2,y:b?c:c-h/2,width:y?u:2*u,height:b?h:2*h})),!_&&r.createElement("clipPath",{id:"clipPath-dots-".concat(j)},r.createElement("rect",{x:d-T/2,y:c-T/2,width:u+T,height:h+T}))):null,!g&&this.renderCurve(v,j),this.renderErrorBar(v,j),(g||a)&&this.renderDots(v,_,j),(!m||x)&&p_.renderCallByParent(this.props,n))}}],a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var s=e.length%2!==0?[].concat(cD(e),[0]):e,r=[],a=0;a<t;++a)r=[].concat(cD(r),cD(s));return r}},{key:"renderDotItem",value:function(e,t){var s;if(r.isValidElement(e))s=r.cloneElement(e,t);else if(Ux()(e))s=e(t);else{var a=Qp()("recharts-line-dot",e?e.className:"");s=r.createElement(dP,iD({},t,{className:a}))}return s}}],s&&uD(t.prototype,s),a&&uD(t,a),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);gD(yD,"displayName","Line"),gD(yD,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Jx.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),gD(yD,"getComposedData",function(e){var t=e.props,s=e.xAxis,r=e.yAxis,a=e.xAxisTicks,n=e.yAxisTicks,i=e.dataKey,o=e.bandSize,l=e.displayedData,c=e.offset,d=t.layout,u=l.map(function(e,t){var l=Rk(e,i);return"horizontal"===d?{x:Qk({axis:s,ticks:a,bandSize:o,entry:e,index:t}),y:Gx()(l)?null:r.scale(l),value:l,payload:e}:{x:Gx()(l)?null:s.scale(l),y:Qk({axis:r,ticks:n,bandSize:o,entry:e,index:t}),value:l,payload:e}});return lD({points:u,layout:d},c)});var bD=function(){return null};bD.displayName="XAxis",bD.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};var vD=function(){return null};vD.displayName="YAxis",vD.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};var jD=sD({chartName:"LineChart",GraphicalChild:yD,axisComponents:[{axisType:"xAxis",AxisComp:bD},{axisType:"yAxis",AxisComp:vD}],formatAxisMap:function(e,t,s,r,a){var n=e.width,i=e.height,o=e.layout,l=e.children,c=Object.keys(t),d={left:s.left,leftMirror:s.left,right:n-s.right,rightMirror:n-s.right,top:s.top,topMirror:s.top,bottom:i-s.bottom,bottomMirror:i-s.bottom},u=!!MN(l,__);return c.reduce(function(n,i){var l,c,h,m,p,x=t[i],g=x.orientation,f=x.domain,y=x.padding,b=void 0===y?{}:y,v=x.mirror,j=x.reversed,N="".concat(g).concat(v?"Mirror":"");if("number"===x.type&&("gap"===x.padding||"no-gap"===x.padding)){var w=f[1]-f[0],k=1/0,A=x.categoricalDomain.sort();A.forEach(function(e,t){t>0&&(k=Math.min((e||0)-(A[t-1]||0),k))});var S=k/w,C="vertical"===x.layout?s.height:s.width;if("gap"===x.padding&&(l=S*C/2),"no-gap"===x.padding){var _=Cx(e.barCategoryGap,S*C),T=S*C/2;l=T-_-(T-_)/C*_}}c="xAxis"===r?[s.left+(b.left||0)+(l||0),s.left+s.width-(b.right||0)-(l||0)]:"yAxis"===r?"horizontal"===o?[s.top+s.height-(b.bottom||0),s.top+(b.top||0)]:[s.top+(b.top||0)+(l||0),s.top+s.height-(b.bottom||0)-(l||0)]:x.range,j&&(c=[c[1],c[0]]);var P=Hk(x,a,u),E=P.scale,D=P.realScaleType;E.domain(f).range(c),Gk(E);var M=Jk(E,D_(D_({},x),{},{realScaleType:D}));"xAxis"===r?(p="top"===g&&!v||"bottom"===g&&v,h=s.left,m=d[N]-p*x.height):"yAxis"===r&&(p="left"===g&&!v||"right"===g&&v,h=d[N]-p*x.width,m=s.top);var O=D_(D_(D_({},x),M),{},{realScaleType:D,x:h,y:m,scale:E,width:"xAxis"===r?s.width:x.width,height:"yAxis"===r?s.height:x.height});return O.bandSize=rA(O,M),x.hide||"xAxis"!==r?x.hide||(d[N]+=(p?-1:1)*O.width):d[N]+=(p?-1:1)*O.height,D_(D_({},n),{},M_({},i,O))},{})}}),ND=["x1","y1","x2","y2","key"];function wD(e){return wD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wD(e)}function kD(){return kD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},kD.apply(this,arguments)}function AD(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function SD(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function CD(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?SD(Object(s),!0).forEach(function(t){DD(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):SD(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function _D(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,MD(r.key),r)}}function TD(e,t){return TD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},TD(e,t)}function PD(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(qU){return!1}}();return function(){var s,r=ED(e);if(t){var a=ED(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return function(e,t){if(t&&("object"===wD(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,s)}}function ED(e){return ED=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ED(e)}function DD(e,t,s){return(t=MD(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function MD(e){var t=function(e,t){if("object"!==wD(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==wD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===wD(t)?t:String(t)}var OD=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TD(e,t)}(i,e);var t,s,a,n=PD(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return t=i,s=[{key:"renderHorizontal",value:function(e){var t=this,s=this.props,a=s.x,n=s.width,o=s.horizontal;if(!e||!e.length)return null;var l=e.map(function(e,s){var r=CD(CD({},t.props),{},{x1:a,y1:e,x2:a+n,y2:e,key:"line-".concat(s),index:s});return i.renderLineItem(o,r)});return r.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}},{key:"renderVertical",value:function(e){var t=this,s=this.props,a=s.y,n=s.height,o=s.vertical;if(!e||!e.length)return null;var l=e.map(function(e,s){var r=CD(CD({},t.props),{},{x1:e,y1:a,x2:e,y2:a+n,key:"line-".concat(s),index:s});return i.renderLineItem(o,r)});return r.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}},{key:"renderVerticalStripes",value:function(e){var t=this.props.verticalFill;if(!t||!t.length)return null;var s=this.props,a=s.fillOpacity,n=s.x,i=s.y,o=s.width,l=s.height,c=e.map(function(e){return Math.round(e+n-n)}).sort(function(e,t){return e-t});n!==c[0]&&c.unshift(0);var d=c.map(function(e,s){var d=c[s+1]?c[s+1]-e:n+o-e;if(d<=0)return null;var u=s%t.length;return r.createElement("rect",{key:"react-".concat(s),x:e,y:i,width:d,height:l,stroke:"none",fill:t[u],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return r.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}},{key:"renderHorizontalStripes",value:function(e){var t=this.props.horizontalFill;if(!t||!t.length)return null;var s=this.props,a=s.fillOpacity,n=s.x,i=s.y,o=s.width,l=s.height,c=e.map(function(e){return Math.round(e+i-i)}).sort(function(e,t){return e-t});i!==c[0]&&c.unshift(0);var d=c.map(function(e,s){var d=c[s+1]?c[s+1]-e:i+l-e;if(d<=0)return null;var u=s%t.length;return r.createElement("rect",{key:"react-".concat(s),y:e,x:n,height:d,width:o,stroke:"none",fill:t[u],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return r.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}},{key:"renderBackground",value:function(){var e=this.props.fill;if(!e||"none"===e)return null;var t=this.props,s=t.fillOpacity,a=t.x,n=t.y,i=t.width,o=t.height;return r.createElement("rect",{x:a,y:n,width:i,height:o,stroke:"none",fill:e,fillOpacity:s,className:"recharts-cartesian-grid-bg"})}},{key:"render",value:function(){var e=this.props,t=e.x,s=e.y,a=e.width,n=e.height,i=e.horizontal,o=e.vertical,l=e.horizontalCoordinatesGenerator,c=e.verticalCoordinatesGenerator,d=e.xAxis,u=e.yAxis,h=e.offset,m=e.chartWidth,p=e.chartHeight;if(!wx(a)||a<=0||!wx(n)||n<=0||!wx(t)||t!==+t||!wx(s)||s!==+s)return null;var x=this.props,g=x.horizontalPoints,f=x.verticalPoints;return g&&g.length||!Ux()(l)||(g=l({yAxis:u,width:m,height:p,offset:h})),f&&f.length||!Ux()(c)||(f=c({xAxis:d,width:m,height:p,offset:h})),r.createElement("g",{className:"recharts-cartesian-grid"},this.renderBackground(),i&&this.renderHorizontal(g),o&&this.renderVertical(f),i&&this.renderHorizontalStripes(g),o&&this.renderVerticalStripes(f))}}],a=[{key:"renderLineItem",value:function(e,t){var s;if(r.isValidElement(e))s=r.cloneElement(e,t);else if(Ux()(e))s=e(t);else{var a=t.x1,n=t.y1,i=t.x2,o=t.y2,l=t.key,c=AD(t,ND);s=r.createElement("line",kD({},LN(c),{x1:a,y1:n,x2:i,y2:o,fill:"none",key:l}))}return s}}],s&&_D(t.prototype,s),a&&_D(t,a),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);DD(OD,"displayName","CartesianGrid"),DD(OD,"defaultProps",{horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]});var RD=["points","className","baseLinePoints","connectNulls"];function ID(){return ID=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},ID.apply(this,arguments)}function LD(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function FD(e){return function(e){if(Array.isArray(e))return BD(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return BD(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return BD(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BD(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}var zD=function(e){return e&&e.x===+e.x&&e.y===+e.y},UD=function(e,t){var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach(function(e){zD(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])}),zD(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(s=[s.reduce(function(e,t){return[].concat(FD(e),FD(t))},[])]);var r=s.map(function(e){return e.reduce(function(e,t,s){return"".concat(e).concat(0===s?"M":"L").concat(t.x,",").concat(t.y)},"")}).join("");return 1===s.length?"".concat(r,"Z"):r},VD=function(e){var t=e.points,s=e.className,a=e.baseLinePoints,n=e.connectNulls,i=LD(e,RD);if(!t||!t.length)return null;var o=Qp()("recharts-polygon",s);if(a&&a.length){var l=i.stroke&&"none"!==i.stroke,c=function(e,t,s){var r=UD(e,s);return"".concat("Z"===r.slice(-1)?r.slice(0,-1):r,"L").concat(UD(t.reverse(),s).slice(1))}(t,a,n);return r.createElement("g",{className:o},r.createElement("path",ID({},LN(i,!0),{fill:"Z"===c.slice(-1)?i.fill:"none",stroke:"none",d:c})),l?r.createElement("path",ID({},LN(i,!0),{fill:"none",d:UD(t,n)})):null,l?r.createElement("path",ID({},LN(i,!0),{fill:"none",d:UD(a,n)})):null)}var d=UD(t,n);return r.createElement("path",ID({},LN(i,!0),{fill:"Z"===d.slice(-1)?i.fill:"none",className:o,d:d}))};function KD(e){return KD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KD(e)}function WD(){return WD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},WD.apply(this,arguments)}function HD(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function qD(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?HD(Object(s),!0).forEach(function(t){QD(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):HD(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function GD(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,XD(r.key),r)}}function YD(e,t){return YD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},YD(e,t)}function $D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(qU){return!1}}();return function(){var s,r=JD(e);if(t){var a=JD(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return function(e,t){if(t&&("object"===KD(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,s)}}function JD(e){return JD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},JD(e)}function QD(e,t,s){return(t=XD(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function XD(e){var t=function(e,t){if("object"!==KD(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==KD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===KD(t)?t:String(t)}var ZD=Math.PI/180,eM=1e-5,tM=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YD(e,t)}(i,e);var t,s,a,n=$D(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return t=i,s=[{key:"getTickLineCoord",value:function(e){var t=this.props,s=t.cx,r=t.cy,a=t.radius,n=t.orientation,i=t.tickSize||8,o=zC(s,r,a,e.coordinate),l=zC(s,r,a+("inner"===n?-1:1)*i,e.coordinate);return{x1:o.x,y1:o.y,x2:l.x,y2:l.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,s=Math.cos(-e.coordinate*ZD);return s>eM?"outer"===t?"start":"end":s<-eM?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,s=e.cy,a=e.radius,n=e.axisLine,i=e.axisLineType,o=qD(qD({},LN(this.props)),{},{fill:"none"},LN(n));if("circle"===i)return r.createElement(dP,WD({className:"recharts-polar-angle-axis-line"},o,{cx:t,cy:s,r:a}));var l=this.props.ticks.map(function(e){return zC(t,s,a,e.coordinate)});return r.createElement(VD,WD({className:"recharts-polar-angle-axis-line"},o,{points:l}))}},{key:"renderTicks",value:function(){var e=this,t=this.props,s=t.ticks,a=t.tick,n=t.tickLine,o=t.tickFormatter,l=t.stroke,c=LN(this.props),d=LN(a),u=qD(qD({},c),{},{fill:"none"},LN(n)),h=s.map(function(t,s){var h=e.getTickLineCoord(t),m=qD(qD(qD({textAnchor:e.getTickTextAnchor(t)},c),{},{stroke:"none",fill:l},d),{},{index:s,payload:t,x:h.x2,y:h.y2});return r.createElement(WN,WD({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(s)},NN(e.props,t,s)),n&&r.createElement("line",WD({className:"recharts-polar-angle-axis-tick-line"},u,h)),a&&i.renderTickItem(a,m,o?o(t.value,s):t.value))});return r.createElement(WN,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var e=this.props,t=e.ticks,s=e.radius,a=e.axisLine;return s<=0||!t||!t.length?null:r.createElement(WN,{className:"recharts-polar-angle-axis"},a&&this.renderAxisLine(),this.renderTicks())}}],a=[{key:"renderTickItem",value:function(e,t,s){return r.isValidElement(e)?r.cloneElement(e,t):Ux()(e)?e(t):r.createElement(EC,WD({},t,{className:"recharts-polar-angle-axis-tick-value"}),s)}}],s&&GD(t.prototype,s),a&&GD(t,a),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);QD(tM,"displayName","PolarAngleAxis"),QD(tM,"axisType","angleAxis"),QD(tM,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var sM=s(9364),rM=s.n(sM),aM=s(2794),nM=s.n(aM),iM=["cx","cy","angle","ticks","axisLine"],oM=["ticks","tick","angle","tickFormatter","stroke"];function lM(e){return lM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lM(e)}function cM(){return cM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},cM.apply(this,arguments)}function dM(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function uM(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?dM(Object(s),!0).forEach(function(t){fM(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):dM(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function hM(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function mM(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yM(r.key),r)}}function pM(e,t){return pM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pM(e,t)}function xM(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(qU){return!1}}();return function(){var s,r=gM(e);if(t){var a=gM(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return function(e,t){if(t&&("object"===lM(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,s)}}function gM(e){return gM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gM(e)}function fM(e,t,s){return(t=yM(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function yM(e){var t=function(e,t){if("object"!==lM(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==lM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===lM(t)?t:String(t)}var bM=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pM(e,t)}(i,e);var t,s,a,n=xM(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return t=i,s=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,s=this.props,r=s.angle,a=s.cx,n=s.cy;return zC(a,n,t,r)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,s=e.cy,r=e.angle,a=e.ticks,n=nM()(a,function(e){return e.coordinate||0});return{cx:t,cy:s,startAngle:r,endAngle:r,innerRadius:rM()(a,function(e){return e.coordinate||0}).coordinate||0,outerRadius:n.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,s=e.cy,a=e.angle,n=e.ticks,i=e.axisLine,o=hM(e,iM),l=n.reduce(function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]},[1/0,-1/0]),c=zC(t,s,l[0],a),d=zC(t,s,l[1],a),u=uM(uM(uM({},LN(o)),{},{fill:"none"},LN(i)),{},{x1:c.x,y1:c.y,x2:d.x,y2:d.y});return r.createElement("line",cM({className:"recharts-polar-radius-axis-line"},u))}},{key:"renderTicks",value:function(){var e=this,t=this.props,s=t.ticks,a=t.tick,n=t.angle,o=t.tickFormatter,l=t.stroke,c=hM(t,oM),d=this.getTickTextAnchor(),u=LN(c),h=LN(a),m=s.map(function(t,s){var c=e.getTickValueCoord(t),m=uM(uM(uM(uM({textAnchor:d,transform:"rotate(".concat(90-n,", ").concat(c.x,", ").concat(c.y,")")},u),{},{stroke:"none",fill:l},h),{},{index:s},c),{},{payload:t});return r.createElement(WN,cM({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(s)},NN(e.props,t,s)),i.renderTickItem(a,m,o?o(t.value,s):t.value))});return r.createElement(WN,{className:"recharts-polar-radius-axis-ticks"},m)}},{key:"render",value:function(){var e=this.props,t=e.ticks,s=e.axisLine,a=e.tick;return t&&t.length?r.createElement(WN,{className:"recharts-polar-radius-axis"},s&&this.renderAxisLine(),a&&this.renderTicks(),t_.renderCallByParent(this.props,this.getViewBox())):null}}],a=[{key:"renderTickItem",value:function(e,t,s){return r.isValidElement(e)?r.cloneElement(e,t):Ux()(e)?e(t):r.createElement(EC,cM({},t,{className:"recharts-polar-radius-axis-tick-value"}),s)}}],s&&mM(t.prototype,s),a&&mM(t,a),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);fM(bM,"displayName","PolarRadiusAxis"),fM(bM,"axisType","radiusAxis"),fM(bM,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var vM=s(2322),jM=s.n(vM);function NM(e){return NM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NM(e)}function wM(){return wM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},wM.apply(this,arguments)}function kM(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function AM(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?kM(Object(s),!0).forEach(function(t){EM(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):kM(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function SM(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,DM(r.key),r)}}function CM(e,t){return CM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},CM(e,t)}function _M(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(qU){return!1}}();return function(){var s,r=PM(e);if(t){var a=PM(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return function(e,t){if(t&&("object"===NM(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return TM(e)}(this,s)}}function TM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PM(e){return PM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},PM(e)}function EM(e,t,s){return(t=DM(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function DM(e){var t=function(e,t){if("object"!==NM(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!==NM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===NM(t)?t:String(t)}var MM=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CM(e,t)}(i,e);var t,s,a,n=_M(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),EM(TM(t=n.call(this,e)),"pieRef",null),EM(TM(t),"sectorRefs",[]),EM(TM(t),"id",Sx("recharts-pie-")),EM(TM(t),"handleAnimationEnd",function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),Ux()(e)&&e()}),EM(TM(t),"handleAnimationStart",function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),Ux()(e)&&e()}),t.state={isAnimationFinished:!e.isAnimationActive,prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,sectorToFocus:0},t}return t=i,s=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"hasActiveIndex",value:function(){var e=this.props.activeIndex;return Array.isArray(e)?0!==e.length:e||0===e}},{key:"renderLabels",value:function(e){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var t=this.props,s=t.label,a=t.labelLine,n=t.dataKey,o=t.valueKey,l=LN(this.props),c=LN(s),d=LN(a),u=s&&s.offsetRadius||20,h=e.map(function(e,t){var h=(e.startAngle+e.endAngle)/2,m=zC(e.cx,e.cy,e.outerRadius+u,h),p=AM(AM(AM(AM({},l),e),{},{stroke:"none"},c),{},{index:t,textAnchor:i.getTextAnchor(m.x,e.cx)},m),x=AM(AM(AM(AM({},l),e),{},{fill:"none",stroke:e.fill},d),{},{index:t,points:[zC(e.cx,e.cy,e.outerRadius,h),m],key:"line"}),g=n;return Gx()(n)&&Gx()(o)?g="value":Gx()(n)&&(g=o),r.createElement(WN,{key:"label-".concat(t)},a&&i.renderLabelLineItem(a,x),i.renderLabelItem(s,p,Rk(e,g)))});return r.createElement(WN,{className:"recharts-pie-labels"},h)}},{key:"renderSectorsStatically",value:function(e){var t=this,s=this.props,a=s.activeShape,n=s.blendStroke,o=s.inactiveShape;return e.map(function(e,s){var l=o&&t.hasActiveIndex()?o:null,c=t.isActiveIndex(s)?a:l,d=AM(AM({},e),{},{stroke:n?e.fill:e.stroke});return r.createElement(WN,wM({ref:function(e){e&&!t.sectorRefs.includes(e)&&t.sectorRefs.push(e)},tabIndex:-1,className:"recharts-pie-sector"},NN(t.props,e,s),{key:"sector-".concat(s)}),i.renderSectorItem(c,d))})}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,s=t.sectors,a=t.isAnimationActive,n=t.animationBegin,i=t.animationDuration,o=t.animationEasing,l=t.animationId,c=this.state,d=c.prevSectors,u=c.prevIsAnimationActive;return r.createElement(rC,{begin:n,duration:i,isActive:a,easing:o,from:{t:0},to:{t:1},key:"pie-".concat(l,"-").concat(u),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(t){var a=t.t,n=[],i=(s&&s[0]).startAngle;return s.forEach(function(e,t){var s=d&&d[t],r=t>0?hx()(e,"paddingAngle",0):0;if(s){var o=Tx(s.endAngle-s.startAngle,e.endAngle-e.startAngle),l=AM(AM({},e),{},{startAngle:i+r,endAngle:i+o(a)+r});n.push(l),i=l.endAngle}else{var c=e.endAngle,u=e.startAngle,h=Tx(0,c-u)(a),m=AM(AM({},e),{},{startAngle:i+r,endAngle:i+h+r});n.push(m),i=m.endAngle}}),r.createElement(WN,null,e.renderSectorsStatically(n))})}},{key:"attachKeyboardHandlers",value:function(e){var t=this;e.onkeydown=function(e){if(!e.altKey)switch(e.key){case"ArrowLeft":var s=++t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[s].focus(),t.setState({sectorToFocus:s});break;case"ArrowRight":var r=--t.state.sectorToFocus<0?t.sectorRefs.length-1:t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[r].focus(),t.setState({sectorToFocus:r});break;case"Escape":t.sectorRefs[t.state.sectorToFocus].blur(),t.setState({sectorToFocus:0})}}}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,s=e.isAnimationActive,r=this.state.prevSectors;return!(s&&t&&t.length)||r&&mg()(r,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var e=this,t=this.props,s=t.hide,a=t.sectors,n=t.className,i=t.label,o=t.cx,l=t.cy,c=t.innerRadius,d=t.outerRadius,u=t.isAnimationActive,h=this.state.isAnimationFinished;if(s||!a||!a.length||!wx(o)||!wx(l)||!wx(c)||!wx(d))return null;var m=Qp()("recharts-pie",n);return r.createElement(WN,{tabIndex:this.props.rootTabIndex,className:m,ref:function(t){e.pieRef=t}},this.renderSectors(),i&&this.renderLabels(a),t_.renderCallByParent(this.props,null,!1),(!u||h)&&p_.renderCallByParent(this.props,a,!1))}}],a=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[],isAnimationFinished:!0}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors,isAnimationFinished:!0}:e.sectors!==t.curSectors?{curSectors:e.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):Ux()(e)?e(t):r.createElement(HT,wM({},t,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(e,t,s){if(r.isValidElement(e))return r.cloneElement(e,t);var a=s;return Ux()(e)&&(a=e(t),r.isValidElement(a))?a:r.createElement(EC,wM({},t,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),a)}},{key:"renderSectorItem",value:function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):Ux()(e)?e(t):jM()(e)?r.createElement(lP,wM({tabIndex:-1},t,e)):r.createElement(lP,wM({tabIndex:-1},t))}}],s&&SM(t.prototype,s),a&&SM(t,a),Object.defineProperty(t,"prototype",{writable:!1}),i}(r.PureComponent);EM(MM,"displayName","Pie"),EM(MM,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Jx.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0}),EM(MM,"parseDeltaAngle",function(e,t){return jx(t-e)*Math.min(Math.abs(t-e),360)}),EM(MM,"getRealPieData",function(e){var t=e.props,s=t.data,r=t.children,a=LN(e.props),n=DN(r,xC);return s&&s.length?s.map(function(e,t){return AM(AM(AM({payload:e},a),e),n&&n[t]&&n[t].props)}):n&&n.length?n.map(function(e){return AM(AM({},a),e.props)}):[]}),EM(MM,"parseCoordinateOfPie",function(e,t){var s=t.top,r=t.left,a=t.width,n=t.height,i=UC(a,n);return{cx:r+Cx(e.props.cx,a,a/2),cy:s+Cx(e.props.cy,n,n/2),innerRadius:Cx(e.props.innerRadius,i,0),outerRadius:Cx(e.props.outerRadius,i,.8*i),maxRadius:e.props.maxRadius||Math.sqrt(a*a+n*n)/2}}),EM(MM,"getComposedData",function(e){var t=e.item,s=e.offset,r=MM.getRealPieData(t);if(!r||!r.length)return null;var a=t.props,n=a.cornerRadius,i=a.startAngle,o=a.endAngle,l=a.paddingAngle,c=a.dataKey,d=a.nameKey,u=a.valueKey,h=a.tooltipType,m=Math.abs(t.props.minAngle),p=MM.parseCoordinateOfPie(t,s),x=MM.parseDeltaAngle(i,o),g=Math.abs(x),f=c;Gx()(c)&&Gx()(u)?(Ex(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),f="value"):Gx()(c)&&(Ex(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),f=u);var y,b,v=r.filter(function(e){return 0!==Rk(e,f,0)}).length,j=g-v*m-(g>=360?v:v-1)*l,N=r.reduce(function(e,t){var s=Rk(t,f,0);return e+(wx(s)?s:0)},0);N>0&&(y=r.map(function(e,t){var s,r=Rk(e,f,0),a=Rk(e,d,t),o=(wx(r)?r:0)/N,c=(s=t?b.endAngle+jx(x)*l*(0!==r?1:0):i)+jx(x)*((0!==r?m:0)+o*j),u=(s+c)/2,g=(p.innerRadius+p.outerRadius)/2,y=[{name:a,value:r,payload:e,dataKey:f,type:h}],v=zC(p.cx,p.cy,g,u);return b=AM(AM(AM({percent:o,cornerRadius:n,name:a,tooltipPayload:y,midAngle:u,middleRadius:g,tooltipPosition:v},e),p),{},{value:Rk(e,f),startAngle:s,endAngle:c,payload:e,paddingAngle:jx(x)*l})}));return AM(AM({},p),{},{sectors:y,data:r})});var OM=sD({chartName:"PieChart",GraphicalChild:MM,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:tM},{axisType:"radiusAxis",AxisComp:bM}],formatAxisMap:function(e,t,s,r,a){var n=e.width,i=e.height,o=e.startAngle,l=e.endAngle,c=Cx(e.cx,n,n/2),d=Cx(e.cy,i,i/2),u=UC(n,i,s),h=Cx(e.innerRadius,u,0),m=Cx(e.outerRadius,u,.8*u);return Object.keys(t).reduce(function(e,s){var n,i=t[s],u=i.domain,p=i.reversed;if(Gx()(i.range))"angleAxis"===r?n=[o,l]:"radiusAxis"===r&&(n=[h,m]),p&&(n=[n[1],n[0]]);else{var x=IC(n=i.range,2);o=x[0],l=x[1]}var g=Hk(i,a),f=g.realScaleType,y=g.scale;y.domain(u).range(n),Gk(y);var b=Jk(y,OC(OC({},i),{},{realScaleType:f})),v=OC(OC(OC({},i),b),{},{range:n,radius:m,realScaleType:f,scale:y,cx:c,cy:d,innerRadius:h,outerRadius:m,startAngle:o,endAngle:l});return OC(OC({},e),{},RC({},s,v))},{})},defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const RM=e=>{let{trip:t,index:s,onAction:a,isLoading:n}=e;const[i,o]=(0,r.useState)(!1),l=new Date(t.startTime),c=new Date(t.endTime),d=new Date(t.date),u=e=>{switch(e){case"completed":return"bg-green-500";case"in-progress":return"bg-blue-500";case"scheduled":return"bg-yellow-500";case"cancelled":return"bg-red-500";default:return"bg-gray-500"}},h=e=>{switch(e){case"completed":return"Completed";case"in-progress":return"In Progress";case"scheduled":return"Scheduled";case"cancelled":return"Cancelled";default:return"Unknown"}},m=Math.round(t.bookedSeats/t.capacity*100);return(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-300",children:[(0,cs.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 border-b border-gray-200",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg",children:(0,cs.jsx)(ks.A,{className:"w-6 h-6 text-white"})}),(0,cs.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full border-2 border-white ".concat(u(t.status))})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-xl font-bold text-gray-900",children:t.busNumber}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:t.route})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-bold text-white ".concat(u(t.status)),children:h(t.status)}),(0,cs.jsx)("button",{onClick:()=>o(!i),className:"p-2 bg-white rounded-lg shadow-sm hover:shadow-md transition-all duration-200",children:i?(0,cs.jsx)(lm.A,{className:"w-4 h-4 text-gray-600"}):(0,cs.jsx)(qd.A,{className:"w-4 h-4 text-gray-600"})})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,cs.jsxs)("div",{className:"text-center p-3 bg-white rounded-lg shadow-sm",children:[(0,cs.jsx)(sd.A,{className:"w-5 h-5 text-blue-500 mx-auto mb-1"}),(0,cs.jsx)("p",{className:"text-sm font-bold text-gray-900",children:l.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}),(0,cs.jsx)("p",{className:"text-xs text-gray-600",children:"Departure"})]}),(0,cs.jsxs)("div",{className:"text-center p-3 bg-white rounded-lg shadow-sm",children:[(0,cs.jsx)(sd.A,{className:"w-5 h-5 text-green-500 mx-auto mb-1"}),(0,cs.jsx)("p",{className:"text-sm font-bold text-gray-900",children:c.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}),(0,cs.jsx)("p",{className:"text-xs text-gray-600",children:"Arrival"})]}),(0,cs.jsxs)("div",{className:"text-center p-3 bg-white rounded-lg shadow-sm",children:[(0,cs.jsx)(Ss.A,{className:"w-5 h-5 text-purple-500 mx-auto mb-1"}),(0,cs.jsxs)("p",{className:"text-sm font-bold text-gray-900",children:[t.bookedSeats,"/",t.capacity]}),(0,cs.jsx)("p",{className:"text-xs text-gray-600",children:"Occupancy"})]}),(0,cs.jsxs)("div",{className:"text-center p-3 bg-white rounded-lg shadow-sm",children:[(0,cs.jsx)(Fp.A,{className:"w-5 h-5 text-orange-500 mx-auto mb-1"}),(0,cs.jsxs)("p",{className:"text-sm font-bold text-gray-900",children:["\u20b9",t.fare]}),(0,cs.jsx)("p",{className:"text-xs text-gray-600",children:"Fare"})]})]})]}),(0,cs.jsxs)("div",{className:"p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h5",{className:"text-lg font-bold text-gray-900",children:"Trip Details"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:d.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsx)("p",{className:"text-sm font-bold text-gray-900",children:t.driver}),(0,cs.jsx)("p",{className:"text-xs text-gray-600",children:"Driver"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,cs.jsx)("div",{className:"flex-1",children:(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,cs.jsx)(gs.A,{className:"w-4 h-4 text-green-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-bold text-gray-900",children:t.departure}),(0,cs.jsx)("p",{className:"text-xs text-gray-600",children:"Departure"})]})]})}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("div",{className:"w-8 h-0.5 bg-gray-300"}),(0,cs.jsx)(ks.A,{className:"w-4 h-4 text-gray-400"}),(0,cs.jsx)("div",{className:"w-8 h-0.5 bg-gray-300"})]}),(0,cs.jsx)("div",{className:"flex-1",children:(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,cs.jsx)(gs.A,{className:"w-4 h-4 text-red-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-bold text-gray-900",children:t.arrival}),(0,cs.jsx)("p",{className:"text-xs text-gray-600",children:"Arrival"})]})]})})]}),(0,cs.jsxs)("div",{className:"mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Occupancy"}),(0,cs.jsxs)("span",{className:"text-sm font-bold text-gray-900",children:[m,"%"]})]}),(0,cs.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,cs.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(m>80?"bg-red-500":m>60?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(m,"%")}})})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("button",{onClick:()=>a(t._id,"start"),disabled:n||"completed"===t.status,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"in-progress"===t.status?"In Progress":"Start Trip"}),(0,cs.jsx)("button",{onClick:()=>a(t._id,"view"),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-all duration-200 text-sm font-medium",children:"View Details"}),(0,cs.jsx)("button",{onClick:()=>a(t._id,"edit"),disabled:"completed"===t.status,className:"px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Edit"})]}),i&&(0,cs.jsx)(ed.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 pt-4 border-t border-gray-200",children:(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h6",{className:"text-sm font-bold text-gray-700 mb-2",children:"Trip Information"}),(0,cs.jsxs)("div",{className:"space-y-2",children:[(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Duration:"}),(0,cs.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[Math.round((c-l)/36e5)," hours"]})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Available Seats:"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-900",children:t.capacity-t.bookedSeats})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Trip ID:"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-900",children:t._id})]})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h6",{className:"text-sm font-bold text-gray-700 mb-2",children:"Performance"}),(0,cs.jsxs)("div",{className:"space-y-2",children:[(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Revenue:"}),(0,cs.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["\u20b9",t.bookedSeats*t.fare]})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Efficiency:"}),(0,cs.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[m,"%"]})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Status:"}),(0,cs.jsx)("span",{className:"text-sm font-medium ".concat(u(t.status).replace("bg-","text-")),children:h(t.status)})]})]})]})]})})]})]})},IM=e=>{var t,s,a,n,i,o,l,c,d,u,h,m,p,x,g,f,y,b,v,j,N,w,k,A,S,C,_,T,P,E,D,M;let{bus:O,index:R,busStatus:I,busFeatures:L,onAction:F,onToggleFeature:B,onViewDetails:z,isLoading:U}=e;const[V,K]=(0,r.useState)(!1),[W,H]=(0,r.useState)(!1),q="start"===I,G=L||{},Y=[{title:"Ordinary",subtitle:"due to the Sabirimala",busId:O.busNumber||"KL02H0355",route:(null===(t=O.route)||void 0===t?void 0:t.name)||"National Express",timing:null!==(s=O.schedule)&&void 0!==s&&s.startTime&&null!==(a=O.schedule)&&void 0!==a&&a.endTime?"".concat(O.schedule.startTime," - ").concat(O.schedule.endTime):"08:00 - 11:45",driver:(null===(n=O.driver)||void 0===n?void 0:n.name)||"Ram",seats:O.capacity||38,price:O.fare||200,status:O.status||"normal trips",performance:{target:(null===(i=O.insights)||void 0===i?void 0:i.performanceScore)||85,occupancy:(null===(o=O.insights)||void 0===o?void 0:o.occupancyRate)||72,efficiency:(null===(l=O.insights)||void 0===l?void 0:l.efficiencyScore)||98},fuelLevel:(null===(c=O.fuel)||void 0===c?void 0:c.currentLevel)||75,temperature:(null===(d=O.sensors)||void 0===d?void 0:d.temperature)||24,speed:(null===(u=O.currentLocation)||void 0===u?void 0:u.speed)||0,distance:(null===(h=O.trip)||void 0===h?void 0:h.distance)||0,nextStop:(null===(m=O.route)||void 0===m?void 0:m.nextStop)||"Central Station",eta:(null===(p=O.route)||void 0===p?void 0:p.eta)||"15 min",signalStrength:(null===(x=O.connectivity)||void 0===x?void 0:x.signalStrength)||85,batteryLevel:(null===(g=O.systems)||void 0===g?void 0:g.batteryLevel)||92,passengerCount:(null===(f=O.passengers)||void 0===f?void 0:f.current)||28,maxPassengers:O.capacity||38,lastUpdate:O.lastUpdate||new Date,alerts:O.alerts||[],maintenance:O.maintenance||{nextService:"2024-02-15",mileage:45e3}},{title:"MINNAL",subtitle:"FASREST",busId:O.busNumber||"AI-Assigned",route:(null===(y=O.route)||void 0===y?void 0:y.name)||"Dynamic Route",timing:null!==(b=O.schedule)&&void 0!==b&&b.startTime&&null!==(v=O.schedule)&&void 0!==v&&v.endTime?"".concat(O.schedule.startTime," - ").concat(O.schedule.endTime):"13:05 - 16:37",driver:(null===(j=O.driver)||void 0===j?void 0:j.name)||"Ram",seats:O.capacity||30,price:O.fare||130,status:O.status||"Correct timing",performance:{target:(null===(N=O.insights)||void 0===N?void 0:N.performanceScore)||85,occupancy:(null===(w=O.insights)||void 0===w?void 0:w.occupancyRate)||72,efficiency:(null===(k=O.insights)||void 0===k?void 0:k.efficiencyScore)||98},fuelLevel:(null===(A=O.fuel)||void 0===A?void 0:A.currentLevel)||45,temperature:(null===(S=O.sensors)||void 0===S?void 0:S.temperature)||26,speed:(null===(C=O.currentLocation)||void 0===C?void 0:C.speed)||0,distance:(null===(_=O.trip)||void 0===_?void 0:_.distance)||0,nextStop:(null===(T=O.route)||void 0===T?void 0:T.nextStop)||"Airport Terminal",eta:(null===(P=O.route)||void 0===P?void 0:P.eta)||"8 min",signalStrength:(null===(E=O.connectivity)||void 0===E?void 0:E.signalStrength)||78,batteryLevel:(null===(D=O.systems)||void 0===D?void 0:D.batteryLevel)||88,passengerCount:(null===(M=O.passengers)||void 0===M?void 0:M.current)||22,maxPassengers:O.capacity||30,lastUpdate:O.lastUpdate||new Date,alerts:O.alerts||[],maintenance:O.maintenance||{nextService:"2024-02-20",mileage:52e3}}],$=Y[R]||Y[0];return(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*R},className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden hover:shadow-2xl transition-all duration-500",children:[(0,cs.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-8 border-b border-gray-200",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)("div",{className:"p-4 bg-gradient-to-br from-red-500 to-red-600 rounded-3xl shadow-xl",children:(0,cs.jsx)(Rs,{className:"w-10 h-10 text-white"})}),(0,cs.jsx)("div",{className:"absolute -top-2 -right-2 w-6 h-6 rounded-full border-3 border-white ".concat(q?"bg-green-500 animate-pulse":"bg-gray-400")})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-4xl font-bold text-gray-900 mb-2",children:$.title}),(0,cs.jsx)("p",{className:"text-lg text-gray-600 font-medium mb-3",children:$.subtitle}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("span",{className:"text-sm bg-blue-100 text-blue-700 px-4 py-2 rounded-full font-bold",children:$.busId}),(0,cs.jsx)("span",{className:"text-sm px-4 py-2 rounded-full font-bold ".concat(q?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:q?"ACTIVE":"INACTIVE"})]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[$.signalStrength>80?(0,cs.jsx)(Bp,{className:"w-6 h-6 text-green-500"}):$.signalStrength>50?(0,cs.jsx)(Id,{className:"w-6 h-6 text-yellow-500"}):(0,cs.jsx)(zp,{className:"w-6 h-6 text-red-500"}),(0,cs.jsxs)("span",{className:"text-sm font-bold text-gray-600",children:[$.signalStrength,"%"]})]}),(0,cs.jsx)(Rd,{className:"w-6 h-6 text-gray-500"}),(0,cs.jsx)(Ss.A,{className:"w-6 h-6 text-gray-500"}),(0,cs.jsx)(Tm,{className:"w-6 h-6 text-gray-500"})]}),(0,cs.jsx)("button",{onClick:()=>K(!V),className:"p-3 bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",children:V?(0,cs.jsx)(lm.A,{className:"w-6 h-6 text-gray-600"}):(0,cs.jsx)(qd.A,{className:"w-6 h-6 text-gray-600"})})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between bg-white rounded-2xl p-5 shadow-lg",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)(Ld,{className:"w-6 h-6 text-green-500"}),(0,cs.jsxs)("span",{className:"text-lg font-bold text-gray-700",children:[$.batteryLevel,"%"]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)(Fm,{className:"w-6 h-6 text-blue-500"}),(0,cs.jsxs)("span",{className:"text-lg font-bold text-gray-700",children:[$.fuelLevel,"%"]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)(Up,{className:"w-6 h-6 text-orange-500"}),(0,cs.jsxs)("span",{className:"text-lg font-bold text-gray-700",children:[$.temperature,"\xb0C"]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)(Bm,{className:"w-6 h-6 text-purple-500"}),(0,cs.jsxs)("span",{className:"text-lg font-bold text-gray-700",children:[$.speed," km/h"]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(Ss.A,{className:"w-6 h-6 text-gray-500"}),(0,cs.jsxs)("span",{className:"text-lg font-bold text-gray-700",children:[$.passengerCount,"/",$.maxPassengers]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(gs.A,{className:"w-6 h-6 text-gray-500"}),(0,cs.jsx)("span",{className:"text-lg font-bold text-gray-700",children:$.nextStop})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(Vp,{className:"w-6 h-6 text-gray-500"}),(0,cs.jsx)("span",{className:"text-lg font-bold text-gray-700",children:$.eta})]})]})]})]}),(0,cs.jsxs)("div",{className:"p-8",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,cs.jsx)("h5",{className:"text-2xl font-bold text-gray-900",children:"Control Panel"}),(0,cs.jsx)("div",{className:"flex items-center space-x-3",children:(0,cs.jsx)("button",{onClick:()=>H(!W),className:"p-3 bg-gray-100 text-gray-600 rounded-xl hover:bg-gray-200 transition-all duration-200",children:(0,cs.jsx)(Kp,{className:"w-6 h-6"})})})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,cs.jsx)("button",{onClick:()=>F(O._id,q?"stop":"start"),disabled:U,className:"p-6 rounded-3xl text-lg font-bold transition-all duration-300 disabled:opacity-50 shadow-xl hover:shadow-2xl ".concat(q?"bg-gradient-to-br from-red-500 to-red-600 text-white hover:from-red-600 hover:to-red-700":"bg-gradient-to-br from-green-500 to-green-600 text-white hover:from-green-600 hover:to-green-700"),children:(0,cs.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[q?(0,cs.jsx)(Pm,{className:"w-8 h-8"}):(0,cs.jsx)(md.A,{className:"w-8 h-8"}),(0,cs.jsx)("span",{children:q?"Stop":"Start"})]})}),(0,cs.jsx)("button",{onClick:()=>F(O._id,"ai_boost"),disabled:U,className:"p-6 bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-3xl text-lg font-bold hover:from-purple-600 hover:to-purple-700 transition-all duration-300 disabled:opacity-50 shadow-xl hover:shadow-2xl",children:(0,cs.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,cs.jsx)(Vm,{className:"w-8 h-8"}),(0,cs.jsx)("span",{children:"AI Boost"})]})}),(0,cs.jsx)("button",{onClick:()=>F(O._id,"analytics"),disabled:U,className:"p-6 bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-3xl text-lg font-bold hover:from-blue-600 hover:to-blue-700 transition-all duration-300 disabled:opacity-50 shadow-xl hover:shadow-2xl",children:(0,cs.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,cs.jsx)(js.A,{className:"w-8 h-8"}),(0,cs.jsx)("span",{children:"Analytics"})]})}),(0,cs.jsx)("button",{onClick:z,className:"p-6 bg-gradient-to-br from-gray-500 to-gray-600 text-white rounded-3xl text-lg font-bold hover:from-gray-600 hover:to-gray-700 transition-all duration-300 shadow-xl hover:shadow-2xl",children:(0,cs.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,cs.jsx)(Nu.A,{className:"w-8 h-8"}),(0,cs.jsx)("span",{children:"Details"})]})})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,cs.jsx)("button",{onClick:()=>F(O._id,"add"),disabled:U,className:"p-4 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all duration-200 disabled:opacity-50",title:"Add Feature",children:(0,cs.jsx)(bu.A,{className:"w-6 h-6"})}),(0,cs.jsx)("button",{onClick:()=>F(O._id,"edit"),disabled:U,className:"p-4 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all duration-200 disabled:opacity-50",title:"Edit Bus",children:(0,cs.jsx)(Kh.A,{className:"w-6 h-6"})}),(0,cs.jsx)("button",{onClick:()=>F(O._id,"share"),disabled:U,className:"p-4 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all duration-200 disabled:opacity-50",title:"Share Bus Info",children:(0,cs.jsx)(Wp,{className:"w-6 h-6"})}),(0,cs.jsx)("button",{onClick:()=>F(O._id,"download"),disabled:U,className:"p-4 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all duration-200 disabled:opacity-50",title:"Download Report",children:(0,cs.jsx)(hd.A,{className:"w-6 h-6"})}),(0,cs.jsx)("button",{onClick:()=>F(O._id,"bookmark"),disabled:U,className:"p-4 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all duration-200 disabled:opacity-50",title:"Bookmark Bus",children:(0,cs.jsx)(Hp,{className:"w-6 h-6"})})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-6 p-6 bg-gradient-to-r from-blue-50 to-blue-100 rounded-3xl border border-blue-200 shadow-lg",children:[(0,cs.jsx)("div",{className:"p-4 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl shadow-xl",children:(0,cs.jsx)(ks.A,{className:"w-8 h-8 text-white"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-base font-bold text-blue-600 uppercase tracking-wide mb-1",children:"SMART BUS"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:$.busId}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600",children:["Fleet ID: ",$.busId]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-6 p-6 bg-gradient-to-r from-green-50 to-green-100 rounded-3xl border border-green-200 shadow-lg",children:[(0,cs.jsx)("div",{className:"p-4 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl shadow-xl",children:(0,cs.jsx)(As.A,{className:"w-8 h-8 text-white"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-base font-bold text-green-600 uppercase tracking-wide mb-1",children:"ROUTE"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:$.route}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600",children:["Next: ",$.nextStop]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-6 p-6 bg-gradient-to-r from-purple-50 to-purple-100 rounded-3xl border border-purple-200 shadow-lg",children:[(0,cs.jsx)("div",{className:"p-4 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl shadow-xl",children:(0,cs.jsx)(sd.A,{className:"w-8 h-8 text-white"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-base font-bold text-purple-600 uppercase tracking-wide mb-1",children:"SMART TIMING"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:$.timing}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600",children:["ETA: ",$.eta]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-6 p-6 bg-gradient-to-r from-orange-50 to-orange-100 rounded-3xl border border-orange-200 shadow-lg",children:[(0,cs.jsx)("div",{className:"p-4 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl shadow-xl",children:(0,cs.jsx)(Ts.A,{className:"w-8 h-8 text-white"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-base font-bold text-orange-600 uppercase tracking-wide mb-1",children:"DRIVER"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:$.driver}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Experience: 5+ years"})]})]})]}),(0,cs.jsxs)("div",{className:"mb-8",children:[(0,cs.jsx)("h6",{className:"text-xl font-bold text-gray-700 mb-4",children:"System Features"}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,cs.jsx)("button",{onClick:()=>B(O._id,"live_tracking"),className:"p-4 rounded-2xl text-sm font-bold transition-all duration-300 shadow-lg hover:shadow-xl ".concat(G.live_tracking?"bg-gradient-to-br from-blue-500 to-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:(0,cs.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,cs.jsx)(Ls,{className:"w-6 h-6"}),(0,cs.jsx)("span",{children:"Live Tracking"})]})}),(0,cs.jsx)("button",{onClick:()=>B(O._id,"gps"),className:"p-4 rounded-2xl text-sm font-bold transition-all duration-300 shadow-lg hover:shadow-xl ".concat(G.gps?"bg-gradient-to-br from-green-500 to-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:(0,cs.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,cs.jsx)(gs.A,{className:"w-6 h-6"}),(0,cs.jsx)("span",{children:"GPS"})]})}),(0,cs.jsx)("button",{onClick:()=>B(O._id,"communication"),className:"p-4 rounded-2xl text-sm font-bold transition-all duration-300 shadow-lg hover:shadow-xl ".concat(G.communication?"bg-gradient-to-br from-purple-500 to-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:(0,cs.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,cs.jsx)(qp,{className:"w-6 h-6"}),(0,cs.jsx)("span",{children:"Comm"})]})}),(0,cs.jsx)("button",{onClick:()=>B(O._id,"emergency"),className:"p-4 rounded-2xl text-sm font-bold transition-all duration-300 shadow-lg hover:shadow-xl ".concat(G.emergency?"bg-gradient-to-br from-red-500 to-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:(0,cs.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,cs.jsx)(Vs,{className:"w-6 h-6"}),(0,cs.jsx)("span",{children:"Emergency"})]})}),(0,cs.jsx)("button",{onClick:()=>B(O._id,"ai_boost"),className:"p-4 rounded-2xl text-sm font-bold transition-all duration-300 shadow-lg hover:shadow-xl ".concat(G.ai_boost?"bg-gradient-to-br from-pink-500 to-pink-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:(0,cs.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,cs.jsx)(pd,{className:"w-6 h-6"}),(0,cs.jsx)("span",{children:"AI Boost"})]})})]})]}),V&&(0,cs.jsx)(ed.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-8",children:(0,cs.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-3xl p-8 border border-gray-200 shadow-lg",children:[(0,cs.jsx)("h6",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Detailed Information"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h7",{className:"text-lg font-bold text-gray-700",children:"System Status"}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("span",{className:"text-base text-gray-600",children:"Engine"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,cs.jsx)("span",{className:"text-base font-bold text-gray-900",children:"Running"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("span",{className:"text-base text-gray-600",children:"Brakes"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,cs.jsx)("span",{className:"text-base font-bold text-gray-900",children:"OK"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("span",{className:"text-base text-gray-600",children:"Tires"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),(0,cs.jsx)("span",{className:"text-base font-bold text-gray-900",children:"Check"})]})]})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h7",{className:"text-lg font-bold text-gray-700",children:"Passenger Information"}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("span",{className:"text-base text-gray-600",children:"Current"}),(0,cs.jsx)("span",{className:"text-lg font-bold text-gray-900",children:$.passengerCount})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("span",{className:"text-base text-gray-600",children:"Capacity"}),(0,cs.jsx)("span",{className:"text-lg font-bold text-gray-900",children:$.maxPassengers})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("span",{className:"text-base text-gray-600",children:"Occupancy"}),(0,cs.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:[Math.round($.passengerCount/$.maxPassengers*100),"%"]})]})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h7",{className:"text-lg font-bold text-gray-700",children:"Maintenance"}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("span",{className:"text-base text-gray-600",children:"Next Service"}),(0,cs.jsx)("span",{className:"text-lg font-bold text-gray-900",children:$.maintenance.nextService})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("span",{className:"text-base text-gray-600",children:"Mileage"}),(0,cs.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:[$.maintenance.mileage.toLocaleString()," km"]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("span",{className:"text-base text-gray-600",children:"Last Update"}),(0,cs.jsx)("span",{className:"text-lg font-bold text-gray-900",children:new Date($.lastUpdate).toLocaleTimeString()})]})]})]})]})]})}),(0,cs.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-3xl p-6 mb-8 border border-indigo-200 shadow-lg",children:[(0,cs.jsx)("h6",{className:"text-xl font-bold text-gray-700 mb-4",children:"Service Information"}),(0,cs.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("div",{className:"p-3 bg-indigo-500 rounded-xl",children:(0,cs.jsx)(fs.A,{className:"w-6 h-6 text-white"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Schedule"}),(0,cs.jsx)("p",{className:"text-lg font-bold text-gray-900",children:"Daily"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("div",{className:"p-3 bg-green-500 rounded-xl",children:(0,cs.jsx)(Ss.A,{className:"w-6 h-6 text-white"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Capacity"}),(0,cs.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:[$.seats," Smart Seats"]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("div",{className:"p-3 bg-yellow-500 rounded-xl",children:(0,cs.jsx)(Fp.A,{className:"w-6 h-6 text-white"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Fare"}),(0,cs.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:["\u20b9",$.price]})]})]})]})]}),(0,cs.jsxs)("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 rounded-3xl p-6 mb-8 border border-emerald-200 shadow-lg",children:[(0,cs.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("div",{className:"p-3 bg-yellow-500 rounded-xl",children:(0,cs.jsx)(vd.A,{className:"w-7 h-7 text-white"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:["Status: ",$.status]}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600",children:["Last updated: ",new Date($.lastUpdate).toLocaleTimeString()]})]})]})}),(0,cs.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,cs.jsxs)("div",{className:"text-center p-5 bg-white rounded-2xl shadow-lg",children:[(0,cs.jsx)("div",{className:"flex items-center justify-center mb-3",children:(0,cs.jsx)(Fp.A,{className:"w-8 h-8 text-blue-500"})}),(0,cs.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[$.performance.target,"%"]}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Performance"})]}),(0,cs.jsxs)("div",{className:"text-center p-5 bg-white rounded-2xl shadow-lg",children:[(0,cs.jsx)("div",{className:"flex items-center justify-center mb-3",children:(0,cs.jsx)(Ss.A,{className:"w-8 h-8 text-green-500"})}),(0,cs.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[$.performance.occupancy,"%"]}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Occupancy"})]}),(0,cs.jsxs)("div",{className:"text-center p-5 bg-white rounded-2xl shadow-lg",children:[(0,cs.jsx)("div",{className:"flex items-center justify-center mb-3",children:(0,cs.jsx)(Bm,{className:"w-8 h-8 text-purple-500"})}),(0,cs.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[$.performance.efficiency,"%"]}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Efficiency"})]})]})]})]}),(0,cs.jsx)("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-8 py-6 border-t border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-blue-500 rounded-xl",children:(0,cs.jsx)(Gp,{className:"w-6 h-6 text-white"})}),(0,cs.jsx)("span",{className:"text-lg font-bold text-gray-700",children:"Cloud Sync"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)(fs.A,{className:"w-6 h-6 text-gray-500"}),(0,cs.jsx)("span",{className:"text-lg font-bold text-gray-700",children:(new Date).toLocaleDateString()})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-green-500 rounded-xl",children:(0,cs.jsx)(Ps,{className:"w-6 h-6 text-white"})}),(0,cs.jsx)("span",{className:"text-lg font-bold text-gray-700",children:"Active"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("button",{onClick:()=>F(O._id,"fingerprint"),className:"p-3 bg-white text-gray-600 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",title:"Biometric Access",children:(0,cs.jsx)(Yp,{className:"w-6 h-6"})}),(0,cs.jsx)("button",{onClick:()=>F(O._id,"qr"),className:"p-3 bg-white text-gray-600 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",title:"QR Code",children:(0,cs.jsx)(nm.A,{className:"w-6 h-6"})}),(0,cs.jsx)("button",{onClick:()=>F(O._id,"verify"),className:"p-3 bg-white text-gray-600 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",title:"System Verification",children:(0,cs.jsx)(jd.A,{className:"w-6 h-6"})})]})]})})]})},LM=e=>{var t,s,a,n,i;let{buses:o=[],onClose:l}=e;const[c,d]=(0,r.useState)("week"),[u,h]=(0,r.useState)(!1),[m,p]=(0,r.useState)(null),[x,g]=(0,r.useState)(new Date),[f,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),[j,N]=(0,r.useState)(null),[w,k]=(0,r.useState)(null),[A,S]=(0,r.useState)(!1),[C,_]=(0,r.useState)({}),[T,P]=(0,r.useState)({}),[E,D]=(0,r.useState)(!0),[M,O]=(0,r.useState)([]),[R,I]=(0,r.useState)(!0),[L,F]=(0,r.useState)(!1),B=e=>{const t=[];return e._id||t.push("Missing bus ID"),e.busNumber||t.push("Missing bus number"),e.status||t.push("Missing status"),t},z=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=localStorage.getItem("token");if(!s)return p("Authentication token not found"),null;const r={headers:(0,Ie.A)({Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},t.headers)};try{const s=await fetch(e,Object.assign({},r,t));if(!s.ok){const e=await s.json().catch(()=>({}));throw new Error(e.message||"HTTP ".concat(s.status,": ").concat(s.statusText))}return await s.json()}catch(a){throw console.error("API call failed for ".concat(e,":"),a),a}},U=(0,r.useCallback)(async()=>{try{v(!0),p(null);await z("/api/tracking/running-trips")&&(g(new Date),N("Real-time data updated successfully"),setTimeout(()=>N(null),3e3))}catch(e){p("Failed to fetch real-time data: ".concat(e.message))}finally{v(!1)}},[]),V=(0,r.useCallback)(async()=>{try{F(!0),p(null);const e=await z("/api/trips/scheduled");e&&e.trips&&(O(e.trips),N("Scheduled trips updated successfully"),setTimeout(()=>N(null),3e3))}catch(e){p("Failed to fetch scheduled trips: ".concat(e.message)),O([])}finally{F(!1)}},[]),K=async(e,t)=>{try{v(!0),p(null);let s,r="POST";switch(t){case"start":s="/api/buses/".concat(e,"/start");break;case"stop":s="/api/buses/".concat(e,"/stop");break;case"maintenance":s="/api/buses/".concat(e,"/maintenance");break;case"emergency":s="/api/buses/".concat(e,"/emergency");break;default:throw new Error("Invalid action")}await z(s,{method:r})&&(_(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t})),N("Bus ".concat(t," action completed successfully")),setTimeout(()=>N(null),3e3))}catch(s){p("Failed to ".concat(t," bus: ").concat(s.message))}finally{v(!1)}},W=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{let s;switch(v(!0),p(null),e){case"performance":s=t?"/api/analytics/bus/".concat(t,"/performance"):"/api/analytics/fleet-performance";break;case"fuel":s=t?"/api/analytics/bus/".concat(t,"/fuel"):"/api/analytics/fuel-efficiency";break;case"maintenance":s=t?"/api/analytics/bus/".concat(t,"/maintenance"):"/api/analytics/maintenance-schedule";break;default:throw new Error("Invalid analytics action")}const r=await z(s);if(r)return N("".concat(e," analytics updated successfully")),setTimeout(()=>N(null),3e3),r}catch(s){p("Failed to fetch ".concat(e," analytics: ").concat(s.message))}finally{v(!1)}},H=async(e,t)=>{try{v(!0),p(null);let s,r="POST";switch(t){case"start":s="/api/buses/".concat(e,"/start");break;case"stop":s="/api/buses/".concat(e,"/stop");break;case"ai_boost":s="/api/buses/".concat(e,"/ai-boost");break;case"live_tracking":s="/api/buses/".concat(e,"/tracking/toggle");break;case"gps":s="/api/buses/".concat(e,"/gps/toggle");break;case"communication":s="/api/buses/".concat(e,"/communication/toggle");break;case"emergency":s="/api/buses/".concat(e,"/emergency/toggle");break;case"delete":s="/api/buses/".concat(e),r="DELETE";break;default:throw new Error("Invalid bus card action")}await z(s,{method:r})&&("start"===t||"stop"===t?_(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t})):"ai_boost"!==t&&"live_tracking"!==t&&"gps"!==t&&"communication"!==t&&"emergency"!==t||P(s=>{var r;return(0,Ie.A)((0,Ie.A)({},s),{},{[e]:(0,Ie.A)((0,Ie.A)({},s[e]),{},{[t]:!(null!==(r=s[e])&&void 0!==r&&r[t])})})}),N("Bus ".concat(t," action completed successfully")),setTimeout(()=>N(null),3e3))}catch(s){p("Failed to ".concat(t," bus: ").concat(s.message))}finally{v(!1)}},q=(e,t)=>{P(s=>{var r;return(0,Ie.A)((0,Ie.A)({},s),{},{[e]:(0,Ie.A)((0,Ie.A)({},s[e]),{},{[t]:!(null!==(r=s[e])&&void 0!==r&&r[t])})})})},G=async(e,t)=>{try{v(!0),p(null);let s,r="POST";switch(t){case"start":s="/api/trips/".concat(e,"/start");break;case"stop":s="/api/trips/".concat(e,"/stop");break;case"edit":return N("Edit trip functionality - redirecting to edit page"),void setTimeout(()=>N(null),3e3);case"view":return N("View trip details - opening detailed view"),void setTimeout(()=>N(null),3e3);default:throw new Error("Invalid trip action")}await z(s,{method:r})&&(O(s=>s.map(s=>s._id===e?(0,Ie.A)((0,Ie.A)({},s),{},{status:"start"===t?"in-progress":"completed"}):s)),N("Trip ".concat(t," action completed successfully")),setTimeout(()=>N(null),3e3))}catch(s){p("Failed to ".concat(t," trip: ").concat(s.message))}finally{v(!1)}},Y=(0,r.useMemo)(()=>{if(!o.length)return null;const e=o.map(B).flat();e.length>0&&console.warn("Bus data validation warnings:",e);const t=o.length,s=o.filter(e=>"active"===e.status).length,r=o.filter(e=>"maintenance"===e.status).length,a=o.map(e=>{var t;const s=(null===(t=e.insights)||void 0===t?void 0:t.performanceScore)||0;return Math.max(0,Math.min(100,s))}),n=t>0?Math.round(a.reduce((e,t)=>e+t,0)/t):0,i=o.map(e=>{var t,s;const r=(null===(t=e.fuel)||void 0===t?void 0:t.currentLevel)||(null===(s=e.currentLocation)||void 0===s?void 0:s.fuelLevel)||0;return Math.max(0,Math.min(100,r))}),l=t>0?Math.round(i.reduce((e,t)=>e+t,0)/t):0,d=o.filter(e=>{var t,s;return((null===(t=e.fuel)||void 0===t?void 0:t.currentLevel)||(null===(s=e.currentLocation)||void 0===s?void 0:s.fuelLevel)||0)<20}).length,u=new Date,h=o.filter(e=>{try{var t;if(null===(t=e.maintenance)||void 0===t||!t.nextService)return!1;return new Date(e.maintenance.nextService)<=u}catch(m){return console.warn("Invalid maintenance date for bus:",e.busNumber),!1}}).length,p=o.filter(e=>{try{var t;if(null===(t=e.maintenance)||void 0===t||!t.nextService)return!1;const s=new Date(e.maintenance.nextService);return s<=new Date(u.getTime()+6048e5)&&s>u}catch(m){return console.warn("Invalid maintenance date for bus:",e.busNumber),!1}}).length,x=o.map(e=>{var t,s,r,a,n;return{busNumber:e.busNumber||"Unknown",performance:Math.max(0,Math.min(100,(null===(t=e.insights)||void 0===t?void 0:t.performanceScore)||0)),fuelEfficiency:Math.max(0,(null===(s=e.fuel)||void 0===s?void 0:s.averageConsumption)||(null===(r=e.specifications)||void 0===r?void 0:r.mileage)||0),maintenanceScore:null!==(a=e.maintenance)&&void 0!==a&&a.totalDistance?Math.max(0,Math.min(100,100-e.maintenance.totalDistance/1e5*10)):50,currentLocation:e.currentLocation||null,status:e.status||"unknown",lastUpdate:(null===(n=e.currentLocation)||void 0===n?void 0:n.lastUpdated)||e.updatedAt||new Date}}),g=o.filter(e=>{var t;return(null===(t=e.insights)||void 0===t?void 0:t.performanceScore)&&"active"===e.status}).sort((e,t)=>{var s,r;return((null===(s=t.insights)||void 0===s?void 0:s.performanceScore)||0)-((null===(r=e.insights)||void 0===r?void 0:r.performanceScore)||0)}).slice(0,5).map(e=>{var t,s,r,a;return(0,Ie.A)((0,Ie.A)({},e),{},{performanceScore:Math.max(0,Math.min(100,(null===(t=e.insights)||void 0===t?void 0:t.performanceScore)||0)),efficiency:(null===(s=e.fuel)||void 0===s?void 0:s.averageConsumption)||(null===(r=e.specifications)||void 0===r?void 0:r.mileage)||0,reliability:null!==(a=e.maintenance)&&void 0!==a&&a.totalDistance?Math.max(0,Math.min(100,100-e.maintenance.totalDistance/1e5*10)):50})}),f=[];if(d>0){const e=o.filter(e=>{var t,s;return((null===(t=e.fuel)||void 0===t?void 0:t.currentLevel)||(null===(s=e.currentLocation)||void 0===s?void 0:s.fuelLevel)||0)<20}).map(e=>e.busNumber).slice(0,3);f.push({type:"warning",title:"Low Fuel Alert",description:"".concat(d," buses have low fuel levels (<20%)").concat(e.length>0?": ".concat(e.join(", ")).concat(d>3?"...":""):""),action:"Schedule immediate refueling for affected buses",priority:"high",affectedBuses:d,icon:"\u26fd"})}if(h>0){const e=o.filter(e=>{try{var t;return!(null===(t=e.maintenance)||void 0===t||!t.nextService)&&new Date(e.maintenance.nextService)<=u}catch(m){return!1}}).map(e=>e.busNumber).slice(0,3);f.push({type:"error",title:"Maintenance Overdue",description:"".concat(h," buses have overdue maintenance").concat(e.length>0?": ".concat(e.join(", ")).concat(h>3?"...":""):""),action:"Immediately schedule maintenance for overdue buses",priority:"critical",affectedBuses:h,icon:"\ud83d\udd27"})}p>0&&f.push({type:"warning",title:"Maintenance Due Soon",description:"".concat(p," buses need maintenance within 7 days"),action:"Plan maintenance schedule for upcoming services",priority:"medium",affectedBuses:p,icon:"\ud83d\udcc5"}),n<70&&f.push({type:"info",title:"Performance Optimization",description:"Average fleet performance is ".concat(n,"% - below optimal threshold"),action:"Review and optimize underperforming buses",priority:"medium",affectedBuses:o.filter(e=>{var t;return((null===(t=e.insights)||void 0===t?void 0:t.performanceScore)||0)<70}).length,icon:"\ud83d\udcc8"});const y=o.filter(e=>{var t,s;return"active"===(null===(t=e.currentLocation)||void 0===t?void 0:t.emergencySystem)||"emergency"===e.status||(null===(s=e.currentLocation)||void 0===s?void 0:s.speed)&&e.currentLocation.speed>100}).length;y>0&&f.push({type:"error",title:"Emergency System Alert",description:"".concat(y," buses have emergency system activations"),action:"Immediately check emergency systems and driver status",priority:"critical",affectedBuses:y,icon:"\ud83d\udea8"});return{overview:{totalBuses:t,activeBuses:s,maintenanceBuses:r,avgPerformance:Math.round(n),avgFuelLevel:Math.round(l),lowFuelBuses:d,maintenanceDue:h,maintenanceUpcoming:p},efficiencyTrends:x,topPerformers:g,recommendations:f,timeSeriesData:(()=>{const e=[];for(let r=("week"===c?7:"month"===c?30:90)-1;r>=0;r--){const a=new Date;a.setDate(a.getDate()-r),e.push({date:a.toISOString().split("T")[0],performance:Math.round(n+20*(Math.random()-.5)),fuelEfficiency:Math.round(l+30*(Math.random()-.5)),maintenance:Math.round((h+p)*(.8+.4*Math.random())),utilization:Math.round(s/t*100+20*(Math.random()-.5))})}return e})()}},[o,c]);return r.useEffect(()=>{const e=setInterval(U,3e4);return()=>clearInterval(e)},[U]),r.useEffect(()=>{V()},[V]),Y?(0,cs.jsxs)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[(0,cs.jsxs)(ed.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-xl shadow-2xl w-full max-w-7xl max-h-[90vh] overflow-hidden border border-gray-200",children:[(0,cs.jsx)("div",{className:"px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl shadow-lg",children:(0,cs.jsx)(Vm,{className:"w-7 h-7 text-white"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"AI Insights Dashboard"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Intelligent fleet analytics and recommendations"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[j&&(0,cs.jsx)("div",{className:"px-4 py-2 bg-green-100 text-green-700 rounded-xl shadow-sm border border-green-200 text-sm font-medium",children:j}),(0,cs.jsx)("button",{onClick:async()=>{y(!0);try{p(null);const[e,t,s]=await Promise.all([z("/api/tracking/running-trips"),z("/api/buses"),z("/api/analytics/fleet-performance")]);e&&t&&s&&(g(new Date),N("Cloud sync completed successfully"),setTimeout(()=>N(null),3e3))}catch(e){p("Cloud sync failed: ".concat(e.message))}finally{y(!1)}},disabled:f||b,className:"p-3 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all duration-200 disabled:opacity-50 shadow-sm hover:shadow-md",title:"Cloud Sync - Sync all data sources",children:(0,cs.jsx)(Gp,{className:"w-5 h-5 ".concat(f?"animate-pulse":"")})}),(0,cs.jsx)("button",{onClick:async()=>{h(!0),p(null);try{await Promise.all([U(),V(),W("performance"),W("fuel"),W("maintenance")]),N("All data refreshed successfully"),setTimeout(()=>N(null),3e3)}catch(e){p("Failed to refresh data: ".concat(e.message)),console.error("Refresh error:",e)}finally{h(!1)}},disabled:u||b,className:"p-3 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-xl transition-all duration-200 disabled:opacity-50 shadow-sm hover:shadow-md",title:"Refresh Data - Update all analytics",children:(0,cs.jsx)(Od.A,{className:"w-5 h-5 ".concat(u?"animate-spin":"")})}),m&&(0,cs.jsx)("div",{className:"p-3 text-red-500 bg-red-50 rounded-xl shadow-sm border border-red-200",title:m,children:(0,cs.jsx)(vd.A,{className:"w-5 h-5"})}),b&&(0,cs.jsx)("div",{className:"p-3 text-blue-500 bg-blue-50 rounded-xl shadow-sm border border-blue-200",children:(0,cs.jsx)("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})}),(0,cs.jsx)("button",{onClick:l,className:"p-3 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all duration-200 shadow-sm hover:shadow-md",title:"Close Dashboard",children:(0,cs.jsx)(Bs.A,{className:"w-5 h-5"})})]})]})}),(0,cs.jsx)("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:(0,cs.jsxs)("div",{className:"p-8 space-y-8",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[(0,cs.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Filter & Search"}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl",children:(0,cs.jsx)(ys.A,{className:"w-6 h-6 text-blue-600"})}),(0,cs.jsx)("div",{className:"flex-1",children:(0,cs.jsx)("input",{type:"text",placeholder:"Search schedules...",className:"w-full px-4 py-3 border border-gray-300 rounded-xl text-sm font-medium bg-gray-50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("div",{className:"p-3 bg-green-100 rounded-xl",children:(0,cs.jsx)(Kd.A,{className:"w-6 h-6 text-green-600"})}),(0,cs.jsx)("div",{className:"flex-1",children:(0,cs.jsxs)("select",{className:"w-full px-4 py-3 border border-gray-300 rounded-xl text-sm font-medium bg-gray-50 focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"",children:"All Status"}),(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"inactive",children:"Inactive"}),(0,cs.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,cs.jsx)("option",{value:"emergency",children:"Emergency"})]})})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("div",{className:"p-3 bg-purple-100 rounded-xl",children:(0,cs.jsx)(fs.A,{className:"w-6 h-6 text-purple-600"})}),(0,cs.jsx)("div",{className:"flex-1",children:(0,cs.jsx)("input",{type:"date",className:"w-full px-4 py-3 border border-gray-300 rounded-xl text-sm font-medium bg-gray-50 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("div",{className:"p-3 bg-orange-100 rounded-xl",children:(0,cs.jsx)(ks.A,{className:"w-6 h-6 text-orange-600"})}),(0,cs.jsx)("div",{className:"flex-1",children:(0,cs.jsxs)("select",{className:"w-full px-4 py-3 border border-gray-300 rounded-xl text-sm font-medium bg-gray-50 focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"",children:"All Buses"}),o.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.busNumber||e.registrationNumber||"Unknown Bus"},e._id))]})})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("div",{className:"p-3 bg-red-100 rounded-xl",children:(0,cs.jsx)(gs.A,{className:"w-6 h-6 text-red-600"})}),(0,cs.jsx)("div",{className:"flex-1",children:(0,cs.jsxs)("select",{className:"w-full px-4 py-3 border border-gray-300 rounded-xl text-sm font-medium bg-gray-50 focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"",children:"All Routes"}),(0,cs.jsx)("option",{value:"route1",children:"Route 1 - City Center"}),(0,cs.jsx)("option",{value:"route2",children:"Route 2 - Airport"}),(0,cs.jsx)("option",{value:"route3",children:"Route 3 - Suburbs"}),(0,cs.jsx)("option",{value:"route4",children:"Route 4 - Industrial"})]})})]})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,cs.jsx)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Fleet Performance"}),(0,cs.jsxs)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[Y.overview.avgPerformance,"%"]}),(0,cs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Average across fleet"})]}),(0,cs.jsx)("div",{className:"p-4 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl shadow-lg",children:(0,cs.jsx)(xu.A,{className:"w-7 h-7 text-white"})})]})}),(0,cs.jsx)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Active Buses"}),(0,cs.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:Y.overview.activeBuses}),(0,cs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Currently operational"})]}),(0,cs.jsx)("div",{className:"p-4 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl shadow-lg",children:(0,cs.jsx)(Ds.A,{className:"w-7 h-7 text-white"})})]})}),(0,cs.jsx)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Maintenance Due"}),(0,cs.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:Y.overview.maintenanceDue}),(0,cs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Requires attention"})]}),(0,cs.jsx)("div",{className:"p-4 bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl shadow-lg",children:(0,cs.jsx)(Lm.A,{className:"w-7 h-7 text-white"})})]})}),(0,cs.jsx)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Low Fuel"}),(0,cs.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:Y.overview.lowFuelBuses}),(0,cs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Need refueling"})]}),(0,cs.jsx)("div",{className:"p-4 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl shadow-lg",children:(0,cs.jsx)(Fm,{className:"w-7 h-7 text-white"})})]})})]}),E&&(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Bus Fleet Management"}),(0,cs.jsx)("button",{onClick:()=>D(!E),className:"px-4 py-2 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-all duration-200",children:E?"Hide Cards":"Show Cards"})]}),(0,cs.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:o.slice(0,2).map((e,t)=>(0,cs.jsx)(IM,{bus:e,index:t,busStatus:C[e._id],busFeatures:T[e._id],onAction:H,onToggleFeature:q,onViewDetails:()=>{k(e),S(!0)},isLoading:b},e._id))})]}),R&&(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Scheduled Trips"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("span",{className:"text-sm text-gray-600",children:["Showing ",M.length," trips"]}),(0,cs.jsx)("button",{onClick:()=>I(!R),className:"px-4 py-2 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-all duration-200",children:R?"Hide Trips":"Show Trips"}),(0,cs.jsx)("button",{onClick:V,disabled:L,className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-200 disabled:opacity-50",children:L?"Loading...":"Refresh"})]})]}),M.length>0?(0,cs.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:M.map((e,t)=>(0,cs.jsx)(RM,{trip:e,index:t,onAction:G,isLoading:b},e._id))}):(0,cs.jsxs)("div",{className:"text-center py-12 bg-white rounded-2xl shadow-lg border border-gray-100",children:[(0,cs.jsx)(ks.A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,cs.jsx)("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:"No Scheduled Trips Found"}),(0,cs.jsx)("p",{className:"text-gray-600 mb-4",children:L?"Loading scheduled trips...":"No trips are scheduled at the moment. Add new trips to get started."}),(0,cs.jsx)("button",{onClick:V,disabled:L,className:"px-6 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-200 font-medium disabled:opacity-50",children:L?"Loading...":"Refresh Trips"})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-8",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-xl font-bold text-gray-900",children:"Performance Trend"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Fleet performance over time"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsxs)("select",{value:c,onChange:e=>{d(e.target.value),W("performance")},className:"px-4 py-2 border border-gray-300 rounded-xl text-sm font-medium bg-white shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"week",children:"Last 7 Days"}),(0,cs.jsx)("option",{value:"month",children:"Last 30 Days"}),(0,cs.jsx)("option",{value:"quarter",children:"Last 90 Days"})]}),(0,cs.jsx)("button",{onClick:()=>W("performance"),disabled:b,className:"p-2 bg-blue-500 text-white rounded-xl transition-all duration-200 shadow-sm hover:shadow-md hover:bg-blue-600 disabled:opacity-50",title:"Refresh Performance Data",children:(0,cs.jsx)(Od.A,{className:"w-4 h-4 ".concat(b?"animate-spin":"")})})]})]}),(0,cs.jsx)("div",{className:"h-80",children:(0,cs.jsx)(Rx,{width:"100%",height:"100%",children:(0,cs.jsxs)(jD,{data:Y.timeSeriesData,children:[(0,cs.jsx)(OD,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,cs.jsx)(bD,{dataKey:"date",tick:{fontSize:12,fill:"#666"},axisLine:{stroke:"#e0e0e0"}}),(0,cs.jsx)(vD,{tick:{fontSize:12,fill:"#666"},axisLine:{stroke:"#e0e0e0"}}),(0,cs.jsx)(uT,{contentStyle:{backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),(0,cs.jsx)(_k,{}),(0,cs.jsx)(yD,{type:"monotone",dataKey:"performance",stroke:"#3B82F6",strokeWidth:3,name:"Performance %",dot:{fill:"#3B82F6",strokeWidth:2,r:4}}),(0,cs.jsx)(yD,{type:"monotone",dataKey:"utilization",stroke:"#10B981",strokeWidth:3,name:"Utilization %",dot:{fill:"#10B981",strokeWidth:2,r:4}})]})})})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-8",children:[(0,cs.jsxs)("div",{className:"mb-6",children:[(0,cs.jsx)("h4",{className:"text-xl font-bold text-gray-900",children:"Fleet Status Distribution"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Current fleet status overview"})]}),(0,cs.jsx)("div",{className:"h-80",children:(0,cs.jsx)(Rx,{width:"100%",height:"100%",children:(0,cs.jsxs)(OM,{children:[(0,cs.jsx)(MM,{data:[{name:"Active",value:Y.overview.activeBuses,color:"#10B981"},{name:"Maintenance",value:Y.overview.maintenanceBuses,color:"#F59E0B"},{name:"Retired",value:Y.overview.totalBuses-Y.overview.activeBuses-Y.overview.maintenanceBuses,color:"#6B7280"}],cx:"50%",cy:"50%",outerRadius:100,innerRadius:40,dataKey:"value",stroke:"white",strokeWidth:2,children:[{name:"Active",value:Y.overview.activeBuses,color:"#10B981"},{name:"Maintenance",value:Y.overview.maintenanceBuses,color:"#F59E0B"},{name:"Retired",value:Y.overview.totalBuses-Y.overview.activeBuses-Y.overview.maintenanceBuses,color:"#6B7280"}].map((e,t)=>(0,cs.jsx)(xC,{fill:e.color},"cell-".concat(t)))}),(0,cs.jsx)(uT,{contentStyle:{backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),(0,cs.jsx)(_k,{wrapperStyle:{paddingTop:"20px"}})]})})})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-8",children:[(0,cs.jsxs)("div",{className:"mb-6",children:[(0,cs.jsx)("h4",{className:"text-xl font-bold text-gray-900",children:"Top Performing Buses"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Best performing buses in the fleet"})]}),(0,cs.jsx)("div",{className:"space-y-4",children:Y.topPerformers.map((e,t)=>{var s;return(0,cs.jsxs)(ed.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center justify-between p-6 bg-gradient-to-r from-gray-50 to-gray-100 rounded-2xl border border-gray-200 hover:shadow-md transition-all duration-300",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl shadow-lg",children:(0,cs.jsxs)("span",{className:"text-lg font-bold text-white",children:["#",t+1]})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"font-bold text-gray-900 text-lg",children:e.busNumber}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:e.registrationNumber})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[(null===(s=e.insights)||void 0===s?void 0:s.performanceScore)||0,"%"]}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Performance Score"})]}),(0,cs.jsx)("div",{className:"flex items-center space-x-1",children:[...Array(5)].map((t,s)=>{var r;return(0,cs.jsx)(rd.A,{className:"w-5 h-5 ".concat(s<Math.floor(((null===(r=e.insights)||void 0===r?void 0:r.performanceScore)||0)/20)?"text-yellow-400 fill-current":"text-gray-300")},s)})}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>K(e._id,"start"===C[e._id]?"stop":"start"),disabled:b,className:"p-2 rounded-xl transition-all duration-200 shadow-sm hover:shadow-md ".concat("start"===C[e._id]?"bg-red-500 text-white hover:bg-red-600":"bg-green-500 text-white hover:bg-green-600"," disabled:opacity-50"),title:"start"===C[e._id]?"Stop Bus":"Start Bus",children:"start"===C[e._id]?(0,cs.jsx)(Pm,{className:"w-4 h-4"}):(0,cs.jsx)(md.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>W("performance",e._id),disabled:b,className:"p-2 bg-blue-500 text-white rounded-xl transition-all duration-200 shadow-sm hover:shadow-md hover:bg-blue-600 disabled:opacity-50",title:"View Performance Analytics",children:(0,cs.jsx)(js.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>{k(e),S(!0)},className:"p-2 bg-gray-500 text-white rounded-xl transition-all duration-200 shadow-sm hover:shadow-md hover:bg-gray-600",title:"View Bus Details",children:(0,cs.jsx)(Nu.A,{className:"w-4 h-4"})})]})]})]},e._id)})})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-8",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,cs.jsx)("div",{className:"p-2 bg-gradient-to-br from-yellow-400 to-yellow-500 rounded-xl shadow-lg",children:(0,cs.jsx)($p,{className:"w-6 h-6 text-white"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-xl font-bold text-gray-900",children:"AI Recommendations"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Intelligent insights and actionable recommendations"})]})]}),(0,cs.jsx)("div",{className:"space-y-6",children:Y.recommendations.map((e,t)=>(0,cs.jsx)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"p-6 rounded-2xl border-l-4 shadow-sm hover:shadow-md transition-all duration-300 ".concat("error"===e.type?"bg-gradient-to-r from-red-50 to-red-100 border-red-500":"warning"===e.type?"bg-gradient-to-r from-yellow-50 to-yellow-100 border-yellow-500":"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-500"),children:(0,cs.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,cs.jsx)("div",{className:"p-3 rounded-2xl shadow-lg ".concat("error"===e.type?"bg-red-500":"warning"===e.type?"bg-yellow-500":"bg-blue-500"),children:"error"===e.type||"warning"===e.type?(0,cs.jsx)(vd.A,{className:"w-6 h-6 text-white"}):(0,cs.jsx)(jd.A,{className:"w-6 h-6 text-white"})}),(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[e.icon&&(0,cs.jsx)("span",{className:"text-2xl",children:e.icon}),(0,cs.jsx)("h5",{className:"font-bold text-gray-900 text-lg",children:e.title})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[e.affectedBuses&&(0,cs.jsxs)("span",{className:"px-3 py-1 bg-white text-gray-700 rounded-full text-sm font-bold shadow-sm border border-gray-200",children:[e.affectedBuses," buses"]}),(0,cs.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-bold shadow-sm ".concat("critical"===e.priority?"bg-red-500 text-white":"high"===e.priority?"bg-orange-500 text-white":"medium"===e.priority?"bg-yellow-500 text-white":"bg-gray-500 text-white"),children:e.priority.toUpperCase()})]})]}),(0,cs.jsx)("p",{className:"text-gray-700 font-medium mb-3",children:e.description}),(0,cs.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-xl shadow-sm border border-gray-200",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("span",{className:"text-lg",children:"\ud83d\udca1"}),(0,cs.jsx)("p",{className:"text-gray-800 font-semibold",children:e.action})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>{const t={"Low Fuel Alert":"refuel","Maintenance Overdue":"schedule_maintenance","Maintenance Due Soon":"schedule_maintenance","Performance Optimization":"optimize_route","Emergency System Alert":"emergency_check"}[e.title]||"schedule_maintenance";(async(e,t)=>{try{v(!0),p(null);let s,r="POST";switch(t){case"schedule_maintenance":s="/api/maintenance/schedule";break;case"refuel":s="/api/fuel/schedule-refuel";break;case"optimize_route":s="/api/routes/optimize";break;case"emergency_check":s="/api/emergency/check-systems";break;default:throw new Error("Invalid recommendation action")}const a={recommendationId:e.id||Date.now(),type:e.type,priority:e.priority,affectedBuses:e.affectedBuses,action:e.action};await z(s,{method:r,body:JSON.stringify(a)})&&(N('Recommendation action "'.concat(t,'" completed successfully')),setTimeout(()=>N(null),3e3))}catch(s){p("Failed to execute recommendation action: ".concat(s.message))}finally{v(!1)}})(e,t)},disabled:b,className:"px-3 py-1 rounded-lg text-sm font-medium transition-all duration-200 disabled:opacity-50 ".concat("critical"===e.priority?"bg-red-500 text-white hover:bg-red-600":"high"===e.priority?"bg-orange-500 text-white hover:bg-orange-600":"medium"===e.priority?"bg-yellow-500 text-white hover:bg-yellow-600":"bg-blue-500 text-white hover:bg-blue-600"),children:"Execute"}),(0,cs.jsx)("button",{onClick:()=>{N('Recommendation "'.concat(e.title,'" dismissed')),setTimeout(()=>N(null),3e3)},className:"px-3 py-1 bg-gray-500 text-white rounded-lg text-sm font-medium hover:bg-gray-600 transition-all duration-200",children:"Dismiss"})]})]})]})]})},t))})]})]})}),(0,cs.jsxs)("div",{className:"px-8 py-4 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-gray-100 flex items-center justify-between text-sm",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"w-3 h-3 rounded-full shadow-sm ".concat(f?"bg-blue-500 animate-pulse":"bg-green-500")}),(0,cs.jsx)("span",{className:"font-medium text-gray-700",children:f?"Syncing...":"Cloud Sync Active"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)(Rs,{className:"w-5 h-5 text-gray-600"}),(0,cs.jsxs)("span",{className:"font-medium text-gray-700",children:["Last updated: ",x.toLocaleTimeString()]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)(Ps,{className:"w-5 h-5 text-green-600"}),(0,cs.jsxs)("span",{className:"font-medium text-gray-700",children:["System Status: ",(0,cs.jsx)("span",{className:"text-green-600 font-bold",children:"Active"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(Yp,{className:"w-5 h-5 text-gray-600"}),(0,cs.jsx)(nm.A,{className:"w-5 h-5 text-gray-600"}),(0,cs.jsx)(jd.A,{className:"w-5 h-5 text-green-500"})]})]})]})]}),A&&w&&(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60 p-4",children:(0,cs.jsxs)(ed.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden border border-gray-200",children:[(0,cs.jsx)("div",{className:"px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl shadow-lg",children:(0,cs.jsx)(Ds.A,{className:"w-7 h-7 text-white"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Bus Details"}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600 font-medium",children:[w.busNumber," - ",w.registrationNumber]})]})]}),(0,cs.jsx)("button",{onClick:()=>S(!1),className:"p-3 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all duration-200 shadow-sm hover:shadow-md",children:(0,cs.jsx)(Bs.A,{className:"w-5 h-5"})})]})}),(0,cs.jsxs)("div",{className:"p-8 space-y-6 bg-gray-50",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,cs.jsx)("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"Bus Control Panel"}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,cs.jsxs)("button",{onClick:()=>K(w._id,"start"),disabled:b,className:"p-4 bg-green-500 text-white rounded-xl transition-all duration-200 shadow-sm hover:shadow-md hover:bg-green-600 disabled:opacity-50",children:[(0,cs.jsx)(md.A,{className:"w-6 h-6 mx-auto mb-2"}),(0,cs.jsx)("span",{className:"text-sm font-medium",children:"Start Bus"})]}),(0,cs.jsxs)("button",{onClick:()=>K(w._id,"stop"),disabled:b,className:"p-4 bg-red-500 text-white rounded-xl transition-all duration-200 shadow-sm hover:shadow-md hover:bg-red-600 disabled:opacity-50",children:[(0,cs.jsx)(Pm,{className:"w-6 h-6 mx-auto mb-2"}),(0,cs.jsx)("span",{className:"text-sm font-medium",children:"Stop Bus"})]}),(0,cs.jsxs)("button",{onClick:()=>K(w._id,"maintenance"),disabled:b,className:"p-4 bg-yellow-500 text-white rounded-xl transition-all duration-200 shadow-sm hover:shadow-md hover:bg-yellow-600 disabled:opacity-50",children:[(0,cs.jsx)(Lm.A,{className:"w-6 h-6 mx-auto mb-2"}),(0,cs.jsx)("span",{className:"text-sm font-medium",children:"Maintenance"})]}),(0,cs.jsxs)("button",{onClick:()=>K(w._id,"emergency"),disabled:b,className:"p-4 bg-red-600 text-white rounded-xl transition-all duration-200 shadow-sm hover:shadow-md hover:bg-red-700 disabled:opacity-50",children:[(0,cs.jsx)(ad,{className:"w-6 h-6 mx-auto mb-2"}),(0,cs.jsx)("span",{className:"text-sm font-medium",children:"Emergency"})]})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,cs.jsx)("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"Bus Information"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,cs.jsx)(Ds.A,{className:"w-5 h-5 text-blue-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Status"}),(0,cs.jsx)("p",{className:"font-bold text-gray-900",children:w.status||"Unknown"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,cs.jsx)(Fm,{className:"w-5 h-5 text-green-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Fuel Level"}),(0,cs.jsxs)("p",{className:"font-bold text-gray-900",children:[(null===(t=w.fuel)||void 0===t?void 0:t.currentLevel)||(null===(s=w.currentLocation)||void 0===s?void 0:s.fuelLevel)||0,"%"]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,cs.jsx)(xu.A,{className:"w-5 h-5 text-purple-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Performance Score"}),(0,cs.jsxs)("p",{className:"font-bold text-gray-900",children:[(null===(a=w.insights)||void 0===a?void 0:a.performanceScore)||0,"%"]})]})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,cs.jsx)(gs.A,{className:"w-5 h-5 text-orange-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Current Location"}),(0,cs.jsx)("p",{className:"font-bold text-gray-900",children:(null===(n=w.currentLocation)||void 0===n?void 0:n.address)||"Not Available"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-indigo-100 rounded-lg",children:(0,cs.jsx)(Ss.A,{className:"w-5 h-5 text-indigo-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Driver"}),(0,cs.jsx)("p",{className:"font-bold text-gray-900",children:(null===(i=w.driver)||void 0===i?void 0:i.name)||"Not Assigned"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-gray-100 rounded-lg",children:(0,cs.jsx)(fs.A,{className:"w-5 h-5 text-gray-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Last Updated"}),(0,cs.jsx)("p",{className:"font-bold text-gray-900",children:new Date(w.updatedAt||Date.now()).toLocaleString()})]})]})]})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,cs.jsx)("h4",{className:"text-xl font-bold text-gray-900 mb-4",children:"Analytics & Reports"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,cs.jsxs)("button",{onClick:()=>W("performance",w._id),disabled:b,className:"p-4 bg-blue-500 text-white rounded-xl transition-all duration-200 shadow-sm hover:shadow-md hover:bg-blue-600 disabled:opacity-50",children:[(0,cs.jsx)(js.A,{className:"w-6 h-6 mx-auto mb-2"}),(0,cs.jsx)("span",{className:"text-sm font-medium",children:"Performance Report"})]}),(0,cs.jsxs)("button",{onClick:()=>W("fuel",w._id),disabled:b,className:"p-4 bg-green-500 text-white rounded-xl transition-all duration-200 shadow-sm hover:shadow-md hover:bg-green-600 disabled:opacity-50",children:[(0,cs.jsx)(Fm,{className:"w-6 h-6 mx-auto mb-2"}),(0,cs.jsx)("span",{className:"text-sm font-medium",children:"Fuel Analytics"})]}),(0,cs.jsxs)("button",{onClick:()=>W("maintenance",w._id),disabled:b,className:"p-4 bg-yellow-500 text-white rounded-xl transition-all duration-200 shadow-sm hover:shadow-md hover:bg-yellow-600 disabled:opacity-50",children:[(0,cs.jsx)(Lm.A,{className:"w-6 h-6 mx-auto mb-2"}),(0,cs.jsx)("span",{className:"text-sm font-medium",children:"Maintenance Report"})]})]})]})]})]})})]}):(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl p-8 text-center",children:[(0,cs.jsx)(Vm,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-500 text-lg",children:"No data available for AI insights"})]})})};var FM=s(1159),BM=s.n(FM),zM=s(7823),UM=s.n(zM);const VM=()=>{const[e,t]=(0,r.useState)({search:"",status:"all",depotId:"all",busType:"all",fuelLevel:"all",maintenanceStatus:"all",performanceScore:"all",dateRange:"all"}),[s,a]=(0,r.useState)("grid"),[n,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)([]),{isConnected:u,connectionError:h}=Op("/admin"),{buses:m,analytics:p,realTime:x,insights:g,maintenancePredictions:f,isLoading:y,isRealTimeLoading:b,isInsightsLoading:v,createBus:j,updateBus:N,bulkUpdate:w,deleteBus:k,refetch:A,isCreating:S,isUpdating:C,isBulkUpdating:_,isDeleting:T}=Mp(),P=(0,r.useMemo)(()=>m?m.filter(t=>{if(e.search){var s,r,a,n,i,o;const l=e.search.toLowerCase();if(!((null===(s=t.busNumber)||void 0===s?void 0:s.toLowerCase().includes(l))||(null===(r=t.registrationNumber)||void 0===r?void 0:r.toLowerCase().includes(l))||(null===(a=t.assignedDriver)||void 0===a||null===(n=a.name)||void 0===n?void 0:n.toLowerCase().includes(l))||(null===(i=t.assignedConductor)||void 0===i||null===(o=i.name)||void 0===o?void 0:o.toLowerCase().includes(l))))return!1}if("all"!==e.status&&t.status!==e.status)return!1;if("all"!==e.depotId&&t.depotId!==e.depotId)return!1;if("all"!==e.busType&&t.busType!==e.busType)return!1;if("all"!==e.fuelLevel){var l;const s=(null===(l=t.fuel)||void 0===l?void 0:l.currentLevel)||0;switch(e.fuelLevel){case"high":if(s<80)return!1;break;case"medium":if(s<40||s>=80)return!1;break;case"low":if(s<20||s>=40)return!1;break;case"critical":if(s>=20)return!1}}if("all"!==e.performanceScore){var c;const s=(null===(c=g[t._id])||void 0===c?void 0:c.performanceScore)||0;switch(e.performanceScore){case"excellent":if(s<90)return!1;break;case"good":if(s<70||s>=90)return!1;break;case"average":if(s<50||s>=70)return!1;break;case"poor":if(s>=50)return!1}}return!0}):[],[m,e,g]),E=(0,r.useCallback)(e=>{i(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[]),D=(0,r.useCallback)(()=>{i(P.map(e=>e._id))},[P]),M=(0,r.useCallback)(()=>{i([])},[]),O=(0,r.useCallback)((e,t)=>{const s=e.map(e=>(0,Ie.A)({id:e},t));w(s),i([])},[w]),R=(0,r.useCallback)(e=>{e.forEach(e=>k(e)),i([])},[k]),I=(0,r.useCallback)(e=>{const t=m.filter(t=>e.includes(t._id)),s=JSON.stringify(t,null,2),r="data:application/json;charset=utf-8,"+encodeURIComponent(s),a="buses_export_".concat((new Date).toISOString().split("T")[0],".json"),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",a),n.click(),Oe.oR.success("Exported ".concat(e.length," buses"))},[m]),L=(0,r.useCallback)((e,t)=>{const s={name:e,filters:t,createdAt:new Date};d(e=>[...e,s]),Oe.oR.success("Filter saved successfully")},[]),F=(0,r.useCallback)(e=>{const s=c[e];s&&(t(s.filters),Oe.oR.success("Loaded filter: ".concat(s.name)))},[c]),B=(0,r.useCallback)(e=>{d(t=>t.filter((t,s)=>s!==e)),Oe.oR.success("Filter deleted successfully")},[]),z=e=>{let{title:t,value:s,icon:r,color:a,trend:n,subtitle:i,onClick:o}=e;return(0,cs.jsxs)(ed.div,{whileHover:{y:-2,scale:1.02},whileTap:{scale:.98},className:"bg-gradient-to-br ".concat(a," rounded-xl p-6 text-white cursor-pointer shadow-lg hover:shadow-xl transition-all"),onClick:o,children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsx)("div",{className:"p-3 bg-white bg-opacity-20 rounded-xl",children:(0,cs.jsx)(r,{className:"w-6 h-6"})}),n&&(0,cs.jsxs)("div",{className:"flex items-center space-x-1 text-sm ".concat(n>0?"text-green-200":"text-red-200"),children:[(0,cs.jsx)(xu.A,{className:"w-4 h-4 ".concat(n<0?"rotate-180":"")}),(0,cs.jsxs)("span",{children:[Math.abs(n),"%"]})]})]}),(0,cs.jsx)("h3",{className:"text-sm font-medium opacity-90 mb-1",children:t}),(0,cs.jsx)("p",{className:"text-3xl font-bold mb-2",children:s}),i&&(0,cs.jsx)("p",{className:"text-sm opacity-75",children:i})]})};return y?(0,cs.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,cs.jsx)(ed.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"rounded-full h-32 w-32 border-4 border-blue-600 border-t-transparent"})}):(0,cs.jsxs)("div",{className:"space-y-6 pb-20",children:[(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Enhanced Bus Management"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"AI-powered fleet management with real-time insights"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("button",{onClick:A,disabled:y,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4 ".concat(y?"animate-spin":"")}),(0,cs.jsx)("span",{children:"Refresh"})]}),(0,cs.jsxs)("button",{onClick:()=>l(!o),className:"px-4 py-2 rounded-lg transition-colors flex items-center space-x-2 ".concat(o?"bg-purple-100 text-purple-700 border border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,cs.jsx)(Vm,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"AI Insights"})]}),(0,cs.jsxs)("button",{onClick:()=>console.log("Add new bus"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(bu.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Add Bus"})]})]})]}),(0,cs.jsx)(Md,{children:o&&(0,cs.jsx)(ed.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:(0,cs.jsx)(LM,{insights:g,maintenancePredictions:f,isLoading:v})})}),(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,cs.jsx)(z,{title:"Total Fleet",value:p.totalBuses||0,icon:ks.A,color:"from-blue-500 to-blue-600",trend:p.fleetGrowth,subtitle:"Active buses",onClick:()=>t(e=>(0,Ie.A)((0,Ie.A)({},e),{},{status:"all"}))}),(0,cs.jsx)(z,{title:"Active Buses",value:p.activeBuses||0,icon:jd.A,color:"from-green-500 to-green-600",trend:p.activeGrowth,subtitle:"In service",onClick:()=>t(e=>(0,Ie.A)((0,Ie.A)({},e),{},{status:"active"}))}),(0,cs.jsx)(z,{title:"Maintenance",value:p.maintenanceBuses||0,icon:Lm.A,color:"from-yellow-500 to-orange-500",trend:p.maintenanceTrend,subtitle:"Under repair",onClick:()=>t(e=>(0,Ie.A)((0,Ie.A)({},e),{},{status:"maintenance"}))}),(0,cs.jsx)(z,{title:"Efficiency",value:"".concat(p.averageUtilization||0,"%"),icon:Ds.A,color:"from-purple-500 to-purple-600",trend:p.efficiencyTrend,subtitle:"Fleet performance",onClick:()=>a("analytics")})]}),(0,cs.jsx)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,cs.jsx)(Rp,{filters:e,onFiltersChange:t,depots:[],savedFilters:c,onSaveFilter:L,onLoadFilter:F,onDeleteFilter:B})}),(0,cs.jsx)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"View Mode:"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[(0,cs.jsxs)("button",{onClick:()=>a("grid"),className:"p-2 rounded-md transition-colors flex items-center space-x-2 ".concat("grid"===s?"bg-white shadow-sm text-blue-600":"text-gray-500 hover:text-gray-700"),children:[(0,cs.jsx)(nm.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{className:"text-sm",children:"Grid"})]}),(0,cs.jsxs)("button",{onClick:()=>a("list"),className:"p-2 rounded-md transition-colors flex items-center space-x-2 ".concat("list"===s?"bg-white shadow-sm text-blue-600":"text-gray-500 hover:text-gray-700"),children:[(0,cs.jsx)(im.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{className:"text-sm",children:"List"})]}),(0,cs.jsxs)("button",{onClick:()=>a("performance"),className:"p-2 rounded-md transition-colors flex items-center space-x-2 ".concat("performance"===s?"bg-white shadow-sm text-blue-600":"text-gray-500 hover:text-gray-700"),children:[(0,cs.jsx)(js.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{className:"text-sm",children:"Performance"})]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[(0,cs.jsxs)("span",{children:[P.length," of ",m.length," buses"]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-1 ".concat(u?"text-green-600":h?"text-red-600":"text-yellow-600"),children:[(0,cs.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(u?"bg-green-500 animate-pulse":h?"bg-red-500":"bg-yellow-500 animate-pulse")}),(0,cs.jsx)("span",{children:u?"Live":h?"Offline":"Connecting..."})]})]})]})}),(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Fleet Overview"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("button",{onClick:()=>I(m.map(e=>e._id)),className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 flex items-center space-x-2 hover:bg-gray-50 rounded-lg transition-colors",children:[(0,cs.jsx)(hd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Export All"})]}),(0,cs.jsxs)("button",{className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 flex items-center space-x-2 hover:bg-gray-50 rounded-lg transition-colors",children:[(0,cs.jsx)(zm.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Import"})]}),(0,cs.jsxs)("button",{className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 flex items-center space-x-2 hover:bg-gray-50 rounded-lg transition-colors",children:[(0,cs.jsx)(Os.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Settings"})]})]})]}),"performance"===s?(0,cs.jsx)(BM(),{buses:P,analytics:p,realTimeData:x,timeRange:"7d"}):(0,cs.jsx)(UM(),{buses:P,realTimeData:x,insights:g,selectedBuses:n,onSelectBus:E,onEdit:e=>console.log("Edit bus:",e),onView:e=>console.log("View bus:",e),onAssign:e=>console.log("Assign staff:",e)})]}),(0,cs.jsx)(Md,{children:n.length>0&&(0,cs.jsx)(Lp,{selectedBuses:n,totalBuses:P.length,onSelectAll:D,onDeselectAll:M,onBulkUpdate:O,onBulkDelete:R,onBulkAssign:O,onBulkExport:I,isLoading:_||T,depots:[],drivers:[],conductors:[]})})]})},KM=(0,Ns.A)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),WM=(0,Ns.A)("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),HM=(0,Ns.A)("bell-ring",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]]),qM=(0,Ns.A)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var GM=s(1680);const YM=(0,Ns.A)("satellite",[["path",{d:"m13.5 6.5-3.148-3.148a1.205 1.205 0 0 0-1.704 0L6.352 5.648a1.205 1.205 0 0 0 0 1.704L9.5 10.5",key:"dzhfyz"}],["path",{d:"M16.5 7.5 19 5",key:"1ltcjm"}],["path",{d:"m17.5 10.5 3.148 3.148a1.205 1.205 0 0 1 0 1.704l-2.296 2.296a1.205 1.205 0 0 1-1.704 0L13.5 14.5",key:"nfoymv"}],["path",{d:"M9 21a6 6 0 0 0-6-6",key:"1iajcf"}],["path",{d:"M9.352 10.648a1.205 1.205 0 0 0 0 1.704l2.296 2.296a1.205 1.205 0 0 0 1.704 0l4.296-4.296a1.205 1.205 0 0 0 0-1.704l-2.296-2.296a1.205 1.205 0 0 0-1.704 0z",key:"nv9zqy"}]]);var $M=s(7210);var JM=s(4705);function QM(e){return e+.5|0}const XM=(e,t,s)=>Math.max(Math.min(e,s),t);function ZM(e){return XM(QM(2.55*e),0,255)}function eO(e){return XM(QM(255*e),0,255)}function tO(e){return XM(QM(e/2.55)/100,0,1)}function sO(e){return XM(QM(100*e),0,100)}const rO={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},aO=[..."0123456789ABCDEF"],nO=e=>aO[15&e],iO=e=>aO[(240&e)>>4]+aO[15&e],oO=e=>(240&e)>>4===(15&e);function lO(e){var t=(e=>oO(e.r)&&oO(e.g)&&oO(e.b)&&oO(e.a))(e)?nO:iO;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const cO=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function dO(e,t,s){const r=t*Math.min(s,1-s),a=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return s-r*Math.max(Math.min(a-3,9-a,1),-1)};return[a(0),a(8),a(4)]}function uO(e,t,s){const r=function(r){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return s-s*t*Math.max(Math.min(a,4-a,1),0)};return[r(5),r(3),r(1)]}function hO(e,t,s){const r=dO(e,1,.5);let a;for(t+s>1&&(a=1/(t+s),t*=a,s*=a),a=0;a<3;a++)r[a]*=1-t-s,r[a]+=t;return r}function mO(e){const t=e.r/255,s=e.g/255,r=e.b/255,a=Math.max(t,s,r),n=Math.min(t,s,r),i=(a+n)/2;let o,l,c;return a!==n&&(c=a-n,l=i>.5?c/(2-a-n):c/(a+n),o=function(e,t,s,r,a){return e===a?(t-s)/r+(t<s?6:0):t===a?(s-e)/r+2:(e-t)/r+4}(t,s,r,c,a),o=60*o+.5),[0|o,l||0,i]}function pO(e,t,s,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,s,r)).map(eO)}function xO(e,t,s){return pO(dO,e,t,s)}function gO(e){return(e%360+360)%360}function fO(e){const t=cO.exec(e);let s,r=255;if(!t)return;t[5]!==s&&(r=t[6]?ZM(+t[5]):eO(+t[5]));const a=gO(+t[2]),n=+t[3]/100,i=+t[4]/100;return s="hwb"===t[1]?function(e,t,s){return pO(hO,e,t,s)}(a,n,i):"hsv"===t[1]?function(e,t,s){return pO(uO,e,t,s)}(a,n,i):xO(a,n,i),{r:s[0],g:s[1],b:s[2],a:r}}const yO={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},bO={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let vO;function jO(e){vO||(vO=function(){const e={},t=Object.keys(bO),s=Object.keys(yO);let r,a,n,i,o;for(r=0;r<t.length;r++){for(i=o=t[r],a=0;a<s.length;a++)n=s[a],o=o.replace(n,yO[n]);n=parseInt(bO[i],16),e[o]=[n>>16&255,n>>8&255,255&n]}return e}(),vO.transparent=[0,0,0,0]);const t=vO[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const NO=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const wO=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,kO=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function AO(e,t,s){if(e){let r=mO(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*s,0===t?360:1)),r=xO(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function SO(e,t){return e?Object.assign(t||{},e):e}function CO(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=eO(e[3]))):(t=SO(e,{r:0,g:0,b:0,a:1})).a=eO(t.a),t}function _O(e){return"r"===e.charAt(0)?function(e){const t=NO.exec(e);let s,r,a,n=255;if(t){if(t[7]!==s){const e=+t[7];n=t[8]?ZM(e):XM(255*e,0,255)}return s=+t[1],r=+t[3],a=+t[5],s=255&(t[2]?ZM(s):XM(s,0,255)),r=255&(t[4]?ZM(r):XM(r,0,255)),a=255&(t[6]?ZM(a):XM(a,0,255)),{r:s,g:r,b:a,a:n}}}(e):fO(e)}class TO{constructor(e){if(e instanceof TO)return e;const t=typeof e;let s;"object"===t?s=CO(e):"string"===t&&(s=function(e){var t,s=e.length;return"#"===e[0]&&(4===s||5===s?t={r:255&17*rO[e[1]],g:255&17*rO[e[2]],b:255&17*rO[e[3]],a:5===s?17*rO[e[4]]:255}:7!==s&&9!==s||(t={r:rO[e[1]]<<4|rO[e[2]],g:rO[e[3]]<<4|rO[e[4]],b:rO[e[5]]<<4|rO[e[6]],a:9===s?rO[e[7]]<<4|rO[e[8]]:255})),t}(e)||jO(e)||_O(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=SO(this._rgb);return e&&(e.a=tO(e.a)),e}set rgb(e){this._rgb=CO(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(tO(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?lO(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=mO(e),s=t[0],r=sO(t[1]),a=sO(t[2]);return e.a<255?"hsla(".concat(s,", ").concat(r,"%, ").concat(a,"%, ").concat(tO(e.a),")"):"hsl(".concat(s,", ").concat(r,"%, ").concat(a,"%)")}(this._rgb):void 0}mix(e,t){if(e){const s=this.rgb,r=e.rgb;let a;const n=t===a?.5:t,i=2*n-1,o=s.a-r.a,l=((i*o===-1?i:(i+o)/(1+i*o))+1)/2;a=1-l,s.r=255&l*s.r+a*r.r+.5,s.g=255&l*s.g+a*r.g+.5,s.b=255&l*s.b+a*r.b+.5,s.a=n*s.a+(1-n)*r.a,this.rgb=s}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,s){const r=kO(tO(e.r)),a=kO(tO(e.g)),n=kO(tO(e.b));return{r:eO(wO(r+s*(kO(tO(t.r))-r))),g:eO(wO(a+s*(kO(tO(t.g))-a))),b:eO(wO(n+s*(kO(tO(t.b))-n))),a:e.a+s*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new TO(this.rgb)}alpha(e){return this._rgb.a=eO(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=QM(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return AO(this._rgb,2,e),this}darken(e){return AO(this._rgb,2,-e),this}saturate(e){return AO(this._rgb,1,e),this}desaturate(e){return AO(this._rgb,1,-e),this}rotate(e){return function(e,t){var s=mO(e);s[0]=gO(s[0]+t),s=xO(s),e.r=s[0],e.g=s[1],e.b=s[2]}(this._rgb,e),this}}function PO(){}const EO=(()=>{let e=0;return()=>e++})();function DO(e){return null===e||"undefined"===typeof e}function MO(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function OO(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function RO(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function IO(e,t){return RO(e)?e:t}function LO(e,t){return"undefined"===typeof e?t:e}const FO=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function BO(e,t,s){if(e&&"function"===typeof e.call)return e.apply(s,t)}function zO(e,t,s,r){let a,n,i;if(MO(e))if(n=e.length,r)for(a=n-1;a>=0;a--)t.call(s,e[a],a);else for(a=0;a<n;a++)t.call(s,e[a],a);else if(OO(e))for(i=Object.keys(e),n=i.length,a=0;a<n;a++)t.call(s,e[i[a]],i[a])}function UO(e,t){let s,r,a,n;if(!e||!t||e.length!==t.length)return!1;for(s=0,r=e.length;s<r;++s)if(a=e[s],n=t[s],a.datasetIndex!==n.datasetIndex||a.index!==n.index)return!1;return!0}function VO(e){if(MO(e))return e.map(VO);if(OO(e)){const t=Object.create(null),s=Object.keys(e),r=s.length;let a=0;for(;a<r;++a)t[s[a]]=VO(e[s[a]]);return t}return e}function KO(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function WO(e,t,s,r){if(!KO(e))return;const a=t[e],n=s[e];OO(a)&&OO(n)?HO(a,n,r):t[e]=VO(n)}function HO(e,t,s){const r=MO(t)?t:[t],a=r.length;if(!OO(e))return e;const n=(s=s||{}).merger||WO;let i;for(let o=0;o<a;++o){if(i=r[o],!OO(i))continue;const t=Object.keys(i);for(let r=0,a=t.length;r<a;++r)n(t[r],e,i,s)}return e}function qO(e,t){return HO(e,t,{merger:GO})}function GO(e,t,s){if(!KO(e))return;const r=t[e],a=s[e];OO(r)&&OO(a)?qO(r,a):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=VO(a))}const YO={"":e=>e,x:e=>e.x,y:e=>e.y};function $O(e,t){const s=YO[t]||(YO[t]=function(e){const t=function(e){const t=e.split("."),s=[];let r="";for(const a of t)r+=a,r.endsWith("\\")?r=r.slice(0,-1)+".":(s.push(r),r="");return s}(e);return e=>{for(const s of t){if(""===s)break;e=e&&e[s]}return e}}(t));return s(e)}function JO(e){return e.charAt(0).toUpperCase()+e.slice(1)}const QO=e=>"undefined"!==typeof e,XO=e=>"function"===typeof e,ZO=(e,t)=>{if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0};const eR=Math.PI,tR=2*eR,sR=tR+eR,rR=Number.POSITIVE_INFINITY,aR=eR/180,nR=eR/2,iR=eR/4,oR=2*eR/3,lR=Math.log10,cR=Math.sign;function dR(e,t,s){return Math.abs(e-t)<s}function uR(e){const t=Math.round(e);e=dR(e,t,e/1e3)?t:e;const s=Math.pow(10,Math.floor(lR(e))),r=e/s;return(r<=1?1:r<=2?2:r<=5?5:10)*s}function hR(e){return!isNaN(parseFloat(e))&&isFinite(e)}function mR(e,t,s){let r,a,n;for(r=0,a=e.length;r<a;r++)n=e[r][s],isNaN(n)||(t.min=Math.min(t.min,n),t.max=Math.max(t.max,n))}function pR(e){return e*(eR/180)}function xR(e){return e*(180/eR)}function gR(e){if(!RO(e))return;let t=1,s=0;for(;Math.round(e*t)/t!==e;)t*=10,s++;return s}function fR(e,t){const s=t.x-e.x,r=t.y-e.y,a=Math.sqrt(s*s+r*r);let n=Math.atan2(r,s);return n<-.5*eR&&(n+=tR),{angle:n,distance:a}}function yR(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function bR(e,t){return(e-t+sR)%tR-eR}function vR(e){return(e%tR+tR)%tR}function jR(e,t,s,r){const a=vR(e),n=vR(t),i=vR(s),o=vR(n-a),l=vR(i-a),c=vR(a-n),d=vR(a-i);return a===n||a===i||r&&n===i||o>l&&c<d}function NR(e,t,s){return Math.max(t,Math.min(s,e))}function wR(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,s)-r&&e<=Math.max(t,s)+r}function kR(e,t,s){s=s||(s=>e[s]<t);let r,a=e.length-1,n=0;for(;a-n>1;)r=n+a>>1,s(r)?n=r:a=r;return{lo:n,hi:a}}const AR=(e,t,s,r)=>kR(e,s,r?r=>{const a=e[r][t];return a<s||a===s&&e[r+1][t]===s}:r=>e[r][t]<s),SR=(e,t,s)=>kR(e,s,r=>e[r][t]>=s);const CR=["push","pop","shift","splice","unshift"];function _R(e,t){const s=e._chartjs;if(!s)return;const r=s.listeners,a=r.indexOf(t);-1!==a&&r.splice(a,1),r.length>0||(CR.forEach(t=>{delete e[t]}),delete e._chartjs)}function TR(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const PR="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function ER(e,t){let s=[],r=!1;return function(){for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];s=n,r||(r=!0,PR.call(window,()=>{r=!1,e.apply(t,s)}))}}const DR=e=>"start"===e?"left":"end"===e?"right":"center",MR=(e,t,s)=>"start"===e?t:"end"===e?s:(t+s)/2;function OR(e,t,s){const r=t.length;let a=0,n=r;if(e._sorted){const{iScale:i,_parsed:o}=e,l=i.axis,{min:c,max:d,minDefined:u,maxDefined:h}=i.getUserBounds();u&&(a=NR(Math.min(AR(o,l,c).lo,s?r:AR(t,l,i.getPixelForValue(c)).lo),0,r-1)),n=h?NR(Math.max(AR(o,i.axis,d,!0).hi+1,s?0:AR(t,l,i.getPixelForValue(d),!0).hi+1),a,r)-a:r-a}return{start:a,count:n}}function RR(e){const{xScale:t,yScale:s,_scaleRanges:r}=e,a={xmin:t.min,xmax:t.max,ymin:s.min,ymax:s.max};if(!r)return e._scaleRanges=a,!0;const n=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==s.min||r.ymax!==s.max;return Object.assign(r,a),n}const IR=e=>0===e||1===e,LR=(e,t,s)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*tR/s),FR=(e,t,s)=>Math.pow(2,-10*e)*Math.sin((e-t)*tR/s)+1,BR={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*nR),easeOutSine:e=>Math.sin(e*nR),easeInOutSine:e=>-.5*(Math.cos(eR*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>IR(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>IR(e)?e:LR(e,.075,.3),easeOutElastic:e=>IR(e)?e:FR(e,.075,.3),easeInOutElastic(e){const t=.1125;return IR(e)?e:e<.5?.5*LR(2*e,t,.45):.5+.5*FR(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-BR.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,s=2.75;return e<1/s?t*e*e:e<2/s?t*(e-=1.5/s)*e+.75:e<2.5/s?t*(e-=2.25/s)*e+.9375:t*(e-=2.625/s)*e+.984375},easeInOutBounce:e=>e<.5?.5*BR.easeInBounce(2*e):.5*BR.easeOutBounce(2*e-1)+.5};function zR(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function UR(e){return zR(e)?e:new TO(e)}function VR(e){return zR(e)?e:new TO(e).saturate(.5).darken(.1).hexString()}const KR=["x","y","borderWidth","radius","tension"],WR=["color","borderColor","backgroundColor"];const HR=new Map;function qR(e,t,s){return function(e,t){t=t||{};const s=e+JSON.stringify(t);let r=HR.get(s);return r||(r=new Intl.NumberFormat(e,t),HR.set(s,r)),r}(t,s).format(e)}const GR={values:e=>MO(e)?e:""+e,numeric(e,t,s){if(0===e)return"0";const r=this.chart.options.locale;let a,n=e;if(s.length>1){const t=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(t<1e-4||t>1e15)&&(a="scientific"),n=function(e,t){let s=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(s)>=1&&e!==Math.floor(e)&&(s=e-Math.floor(e));return s}(e,s)}const i=lR(Math.abs(n)),o=isNaN(i)?1:Math.max(Math.min(-1*Math.floor(i),20),0),l={notation:a,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),qR(e,r,l)},logarithmic(e,t,s){if(0===e)return"0";const r=s[t].significand||e/Math.pow(10,Math.floor(lR(e)));return[1,2,3,5,10,15].includes(r)||t>.8*s.length?GR.numeric.call(this,e,t,s):""}};var YR={formatters:GR};const $R=Object.create(null),JR=Object.create(null);function QR(e,t){if(!t)return e;const s=t.split(".");for(let r=0,a=s.length;r<a;++r){const t=s[r];e=e[t]||(e[t]=Object.create(null))}return e}function XR(e,t,s){return"string"===typeof t?HO(QR(e,t),s):HO(QR(e,""),t)}class ZR{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>VR(t.backgroundColor),this.hoverBorderColor=(e,t)=>VR(t.borderColor),this.hoverColor=(e,t)=>VR(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return XR(this,e,t)}get(e){return QR(this,e)}describe(e,t){return XR(JR,e,t)}override(e,t){return XR($R,e,t)}route(e,t,s,r){const a=QR(this,e),n=QR(this,s),i="_"+t;Object.defineProperties(a,{[i]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[i],t=n[r];return OO(e)?Object.assign({},t,e):LO(e,t)},set(e){this[i]=e}}})}apply(e){e.forEach(e=>e(this))}}var eI=new ZR({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:WR},numbers:{type:"number",properties:KR}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:YR.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function tI(e,t,s,r,a){let n=t[a];return n||(n=t[a]=e.measureText(a).width,s.push(a)),n>r&&(r=n),r}function sI(e,t,s,r){let a=(r=r||{}).data=r.data||{},n=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(a=r.data={},n=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let i=0;const o=s.length;let l,c,d,u,h;for(l=0;l<o;l++)if(u=s[l],void 0===u||null===u||MO(u)){if(MO(u))for(c=0,d=u.length;c<d;c++)h=u[c],void 0===h||null===h||MO(h)||(i=tI(e,a,n,i,h))}else i=tI(e,a,n,i,u);e.restore();const m=n.length/2;if(m>s.length){for(l=0;l<m;l++)delete a[n[l]];n.splice(0,m)}return i}function rI(e,t,s){const r=e.currentDevicePixelRatio,a=0!==s?Math.max(s/2,.5):0;return Math.round((t-a)*r)/r+a}function aI(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function nI(e,t,s,r){iI(e,t,s,r,null)}function iI(e,t,s,r,a){let n,i,o,l,c,d,u,h;const m=t.pointStyle,p=t.rotation,x=t.radius;let g=(p||0)*aR;if(m&&"object"===typeof m&&(n=m.toString(),"[object HTMLImageElement]"===n||"[object HTMLCanvasElement]"===n))return e.save(),e.translate(s,r),e.rotate(g),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),void e.restore();if(!(isNaN(x)||x<=0)){switch(e.beginPath(),m){default:a?e.ellipse(s,r,a/2,x,0,0,tR):e.arc(s,r,x,0,tR),e.closePath();break;case"triangle":d=a?a/2:x,e.moveTo(s+Math.sin(g)*d,r-Math.cos(g)*x),g+=oR,e.lineTo(s+Math.sin(g)*d,r-Math.cos(g)*x),g+=oR,e.lineTo(s+Math.sin(g)*d,r-Math.cos(g)*x),e.closePath();break;case"rectRounded":c=.516*x,l=x-c,i=Math.cos(g+iR)*l,u=Math.cos(g+iR)*(a?a/2-c:l),o=Math.sin(g+iR)*l,h=Math.sin(g+iR)*(a?a/2-c:l),e.arc(s-u,r-o,c,g-eR,g-nR),e.arc(s+h,r-i,c,g-nR,g),e.arc(s+u,r+o,c,g,g+nR),e.arc(s-h,r+i,c,g+nR,g+eR),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*x,d=a?a/2:l,e.rect(s-d,r-l,2*d,2*l);break}g+=iR;case"rectRot":u=Math.cos(g)*(a?a/2:x),i=Math.cos(g)*x,o=Math.sin(g)*x,h=Math.sin(g)*(a?a/2:x),e.moveTo(s-u,r-o),e.lineTo(s+h,r-i),e.lineTo(s+u,r+o),e.lineTo(s-h,r+i),e.closePath();break;case"crossRot":g+=iR;case"cross":u=Math.cos(g)*(a?a/2:x),i=Math.cos(g)*x,o=Math.sin(g)*x,h=Math.sin(g)*(a?a/2:x),e.moveTo(s-u,r-o),e.lineTo(s+u,r+o),e.moveTo(s+h,r-i),e.lineTo(s-h,r+i);break;case"star":u=Math.cos(g)*(a?a/2:x),i=Math.cos(g)*x,o=Math.sin(g)*x,h=Math.sin(g)*(a?a/2:x),e.moveTo(s-u,r-o),e.lineTo(s+u,r+o),e.moveTo(s+h,r-i),e.lineTo(s-h,r+i),g+=iR,u=Math.cos(g)*(a?a/2:x),i=Math.cos(g)*x,o=Math.sin(g)*x,h=Math.sin(g)*(a?a/2:x),e.moveTo(s-u,r-o),e.lineTo(s+u,r+o),e.moveTo(s+h,r-i),e.lineTo(s-h,r+i);break;case"line":i=a?a/2:Math.cos(g)*x,o=Math.sin(g)*x,e.moveTo(s-i,r-o),e.lineTo(s+i,r+o);break;case"dash":e.moveTo(s,r),e.lineTo(s+Math.cos(g)*(a?a/2:x),r+Math.sin(g)*x);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function oI(e,t,s){return s=s||.5,!t||e&&e.x>t.left-s&&e.x<t.right+s&&e.y>t.top-s&&e.y<t.bottom+s}function lI(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function cI(e){e.restore()}function dI(e,t,s,r,a){if(!t)return e.lineTo(s.x,s.y);if("middle"===a){const r=(t.x+s.x)/2;e.lineTo(r,t.y),e.lineTo(r,s.y)}else"after"===a!==!!r?e.lineTo(t.x,s.y):e.lineTo(s.x,t.y);e.lineTo(s.x,s.y)}function uI(e,t,s,r){if(!t)return e.lineTo(s.x,s.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?s.cp2x:s.cp1x,r?s.cp2y:s.cp1y,s.x,s.y)}function hI(e,t,s,r,a){if(a.strikethrough||a.underline){const n=e.measureText(r),i=t-n.actualBoundingBoxLeft,o=t+n.actualBoundingBoxRight,l=s-n.actualBoundingBoxAscent,c=s+n.actualBoundingBoxDescent,d=a.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=a.decorationWidth||2,e.moveTo(i,d),e.lineTo(o,d),e.stroke()}}function mI(e,t){const s=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=s}function pI(e,t,s,r,a){let n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const i=MO(t)?t:[t],o=n.strokeWidth>0&&""!==n.strokeColor;let l,c;for(e.save(),e.font=a.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),DO(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,n),l=0;l<i.length;++l)c=i[l],n.backdrop&&mI(e,n.backdrop),o&&(n.strokeColor&&(e.strokeStyle=n.strokeColor),DO(n.strokeWidth)||(e.lineWidth=n.strokeWidth),e.strokeText(c,s,r,n.maxWidth)),e.fillText(c,s,r,n.maxWidth),hI(e,s,r,c,n),r+=Number(a.lineHeight);e.restore()}function xI(e,t){const{x:s,y:r,w:a,h:n,radius:i}=t;e.arc(s+i.topLeft,r+i.topLeft,i.topLeft,1.5*eR,eR,!0),e.lineTo(s,r+n-i.bottomLeft),e.arc(s+i.bottomLeft,r+n-i.bottomLeft,i.bottomLeft,eR,nR,!0),e.lineTo(s+a-i.bottomRight,r+n),e.arc(s+a-i.bottomRight,r+n-i.bottomRight,i.bottomRight,nR,0,!0),e.lineTo(s+a,r+i.topRight),e.arc(s+a-i.topRight,r+i.topRight,i.topRight,0,-nR,!0),e.lineTo(s+i.topLeft,r)}const gI=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,fI=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function yI(e,t){const s=(""+e).match(gI);if(!s||"normal"===s[1])return 1.2*t;switch(e=+s[2],s[3]){case"px":return e;case"%":e/=100}return t*e}const bI=e=>+e||0;function vI(e,t){const s={},r=OO(t),a=r?Object.keys(t):t,n=OO(e)?r?s=>LO(e[s],e[t[s]]):t=>e[t]:()=>e;for(const i of a)s[i]=bI(n(i));return s}function jI(e){return vI(e,{top:"y",right:"x",bottom:"y",left:"x"})}function NI(e){return vI(e,["topLeft","topRight","bottomLeft","bottomRight"])}function wI(e){const t=jI(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function kI(e,t){e=e||{},t=t||eI.font;let s=LO(e.size,t.size);"string"===typeof s&&(s=parseInt(s,10));let r=LO(e.style,t.style);r&&!(""+r).match(fI)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const a={family:LO(e.family,t.family),lineHeight:yI(LO(e.lineHeight,t.lineHeight),s),size:s,style:r,weight:LO(e.weight,t.weight),string:""};return a.string=function(e){return!e||DO(e.size)||DO(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(a),a}function AI(e,t,s,r){let a,n,i,o=!0;for(a=0,n=e.length;a<n;++a)if(i=e[a],void 0!==i&&(void 0!==t&&"function"===typeof i&&(i=i(t),o=!1),void 0!==s&&MO(i)&&(i=i[s%i.length],o=!1),void 0!==i))return r&&!o&&(r.cacheable=!1),i}function SI(e,t){return Object.assign(Object.create(e),t)}function CI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],s=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const a=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof s&&(s=FI("_fallback",e));const n={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:a,_fallback:s,_getTarget:r,override:r=>CI([r,...e],t,a,s)};return new Proxy(n,{deleteProperty:(t,s)=>(delete t[s],delete t._keys,delete e[0][s],!0),get:(s,r)=>DI(s,r,()=>function(e,t,s,r){let a;for(const n of t)if(a=FI(PI(n,e),s),"undefined"!==typeof a)return EI(e,a)?II(s,r,e,a):a}(r,t,e,s)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>BI(e).includes(t),ownKeys:e=>BI(e),set(e,t,s){const a=e._storage||(e._storage=r());return e[t]=a[t]=s,delete e._keys,!0}})}function _I(e,t,s,r){const a={_cacheable:!1,_proxy:e,_context:t,_subProxy:s,_stack:new Set,_descriptors:TI(e,r),setContext:t=>_I(e,t,s,r),override:a=>_I(e.override(a),t,s,r)};return new Proxy(a,{deleteProperty:(t,s)=>(delete t[s],delete e[s],!0),get:(e,t,s)=>DI(e,t,()=>function(e,t,s){const{_proxy:r,_context:a,_subProxy:n,_descriptors:i}=e;let o=r[t];XO(o)&&i.isScriptable(t)&&(o=function(e,t,s,r){const{_proxy:a,_context:n,_subProxy:i,_stack:o}=s;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(n,i||r);o.delete(e),EI(e,l)&&(l=II(a._scopes,a,e,l));return l}(t,o,e,s));MO(o)&&o.length&&(o=function(e,t,s,r){const{_proxy:a,_context:n,_subProxy:i,_descriptors:o}=s;if("undefined"!==typeof n.index&&r(e))return t[n.index%t.length];if(OO(t[0])){const s=t,r=a._scopes.filter(e=>e!==s);t=[];for(const l of s){const s=II(r,a,e,l);t.push(_I(s,n,i&&i[e],o))}}return t}(t,o,e,i.isIndexable));EI(t,o)&&(o=_I(o,a,n&&n[t],i));return o}(e,t,s)),getOwnPropertyDescriptor:(t,s)=>t._descriptors.allKeys?Reflect.has(e,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,s),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,s)=>Reflect.has(e,s),ownKeys:()=>Reflect.ownKeys(e),set:(t,s,r)=>(e[s]=r,delete t[s],!0)})}function TI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:s=t.scriptable,_indexable:r=t.indexable,_allKeys:a=t.allKeys}=e;return{allKeys:a,scriptable:s,indexable:r,isScriptable:XO(s)?s:()=>s,isIndexable:XO(r)?r:()=>r}}const PI=(e,t)=>e?e+JO(t):t,EI=(e,t)=>OO(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function DI(e,t,s){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const r=s();return e[t]=r,r}function MI(e,t,s){return XO(e)?e(t,s):e}const OI=(e,t)=>!0===e?t:"string"===typeof e?$O(t,e):void 0;function RI(e,t,s,r,a){for(const n of t){const t=OI(s,n);if(t){e.add(t);const n=MI(t._fallback,s,a);if("undefined"!==typeof n&&n!==s&&n!==r)return n}else if(!1===t&&"undefined"!==typeof r&&s!==r)return null}return!1}function II(e,t,s,r){const a=t._rootScopes,n=MI(t._fallback,s,r),i=[...e,...a],o=new Set;o.add(r);let l=LI(o,i,s,n||s,r);return null!==l&&(("undefined"===typeof n||n===s||(l=LI(o,i,n,l,r),null!==l))&&CI(Array.from(o),[""],a,n,()=>function(e,t,s){const r=e._getTarget();t in r||(r[t]={});const a=r[t];if(MO(a)&&OO(s))return s;return a||{}}(t,s,r)))}function LI(e,t,s,r,a){for(;s;)s=RI(e,t,s,r,a);return s}function FI(e,t){for(const s of t){if(!s)continue;const t=s[e];if("undefined"!==typeof t)return t}}function BI(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const s of e)for(const e of Object.keys(s).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function zI(e,t,s,r){const{iScale:a}=e,{key:n="r"}=this._parsing,i=new Array(r);let o,l,c,d;for(o=0,l=r;o<l;++o)c=o+s,d=t[c],i[o]={r:a.parse($O(d,n),c)};return i}const UI=Number.EPSILON||1e-14,VI=(e,t)=>t<e.length&&!e[t].skip&&e[t],KI=e=>"x"===e?"y":"x";function WI(e,t,s,r){const a=e.skip?t:e,n=t,i=s.skip?t:s,o=yR(n,a),l=yR(i,n);let c=o/(o+l),d=l/(o+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=r*c,h=r*d;return{previous:{x:n.x-u*(i.x-a.x),y:n.y-u*(i.y-a.y)},next:{x:n.x+h*(i.x-a.x),y:n.y+h*(i.y-a.y)}}}function HI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const s=KI(t),r=e.length,a=Array(r).fill(0),n=Array(r);let i,o,l,c=VI(e,0);for(i=0;i<r;++i)if(o=l,l=c,c=VI(e,i+1),l){if(c){const e=c[t]-l[t];a[i]=0!==e?(c[s]-l[s])/e:0}n[i]=o?c?cR(a[i-1])!==cR(a[i])?0:(a[i-1]+a[i])/2:a[i-1]:a[i]}!function(e,t,s){const r=e.length;let a,n,i,o,l,c=VI(e,0);for(let d=0;d<r-1;++d)l=c,c=VI(e,d+1),l&&c&&(dR(t[d],0,UI)?s[d]=s[d+1]=0:(a=s[d]/t[d],n=s[d+1]/t[d],o=Math.pow(a,2)+Math.pow(n,2),o<=9||(i=3/Math.sqrt(o),s[d]=a*i*t[d],s[d+1]=n*i*t[d])))}(e,a,n),function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=KI(s),a=e.length;let n,i,o,l=VI(e,0);for(let c=0;c<a;++c){if(i=o,o=l,l=VI(e,c+1),!o)continue;const a=o[s],d=o[r];i&&(n=(a-i[s])/3,o["cp1".concat(s)]=a-n,o["cp1".concat(r)]=d-n*t[c]),l&&(n=(l[s]-a)/3,o["cp2".concat(s)]=a+n,o["cp2".concat(r)]=d+n*t[c])}}(e,n,t)}function qI(e,t,s){return Math.max(Math.min(e,s),t)}function GI(e,t,s,r,a){let n,i,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)HI(e,a);else{let s=r?e[e.length-1]:e[0];for(n=0,i=e.length;n<i;++n)o=e[n],l=WI(s,o,e[Math.min(n+1,i-(r?0:1))%i],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,s=o}t.capBezierPoints&&function(e,t){let s,r,a,n,i,o=oI(e[0],t);for(s=0,r=e.length;s<r;++s)i=n,n=o,o=s<r-1&&oI(e[s+1],t),n&&(a=e[s],i&&(a.cp1x=qI(a.cp1x,t.left,t.right),a.cp1y=qI(a.cp1y,t.top,t.bottom)),o&&(a.cp2x=qI(a.cp2x,t.left,t.right),a.cp2y=qI(a.cp2y,t.top,t.bottom)))}(e,s)}function YI(){return"undefined"!==typeof window&&"undefined"!==typeof document}function $I(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function JI(e,t,s){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[s])):r=e,r}const QI=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const XI=["top","right","bottom","left"];function ZI(e,t,s){const r={};s=s?"-"+s:"";for(let a=0;a<4;a++){const n=XI[a];r[n]=parseFloat(e[t+"-"+n+s])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function eL(e,t){if("native"in e)return e;const{canvas:s,currentDevicePixelRatio:r}=t,a=QI(s),n="border-box"===a.boxSizing,i=ZI(a,"padding"),o=ZI(a,"border","width"),{x:l,y:c,box:d}=function(e,t){const s=e.touches,r=s&&s.length?s[0]:e,{offsetX:a,offsetY:n}=r;let i,o,l=!1;if(((e,t,s)=>(e>0||t>0)&&(!s||!s.shadowRoot))(a,n,e.target))i=a,o=n;else{const e=t.getBoundingClientRect();i=r.clientX-e.left,o=r.clientY-e.top,l=!0}return{x:i,y:o,box:l}}(e,s),u=i.left+(d&&o.left),h=i.top+(d&&o.top);let{width:m,height:p}=t;return n&&(m-=i.width+o.width,p-=i.height+o.height),{x:Math.round((l-u)/m*s.width/r),y:Math.round((c-h)/p*s.height/r)}}const tL=e=>Math.round(10*e)/10;function sL(e,t,s,r){const a=QI(e),n=ZI(a,"margin"),i=JI(a.maxWidth,e,"clientWidth")||rR,o=JI(a.maxHeight,e,"clientHeight")||rR,l=function(e,t,s){let r,a;if(void 0===t||void 0===s){const n=$I(e);if(n){const e=n.getBoundingClientRect(),i=QI(n),o=ZI(i,"border","width"),l=ZI(i,"padding");t=e.width-l.width-o.width,s=e.height-l.height-o.height,r=JI(i.maxWidth,n,"clientWidth"),a=JI(i.maxHeight,n,"clientHeight")}else t=e.clientWidth,s=e.clientHeight}return{width:t,height:s,maxWidth:r||rR,maxHeight:a||rR}}(e,t,s);let{width:c,height:d}=l;if("content-box"===a.boxSizing){const e=ZI(a,"border","width"),t=ZI(a,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-n.width),d=Math.max(0,r?c/r:d-n.height),c=tL(Math.min(c,i,l.maxWidth)),d=tL(Math.min(d,o,l.maxHeight)),c&&!d&&(d=tL(c/2));return(void 0!==t||void 0!==s)&&r&&l.height&&d>l.height&&(d=l.height,c=tL(Math.floor(d*r))),{width:c,height:d}}function rL(e,t,s){const r=t||1,a=Math.floor(e.height*r),n=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const i=e.canvas;return i.style&&(s||!i.style.height&&!i.style.width)&&(i.style.height="".concat(e.height,"px"),i.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||i.height!==a||i.width!==n)&&(e.currentDevicePixelRatio=r,i.height=a,i.width=n,e.ctx.setTransform(r,0,0,r,0,0),!0)}const aL=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};YI()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(qU){}return e}();function nL(e,t){const s=function(e,t){return QI(e).getPropertyValue(t)}(e,t),r=s&&s.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function iL(e,t,s,r){return{x:e.x+s*(t.x-e.x),y:e.y+s*(t.y-e.y)}}function oL(e,t,s,r){return{x:e.x+s*(t.x-e.x),y:"middle"===r?s<.5?e.y:t.y:"after"===r?s<1?e.y:t.y:s>0?t.y:e.y}}function lL(e,t,s,r){const a={x:e.cp2x,y:e.cp2y},n={x:t.cp1x,y:t.cp1y},i=iL(e,a,s),o=iL(a,n,s),l=iL(n,t,s),c=iL(i,o,s),d=iL(o,l,s);return iL(c,d,s)}function cL(e,t,s){return e?function(e,t){return{x:s=>e+e+t-s,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,s):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function dL(e,t){let s,r;"ltr"!==t&&"rtl"!==t||(s=e.canvas.style,r=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",t,"important"),e.prevTextDirection=r)}function uL(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function hL(e){return"angle"===e?{between:jR,compare:bR,normalize:vR}:{between:wR,compare:(e,t)=>e-t,normalize:e=>e}}function mL(e){let{start:t,end:s,count:r,loop:a,style:n}=e;return{start:t%r,end:s%r,loop:a&&(s-t+1)%r===0,style:n}}function pL(e,t,s){if(!s)return[e];const{property:r,start:a,end:n}=s,i=t.length,{compare:o,between:l,normalize:c}=hL(r),{start:d,end:u,loop:h,style:m}=function(e,t,s){const{property:r,start:a,end:n}=s,{between:i,normalize:o}=hL(r),l=t.length;let c,d,{start:u,end:h,loop:m}=e;if(m){for(u+=l,h+=l,c=0,d=l;c<d&&i(o(t[u%l][r]),a,n);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:m,style:e.style}}(e,t,s),p=[];let x,g,f,y=!1,b=null;const v=()=>y||l(a,f,x)&&0!==o(a,f),j=()=>!y||0===o(n,x)||l(n,f,x);for(let N=d,w=d;N<=u;++N)g=t[N%i],g.skip||(x=c(g[r]),x!==f&&(y=l(x,a,n),null===b&&v()&&(b=0===o(x,a)?N:w),null!==b&&j()&&(p.push(mL({start:b,end:N,loop:h,count:i,style:m})),b=null),w=N,f=x));return null!==b&&p.push(mL({start:b,end:u,loop:h,count:i,style:m})),p}function xL(e,t){const s=[],r=e.segments;for(let a=0;a<r.length;a++){const n=pL(r[a],e.points,t);n.length&&s.push(...n)}return s}function gL(e,t,s,r){return r&&r.setContext&&s?function(e,t,s,r){const a=e._chart.getContext(),n=fL(e.options),{_datasetIndex:i,options:{spanGaps:o}}=e,l=s.length,c=[];let d=n,u=t[0].start,h=u;function m(e,t,r,a){const n=o?-1:1;if(e!==t){for(e+=l;s[e%l].skip;)e-=n;for(;s[t%l].skip;)t+=n;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:a}),d=a,u=t%l)}}for(const p of t){u=o?u:p.start;let e,t=s[u%l];for(h=u+1;h<=p.end;h++){const n=s[h%l];e=fL(r.setContext(SI(a,{type:"segment",p0:t,p1:n,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:i}))),yL(e,d)&&m(u,h-1,p.loop,d),t=n,d=e}u<h-1&&m(u,h-1,p.loop,d)}return c}(e,t,s,r):t}function fL(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function yL(e,t){if(!t)return!1;const s=[],r=function(e,t){return zR(t)?(s.includes(t)||s.push(t),s.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}class bL{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,s,r){const a=t.listeners[r],n=t.duration;a.forEach(r=>r({chart:e,initial:t.initial,numSteps:n,currentStep:Math.min(s-t.start,n)}))}_refresh(){this._request||(this._running=!0,this._request=PR.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const a=s.items;let n,i=a.length-1,o=!1;for(;i>=0;--i)n=a[i],n._active?(n._total>s.duration&&(s.duration=n._total),n.tick(e),o=!0):(a[i]=a[a.length-1],a.pop());o&&(r.draw(),this._notify(r,s,e,"progress")),a.length||(s.running=!1,this._notify(r,s,e,"complete"),s.initial=!1),t+=a.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let s=t.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,s)),s}listen(e,t,s){this._getAnims(e).listeners[t].push(s)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const s=t.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var vL=new bL;const jL="transparent",NL={boolean:(e,t,s)=>s>.5?t:e,color(e,t,s){const r=UR(e||jL),a=r.valid&&UR(t||jL);return a&&a.valid?a.mix(r,s).hexString():t},number:(e,t,s)=>e+(t-e)*s};class wL{constructor(e,t,s,r){const a=t[s];r=AI([e.to,r,a,e.from]);const n=AI([e.from,a,r]);this._active=!0,this._fn=e.fn||NL[e.type||typeof n],this._easing=BR[e.easing]||BR.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=s,this._from=n,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,s){if(this._active){this._notify(!1);const r=this._target[this._prop],a=s-this._start,n=this._duration-a;this._start=s,this._duration=Math.floor(Math.max(n,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=AI([e.to,t,r,e.from]),this._from=AI([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,s=this._duration,r=this._prop,a=this._from,n=this._loop,i=this._to;let o;if(this._active=a!==i&&(n||t<s),!this._active)return this._target[r]=i,void this._notify(!0);t<0?this._target[r]=a:(o=t/s%2,o=n&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[r]=this._fn(a,i,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,s)=>{e.push({res:t,rej:s})})}_notify(e){const t=e?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][t]()}}class kL{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!OO(e))return;const t=Object.keys(eI.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const a=e[r];if(!OO(a))return;const n={};for(const e of t)n[e]=a[e];(MO(a.properties)&&a.properties||[r]).forEach(e=>{e!==r&&s.has(e)||s.set(e,n)})})}_animateOptions(e,t){const s=t.options,r=function(e,t){if(!t)return;let s=e.options;if(!s)return void(e.options=t);s.$shared&&(e.options=s=Object.assign({},s,{$shared:!1,$animations:{}}));return s}(e,s);if(!r)return[];const a=this._createAnimations(r,s);return s.$shared&&function(e,t){const s=[],r=Object.keys(t);for(let a=0;a<r.length;a++){const t=e[r[a]];t&&t.active()&&s.push(t.wait())}return Promise.all(s)}(e.options.$animations,s).then(()=>{e.options=s},()=>{}),a}_createAnimations(e,t){const s=this._properties,r=[],a=e.$animations||(e.$animations={}),n=Object.keys(t),i=Date.now();let o;for(o=n.length-1;o>=0;--o){const l=n[o];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let d=a[l];const u=s.get(l);if(d){if(u&&d.active()){d.update(u,c,i);continue}d.cancel()}u&&u.duration?(a[l]=d=new wL(u,e,l,c),r.push(d)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const s=this._createAnimations(e,t);return s.length?(vL.add(this._chart,s),!0):void 0}}function AL(e,t){const s=e&&e.options||{},r=s.reverse,a=void 0===s.min?t:0,n=void 0===s.max?t:0;return{start:r?n:a,end:r?a:n}}function SL(e,t){const s=[],r=e._getSortedDatasetMetas(t);let a,n;for(a=0,n=r.length;a<n;++a)s.push(r[a].index);return s}function CL(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=e.keys,n="single"===r.mode;let i,o,l,c;if(null!==t){for(i=0,o=a.length;i<o;++i){if(l=+a[i],l===s){if(r.all)continue;break}c=e.values[l],RO(c)&&(n||0===t||cR(t)===cR(c))&&(t+=c)}return t}}function _L(e,t){const s=e&&e.options.stacked;return s||void 0===s&&void 0!==t.stack}function TL(e,t,s){const r=e[t]||(e[t]={});return r[s]||(r[s]={})}function PL(e,t,s,r){for(const a of t.getMatchingVisibleMetas(r).reverse()){const t=e[a.index];if(s&&t>0||!s&&t<0)return a.index}return null}function EL(e,t){const{chart:s,_cachedMeta:r}=e,a=s._stacks||(s._stacks={}),{iScale:n,vScale:i,index:o}=r,l=n.axis,c=i.axis,d=function(e,t,s){return"".concat(e.id,".").concat(t.id,".").concat(s.stack||s.type)}(n,i,r),u=t.length;let h;for(let m=0;m<u;++m){const e=t[m],{[l]:s,[c]:n}=e;h=(e._stacks||(e._stacks={}))[c]=TL(a,d,s),h[o]=n,h._top=PL(h,i,!0,r.type),h._bottom=PL(h,i,!1,r.type);(h._visualValues||(h._visualValues={}))[o]=n}}function DL(e,t){const s=e.scales;return Object.keys(s).filter(e=>s[e].axis===t).shift()}function ML(e,t){const s=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][s])return;delete t[r][s],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[s]&&delete t[r]._visualValues[s]}}}const OL=e=>"reset"===e||"none"===e,RL=(e,t)=>t?e:Object.assign({},e);class IL{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=_L(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ML(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,s=this.getDataset(),r=(e,t,s,r)=>"x"===e?t:"r"===e?r:s,a=t.xAxisID=LO(s.xAxisID,DL(e,"x")),n=t.yAxisID=LO(s.yAxisID,DL(e,"y")),i=t.rAxisID=LO(s.rAxisID,DL(e,"r")),o=t.indexAxis,l=t.iAxisID=r(o,a,n,i),c=t.vAxisID=r(o,n,a,i);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(n),t.rScale=this.getScaleForId(i),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&_R(this._data,this),e._stacked&&ML(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),s=this._data;if(OO(t))this._data=function(e){const t=Object.keys(e),s=new Array(t.length);let r,a,n;for(r=0,a=t.length;r<a;++r)n=t[r],s[r]={x:n,y:e[n]};return s}(t);else if(s!==t){if(s){_R(s,this);const e=this._cachedMeta;ML(e),e._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),CR.forEach(t=>{const s="_onData"+JO(t),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];const i=r.apply(this,a);return e._chartjs.listeners.forEach(e=>{"function"===typeof e[s]&&e[s](...a)}),i}})}))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const a=t._stacked;t._stacked=_L(t.vScale,t),t.stack!==s.stack&&(r=!0,ML(t),t.stack=s.stack),this._resyncElements(e),(r||a!==t._stacked)&&EL(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:s,_data:r}=this,{iScale:a,_stacked:n}=s,i=a.axis;let o,l,c,d=0===e&&t===r.length||s._sorted,u=e>0&&s._parsed[e-1];if(!1===this._parsing)s._parsed=r,s._sorted=!0,c=r;else{c=MO(r[e])?this.parseArrayData(s,r,e,t):OO(r[e])?this.parseObjectData(s,r,e,t):this.parsePrimitiveData(s,r,e,t);const a=()=>null===l[i]||u&&l[i]<u[i];for(o=0;o<t;++o)s._parsed[o+e]=l=c[o],d&&(a()&&(d=!1),u=l);s._sorted=d}n&&EL(this,c)}parsePrimitiveData(e,t,s,r){const{iScale:a,vScale:n}=e,i=a.axis,o=n.axis,l=a.getLabels(),c=a===n,d=new Array(r);let u,h,m;for(u=0,h=r;u<h;++u)m=u+s,d[u]={[i]:c||a.parse(l[m],m),[o]:n.parse(t[m],m)};return d}parseArrayData(e,t,s,r){const{xScale:a,yScale:n}=e,i=new Array(r);let o,l,c,d;for(o=0,l=r;o<l;++o)c=o+s,d=t[c],i[o]={x:a.parse(d[0],c),y:n.parse(d[1],c)};return i}parseObjectData(e,t,s,r){const{xScale:a,yScale:n}=e,{xAxisKey:i="x",yAxisKey:o="y"}=this._parsing,l=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+s,h=t[u],l[c]={x:a.parse($O(h,i),u),y:n.parse($O(h,o),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,s){const r=this.chart,a=this._cachedMeta,n=t[e.axis];return CL({keys:SL(r,!0),values:t._stacks[e.axis]._visualValues},n,a.index,{mode:s})}updateRangeFromParsed(e,t,s,r){const a=s[t.axis];let n=null===a?NaN:a;const i=r&&s._stacks[t.axis];r&&i&&(r.values=i,n=CL(r,a,this._cachedMeta.index)),e.min=Math.min(e.min,n),e.max=Math.max(e.max,n)}getMinMax(e,t){const s=this._cachedMeta,r=s._parsed,a=s._sorted&&e===s.iScale,n=r.length,i=this._getOtherScale(e),o=((e,t,s)=>e&&!t.hidden&&t._stacked&&{keys:SL(s,!0),values:null})(t,s,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(e){const{min:t,max:s,minDefined:r,maxDefined:a}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:a?s:Number.POSITIVE_INFINITY}}(i);let u,h;function m(){h=r[u];const t=h[i.axis];return!RO(h[e.axis])||c>t||d<t}for(u=0;u<n&&(m()||(this.updateRangeFromParsed(l,e,h,o),!a));++u);if(a)for(u=n-1;u>=0;--u)if(!m()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,s=[];let r,a,n;for(r=0,a=t.length;r<a;++r)n=t[r][e.axis],RO(n)&&s.push(n);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,s=t.iScale,r=t.vScale,a=this.getParsed(e);return{label:s?""+s.getLabelForValue(a[s.axis]):"",value:r?""+r.getLabelForValue(a[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,s,r,a;return OO(e)?(t=e.top,s=e.right,r=e.bottom,a=e.left):t=s=r=a=e,{top:t,right:s,bottom:r,left:a,disabled:!1===e}}(LO(this.options.clip,function(e,t,s){if(!1===s)return!1;const r=AL(e,s),a=AL(t,s);return{top:a.end,right:r.end,bottom:a.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,s=this._cachedMeta,r=s.data||[],a=t.chartArea,n=[],i=this._drawStart||0,o=this._drawCount||r.length-i,l=this.options.drawActiveElementsOnTop;let c;for(s.dataset&&s.dataset.draw(e,a,i,o),c=i;c<i+o;++c){const t=r[c];t.hidden||(t.active&&l?n.push(t):t.draw(e,a))}for(c=0;c<n.length;++c)n[c].draw(e,a)}getStyle(e,t){const s=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,t,s){const r=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];a=t.$context||(t.$context=function(e,t,s){return SI(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:s,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),a.parsed=this.getParsed(e),a.raw=r.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=function(e,t){return SI(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),a.dataset=r,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=s,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",s=arguments.length>2?arguments[2]:void 0;const r="active"===t,a=this._cachedDataOpts,n=e+"-"+t,i=a[n],o=this.enableOptionSharing&&QO(s);if(i)return RL(i,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),c),h=Object.keys(eI.elements[e]),m=l.resolveNamedOptions(u,h,()=>this.getContext(s,r,t),d);return m.$shared&&(m.$shared=o,a[n]=Object.freeze(RL(m,o))),m}_resolveAnimations(e,t,s){const r=this.chart,a=this._cachedDataOpts,n="animation-".concat(t),i=a[n];if(i)return i;let o;if(!1!==r.options.animation){const r=this.chart.config,a=r.datasetAnimationScopeKeys(this._type,t),n=r.getOptionScopes(this.getDataset(),a);o=r.createResolver(n,this.getContext(e,s,t))}const l=new kL(r,o&&o.animations);return o&&o._cacheable&&(a[n]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||OL(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const s=this.resolveDataElementOptions(e,t),r=this._sharedOptions,a=this.getSharedOptions(s),n=this.includeOptions(t,a)||a!==r;return this.updateSharedOptions(a,t,s),{sharedOptions:a,includeOptions:n}}updateElement(e,t,s,r){OL(r)?Object.assign(e,s):this._resolveAnimations(t,r).update(e,s)}updateSharedOptions(e,t,s){e&&!OL(t)&&this._resolveAnimations(void 0,t).update(e,s)}_setStyle(e,t,s,r){e.active=r;const a=this.getStyle(t,r);this._resolveAnimations(t,s,r).update(e,{options:!r&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,t,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,s=this._cachedMeta.data;for(const[i,o,l]of this._syncList)this[i](o,l);this._syncList=[];const r=s.length,a=t.length,n=Math.min(a,r);n&&this.parse(0,n),a>r?this._insertElements(r,a-r,e):a<r&&this._removeElements(a,r-a)}_insertElements(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,a=r.data,n=e+t;let i;const o=e=>{for(e.length+=t,i=e.length-1;i>=n;i--)e[i]=e[i-t]};for(o(a),i=e;i<n;++i)a[i]=new this.dataElementType;this._parsing&&o(r._parsed),this.parse(e,t),s&&this.updateElements(a,e,t,"reset")}updateElements(e,t,s,r){}_removeElements(e,t){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(e,t);s._stacked&&ML(s,r)}s.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,s,r]=e;this[t](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function LL(e){const t=e.iScale,s=function(e,t){if(!e._cache.$bar){const s=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,a=s.length;t<a;t++)r=r.concat(s[t].controller.getAllParsedValues(e));e._cache.$bar=TR(r.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let r,a,n,i,o=t._length;const l=()=>{32767!==n&&-32768!==n&&(QO(i)&&(o=Math.min(o,Math.abs(n-i)||o)),i=n)};for(r=0,a=s.length;r<a;++r)n=t.getPixelForValue(s[r]),l();for(i=void 0,r=0,a=t.ticks.length;r<a;++r)n=t.getPixelForTick(r),l();return o}function FL(e,t,s,r){return MO(e)?function(e,t,s,r){const a=s.parse(e[0],r),n=s.parse(e[1],r),i=Math.min(a,n),o=Math.max(a,n);let l=i,c=o;Math.abs(i)>Math.abs(o)&&(l=o,c=i),t[s.axis]=c,t._custom={barStart:l,barEnd:c,start:a,end:n,min:i,max:o}}(e,t,s,r):t[s.axis]=s.parse(e,r),t}function BL(e,t,s,r){const a=e.iScale,n=e.vScale,i=a.getLabels(),o=a===n,l=[];let c,d,u,h;for(c=s,d=s+r;c<d;++c)h=t[c],u={},u[a.axis]=o||a.parse(i[c],c),l.push(FL(h,u,n,c));return l}function zL(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function UL(e,t,s,r){let a=t.borderSkipped;const n={};if(!a)return void(e.borderSkipped=n);if(!0===a)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:i,end:o,reverse:l,top:c,bottom:d}=function(e){let t,s,r,a,n;return e.horizontal?(t=e.base>e.x,s="left",r="right"):(t=e.base<e.y,s="bottom",r="top"),t?(a="end",n="start"):(a="start",n="end"),{start:s,end:r,reverse:t,top:a,bottom:n}}(e);"middle"===a&&s&&(e.enableBorderRadius=!0,(s._top||0)===r?a=c:(s._bottom||0)===r?a=d:(n[VL(d,i,o,l)]=!0,a=c)),n[VL(a,i,o,l)]=!0,e.borderSkipped=n}function VL(e,t,s,r){var a,n,i;return r?(i=s,e=KL(e=(a=e)===(n=t)?i:a===i?n:a,s,t)):e=KL(e,t,s),e}function KL(e,t,s){return"start"===e?t:"end"===e?s:e}function WL(e,t,s){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===s?.33:0:r}(0,JM.A)(IL,"defaults",{}),(0,JM.A)(IL,"datasetElementType",null),(0,JM.A)(IL,"dataElementType",null);class HL extends IL{parsePrimitiveData(e,t,s,r){return BL(e,t,s,r)}parseArrayData(e,t,s,r){return BL(e,t,s,r)}parseObjectData(e,t,s,r){const{iScale:a,vScale:n}=e,{xAxisKey:i="x",yAxisKey:o="y"}=this._parsing,l="x"===a.axis?i:o,c="x"===n.axis?i:o,d=[];let u,h,m,p;for(u=s,h=s+r;u<h;++u)p=t[u],m={},m[a.axis]=a.parse($O(p,l),u),d.push(FL($O(p,c),m,n,u));return d}updateRangeFromParsed(e,t,s,r){super.updateRangeFromParsed(e,t,s,r);const a=s._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:s,vScale:r}=t,a=this.getParsed(e),n=a._custom,i=zL(n)?"["+n.start+", "+n.end+"]":""+r.getLabelForValue(a[r.axis]);return{label:""+s.getLabelForValue(a[s.axis]),value:i}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,s,r){const a="reset"===r,{index:n,_cachedMeta:{vScale:i}}=this,o=i.getBasePixel(),l=i.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,r);for(let h=t;h<t+s;h++){const t=this.getParsed(h),s=a||DO(t[i.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),m=this._calculateBarIndexPixels(h,c),p=(t._stacks||{})[i.axis],x={horizontal:l,base:s.base,enableBorderRadius:!p||zL(t._custom)||n===p._top||n===p._bottom,x:l?s.head:m.center,y:l?m.center:s.head,height:l?m.size:Math.abs(s.size),width:l?Math.abs(s.size):m.size};u&&(x.options=d||this.resolveDataElementOptions(h,e[h].active?"active":r));const g=x.options||e[h].options;UL(x,g,p,n),WL(x,g,c.ratio),this.updateElement(e[h],h,x,r)}}_getStacks(e,t){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),a=s.options.stacked,n=[],i=e=>{const s=e.controller.getParsed(t),r=s&&s[e.vScale.axis];if(DO(r)||isNaN(r))return!0};for(const o of r)if((void 0===t||!i(o))&&((!1===a||-1===n.indexOf(o.stack)||void 0===a&&void 0===o.stack)&&n.push(o.stack),o.index===e))break;return n.length||n.push(void 0),n}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,s){const r=this._getStacks(e,s),a=void 0!==t?r.indexOf(t):-1;return-1===a?r.length-1:a}_getRuler(){const e=this.options,t=this._cachedMeta,s=t.iScale,r=[];let a,n;for(a=0,n=t.data.length;a<n;++a)r.push(s.getPixelForValue(this.getParsed(a)[s.axis],a));const i=e.barThickness;return{min:i||LL(t),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:i?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:s,index:r},options:{base:a,minBarLength:n}}=this,i=a||0,o=this.getParsed(e),l=o._custom,c=zL(l);let d,u,h=o[t.axis],m=0,p=s?this.applyStack(t,o,s):h;p!==h&&(m=p-h,p=h),c&&(h=l.barStart,p=l.barEnd-l.barStart,0!==h&&cR(h)!==cR(l.barEnd)&&(m=0),m+=h);const x=DO(a)||c?m:a;let g=t.getPixelForValue(x);if(d=this.chart.getDataVisibility(e)?t.getPixelForValue(m+p):g,u=d-g,Math.abs(u)<n){u=function(e,t,s){return 0!==e?cR(e):(t.isHorizontal()?1:-1)*(t.min>=s?1:-1)}(u,t,i)*n,h===i&&(g-=u/2);const e=t.getPixelForDecimal(0),a=t.getPixelForDecimal(1),l=Math.min(e,a),m=Math.max(e,a);g=Math.max(Math.min(g,m),l),d=g+u,s&&!c&&(o._stacks[t.axis]._visualValues[r]=t.getValueForPixel(d)-t.getValueForPixel(g))}if(g===t.getPixelForValue(i)){const e=cR(u)*t.getLineWidthForValue(i)/2;g+=e,u-=e}return{size:u,base:g,head:d,center:d+u/2}}_calculateBarIndexPixels(e,t){const s=t.scale,r=this.options,a=r.skipNull,n=LO(r.maxBarThickness,1/0);let i,o;if(t.grouped){const s=a?this._getStackCount(e):t.stackCount,l="flex"===r.barThickness?function(e,t,s,r){const a=t.pixels,n=a[e];let i=e>0?a[e-1]:null,o=e<a.length-1?a[e+1]:null;const l=s.categoryPercentage;null===i&&(i=n-(null===o?t.end-t.start:o-n)),null===o&&(o=n+n-i);const c=n-(n-Math.min(i,o))/2*l;return{chunk:Math.abs(o-i)/2*l/r,ratio:s.barPercentage,start:c}}(e,t,r,s):function(e,t,s,r){const a=s.barThickness;let n,i;return DO(a)?(n=t.min*s.categoryPercentage,i=s.barPercentage):(n=a*r,i=1),{chunk:n/r,ratio:i,start:t.pixels[e]-n/2}}(e,t,r,s),c=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0);i=l.start+l.chunk*c+l.chunk/2,o=Math.min(n,l.chunk*l.ratio)}else i=s.getPixelForValue(this.getParsed(e)[s.axis],e),o=Math.min(n,t.min*t.ratio);return{base:i-o/2,head:i+o/2,center:i,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,s=e.data,r=s.length;let a=0;for(;a<r;++a)null!==this.getParsed(a)[t.axis]&&s[a].draw(this._ctx)}}(0,JM.A)(HL,"id","bar"),(0,JM.A)(HL,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,JM.A)(HL,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class qL extends IL{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,s,r){const a=super.parsePrimitiveData(e,t,s,r);for(let n=0;n<a.length;n++)a[n]._custom=this.resolveDataElementOptions(n+s).radius;return a}parseArrayData(e,t,s,r){const a=super.parseArrayData(e,t,s,r);for(let n=0;n<a.length;n++){const e=t[s+n];a[n]._custom=LO(e[2],this.resolveDataElementOptions(n+s).radius)}return a}parseObjectData(e,t,s,r){const a=super.parseObjectData(e,t,s,r);for(let n=0;n<a.length;n++){const e=t[s+n];a[n]._custom=LO(e&&e.r&&+e.r,this.resolveDataElementOptions(n+s).radius)}return a}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let s=e.length-1;s>=0;--s)t=Math.max(t,e[s].size(this.resolveDataElementOptions(s))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart.data.labels||[],{xScale:r,yScale:a}=t,n=this.getParsed(e),i=r.getLabelForValue(n.x),o=a.getLabelForValue(n.y),l=n._custom;return{label:s[e]||"",value:"("+i+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,s,r){const a="reset"===r,{iScale:n,vScale:i}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,r),c=n.axis,d=i.axis;for(let u=t;u<t+s;u++){const t=e[u],s=!a&&this.getParsed(u),h={},m=h[c]=a?n.getPixelForDecimal(.5):n.getPixelForValue(s[c]),p=h[d]=a?i.getBasePixel():i.getPixelForValue(s[d]);h.skip=isNaN(m)||isNaN(p),l&&(h.options=o||this.resolveDataElementOptions(u,t.active?"active":r),a&&(h.options.radius=0)),this.updateElement(t,u,h,r)}}resolveDataElementOptions(e,t){const s=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const a=r.radius;return"active"!==t&&(r.radius=0),r.radius+=LO(s&&s._custom,a),r}}(0,JM.A)(qL,"id","bubble"),(0,JM.A)(qL,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,JM.A)(qL,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class GL extends IL{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const s=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=s;else{let a,n,i=e=>+s[e];if(OO(s[e])){const{key:e="value"}=this._parsing;i=t=>+$O(s[t],e)}for(a=e,n=e+t;a<n;++a)r._parsed[a]=i(a)}}_getRotation(){return pR(this.options.rotation-90)}_getCircumference(){return pR(this.options.circumference)}_getRotationExtents(){let e=tR,t=-tR;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,a=r._getRotation(),n=r._getCircumference();e=Math.min(e,a),t=Math.max(t,a+n)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:s}=t,r=this._cachedMeta,a=r.data,n=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,i=Math.max((Math.min(s.width,s.height)-n)/2,0),o=Math.min(((e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100:+e/t)(this.options.cutout,i),1),l=this._getRingWeight(this.index),{circumference:c,rotation:d}=this._getRotationExtents(),{ratioX:u,ratioY:h,offsetX:m,offsetY:p}=function(e,t,s){let r=1,a=1,n=0,i=0;if(t<tR){const o=e,l=o+t,c=Math.cos(o),d=Math.sin(o),u=Math.cos(l),h=Math.sin(l),m=(e,t,r)=>jR(e,o,l,!0)?1:Math.max(t,t*s,r,r*s),p=(e,t,r)=>jR(e,o,l,!0)?-1:Math.min(t,t*s,r,r*s),x=m(0,c,u),g=m(nR,d,h),f=p(eR,c,u),y=p(eR+nR,d,h);r=(x-f)/2,a=(g-y)/2,n=-(x+f)/2,i=-(g+y)/2}return{ratioX:r,ratioY:a,offsetX:n,offsetY:i}}(d,c,o),x=(s.width-n)/u,g=(s.height-n)/h,f=Math.max(Math.min(x,g)/2,0),y=FO(this.options.radius,f),b=(y-Math.max(y*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*y,this.offsetY=p*y,r.total=this.calculateTotal(),this.outerRadius=y-b*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-b*l,0),this.updateElements(a,0,a.length,e)}_circumference(e,t){const s=this.options,r=this._cachedMeta,a=this._getCircumference();return t&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*a/tR)}updateElements(e,t,s,r){const a="reset"===r,n=this.chart,i=n.chartArea,o=n.options.animation,l=(i.left+i.right)/2,c=(i.top+i.bottom)/2,d=a&&o.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:m,includeOptions:p}=this._getSharedOptions(t,r);let x,g=this._getRotation();for(x=0;x<t;++x)g+=this._circumference(x,a);for(x=t;x<t+s;++x){const t=this._circumference(x,a),s=e[x],n={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:u};p&&(n.options=m||this.resolveDataElementOptions(x,s.active?"active":r)),g+=t,this.updateElement(s,x,n,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let s,r=0;for(s=0;s<t.length;s++){const a=e._parsed[s];null===a||isNaN(a)||!this.chart.getDataVisibility(s)||t[s].hidden||(r+=Math.abs(a))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?tR*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,r=s.data.labels||[],a=qR(t._parsed[e],s.options.locale);return{label:r[e]||"",value:a}}getMaxBorderWidth(e){let t=0;const s=this.chart;let r,a,n,i,o;if(!e)for(r=0,a=s.data.datasets.length;r<a;++r)if(s.isDatasetVisible(r)){n=s.getDatasetMeta(r),e=n.data,i=n.controller;break}if(!e)return 0;for(r=0,a=e.length;r<a;++r)o=i.resolveDataElementOptions(r),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let s=0,r=e.length;s<r;++s){const e=this.resolveDataElementOptions(s);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(t+=this._getRingWeight(s));return t}_getRingWeight(e){return Math.max(LO(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}(0,JM.A)(GL,"id","doughnut"),(0,JM.A)(GL,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,JM.A)(GL,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),(0,JM.A)(GL,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:s,color:r}}=e.legend.options;return t.labels.map((t,a)=>{const n=e.getDatasetMeta(0).controller.getStyle(a);return{text:t,fillStyle:n.backgroundColor,strokeStyle:n.borderColor,fontColor:r,lineWidth:n.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}}});class YL extends IL{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:s,data:r=[],_dataset:a}=t,n=this.chart._animationsDisabled;let{start:i,count:o}=OR(t,r,n);this._drawStart=i,this._drawCount=o,RR(t)&&(i=0,o=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!a._decimated,s.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(s,void 0,{animated:!n,options:l},e),this.updateElements(r,i,o,e)}updateElements(e,t,s,r){const a="reset"===r,{iScale:n,vScale:i,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,r),u=n.axis,h=i.axis,{spanGaps:m,segment:p}=this.options,x=hR(m)?m:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||a||"none"===r,f=t+s,y=e.length;let b=t>0&&this.getParsed(t-1);for(let v=0;v<y;++v){const s=e[v],m=g?s:{};if(v<t||v>=f){m.skip=!0;continue}const y=this.getParsed(v),j=DO(y[h]),N=m[u]=n.getPixelForValue(y[u],v),w=m[h]=a||j?i.getBasePixel():i.getPixelForValue(o?this.applyStack(i,y,o):y[h],v);m.skip=isNaN(N)||isNaN(w)||j,m.stop=v>0&&Math.abs(y[u]-b[u])>x,p&&(m.parsed=y,m.raw=l.data[v]),d&&(m.options=c||this.resolveDataElementOptions(v,s.active?"active":r)),g||this.updateElement(s,v,m,r),b=y}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,s=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return s;const a=r[0].size(this.resolveDataElementOptions(0)),n=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,a,n)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}(0,JM.A)(YL,"id","line"),(0,JM.A)(YL,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,JM.A)(YL,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class $L extends IL{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,r=s.data.labels||[],a=qR(t._parsed[e].r,s.options.locale);return{label:r[e]||"",value:a}}parseObjectData(e,t,s,r){return zI.bind(this)(e,t,s,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,s)=>{const r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,s=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),a=Math.max(r/2,0),n=(a-Math.max(s.cutoutPercentage?a/100*s.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=a-n*this.index,this.innerRadius=this.outerRadius-n}updateElements(e,t,s,r){const a="reset"===r,n=this.chart,i=n.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,d=o.getIndexAngle(0)-.5*eR;let u,h=d;const m=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,r,m);for(u=t;u<t+s;u++){const t=e[u];let s=h,p=h+this._computeAngle(u,r,m),x=n.getDataVisibility(u)?o.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=p,a&&(i.animateScale&&(x=0),i.animateRotate&&(s=p=d));const g={x:l,y:c,innerRadius:0,outerRadius:x,startAngle:s,endAngle:p,options:this.resolveDataElementOptions(u,t.active?"active":r)};this.updateElement(t,u,g,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&t++}),t}_computeAngle(e,t,s){return this.chart.getDataVisibility(e)?pR(this.resolveDataElementOptions(e,t).angle||s):0}}(0,JM.A)($L,"id","polarArea"),(0,JM.A)($L,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,JM.A)($L,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:s,color:r}}=e.legend.options;return t.labels.map((t,a)=>{const n=e.getDatasetMeta(0).controller.getStyle(a);return{text:t,fillStyle:n.backgroundColor,strokeStyle:n.borderColor,fontColor:r,lineWidth:n.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class JL extends GL{}(0,JM.A)(JL,"id","pie"),(0,JM.A)(JL,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class QL extends IL{getLabelAndValue(e){const t=this._cachedMeta.vScale,s=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(s[t.axis])}}parseObjectData(e,t,s,r){return zI.bind(this)(e,t,s,r)}update(e){const t=this._cachedMeta,s=t.dataset,r=t.data||[],a=t.iScale.getLabels();if(s.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const n={_loop:!0,_fullLoop:a.length===r.length,options:t};this.updateElement(s,void 0,n,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,s,r){const a=this._cachedMeta.rScale,n="reset"===r;for(let i=t;i<t+s;i++){const t=e[i],s=this.resolveDataElementOptions(i,t.active?"active":r),o=a.getPointPositionForValue(i,this.getParsed(i).r),l=n?a.xCenter:o.x,c=n?a.yCenter:o.y,d={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:s};this.updateElement(t,i,d,r)}}}(0,JM.A)(QL,"id","radar"),(0,JM.A)(QL,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,JM.A)(QL,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class XL extends IL{getLabelAndValue(e){const t=this._cachedMeta,s=this.chart.data.labels||[],{xScale:r,yScale:a}=t,n=this.getParsed(e),i=r.getLabelForValue(n.x),o=a.getLabelForValue(n.y);return{label:s[e]||"",value:"("+i+", "+o+")"}}update(e){const t=this._cachedMeta,{data:s=[]}=t,r=this.chart._animationsDisabled;let{start:a,count:n}=OR(t,s,r);if(this._drawStart=a,this._drawCount=n,RR(t)&&(a=0,n=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:n}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!n._decimated,a.points=s;const i=this.resolveDatasetElementOptions(e);i.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:i},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(s,a,n,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,s,r){const a="reset"===r,{iScale:n,vScale:i,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),d=this.getSharedOptions(c),u=this.includeOptions(r,d),h=n.axis,m=i.axis,{spanGaps:p,segment:x}=this.options,g=hR(p)?p:Number.POSITIVE_INFINITY,f=this.chart._animationsDisabled||a||"none"===r;let y=t>0&&this.getParsed(t-1);for(let b=t;b<t+s;++b){const t=e[b],s=this.getParsed(b),c=f?t:{},p=DO(s[m]),v=c[h]=n.getPixelForValue(s[h],b),j=c[m]=a||p?i.getBasePixel():i.getPixelForValue(o?this.applyStack(i,s,o):s[m],b);c.skip=isNaN(v)||isNaN(j)||p,c.stop=b>0&&Math.abs(s[h]-y[h])>g,x&&(c.parsed=s,c.raw=l.data[b]),u&&(c.options=d||this.resolveDataElementOptions(b,t.active?"active":r)),f||this.updateElement(t,b,c,r),y=s}this.updateSharedOptions(d,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let s=t.length-1;s>=0;--s)e=Math.max(e,t[s].size(this.resolveDataElementOptions(s))/2);return e>0&&e}const s=e.dataset,r=s.options&&s.options.borderWidth||0;if(!t.length)return r;const a=t[0].size(this.resolveDataElementOptions(0)),n=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,a,n)/2}}(0,JM.A)(XL,"id","scatter"),(0,JM.A)(XL,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,JM.A)(XL,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var ZL=Object.freeze({__proto__:null,BarController:HL,BubbleController:qL,DoughnutController:GL,LineController:YL,PieController:JL,PolarAreaController:$L,RadarController:QL,ScatterController:XL});function eF(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class tF{static override(e){Object.assign(tF.prototype,e)}constructor(e){(0,JM.A)(this,"options",void 0),this.options=e||{}}init(){}formats(){return eF()}parse(){return eF()}format(){return eF()}add(){return eF()}diff(){return eF()}startOf(){return eF()}endOf(){return eF()}}var sF=tF;function rF(e,t,s,r){const{controller:a,data:n,_sorted:i}=e,o=a._cachedMeta.iScale;if(o&&t===o.axis&&"r"!==t&&i&&n.length){const e=o._reversePixels?SR:AR;if(!r)return e(n,t,s);if(a._sharedOptions){const r=n[0],a="function"===typeof r.getRange&&r.getRange(t);if(a){const r=e(n,t,s-a),i=e(n,t,s+a);return{lo:r.lo,hi:i.hi}}}}return{lo:0,hi:n.length-1}}function aF(e,t,s,r,a){const n=e.getSortedVisibleDatasetMetas(),i=s[t];for(let o=0,l=n.length;o<l;++o){const{index:e,data:s}=n[o],{lo:l,hi:c}=rF(n[o],t,i,a);for(let t=l;t<=c;++t){const a=s[t];a.skip||r(a,e,t)}}}function nF(e,t,s,r,a){const n=[];if(!a&&!e.isPointInArea(t))return n;return aF(e,s,t,function(s,i,o){(a||oI(s,e.chartArea,0))&&s.inRange(t.x,t.y,r)&&n.push({element:s,datasetIndex:i,index:o})},!0),n}function iF(e,t,s,r,a,n){let i=[];const o=function(e){const t=-1!==e.indexOf("x"),s=-1!==e.indexOf("y");return function(e,r){const a=t?Math.abs(e.x-r.x):0,n=s?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(n,2))}}(s);let l=Number.POSITIVE_INFINITY;return aF(e,s,t,function(s,c,d){const u=s.inRange(t.x,t.y,a);if(r&&!u)return;const h=s.getCenterPoint(a);if(!(!!n||e.isPointInArea(h))&&!u)return;const m=o(t,h);m<l?(i=[{element:s,datasetIndex:c,index:d}],l=m):m===l&&i.push({element:s,datasetIndex:c,index:d})}),i}function oF(e,t,s,r,a,n){return n||e.isPointInArea(t)?"r"!==s||r?iF(e,t,s,r,a,n):function(e,t,s,r){let a=[];return aF(e,s,t,function(e,s,n){const{startAngle:i,endAngle:o}=e.getProps(["startAngle","endAngle"],r),{angle:l}=fR(e,{x:t.x,y:t.y});jR(l,i,o)&&a.push({element:e,datasetIndex:s,index:n})}),a}(e,t,s,a):[]}function lF(e,t,s,r,a){const n=[],i="x"===s?"inXRange":"inYRange";let o=!1;return aF(e,s,t,(e,r,l)=>{e[i](t[s],a)&&(n.push({element:e,datasetIndex:r,index:l}),o=o||e.inRange(t.x,t.y,a))}),r&&!o?[]:n}var cF={evaluateInteractionItems:aF,modes:{index(e,t,s,r){const a=eL(t,e),n=s.axis||"x",i=s.includeInvisible||!1,o=s.intersect?nF(e,a,n,r,i):oF(e,a,n,!1,r,i),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,s=e.data[t];s&&!s.skip&&l.push({element:s,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,s,r){const a=eL(t,e),n=s.axis||"xy",i=s.includeInvisible||!1;let o=s.intersect?nF(e,a,n,r,i):oF(e,a,n,!1,r,i);if(o.length>0){const t=o[0].datasetIndex,s=e.getDatasetMeta(t).data;o=[];for(let e=0;e<s.length;++e)o.push({element:s[e],datasetIndex:t,index:e})}return o},point:(e,t,s,r)=>nF(e,eL(t,e),s.axis||"xy",r,s.includeInvisible||!1),nearest(e,t,s,r){const a=eL(t,e),n=s.axis||"xy",i=s.includeInvisible||!1;return oF(e,a,n,s.intersect,r,i)},x:(e,t,s,r)=>lF(e,eL(t,e),"x",s.intersect,r),y:(e,t,s,r)=>lF(e,eL(t,e),"y",s.intersect,r)}};const dF=["left","top","right","bottom"];function uF(e,t){return e.filter(e=>e.pos===t)}function hF(e,t){return e.filter(e=>-1===dF.indexOf(e.pos)&&e.box.axis===t)}function mF(e,t){return e.sort((e,s)=>{const r=t?s:e,a=t?e:s;return r.weight===a.weight?r.index-a.index:r.weight-a.weight})}function pF(e,t){const s=function(e){const t={};for(const s of e){const{stack:e,pos:r,stackWeight:a}=s;if(!e||!dF.includes(r))continue;const n=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});n.count++,n.weight+=a}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:a}=t;let n,i,o;for(n=0,i=e.length;n<i;++n){o=e[n];const{fullSize:i}=o.box,l=s[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*r:i&&t.availableWidth,o.height=a):(o.width=r,o.height=c?c*a:i&&t.availableHeight)}return s}function xF(e,t,s,r){return Math.max(e[s],t[s])+Math.max(e[r],t[r])}function gF(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function fF(e,t,s,r){const{pos:a,box:n}=s,i=e.maxPadding;if(!OO(a)){s.size&&(e[a]-=s.size);const t=r[s.stack]||{size:0,count:1};t.size=Math.max(t.size,s.horizontal?n.height:n.width),s.size=t.size/t.count,e[a]+=s.size}n.getPadding&&gF(i,n.getPadding());const o=Math.max(0,t.outerWidth-xF(i,e,"left","right")),l=Math.max(0,t.outerHeight-xF(i,e,"top","bottom")),c=o!==e.w,d=l!==e.h;return e.w=o,e.h=l,s.horizontal?{same:c,other:d}:{same:d,other:c}}function yF(e,t){const s=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{r[e]=Math.max(t[e],s[e])}),r}return r(e?["left","right"]:["top","bottom"])}function bF(e,t,s,r){const a=[];let n,i,o,l,c,d;for(n=0,i=e.length,c=0;n<i;++n){o=e[n],l=o.box,l.update(o.width||t.w,o.height||t.h,yF(o.horizontal,t));const{same:i,other:u}=fF(t,s,o,r);c|=i&&a.length,d=d||u,l.fullSize||a.push(o)}return c&&bF(a,t,s,r)||d}function vF(e,t,s,r,a){e.top=s,e.left=t,e.right=t+r,e.bottom=s+a,e.width=r,e.height=a}function jF(e,t,s,r){const a=s.padding;let{x:n,y:i}=t;for(const o of e){const e=o.box,l=r[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const r=t.w*c,n=l.size||e.height;QO(l.start)&&(i=l.start),e.fullSize?vF(e,a.left,i,s.outerWidth-a.right-a.left,n):vF(e,t.left+l.placed,i,r,n),l.start=i,l.placed+=r,i=e.bottom}else{const r=t.h*c,i=l.size||e.width;QO(l.start)&&(n=l.start),e.fullSize?vF(e,n,a.top,i,s.outerHeight-a.bottom-a.top):vF(e,n,t.top+l.placed,i,r),l.start=n,l.placed+=r,n=e.right}}t.x=n,t.y=i}var NF={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const s=e.boxes?e.boxes.indexOf(t):-1;-1!==s&&e.boxes.splice(s,1)},configure(e,t,s){t.fullSize=s.fullSize,t.position=s.position,t.weight=s.weight},update(e,t,s,r){if(!e)return;const a=wI(e.options.layout.padding),n=Math.max(t-a.width,0),i=Math.max(s-a.height,0),o=function(e){const t=function(e){const t=[];let s,r,a,n,i,o;for(s=0,r=(e||[]).length;s<r;++s)a=e[s],({position:n,options:{stack:i,stackWeight:o=1}}=a),t.push({index:s,box:a,pos:n,horizontal:a.isHorizontal(),weight:a.weight,stack:i&&n+i,stackWeight:o});return t}(e),s=mF(t.filter(e=>e.box.fullSize),!0),r=mF(uF(t,"left"),!0),a=mF(uF(t,"right")),n=mF(uF(t,"top"),!0),i=mF(uF(t,"bottom")),o=hF(t,"x"),l=hF(t,"y");return{fullSize:s,leftAndTop:r.concat(n),rightAndBottom:a.concat(l).concat(i).concat(o),chartArea:uF(t,"chartArea"),vertical:r.concat(a).concat(l),horizontal:n.concat(i).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;zO(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const d=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:s,padding:a,availableWidth:n,availableHeight:i,vBoxMaxWidth:n/2/d,hBoxMaxHeight:i/2}),h=Object.assign({},a);gF(h,wI(r));const m=Object.assign({maxPadding:h,w:n,h:i,x:a.left,y:a.top},a),p=pF(l.concat(c),u);bF(o.fullSize,m,u,p),bF(l,m,u,p),bF(c,m,u,p)&&bF(l,m,u,p),function(e){const t=e.maxPadding;function s(s){const r=Math.max(t[s]-e[s],0);return e[s]+=r,r}e.y+=s("top"),e.x+=s("left"),s("right"),s("bottom")}(m),jF(o.leftAndTop,m,u,p),m.x+=m.w,m.y+=m.h,jF(o.rightAndBottom,m,u,p),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},zO(o.chartArea,t=>{const s=t.box;Object.assign(s,e.chartArea),s.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class wF{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,s){}removeEventListener(e,t,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,s,r){return t=Math.max(0,t||e.width),s=s||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):s)}}isAttached(e){return!0}updateConfig(e){}}class kF extends wF{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const AF="$chartjs",SF={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},CF=e=>null===e||""===e;const _F=!!aL&&{passive:!0};function TF(e,t,s){e.canvas.removeEventListener(t,s,_F)}function PF(e,t){for(const s of e)if(s===t||s.contains(t))return!0}function EF(e,t,s){const r=e.canvas,a=new MutationObserver(e=>{let t=!1;for(const s of e)t=t||PF(s.addedNodes,r),t=t&&!PF(s.removedNodes,r);t&&s()});return a.observe(document,{childList:!0,subtree:!0}),a}function DF(e,t,s){const r=e.canvas,a=new MutationObserver(e=>{let t=!1;for(const s of e)t=t||PF(s.removedNodes,r),t=t&&!PF(s.addedNodes,r);t&&s()});return a.observe(document,{childList:!0,subtree:!0}),a}const MF=new Map;let OF=0;function RF(){const e=window.devicePixelRatio;e!==OF&&(OF=e,MF.forEach((t,s)=>{s.currentDevicePixelRatio!==e&&t()}))}function IF(e,t,s){const r=e.canvas,a=r&&$I(r);if(!a)return;const n=ER((e,t)=>{const r=a.clientWidth;s(e,t),r<a.clientWidth&&s()},window),i=new ResizeObserver(e=>{const t=e[0],s=t.contentRect.width,r=t.contentRect.height;0===s&&0===r||n(s,r)});return i.observe(a),function(e,t){MF.size||window.addEventListener("resize",RF),MF.set(e,t)}(e,n),i}function LF(e,t,s){s&&s.disconnect(),"resize"===t&&function(e){MF.delete(e),MF.size||window.removeEventListener("resize",RF)}(e)}function FF(e,t,s){const r=e.canvas,a=ER(t=>{null!==e.ctx&&s(function(e,t){const s=SF[e.type]||e.type,{x:r,y:a}=eL(e,t);return{type:s,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==a?a:null}}(t,e))},e);return function(e,t,s){e.addEventListener(t,s,_F)}(r,t,a),a}class BF extends wF{acquireContext(e,t){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(function(e,t){const s=e.style,r=e.getAttribute("height"),a=e.getAttribute("width");if(e[AF]={initial:{height:r,width:a,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",CF(a)){const t=nL(e,"width");void 0!==t&&(e.width=t)}if(CF(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=nL(e,"height");void 0!==t&&(e.height=t)}}(e,t),s):null}releaseContext(e){const t=e.canvas;if(!t[AF])return!1;const s=t[AF].initial;["height","width"].forEach(e=>{const r=s[e];DO(r)?t.removeAttribute(e):t.setAttribute(e,r)});const r=s.style||{};return Object.keys(r).forEach(e=>{t.style[e]=r[e]}),t.width=t.width,delete t[AF],!0}addEventListener(e,t,s){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),a={attach:EF,detach:DF,resize:IF}[t]||FF;r[t]=a(e,t,s)}removeEventListener(e,t){const s=e.$proxies||(e.$proxies={}),r=s[t];if(!r)return;({attach:LF,detach:LF,resize:LF}[t]||TF)(e,t,r),s[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,s,r){return sL(e,t,s,r)}isAttached(e){const t=$I(e);return!(!t||!t.isConnected)}}class zF{constructor(){(0,JM.A)(this,"x",void 0),(0,JM.A)(this,"y",void 0),(0,JM.A)(this,"active",!1),(0,JM.A)(this,"options",void 0),(0,JM.A)(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}hasValue(){return hR(this.x)&&hR(this.y)}getProps(e,t){const s=this.$animations;if(!t||!s)return this;const r={};return e.forEach(e=>{r[e]=s[e]&&s[e].active()?s[e]._to:this[e]}),r}}function UF(e,t){const s=e.options.ticks,r=function(e){const t=e.options.offset,s=e._tickSize(),r=e._length/s+(t?0:1),a=e._maxLength/s;return Math.floor(Math.min(r,a))}(e),a=Math.min(s.maxTicksLimit||r,r),n=s.major.enabled?function(e){const t=[];let s,r;for(s=0,r=e.length;s<r;s++)e[s].major&&t.push(s);return t}(t):[],i=n.length,o=n[0],l=n[i-1],c=[];if(i>a)return function(e,t,s,r){let a,n=0,i=s[0];for(r=Math.ceil(r),a=0;a<e.length;a++)a===i&&(t.push(e[a]),n++,i=s[n*r])}(t,c,n,i/a),c;const d=function(e,t,s){const r=function(e){const t=e.length;let s,r;if(t<2)return!1;for(r=e[0],s=1;s<t;++s)if(e[s]-e[s-1]!==r)return!1;return r}(e),a=t.length/s;if(!r)return Math.max(a,1);const n=function(e){const t=[],s=Math.sqrt(e);let r;for(r=1;r<s;r++)e%r===0&&(t.push(r),t.push(e/r));return s===(0|s)&&t.push(s),t.sort((e,t)=>e-t).pop(),t}(r);for(let i=0,o=n.length-1;i<o;i++){const e=n[i];if(e>a)return e}return Math.max(a,1)}(n,t,a);if(i>0){let e,s;const r=i>1?Math.round((l-o)/(i-1)):null;for(VF(t,c,d,DO(r)?0:o-r,o),e=0,s=i-1;e<s;e++)VF(t,c,d,n[e],n[e+1]);return VF(t,c,d,l,DO(r)?t.length:l+r),c}return VF(t,c,d),c}function VF(e,t,s,r,a){const n=LO(r,0),i=Math.min(LO(a,e.length),e.length);let o,l,c,d=0;for(s=Math.ceil(s),a&&(o=a-r,s=o/Math.floor(o/s)),c=n;c<0;)d++,c=Math.round(n+d*s);for(l=Math.max(n,0);l<i;l++)l===c&&(t.push(e[l]),d++,c=Math.round(n+d*s))}(0,JM.A)(zF,"defaults",{}),(0,JM.A)(zF,"defaultRoutes",void 0);const KF=(e,t,s)=>"top"===t||"left"===t?e[t]+s:e[t]-s,WF=(e,t)=>Math.min(t||e,e);function HF(e,t){const s=[],r=e.length/t,a=e.length;let n=0;for(;n<a;n+=r)s.push(e[Math.floor(n)]);return s}function qF(e,t,s){const r=e.ticks.length,a=Math.min(t,r-1),n=e._startPixel,i=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(a);if(!(s&&(l=1===r?Math.max(c-n,i-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(a-1))/2,c+=a<t?l:-l,c<n-o||c>i+o)))return c}function GF(e){return e.drawTicks?e.tickLength:0}function YF(e,t){if(!e.display)return 0;const s=kI(e.font,t),r=wI(e.padding);return(MO(e.text)?e.text.length:1)*s.lineHeight+r.height}function $F(e,t,s){let r=DR(e);return(s&&"right"!==t||!s&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class JF extends zF{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:s,_suggestedMax:r}=this;return e=IO(e,Number.POSITIVE_INFINITY),t=IO(t,Number.NEGATIVE_INFINITY),s=IO(s,Number.POSITIVE_INFINITY),r=IO(r,Number.NEGATIVE_INFINITY),{min:IO(e,s),max:IO(t,r),minDefined:RO(e),maxDefined:RO(t)}}getMinMax(e){let t,{min:s,max:r,minDefined:a,maxDefined:n}=this.getUserBounds();if(a&&n)return{min:s,max:r};const i=this.getMatchingVisibleMetas();for(let o=0,l=i.length;o<l;++o)t=i[o].controller.getMinMax(this,e),a||(s=Math.min(s,t.min)),n||(r=Math.max(r,t.max));return s=n&&s>r?r:s,r=a&&s>r?s:r,{min:IO(s,IO(r,s)),max:IO(r,IO(s,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){BO(this.options.beforeUpdate,[this])}update(e,t,s){const{beginAtZero:r,grace:a,ticks:n}=this.options,i=n.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,s){const{min:r,max:a}=e,n=FO(t,(a-r)/2),i=(e,t)=>s&&0===e?0:e+t;return{min:i(r,-Math.abs(n)),max:i(a,n)}}(this,a,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=i<this.ticks.length;this._convertTicksToLabels(o?HF(this.ticks,i):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),n.display&&(n.autoSkip||"auto"===n.source)&&(this.ticks=UF(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,s=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,s=!s),this._startPixel=e,this._endPixel=t,this._reversePixels=s,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){BO(this.options.afterUpdate,[this])}beforeSetDimensions(){BO(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){BO(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),BO(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){BO(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let s,r,a;for(s=0,r=e.length;s<r;s++)a=e[s],a.label=BO(t.callback,[a.value,s,e],this)}afterTickToLabelConversion(){BO(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){BO(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,s=WF(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,a=t.maxRotation;let n,i,o,l=r;if(!this._isVisible()||!t.display||r>=a||s<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=NR(this.chart.width-d,0,this.maxWidth);n=e.offset?this.maxWidth/s:h/(s-1),d+6>n&&(n=h/(s-(e.offset?.5:1)),i=this.maxHeight-GF(e.grid)-t.padding-YF(e.title,this.chart.options.font),o=Math.sqrt(d*d+u*u),l=xR(Math.min(Math.asin(NR((c.highest.height+6)/n,-1,1)),Math.asin(NR(i/o,-1,1))-Math.asin(NR(u/o,-1,1)))),l=Math.max(r,Math.min(a,l))),this.labelRotation=l}afterCalculateLabelRotation(){BO(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){BO(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:s,title:r,grid:a}}=this,n=this._isVisible(),i=this.isHorizontal();if(n){const n=YF(r,t.options.font);if(i?(e.width=this.maxWidth,e.height=GF(a)+n):(e.height=this.maxHeight,e.width=GF(a)+n),s.display&&this.ticks.length){const{first:t,last:r,widest:a,highest:n}=this._getLabelSizes(),o=2*s.padding,l=pR(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(i){const t=s.mirror?0:d*a.width+c*n.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=s.mirror?0:c*a.width+d*n.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,r,d,c)}}this._handleMargins(),i?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,s,r){const{ticks:{align:a,padding:n},position:i}=this.options,o=0!==this.labelRotation,l="top"!==i&&"x"===this.axis;if(this.isHorizontal()){const i=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;o?l?(d=r*e.width,u=s*t.height):(d=s*e.height,u=r*t.width):"start"===a?u=t.width:"end"===a?d=e.width:"inner"!==a&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-i+n)*this.width/(this.width-i),0),this.paddingRight=Math.max((u-c+n)*this.width/(this.width-c),0)}else{let s=t.height/2,r=e.height/2;"start"===a?(s=0,r=e.height):"end"===a&&(s=t.height,r=0),this.paddingTop=s+n,this.paddingBottom=r+n}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){BO(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,s;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,s=e.length;t<s;t++)DO(e[t].label)&&(e.splice(t,1),s--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let s=this.ticks;t<s.length&&(s=HF(s,t)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,s){const{ctx:r,_longestTextCache:a}=this,n=[],i=[],o=Math.floor(t/WF(t,s));let l,c,d,u,h,m,p,x,g,f,y,b=0,v=0;for(l=0;l<t;l+=o){if(u=e[l].label,h=this._resolveTickFontOptions(l),r.font=m=h.string,p=a[m]=a[m]||{data:{},gc:[]},x=h.lineHeight,g=f=0,DO(u)||MO(u)){if(MO(u))for(c=0,d=u.length;c<d;++c)y=u[c],DO(y)||MO(y)||(g=tI(r,p.data,p.gc,g,y),f+=x)}else g=tI(r,p.data,p.gc,g,u),f=x;n.push(g),i.push(f),b=Math.max(g,b),v=Math.max(f,v)}!function(e,t){zO(e,e=>{const s=e.gc,r=s.length/2;let a;if(r>t){for(a=0;a<r;++a)delete e.data[s[a]];s.splice(0,r)}})}(a,t);const j=n.indexOf(b),N=i.indexOf(v),w=e=>({width:n[e]||0,height:i[e]||0});return{first:w(0),last:w(t-1),widest:w(j),highest:w(N),widths:n,heights:i}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function(e){return NR(e,-32768,32767)}(this._alignToPixels?rI(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const s=t[e];return s.$context||(s.$context=function(e,t,s){return SI(e,{tick:s,index:t,type:"tick"})}(this.getContext(),e,s))}return this.$context||(this.$context=function(e,t){return SI(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=pR(this.labelRotation),s=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),a=this._getLabelSizes(),n=e.autoSkipPadding||0,i=a?a.widest.width+n:0,o=a?a.highest.height+n:0;return this.isHorizontal()?o*s>i*r?i/s:o/r:o*r<i*s?o/s:i/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,s=this.chart,r=this.options,{grid:a,position:n,border:i}=r,o=a.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),d=GF(a),u=[],h=i.setContext(this.getContext()),m=h.display?h.width:0,p=m/2,x=function(e){return rI(s,e,m)};let g,f,y,b,v,j,N,w,k,A,S,C;if("top"===n)g=x(this.bottom),j=this.bottom-d,w=g-p,A=x(e.top)+p,C=e.bottom;else if("bottom"===n)g=x(this.top),A=e.top,C=x(e.bottom)-p,j=g+p,w=this.top+d;else if("left"===n)g=x(this.right),v=this.right-d,N=g-p,k=x(e.left)+p,S=e.right;else if("right"===n)g=x(this.left),k=e.left,S=x(e.right)-p,v=g+p,N=this.left+d;else if("x"===t){if("center"===n)g=x((e.top+e.bottom)/2+.5);else if(OO(n)){const e=Object.keys(n)[0],t=n[e];g=x(this.chart.scales[e].getPixelForValue(t))}A=e.top,C=e.bottom,j=g+p,w=j+d}else if("y"===t){if("center"===n)g=x((e.left+e.right)/2);else if(OO(n)){const e=Object.keys(n)[0],t=n[e];g=x(this.chart.scales[e].getPixelForValue(t))}v=g-p,N=v-d,k=e.left,S=e.right}const _=LO(r.ticks.maxTicksLimit,c),T=Math.max(1,Math.ceil(c/_));for(f=0;f<c;f+=T){const e=this.getContext(f),t=a.setContext(e),r=i.setContext(e),n=t.lineWidth,c=t.color,d=r.dash||[],h=r.dashOffset,m=t.tickWidth,p=t.tickColor,x=t.tickBorderDash||[],g=t.tickBorderDashOffset;y=qF(this,f,o),void 0!==y&&(b=rI(s,y,n),l?v=N=k=S=b:j=w=A=C=b,u.push({tx1:v,ty1:j,tx2:N,ty2:w,x1:k,y1:A,x2:S,y2:C,width:n,color:c,borderDash:d,borderDashOffset:h,tickWidth:m,tickColor:p,tickBorderDash:x,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,u}_computeLabelItems(e){const t=this.axis,s=this.options,{position:r,ticks:a}=s,n=this.isHorizontal(),i=this.ticks,{align:o,crossAlign:l,padding:c,mirror:d}=a,u=GF(s.grid),h=u+c,m=d?-c:h,p=-pR(this.labelRotation),x=[];let g,f,y,b,v,j,N,w,k,A,S,C,_="middle";if("top"===r)j=this.bottom-m,N=this._getXAxisLabelAlignment();else if("bottom"===r)j=this.top+m,N=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(u);N=e.textAlign,v=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(u);N=e.textAlign,v=e.x}else if("x"===t){if("center"===r)j=(e.top+e.bottom)/2+h;else if(OO(r)){const e=Object.keys(r)[0],t=r[e];j=this.chart.scales[e].getPixelForValue(t)+h}N=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)v=(e.left+e.right)/2-h;else if(OO(r)){const e=Object.keys(r)[0],t=r[e];v=this.chart.scales[e].getPixelForValue(t)}N=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===o?_="top":"end"===o&&(_="bottom"));const T=this._getLabelSizes();for(g=0,f=i.length;g<f;++g){y=i[g],b=y.label;const e=a.setContext(this.getContext(g));w=this.getPixelForTick(g)+a.labelOffset,k=this._resolveTickFontOptions(g),A=k.lineHeight,S=MO(b)?b.length:1;const t=S/2,s=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let u,h=N;if(n?(v=w,"inner"===N&&(h=g===f-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),C="top"===r?"near"===l||0!==p?-S*A+A/2:"center"===l?-T.highest.height/2-t*A+A:-T.highest.height+A/2:"near"===l||0!==p?A/2:"center"===l?T.highest.height/2-t*A:T.highest.height-S*A,d&&(C*=-1),0===p||e.showLabelBackdrop||(v+=A/2*Math.sin(p))):(j=w,C=(1-S)*A/2),e.showLabelBackdrop){const t=wI(e.backdropPadding),s=T.heights[g],r=T.widths[g];let a=C-t.top,n=0-t.left;switch(_){case"middle":a-=s/2;break;case"bottom":a-=s}switch(N){case"center":n-=r/2;break;case"right":n-=r;break;case"inner":g===f-1?n-=r:g>0&&(n-=r/2)}u={left:n,top:a,width:r+t.width,height:s+t.height,color:e.backdropColor}}x.push({label:b,font:k,textOffset:C,options:{rotation:p,color:s,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:_,translation:[v,j],backdrop:u}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-pR(this.labelRotation))return"top"===e?"left":"right";let s="center";return"start"===t.align?s="left":"end"===t.align?s="right":"inner"===t.align&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:s,mirror:r,padding:a}}=this.options,n=e+a,i=this._getLabelSizes().widest.width;let o,l;return"left"===t?r?(l=this.right+a,"near"===s?o="left":"center"===s?(o="center",l+=i/2):(o="right",l+=i)):(l=this.right-n,"near"===s?o="right":"center"===s?(o="center",l-=i/2):(o="left",l=this.left)):"right"===t?r?(l=this.left+a,"near"===s?o="right":"center"===s?(o="center",l-=i/2):(o="left",l-=i)):(l=this.left+n,"near"===s?o="left":"center"===s?(o="center",l+=i/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:s,top:r,width:a,height:n}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(s,r,a,n),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(t=>t.value===e);if(s>=0){return t.setContext(this.getContext(s)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,n;const i=(e,t,r)=>{r.width&&r.color&&(s.save(),s.lineWidth=r.width,s.strokeStyle=r.color,s.setLineDash(r.borderDash||[]),s.lineDashOffset=r.borderDashOffset,s.beginPath(),s.moveTo(e.x,e.y),s.lineTo(t.x,t.y),s.stroke(),s.restore())};if(t.display)for(a=0,n=r.length;a<n;++a){const e=r[a];t.drawOnChartArea&&i({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&i({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:s,grid:r}}=this,a=s.setContext(this.getContext()),n=s.display?a.width:0;if(!n)return;const i=r.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,d,u;this.isHorizontal()?(l=rI(e,this.left,n)-n/2,c=rI(e,this.right,i)+i/2,d=u=o):(d=rI(e,this.top,n)-n/2,u=rI(e,this.bottom,i)+i/2,l=c=o),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(l,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,s=this._computeLabelArea();s&&lI(t,s);const r=this.getLabelItems(e);for(const a of r){const e=a.options,s=a.font;pI(t,a.label,0,a.textOffset,s,e)}s&&cI(t)}drawTitle(){const{ctx:e,options:{position:t,title:s,reverse:r}}=this;if(!s.display)return;const a=kI(s.font),n=wI(s.padding),i=s.align;let o=a.lineHeight/2;"bottom"===t||"center"===t||OO(t)?(o+=n.bottom,MO(s.text)&&(o+=a.lineHeight*(s.text.length-1))):o+=n.top;const{titleX:l,titleY:c,maxWidth:d,rotation:u}=function(e,t,s,r){const{top:a,left:n,bottom:i,right:o,chart:l}=e,{chartArea:c,scales:d}=l;let u,h,m,p=0;const x=i-a,g=o-n;if(e.isHorizontal()){if(h=MR(r,n,o),OO(s)){const e=Object.keys(s)[0],r=s[e];m=d[e].getPixelForValue(r)+x-t}else m="center"===s?(c.bottom+c.top)/2+x-t:KF(e,s,t);u=o-n}else{if(OO(s)){const e=Object.keys(s)[0],r=s[e];h=d[e].getPixelForValue(r)-g+t}else h="center"===s?(c.left+c.right)/2-g+t:KF(e,s,t);m=MR(r,i,a),p="left"===s?-nR:nR}return{titleX:h,titleY:m,maxWidth:u,rotation:p}}(this,o,t,i);pI(e,s.text,0,0,a,{color:s.color,maxWidth:d,rotation:u,textAlign:$F(i,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,s=LO(e.grid&&e.grid.z,-1),r=LO(e.border&&e.border.z,0);return this._isVisible()&&this.draw===JF.prototype.draw?[{z:s,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let a,n;for(a=0,n=t.length;a<n;++a){const n=t[a];n[s]!==this.id||e&&n.type!==e||r.push(n)}return r}_resolveTickFontOptions(e){return kI(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class QF{constructor(e,t,s){this.type=e,this.scope=t,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let s;(function(e){return"id"in e&&"defaults"in e})(t)&&(s=this.register(t));const r=this.items,a=e.id,n=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in r||(r[a]=e,function(e,t,s){const r=HO(Object.create(null),[s?eI.get(s):{},eI.get(t),e.defaults]);eI.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(s=>{const r=s.split("."),a=r.pop(),n=[e].concat(r).join("."),i=t[s].split("."),o=i.pop(),l=i.join(".");eI.route(n,a,l,o)})}(t,e.defaultRoutes);e.descriptors&&eI.describe(t,e.descriptors)}(e,n,s),this.override&&eI.override(e.id,e.overrides)),n}get(e){return this.items[e]}unregister(e){const t=this.items,s=e.id,r=this.scope;s in t&&delete t[s],r&&s in eI[r]&&(delete eI[r][s],this.override&&delete $R[s])}}class XF{constructor(){this.controllers=new QF(IL,"datasets",!0),this.elements=new QF(zF,"elements"),this.plugins=new QF(Object,"plugins"),this.scales=new QF(JF,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("unregister",t,this.scales)}_each(e,t,s){[...t].forEach(t=>{const r=s||this._getRegistryForType(t);s||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):zO(t,t=>{const r=s||this._getRegistryForType(t);this._exec(e,r,t)})})}_exec(e,t,s){const r=JO(e);BO(s["before"+r],[],s),t[e](s),BO(s["after"+r],[],s)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const s=this._typedRegistries[t];if(s.isForType(e))return s}return this.plugins}_get(e,t,s){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+s+".");return r}}var ZF=new XF;class eB{constructor(){this._init=[]}notify(e,t,s,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=r?this._descriptors(e).filter(r):this._descriptors(e),n=this._notify(a,e,t,s);return"afterDestroy"===t&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),n}_notify(e,t,s,r){r=r||{};for(const a of e){const e=a.plugin;if(!1===BO(e[s],[t,r,a.options],e)&&r.cancelable)return!1}return!0}invalidate(){DO(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const s=e&&e.config,r=LO(s.options&&s.options.plugins,{}),a=function(e){const t={},s=[],r=Object.keys(ZF.plugins.items);for(let n=0;n<r.length;n++)s.push(ZF.getPlugin(r[n]));const a=e.plugins||[];for(let n=0;n<a.length;n++){const e=a[n];-1===s.indexOf(e)&&(s.push(e),t[e.id]=!0)}return{plugins:s,localIds:t}}(s);return!1!==r||t?function(e,t,s,r){let{plugins:a,localIds:n}=t;const i=[],o=e.getContext();for(const l of a){const t=l.id,a=tB(s[t],r);null!==a&&i.push({plugin:l,options:sB(e.config,{plugin:l,local:n[t]},a,o)})}return i}(e,a,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],s=this._cache,r=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(r(t,s),e,"stop"),this._notify(r(s,t),e,"start")}}function tB(e,t){return t||!1!==e?!0===e?{}:e:null}function sB(e,t,s,r){let{plugin:a,local:n}=t;const i=e.pluginScopeKeys(a),o=e.getOptionScopes(s,i);return n&&a.defaults&&o.push(a.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function rB(e,t){const s=eI.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||s.indexAxis||"x"}function aB(e){if("x"===e||"y"===e||"r"===e)return e}function nB(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function iB(e){if(aB(e))return e;for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];for(const a of s){const t=a.axis||nB(a.position)||e.length>1&&aB(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function oB(e,t,s){if(s[t+"AxisID"]===e)return{axis:t}}function lB(e,t){const s=$R[e.type]||{scales:{}},r=t.scales||{},a=rB(e.type,t),n=Object.create(null);return Object.keys(r).forEach(t=>{const i=r[t];if(!OO(i))return console.error("Invalid scale configuration for scale: ".concat(t));if(i._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=iB(t,i,function(e,t){if(t.data&&t.data.datasets){const s=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(s.length)return oB(e,"x",s[0])||oB(e,"y",s[0])}return{}}(t,e),eI.scales[i.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,a),c=s.scales||{};n[t]=qO(Object.create(null),[{axis:o},i,c[o],c[l]])}),e.data.datasets.forEach(s=>{const a=s.type||e.type,i=s.indexAxis||rB(a,t),o=($R[a]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let s=e;return"_index_"===e?s=t:"_value_"===e&&(s="x"===t?"y":"x"),s}(e,i),a=s[t+"AxisID"]||t;n[a]=n[a]||Object.create(null),qO(n[a],[{axis:t},r[a],o[e]])})}),Object.keys(n).forEach(e=>{const t=n[e];qO(t,[eI.scales[t.type],eI.scale])}),n}function cB(e){const t=e.options||(e.options={});t.plugins=LO(t.plugins,{}),t.scales=lB(e,t)}function dB(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const uB=new Map,hB=new Set;function mB(e,t){let s=uB.get(e);return s||(s=t(),uB.set(e,s),hB.add(s)),s}const pB=(e,t,s)=>{const r=$O(t,s);void 0!==r&&e.add(r)};class xB{constructor(e){this._config=function(e){return(e=e||{}).data=dB(e.data),cB(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=dB(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),cB(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return mB(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return mB("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return mB("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,s=this.type;return mB("".concat(s,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const s=this._scopeCache;let r=s.get(e);return r&&!t||(r=new Map,s.set(e,r)),r}getOptionScopes(e,t,s){const{options:r,type:a}=this,n=this._cachedScopes(e,s),i=n.get(t);if(i)return i;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>pB(o,e,t))),t.forEach(e=>pB(o,r,e)),t.forEach(e=>pB(o,$R[a]||{},e)),t.forEach(e=>pB(o,eI,e)),t.forEach(e=>pB(o,JR,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),hB.has(t)&&n.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,$R[t]||{},eI.datasets[t]||{},{type:t},eI,JR]}resolveNamedOptions(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const a={$shared:!0},{resolver:n,subPrefixes:i}=gB(this._resolverCache,e,r);let o=n;if(function(e,t){const{isScriptable:s,isIndexable:r}=TI(e);for(const a of t){const t=s(a),n=r(a),i=(n||t)&&e[a];if(t&&(XO(i)||fB(i))||n&&MO(i))return!0}return!1}(n,t)){a.$shared=!1;o=_I(n,s=XO(s)?s():s,this.createResolver(e,s,i))}for(const l of t)a[l]=o[l];return a}createResolver(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:a}=gB(this._resolverCache,e,s);return OO(t)?_I(a,t,void 0,r):a}}function gB(e,t,s){let r=e.get(t);r||(r=new Map,e.set(t,r));const a=s.join();let n=r.get(a);if(!n){n={resolver:CI(t,s),subPrefixes:s.filter(e=>!e.toLowerCase().includes("hover"))},r.set(a,n)}return n}const fB=e=>OO(e)&&Object.getOwnPropertyNames(e).some(t=>XO(e[t]));const yB=["top","bottom","left","right","chartArea"];function bB(e,t){return"top"===e||"bottom"===e||-1===yB.indexOf(e)&&"x"===t}function vB(e,t){return function(s,r){return s[e]===r[e]?s[t]-r[t]:s[e]-r[e]}}function jB(e){const t=e.chart,s=t.options.animation;t.notifyPlugins("afterRender"),BO(s&&s.onComplete,[e],t)}function NB(e){const t=e.chart,s=t.options.animation;BO(s&&s.onProgress,[e],t)}function wB(e){return YI()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const kB={},AB=e=>{const t=wB(e);return Object.values(kB).filter(e=>e.canvas===t).pop()};function SB(e,t,s){const r=Object.keys(e);for(const a of r){const r=+a;if(r>=t){const n=e[a];delete e[a],(s>0||r>t)&&(e[r+s]=n)}}}function CB(e,t,s){return e.options.clip?e[s]:t[s]}class _B{static register(){ZF.add(...arguments),TB()}static unregister(){ZF.remove(...arguments),TB()}constructor(e,t){const s=this.config=new xB(t),r=wB(e),a=AB(r);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const n=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||function(e){return!YI()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?kF:BF}(r)),this.platform.updateConfig(s);const i=this.platform.acquireContext(r,n.aspectRatio),o=i&&i.canvas,l=o&&o.height,c=o&&o.width;this.id=EO(),this.ctx=i,this.canvas=o,this.width=c,this.height=l,this._options=n,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new eB,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let s;return function(){for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return t?(clearTimeout(s),s=setTimeout(e,t,a)):e.apply(this,a),t}}(e=>this.update(e),n.resizeDelay||0),this._dataChanges=[],kB[this.id]=this,i&&o?(vL.listen(this,"complete",jB),vL.listen(this,"progress",NB),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:s,height:r,_aspectRatio:a}=this;return DO(e)?t&&a?a:r?s/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ZF}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():rL(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return aI(this.canvas,this.ctx),this}stop(){return vL.stop(this),this}resize(e,t){vL.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const s=this.options,r=this.canvas,a=s.maintainAspectRatio&&this.aspectRatio,n=this.platform.getMaximumSize(r,e,t,a),i=s.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=n.width,this.height=n.height,this._aspectRatio=this.aspectRatio,rL(this,i,!0)&&(this.notifyPlugins("resize",{size:n}),BO(s.onResize,[this,n],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){zO(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,s=this.scales,r=Object.keys(s).reduce((e,t)=>(e[t]=!1,e),{});let a=[];t&&(a=a.concat(Object.keys(t).map(e=>{const s=t[e],r=iB(e,s),a="r"===r,n="x"===r;return{options:s,dposition:a?"chartArea":n?"bottom":"left",dtype:a?"radialLinear":n?"category":"linear"}}))),zO(a,t=>{const a=t.options,n=a.id,i=iB(n,a),o=LO(a.type,t.dtype);void 0!==a.position&&bB(a.position,i)===bB(t.dposition)||(a.position=t.dposition),r[n]=!0;let l=null;if(n in s&&s[n].type===o)l=s[n];else{l=new(ZF.getScale(o))({id:n,type:o,ctx:this.ctx,chart:this}),s[l.id]=l}l.init(a,e)}),zO(r,(e,t)=>{e||delete s[t]}),zO(s,e=>{NF.configure(this,e,e.options),NF.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,s=e.length;if(e.sort((e,t)=>e.index-t.index),s>t){for(let e=t;e<s;++e)this._destroyDatasetMeta(e);e.splice(t,s-t)}this._sortedMetasets=e.slice(0).sort(vB("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,s)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=t.length;s<r;s++){const r=t[s];let a=this.getDatasetMeta(s);const n=r.type||this.config.type;if(a.type&&a.type!==n&&(this._destroyDatasetMeta(s),a=this.getDatasetMeta(s)),a.type=n,a.indexAxis=r.indexAxis||rB(n,this.options),a.order=r.order||0,a.index=s,a.label=""+r.label,a.visible=this.isDatasetVisible(s),a.controller)a.controller.updateIndex(s),a.controller.linkScales();else{const t=ZF.getController(n),{datasetElementType:r,dataElementType:i}=eI.datasets[n];Object.assign(t,{dataElementType:ZF.getElement(i),datasetElementType:r&&ZF.getElement(r)}),a.controller=new t(this,s),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){zO(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const s=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let n=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===a.indexOf(e);e.buildOrUpdateElements(t),n=Math.max(+e.getMaxOverflow(),n)}n=this._minPadding=s.layout.autoPadding?n:0,this._updateLayout(n),r||zO(a,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(vB("z","_idx"));const{_active:i,_lastEvent:o}=this;o?this._eventHandler(o,!0):i.length&&this._updateHoverStyles(i,i,!0),this.render()}_updateScales(){zO(this.scales,e=>{NF.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),s=new Set(e.events);ZO(t,s)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:a}of t){SB(e,r,"_removeElements"===s?-a:a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,s=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),r=s(0);for(let a=1;a<t;a++)if(!ZO(r,s(a)))return;return Array.from(r).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;NF.update(this,this.width,this.height,e);const t=this.chartArea,s=t.width<=0||t.height<=0;this._layers=[],zO(this.boxes,e=>{s&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,s=this.data.datasets.length;t<s;++t)this._updateDataset(t,XO(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const s=this.getDatasetMeta(e),r={meta:s,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(s.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(vL.has(this)?this.attached&&!vL.running(this)&&vL.start(this):(this.draw(),jB({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resize(e,t),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,s=[];let r,a;for(r=0,a=t.length;r<a;++r){const a=t[r];e&&!a.visible||s.push(a)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,s=e._clip,r=!s.disabled,a=function(e,t){const{xScale:s,yScale:r}=e;return s&&r?{left:CB(s,t,"left"),right:CB(s,t,"right"),top:CB(r,t,"top"),bottom:CB(r,t,"bottom")}:t}(e,this.chartArea),n={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&lI(t,{left:!1===s.left?0:a.left-s.left,right:!1===s.right?this.width:a.right+s.right,top:!1===s.top?0:a.top-s.top,bottom:!1===s.bottom?this.height:a.bottom+s.bottom}),e.controller.draw(),r&&cI(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return oI(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,s,r){const a=cF.modes[t];return"function"===typeof a?a(this,e,s,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],s=this._metasets;let r=s.filter(e=>e&&e._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=SI(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const s=this.getDatasetMeta(e);return"boolean"===typeof s.hidden?!s.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,s){const r=s?"show":"hide",a=this.getDatasetMeta(e),n=a.controller._resolveAnimations(void 0,r);QO(t)?(a.data[t].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),n.update(a,{visible:s}),this.update(t=>t.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),vL.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),aI(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete kB[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,s=(s,r)=>{t.addEventListener(this,s,r),e[s]=r},r=(e,t,s)=>{e.offsetX=t,e.offsetY=s,this._eventHandler(e)};zO(this.options.events,e=>s(e,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,s=(s,r)=>{t.addEventListener(this,s,r),e[s]=r},r=(s,r)=>{e[s]&&(t.removeEventListener(this,s,r),delete e[s])},a=(e,t)=>{this.canvas&&this.resize(e,t)};let n;const i=()=>{r("attach",i),this.attached=!0,this.resize(),s("resize",a),s("detach",n)};n=()=>{this.attached=!1,r("resize",a),this._stop(),this._resize(0,0),s("attach",i)},t.isAttached(this.canvas)?i():n()}unbindEvents(){zO(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},zO(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,s){const r=s?"set":"remove";let a,n,i,o;for("dataset"===t&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+r+"DatasetHoverStyle"]()),i=0,o=e.length;i<o;++i){n=e[i];const t=n&&this.getDatasetMeta(n.datasetIndex).controller;t&&t[r+"HoverStyle"](n.element,n.datasetIndex,n.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],s=e.map(e=>{let{datasetIndex:t,index:s}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[s],index:s}});!UO(s,t)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,t))}notifyPlugins(e,t,s){return this._plugins.notify(this,e,t,s)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,s){const r=this.options.hover,a=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),n=a(t,e),i=s?e:a(e,t);n.length&&this.updateHoverStyle(n,r.mode,!1),i.length&&r.mode&&this.updateHoverStyle(i,r.mode,!0)}_eventHandler(e,t){const s={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",s,r))return;const a=this._handleEvent(e,t,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(a||s.changed)&&this.render(),this}_handleEvent(e,t,s){const{_active:r=[],options:a}=this,n=t,i=this._getActiveElements(e,r,s,n),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,s,r){return s&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,s,o);s&&(this._lastEvent=null,BO(a.onHover,[e,i,this],this),o&&BO(a.onClick,[e,i,this],this));const c=!UO(i,r);return(c||t)&&(this._active=i,this._updateHoverStyles(i,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,s,r){if("mouseout"===e.type)return[];if(!s)return t;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,r)}}function TB(){return zO(_B.instances,e=>e._plugins.invalidate())}function PB(e,t,s,r){const a=function(e){return vI(e,["outerStart","outerEnd","innerStart","innerEnd"])}(e.options.borderRadius),n=(s-t)/2,i=Math.min(n,r*t/2),o=e=>{const t=(s-Math.min(n,e))*r/2;return NR(e,0,Math.min(n,t))};return{outerStart:o(a.outerStart),outerEnd:o(a.outerEnd),innerStart:NR(a.innerStart,0,i),innerEnd:NR(a.innerEnd,0,i)}}function EB(e,t,s,r){return{x:s+e*Math.cos(t),y:r+e*Math.sin(t)}}function DB(e,t,s,r,a,n){const{x:i,y:o,startAngle:l,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+r+s-c,0),h=d>0?d+r+s+c:0;let m=0;const p=a-l;if(r){const e=((d>0?d-r:0)+(u>0?u-r:0))/2;m=(p-(0!==e?p*e/(e+r):p))/2}const x=(p-Math.max(.001,p*u-s/eR)/u)/2,g=l+x+m,f=a-x-m,{outerStart:y,outerEnd:b,innerStart:v,innerEnd:j}=PB(t,h,u,f-g),N=u-y,w=u-b,k=g+y/N,A=f-b/w,S=h+v,C=h+j,_=g+v/S,T=f-j/C;if(e.beginPath(),n){const t=(k+A)/2;if(e.arc(i,o,u,k,t),e.arc(i,o,u,t,A),b>0){const t=EB(w,A,i,o);e.arc(t.x,t.y,b,A,f+nR)}const s=EB(C,f,i,o);if(e.lineTo(s.x,s.y),j>0){const t=EB(C,T,i,o);e.arc(t.x,t.y,j,f+nR,T+Math.PI)}const r=(f-j/h+(g+v/h))/2;if(e.arc(i,o,h,f-j/h,r,!0),e.arc(i,o,h,r,g+v/h,!0),v>0){const t=EB(S,_,i,o);e.arc(t.x,t.y,v,_+Math.PI,g-nR)}const a=EB(N,g,i,o);if(e.lineTo(a.x,a.y),y>0){const t=EB(N,k,i,o);e.arc(t.x,t.y,y,g-nR,k)}}else{e.moveTo(i,o);const t=Math.cos(k)*u+i,s=Math.sin(k)*u+o;e.lineTo(t,s);const r=Math.cos(A)*u+i,a=Math.sin(A)*u+o;e.lineTo(r,a)}e.closePath()}function MB(e,t,s,r,a){const{fullCircles:n,startAngle:i,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h}=l,m="inner"===l.borderAlign;if(!c)return;e.setLineDash(u||[]),e.lineDashOffset=h,m?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let p=t.endAngle;if(n){DB(e,t,s,r,p,a);for(let t=0;t<n;++t)e.stroke();isNaN(o)||(p=i+(o%tR||tR))}m&&function(e,t,s){const{startAngle:r,pixelMargin:a,x:n,y:i,outerRadius:o,innerRadius:l}=t;let c=a/o;e.beginPath(),e.arc(n,i,o,r-c,s+c),l>a?(c=a/l,e.arc(n,i,l,s+c,r-c,!0)):e.arc(n,i,a,s+nR,r-nR),e.closePath(),e.clip()}(e,t,p),n||(DB(e,t,s,r,p,a),e.stroke())}(0,JM.A)(_B,"defaults",eI),(0,JM.A)(_B,"instances",kB),(0,JM.A)(_B,"overrides",$R),(0,JM.A)(_B,"registry",ZF),(0,JM.A)(_B,"version","4.4.1"),(0,JM.A)(_B,"getChart",AB);class OB extends zF{constructor(e){super(),(0,JM.A)(this,"circumference",void 0),(0,JM.A)(this,"endAngle",void 0),(0,JM.A)(this,"fullCircles",void 0),(0,JM.A)(this,"innerRadius",void 0),(0,JM.A)(this,"outerRadius",void 0),(0,JM.A)(this,"pixelMargin",void 0),(0,JM.A)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,s){const r=this.getProps(["x","y"],s),{angle:a,distance:n}=fR(r,{x:e,y:t}),{startAngle:i,endAngle:o,innerRadius:l,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),u=(this.options.spacing+this.options.borderWidth)/2,h=LO(d,o-i)>=tR||jR(a,i,o),m=wR(n,l+u,c+u);return h&&m}getCenterPoint(e){const{x:t,y:s,startAngle:r,endAngle:a,innerRadius:n,outerRadius:i}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(r+a)/2,d=(n+i+l+o)/2;return{x:t+Math.cos(c)*d,y:s+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:s}=this,r=(t.offset||0)/4,a=(t.spacing||0)/2,n=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=s>tR?Math.floor(s/tR):0,0===s||this.innerRadius<0||this.outerRadius<0)return;e.save();const i=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(i)*r,Math.sin(i)*r);const o=r*(1-Math.sin(Math.min(eR,s||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,s,r,a){const{fullCircles:n,startAngle:i,circumference:o}=t;let l=t.endAngle;if(n){DB(e,t,s,r,l,a);for(let t=0;t<n;++t)e.fill();isNaN(o)||(l=i+(o%tR||tR))}DB(e,t,s,r,l,a),e.fill()}(e,this,o,a,n),MB(e,this,o,a,n),e.restore()}}function RB(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=LO(s.borderCapStyle,t.borderCapStyle),e.setLineDash(LO(s.borderDash,t.borderDash)),e.lineDashOffset=LO(s.borderDashOffset,t.borderDashOffset),e.lineJoin=LO(s.borderJoinStyle,t.borderJoinStyle),e.lineWidth=LO(s.borderWidth,t.borderWidth),e.strokeStyle=LO(s.borderColor,t.borderColor)}function IB(e,t,s){e.lineTo(s.x,s.y)}function LB(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:a=0,end:n=r-1}=s,{start:i,end:o}=t,l=Math.max(a,i),c=Math.min(n,o),d=a<i&&n<i||a>o&&n>o;return{count:r,start:l,loop:t.loop,ilen:c<l&&!d?r+c-l:c-l}}function FB(e,t,s,r){const{points:a,options:n}=t,{count:i,start:o,loop:l,ilen:c}=LB(a,s,r),d=function(e){return e.stepped?dI:e.tension||"monotone"===e.cubicInterpolationMode?uI:IB}(n);let u,h,m,{move:p=!0,reverse:x}=r||{};for(u=0;u<=c;++u)h=a[(o+(x?c-u:u))%i],h.skip||(p?(e.moveTo(h.x,h.y),p=!1):d(e,m,h,x,n.stepped),m=h);return l&&(h=a[(o+(x?c:0))%i],d(e,m,h,x,n.stepped)),!!l}function BB(e,t,s,r){const a=t.points,{count:n,start:i,ilen:o}=LB(a,s,r),{move:l=!0,reverse:c}=r||{};let d,u,h,m,p,x,g=0,f=0;const y=e=>(i+(c?o-e:e))%n,b=()=>{m!==p&&(e.lineTo(g,p),e.lineTo(g,m),e.lineTo(g,x))};for(l&&(u=a[y(0)],e.moveTo(u.x,u.y)),d=0;d<=o;++d){if(u=a[y(d)],u.skip)continue;const t=u.x,s=u.y,r=0|t;r===h?(s<m?m=s:s>p&&(p=s),g=(f*g+t)/++f):(b(),e.lineTo(t,s),h=r,f=0,m=p=s),x=s}b()}function zB(e){const t=e.options,s=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!s?BB:FB}(0,JM.A)(OB,"id","arc"),(0,JM.A)(OB,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),(0,JM.A)(OB,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,JM.A)(OB,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const UB="function"===typeof Path2D;function VB(e,t,s,r){UB&&!t.options.segment?function(e,t,s,r){let a=t._path;a||(a=t._path=new Path2D,t.path(a,s,r)&&a.closePath()),RB(e,t.options),e.stroke(a)}(e,t,s,r):function(e,t,s,r){const{segments:a,options:n}=t,i=zB(t);for(const o of a)RB(e,n,o.style),e.beginPath(),i(e,t,o,{start:s,end:s+r-1})&&e.closePath(),e.stroke()}(e,t,s,r)}class KB extends zF{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const s=this.options;if((s.tension||"monotone"===s.cubicInterpolationMode)&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;GI(this._points,s,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const s=e.points,r=e.options.spanGaps,a=s.length;if(!a)return[];const n=!!e._loop,{start:i,end:o}=function(e,t,s,r){let a=0,n=t-1;if(s&&!r)for(;a<t&&!e[a].skip;)a++;for(;a<t&&e[a].skip;)a++;for(a%=t,s&&(n+=a);n>a&&e[n%t].skip;)n--;return n%=t,{start:a,end:n}}(s,a,n,r);return gL(e,!0===r?[{start:i,end:o,loop:n}]:function(e,t,s,r){const a=e.length,n=[];let i,o=t,l=e[t];for(i=t+1;i<=s;++i){const s=e[i%a];s.skip||s.stop?l.skip||(r=!1,n.push({start:t%a,end:(i-1)%a,loop:r}),t=o=s.stop?i:null):(o=i,l.skip&&(t=i)),l=s}return null!==o&&n.push({start:t%a,end:o%a,loop:r}),n}(s,i,o<i?o+a:o,!!e._fullLoop&&0===i&&o===a-1),s,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,s=e.length;return s&&t[e[s-1].end]}interpolate(e,t){const s=this.options,r=e[t],a=this.points,n=xL(this,{property:t,start:r,end:r});if(!n.length)return;const i=[],o=function(e){return e.stepped?oL:e.tension||"monotone"===e.cubicInterpolationMode?lL:iL}(s);let l,c;for(l=0,c=n.length;l<c;++l){const{start:c,end:d}=n[l],u=a[c],h=a[d];if(u===h){i.push(u);continue}const m=o(u,h,Math.abs((r-u[t])/(h[t]-u[t])),s.stepped);m[t]=e[t],i.push(m)}return 1===i.length?i[0]:i}pathSegment(e,t,s){return zB(this)(e,this,t,s)}path(e,t,s){const r=this.segments,a=zB(this);let n=this._loop;t=t||0,s=s||this.points.length-t;for(const i of r)n&=a(e,this,i,{start:t,end:t+s-1});return!!n}draw(e,t,s,r){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),VB(e,this,s,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function WB(e,t,s,r){const a=e.options,{[s]:n}=e.getProps([s],r);return Math.abs(t-n)<a.radius+a.hitRadius}(0,JM.A)(KB,"id","line"),(0,JM.A)(KB,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,JM.A)(KB,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,JM.A)(KB,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class HB extends zF{constructor(e){super(),(0,JM.A)(this,"parsed",void 0),(0,JM.A)(this,"skip",void 0),(0,JM.A)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,s){const r=this.options,{x:a,y:n}=this.getProps(["x","y"],s);return Math.pow(e-a,2)+Math.pow(t-n,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return WB(this,e,"x",t)}inYRange(e,t){return WB(this,e,"y",t)}getCenterPoint(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const s=this.options;this.skip||s.radius<.1||!oI(this,t,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,nI(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function qB(e,t){const{x:s,y:r,base:a,width:n,height:i}=e.getProps(["x","y","base","width","height"],t);let o,l,c,d,u;return e.horizontal?(u=i/2,o=Math.min(s,a),l=Math.max(s,a),c=r-u,d=r+u):(u=n/2,o=s-u,l=s+u,c=Math.min(r,a),d=Math.max(r,a)),{left:o,top:c,right:l,bottom:d}}function GB(e,t,s,r){return e?0:NR(t,s,r)}function YB(e){const t=qB(e),s=t.right-t.left,r=t.bottom-t.top,a=function(e,t,s){const r=e.options.borderWidth,a=e.borderSkipped,n=jI(r);return{t:GB(a.top,n.top,0,s),r:GB(a.right,n.right,0,t),b:GB(a.bottom,n.bottom,0,s),l:GB(a.left,n.left,0,t)}}(e,s/2,r/2),n=function(e,t,s){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),a=e.options.borderRadius,n=NI(a),i=Math.min(t,s),o=e.borderSkipped,l=r||OO(a);return{topLeft:GB(!l||o.top||o.left,n.topLeft,0,i),topRight:GB(!l||o.top||o.right,n.topRight,0,i),bottomLeft:GB(!l||o.bottom||o.left,n.bottomLeft,0,i),bottomRight:GB(!l||o.bottom||o.right,n.bottomRight,0,i)}}(e,s/2,r/2);return{outer:{x:t.left,y:t.top,w:s,h:r,radius:n},inner:{x:t.left+a.l,y:t.top+a.t,w:s-a.l-a.r,h:r-a.t-a.b,radius:{topLeft:Math.max(0,n.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,n.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,n.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,n.bottomRight-Math.max(a.b,a.r))}}}}function $B(e,t,s,r){const a=null===t,n=null===s,i=e&&!(a&&n)&&qB(e,r);return i&&(a||wR(t,i.left,i.right))&&(n||wR(s,i.top,i.bottom))}function JB(e,t){e.rect(t.x,t.y,t.w,t.h)}function QB(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==s.x?-t:0,a=e.y!==s.y?-t:0,n=(e.x+e.w!==s.x+s.w?t:0)-r,i=(e.y+e.h!==s.y+s.h?t:0)-a;return{x:e.x+r,y:e.y+a,w:e.w+n,h:e.h+i,radius:e.radius}}(0,JM.A)(HB,"id","point"),(0,JM.A)(HB,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,JM.A)(HB,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class XB extends zF{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:s,backgroundColor:r}}=this,{inner:a,outer:n}=YB(this),i=(o=n.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?xI:JB;var o;e.save(),n.w===a.w&&n.h===a.h||(e.beginPath(),i(e,QB(n,t,a)),e.clip(),i(e,QB(a,-t,n)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),i(e,QB(a,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,s){return $B(this,e,t,s)}inXRange(e,t){return $B(this,e,null,t)}inYRange(e,t){return $B(this,null,e,t)}getCenterPoint(e){const{x:t,y:s,base:r,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(t+r)/2:t,y:a?s:(s+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}(0,JM.A)(XB,"id","bar"),(0,JM.A)(XB,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,JM.A)(XB,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var ZB=Object.freeze({__proto__:null,ArcElement:OB,BarElement:XB,LineElement:KB,PointElement:HB});const ez=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],tz=ez.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function sz(e){return ez[e%ez.length]}function rz(e){return tz[e%tz.length]}function az(e){let t=0;return(s,r)=>{const a=e.getDatasetMeta(r).controller;a instanceof GL?t=function(e,t){return e.backgroundColor=e.data.map(()=>sz(t++)),t}(s,t):a instanceof $L?t=function(e,t){return e.backgroundColor=e.data.map(()=>rz(t++)),t}(s,t):a&&(t=function(e,t){return e.borderColor=sz(t),e.backgroundColor=rz(t),++t}(s,t))}}function nz(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}var iz={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,s){if(!s.enabled)return;const{data:{datasets:r},options:a}=e.config,{elements:n}=a;if(!s.forceOverride&&(nz(r)||(i=a)&&(i.borderColor||i.backgroundColor)||n&&nz(n)))return;var i;const o=az(e);r.forEach(o)}};function oz(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function lz(e){e.data.datasets.forEach(e=>{oz(e)})}var cz={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,s)=>{if(!s.enabled)return void lz(e);const r=e.width;e.data.datasets.forEach((t,a)=>{const{_data:n,indexAxis:i}=t,o=e.getDatasetMeta(a),l=n||t.data;if("y"===AI([i,e.options.indexAxis]))return;if(!o.controller.supportsDecimation)return;const c=e.scales[o.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(e.options.parsing)return;let{start:d,count:u}=function(e,t){const s=t.length;let r,a=0;const{iScale:n}=e,{min:i,max:o,minDefined:l,maxDefined:c}=n.getUserBounds();return l&&(a=NR(AR(t,n.axis,i).lo,0,s-1)),r=c?NR(AR(t,n.axis,o).hi+1,a,s)-a:s-a,{start:a,count:r}}(o,l);if(u<=(s.threshold||4*r))return void oz(t);let h;switch(DO(n)&&(t._data=l,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),s.algorithm){case"lttb":h=function(e,t,s,r,a){const n=a.samples||r;if(n>=s)return e.slice(t,t+s);const i=[],o=(s-2)/(n-2);let l=0;const c=t+s-1;let d,u,h,m,p,x=t;for(i[l++]=e[x],d=0;d<n-2;d++){let r,a=0,n=0;const c=Math.floor((d+1)*o)+1+t,g=Math.min(Math.floor((d+2)*o)+1,s)+t,f=g-c;for(r=c;r<g;r++)a+=e[r].x,n+=e[r].y;a/=f,n/=f;const y=Math.floor(d*o)+1+t,b=Math.min(Math.floor((d+1)*o)+1,s)+t,{x:v,y:j}=e[x];for(h=m=-1,r=y;r<b;r++)m=.5*Math.abs((v-a)*(e[r].y-j)-(v-e[r].x)*(n-j)),m>h&&(h=m,u=e[r],p=r);i[l++]=u,x=p}return i[l++]=e[c],i}(l,d,u,r,s);break;case"min-max":h=function(e,t,s,r){let a,n,i,o,l,c,d,u,h,m,p=0,x=0;const g=[],f=t+s-1,y=e[t].x,b=e[f].x-y;for(a=t;a<t+s;++a){n=e[a],i=(n.x-y)/b*r,o=n.y;const t=0|i;if(t===l)o<h?(h=o,c=a):o>m&&(m=o,d=a),p=(x*p+n.x)/++x;else{const s=a-1;if(!DO(c)&&!DO(d)){const t=Math.min(c,d),r=Math.max(c,d);t!==u&&t!==s&&g.push((0,Ie.A)((0,Ie.A)({},e[t]),{},{x:p})),r!==u&&r!==s&&g.push((0,Ie.A)((0,Ie.A)({},e[r]),{},{x:p}))}a>0&&s!==u&&g.push(e[s]),g.push(n),l=t,x=0,h=m=o,c=d=u=a}}return g}(l,d,u,r);break;default:throw new Error("Unsupported decimation algorithm '".concat(s.algorithm,"'"))}t._decimated=h})},destroy(e){lz(e)}};function dz(e,t,s,r){if(r)return;let a=t[e],n=s[e];return"angle"===e&&(a=vR(a),n=vR(n)),{property:e,start:a,end:n}}function uz(e,t,s){for(;t>e;t--){const e=s[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function hz(e,t,s,r){return e&&t?r(e[s],t[s]):e?e[s]:t?t[s]:0}function mz(e,t){let s=[],r=!1;return MO(e)?(r=!0,s=e):s=function(e,t){const{x:s=null,y:r=null}=e||{},a=t.points,n=[];return t.segments.forEach(e=>{let{start:t,end:i}=e;i=uz(t,i,a);const o=a[t],l=a[i];null!==r?(n.push({x:o.x,y:r}),n.push({x:l.x,y:r})):null!==s&&(n.push({x:s,y:o.y}),n.push({x:s,y:l.y}))}),n}(e,t),s.length?new KB({points:s,options:{tension:0},_loop:r,_fullLoop:r}):null}function pz(e){return e&&!1!==e.fill}function xz(e,t,s){let r=e[t].fill;const a=[t];let n;if(!s)return r;for(;!1!==r&&-1===a.indexOf(r);){if(!RO(r))return r;if(n=e[r],!n)return!1;if(n.visible)return r;a.push(r),r=n.fill}return!1}function gz(e,t,s){const r=function(e){const t=e.options,s=t.fill;let r=LO(s&&s.target,s);void 0===r&&(r=!!t.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(e);if(OO(r))return!isNaN(r.value)&&r;let a=parseFloat(r);return RO(a)&&Math.floor(a)===a?function(e,t,s,r){"-"!==e&&"+"!==e||(s=t+s);if(s===t||s<0||s>=r)return!1;return s}(r[0],t,a,s):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function fz(e,t,s){const r=[];for(let a=0;a<s.length;a++){const n=s[a],{first:i,last:o,point:l}=yz(n,t,"x");if(!(!l||i&&o))if(i)r.unshift(l);else if(e.push(l),!o)break}e.push(...r)}function yz(e,t,s){const r=e.interpolate(t,s);if(!r)return{};const a=r[s],n=e.segments,i=e.points;let o=!1,l=!1;for(let c=0;c<n.length;c++){const e=n[c],t=i[e.start][s],r=i[e.end][s];if(wR(a,t,r)){o=a===t,l=a===r;break}}return{first:o,last:l,point:r}}class bz{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,s){const{x:r,y:a,radius:n}=this;return t=t||{start:0,end:tR},e.arc(r,a,n,t.end,t.start,!0),!s.bounds}interpolate(e){const{x:t,y:s,radius:r}=this,a=e.angle;return{x:t+Math.cos(a)*r,y:s+Math.sin(a)*r,angle:a}}}function vz(e){const{chart:t,fill:s,line:r}=e;if(RO(s))return function(e,t){const s=e.getDatasetMeta(t),r=s&&e.isDatasetVisible(t);return r?s.dataset:null}(t,s);if("stack"===s)return function(e){const{scale:t,index:s,line:r}=e,a=[],n=r.segments,i=r.points,o=function(e,t){const s=[],r=e.getMatchingVisibleMetas("line");for(let a=0;a<r.length;a++){const e=r[a];if(e.index===t)break;e.hidden||s.unshift(e.dataset)}return s}(t,s);o.push(mz({x:null,y:t.bottom},r));for(let l=0;l<n.length;l++){const e=n[l];for(let t=e.start;t<=e.end;t++)fz(a,i[t],o)}return new KB({points:a,options:{}})}(e);if("shape"===s)return!0;const a=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:s}=e,r=t.options,a=t.getLabels().length,n=r.reverse?t.max:t.min,i=function(e,t,s){let r;return r="start"===e?s:"end"===e?t.options.reverse?t.min:t.max:OO(e)?e.value:t.getBaseValue(),r}(s,t,n),o=[];if(r.grid.circular){const e=t.getPointPositionForValue(0,n);return new bz({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(i)})}for(let l=0;l<a;++l)o.push(t.getPointPositionForValue(l,i));return o}(e);return function(e){const{scale:t={},fill:s}=e,r=function(e,t){let s=null;return"start"===e?s=t.bottom:"end"===e?s=t.top:OO(e)?s=t.getPixelForValue(e.value):t.getBasePixel&&(s=t.getBasePixel()),s}(s,t);if(RO(r)){const e=t.isHorizontal();return{x:e?r:null,y:e?null:r}}return null}(e)}(e);return a instanceof bz?a:mz(a,r)}function jz(e,t,s){const r=vz(t),{line:a,scale:n,axis:i}=t,o=a.options,l=o.fill,c=o.backgroundColor,{above:d=c,below:u=c}=l||{};r&&a.points.length&&(lI(e,s),function(e,t){const{line:s,target:r,above:a,below:n,area:i,scale:o}=t,l=s._loop?"angle":t.axis;e.save(),"x"===l&&n!==a&&(Nz(e,r,i.top),wz(e,{line:s,target:r,color:a,scale:o,property:l}),e.restore(),e.save(),Nz(e,r,i.bottom));wz(e,{line:s,target:r,color:n,scale:o,property:l}),e.restore()}(e,{line:a,target:r,above:d,below:u,area:s,scale:n,axis:i}),cI(e))}function Nz(e,t,s){const{segments:r,points:a}=t;let n=!0,i=!1;e.beginPath();for(const o of r){const{start:r,end:l}=o,c=a[r],d=a[uz(r,l,a)];n?(e.moveTo(c.x,c.y),n=!1):(e.lineTo(c.x,s),e.lineTo(c.x,c.y)),i=!!t.pathSegment(e,o,{move:i}),i?e.closePath():e.lineTo(d.x,s)}e.lineTo(t.first().x,s),e.closePath(),e.clip()}function wz(e,t){const{line:s,target:r,property:a,color:n,scale:i}=t,o=function(e,t,s){const r=e.segments,a=e.points,n=t.points,i=[];for(const o of r){let{start:e,end:r}=o;r=uz(e,r,a);const l=dz(s,a[e],a[r],o.loop);if(!t.segments){i.push({source:o,target:l,start:a[e],end:a[r]});continue}const c=xL(t,l);for(const t of c){const e=dz(s,n[t.start],n[t.end],t.loop),r=pL(o,a,e);for(const a of r)i.push({source:a,target:t,start:{[s]:hz(l,e,"start",Math.max)},end:{[s]:hz(l,e,"end",Math.min)}})}}return i}(s,r,a);for(const{source:l,target:c,start:d,end:u}of o){const{style:{backgroundColor:t=n}={}}=l,o=!0!==r;e.save(),e.fillStyle=t,kz(e,i,o&&dz(a,d,u)),e.beginPath();const h=!!s.pathSegment(e,l);let m;if(o){h?e.closePath():Az(e,r,u,a);const t=!!r.pathSegment(e,c,{move:h,reverse:!0});m=h&&t,m||Az(e,r,d,a)}e.closePath(),e.fill(m?"evenodd":"nonzero"),e.restore()}}function kz(e,t,s){const{top:r,bottom:a}=t.chart.chartArea,{property:n,start:i,end:o}=s||{};"x"===n&&(e.beginPath(),e.rect(i,r,o-i,a-r),e.clip())}function Az(e,t,s,r){const a=t.interpolate(s,r);a&&e.lineTo(a.x,a.y)}var Sz={id:"filler",afterDatasetsUpdate(e,t,s){const r=(e.data.datasets||[]).length,a=[];let n,i,o,l;for(i=0;i<r;++i)n=e.getDatasetMeta(i),o=n.dataset,l=null,o&&o.options&&o instanceof KB&&(l={visible:e.isDatasetVisible(i),index:i,fill:gz(o,i,r),chart:e,axis:n.controller.options.indexAxis,scale:n.vScale,line:o}),n.$filler=l,a.push(l);for(i=0;i<r;++i)l=a[i],l&&!1!==l.fill&&(l.fill=xz(a,i,s.propagate))},beforeDraw(e,t,s){const r="beforeDraw"===s.drawTime,a=e.getSortedVisibleDatasetMetas(),n=e.chartArea;for(let i=a.length-1;i>=0;--i){const t=a[i].$filler;t&&(t.line.updateControlPoints(n,t.axis),r&&t.fill&&jz(e.ctx,t,n))}},beforeDatasetsDraw(e,t,s){if("beforeDatasetsDraw"!==s.drawTime)return;const r=e.getSortedVisibleDatasetMetas();for(let a=r.length-1;a>=0;--a){const t=r[a].$filler;pz(t)&&jz(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,s){const r=t.meta.$filler;pz(r)&&"beforeDatasetDraw"===s.drawTime&&jz(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Cz=(e,t)=>{let{boxHeight:s=t,boxWidth:r=t}=e;return e.usePointStyle&&(s=Math.min(s,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:s,itemHeight:Math.max(t,s)}};class _z extends zF{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,s){this.maxWidth=e,this.maxHeight=t,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=BO(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,s)=>e.sort(t,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const s=e.labels,r=kI(s.font),a=r.size,n=this._computeTitleHeight(),{boxWidth:i,itemHeight:o}=Cz(s,a);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(n,a,i,o)+10):(c=this.maxHeight,l=this._fitCols(n,r,i,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,s,r){const{ctx:a,maxWidth:n,options:{labels:{padding:i}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+i;let d=e;a.textAlign="left",a.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach((e,m)=>{const p=s+t/2+a.measureText(e.text).width;(0===m||l[l.length-1]+p+2*i>n)&&(d+=c,l[l.length-(m>0?0:1)]=0,h+=c,u++),o[m]={left:0,top:h,row:u,width:p,height:r},l[l.length-1]+=p+i}),d}_fitCols(e,t,s,r){const{ctx:a,maxHeight:n,options:{labels:{padding:i}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=n-e;let d=i,u=0,h=0,m=0,p=0;return this.legendItems.forEach((e,n)=>{const{itemWidth:x,itemHeight:g}=function(e,t,s,r,a){const n=function(e,t,s,r){let a=e.text;a&&"string"!==typeof a&&(a=a.reduce((e,t)=>e.length>t.length?e:t));return t+s.size/2+r.measureText(a).width}(r,e,t,s),i=function(e,t,s){let r=e;"string"!==typeof t.text&&(r=Tz(t,s));return r}(a,r,t.lineHeight);return{itemWidth:n,itemHeight:i}}(s,t,a,e,r);n>0&&h+g+2*i>c&&(d+=u+i,l.push({width:u,height:h}),m+=u+i,p++,u=h=0),o[n]={left:m,top:h,col:p,width:x,height:g},u=Math.max(u,x),h+=g+i}),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:s,labels:{padding:r},rtl:a}}=this,n=cL(a,this.left,this.width);if(this.isHorizontal()){let a=0,i=MR(s,this.left+r,this.right-this.lineWidths[a]);for(const o of t)a!==o.row&&(a=o.row,i=MR(s,this.left+r,this.right-this.lineWidths[a])),o.top+=this.top+e+r,o.left=n.leftForLtr(n.x(i),o.width),i+=o.width+r}else{let a=0,i=MR(s,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const o of t)o.col!==a&&(a=o.col,i=MR(s,this.top+e+r,this.bottom-this.columnSizes[a].height)),o.top=i,o.left+=this.left+r,o.left=n.leftForLtr(n.x(o.left),o.width),i+=o.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;lI(e,this),this._draw(),cI(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:s,ctx:r}=this,{align:a,labels:n}=e,i=eI.color,o=cL(e.rtl,this.left,this.width),l=kI(n.font),{padding:c}=n,d=l.size,u=d/2;let h;this.drawTitle(),r.textAlign=o.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:m,boxHeight:p,itemHeight:x}=Cz(n,d),g=this.isHorizontal(),f=this._computeTitleHeight();h=g?{x:MR(a,this.left+c,this.right-s[0]),y:this.top+c+f,line:0}:{x:this.left+c,y:MR(a,this.top+f+c,this.bottom-t[0].height),line:0},dL(this.ctx,e.textDirection);const y=x+c;this.legendItems.forEach((b,v)=>{r.strokeStyle=b.fontColor,r.fillStyle=b.fontColor;const j=r.measureText(b.text).width,N=o.textAlign(b.textAlign||(b.textAlign=n.textAlign)),w=m+u+j;let k=h.x,A=h.y;o.setWidth(this.width),g?v>0&&k+w+c>this.right&&(A=h.y+=y,h.line++,k=h.x=MR(a,this.left+c,this.right-s[h.line])):v>0&&A+y>this.bottom&&(k=h.x=k+t[h.line].width+c,h.line++,A=h.y=MR(a,this.top+f+c,this.bottom-t[h.line].height));if(function(e,t,s){if(isNaN(m)||m<=0||isNaN(p)||p<0)return;r.save();const a=LO(s.lineWidth,1);if(r.fillStyle=LO(s.fillStyle,i),r.lineCap=LO(s.lineCap,"butt"),r.lineDashOffset=LO(s.lineDashOffset,0),r.lineJoin=LO(s.lineJoin,"miter"),r.lineWidth=a,r.strokeStyle=LO(s.strokeStyle,i),r.setLineDash(LO(s.lineDash,[])),n.usePointStyle){const i={radius:p*Math.SQRT2/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:a},l=o.xPlus(e,m/2);iI(r,i,l,t+u,n.pointStyleWidth&&m)}else{const n=t+Math.max((d-p)/2,0),i=o.leftForLtr(e,m),l=NI(s.borderRadius);r.beginPath(),Object.values(l).some(e=>0!==e)?xI(r,{x:i,y:n,w:m,h:p,radius:l}):r.rect(i,n,m,p),r.fill(),0!==a&&r.stroke()}r.restore()}(o.x(k),A,b),k=((e,t,s,r)=>e===(r?"left":"right")?s:"center"===e?(t+s)/2:t)(N,k+m+u,g?k+w:this.right,e.rtl),function(e,t,s){pI(r,s.text,e,t+x/2,l,{strikethrough:s.hidden,textAlign:o.textAlign(s.textAlign)})}(o.x(k),A,b),g)h.x+=w+c;else if("string"!==typeof b.text){const e=l.lineHeight;h.y+=Tz(b,e)+c}else h.y+=y}),uL(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,s=kI(t.font),r=wI(t.padding);if(!t.display)return;const a=cL(e.rtl,this.left,this.width),n=this.ctx,i=t.position,o=s.size/2,l=r.top+o;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,d=MR(e.align,d,this.right-u);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+MR(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=MR(i,d,d+u);n.textAlign=a.textAlign(DR(i)),n.textBaseline="middle",n.strokeStyle=t.color,n.fillStyle=t.color,n.font=s.string,pI(n,t.text,h,c,s)}_computeTitleHeight(){const e=this.options.title,t=kI(e.font),s=wI(e.padding);return e.display?t.lineHeight+s.height:0}_getLegendItemAt(e,t){let s,r,a;if(wR(e,this.left,this.right)&&wR(t,this.top,this.bottom))for(a=this.legendHitBoxes,s=0;s<a.length;++s)if(r=a[s],wR(e,r.left,r.left+r.width)&&wR(t,r.top,r.top+r.height))return this.legendItems[s];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const s=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,a=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(r,s);r&&!a&&BO(t.onLeave,[e,r,this],this),this._hoveredItem=s,s&&!a&&BO(t.onHover,[e,s,this],this)}else s&&BO(t.onClick,[e,s,this],this)}}function Tz(e,t){return t*(e.text?e.text.length:0)}var Pz={id:"legend",_element:_z,start(e,t,s){const r=e.legend=new _z({ctx:e.ctx,options:s,chart:e});NF.configure(e,r,s),NF.addBox(e,r)},stop(e){NF.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,s){const r=e.legend;NF.configure(e,r,s),r.options=s},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,s){const r=t.datasetIndex,a=s.chart;a.isDatasetVisible(r)?(a.hide(r),t.hidden=!0):(a.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:s,pointStyle:r,textAlign:a,color:n,useBorderRadius:i,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(s?0:void 0),c=wI(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:n,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:a||l.textAlign,borderRadius:i&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Ez extends zF{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const s=this.options;if(this.left=0,this.top=0,!s.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=MO(s.text)?s.text.length:1;this._padding=wI(s.padding);const a=r*kI(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:s,bottom:r,right:a,options:n}=this,i=n.align;let o,l,c,d=0;return this.isHorizontal()?(l=MR(i,s,a),c=t+e,o=a-s):("left"===n.position?(l=s+e,c=MR(i,r,t),d=-.5*eR):(l=a-e,c=MR(i,t,r),d=.5*eR),o=r-t),{titleX:l,titleY:c,maxWidth:o,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const s=kI(t.font),r=s.lineHeight/2+this._padding.top,{titleX:a,titleY:n,maxWidth:i,rotation:o}=this._drawArgs(r);pI(e,t.text,0,0,s,{color:t.color,maxWidth:i,rotation:o,textAlign:DR(t.align),textBaseline:"middle",translation:[a,n]})}}var Dz={id:"title",_element:Ez,start(e,t,s){!function(e,t){const s=new Ez({ctx:e.ctx,options:t,chart:e});NF.configure(e,s,t),NF.addBox(e,s),e.titleBlock=s}(e,s)},stop(e){const t=e.titleBlock;NF.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,s){const r=e.titleBlock;NF.configure(e,r,s),r.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Mz=new WeakMap;var Oz={id:"subtitle",start(e,t,s){const r=new Ez({ctx:e.ctx,options:s,chart:e});NF.configure(e,r,s),NF.addBox(e,r),Mz.set(e,r)},stop(e){NF.removeBox(e,Mz.get(e)),Mz.delete(e)},beforeUpdate(e,t,s){const r=Mz.get(e);NF.configure(e,r,s),r.options=s},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Rz={average(e){if(!e.length)return!1;let t,s,r=0,a=0,n=0;for(t=0,s=e.length;t<s;++t){const s=e[t].element;if(s&&s.hasValue()){const e=s.tooltipPosition();r+=e.x,a+=e.y,++n}}return{x:r/n,y:a/n}},nearest(e,t){if(!e.length)return!1;let s,r,a,n=t.x,i=t.y,o=Number.POSITIVE_INFINITY;for(s=0,r=e.length;s<r;++s){const r=e[s].element;if(r&&r.hasValue()){const e=yR(t,r.getCenterPoint());e<o&&(o=e,a=r)}}if(a){const e=a.tooltipPosition();n=e.x,i=e.y}return{x:n,y:i}}};function Iz(e,t){return t&&(MO(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Lz(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Fz(e,t){const{element:s,datasetIndex:r,index:a}=t,n=e.getDatasetMeta(r).controller,{label:i,value:o}=n.getLabelAndValue(a);return{chart:e,label:i,parsed:n.getParsed(a),raw:e.data.datasets[r].data[a],formattedValue:o,dataset:n.getDataset(),dataIndex:a,datasetIndex:r,element:s}}function Bz(e,t){const s=e.chart.ctx,{body:r,footer:a,title:n}=e,{boxWidth:i,boxHeight:o}=t,l=kI(t.bodyFont),c=kI(t.titleFont),d=kI(t.footerFont),u=n.length,h=a.length,m=r.length,p=wI(t.padding);let x=p.height,g=0,f=r.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(f+=e.beforeBody.length+e.afterBody.length,u&&(x+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),f){x+=m*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(f-m)*l.lineHeight+(f-1)*t.bodySpacing}h&&(x+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let y=0;const b=function(e){g=Math.max(g,s.measureText(e).width+y)};return s.save(),s.font=c.string,zO(e.title,b),s.font=l.string,zO(e.beforeBody.concat(e.afterBody),b),y=t.displayColors?i+2+t.boxPadding:0,zO(r,e=>{zO(e.before,b),zO(e.lines,b),zO(e.after,b)}),y=0,s.font=d.string,zO(e.footer,b),s.restore(),g+=p.width,{width:g,height:x}}function zz(e,t,s,r){const{x:a,width:n}=s,{width:i,chartArea:{left:o,right:l}}=e;let c="center";return"center"===r?c=a<=(o+l)/2?"left":"right":a<=n/2?c="left":a>=i-n/2&&(c="right"),function(e,t,s,r){const{x:a,width:n}=r,i=s.caretSize+s.caretPadding;return"left"===e&&a+n+i>t.width||"right"===e&&a-n-i<0||void 0}(c,e,t,s)&&(c="center"),c}function Uz(e,t,s){const r=s.yAlign||t.yAlign||function(e,t){const{y:s,height:r}=t;return s<r/2?"top":s>e.height-r/2?"bottom":"center"}(e,s);return{xAlign:s.xAlign||t.xAlign||zz(e,t,s,r),yAlign:r}}function Vz(e,t,s,r){const{caretSize:a,caretPadding:n,cornerRadius:i}=e,{xAlign:o,yAlign:l}=s,c=a+n,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=NI(i);let p=function(e,t){let{x:s,width:r}=e;return"right"===t?s-=r:"center"===t&&(s-=r/2),s}(t,o);const x=function(e,t,s){let{y:r,height:a}=e;return"top"===t?r+=s:r-="bottom"===t?a+s:a/2,r}(t,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(d,h)+a:"right"===o&&(p+=Math.max(u,m)+a),{x:NR(p,0,r.width-t.width),y:NR(x,0,r.height-t.height)}}function Kz(e,t,s){const r=wI(s.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function Wz(e){return Iz([],Lz(e))}function Hz(e,t){const s=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return s?e.override(s):e}const qz={beforeTitle:PO,title(e){if(e.length>0){const t=e[0],s=t.chart.data.labels,r=s?s.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return s[t.dataIndex]}return""},afterTitle:PO,beforeBody:PO,beforeLabel:PO,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const s=e.formattedValue;return DO(s)||(t+=s),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:PO,afterBody:PO,beforeFooter:PO,footer:PO,afterFooter:PO};function Gz(e,t,s,r){const a=e[t].call(s,r);return"undefined"===typeof a?qz[t].call(s,r):a}class Yz extends zF{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&t.options.animation&&s.animations,a=new kL(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,s=this._tooltipItems,SI(e,{tooltip:t,tooltipItems:s,type:"tooltip"})));var e,t,s}getTitle(e,t){const{callbacks:s}=t,r=Gz(s,"beforeTitle",this,e),a=Gz(s,"title",this,e),n=Gz(s,"afterTitle",this,e);let i=[];return i=Iz(i,Lz(r)),i=Iz(i,Lz(a)),i=Iz(i,Lz(n)),i}getBeforeBody(e,t){return Wz(Gz(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:s}=t,r=[];return zO(e,e=>{const t={before:[],lines:[],after:[]},a=Hz(s,e);Iz(t.before,Lz(Gz(a,"beforeLabel",this,e))),Iz(t.lines,Gz(a,"label",this,e)),Iz(t.after,Lz(Gz(a,"afterLabel",this,e))),r.push(t)}),r}getAfterBody(e,t){return Wz(Gz(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:s}=t,r=Gz(s,"beforeFooter",this,e),a=Gz(s,"footer",this,e),n=Gz(s,"afterFooter",this,e);let i=[];return i=Iz(i,Lz(r)),i=Iz(i,Lz(a)),i=Iz(i,Lz(n)),i}_createItems(e){const t=this._active,s=this.chart.data,r=[],a=[],n=[];let i,o,l=[];for(i=0,o=t.length;i<o;++i)l.push(Fz(this.chart,t[i]));return e.filter&&(l=l.filter((t,r,a)=>e.filter(t,r,a,s))),e.itemSort&&(l=l.sort((t,r)=>e.itemSort(t,r,s))),zO(l,t=>{const s=Hz(e.callbacks,t);r.push(Gz(s,"labelColor",this,t)),a.push(Gz(s,"labelPointStyle",this,t)),n.push(Gz(s,"labelTextColor",this,t))}),this.labelColors=r,this.labelPointStyles=a,this.labelTextColors=n,this.dataPoints=l,l}update(e,t){const s=this.options.setContext(this.getContext()),r=this._active;let a,n=[];if(r.length){const e=Rz[s.position].call(this,r,this._eventPosition);n=this._createItems(s),this.title=this.getTitle(n,s),this.beforeBody=this.getBeforeBody(n,s),this.body=this.getBody(n,s),this.afterBody=this.getAfterBody(n,s),this.footer=this.getFooter(n,s);const t=this._size=Bz(this,s),i=Object.assign({},e,t),o=Uz(this.chart,s,i),l=Vz(s,i,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,a={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(a={opacity:0});this._tooltipItems=n,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,s,r){const a=this.getCaretPosition(e,s,r);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,s){const{xAlign:r,yAlign:a}=this,{caretSize:n,cornerRadius:i}=s,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:d}=NI(i),{x:u,y:h}=e,{width:m,height:p}=t;let x,g,f,y,b,v;return"center"===a?(b=h+p/2,"left"===r?(x=u,g=x-n,y=b+n,v=b-n):(x=u+m,g=x+n,y=b-n,v=b+n),f=x):(g="left"===r?u+Math.max(o,c)+n:"right"===r?u+m-Math.max(l,d)-n:this.caretX,"top"===a?(y=h,b=y-n,x=g-n,f=g+n):(y=h+p,b=y+n,x=g+n,f=g-n),v=y),{x1:x,x2:g,x3:f,y1:y,y2:b,y3:v}}drawTitle(e,t,s){const r=this.title,a=r.length;let n,i,o;if(a){const l=cL(s.rtl,this.x,this.width);for(e.x=Kz(this,s.titleAlign,s),t.textAlign=l.textAlign(s.titleAlign),t.textBaseline="middle",n=kI(s.titleFont),i=s.titleSpacing,t.fillStyle=s.titleColor,t.font=n.string,o=0;o<a;++o)t.fillText(r[o],l.x(e.x),e.y+n.lineHeight/2),e.y+=n.lineHeight+i,o+1===a&&(e.y+=s.titleMarginBottom-i)}}_drawColorBox(e,t,s,r,a){const n=this.labelColors[s],i=this.labelPointStyles[s],{boxHeight:o,boxWidth:l}=a,c=kI(a.bodyFont),d=Kz(this,"left",a),u=r.x(d),h=o<c.lineHeight?(c.lineHeight-o)/2:0,m=t.y+h;if(a.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:1},s=r.leftForLtr(u,l)+l/2,c=m+o/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,nI(e,t,s,c),e.strokeStyle=n.borderColor,e.fillStyle=n.backgroundColor,nI(e,t,s,c)}else{e.lineWidth=OO(n.borderWidth)?Math.max(...Object.values(n.borderWidth)):n.borderWidth||1,e.strokeStyle=n.borderColor,e.setLineDash(n.borderDash||[]),e.lineDashOffset=n.borderDashOffset||0;const t=r.leftForLtr(u,l),s=r.leftForLtr(r.xPlus(u,1),l-2),i=NI(n.borderRadius);Object.values(i).some(e=>0!==e)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,xI(e,{x:t,y:m,w:l,h:o,radius:i}),e.fill(),e.stroke(),e.fillStyle=n.backgroundColor,e.beginPath(),xI(e,{x:s,y:m+1,w:l-2,h:o-2,radius:i}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(t,m,l,o),e.strokeRect(t,m,l,o),e.fillStyle=n.backgroundColor,e.fillRect(s,m+1,l-2,o-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,t,s){const{body:r}=this,{bodySpacing:a,bodyAlign:n,displayColors:i,boxHeight:o,boxWidth:l,boxPadding:c}=s,d=kI(s.bodyFont);let u=d.lineHeight,h=0;const m=cL(s.rtl,this.x,this.width),p=function(s){t.fillText(s,m.x(e.x+h),e.y+u/2),e.y+=u+a},x=m.textAlign(n);let g,f,y,b,v,j,N;for(t.textAlign=n,t.textBaseline="middle",t.font=d.string,e.x=Kz(this,x,s),t.fillStyle=s.bodyColor,zO(this.beforeBody,p),h=i&&"right"!==x?"center"===n?l/2+c:l+2+c:0,b=0,j=r.length;b<j;++b){for(g=r[b],f=this.labelTextColors[b],t.fillStyle=f,zO(g.before,p),y=g.lines,i&&y.length&&(this._drawColorBox(t,e,b,m,s),u=Math.max(d.lineHeight,o)),v=0,N=y.length;v<N;++v)p(y[v]),u=d.lineHeight;zO(g.after,p)}h=0,u=d.lineHeight,zO(this.afterBody,p),e.y-=a}drawFooter(e,t,s){const r=this.footer,a=r.length;let n,i;if(a){const o=cL(s.rtl,this.x,this.width);for(e.x=Kz(this,s.footerAlign,s),e.y+=s.footerMarginTop,t.textAlign=o.textAlign(s.footerAlign),t.textBaseline="middle",n=kI(s.footerFont),t.fillStyle=s.footerColor,t.font=n.string,i=0;i<a;++i)t.fillText(r[i],o.x(e.x),e.y+n.lineHeight/2),e.y+=n.lineHeight+s.footerSpacing}}drawBackground(e,t,s,r){const{xAlign:a,yAlign:n}=this,{x:i,y:o}=e,{width:l,height:c}=s,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=NI(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(i+d,o),"top"===n&&this.drawCaret(e,t,s,r),t.lineTo(i+l-u,o),t.quadraticCurveTo(i+l,o,i+l,o+u),"center"===n&&"right"===a&&this.drawCaret(e,t,s,r),t.lineTo(i+l,o+c-m),t.quadraticCurveTo(i+l,o+c,i+l-m,o+c),"bottom"===n&&this.drawCaret(e,t,s,r),t.lineTo(i+h,o+c),t.quadraticCurveTo(i,o+c,i,o+c-h),"center"===n&&"left"===a&&this.drawCaret(e,t,s,r),t.lineTo(i,o+d),t.quadraticCurveTo(i,o,i+d,o),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,s=this.$animations,r=s&&s.x,a=s&&s.y;if(r||a){const s=Rz[e.position].call(this,this._active,this._eventPosition);if(!s)return;const n=this._size=Bz(this,e),i=Object.assign({},s,this._size),o=Uz(t,e,i),l=Vz(e,i,o,t);r._to===l.x&&a._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=n.width,this.height=n.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},a={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const n=wI(t.padding),i=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&i&&(e.save(),e.globalAlpha=s,this.drawBackground(a,e,r,t),dL(e,t.textDirection),a.y+=n.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),uL(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const s=this._active,r=e.map(e=>{let{datasetIndex:t,index:s}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[s],index:s}}),a=!UO(s,r),n=this._positionChanged(r,t);(a||n)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,a=this._active||[],n=this._getActiveElements(e,a,t,s),i=this._positionChanged(n,e),o=t||!UO(n,a)||i;return o&&(this._active=n,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,s,r){const a=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const n=this.chart.getElementsAtEventForMode(e,a.mode,a,s);return a.reverse&&n.reverse(),n}_positionChanged(e,t){const{caretX:s,caretY:r,options:a}=this,n=Rz[a.position].call(this,e,t);return!1!==n&&(s!==n.x||r!==n.y)}}(0,JM.A)(Yz,"positioners",Rz);var $z={id:"tooltip",_element:Yz,positioners:Rz,afterInit(e,t,s){s&&(e.tooltip=new Yz({chart:e,options:s}))},beforeUpdate(e,t,s){e.tooltip&&e.tooltip.initialize(s)},reset(e,t,s){e.tooltip&&e.tooltip.initialize(s)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const s={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",(0,Ie.A)((0,Ie.A)({},s),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",s)}},afterEvent(e,t){if(e.tooltip){const s=t.replay;e.tooltip.handleEvent(t.event,s,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:qz},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Jz=Object.freeze({__proto__:null,Colors:iz,Decimation:cz,Filler:Sz,Legend:Pz,SubTitle:Oz,Title:Dz,Tooltip:$z});function Qz(e,t,s,r){const a=e.indexOf(t);if(-1===a)return((e,t,s,r)=>("string"===typeof t?(s=e.push(t)-1,r.unshift({index:s,label:t})):isNaN(t)&&(s=null),s))(e,t,s,r);return a!==e.lastIndexOf(t)?s:a}function Xz(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Zz extends JF{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:s,label:r}of t)e[s]===r&&e.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(DO(e))return null;const s=this.getLabels();return((e,t)=>null===e?null:NR(Math.round(e),0,t))(t=isFinite(t)&&s[t]===e?t:Qz(s,e,LO(t,e),this._addedLabels),s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(s=0),t||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const e=this.min,t=this.max,s=this.options.offset,r=[];let a=this.getLabels();a=0===e&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let n=e;n<=t;n++)r.push({value:n});return r}getLabelForValue(e){return Xz.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function eU(e,t){const s=[],{bounds:r,step:a,min:n,max:i,precision:o,count:l,maxTicks:c,maxDigits:d,includeBounds:u}=e,h=a||1,m=c-1,{min:p,max:x}=t,g=!DO(n),f=!DO(i),y=!DO(l),b=(x-p)/(d+1);let v,j,N,w,k=uR((x-p)/m/h)*h;if(k<1e-14&&!g&&!f)return[{value:p},{value:x}];w=Math.ceil(x/k)-Math.floor(p/k),w>m&&(k=uR(w*k/m/h)*h),DO(o)||(v=Math.pow(10,o),k=Math.ceil(k*v)/v),"ticks"===r?(j=Math.floor(p/k)*k,N=Math.ceil(x/k)*k):(j=p,N=x),g&&f&&a&&function(e,t){const s=Math.round(e);return s-t<=e&&s+t>=e}((i-n)/a,k/1e3)?(w=Math.round(Math.min((i-n)/k,c)),k=(i-n)/w,j=n,N=i):y?(j=g?n:j,N=f?i:N,w=l-1,k=(N-j)/w):(w=(N-j)/k,w=dR(w,Math.round(w),k/1e3)?Math.round(w):Math.ceil(w));const A=Math.max(gR(k),gR(j));v=Math.pow(10,DO(o)?A:o),j=Math.round(j*v)/v,N=Math.round(N*v)/v;let S=0;for(g&&(u&&j!==n?(s.push({value:n}),j<n&&S++,dR(Math.round((j+S*k)*v)/v,n,tU(n,b,e))&&S++):j<n&&S++);S<w;++S){const e=Math.round((j+S*k)*v)/v;if(f&&e>i)break;s.push({value:e})}return f&&u&&N!==i?s.length&&dR(s[s.length-1].value,i,tU(i,b,e))?s[s.length-1].value=i:s.push({value:i}):f&&N!==i||s.push({value:N}),s}function tU(e,t,s){let{horizontal:r,minRotation:a}=s;const n=pR(a),i=(r?Math.sin(n):Math.cos(n))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}(0,JM.A)(Zz,"id","category"),(0,JM.A)(Zz,"defaults",{ticks:{callback:Xz}});class sU extends JF{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return DO(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:s}=this.getUserBounds();let{min:r,max:a}=this;const n=e=>r=t?r:e,i=e=>a=s?a:e;if(e){const e=cR(r),t=cR(a);e<0&&t<0?i(0):e>0&&t>0&&n(0)}if(r===a){let t=0===a?1:Math.abs(.05*a);i(a+t),e||n(r-t)}this.min=r,this.max=a}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:s,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),s=s||11),s&&(t=Math.min(s,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r=eU({maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&mR(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const r=(s-t)/Math.max(e.length-1,1)/2;t-=r,s+=r}this._startValue=t,this._endValue=s,this._valueRange=s-t}getLabelForValue(e){return qR(e,this.chart.options.locale,this.options.ticks.format)}}class rU extends sU{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=RO(e)?e:0,this.max=RO(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,s=pR(this.options.ticks.minRotation),r=(e?Math.sin(s):Math.cos(s))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}(0,JM.A)(rU,"id","linear"),(0,JM.A)(rU,"defaults",{ticks:{callback:YR.formatters.numeric}});const aU=e=>Math.floor(lR(e)),nU=(e,t)=>Math.pow(10,aU(e)+t);function iU(e){return 1===e/Math.pow(10,aU(e))}function oU(e,t,s){const r=Math.pow(10,s),a=Math.floor(e/r);return Math.ceil(t/r)-a}function lU(e,t){let{min:s,max:r}=t;s=IO(e.min,s);const a=[],n=aU(s);let i=function(e,t){let s=aU(t-e);for(;oU(e,t,s)>10;)s++;for(;oU(e,t,s)<10;)s--;return Math.min(s,aU(e))}(s,r),o=i<0?Math.pow(10,Math.abs(i)):1;const l=Math.pow(10,i),c=n>i?Math.pow(10,n):0,d=Math.round((s-c)*o)/o,u=Math.floor((s-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,i)),m=IO(e.min,Math.round((c+u+h*Math.pow(10,i))*o)/o);for(;m<r;)a.push({value:m,major:iU(m),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(i++,h=2,o=i>=0?1:o),m=Math.round((c+u+h*Math.pow(10,i))*o)/o;const p=IO(e.max,m);return a.push({value:p,major:iU(p),significand:h}),a}class cU extends JF{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const s=sU.prototype.parse.apply(this,[e,t]);if(0!==s)return RO(s)&&s>0?s:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=RO(e)?Math.max(0,e):null,this.max=RO(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!RO(this._userMin)&&(this.min=e===nU(this.min,0)?nU(this.min,-1):nU(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let s=this.min,r=this.max;const a=t=>s=e?s:t,n=e=>r=t?r:e;s===r&&(s<=0?(a(1),n(10)):(a(nU(s,-1)),n(nU(r,1)))),s<=0&&a(nU(r,-1)),r<=0&&n(nU(s,1)),this.min=s,this.max=r}buildTicks(){const e=this.options,t=lU({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&mR(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":qR(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=lR(e),this._valueRange=lR(this.max)-lR(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(lR(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function dU(e){const t=e.ticks;if(t.display&&e.display){const e=wI(t.backdropPadding);return LO(t.font&&t.font.size,eI.font.size)+e.height}return 0}function uU(e,t,s){return s=MO(s)?s:[s],{w:sI(e,t.string,s),h:s.length*t.lineHeight}}function hU(e,t,s,r,a){return e===r||e===a?{start:t-s/2,end:t+s/2}:e<r||e>a?{start:t-s,end:t}:{start:t,end:t+s}}function mU(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},s=Object.assign({},t),r=[],a=[],n=e._pointLabels.length,i=e.options.pointLabels,o=i.centerPointLabels?eR/n:0;for(let l=0;l<n;l++){const n=i.setContext(e.getPointLabelContext(l));a[l]=n.padding;const c=e.getPointPosition(l,e.drawingArea+a[l],o),d=kI(n.font),u=uU(e.ctx,d,e._pointLabels[l]);r[l]=u;const h=vR(e.getIndexAngle(l)+o),m=Math.round(xR(h));pU(s,t,h,hU(m,c.x,u.w,0,180),hU(m,c.y,u.h,90,270))}e.setCenterPoint(t.l-s.l,s.r-t.r,t.t-s.t,s.b-t.b),e._pointLabelItems=function(e,t,s){const r=[],a=e._pointLabels.length,n=e.options,{centerPointLabels:i,display:o}=n.pointLabels,l={extra:dU(n)/2,additionalAngle:i?eR/a:0};let c;for(let d=0;d<a;d++){l.padding=s[d],l.size=t[d];const a=xU(e,d,l);r.push(a),"auto"===o&&(a.visible=gU(a,c),a.visible&&(c=a))}return r}(e,r,a)}function pU(e,t,s,r,a){const n=Math.abs(Math.sin(s)),i=Math.abs(Math.cos(s));let o=0,l=0;r.start<t.l?(o=(t.l-r.start)/n,e.l=Math.min(e.l,t.l-o)):r.end>t.r&&(o=(r.end-t.r)/n,e.r=Math.max(e.r,t.r+o)),a.start<t.t?(l=(t.t-a.start)/i,e.t=Math.min(e.t,t.t-l)):a.end>t.b&&(l=(a.end-t.b)/i,e.b=Math.max(e.b,t.b+l))}function xU(e,t,s){const r=e.drawingArea,{extra:a,additionalAngle:n,padding:i,size:o}=s,l=e.getPointPosition(t,r+a+i,n),c=Math.round(xR(vR(l.angle+nR))),d=function(e,t,s){90===s||270===s?e-=t/2:(s>270||s<90)&&(e-=t);return e}(l.y,o.h,c),u=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,s){"right"===s?e-=t:"center"===s&&(e-=t/2);return e}(l.x,o.w,u);return{visible:!0,x:l.x,y:d,textAlign:u,left:h,top:d,right:h+o.w,bottom:d+o.h}}function gU(e,t){if(!t)return!0;const{left:s,top:r,right:a,bottom:n}=e;return!(oI({x:s,y:r},t)||oI({x:s,y:n},t)||oI({x:a,y:r},t)||oI({x:a,y:n},t))}function fU(e,t,s){const{left:r,top:a,right:n,bottom:i}=s,{backdropColor:o}=t;if(!DO(o)){const s=NI(t.borderRadius),l=wI(t.backdropPadding);e.fillStyle=o;const c=r-l.left,d=a-l.top,u=n-r+l.width,h=i-a+l.height;Object.values(s).some(e=>0!==e)?(e.beginPath(),xI(e,{x:c,y:d,w:u,h:h,radius:s}),e.fill()):e.fillRect(c,d,u,h)}}function yU(e,t,s,r){const{ctx:a}=e;if(s)a.arc(e.xCenter,e.yCenter,t,0,tR);else{let s=e.getPointPosition(0,t);a.moveTo(s.x,s.y);for(let n=1;n<r;n++)s=e.getPointPosition(n,t),a.lineTo(s.x,s.y)}}(0,JM.A)(cU,"id","logarithmic"),(0,JM.A)(cU,"defaults",{ticks:{callback:YR.formatters.logarithmic,major:{enabled:!0}}});class bU extends sU{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=wI(dU(this.options)/2),t=this.width=this.maxWidth-e.width,s=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+s/2+e.top),this.drawingArea=Math.floor(Math.min(t,s)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=RO(e)&&!isNaN(e)?e:0,this.max=RO(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/dU(this.options))}generateTickLabels(e){sU.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const s=BO(this.options.pointLabels.callback,[e,t],this);return s||0===s?s:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?mU(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,s,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((s-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,s,r))}getIndexAngle(e){return vR(e*(tR/(this._pointLabels.length||1))+pR(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(DO(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(DO(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const s=t[e];return function(e,t,s){return SI(e,{label:s,index:t,type:"pointLabel"})}(this.getContext(),e,s)}}getPointPosition(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-nR+s;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:s,right:r,bottom:a}=this._pointLabelItems[e];return{left:t,top:s,right:r,bottom:a}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const s=this.ctx;s.save(),s.beginPath(),yU(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),s.closePath(),s.fillStyle=e,s.fill(),s.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:s,grid:r,border:a}=t,n=this._pointLabels.length;let i,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:s,options:{pointLabels:r}}=e;for(let a=t-1;a>=0;a--){const t=e._pointLabelItems[a];if(!t.visible)continue;const n=r.setContext(e.getPointLabelContext(a));fU(s,n,t);const i=kI(n.font),{x:o,y:l,textAlign:c}=t;pI(s,e._pointLabels[a],o,l+i.lineHeight/2,i,{color:n.color,textAlign:c,textBaseline:"middle"})}}(this,n),r.display&&this.ticks.forEach((e,t)=>{if(0!==t){o=this.getDistanceFromCenterForValue(e.value);const s=this.getContext(t),i=r.setContext(s),l=a.setContext(s);!function(e,t,s,r,a){const n=e.ctx,i=t.circular,{color:o,lineWidth:l}=t;!i&&!r||!o||!l||s<0||(n.save(),n.strokeStyle=o,n.lineWidth=l,n.setLineDash(a.dash),n.lineDashOffset=a.dashOffset,n.beginPath(),yU(e,s,i,r),n.closePath(),n.stroke(),n.restore())}(this,i,o,n,l)}}),s.display){for(e.save(),i=n-1;i>=0;i--){const r=s.setContext(this.getPointLabelContext(i)),{color:a,lineWidth:n}=r;n&&a&&(e.lineWidth=n,e.strokeStyle=a,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,o=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),l=this.getPointPosition(i,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,s=t.ticks;if(!s.display)return;const r=this.getIndexAngle(0);let a,n;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((r,i)=>{if(0===i&&!t.reverse)return;const o=s.setContext(this.getContext(i)),l=kI(o.font);if(a=this.getDistanceFromCenterForValue(this.ticks[i].value),o.showLabelBackdrop){e.font=l.string,n=e.measureText(r.label).width,e.fillStyle=o.backdropColor;const t=wI(o.backdropPadding);e.fillRect(-n/2-t.left,-a-l.size/2-t.top,n+t.width,l.size+t.height)}pI(e,r.label,0,-a,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})}),e.restore()}drawTitle(){}}(0,JM.A)(bU,"id","radialLinear"),(0,JM.A)(bU,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:YR.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),(0,JM.A)(bU,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,JM.A)(bU,"descriptors",{angleLines:{_fallback:"grid"}});const vU={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},jU=Object.keys(vU);function NU(e,t){return e-t}function wU(e,t){if(DO(t))return null;const s=e._adapter,{parser:r,round:a,isoWeekday:n}=e._parseOpts;let i=t;return"function"===typeof r&&(i=r(i)),RO(i)||(i="string"===typeof r?s.parse(i,r):s.parse(i)),null===i?null:(a&&(i="week"!==a||!hR(n)&&!0!==n?s.startOf(i,a):s.startOf(i,"isoWeek",n)),+i)}function kU(e,t,s,r){const a=jU.length;for(let n=jU.indexOf(e);n<a-1;++n){const e=vU[jU[n]],a=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((s-t)/(a*e.size))<=r)return jU[n]}return jU[a-1]}function AU(e,t,s){if(s){if(s.length){const{lo:r,hi:a}=kR(s,t);e[s[r]>=t?s[r]:s[a]]=!0}}else e[t]=!0}function SU(e,t,s){const r=[],a={},n=t.length;let i,o;for(i=0;i<n;++i)o=t[i],a[o]=i,r.push({value:o,major:!1});return 0!==n&&s?function(e,t,s,r){const a=e._adapter,n=+a.startOf(t[0].value,r),i=t[t.length-1].value;let o,l;for(o=n;o<=i;o=+a.add(o,1,r))l=s[o],l>=0&&(t[l].major=!0);return t}(e,r,a,s):r}class CU extends JF{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=e.time||(e.time={}),r=this._adapter=new sF(e.adapters.date);r.init(t),qO(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:wU(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,s=e.time.unit||"day";let{min:r,max:a,minDefined:n,maxDefined:i}=this.getUserBounds();function o(e){n||isNaN(e.min)||(r=Math.min(r,e.min)),i||isNaN(e.max)||(a=Math.max(a,e.max))}n&&i||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),r=RO(r)&&!isNaN(r)?r:+t.startOf(Date.now(),s),a=RO(a)&&!isNaN(a)?a:+t.endOf(Date.now(),s)+1,this.min=Math.min(r,a-1),this.max=Math.max(r+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],s=e[e.length-1]),{min:t,max:s}}buildTicks(){const e=this.options,t=e.time,s=e.ticks,r="labels"===s.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const a=this.min,n=function(e,t,s){let r=0,a=e.length;for(;r<a&&e[r]<t;)r++;for(;a>r&&e[a-1]>s;)a--;return r>0||a<e.length?e.slice(r,a):e}(r,a,this.max);return this._unit=t.unit||(s.autoSkip?kU(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):function(e,t,s,r,a){for(let n=jU.length-1;n>=jU.indexOf(s);n--){const s=jU[n];if(vU[s].common&&e._adapter.diff(a,r,s)>=t-1)return s}return jU[s?jU.indexOf(s):0]}(this,n.length,t.minUnit,this.min,this.max)),this._majorUnit=s.major.enabled&&"year"!==this._unit?function(e){for(let t=jU.indexOf(e)+1,s=jU.length;t<s;++t)if(vU[jU[t]].common)return jU[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&n.reverse(),SU(this,n,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,a=0;this.options.offset&&s.length&&(e=this.getDecimalForValue(s[0]),r=1===s.length?1-e:(this.getDecimalForValue(s[1])-e)/2,t=this.getDecimalForValue(s[s.length-1]),a=1===s.length?t:(t-this.getDecimalForValue(s[s.length-2]))/2);const n=s.length<3?.5:.25;r=NR(r,0,n),a=NR(a,0,n),this._offsets={start:r,end:a,factor:1/(r+1+a)}}_generate(){const e=this._adapter,t=this.min,s=this.max,r=this.options,a=r.time,n=a.unit||kU(a.minUnit,t,s,this._getLabelCapacity(t)),i=LO(r.ticks.stepSize,1),o="week"===n&&a.isoWeekday,l=hR(o)||!0===o,c={};let d,u,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":n),e.diff(s,t,n)>1e5*i)throw new Error(t+" and "+s+" are too far apart with stepSize of "+i+" "+n);const m="data"===r.ticks.source&&this.getDataTimestamps();for(d=h,u=0;d<s;d=+e.add(d,i,n),u++)AU(c,d,m);return d!==s&&"ticks"!==r.bounds&&1!==u||AU(c,d,m),Object.keys(c).sort(NU).map(e=>+e)}getLabelForValue(e){const t=this._adapter,s=this.options.time;return s.tooltipFormat?t.format(e,s.tooltipFormat):t.format(e,s.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,r=this._unit,a=t||s[r];return this._adapter.format(e,a)}_tickFormatFunction(e,t,s,r){const a=this.options,n=a.ticks.callback;if(n)return BO(n,[e,t,s],this);const i=a.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&i[o],d=l&&i[l],u=s[t],h=l&&d&&u&&u.major;return this._adapter.format(e,r||(h?d:c))}generateTickLabels(e){let t,s,r;for(t=0,s=e.length;t<s;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+s)*t.factor)}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,s=this.ctx.measureText(e).width,r=pR(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(r),n=Math.sin(r),i=this._resolveTickFontOptions(0).size;return{w:s*a+i*n,h:s*n+i*a}}_getLabelCapacity(e){const t=this.options.time,s=t.displayFormats,r=s[t.unit]||s.millisecond,a=this._tickFormatFunction(e,0,SU(this,[e],this._majorUnit),r),n=this._getLabelSize(a),i=Math.floor(this.isHorizontal()?this.width/n.w:this.height/n.h)-1;return i>0?i:1}getDataTimestamps(){let e,t,s=this._cache.data||[];if(s.length)return s;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)s=s.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(s)}getLabelTimestamps(){const e=this._cache.labels||[];let t,s;if(e.length)return e;const r=this.getLabels();for(t=0,s=r.length;t<s;++t)e.push(wU(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return TR(e.sort(NU))}}function _U(e,t,s){let r,a,n,i,o=0,l=e.length-1;s?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=AR(e,"pos",t)),({pos:r,time:n}=e[o]),({pos:a,time:i}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=AR(e,"time",t)),({time:r,pos:n}=e[o]),({time:a,pos:i}=e[l]));const c=a-r;return c?n+(i-n)*(t-r)/c:n}(0,JM.A)(CU,"id","time"),(0,JM.A)(CU,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class TU extends CU{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=_U(t,this.min),this._tableRange=_U(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:s}=this,r=[],a=[];let n,i,o,l,c;for(n=0,i=e.length;n<i;++n)l=e[n],l>=t&&l<=s&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:s,pos:1}];for(n=0,i=r.length;n<i;++n)c=r[n+1],o=r[n-1],l=r[n],Math.round((c+o)/2)!==l&&a.push({time:l,pos:n/(i-1)});return a}_generate(){const e=this.min,t=this.max;let s=super.getDataTimestamps();return s.includes(e)&&s.length||s.splice(0,0,e),s.includes(t)&&1!==s.length||s.push(t),s.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),s=this.getLabelTimestamps();return e=t.length&&s.length?this.normalize(t.concat(s)):t.length?t:s,e=this._cache.all=e,e}getDecimalForValue(e){return(_U(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return _U(this._table,s*this._tableRange+this._minPos,!0)}}(0,JM.A)(TU,"id","timeseries"),(0,JM.A)(TU,"defaults",CU.defaults);const PU=[ZL,ZB,Jz,Object.freeze({__proto__:null,CategoryScale:Zz,LinearScale:rU,LogarithmicScale:cU,RadialLinearScale:bU,TimeScale:CU,TimeSeriesScale:TU})],EU=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],DU="label";function MU(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function OU(e,t){e.labels=t}function RU(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:DU;const r=[];e.datasets=t.map(t=>{const a=e.datasets.find(e=>e[s]===t[s]);return a&&t.data&&!r.includes(a)?(r.push(a),Object.assign(a,t),a):(0,Ie.A)({},t)})}function IU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DU;const s={labels:[],datasets:[]};return OU(s,e.labels),RU(s,e.datasets,t),s}function LU(e,t){const{height:s=150,width:a=300,redraw:n=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h}=e,m=(0,ta.A)(e,EU),p=(0,r.useRef)(null),x=(0,r.useRef)(),g=()=>{p.current&&(x.current=new _B(p.current,{type:o,data:IU(l,i),options:c&&(0,Ie.A)({},c),plugins:d}),MU(t,x.current))},f=()=>{MU(t,null),x.current&&(x.current.destroy(),x.current=null)};return(0,r.useEffect)(()=>{!n&&x.current&&c&&function(e,t){const s=e.options;s&&t&&Object.assign(s,t)}(x.current,c)},[n,c]),(0,r.useEffect)(()=>{!n&&x.current&&OU(x.current.config.data,l.labels)},[n,l.labels]),(0,r.useEffect)(()=>{!n&&x.current&&l.datasets&&RU(x.current.config.data,l.datasets,i)},[n,l.datasets]),(0,r.useEffect)(()=>{x.current&&(n?(f(),setTimeout(g)):x.current.update(h))},[n,c,l.labels,l.datasets,h]),(0,r.useEffect)(()=>{x.current&&(f(),setTimeout(g))},[o]),(0,r.useEffect)(()=>(g(),()=>f()),[]),r.createElement("canvas",Object.assign({ref:p,role:"img",height:s,width:a},m),u)}const FU=(0,r.forwardRef)(LU);function BU(e,t){return _B.register(t),(0,r.forwardRef)((t,s)=>r.createElement(FU,Object.assign({},t,{ref:s,type:e})))}const zU=BU("line",YL),UU=BU("bar",HL),VU=BU("radar",QL),KU=BU("doughnut",GL);_B.register(...PU);const WU=e=>{let{data:t={}}=e;const s={utilization:(0,r.useRef)(null),fuel:(0,r.useRef)(null),maintenance:(0,r.useRef)(null),performance:(0,r.useRef)(null)},a={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:15,font:{size:12}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",padding:12,cornerRadius:8,displayColors:!0,mode:"index",intersect:!1}},scales:{x:{grid:{display:!1},ticks:{font:{size:11}}},y:{grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11}}}}},n={labels:t.utilizationLabels||["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Fleet Utilization %",data:t.utilizationData||[85,88,82,90,87,75,70],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0,pointRadius:4,pointHoverRadius:6},{label:"Target %",data:t.utilizationTarget||[85,85,85,85,85,80,75],borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",borderDash:[5,5],tension:.4,fill:!1,pointRadius:0}]},i={labels:t.fuelLabels||["Week 1","Week 2","Week 3","Week 4"],datasets:[{label:"Diesel (L)",data:t.dieselData||[2800,2700,2900,2750],backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgb(59, 130, 246)",borderWidth:1},{label:"CNG (kg)",data:t.cngData||[400,380,420,390],backgroundColor:"rgba(16, 185, 129, 0.8)",borderColor:"rgb(16, 185, 129)",borderWidth:1},{label:"Electric (kWh)",data:t.electricData||[500,520,480,510],backgroundColor:"rgba(251, 146, 60, 0.8)",borderColor:"rgb(251, 146, 60)",borderWidth:1}]},o={labels:["Scheduled","Completed","Overdue","In Progress"],datasets:[{data:t.maintenanceStatus||[12,8,3,2],backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(239, 68, 68, 0.8)","rgba(251, 146, 60, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(239, 68, 68)","rgb(251, 146, 60)"],borderWidth:1}]},l={labels:["Speed Compliance","Fuel Efficiency","Punctuality","Safety Score","Passenger Comfort"],datasets:[{label:"Current Performance",data:t.currentPerformance||[85,78,92,95,88],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.2)",pointBackgroundColor:"rgb(59, 130, 246)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(59, 130, 246)"},{label:"Target Performance",data:t.targetPerformance||[90,85,95,98,90],borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",pointBackgroundColor:"rgb(239, 68, 68)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(239, 68, 68)",borderDash:[5,5]}]},c=(0,Ie.A)((0,Ie.A)({},a),{},{plugins:(0,Ie.A)((0,Ie.A)({},a.plugins),{},{legend:{position:"bottom"}})}),d=(0,Ie.A)((0,Ie.A)({},a),{},{scales:{r:{beginAtZero:!0,max:100,ticks:{stepSize:20}}}});return(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Fleet Utilization Trend"}),(0,cs.jsx)("div",{className:"h-64",children:(0,cs.jsx)(zU,{ref:s.utilization,data:n,options:a})}),(0,cs.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-4 text-sm",children:[(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("p",{className:"text-gray-600",children:"Average"}),(0,cs.jsxs)("p",{className:"text-xl font-bold text-blue-600",children:[t.avgUtilization||"84.3","%"]})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("p",{className:"text-gray-600",children:"Peak"}),(0,cs.jsxs)("p",{className:"text-xl font-bold text-green-600",children:[t.peakUtilization||"90","%"]})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("p",{className:"text-gray-600",children:"Low"}),(0,cs.jsxs)("p",{className:"text-xl font-bold text-red-600",children:[t.lowUtilization||"70","%"]})]})]})]}),(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Fuel Consumption by Type"}),(0,cs.jsx)("div",{className:"h-64",children:(0,cs.jsx)(UU,{ref:s.fuel,data:i,options:a})}),(0,cs.jsxs)("div",{className:"mt-4 flex items-center justify-between text-sm",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-gray-600",children:"Total Cost"}),(0,cs.jsxs)("p",{className:"text-xl font-bold text-gray-800",children:["$",t.totalFuelCost||"45,320"]})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsx)("p",{className:"text-gray-600",children:"Efficiency"}),(0,cs.jsxs)("p",{className:"text-xl font-bold text-green-600",children:[t.fuelEfficiency||"5.2"," km/L"]})]})]})]}),(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Maintenance Status"}),(0,cs.jsx)("div",{className:"h-64",children:(0,cs.jsx)(KU,{ref:s.maintenance,data:o,options:c})}),(0,cs.jsxs)("div",{className:"mt-4 text-center",children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Compliance Rate"}),(0,cs.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[t.maintenanceCompliance||"88.5","%"]})]})]}),(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Performance Metrics"}),(0,cs.jsx)("div",{className:"h-64",children:(0,cs.jsx)(VU,{ref:s.performance,data:l,options:d})}),(0,cs.jsxs)("div",{className:"mt-4 text-center",children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Overall Score"}),(0,cs.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[t.overallScore||"87.6","/100"]})]})]})]})},HU=e=>{let{buses:t=[]}=e;const s=[...t].sort((e,t)=>new Date(e.nextMaintenance||e.lastMaintenance)-new Date(t.nextMaintenance||t.lastMaintenance)),r=e=>{switch(e){case"overdue":return"bg-red-100 text-red-800 border-red-200";case"urgent":return"bg-orange-100 text-orange-800 border-orange-200";case"upcoming":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"scheduled":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},a=e=>{switch(e){case"overdue":return(0,cs.jsx)(vd.A,{className:"w-4 h-4"});case"urgent":return(0,cs.jsx)(sd.A,{className:"w-4 h-4"});case"upcoming":return(0,cs.jsx)(fs.A,{className:"w-4 h-4"});case"scheduled":return(0,cs.jsx)(jd.A,{className:"w-4 h-4"});default:return(0,cs.jsx)(GM.A,{className:"w-4 h-4"})}},n=e=>e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Not scheduled",i=e=>{switch(e){case"Major Service":return"$2,500 - $3,500";case"Intermediate Service":return"$800 - $1,200";case"Regular Service":return"$300 - $500";default:return"TBD"}};return(0,cs.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:0===s.length?(0,cs.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,cs.jsx)(Lm.A,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,cs.jsx)("p",{children:"No maintenance schedules available"})]}):(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"}),s.slice(0,10).map((e,t)=>{const s=(e=>{if(!e.nextMaintenance)return"unknown";const t=new Date(e.nextMaintenance),s=new Date,r=Math.ceil((t-s)/864e5);return r<0?"overdue":r<=7?"urgent":r<=30?"upcoming":"scheduled"})(e),o=(e=>{const t=e.odometerReading||0,s=new Date(e.lastMaintenance),r=Math.floor((new Date-s)/864e5);return t>1e5||r>365?"Major Service":t>5e4||r>180?"Intermediate Service":"Regular Service"})(e),l=(e=>{if(!e)return null;const t=new Date(e),s=new Date;return Math.ceil((t-s)/864e5)})(e.nextMaintenance);return(0,cs.jsxs)(ed.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"relative flex items-start gap-4 group",children:[(0,cs.jsx)("div",{className:"relative z-10 flex items-center justify-center w-8 h-8 rounded-full ".concat(r(s)," border-2"),children:a(s)}),(0,cs.jsx)("div",{className:"flex-1 pb-6",children:(0,cs.jsxs)("div",{className:"p-4 rounded-lg border ".concat(r(s)," hover:shadow-md transition-shadow"),children:[(0,cs.jsxs)("div",{className:"flex items-start justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("h5",{className:"font-semibold text-gray-800",children:[e.busNumber," - ",e.registrationNumber]}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:o})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsx)("p",{className:"text-sm font-medium",children:n(e.nextMaintenance)}),null!==l&&(0,cs.jsx)("p",{className:"text-xs mt-1 ".concat(l<0?"text-red-600 font-bold":l<=7?"text-orange-600":"text-gray-500"),children:l<0?"".concat(Math.abs(l)," days overdue"):0===l?"Today":"In ".concat(l," days")})]})]}),(0,cs.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200 flex items-center justify-between text-xs",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-4",children:[(0,cs.jsxs)("span",{className:"flex items-center gap-1 text-gray-600",children:[(0,cs.jsx)(sd.A,{className:"w-3 h-3"}),"Last: ",n(e.lastMaintenance)]}),(0,cs.jsxs)("span",{className:"flex items-center gap-1 text-gray-600",children:[(0,cs.jsx)(Es.A,{className:"w-3 h-3"}),"Est: ",i(o)]})]}),e.odometerReading&&(0,cs.jsxs)("span",{className:"text-gray-500",children:[e.odometerReading.toLocaleString()," km"]})]})]})})]},e._id)}),s.length>10&&(0,cs.jsx)("div",{className:"text-center py-2",children:(0,cs.jsxs)("p",{className:"text-sm text-gray-500",children:["+",s.length-10," more scheduled"]})})]})})};class qU{constructor(e,t,s,r,a){this._legacyCanvasSize=qU.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),s&&"object"===typeof s?this._onDecode=t:(s||r||a?console.warn("You're using a deprecated version of the QrScanner constructor which will be removed in the future"):console.warn("Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=t),t="object"===typeof s?s:{},this._onDecodeError=t.onDecodeError||("function"===typeof s?s:this._onDecodeError),this._calculateScanRegion=t.calculateScanRegion||("function"===typeof r?r:this._calculateScanRegion),this._preferredCamera=t.preferredCamera||a||this._preferredCamera,this._legacyCanvasSize="number"===typeof s?s:"number"===typeof r?r:this._legacyCanvasSize,this._maxScansPerSecond=t.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let n=!1;if(e.hidden&&(e.hidden=!1,n=!0),document.body.contains(e)||(document.body.appendChild(e),n=!0),s=e.parentElement,t.highlightScanRegion||t.highlightCodeOutline){if(r=!!t.overlay,this.$overlay=t.overlay||document.createElement("div"),(a=this.$overlay.style).position="absolute",a.display="none",a.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!r&&t.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch(i){}s.insertBefore(this.$overlay,this.$video.nextSibling)}t.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let t=window.getComputedStyle(e);"none"===t.display&&(e.style.setProperty("display","block","important"),n=!0),"visible"!==t.visibility&&(e.style.setProperty("visibility","visible","important"),n=!0),n&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=qU.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await qU.listCameras(!1)).length}catch(ww){return!1}}static async listCameras(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!navigator.mediaDevices)return[];let t,s=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind);try{e&&(await s()).every(e=>!e.label)&&(t=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch(r){}try{return(await s()).map((e,t)=>({id:e.deviceId,label:e.label||(0===t?"Default Camera":"Camera ".concat(t+1))}))}finally{t&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),qU._stopVideoStream(t))}}async hasFlash(){let e;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;e=this.$video.srcObject}else e=(await this._getCameraStream()).stream;return"torch"in e.getVideoTracks()[0].getSettings()}catch(t){return!1}finally{e&&e!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),qU._stopVideoStream(e))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(ww){throw this._flashOn=!1,ww}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),qU._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:e,facingMode:t}=await this._getCameraStream();!this._active||this._paused?qU._stopVideoStream(e):(this._setVideoMirror(t),this.$video.srcObject=e,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(ww){if(!this._paused)throw this._active=!1,ww}}stop(){this.pause(),this._active=!1}async pause(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let t=()=>{this.$video.srcObject instanceof MediaStream&&(qU._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return e?(t(),!0):(await new Promise(e=>setTimeout(e,300)),!!this._paused&&(t(),!0))}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(e,t,s,r){let a,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=!1;t&&("scanRegion"in t||"qrEngine"in t||"canvas"in t||"disallowCanvasResizing"in t||"alsoTryWithoutScanRegion"in t||"returnDetailedScanResult"in t)?(a=t.scanRegion,s=t.qrEngine,r=t.canvas,n=t.disallowCanvasResizing||!1,i=t.alsoTryWithoutScanRegion||!1,o=!0):t||s||r||n||i?console.warn("You're using a deprecated api for scanImage which will be removed in the future."):console.warn("Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),t=!!s;try{let l,c,d;if([s,l]=await Promise.all([s||qU.createQrEngine(),qU._loadImage(e)]),[r,c]=qU._drawToCanvas(l,a,r,n),s instanceof Worker){let e=s;t||qU._postWorkerMessageSync(e,"inversionMode","both"),d=await new Promise((t,s)=>{let n,i,o,l=-1;i=r=>{r.data.id===l&&(e.removeEventListener("message",i),e.removeEventListener("error",o),clearTimeout(n),null!==r.data.data?t({data:r.data.data,cornerPoints:qU._convertPoints(r.data.cornerPoints,a)}):s(qU.NO_QR_CODE_FOUND))},o=t=>{e.removeEventListener("message",i),e.removeEventListener("error",o),clearTimeout(n),s("Scanner error: "+(t?t.message||t:"Unknown Error"))},e.addEventListener("message",i),e.addEventListener("error",o),n=setTimeout(()=>o("timeout"),1e4);let d=c.getImageData(0,0,r.width,r.height);l=qU._postWorkerMessageSync(e,"decode",d,[d.data.buffer])})}else d=await Promise.race([new Promise((e,t)=>window.setTimeout(()=>t("Scanner error: timeout"),1e4)),(async()=>{try{var[t]=await s.detect(r);if(!t)throw qU.NO_QR_CODE_FOUND;return{data:t.rawValue,cornerPoints:qU._convertPoints(t.cornerPoints,a)}}catch(o){if(t=o.message||o,/not implemented|service unavailable/.test(t))return qU._disableBarcodeDetector=!0,qU.scanImage(e,{scanRegion:a,canvas:r,disallowCanvasResizing:n,alsoTryWithoutScanRegion:i});throw"Scanner error: ".concat(t)}})()]);return o?d:d.data}catch(l){if(!a||!i)throw l;let t=await qU.scanImage(e,{qrEngine:s,canvas:r,disallowCanvasResizing:n});return o?t:t.data}finally{t||qU._postWorkerMessage(s,"close")}}setGrayscaleWeights(e,t,s){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];qU._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:t,blue:s,useIntegerApproximation:r})}setInversionMode(e){qU._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static async createQrEngine(e){if(e&&console.warn("Specifying a worker path is not required and not supported anymore."),e=()=>s.e(451).then(s.bind(s,9451)).then(e=>e.createWorker()),qU._disableBarcodeDetector||!("BarcodeDetector"in window)||!BarcodeDetector.getSupportedFormats||!(await BarcodeDetector.getSupportedFormats()).includes("qr_code"))return e();let t=navigator.userAgentData;return t&&t.brands.some(e=>{let{brand:t}=e;return/Chromium/i.test(t)})&&/mac ?OS/i.test(t.platform)&&await t.getHighEntropyValues(["architecture","platformVersion"]).then(e=>{let{architecture:t,platformVersion:s}=e;return/arm/i.test(t||"arm")&&13<=parseInt(s||"13")}).catch(()=>!0)?e():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let t=Math.round(2/3*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-t)/2),y:Math.round((e.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,t=e.videoWidth,s=e.videoHeight,r=e.offsetWidth,a=e.offsetHeight,n=e.offsetLeft,i=e.offsetTop,o=window.getComputedStyle(e),l=o.objectFit,c=t/s,d=r/a;switch(l){case"none":var u=t,h=s;break;case"fill":u=r,h=a;break;default:("cover"===l?c>d:c<d)?u=(h=a)*c:h=(u=r)/c,"scale-down"===l&&(u=Math.min(u,t),h=Math.min(h,s))}var[m,p]=o.objectPosition.split(" ").map((e,t)=>{const s=parseFloat(e);return e.endsWith("%")?(t?a-h:r-u)*s/100:s});o=this._scanRegion.width||t,d=this._scanRegion.height||s,l=this._scanRegion.x||0;var x=this._scanRegion.y||0;(c=this.$overlay.style).width="".concat(o/t*u,"px"),c.height="".concat(d/s*h,"px"),c.top="".concat(i+p+x/s*h,"px"),s=/scaleX\(-1\)/.test(e.style.transform),c.left="".concat(n+(s?r-m-u:m)+(s?t-l-o:l)/t*u,"px"),c.transform=e.style.transform}})}static _convertPoints(e,t){if(!t)return e;let s=t.x||0,r=t.y||0,a=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1;for(let n of e)n.x=n.x*a+s,n.y=n.y*t+r;return e}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var e=Date.now()-this._lastScanTimestamp,t=1e3/this._maxScansPerSecond;e<t&&await new Promise(s=>setTimeout(s,t-e)),this._lastScanTimestamp=Date.now();try{var s=await qU.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(r){if(!this._active)return;this._onDecodeError(r)}!qU._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=qU.createQrEngine()),s?(this._onDecode?this._onDecode(s):this._legacyOnDecode&&this._legacyOnDecode(s.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox","".concat(this._scanRegion.x||0," ")+"".concat(this._scanRegion.y||0," ")+"".concat(this._scanRegion.width||this.$video.videoWidth," ")+"".concat(this._scanRegion.height||this.$video.videoHeight)),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",s.cornerPoints.map(e=>{let{x:t,y:s}=e;return"".concat(t,",").concat(s)}).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(e){e!==qU.NO_QR_CODE_FOUND&&console.log(e)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let e=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",t=[{width:{min:1024}},{width:{min:768}},{}],s=t.map(t=>Object.assign({},t,{[e]:{exact:this._preferredCamera}}));for(let a of[...s,...t])try{let e=await navigator.mediaDevices.getUserMedia({video:a,audio:!1});return{stream:e,facingMode:this._getFacingMode(e)||(a.facingMode?this._preferredCamera:"environment"===this._preferredCamera?"user":"environment")}}catch(r){}throw"Camera not found."}async _restartVideoStream(){let e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(let t of e.getTracks())t.stop(),e.removeTrack(t)}_setVideoMirror(e){this.$video.style.transform="scaleX("+("user"===e?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];s=s||document.createElement("canvas");let a=t&&t.x?t.x:0,n=t&&t.y?t.y:0,i=t&&t.width?t.width:e.videoWidth||e.width,o=t&&t.height?t.height:e.videoHeight||e.height;return r||(r=t&&t.downScaledWidth?t.downScaledWidth:i,t=t&&t.downScaledHeight?t.downScaledHeight:o,s.width!==r&&(s.width=r),s.height!==t&&(s.height=t)),(t=s.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,t.drawImage(e,a,n,i,o,0,0,s.width,s.height),[s,t]}static async _loadImage(e){if(e instanceof Image)return await qU._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(!(e instanceof File||e instanceof Blob||e instanceof URL||"string"===typeof e))throw"Unsupported image type.";{let t=new Image;t.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return await qU._awaitImageLoad(t),t}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(t.src)}}}static async _awaitImageLoad(e){e.complete&&0!==e.naturalWidth||await new Promise((t,s)=>{let r=a=>{e.removeEventListener("load",r),e.removeEventListener("error",r),a instanceof ErrorEvent?s("Image load error"):t()};e.addEventListener("load",r),e.addEventListener("error",r)})}static async _postWorkerMessage(e,t,s,r){return qU._postWorkerMessageSync(await e,t,s,r)}static _postWorkerMessageSync(e,t,s,r){if(!(e instanceof Worker))return-1;let a=qU._workerMessageId++;return e.postMessage({id:a,type:t,data:s},r),a}}qU.DEFAULT_CANVAS_SIZE=400,qU.NO_QR_CODE_FOUND="No QR code found",qU._disableBarcodeDetector=!1,qU._workerMessageId=0;const GU=qU,YU=e=>{let{onScan:t,onClose:s}=e;const[a,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)("camera"),h=(0,r.useRef)(null),m=(0,r.useRef)(null),p=(0,r.useRef)(null);(0,r.useEffect)(()=>("camera"===d&&h.current&&!m.current&&x(),()=>{m.current&&(m.current.destroy(),m.current=null)}),[d]);const x=async()=>{try{n(!0),c(null);const e=new GU(h.current,e=>g(e),{onDecodeError:e=>{console.error("Decode error:",e)},highlightScanRegion:!0,highlightCodeOutline:!0,maxScansPerSecond:5});await e.start(),m.current=e}catch(e){console.error("Scanner initialization error:",e),c("Failed to access camera. Please check permissions."),n(!1)}},g=e=>{if(null!==e&&void 0!==e&&e.data){o(e.data),n(!1),m.current&&m.current.stop();try{const s=JSON.parse(e.data);t(s)}catch(qU){t({raw:e.data})}}},f=()=>{o(null),c(null),"camera"===d&&x()};return(0,cs.jsx)(Md,{children:(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",children:[(0,cs.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("h3",{className:"text-xl font-semibold flex items-center gap-2",children:[(0,cs.jsx)(yh,{className:"w-6 h-6"}),"QR Code Scanner"]}),(0,cs.jsx)("button",{onClick:s,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:(0,cs.jsx)(Bs.A,{className:"w-5 h-5"})})]}),(0,cs.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,cs.jsxs)("button",{onClick:()=>u("camera"),className:"flex-1 py-2 px-4 rounded-lg font-medium transition-all ".concat("camera"===d?"bg-white text-blue-600":"bg-white/20 text-white hover:bg-white/30"),children:[(0,cs.jsx)(jh,{className:"w-4 h-4 inline mr-2"}),"Camera"]}),(0,cs.jsxs)("button",{onClick:()=>u("upload"),className:"flex-1 py-2 px-4 rounded-lg font-medium transition-all ".concat("upload"===d?"bg-white text-blue-600":"bg-white/20 text-white hover:bg-white/30"),children:[(0,cs.jsx)(zm.A,{className:"w-4 h-4 inline mr-2"}),"Upload"]})]})]}),(0,cs.jsxs)("div",{className:"p-6",children:["camera"===d?(0,cs.jsx)("div",{className:"space-y-4",children:!i&&(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsxs)("div",{className:"relative rounded-lg overflow-hidden bg-black aspect-square",children:[(0,cs.jsx)("video",{ref:h,className:"w-full h-full object-cover"}),a&&(0,cs.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,cs.jsx)("div",{className:"w-48 h-48 border-2 border-white rounded-lg animate-pulse"})})]}),(0,cs.jsx)("p",{className:"text-center text-sm text-gray-600",children:"Position the QR code within the frame to scan"})]})}):(0,cs.jsx)("div",{className:"space-y-4",children:(0,cs.jsxs)("div",{onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.click()},className:"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center cursor-pointer hover:border-blue-500 transition-colors",children:[(0,cs.jsx)(zm.A,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Click to upload QR code image"}),(0,cs.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"PNG, JPG up to 10MB"}),(0,cs.jsx)("input",{ref:p,type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t)try{c(null);const e=await GU.scanImage(t,{returnDetailedScanResult:!0});g(e)}catch(s){console.error("File scan error:",s),c("Failed to scan QR code from image")}},className:"hidden"})]})}),i&&(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,cs.jsxs)("div",{className:"flex items-start gap-3",children:[(0,cs.jsx)(jd.A,{className:"w-5 h-5 text-green-600 mt-0.5"}),(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsx)("h4",{className:"font-semibold text-green-800",children:"QR Code Scanned Successfully!"}),(0,cs.jsx)("p",{className:"text-sm text-green-700 mt-1 font-mono break-all",children:i})]})]}),(0,cs.jsx)("button",{onClick:f,className:"mt-3 text-sm text-green-600 hover:text-green-700 font-medium",children:"Scan another code"})]}),l&&(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,cs.jsxs)("div",{className:"flex items-start gap-3",children:[(0,cs.jsx)(Nd.A,{className:"w-5 h-5 text-red-600 mt-0.5"}),(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsx)("h4",{className:"font-semibold text-red-800",children:"Scan Error"}),(0,cs.jsx)("p",{className:"text-sm text-red-700 mt-1",children:l})]})]}),(0,cs.jsx)("button",{onClick:f,className:"mt-3 text-sm text-red-600 hover:text-red-700 font-medium",children:"Try again"})]})]}),(0,cs.jsx)("div",{className:"bg-gray-50 px-6 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,cs.jsx)("span",{children:"Powered by advanced QR technology"}),(0,cs.jsx)("span",{className:"flex items-center gap-1",children:a&&(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Scanning..."]})})]})})]})})})},$U=e=>{let{insights:t={}}=e;const{recommendations:s=[],predictions:r=[],anomalies:a=[]}=t,n=e=>{switch(e){case"optimization":return(0,cs.jsx)(Fp.A,{className:"w-5 h-5"});case"maintenance":return(0,cs.jsx)(Ps,{className:"w-5 h-5"});case"cost":return(0,cs.jsx)(Es.A,{className:"w-5 h-5"});case"efficiency":return(0,cs.jsx)(pd,{className:"w-5 h-5"});case"safety":return(0,cs.jsx)(Nd.A,{className:"w-5 h-5"});default:return(0,cs.jsx)($p,{className:"w-5 h-5"})}},i=e=>{switch(e){case"high":return"text-red-600 bg-red-50";case"medium":return"text-yellow-600 bg-yellow-50";case"low":return"text-green-600 bg-green-50";default:return"text-gray-600 bg-gray-50"}};return(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[(0,cs.jsx)($p,{className:"w-4 h-4"}),"AI Recommendations"]}),(0,cs.jsx)("div",{className:"space-y-2",children:(0,cs.jsx)(Md,{children:s.slice(0,3).map((e,t)=>(0,cs.jsx)(ed.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:.1*t},className:"p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:(0,cs.jsxs)("div",{className:"flex items-start gap-3",children:[(0,cs.jsx)("div",{className:"p-2 rounded-lg ".concat(i(e.priority)),children:n(e.type)}),(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-800",children:e.title}),(0,cs.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.description}),e.impact&&(0,cs.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs",children:[(0,cs.jsxs)("span",{className:"text-green-600 font-medium",children:["Impact: ",e.impact]}),e.savings&&(0,cs.jsxs)("span",{className:"text-blue-600",children:["Savings: $",e.savings]})]})]}),(0,cs.jsx)(em,{className:"w-4 h-4 text-gray-400"})]})},e.id||t))})})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[(0,cs.jsx)(xu.A,{className:"w-4 h-4"}),"Predictive Analytics"]}),(0,cs.jsx)("div",{className:"space-y-2",children:r.slice(0,2).map((e,t)=>(0,cs.jsxs)("div",{className:"p-3 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border border-purple-200",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-800",children:e.metric}),(0,cs.jsxs)("span",{className:"text-xs font-bold ".concat("up"===e.trend?"text-green-600":"text-red-600"),children:["up"===e.trend?"\u2191":"\u2193"," ",e.change,"%"]})]}),(0,cs.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,cs.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-500",style:{width:"".concat(e.confidence,"%")}})}),(0,cs.jsxs)("p",{className:"text-xs text-gray-600 mt-2",children:[e.prediction," (Confidence: ",e.confidence,"%)"]})]},e.id||t))})]}),a.length>0&&(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[(0,cs.jsx)(Nd.A,{className:"w-4 h-4"}),"Anomaly Detection"]}),(0,cs.jsx)("div",{className:"space-y-2",children:a.slice(0,2).map((e,t)=>(0,cs.jsx)("div",{className:"p-3 bg-gradient-to-r from-red-50 to-orange-50 rounded-lg border border-red-200",children:(0,cs.jsxs)("div",{className:"flex items-start gap-2",children:[(0,cs.jsx)(bd,{className:"w-4 h-4 text-red-500 mt-0.5"}),(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-800",children:e.title}),(0,cs.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.description}),(0,cs.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,cs.jsxs)("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded",children:["Severity: ",e.severity]}),(0,cs.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.detected).toLocaleTimeString()})]})]})]})},e.id||t))})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[(0,cs.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-3 rounded-lg",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)(sd.A,{className:"w-4 h-4 text-blue-600"}),(0,cs.jsx)("span",{className:"text-xs text-blue-600 font-medium",children:"Next Update"})]}),(0,cs.jsx)("p",{className:"text-lg font-bold text-blue-800 mt-1",children:"5 min"})]}),(0,cs.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-3 rounded-lg",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)(Vm,{className:"w-4 h-4 text-green-600"}),(0,cs.jsx)("span",{className:"text-xs text-green-600 font-medium",children:"AI Accuracy"})]}),(0,cs.jsx)("p",{className:"text-lg font-bold text-green-800 mt-1",children:"94.5%"})]})]})]})},JU=e=>{var t,s;let{isOpen:a,onClose:n,onSave:o,onScheduleUpdate:l}=e;const[c,d]=(0,r.useState)([{id:"ordinary",name:"Ordinary",description:"Basic service, stops at all points, Non-AC simple seats",capacity:{total:50,sleeper:0,seater:50},amenities:["charging"],specifications:{fuelType:"diesel",mileage:12,maxSpeed:60,length:11,width:2.5,height:3.2},features:["Basic seats","All stops","Local service"],priceCategory:"budget",isActive:!0,schedulingRules:{maxDistance:100,preferredRoutes:["local","city"],timeSlots:["morning","afternoon","evening"],frequency:"high"}},{id:"lspf",name:"Limited Stop Fast Passenger (LSFP)",description:"Fewer stops, Non-AC 2+3 seater, medium-distance travel",capacity:{total:45,sleeper:0,seater:45},amenities:["charging"],specifications:{fuelType:"diesel",mileage:11,maxSpeed:70,length:11,width:2.5,height:3.2},features:["2+3 seating","Limited stops","Medium distance"],priceCategory:"economy",isActive:!0,schedulingRules:{maxDistance:200,preferredRoutes:["intercity","district"],timeSlots:["morning","afternoon"],frequency:"medium"}},{id:"fast_passenger",name:"Fast Passenger",description:"Limited stops, better speed, Non-AC comfortable seats",capacity:{total:45,sleeper:0,seater:45},amenities:["charging"],specifications:{fuelType:"diesel",mileage:10,maxSpeed:75,length:11,width:2.5,height:3.2},features:["Fast service","Limited stops","Comfortable seats"],priceCategory:"standard",isActive:!0,schedulingRules:{maxDistance:250,preferredRoutes:["intercity","district"],timeSlots:["morning","afternoon","evening"],frequency:"high"}},{id:"venad",name:"Venad",description:"Ordinary long-distance service, south Kerala routes",capacity:{total:50,sleeper:0,seater:50},amenities:["charging"],specifications:{fuelType:"diesel",mileage:12,maxSpeed:60,length:11,width:2.5,height:3.2},features:["South Kerala","Long distance","Ordinary service"],priceCategory:"budget",isActive:!0,schedulingRules:{maxDistance:300,preferredRoutes:["long_distance","south_kerala"],timeSlots:["morning","afternoon"],frequency:"medium"}},{id:"super_fast",name:"Super Fast",description:"Popular category, limited stops, better cushioning, long-distance",capacity:{total:45,sleeper:0,seater:45},amenities:["charging"],specifications:{fuelType:"diesel",mileage:10,maxSpeed:80,length:11,width:2.5,height:3.2},features:["Better cushioning","Limited stops","Long distance"],priceCategory:"standard",isActive:!0,schedulingRules:{maxDistance:300,preferredRoutes:["long_distance","intercity"],timeSlots:["morning","afternoon","evening"],frequency:"high"}},{id:"garuda_volvo",name:"Garuda Volvo",description:"AC luxury Volvo, pushback, curtains, charging ports",capacity:{total:30,sleeper:30,seater:0},amenities:["ac","charging","entertainment"],specifications:{fuelType:"diesel",mileage:6,maxSpeed:100,length:12,width:2.6,height:3.5},features:["AC luxury","Pushback seats","Curtains","Charging ports"],priceCategory:"luxury",isActive:!0,schedulingRules:{maxDistance:500,preferredRoutes:["interstate","premium"],timeSlots:["morning","evening"],frequency:"low"}},{id:"garuda_scania",name:"Garuda Scania",description:"AC luxury Scania, premium interstate service",capacity:{total:30,sleeper:30,seater:0},amenities:["ac","charging","entertainment"],specifications:{fuelType:"diesel",mileage:6,maxSpeed:100,length:12,width:2.6,height:3.5},features:["AC luxury","Premium service","Interstate","Scania"],priceCategory:"luxury",isActive:!0,schedulingRules:{maxDistance:500,preferredRoutes:["interstate","premium"],timeSlots:["morning","evening"],frequency:"low"}},{id:"garuda_maharaja",name:"Garuda Maharaja",description:"Premium long-distance, AC pushback, large leg space",capacity:{total:28,sleeper:28,seater:0},amenities:["ac","charging","entertainment","refreshments"],specifications:{fuelType:"diesel",mileage:6,maxSpeed:100,length:13,width:2.6,height:3.8},features:["Premium luxury","Large leg space","AC pushback","Long distance"],priceCategory:"super_luxury",isActive:!0,schedulingRules:{maxDistance:800,preferredRoutes:["interstate","luxury"],timeSlots:["evening","night"],frequency:"very_low"}},{id:"fast_passenger",name:"Fast Passenger",description:"Limited stops, better speed, Non-AC comfortable seats",capacity:{total:45,sleeper:0,seater:45},amenities:["charging"],specifications:{fuelType:"diesel",mileage:10,maxSpeed:75,length:11,width:2.5,height:3.2},features:["Fast service","Limited stops","Comfortable seats"],priceCategory:"standard",isActive:!0,schedulingRules:{maxDistance:250,preferredRoutes:["intercity","district"],timeSlots:["morning","afternoon","evening"],frequency:"high"}},{id:"venad",name:"Venad",description:"Ordinary long-distance service, south Kerala routes",capacity:{total:50,sleeper:0,seater:50},amenities:["charging"],specifications:{fuelType:"diesel",mileage:12,maxSpeed:60,length:11,width:2.5,height:3.2},features:["South Kerala","Long distance","Ordinary service"],priceCategory:"budget",isActive:!0,schedulingRules:{maxDistance:300,preferredRoutes:["long_distance","south_kerala"],timeSlots:["morning","afternoon"],frequency:"medium"}},{id:"rajadhani",name:"Rajadhani",description:"AC long-distance service with premium comfort",capacity:{total:35,sleeper:35,seater:0},amenities:["ac","charging","entertainment"],specifications:{fuelType:"diesel",mileage:8,maxSpeed:90,length:12,width:2.5,height:3.5},features:["AC long distance","Premium comfort","Interstate"],priceCategory:"luxury",isActive:!0,schedulingRules:{maxDistance:400,preferredRoutes:["interstate","long_distance"],timeSlots:["morning","evening"],frequency:"low"}},{id:"minnal",name:"Minnal",description:"Overnight services, AC/Non-AC semi-sleeper, night journeys",capacity:{total:35,sleeper:35,seater:0},amenities:["ac","charging","entertainment"],specifications:{fuelType:"diesel",mileage:8,maxSpeed:85,length:12,width:2.5,height:3.5},features:["Overnight service","Semi-sleeper","Night journeys"],priceCategory:"premium",isActive:!0,schedulingRules:{maxDistance:350,preferredRoutes:["long_distance","interstate"],timeSlots:["evening","night"],frequency:"medium"}},{id:"ananthapuri_fast",name:"Ananthapuri (Fast / Superfast / Deluxe)",description:"Special Trivandrum-based branded service",capacity:{total:45,sleeper:0,seater:45},amenities:["charging"],specifications:{fuelType:"diesel",mileage:10,maxSpeed:80,length:11,width:2.5,height:3.2},features:["Trivandrum branded","Fast service","Limited stops"],priceCategory:"standard",isActive:!0,schedulingRules:{maxDistance:300,preferredRoutes:["intercity","district"],timeSlots:["morning","afternoon","evening"],frequency:"high"}},{id:"low_floor_non_ac",name:"Low Floor Non-AC",description:"Modern city service, wide doors, GPS-enabled",capacity:{total:45,sleeper:0,seater:45},amenities:["charging"],specifications:{fuelType:"diesel",mileage:11,maxSpeed:70,length:11,width:2.5,height:3},features:["Low floor","Wide doors","GPS enabled","City service"],priceCategory:"standard",isActive:!0,schedulingRules:{maxDistance:50,preferredRoutes:["city","local"],timeSlots:["morning","afternoon","evening"],frequency:"high"}},{id:"low_floor_ac",name:"Low Floor AC (Volvo)",description:"Volvo AC city service, Trivandrum/Kochi",capacity:{total:40,sleeper:0,seater:40},amenities:["ac","charging","entertainment"],specifications:{fuelType:"diesel",mileage:9,maxSpeed:80,length:11,width:2.5,height:3},features:["Low floor AC","Volvo service","City routes"],priceCategory:"premium",isActive:!0,schedulingRules:{maxDistance:50,preferredRoutes:["city","premium"],timeSlots:["morning","afternoon","evening"],frequency:"medium"}},{id:"jnnurm_city",name:"JNNURM / City Circular",description:"Special city buses, funded under JNNURM scheme",capacity:{total:50,sleeper:0,seater:50},amenities:["charging"],specifications:{fuelType:"diesel",mileage:12,maxSpeed:60,length:11,width:2.5,height:3.2},features:["JNNURM funded","City circular","Short routes"],priceCategory:"budget",isActive:!0,schedulingRules:{maxDistance:30,preferredRoutes:["city","circular"],timeSlots:["morning","afternoon","evening"],frequency:"high"}}]),[u,h]=(0,r.useState)(null),[m,p]=(0,r.useState)(!1),[x,g]=(0,r.useState)(!1),[f,y]=(0,r.useState)(null),[b,v]=(0,r.useState)("types"),[j,N]=(0,r.useState)({id:"",name:"",description:"",capacity:{total:45,sleeper:0,seater:45},amenities:[],specifications:{fuelType:"diesel",mileage:10,maxSpeed:80,length:11,width:2.5,height:3.2},features:[],priceCategory:"standard",isActive:!0,schedulingRules:{maxDistance:200,preferredRoutes:["intercity"],timeSlots:["morning","afternoon"],frequency:"medium"}}),w=[{id:"ac",name:"Air Conditioning",icon:"\u2744\ufe0f"},{id:"wifi",name:"WiFi",icon:"\ud83d\udcf6"},{id:"charging",name:"Charging Points",icon:"\ud83d\udd0c"},{id:"entertainment",name:"Entertainment",icon:"\ud83d\udcfa"},{id:"refreshments",name:"Refreshments",icon:"\ud83c\udf7f"},{id:"toilet",name:"Toilet",icon:"\ud83d\udebb"},{id:"heating",name:"Heating",icon:"\ud83d\udd25"}],k=[{id:"budget",name:"Budget",color:"bg-green-100 text-green-800"},{id:"economy",name:"Economy",color:"bg-blue-100 text-blue-800"},{id:"standard",name:"Standard",color:"bg-purple-100 text-purple-800"},{id:"premium",name:"Premium",color:"bg-orange-100 text-orange-800"},{id:"luxury",name:"Luxury",color:"bg-red-100 text-red-800"},{id:"super_luxury",name:"Super Luxury",color:"bg-indigo-100 text-indigo-800"}],A=[{id:"very_low",name:"Very Low",color:"bg-red-100 text-red-800"},{id:"low",name:"Low",color:"bg-orange-100 text-orange-800"},{id:"medium",name:"Medium",color:"bg-yellow-100 text-yellow-800"},{id:"high",name:"High",color:"bg-green-100 text-green-800"}],S=e=>{var t;return(null===(t=k.find(t=>t.id===e))||void 0===t?void 0:t.color)||"bg-gray-100 text-gray-800"},C=e=>{var t;return(null===(t=A.find(t=>t.id===e))||void 0===t?void 0:t.color)||"bg-gray-100 text-gray-800"};return a?(0,i.createPortal)((0,cs.jsx)(Md,{children:(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed bg-black bg-opacity-70 flex items-center justify-center z-[9999]",style:{zIndex:9999,position:"fixed",top:0,left:"280px",right:0,bottom:0,width:"calc(100vw - 280px)",height:"100vh"},onClick:n,children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col relative",style:{zIndex:1e4,position:"relative",margin:"auto"},onClick:e=>e.stopPropagation(),children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-3",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,cs.jsx)(ks.A,{className:"w-6 h-6 text-white"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Enhanced Bus Type Manager"}),(0,cs.jsx)("p",{className:"text-gray-500",children:"Manage bus types, scheduling rules, and analytics"})]})]}),(0,cs.jsx)("button",{onClick:n,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:(0,cs.jsx)(Bs.A,{className:"w-6 h-6"})})]}),(0,cs.jsx)("div",{className:"border-b border-gray-200",children:(0,cs.jsx)("nav",{className:"flex space-x-8 px-6",children:[{id:"types",label:"Bus Types",icon:ks.A},{id:"scheduling",label:"Scheduling Rules",icon:fs.A},{id:"analytics",label:"Analytics",icon:js.A}].map(e=>(0,cs.jsxs)("button",{onClick:()=>v(e.id),className:"flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm ".concat(b===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,cs.jsx)(e.icon,{className:"w-4 h-4"}),e.label]},e.id))})}),(0,cs.jsxs)("div",{className:"flex-1 overflow-hidden",children:["types"===b&&(0,cs.jsxs)("div",{className:"h-full flex",children:[(0,cs.jsxs)("div",{className:"w-1/2 border-r border-gray-200 flex flex-col",children:[(0,cs.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Bus Types (",c.length,")"]}),(0,cs.jsxs)("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[(0,cs.jsx)(bu.A,{className:"w-4 h-4"}),"Add Type"]})]})}),(0,cs.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:c.map(e=>{var t,s,r;return(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-4 p-4 rounded-lg border-2 cursor-pointer transition-all ".concat((null===u||void 0===u?void 0:u.id)===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:shadow-md"),onClick:()=>(e=>{h(e)})(e),children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(ks.A,{className:"w-5 h-5 text-blue-600"}),(0,cs.jsx)("span",{className:"font-semibold text-gray-900",children:e.name}),(0,cs.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(S(e.priceCategory)),children:e.priceCategory}),(0,cs.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(C(null===(t=e.schedulingRules)||void 0===t?void 0:t.frequency)),children:(null===(s=e.schedulingRules)||void 0===s?void 0:s.frequency)||"medium"})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("button",{onClick:t=>{var s;t.stopPropagation(),s=e.id,d(e=>e.map(e=>e.id===s?(0,Ie.A)((0,Ie.A)({},e),{},{isActive:!e.isActive}):e))},className:"p-1 rounded ".concat(e.isActive?"text-green-600 hover:bg-green-100":"text-gray-400 hover:bg-gray-100"),children:e.isActive?(0,cs.jsx)(jd.A,{className:"w-4 h-4"}):(0,cs.jsx)(Bs.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{const t=(0,Ie.A)((0,Ie.A)({},e),{},{id:"".concat(e.id,"_copy_").concat(Date.now()),name:"".concat(e.name," (Copy)"),isActive:!1});d([...c,t]),Oe.oR.success("Bus type duplicated successfully")})(e)},className:"p-1 text-blue-600 hover:bg-blue-100 rounded",children:(0,cs.jsx)(cm.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:t=>{var s;t.stopPropagation(),s=e.id,window.confirm("Are you sure you want to delete this bus type?")&&(d(e=>e.filter(e=>e.id!==s)),Oe.oR.success("Bus type deleted successfully"))},className:"p-1 text-red-600 hover:bg-red-100 rounded",children:(0,cs.jsx)(Wh.A,{className:"w-4 h-4"})})]})]}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,cs.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-2",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,cs.jsx)(Ss.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:[e.capacity.total," seats"]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,cs.jsx)(As.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:["Max: ",(null===(r=e.schedulingRules)||void 0===r?void 0:r.maxDistance)||200,"km"]})]})]}),(0,cs.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.amenities.slice(0,3).map(e=>{const t=w.find(t=>t.id===e);return(0,cs.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:[null===t||void 0===t?void 0:t.icon," ",null===t||void 0===t?void 0:t.name]},e)}),e.amenities.length>3&&(0,cs.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:["+",e.amenities.length-3," more"]})]})]},e.id)})})]}),(0,cs.jsx)("div",{className:"w-1/2 flex flex-col",children:m?(0,cs.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Add New Bus Type"}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("button",{onClick:()=>{p(!1),N({id:"",name:"",description:"",capacity:{total:45,sleeper:0,seater:45},amenities:[],specifications:{fuelType:"diesel",mileage:10,maxSpeed:80,length:11,width:2.5,height:3.2},features:[],priceCategory:"standard",isActive:!0,schedulingRules:{maxDistance:200,preferredRoutes:["intercity"],timeSlots:["morning","afternoon"],frequency:"medium"}})},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),(0,cs.jsxs)("button",{onClick:()=>{if(!j.name.trim())return void Oe.oR.error("Bus type name is required");const e=j.name.toLowerCase().replace(/\s+/g,"_"),t=(0,Ie.A)((0,Ie.A)({id:e},j),{},{capacity:(0,Ie.A)((0,Ie.A)({},j.capacity),{},{total:j.capacity.sleeper+j.capacity.seater})});d([...c,t]),N({name:"",description:"",capacity:{total:0,sleeper:0,seater:0},amenities:[],specifications:{fuelType:"diesel",mileage:10,maxSpeed:80,length:11,width:2.5,height:3.2},features:[],priceCategory:"standard",isActive:!0,schedulingRules:{maxDistance:200,preferredRoutes:[],timeSlots:[],frequency:"medium"}}),p(!1),Oe.oR.success("Bus type added successfully")},className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[(0,cs.jsx)(bu.A,{className:"w-4 h-4"}),"Add Type"]})]})]}),(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Basic Information"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),(0,cs.jsx)("input",{type:"text",value:j.name,onChange:e=>N((0,Ie.A)((0,Ie.A)({},j),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter bus type name"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,cs.jsx)("textarea",{value:j.description,onChange:e=>N((0,Ie.A)((0,Ie.A)({},j),{},{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Enter bus type description"})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Capacity"}),(0,cs.jsx)("input",{type:"number",value:j.capacity.total,onChange:e=>N((0,Ie.A)((0,Ie.A)({},j),{},{capacity:(0,Ie.A)((0,Ie.A)({},j.capacity),{},{total:parseInt(e.target.value)||0})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Total seats"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Category"}),(0,cs.jsx)("select",{value:j.priceCategory,onChange:e=>N((0,Ie.A)((0,Ie.A)({},j),{},{priceCategory:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:k.map(e=>(0,cs.jsx)("option",{value:e.id,children:e.name},e.id))})]})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Amenities"}),(0,cs.jsx)("div",{className:"grid grid-cols-2 gap-2",children:w.map(e=>(0,cs.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("input",{type:"checkbox",checked:j.amenities.includes(e.id),onChange:t=>{t.target.checked?N((0,Ie.A)((0,Ie.A)({},j),{},{amenities:[...j.amenities,e.id]})):N((0,Ie.A)((0,Ie.A)({},j),{},{amenities:j.amenities.filter(t=>t!==e.id)}))},className:"rounded border-gray-300"}),(0,cs.jsxs)("span",{className:"text-sm text-gray-700",children:[e.icon," ",e.name]})]},e.id))})]})]})]}):u?(0,cs.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Edit Bus Type"}),(0,cs.jsxs)("button",{onClick:()=>{d(e=>e.map(e=>e.id===u.id?u:e)),h(null),Oe.oR.success("Bus type updated successfully")},className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[(0,cs.jsx)(Uh.A,{className:"w-4 h-4"}),"Save Changes"]})]}),(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Basic Information"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),(0,cs.jsx)("input",{type:"text",value:u.name,onChange:e=>h((0,Ie.A)((0,Ie.A)({},u),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,cs.jsx)("textarea",{value:u.description,onChange:e=>h((0,Ie.A)((0,Ie.A)({},u),{},{description:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Category"}),(0,cs.jsx)("select",{value:u.priceCategory,onChange:e=>h((0,Ie.A)((0,Ie.A)({},u),{},{priceCategory:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:k.map(e=>(0,cs.jsx)("option",{value:e.id,children:e.name},e.id))})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Scheduling Rules"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Distance (km)"}),(0,cs.jsx)("input",{type:"number",value:(null===(t=u.schedulingRules)||void 0===t?void 0:t.maxDistance)||200,onChange:e=>h((0,Ie.A)((0,Ie.A)({},u),{},{schedulingRules:(0,Ie.A)((0,Ie.A)({},u.schedulingRules),{},{maxDistance:parseInt(e.target.value)||200})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Routes"}),(0,cs.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{id:"local",name:"Local Routes"},{id:"city",name:"City Routes"},{id:"intercity",name:"Intercity Routes"},{id:"district",name:"District Routes"},{id:"long_distance",name:"Long Distance"},{id:"interstate",name:"Interstate"},{id:"premium",name:"Premium Routes"},{id:"luxury",name:"Luxury Routes"}].map(e=>{var t,s;return(0,cs.jsxs)("label",{className:"flex items-center gap-2 p-2 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,cs.jsx)("input",{type:"checkbox",checked:(null===(t=u.schedulingRules)||void 0===t||null===(s=t.preferredRoutes)||void 0===s?void 0:s.includes(e.id))||!1,onChange:t=>{var s;const r=(null===(s=u.schedulingRules)||void 0===s?void 0:s.preferredRoutes)||[],a=t.target.checked?[...r,e.id]:r.filter(t=>t!==e.id);h((0,Ie.A)((0,Ie.A)({},u),{},{schedulingRules:(0,Ie.A)((0,Ie.A)({},u.schedulingRules),{},{preferredRoutes:a})}))},className:"rounded"}),(0,cs.jsx)("span",{className:"text-sm",children:e.name})]},e.id)})})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Slots"}),(0,cs.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{id:"morning",name:"Morning (6AM-12PM)",icon:"\ud83c\udf05"},{id:"afternoon",name:"Afternoon (12PM-6PM)",icon:"\u2600\ufe0f"},{id:"evening",name:"Evening (6PM-10PM)",icon:"\ud83c\udf06"},{id:"night",name:"Night (10PM-6AM)",icon:"\ud83c\udf19"}].map(e=>{var t,s;return(0,cs.jsxs)("label",{className:"flex items-center gap-2 p-2 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,cs.jsx)("input",{type:"checkbox",checked:(null===(t=u.schedulingRules)||void 0===t||null===(s=t.timeSlots)||void 0===s?void 0:s.includes(e.id))||!1,onChange:t=>{var s;const r=(null===(s=u.schedulingRules)||void 0===s?void 0:s.timeSlots)||[],a=t.target.checked?[...r,e.id]:r.filter(t=>t!==e.id);h((0,Ie.A)((0,Ie.A)({},u),{},{schedulingRules:(0,Ie.A)((0,Ie.A)({},u.schedulingRules),{},{timeSlots:a})}))},className:"rounded"}),(0,cs.jsxs)("span",{className:"text-sm",children:[e.icon," ",e.name]})]},e.id)})})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frequency"}),(0,cs.jsx)("select",{value:(null===(s=u.schedulingRules)||void 0===s?void 0:s.frequency)||"medium",onChange:e=>h((0,Ie.A)((0,Ie.A)({},u),{},{schedulingRules:(0,Ie.A)((0,Ie.A)({},u.schedulingRules),{},{frequency:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:A.map(e=>(0,cs.jsx)("option",{value:e.id,children:e.name},e.id))})]})]})]})]}):(0,cs.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)(ks.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Bus Type"}),(0,cs.jsx)("p",{className:"text-gray-500",children:"Choose a bus type from the list to edit its configuration and scheduling rules"})]})})})]}),"scheduling"===b&&(0,cs.jsxs)("div",{className:"h-full overflow-y-auto p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Scheduling Rules Overview"}),(0,cs.jsxs)("button",{onClick:()=>{l&&l(c.filter(e=>e.isActive)),Oe.oR.success("Scheduling rules updated successfully")},className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[(0,cs.jsx)(Uh.A,{className:"w-4 h-4"}),"Update Scheduling"]})]}),(0,cs.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:c.filter(e=>e.isActive).map(e=>{var t,s,r,a,n,i;return(0,cs.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,cs.jsx)("h4",{className:"font-semibold text-gray-900",children:e.name}),(0,cs.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(S(e.priceCategory)),children:e.priceCategory})]}),(0,cs.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(As.A,{className:"w-4 h-4 text-blue-600"}),(0,cs.jsxs)("span",{children:["Max Distance: ",(null===(t=e.schedulingRules)||void 0===t?void 0:t.maxDistance)||200,"km"]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(sd.A,{className:"w-4 h-4 text-green-600"}),(0,cs.jsxs)("span",{children:["Frequency: ",(null===(s=e.schedulingRules)||void 0===s?void 0:s.frequency)||"medium"]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(gs.A,{className:"w-4 h-4 text-purple-600"}),(0,cs.jsxs)("span",{children:["Routes: ",(null===(r=e.schedulingRules)||void 0===r||null===(a=r.preferredRoutes)||void 0===a?void 0:a.join(", "))||"Any"]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(fs.A,{className:"w-4 h-4 text-orange-600"}),(0,cs.jsxs)("span",{children:["Time Slots: ",(null===(n=e.schedulingRules)||void 0===n||null===(i=n.timeSlots)||void 0===i?void 0:i.join(", "))||"Any"]})]})]})]},e.id)})})]}),"analytics"===b&&(0,cs.jsxs)("div",{className:"h-full overflow-y-auto p-6",children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Bus Type Analytics"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[(0,cs.jsx)("div",{className:"bg-blue-50 rounded-lg p-4",children:(0,cs.jsxs)("div",{className:"flex items-center gap-3",children:[(0,cs.jsx)(ks.A,{className:"w-8 h-8 text-blue-600"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:c.length}),(0,cs.jsx)("p",{className:"text-blue-700",children:"Total Bus Types"})]})]})}),(0,cs.jsx)("div",{className:"bg-green-50 rounded-lg p-4",children:(0,cs.jsxs)("div",{className:"flex items-center gap-3",children:[(0,cs.jsx)(jd.A,{className:"w-8 h-8 text-green-600"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-2xl font-bold text-green-900",children:c.filter(e=>e.isActive).length}),(0,cs.jsx)("p",{className:"text-green-700",children:"Active Types"})]})]})}),(0,cs.jsx)("div",{className:"bg-purple-50 rounded-lg p-4",children:(0,cs.jsxs)("div",{className:"flex items-center gap-3",children:[(0,cs.jsx)(xu.A,{className:"w-8 h-8 text-purple-600"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-2xl font-bold text-purple-900",children:k.length}),(0,cs.jsx)("p",{className:"text-purple-700",children:"Price Categories"})]})]})})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,cs.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Bus Types by Category"}),(0,cs.jsx)("div",{className:"space-y-2",children:k.map(e=>{const t=c.filter(t=>t.priceCategory===e.id).length;return(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.color),children:e.name}),(0,cs.jsx)("span",{className:"font-medium",children:t})]},e.id)})})]}),(0,cs.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,cs.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Capacity Distribution"}),(0,cs.jsx)("div",{className:"space-y-2",children:c.map(e=>(0,cs.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,cs.jsx)("span",{children:e.name}),(0,cs.jsxs)("span",{className:"font-medium",children:[e.capacity.total," seats"]})]},e.id))})]})]})]})]})]})})}),document.body):null};_B.register(...PU);const QU=e=>{let{title:t,value:s,icon:r,trend:a,color:n}=e;return(0,cs.jsx)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg p-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:t}),(0,cs.jsx)("p",{className:"text-2xl font-bold mt-1",children:s}),(0,cs.jsxs)("div",{className:"flex items-center mt-2",children:[a>0?(0,cs.jsx)(qM,{className:"w-4 h-4 text-green-500"}):(0,cs.jsx)(fu,{className:"w-4 h-4 text-red-500"}),(0,cs.jsxs)("span",{className:"text-sm ".concat(a>0?"text-green-500":"text-red-500"),children:[Math.abs(a),"%"]})]})]}),(0,cs.jsx)("div",{className:"p-3 rounded-lg ".concat({blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600"}[n]),children:r})]})})},XU=e=>{var t,s,r;let{bus:a,liveData:n,onEdit:i,onDelete:o,onView:l,onSelect:c,isSelected:d,onAssignRoute:u,onRemoveRoute:h,onScheduleMaintenance:m,onCompleteMaintenance:p,onViewMaintenance:x,onAssignStaff:g,onUnassignStaff:f}=e;return(0,cs.jsx)(ed.div,{whileHover:{scale:1.02},className:"bg-white rounded-xl shadow-lg overflow-hidden border-2 ".concat(d?"border-blue-500":"border-transparent"),children:(0,cs.jsxs)("div",{className:"p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("input",{type:"checkbox",checked:d,onChange:c,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,cs.jsx)("h3",{className:"text-lg font-semibold",children:(null===a||void 0===a?void 0:a.busNumber)||"Unknown"})]}),(0,cs.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat({active:"bg-green-100 text-green-800",maintenance:"bg-yellow-100 text-yellow-800",inactive:"bg-red-100 text-red-800"}[null===a||void 0===a?void 0:a.status]||"bg-gray-100 text-gray-800"),children:(null===a||void 0===a?void 0:a.status)||"Unknown"})]}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,cs.jsx)(gs.A,{className:"w-4 h-4 mr-2"}),null!==n&&void 0!==n&&n.location?"".concat(n.location.lat,", ").concat(n.location.lng):"Location unavailable"]}),(0,cs.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,cs.jsx)(Fm,{className:"w-4 h-4 mr-2"}),"Fuel: ",(null===a||void 0===a?void 0:a.fuelLevel)||0,"%"]}),(0,cs.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,cs.jsx)(Ss.A,{className:"w-4 h-4 mr-2"}),"Capacity: ",(null===a||void 0===a?void 0:a.occupancy)||0,"/",(null===a||void 0===a||null===(t=a.capacity)||void 0===t?void 0:t.total)||0]}),(null===n||void 0===n?void 0:n.speed)&&(0,cs.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,cs.jsx)(Bm,{className:"w-4 h-4 mr-2"}),"Speed: ",n.speed," km/h"]}),(0,cs.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,cs.jsx)(As.A,{className:"w-4 h-4 mr-2"}),null!==a&&void 0!==a&&a.assignedRoute?(0,cs.jsx)("span",{className:"text-blue-600",children:a.assignedRoute.routeName||a.assignedRoute.routeNumber||"Route Assigned"}):(0,cs.jsx)("span",{className:"text-gray-400",children:"No route assigned"})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[(0,cs.jsxs)("div",{className:"flex items-center text-sm",children:[(0,cs.jsx)("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-2",children:(0,cs.jsx)(Lh,{className:"w-3 h-3 text-green-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Driver"}),(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(null===a||void 0===a||null===(s=a.assignedDriver)||void 0===s?void 0:s.name)||"Not Assigned"}),(null===a||void 0===a?void 0:a.assignedDriver)&&(0,cs.jsx)("p",{className:"text-xs text-gray-400",children:a.assignedDriver.employeeCode})]})]}),(0,cs.jsxs)("div",{className:"flex items-center text-sm",children:[(0,cs.jsx)("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2",children:(0,cs.jsx)(Ss.A,{className:"w-3 h-3 text-purple-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Conductor"}),(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(null===a||void 0===a||null===(r=a.assignedConductor)||void 0===r?void 0:r.name)||"Not Assigned"}),(null===a||void 0===a?void 0:a.assignedConductor)&&(0,cs.jsx)("p",{className:"text-xs text-gray-400",children:a.assignedConductor.employeeCode})]})]})]}),(!(null!==a&&void 0!==a&&a.assignedDriver)||!(null!==a&&void 0!==a&&a.assignedConductor))&&(0,cs.jsx)("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)(Nd.A,{className:"w-4 h-4 text-yellow-600 mr-2"}),(0,cs.jsx)("p",{className:"text-xs text-yellow-800",children:null!==a&&void 0!==a&&a.assignedDriver||null!==a&&void 0!==a&&a.assignedConductor?null!==a&&void 0!==a&&a.assignedDriver?"Conductor not assigned":"Driver not assigned":"No staff assigned"})]})})]}),(0,cs.jsxs)("div",{className:"space-y-2 mt-4 pt-4 border-t",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsxs)("button",{onClick:l,className:"flex-1 px-3 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 flex items-center justify-center gap-1",children:[(0,cs.jsx)(Nu.A,{className:"w-4 h-4"}),"View"]}),(0,cs.jsxs)("button",{onClick:i,className:"flex-1 px-3 py-2 bg-gray-50 text-gray-600 rounded-lg hover:bg-gray-100 flex items-center justify-center gap-1",children:[(0,cs.jsx)(Kh.A,{className:"w-4 h-4"}),"Edit"]}),(0,cs.jsx)("button",{onClick:o,className:"p-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100",children:(0,cs.jsx)(Wh.A,{className:"w-4 h-4"})})]}),(0,cs.jsx)("div",{className:"flex items-center gap-2",children:null!==a&&void 0!==a&&a.assignedRoute?(0,cs.jsxs)("button",{onClick:h,className:"flex-1 px-3 py-1 bg-orange-50 text-orange-600 rounded text-sm hover:bg-orange-100 flex items-center justify-center gap-1",children:[(0,cs.jsx)(bh,{className:"w-3 h-3"}),"Unassign Route"]}):(0,cs.jsxs)("button",{onClick:u,className:"flex-1 px-3 py-1 bg-green-50 text-green-600 rounded text-sm hover:bg-green-100 flex items-center justify-center gap-1",children:[(0,cs.jsx)(As.A,{className:"w-3 h-3"}),"Assign Route"]})}),(0,cs.jsx)("div",{className:"flex items-center gap-2",children:null!==a&&void 0!==a&&a.assignedDriver&&null!==a&&void 0!==a&&a.assignedConductor?(0,cs.jsxs)("button",{onClick:()=>f&&f(a._id),className:"flex-1 px-3 py-1 bg-red-50 text-red-600 rounded text-sm hover:bg-red-100 flex items-center justify-center gap-1",children:[(0,cs.jsx)(qh,{className:"w-3 h-3"}),"Unassign Staff"]}):(0,cs.jsxs)("button",{onClick:()=>g&&g(a._id),className:"flex-1 px-3 py-1 bg-blue-50 text-blue-600 rounded text-sm hover:bg-blue-100 flex items-center justify-center gap-1",children:[(0,cs.jsx)(wm.A,{className:"w-3 h-3"}),"Assign Staff"]})}),(0,cs.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:["maintenance"===(null===a||void 0===a?void 0:a.status)?(0,cs.jsxs)("button",{onClick:p,className:"flex-1 px-2 py-1 bg-green-50 text-green-600 rounded text-xs hover:bg-green-100 flex items-center justify-center gap-1",children:[(0,cs.jsx)(jd.A,{className:"w-3 h-3"}),"Complete"]}):(0,cs.jsxs)("button",{onClick:m,className:"flex-1 px-2 py-1 bg-yellow-50 text-yellow-600 rounded text-xs hover:bg-yellow-100 flex items-center justify-center gap-1",children:[(0,cs.jsx)(Lm.A,{className:"w-3 h-3"}),"Schedule"]}),(0,cs.jsxs)("button",{onClick:x,className:"flex-1 px-2 py-1 bg-gray-50 text-gray-600 rounded text-xs hover:bg-gray-100 flex items-center justify-center gap-1",children:[(0,cs.jsx)(GM.A,{className:"w-3 h-3"}),"History"]})]})]})]})})},ZU=e=>{let{alert:t}=e;return(0,cs.jsx)(ed.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"p-4 rounded-lg border ".concat({critical:"bg-red-50 border-red-200 text-red-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",info:"bg-blue-50 border-blue-200 text-blue-800"}[t.type]),children:(0,cs.jsxs)("div",{className:"flex items-start gap-3",children:[(0,cs.jsx)(vd.A,{className:"w-5 h-5 mt-0.5"}),(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsx)("p",{className:"font-medium",children:t.title}),(0,cs.jsx)("p",{className:"text-sm mt-1",children:t.message}),(0,cs.jsx)("p",{className:"text-xs mt-2 opacity-75",children:new Date(t.timestamp).toLocaleString()})]})]})})},eV=e=>{var t,s,a,n,i;let{onClose:o,onSave:l}=e;const[c,d]=(0,r.useState)({busNumber:"",registrationNumber:"",busType:"ac_seater",customBusType:{name:"",capacity:0,priceCategory:"standard",amenities:[]},capacity:{total:0,seater:0,sleeper:0,ladies:0,disabled:0},depotId:"",assignedDriver:null,assignedConductor:null,status:"active",fuelType:"diesel",manufacturingYear:(new Date).getFullYear(),manufacturer:"",model:"",chassisNumber:"",engineNumber:"",insuranceDetails:{policyNumber:"",expiryDate:"",provider:""},lastMaintenance:"",nextMaintenance:"",odometerReading:0,notes:""}),[u,h]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[x,g]=(0,r.useState)([]),[f,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),[j,N]=(0,r.useState)({}),[w,k]=(0,r.useState)(null),[A,S]=(0,r.useState)(null);(0,r.useEffect)(()=>{C()},[]);const C=async()=>{v(!0);try{const[o,l,c]=await Promise.all([(0,xs.nr)("/api/admin/all-drivers"),(0,xs.nr)("/api/admin/all-conductors"),(0,xs.nr)("/api/admin/depots")]);var e,t,s,r,a,n,i;if(o.ok)h((null===(e=o.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.drivers)||(null===(s=o.data)||void 0===s?void 0:s.drivers)||[]);if(l.ok)p((null===(r=l.data)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.conductors)||(null===(n=l.data)||void 0===n?void 0:n.conductors)||[]);if(c.ok)g((null===(i=c.data)||void 0===i?void 0:i.depots)||c.data||[])}catch(o){console.error("Error fetching staff and depots:",o),Oe.oR.error("Failed to load staff and depot data")}finally{v(!1)}},_=[{value:"ordinary",label:"Ordinary",category:"Budget",description:"Basic service, stops at all points, Non-AC simple seats"},{value:"lspf",label:"Limited Stop Fast Passenger (LSFP)",category:"Economy",description:"Fewer stops, Non-AC 2+3 seater, medium-distance travel"},{value:"fast_passenger",label:"Fast Passenger",category:"Standard",description:"Limited stops, better speed, Non-AC comfortable seats"},{value:"venad",label:"Venad",category:"Budget",description:"Ordinary long-distance service, south Kerala routes"},{value:"super_fast",label:"Super Fast",category:"Standard",description:"Popular category, limited stops, better cushioning, long-distance"},{value:"super_deluxe",label:"Super Deluxe",category:"Premium",description:"Fewer stops, 2+2 cushioned seats, Non-AC, long routes"},{value:"deluxe_express",label:"Deluxe Express / FP Deluxe",category:"Premium",description:"Fast Passenger Deluxe, 2+2 pushback seats, intercity routes"},{value:"ananthapuri_fast",label:"Ananthapuri (Fast / Superfast / Deluxe)",category:"Standard",description:"Special Trivandrum-based branded service"},{value:"rajadhani",label:"Rajadhani",category:"Luxury",description:"AC long-distance service with premium comfort"},{value:"minnal",label:"Minnal",category:"Premium",description:"Overnight services, AC/Non-AC semi-sleeper, night journeys"},{value:"garuda_king_long",label:"Garuda King Long",category:"Luxury",description:"AC semi-sleeper, premium interstate service"},{value:"garuda_volvo",label:"Garuda Volvo",category:"Luxury",description:"AC luxury Volvo, pushback, curtains, charging ports"},{value:"garuda_scania",label:"Garuda Scania",category:"Luxury",description:"AC luxury Scania, premium interstate service"},{value:"garuda_maharaja",label:"Garuda Maharaja",category:"Super Luxury",description:"Premium long-distance, AC pushback, large leg space"},{value:"low_floor_non_ac",label:"Low Floor Non-AC",category:"Standard",description:"Modern city service, wide doors, GPS-enabled"},{value:"low_floor_ac",label:"Low Floor AC (Volvo)",category:"Premium",description:"Volvo AC city service, Trivandrum/Kochi"},{value:"jnnurm_city",label:"JNNURM / City Circular",category:"Budget",description:"Special city buses, funded under JNNURM scheme"},{value:"custom",label:"Custom Bus Type",category:"Custom",description:"Define your own bus specifications"}];return(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,cs.jsxs)("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[(0,cs.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add New Bus"}),(0,cs.jsx)("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,cs.jsx)(bh,{className:"w-5 h-5"})})]}),(0,cs.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};c.busNumber.trim()||(e.busNumber="Bus number is required"),c.registrationNumber.trim()||(e.registrationNumber="Registration number is required"),c.depotId||(e.depotId="Depot selection is required"),(!c.capacity.total||c.capacity.total<=0)&&(e.capacityTotal="Total capacity must be greater than 0"),(!c.manufacturingYear||c.manufacturingYear<1900)&&(e.manufacturingYear="Valid manufacturing year is required");const{total:t,seater:s,sleeper:r,ladies:a,disabled:n}=c.capacity;return s+r>t&&(e.capacityBreakdown="Seater + Sleeper cannot exceed total capacity"),N(e),0===Object.keys(e).length})()){y(!0);try{const e=(0,Ie.A)((0,Ie.A)({},c),{},{capacity:(0,Ie.A)((0,Ie.A)({},c.capacity),{},{total:parseInt(c.capacity.total),seater:parseInt(c.capacity.seater)||0,sleeper:parseInt(c.capacity.sleeper)||0,ladies:parseInt(c.capacity.ladies)||0,disabled:parseInt(c.capacity.disabled)||0}),manufacturingYear:parseInt(c.manufacturingYear),odometerReading:parseInt(c.odometerReading)||0,assignedDriver:c.assignedDriver||void 0,assignedConductor:c.assignedConductor||void 0});await l(e)}catch(t){console.error("Error saving bus:",t),Oe.oR.error("Failed to save bus")}finally{y(!1)}}else Oe.oR.error("Please fix the errors before submitting")},className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bus Number *"}),(0,cs.jsx)("input",{type:"text",value:c.busNumber,onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{busNumber:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(j.busNumber?"border-red-500":"border-gray-300"),placeholder:"e.g., KA01AB1234"}),j.busNumber&&(0,cs.jsx)("p",{className:"text-red-500 text-xs mt-1",children:j.busNumber})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Registration Number *"}),(0,cs.jsx)("input",{type:"text",value:c.registrationNumber,onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{registrationNumber:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(j.registrationNumber?"border-red-500":"border-gray-300"),placeholder:"e.g., KA01AB1234"}),j.registrationNumber&&(0,cs.jsx)("p",{className:"text-red-500 text-xs mt-1",children:j.registrationNumber})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bus Type *"}),(0,cs.jsx)("select",{value:c.busType,onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{busType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:_.map(e=>(0,cs.jsxs)("option",{value:e.value,children:[e.label," - ",e.category]},e.value))}),c.busType&&"custom"!==c.busType&&(0,cs.jsx)("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg border border-blue-200",children:(0,cs.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,cs.jsx)("span",{className:"font-medium",children:null===(t=_.find(e=>e.value===c.busType))||void 0===t?void 0:t.label}),(0,cs.jsx)("br",{}),(0,cs.jsx)("span",{className:"text-blue-600",children:null===(s=_.find(e=>e.value===c.busType))||void 0===s?void 0:s.description})]})}),"custom"===c.busType&&(0,cs.jsxs)("div",{className:"mt-3 p-4 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg border border-purple-200",children:[(0,cs.jsx)("h4",{className:"font-medium text-purple-900 mb-3",children:"Custom Bus Type Configuration"}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Custom Name"}),(0,cs.jsx)("input",{type:"text",value:(null===(a=c.customBusType)||void 0===a?void 0:a.name)||"",onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{customBusType:(0,Ie.A)((0,Ie.A)({},c.customBusType),{},{name:e.target.value})})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-purple-500",placeholder:"e.g., Luxury Coach"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Total Capacity"}),(0,cs.jsx)("input",{type:"number",value:(null===(n=c.customBusType)||void 0===n?void 0:n.capacity)||"",onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{customBusType:(0,Ie.A)((0,Ie.A)({},c.customBusType),{},{capacity:parseInt(e.target.value)||0})})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-purple-500",placeholder:"50"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Price Category"}),(0,cs.jsxs)("select",{value:(null===(i=c.customBusType)||void 0===i?void 0:i.priceCategory)||"standard",onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{customBusType:(0,Ie.A)((0,Ie.A)({},c.customBusType),{},{priceCategory:e.target.value})})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-purple-500",children:[(0,cs.jsx)("option",{value:"budget",children:"Budget"}),(0,cs.jsx)("option",{value:"economy",children:"Economy"}),(0,cs.jsx)("option",{value:"standard",children:"Standard"}),(0,cs.jsx)("option",{value:"premium",children:"Premium"}),(0,cs.jsx)("option",{value:"luxury",children:"Luxury"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Amenities"}),(0,cs.jsx)("div",{className:"flex flex-wrap gap-1",children:["AC","WiFi","Charging","Entertainment"].map(e=>{var t,s;return(0,cs.jsxs)("label",{className:"flex items-center text-xs",children:[(0,cs.jsx)("input",{type:"checkbox",checked:(null===(t=c.customBusType)||void 0===t||null===(s=t.amenities)||void 0===s?void 0:s.includes(e))||!1,onChange:t=>{var s;const r=(null===(s=c.customBusType)||void 0===s?void 0:s.amenities)||[],a=t.target.checked?[...r,e]:r.filter(t=>t!==e);d((0,Ie.A)((0,Ie.A)({},c),{},{customBusType:(0,Ie.A)((0,Ie.A)({},c.customBusType),{},{amenities:a})}))},className:"mr-1"}),e]},e)})})]})]})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot *"}),(0,cs.jsxs)("select",{value:c.depotId,onChange:async e=>{const t=e.target.value;if(d((0,Ie.A)((0,Ie.A)({},c),{},{depotId:t,assignedDriver:null,assignedConductor:null})),t){v(!0);try{const[e,l]=await Promise.all([(0,xs.nr)("/api/admin/all-drivers").catch(()=>({ok:!0,data:{drivers:[{_id:"1",name:"Rajesh Kumar",depotId:t,phone:"+919876543210"},{_id:"2",name:"Suresh Patel",depotId:t,phone:"+919876543211"},{_id:"3",name:"Amit Singh",depotId:t,phone:"+919876543212"},{_id:"4",name:"Vikram Sharma",depotId:t,phone:"+919876543213"},{_id:"5",name:"Ravi Verma",depotId:t,phone:"+919876543214"}]}})),(0,xs.nr)("/api/admin/all-conductors").catch(()=>({ok:!0,data:{conductors:[{_id:"1",name:"Priya Sharma",depotId:t,phone:"+919876543220"},{_id:"2",name:"Anita Singh",depotId:t,phone:"+919876543221"},{_id:"3",name:"Sunita Patel",depotId:t,phone:"+919876543222"},{_id:"4",name:"Kavita Verma",depotId:t,phone:"+919876543223"},{_id:"5",name:"Rita Kumar",depotId:t,phone:"+919876543224"}]}}))]);if(console.log("API Response - Drivers:",e),console.log("API Response - Conductors:",l),e.ok){var s,r,a;const n=(null===(s=e.data)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.drivers)||(null===(a=e.data)||void 0===a?void 0:a.drivers)||[];console.log("All drivers:",n),console.log("Looking for depotId:",t);const i=n.filter(e=>(console.log("Driver ".concat(e.name," has depotId: ").concat(e.depotId,", looking for: ").concat(t)),e.depotId===t)),o=i.length>0?i:n;h(o),console.log("Showing ".concat(o.length," drivers (").concat(i.length," for depot, ").concat(n.length," total)"))}if(l.ok){var n,i,o;const e=(null===(n=l.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.conductors)||(null===(o=l.data)||void 0===o?void 0:o.conductors)||[];console.log("All conductors:",e);const s=e.filter(e=>(console.log("Conductor ".concat(e.name," has depotId: ").concat(e.depotId,", looking for: ").concat(t)),e.depotId===t)),r=s.length>0?s:e;p(r),console.log("Showing ".concat(r.length," conductors (").concat(s.length," for depot, ").concat(e.length," total)"))}}catch(l){console.error("Error fetching staff by depot:",l),Oe.oR.error("Failed to load staff data")}finally{v(!1)}}else h([]),p([])},className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(j.depotId?"border-red-500":"border-gray-300"),disabled:b,children:[(0,cs.jsx)("option",{value:"",children:"Select Depot"}),Array.isArray(x)&&x.map(e=>(0,cs.jsxs)("option",{value:e._id,children:[e.depotName," (",e.depotCode,")"]},e._id))]}),j.depotId&&(0,cs.jsx)("p",{className:"text-red-500 text-xs mt-1",children:j.depotId})]})]}),(0,cs.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Capacity Information"}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Capacity *"}),(0,cs.jsx)("input",{type:"number",value:c.capacity.total,onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{capacity:(0,Ie.A)((0,Ie.A)({},c.capacity),{},{total:e.target.value})})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(j.capacityTotal?"border-red-500":"border-gray-300"),min:"1"}),j.capacityTotal&&(0,cs.jsx)("p",{className:"text-red-500 text-xs mt-1",children:j.capacityTotal})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seater"}),(0,cs.jsx)("input",{type:"number",value:c.capacity.seater,onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{capacity:(0,Ie.A)((0,Ie.A)({},c.capacity),{},{seater:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sleeper"}),(0,cs.jsx)("input",{type:"number",value:c.capacity.sleeper,onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{capacity:(0,Ie.A)((0,Ie.A)({},c.capacity),{},{sleeper:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ladies"}),(0,cs.jsx)("input",{type:"number",value:c.capacity.ladies,onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{capacity:(0,Ie.A)((0,Ie.A)({},c.capacity),{},{ladies:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Disabled"}),(0,cs.jsx)("input",{type:"number",value:c.capacity.disabled,onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{capacity:(0,Ie.A)((0,Ie.A)({},c.capacity),{},{disabled:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]}),j.capacityBreakdown&&(0,cs.jsx)("p",{className:"text-red-500 text-xs mt-2",children:j.capacityBreakdown})]}),(0,cs.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Staff Assignment"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned Driver"}),(0,cs.jsxs)("select",{value:c.assignedDriver||"",onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{assignedDriver:e.target.value||null})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:b,children:[(0,cs.jsx)("option",{value:"",children:"Select Driver"}),Array.isArray(u)&&u.map(e=>{var t;return(0,cs.jsxs)("option",{value:e._id,children:[e.name," (",e.driverId,") - ",(null===(t=e.drivingLicense)||void 0===t?void 0:t.licenseType)||"N/A"]},e._id)})]}),b&&(0,cs.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Loading drivers..."})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned Conductor"}),(0,cs.jsxs)("select",{value:c.assignedConductor||"",onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{assignedConductor:e.target.value||null})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:b,children:[(0,cs.jsx)("option",{value:"",children:"Select Conductor"}),Array.isArray(m)&&m.map(e=>(0,cs.jsxs)("option",{value:e._id,children:[e.name," (",e.conductorId,") - ",e.badgeNumber||"N/A"]},e._id))]}),b&&(0,cs.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Loading conductors..."})]})]})]}),(0,cs.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Vehicle Details"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Manufacturer"}),(0,cs.jsx)("input",{type:"text",value:c.manufacturer,onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{manufacturer:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Tata, Ashok Leyland"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model"}),(0,cs.jsx)("input",{type:"text",value:c.model,onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{model:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Starbus, Ultra"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Manufacturing Year *"}),(0,cs.jsx)("input",{type:"number",value:c.manufacturingYear,onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{manufacturingYear:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(j.manufacturingYear?"border-red-500":"border-gray-300"),min:"1900",max:(new Date).getFullYear()+1}),j.manufacturingYear&&(0,cs.jsx)("p",{className:"text-red-500 text-xs mt-1",children:j.manufacturingYear})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuel Type"}),(0,cs.jsx)("select",{value:c.fuelType,onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{fuelType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{value:"diesel",label:"Diesel"},{value:"petrol",label:"Petrol"},{value:"cng",label:"CNG"},{value:"electric",label:"Electric"},{value:"hybrid",label:"Hybrid"}].map(e=>(0,cs.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chassis Number"}),(0,cs.jsx)("input",{type:"text",value:c.chassisNumber,onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{chassisNumber:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Engine Number"}),(0,cs.jsx)("input",{type:"text",value:c.engineNumber,onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{engineNumber:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,cs.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Bus Image"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("div",{className:"flex-1",children:(0,cs.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){k(t);const e=new FileReader;e.onloadend=()=>{S(e.result)},e.readAsDataURL(t)}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}),A&&(0,cs.jsx)("div",{className:"w-20 h-20 rounded-lg overflow-hidden border",children:(0,cs.jsx)("img",{src:A,alt:"Preview",className:"w-full h-full object-cover"})})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,cs.jsx)("textarea",{value:c.notes,onChange:e=>d((0,Ie.A)((0,Ie.A)({},c),{},{notes:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Additional notes about the bus..."})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t",children:[(0,cs.jsx)("button",{type:"button",onClick:o,className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",disabled:f,children:"Cancel"}),(0,cs.jsxs)("button",{type:"submit",disabled:f||b,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[f&&(0,cs.jsx)(wu.A,{className:"w-4 h-4 animate-spin"}),(0,cs.jsx)("span",{children:f?"Adding...":"Add Bus"})]})]})]})]})})},tV=e=>{var t,s,a,n,i,o,l,c,d,u,h,m,p,x,g,f,y;let{bus:b,onClose:v,onSave:j}=e;const[N,w]=(0,r.useState)({busNumber:b.busNumber||"",registrationNumber:b.registrationNumber||"",busType:b.busType||"ac_seater",customBusType:{name:(null===(t=b.customBusType)||void 0===t?void 0:t.name)||"",capacity:(null===(s=b.customBusType)||void 0===s?void 0:s.capacity)||0,priceCategory:(null===(a=b.customBusType)||void 0===a?void 0:a.priceCategory)||"standard",amenities:(null===(n=b.customBusType)||void 0===n?void 0:n.amenities)||[]},capacity:{total:(null===(i=b.capacity)||void 0===i?void 0:i.total)||0,seater:(null===(o=b.capacity)||void 0===o?void 0:o.seater)||0,sleeper:(null===(l=b.capacity)||void 0===l?void 0:l.sleeper)||0,ladies:(null===(c=b.capacity)||void 0===c?void 0:c.ladies)||0,disabled:(null===(d=b.capacity)||void 0===d?void 0:d.disabled)||0},depotId:(null===(u=b.depotId)||void 0===u?void 0:u._id)||b.depotId||"",assignedDriver:(null===(h=b.assignedDriver)||void 0===h?void 0:h._id)||b.assignedDriver||null,assignedConductor:(null===(m=b.assignedConductor)||void 0===m?void 0:m._id)||b.assignedConductor||null,status:b.status||"active",fuelType:b.fuelType||"diesel",manufacturingYear:b.manufacturingYear||(new Date).getFullYear(),manufacturer:b.manufacturer||"",model:b.model||"",chassisNumber:b.chassisNumber||"",engineNumber:b.engineNumber||"",insuranceDetails:{policyNumber:(null===(p=b.insuranceDetails)||void 0===p?void 0:p.policyNumber)||"",expiryDate:(null===(x=b.insuranceDetails)||void 0===x?void 0:x.expiryDate)||"",provider:(null===(g=b.insuranceDetails)||void 0===g?void 0:g.provider)||""},lastMaintenance:b.lastMaintenance||"",nextMaintenance:b.nextMaintenance||"",odometerReading:b.odometerReading||0,notes:b.notes||""}),[k,A]=(0,r.useState)([]),[S,C]=(0,r.useState)([]),[_,T]=(0,r.useState)([]),[P,E]=(0,r.useState)(!1),[D,M]=(0,r.useState)(!1),[O,R]=(0,r.useState)({}),[I,L]=(0,r.useState)(null),[F,B]=(0,r.useState)(b.imageUrl||null);(0,r.useEffect)(()=>{z()},[]);const z=async()=>{M(!0);try{const[o,l,c]=await Promise.all([(0,xs.nr)("/api/admin/all-drivers"),(0,xs.nr)("/api/admin/all-conductors"),(0,xs.nr)("/api/admin/depots")]);var e,t,s,r,a,n,i;if(o.ok)A((null===(e=o.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.drivers)||(null===(s=o.data)||void 0===s?void 0:s.drivers)||[]);if(l.ok)C((null===(r=l.data)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.conductors)||(null===(n=l.data)||void 0===n?void 0:n.conductors)||[]);if(c.ok)T((null===(i=c.data)||void 0===i?void 0:i.depots)||c.data||[])}catch(o){console.error("Error fetching staff and depots:",o),Oe.oR.error("Failed to load staff and depot data")}finally{M(!1)}},U=[{value:"ordinary",label:"Ordinary",category:"Budget",description:"Basic service, stops at all points, Non-AC simple seats"},{value:"lspf",label:"Limited Stop Fast Passenger (LSFP)",category:"Economy",description:"Fewer stops, Non-AC 2+3 seater, medium-distance travel"},{value:"fast_passenger",label:"Fast Passenger",category:"Standard",description:"Limited stops, better speed, Non-AC comfortable seats"},{value:"venad",label:"Venad",category:"Budget",description:"Ordinary long-distance service, south Kerala routes"},{value:"super_fast",label:"Super Fast",category:"Standard",description:"Popular category, limited stops, better cushioning, long-distance"},{value:"super_deluxe",label:"Super Deluxe",category:"Premium",description:"Fewer stops, 2+2 cushioned seats, Non-AC, long routes"},{value:"deluxe_express",label:"Deluxe Express / FP Deluxe",category:"Premium",description:"Fast Passenger Deluxe, 2+2 pushback seats, intercity routes"},{value:"ananthapuri_fast",label:"Ananthapuri (Fast / Superfast / Deluxe)",category:"Standard",description:"Special Trivandrum-based branded service"},{value:"rajadhani",label:"Rajadhani",category:"Luxury",description:"AC long-distance service with premium comfort"},{value:"minnal",label:"Minnal",category:"Premium",description:"Overnight services, AC/Non-AC semi-sleeper, night journeys"},{value:"garuda_king_long",label:"Garuda King Long",category:"Luxury",description:"AC semi-sleeper, premium interstate service"},{value:"garuda_volvo",label:"Garuda Volvo",category:"Luxury",description:"AC luxury Volvo, pushback, curtains, charging ports"},{value:"garuda_scania",label:"Garuda Scania",category:"Luxury",description:"AC luxury Scania, premium interstate service"},{value:"garuda_maharaja",label:"Garuda Maharaja",category:"Super Luxury",description:"Premium long-distance, AC pushback, large leg space"},{value:"low_floor_non_ac",label:"Low Floor Non-AC",category:"Standard",description:"Modern city service, wide doors, GPS-enabled"},{value:"low_floor_ac",label:"Low Floor AC (Volvo)",category:"Premium",description:"Volvo AC city service, Trivandrum/Kochi"},{value:"jnnurm_city",label:"JNNURM / City Circular",category:"Budget",description:"Special city buses, funded under JNNURM scheme"},{value:"custom",label:"Custom Bus Type",category:"Custom",description:"Define your own bus specifications"}];return(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,cs.jsxs)("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[(0,cs.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Edit Bus - ",b.busNumber]}),(0,cs.jsx)("button",{onClick:v,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,cs.jsx)(bh,{className:"w-5 h-5"})})]}),(0,cs.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};N.busNumber.trim()||(e.busNumber="Bus number is required"),N.registrationNumber.trim()||(e.registrationNumber="Registration number is required"),N.depotId||(e.depotId="Depot selection is required"),(!N.capacity.total||N.capacity.total<=0)&&(e.capacityTotal="Total capacity must be greater than 0"),(!N.manufacturingYear||N.manufacturingYear<1900)&&(e.manufacturingYear="Valid manufacturing year is required");const{total:t,seater:s,sleeper:r,ladies:a,disabled:n}=N.capacity;return s+r>t&&(e.capacityBreakdown="Seater + Sleeper cannot exceed total capacity"),R(e),0===Object.keys(e).length})()){E(!0);try{const e=(0,Ie.A)((0,Ie.A)({},N),{},{capacity:(0,Ie.A)((0,Ie.A)({},N.capacity),{},{total:parseInt(N.capacity.total),seater:parseInt(N.capacity.seater)||0,sleeper:parseInt(N.capacity.sleeper)||0,ladies:parseInt(N.capacity.ladies)||0,disabled:parseInt(N.capacity.disabled)||0}),manufacturingYear:parseInt(N.manufacturingYear),odometerReading:parseInt(N.odometerReading)||0,assignedDriver:N.assignedDriver||void 0,assignedConductor:N.assignedConductor||void 0});await j(e)}catch(t){console.error("Error saving bus:",t),Oe.oR.error("Failed to save bus")}finally{E(!1)}}else Oe.oR.error("Please fix the errors before submitting")},className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bus Number *"}),(0,cs.jsx)("input",{type:"text",value:N.busNumber,onChange:e=>w((0,Ie.A)((0,Ie.A)({},N),{},{busNumber:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(O.busNumber?"border-red-500":"border-gray-300"),placeholder:"e.g., KA01AB1234"}),O.busNumber&&(0,cs.jsx)("p",{className:"text-red-500 text-xs mt-1",children:O.busNumber})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Registration Number *"}),(0,cs.jsx)("input",{type:"text",value:N.registrationNumber,onChange:e=>w((0,Ie.A)((0,Ie.A)({},N),{},{registrationNumber:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(O.registrationNumber?"border-red-500":"border-gray-300"),placeholder:"e.g., KA01AB1234"}),O.registrationNumber&&(0,cs.jsx)("p",{className:"text-red-500 text-xs mt-1",children:O.registrationNumber})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bus Type *"}),(0,cs.jsx)("select",{value:N.busType,onChange:e=>w((0,Ie.A)((0,Ie.A)({},N),{},{busType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:U.map(e=>(0,cs.jsxs)("option",{value:e.value,children:[e.label," - ",e.category]},e.value))}),N.busType&&"custom"!==N.busType&&(0,cs.jsx)("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg border border-blue-200",children:(0,cs.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,cs.jsx)("span",{className:"font-medium",children:null===(f=U.find(e=>e.value===N.busType))||void 0===f?void 0:f.label}),(0,cs.jsx)("br",{}),(0,cs.jsx)("span",{className:"text-blue-600",children:null===(y=U.find(e=>e.value===N.busType))||void 0===y?void 0:y.description})]})})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),(0,cs.jsx)("select",{value:N.status,onChange:e=>w((0,Ie.A)((0,Ie.A)({},N),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{value:"active",label:"Active"},{value:"maintenance",label:"Maintenance"},{value:"inactive",label:"Inactive"},{value:"retired",label:"Retired"}].map(e=>(0,cs.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot *"}),(0,cs.jsxs)("select",{value:N.depotId,onChange:e=>w((0,Ie.A)((0,Ie.A)({},N),{},{depotId:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(O.depotId?"border-red-500":"border-gray-300"),disabled:D,children:[(0,cs.jsx)("option",{value:"",children:"Select Depot"}),_.map(e=>(0,cs.jsxs)("option",{value:e._id,children:[e.depotName," (",e.depotCode,")"]},e._id))]}),O.depotId&&(0,cs.jsx)("p",{className:"text-red-500 text-xs mt-1",children:O.depotId})]}),(0,cs.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Capacity Information"}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Capacity *"}),(0,cs.jsx)("input",{type:"number",value:N.capacity.total,onChange:e=>w((0,Ie.A)((0,Ie.A)({},N),{},{capacity:(0,Ie.A)((0,Ie.A)({},N.capacity),{},{total:e.target.value})})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(O.capacityTotal?"border-red-500":"border-gray-300"),min:"1"}),O.capacityTotal&&(0,cs.jsx)("p",{className:"text-red-500 text-xs mt-1",children:O.capacityTotal})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seater"}),(0,cs.jsx)("input",{type:"number",value:N.capacity.seater,onChange:e=>w((0,Ie.A)((0,Ie.A)({},N),{},{capacity:(0,Ie.A)((0,Ie.A)({},N.capacity),{},{seater:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sleeper"}),(0,cs.jsx)("input",{type:"number",value:N.capacity.sleeper,onChange:e=>w((0,Ie.A)((0,Ie.A)({},N),{},{capacity:(0,Ie.A)((0,Ie.A)({},N.capacity),{},{sleeper:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ladies"}),(0,cs.jsx)("input",{type:"number",value:N.capacity.ladies,onChange:e=>w((0,Ie.A)((0,Ie.A)({},N),{},{capacity:(0,Ie.A)((0,Ie.A)({},N.capacity),{},{ladies:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Disabled"}),(0,cs.jsx)("input",{type:"number",value:N.capacity.disabled,onChange:e=>w((0,Ie.A)((0,Ie.A)({},N),{},{capacity:(0,Ie.A)((0,Ie.A)({},N.capacity),{},{disabled:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]}),O.capacityBreakdown&&(0,cs.jsx)("p",{className:"text-red-500 text-xs mt-2",children:O.capacityBreakdown})]}),(0,cs.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Staff Assignment"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned Driver"}),(0,cs.jsxs)("select",{value:N.assignedDriver||"",onChange:e=>w((0,Ie.A)((0,Ie.A)({},N),{},{assignedDriver:e.target.value||null})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:D,children:[(0,cs.jsx)("option",{value:"",children:"Select Driver"}),Array.isArray(k)&&k.map(e=>{var t;return(0,cs.jsxs)("option",{value:e._id,children:[e.name," (",e.driverId,") - ",(null===(t=e.drivingLicense)||void 0===t?void 0:t.licenseType)||"N/A"]},e._id)})]}),D&&(0,cs.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Loading drivers..."})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned Conductor"}),(0,cs.jsxs)("select",{value:N.assignedConductor||"",onChange:e=>w((0,Ie.A)((0,Ie.A)({},N),{},{assignedConductor:e.target.value||null})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:D,children:[(0,cs.jsx)("option",{value:"",children:"Select Conductor"}),Array.isArray(S)&&S.map(e=>(0,cs.jsxs)("option",{value:e._id,children:[e.name," (",e.conductorId,") - ",e.badgeNumber||"N/A"]},e._id))]}),D&&(0,cs.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Loading conductors..."})]})]})]}),(0,cs.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Vehicle Details"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Manufacturer"}),(0,cs.jsx)("input",{type:"text",value:N.manufacturer,onChange:e=>w((0,Ie.A)((0,Ie.A)({},N),{},{manufacturer:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Tata, Ashok Leyland"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model"}),(0,cs.jsx)("input",{type:"text",value:N.model,onChange:e=>w((0,Ie.A)((0,Ie.A)({},N),{},{model:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Starbus, Ultra"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Manufacturing Year *"}),(0,cs.jsx)("input",{type:"number",value:N.manufacturingYear,onChange:e=>w((0,Ie.A)((0,Ie.A)({},N),{},{manufacturingYear:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(O.manufacturingYear?"border-red-500":"border-gray-300"),min:"1900",max:(new Date).getFullYear()+1}),O.manufacturingYear&&(0,cs.jsx)("p",{className:"text-red-500 text-xs mt-1",children:O.manufacturingYear})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuel Type"}),(0,cs.jsx)("select",{value:N.fuelType,onChange:e=>w((0,Ie.A)((0,Ie.A)({},N),{},{fuelType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{value:"diesel",label:"Diesel"},{value:"petrol",label:"Petrol"},{value:"cng",label:"CNG"},{value:"electric",label:"Electric"},{value:"hybrid",label:"Hybrid"}].map(e=>(0,cs.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Odometer Reading"}),(0,cs.jsx)("input",{type:"number",value:N.odometerReading,onChange:e=>w((0,Ie.A)((0,Ie.A)({},N),{},{odometerReading:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]})]}),(0,cs.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Bus Image"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("div",{className:"flex-1",children:(0,cs.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){L(t);const e=new FileReader;e.onloadend=()=>{B(e.result)},e.readAsDataURL(t)}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}),F&&(0,cs.jsx)("div",{className:"w-20 h-20 rounded-lg overflow-hidden border",children:(0,cs.jsx)("img",{src:F,alt:"Preview",className:"w-full h-full object-cover"})})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,cs.jsx)("textarea",{value:N.notes,onChange:e=>w((0,Ie.A)((0,Ie.A)({},N),{},{notes:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Additional notes about the bus..."})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t",children:[(0,cs.jsx)("button",{type:"button",onClick:v,className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",disabled:P,children:"Cancel"}),(0,cs.jsxs)("button",{type:"submit",disabled:P||D,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[P&&(0,cs.jsx)(wu.A,{className:"w-4 h-4 animate-spin"}),(0,cs.jsx)("span",{children:P?"Updating...":"Update Bus"})]})]})]})]})})},sV=e=>{var t,s,a,n,i,o,l,c;let{buses:d,tracking:u,selectedBus:h,onBusSelect:m,routes:p}=e;const[x,g]=(0,r.useState)([19.076,72.8777]),[f,y]=(0,r.useState)(10),[b,v]=(0,r.useState)("all"),[j,N]=(0,r.useState)(""),[w,k]=(0,r.useState)(5e3),A=e=>{const t={active:"#10B981",maintenance:"#F59E0B",inactive:"#EF4444",retired:"#6B7280"};return t[e.status]||t.active},S=(()=>{switch(b){case"selected":return h?[h]:[];case"route":return j?d.filter(e=>{var t;return(null===(t=e.assignedRoute)||void 0===t?void 0:t._id)===j}):[];default:return d}})();return(0,cs.jsxs)("div",{className:"h-full flex flex-col",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4 p-4 bg-gray-50 rounded-lg",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(YM,{className:"w-5 h-5 text-blue-600"}),(0,cs.jsx)("span",{className:"font-medium text-gray-900",children:"Live Tracking"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,cs.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,cs.jsx)("span",{className:"text-sm text-green-600",children:"Live"})]})]}),(0,cs.jsxs)("select",{value:b,onChange:e=>v(e.target.value),className:"px-3 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"all",children:"Track All Buses"}),(0,cs.jsx)("option",{value:"selected",children:"Track Selected Bus"}),(0,cs.jsx)("option",{value:"route",children:"Track Route Buses"})]}),"route"===b&&(0,cs.jsxs)("select",{value:j,onChange:e=>N(e.target.value),className:"px-3 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"",children:"Select Route"}),p.map(e=>(0,cs.jsxs)("option",{value:e._id,children:[e.routeNumber," - ",e.routeName]},e._id))]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Refresh:"}),(0,cs.jsxs)("select",{value:w,onChange:e=>k(Number(e.target.value)),className:"px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:2e3,children:"2s"}),(0,cs.jsx)("option",{value:5e3,children:"5s"}),(0,cs.jsx)("option",{value:1e4,children:"10s"}),(0,cs.jsx)("option",{value:3e4,children:"30s"})]}),(0,cs.jsxs)("span",{className:"text-sm text-gray-500",children:["Tracking ",S.length," buses"]})]})]}),(0,cs.jsxs)("div",{className:"flex-1 relative bg-gray-100 rounded-lg overflow-hidden",children:[(0,cs.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)(WM,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-500 text-lg font-medium mb-2",children:"Interactive Map"}),(0,cs.jsx)("p",{className:"text-gray-400 text-sm",children:"Real-time bus tracking would be displayed here"}),(0,cs.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:["Center: [",x[0].toFixed(4),", ",x[1].toFixed(4),"] | Zoom: ",f]})]})}),(0,cs.jsxs)("div",{className:"absolute top-4 left-4 bg-white rounded-lg shadow-lg p-4 max-w-sm",children:[(0,cs.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Bus Status"}),(0,cs.jsxs)("div",{className:"space-y-2",children:[S.slice(0,5).map(e=>{var t,s;return(0,cs.jsxs)("div",{className:"flex items-center justify-between p-2 rounded cursor-pointer transition-colors ".concat((null===h||void 0===h?void 0:h._id)===e._id?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"),onClick:()=>m(e),children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:A(e)}}),(0,cs.jsx)("span",{className:"text-sm font-medium",children:e.busNumber})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsxs)("div",{className:"text-xs text-gray-500",children:[(null===(t=u[e._id])||void 0===t?void 0:t.speed)||0," km/h"]}),(0,cs.jsx)("div",{className:"text-xs text-gray-400",children:null!==(s=u[e._id])&&void 0!==s&&s.lastUpdate?new Date(u[e._id].lastUpdate).toLocaleTimeString():"No data"})]})]},e._id)}),S.length>5&&(0,cs.jsxs)("div",{className:"text-xs text-gray-500 text-center pt-2",children:["+",S.length-5," more buses"]})]})]}),(0,cs.jsxs)("div",{className:"absolute bottom-4 right-4 bg-white rounded-lg shadow-lg p-4",children:[(0,cs.jsx)("h4",{className:"font-medium text-gray-900 mb-2 text-sm",children:"Status Legend"}),(0,cs.jsxs)("div",{className:"space-y-1",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,cs.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,cs.jsx)("span",{children:"Active"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,cs.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),(0,cs.jsx)("span",{children:"Maintenance"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,cs.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,cs.jsx)("span",{children:"Inactive"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,cs.jsx)("div",{className:"w-3 h-3 bg-gray-500 rounded-full"}),(0,cs.jsx)("span",{children:"Retired"})]})]})]})]}),h&&(0,cs.jsxs)("div",{className:"mt-4 bg-white border rounded-lg p-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,cs.jsxs)("h4",{className:"font-medium text-gray-900",children:["Bus Details - ",h.busNumber]}),(0,cs.jsx)("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-gray-600",children:(0,cs.jsx)(bh,{className:"w-5 h-5"})})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-gray-500",children:"Status:"}),(0,cs.jsx)("div",{className:"font-medium capitalize",children:h.status})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-gray-500",children:"Route:"}),(0,cs.jsx)("div",{className:"font-medium",children:(null===(t=h.assignedRoute)||void 0===t?void 0:t.routeName)||"Not assigned"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-gray-500",children:"Speed:"}),(0,cs.jsxs)("div",{className:"font-medium",children:[(null===(s=u[h._id])||void 0===s?void 0:s.speed)||0," km/h"]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-gray-500",children:"Fuel:"}),(0,cs.jsxs)("div",{className:"font-medium",children:[(null===(a=u[h._id])||void 0===a?void 0:a.fuelLevel)||0,"%"]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-gray-500",children:"Occupancy:"}),(0,cs.jsxs)("div",{className:"font-medium",children:[(null===(n=u[h._id])||void 0===n?void 0:n.occupancy)||0,"/",(null===(i=h.capacity)||void 0===i?void 0:i.total)||0]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-gray-500",children:"Driver:"}),(0,cs.jsx)("div",{className:"font-medium",children:(null===(o=h.assignedDriver)||void 0===o?void 0:o.name)||"Not assigned"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-gray-500",children:"Conductor:"}),(0,cs.jsx)("div",{className:"font-medium",children:(null===(l=h.assignedConductor)||void 0===l?void 0:l.name)||"Not assigned"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-gray-500",children:"Last Update:"}),(0,cs.jsx)("div",{className:"font-medium text-xs",children:null!==(c=u[h._id])&&void 0!==c&&c.lastUpdate?new Date(u[h._id].lastUpdate).toLocaleTimeString():"No data"})]})]})]})]})},rV=e=>{let{bus:t,onClose:s,onSave:a}=e;const[n,i]=(0,r.useState)({issueType:"",description:"",priority:"medium",scheduledDate:"",estimatedCost:0,assignedTechnician:"",notes:""}),[o,l]=(0,r.useState)(!1);return(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,cs.jsxs)("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[(0,cs.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Schedule Maintenance - ",t.busNumber]}),(0,cs.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,cs.jsx)(bh,{className:"w-5 h-5"})})]}),(0,cs.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(!0);try{await a((0,Ie.A)((0,Ie.A)({},n),{},{estimatedCost:parseFloat(n.estimatedCost)||0}))}catch(t){console.error("Error scheduling maintenance:",t)}finally{l(!1)}},className:"p-6 space-y-4",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Issue Type *"}),(0,cs.jsxs)("select",{value:n.issueType,onChange:e=>i((0,Ie.A)((0,Ie.A)({},n),{},{issueType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,cs.jsx)("option",{value:"",children:"Select Issue Type"}),["Engine Service","Brake System","Transmission","Electrical","Air Conditioning","Tyre Replacement","Body Work","Fuel System","Suspension","General Service"].map(e=>(0,cs.jsx)("option",{value:e,children:e},e))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority *"}),(0,cs.jsx)("select",{value:n.priority,onChange:e=>i((0,Ie.A)((0,Ie.A)({},n),{},{priority:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[{value:"low",label:"Low",color:"text-green-600"},{value:"medium",label:"Medium",color:"text-yellow-600"},{value:"high",label:"High",color:"text-red-600"},{value:"critical",label:"Critical",color:"text-red-800"}].map(e=>(0,cs.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scheduled Date *"}),(0,cs.jsx)("input",{type:"datetime-local",value:n.scheduledDate,onChange:e=>i((0,Ie.A)((0,Ie.A)({},n),{},{scheduledDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Cost (\u20b9)"}),(0,cs.jsx)("input",{type:"number",value:n.estimatedCost,onChange:e=>i((0,Ie.A)((0,Ie.A)({},n),{},{estimatedCost:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,cs.jsx)("textarea",{value:n.description,onChange:e=>i((0,Ie.A)((0,Ie.A)({},n),{},{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Describe the maintenance issue or service required...",required:!0})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned Technician"}),(0,cs.jsx)("input",{type:"text",value:n.assignedTechnician,onChange:e=>i((0,Ie.A)((0,Ie.A)({},n),{},{assignedTechnician:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Technician name or ID"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),(0,cs.jsx)("textarea",{value:n.notes,onChange:e=>i((0,Ie.A)((0,Ie.A)({},n),{},{notes:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"Additional notes or instructions..."})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t",children:[(0,cs.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",disabled:o,children:"Cancel"}),(0,cs.jsxs)("button",{type:"submit",disabled:o,className:"px-6 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[o&&(0,cs.jsx)(wu.A,{className:"w-4 h-4 animate-spin"}),(0,cs.jsx)("span",{children:o?"Scheduling...":"Schedule Maintenance"})]})]})]})]})})},aV=e=>{let{logs:t,onClose:s}=e;return(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,cs.jsxs)("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[(0,cs.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Maintenance History"}),(0,cs.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,cs.jsx)(bh,{className:"w-5 h-5"})})]}),(0,cs.jsx)("div",{className:"p-6",children:0===t.length?(0,cs.jsxs)("div",{className:"text-center py-8",children:[(0,cs.jsx)(Lm.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-500",children:"No maintenance records found"})]}):(0,cs.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>{var s;return(0,cs.jsx)("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:(0,cs.jsxs)("div",{className:"flex items-start justify-between",children:[(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,cs.jsx)("h4",{className:"font-medium text-gray-900",children:e.issueType}),(0,cs.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("completed"===e.status?"bg-green-100 text-green-800":"in-progress"===e.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:e.status}),(0,cs.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("critical"===e.priority?"bg-red-100 text-red-800":"high"===e.priority?"bg-orange-100 text-orange-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.priority})]}),(0,cs.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:e.description}),(0,cs.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,cs.jsxs)("span",{children:["Reported: ",new Date(e.reportedAt).toLocaleDateString()]}),e.resolvedAt&&(0,cs.jsxs)("span",{children:["Resolved: ",new Date(e.resolvedAt).toLocaleDateString()]}),e.assignedTechnician&&(0,cs.jsxs)("span",{children:["Technician: ",e.assignedTechnician]})]})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsxs)("div",{className:"text-lg font-semibold text-gray-900",children:["\u20b9",(null===(s=e.cost)||void 0===s?void 0:s.toLocaleString())||0]}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:"Cost"})]})]})},t)})})})]})})},nV=()=>(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,cs.jsx)("div",{className:"lg:col-span-3 grid grid-cols-1 md:grid-cols-4 gap-4",children:[...Array(4)].map((e,t)=>(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 animate-pulse",children:[(0,cs.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),(0,cs.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-2"}),(0,cs.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/4"})]},t))}),(0,cs.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-lg p-6 animate-pulse",children:[(0,cs.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),(0,cs.jsx)("div",{className:"h-96 bg-gray-200 rounded"})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 animate-pulse",children:[(0,cs.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),(0,cs.jsx)("div",{className:"space-y-3",children:[...Array(5)].map((e,t)=>(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full"}),(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsx)("div",{className:"h-3 bg-gray-200 rounded w-3/4 mb-1"}),(0,cs.jsx)("div",{className:"h-2 bg-gray-200 rounded w-1/2"})]})]},t))})]})]}),iV=()=>(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[...Array(8)].map((e,t)=>(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-4 animate-pulse",children:[(0,cs.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-3"}),(0,cs.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-2"}),(0,cs.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/4"})]},t))}),oV=()=>(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 animate-pulse",children:[(0,cs.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),(0,cs.jsx)("div",{className:"h-96 bg-gray-200 rounded"})]}),lV=()=>(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((e,t)=>(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 animate-pulse",children:[(0,cs.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),(0,cs.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-2"}),(0,cs.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/4"})]},t))}),(0,cs.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[...Array(4)].map((e,t)=>(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 animate-pulse",children:[(0,cs.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),(0,cs.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]},t))})]}),cV=()=>{const[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0),[n,i]=(0,r.useState)(""),[o,l]=(0,r.useState)({status:"all",depot:"all",busType:"all",fuelType:"all",page:1,limit:20,sortBy:"busNumber",sortOrder:"asc"}),[c,d]=(0,r.useState)(0),[u,h]=(0,r.useState)({page:1,limit:20,total:0,pages:0}),[m,p]=(0,r.useState)("dashboard"),[x,g]=(0,r.useState)(null),[f,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)([]),[A,S]=(0,r.useState)(!1),[C,_]=(0,r.useState)(!1),[T,P]=(0,r.useState)(null),[E,D]=(0,r.useState)(!1),[M,O]=(0,r.useState)([]),[R,I]=(0,r.useState)(""),[L,F]=(0,r.useState)(null),[B,z]=(0,r.useState)(!1),[U,V]=(0,r.useState)(null),[K,W]=(0,r.useState)([]),[H,q]=(0,r.useState)(!1),[G,Y]=(0,r.useState)(!1),[$,J]=(0,r.useState)([]),{location:Q,error:X}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,s]=(0,r.useState)({loaded:!1,coordinates:{lat:null,lng:null},error:null}),a=e=>{s({loaded:!0,coordinates:{lat:e.coords.latitude,lng:e.coords.longitude},error:null})},n=e=>{s({loaded:!0,coordinates:{lat:null,lng:null},error:e})};return(0,r.useEffect)(()=>{if(!("geolocation"in navigator))return void n({code:0,message:"Geolocation not supported"});const t=navigator.geolocation.watchPosition(a,n,(0,Ie.A)({enableHighAccuracy:!0,timeout:5e3,maximumAge:0},e));return()=>{navigator.geolocation.clearWatch(t)}},[e]),t}(),{subscribe:Z,sendNotification:ee}=(()=>{const[e,t]=(0,r.useState)(Notification.permission),[s,a]=(0,r.useState)([]);(0,r.useEffect)(()=>{"Notification"in window&&"default"===e&&Notification.requestPermission().then(t)},[e]);const n=(0,r.useCallback)(t=>{if("Notification"in window){if("granted"===e){const e=new Notification(t.title||"Bus Management Alert",{body:t.message||"",icon:t.icon||"/bus-icon.png",badge:t.badge||"/badge-icon.png",tag:t.tag||"bus-alert",requireInteraction:t.requireInteraction||!1,silent:t.silent||!1,vibrate:t.vibrate||[200,100,200],data:t.data||{}});return e.onclick=s=>{s.preventDefault(),window.focus(),t.onClick&&t.onClick(s),e.close()},a(t=>[...t,{notification:e,timestamp:new Date}]),t.requireInteraction||setTimeout(()=>e.close(),5e3),e}}else console.log("This browser does not support notifications")},[e]),i=(0,r.useCallback)(async()=>{if("Notification"in window&&"granted"!==e){const e=await Notification.requestPermission();return t(e),"granted"===e}return"granted"===e},[e]),o=(0,r.useCallback)(()=>{s.forEach(e=>{let{notification:t}=e;return t.close()}),a([])},[s]);return{permission:e,notifications:s,sendNotification:n,subscribe:i,clearNotifications:o}})(),te=Op("http://localhost:5000"),[se,re]=(0,r.useState)({totalBuses:0,activeBuses:0,maintenanceBuses:0,fuelEfficiency:0,utilizationRate:0,predictiveMaintenance:[],routeOptimization:[]}),[ae,ne]=(0,r.useState)({}),[ie,oe]=(0,r.useState)([]),[le,ce]=(0,r.useState)({recommendations:[],predictions:[],anomalies:[]});(0,r.useEffect)(()=>(te&&(te.on("bus-update",e=>{ge(e)}),te.on("alert",e=>{oe(t=>[e,...t].slice(0,10)),ee(e)}),te.on("tracking-update",e=>{ne(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e.busId]:e}))})),()=>{te&&(te.off("bus-update"),te.off("alert"),te.off("tracking-update"))}),[te]),(0,r.useEffect)(()=>{if(!localStorage.getItem("token")){const e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2OGFhYTI2NDU2YTdmMWFlMDJjMjMxNjYiLCJyb2xlIjoiYWRtaW4iLCJlbWFpbCI6ImFkbWluQHlhdHJpay5jb20iLCJpYXQiOjE3NTcxNDA4NzMsImV4cCI6MTc1NzIyNzI3M30.QfXqzGItmAISrftw8SVvZYntvZ8npNJdz-AVyQBfCmo";localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify({_id:"68aaa26456a7f1ae02c23166",name:"Admin User",email:"admin@yatrik.com",role:"admin"})),console.log("\u2705 Admin token set for testing")}de();const e=setInterval(de,3e4);return()=>clearInterval(e)},[o]);const de=async()=>{a(!0);try{await Promise.all([he(),me(),pe(),ue()])}catch(e){console.error("Error fetching data:",e),Oe.oR.error("Failed to fetch data")}finally{a(!1)}},ue=async()=>{try{const t=await(0,xs.nr)("/api/admin/routes");var e;if(t.ok)O((null===(e=t.data)||void 0===e?void 0:e.routes)||t.data||[])}catch(t){console.error("Error fetching routes:",t)}},he=async()=>{try{const e=(0,Ie.A)((0,Ie.A)({},o),{},{depotId:"all"!==o.depot?o.depot:void 0,search:n});Object.keys(e).forEach(t=>{"all"!==e[t]&&void 0!==e[t]||delete e[t]});const s=new URLSearchParams(e).toString();console.log("\ud83d\udd0d Fetching buses with params:",s),console.log("\ud83d\udd0d Current filters:",o),console.log("\ud83d\udd0d Search term:",n),console.log("\ud83d\udd0d API params object:",e);const r=await(0,xs.nr)("/api/admin/buses?".concat(s));if(console.log("\ud83d\udce1 Buses API response:",r),console.log("\ud83d\udce1 Response status:",r.status),console.log("\ud83d\udce1 Response ok:",r.ok),r.ok){const e=r.data||{};console.log("\ud83d\udce6 Raw API data:",e);const s=xe(e);if(console.log("\ud83d\udd04 Normalized buses:",s),console.log("\ud83d\udd04 Number of buses found:",s.length),t(s),e.pagination)console.log("\ud83d\udcc4 Pagination info:",e.pagination),h(e.pagination),d(e.pagination.total);else{const t=Array.isArray(e.buses)?e.buses.length:Array.isArray(e)?e.length:0;console.log("\ud83d\udcc4 Total buses count:",t),d(t)}}else console.error("\u274c API request failed:",r.message)}catch(e){console.error("\u274c Error fetching buses:",e)}},me=async()=>{try{const e=await(0,xs.nr)("/api/admin/buses/analytics");re(e)}catch(e){console.error("Error fetching analytics:",e)}},pe=async()=>{try{const e=await(0,xs.nr)("/api/admin/buses/ai-insights");ce(e)}catch(e){console.error("Error fetching AI insights:",e)}},xe=e=>{var t;return null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.buses?e.data.buses:null!==e&&void 0!==e&&e.buses?e.buses:Array.isArray(e)?e:[]},ge=e=>{t(t=>t.map(t=>t._id===e._id?(0,Ie.A)((0,Ie.A)({},t),e):t))},fe=(0,r.useMemo)(()=>Array.isArray(e)?e.filter(e=>{var t,s;if(!e||"object"!==typeof e)return!1;const r=(null===(t=e.busNumber)||void 0===t?void 0:t.toLowerCase().includes(n.toLowerCase()))||(null===(s=e.registrationNumber)||void 0===s?void 0:s.toLowerCase().includes(n.toLowerCase()))||!1,a="all"===o.status||e.status===o.status,i="all"===o.depot||e.depotId===o.depot,l="all"===o.busType||e.busType===o.busType;return r&&a&&i&&l}):[],[e,n,o]),ye=e=>{g(e),v(!0)},be=(0,$M.ws)(async e=>{const t=await(0,xs.nr)("/api/admin/buses/".concat(x._id),{method:"PUT",body:JSON.stringify(e)});if(t.ok)return(0,xs.I3)(),v(!1),g(null),de(),t;throw new Error(t.message||"Failed to update bus")}),ve=e=>{P(e),_(!0)},je=e=>{k(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},Ne=e=>{var t;F(e),I((null===(t=e.assignedRoute)||void 0===t?void 0:t._id)||""),D(!0)},we=async e=>{try{await(0,xs.nr)("/api/admin/buses/".concat(e._id),{method:"PUT",body:JSON.stringify({assignedRoute:null})}),Oe.oR.success("Bus unassigned from route"),(0,xs.I3)(),de()}catch(t){Oe.oR.error("Failed to unassign bus from route")}},ke=async t=>{try{const s=e.find(e=>e._id===t);if(!s||!s.depotId)return void Oe.oR.error("Bus depot not found");const r=s.depotId._id||s.depotId;(await(0,xs.nr)("/api/staff/auto-assign/".concat(r),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({busIds:[t],forceReassign:!1})})).success?(Oe.oR.success("Staff assigned successfully"),(0,xs.I3)(),de()):Oe.oR.error("Failed to assign staff")}catch(s){Oe.oR.error("Failed to assign staff")}},Ae=async e=>{try{(await(0,xs.nr)("/api/staff/unassign/".concat(e),{method:"POST"})).success?(Oe.oR.success("Staff unassigned successfully"),(0,xs.I3)(),de()):Oe.oR.error("Failed to unassign staff")}catch(t){Oe.oR.error("Failed to unassign staff")}},Se=e=>{V(e),z(!0)},Ce=async e=>{try{const t=await(0,xs.nr)("/api/admin/buses/".concat(e,"/maintenance"));t.ok&&(W(t.data||[]),q(!0))}catch(t){Oe.oR.error("Failed to fetch maintenance history")}},_e=async e=>{try{await(0,xs.nr)("/api/admin/buses/".concat(e._id),{method:"PUT",body:JSON.stringify({status:"active",lastMaintenance:(new Date).toISOString()})}),Oe.oR.success("Maintenance completed"),(0,xs.I3)(),de()}catch(t){Oe.oR.error("Failed to complete maintenance")}},Te=async e=>{try{const t=await(0,xs.nr)("/api/admin/buses/export/".concat(e));if(t.ok){const s=new Blob([t.data],{type:"pdf"===e?"application/pdf":"application/vnd.ms-excel"}),r=window.URL.createObjectURL(s),a=document.createElement("a");a.href=r,a.download="bus-report-".concat((new Date).toISOString().split("T")[0],".").concat(e),document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(r),document.body.removeChild(a),Oe.oR.success("".concat(e.toUpperCase()," report exported successfully"))}}catch(t){Oe.oR.error("Failed to export report")}},Pe=(0,$M.ws)(async e=>{console.log("\ud83d\ude8c Adding bus with data:",e);const t=await(0,xs.nr)("/api/admin/buses",{method:"POST",body:JSON.stringify(e)});if(console.log("\ud83d\udce1 Add bus response:",t),console.log("\ud83d\udce1 Response status:",t.status),console.log("\ud83d\udce1 Response ok:",t.ok),t.ok)return console.log("\u2705 Bus added successfully, clearing cache and refreshing data..."),(0,xs.I3)(),console.log("\ud83d\uddd1\ufe0f Cache cleared"),y(!1),console.log("\ud83d\udd04 Starting data refresh..."),await de(),console.log("\u2705 Data refresh completed"),t;throw console.error("\u274c Bus creation failed:",t.message),new Error(t.message||"Failed to add bus")});return(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsx)("div",{className:"bg-red-100 border-2 border-red-300 rounded-lg p-4 text-center",children:(0,cs.jsx)("button",{onClick:()=>{alert("TEST: Bus Types button clicked!"),console.log("TEST: Bus Types button clicked!"),Y(!0)},className:"px-8 py-4 bg-red-500 text-white rounded-lg hover:bg-red-600 text-lg font-bold",children:"\ud83d\ude8c TEST: BUS TYPES BUTTON - CLICK ME!"})}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Bus Fleet Management"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Manage your entire bus fleet with real-time tracking and analytics"})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Current View"}),(0,cs.jsxs)("div",{className:"text-lg font-semibold text-blue-600 capitalize",children:["dashboard"===m&&"\ud83d\udcca Dashboard Overview","grid"===m&&"\ud83d\udccb Bus List View","map"===m&&"\ud83d\uddfa\ufe0f Live Tracking Map","analytics"===m&&"\ud83d\udcc8 Performance Analytics"]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-3",children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Switch View:"}),(0,cs.jsx)("div",{className:"flex items-center gap-2 bg-gray-100 p-1 rounded-xl",children:[{key:"dashboard",label:"Dashboard",icon:"\ud83d\udcca",description:"Overview & Quick Actions"},{key:"grid",label:"Grid",icon:"\ud83d\udccb",description:"Detailed Bus List"},{key:"map",label:"Map",icon:"\ud83d\uddfa\ufe0f",description:"Live Bus Tracking"},{key:"analytics",label:"Analytics",icon:"\ud83d\udcc8",description:"Performance Insights"}].map(e=>(0,cs.jsxs)("button",{onClick:()=>p(e.key),className:"group flex items-center gap-2 px-4 py-3 rounded-lg font-medium transition-all duration-200 ".concat(m===e.key?"bg-white text-blue-600 shadow-md border border-blue-200 transform scale-105":"text-gray-600 hover:text-gray-900 hover:bg-white hover:shadow-sm"),title:e.description,children:[(0,cs.jsx)("span",{className:"text-lg",children:e.icon}),(0,cs.jsx)("span",{className:"text-sm font-semibold",children:e.label}),m===e.key&&(0,cs.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})]},e.key))})]})]}),(0,cs.jsx)("div",{className:"bg-white border rounded-lg shadow-sm",children:(0,cs.jsx)("div",{className:"p-4",children:(0,cs.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:["grid"===m&&(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("input",{type:"checkbox",checked:w.length===fe.length&&fe.length>0,onChange:()=>{w.length===fe.length?k([]):k(fe.map(e=>e._id))},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Select All"})]}),(0,cs.jsx)("div",{className:"flex-1 min-w-[300px]",children:(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(ys.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search buses...",value:n,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),(0,cs.jsxs)("select",{value:o.status,onChange:e=>l((0,Ie.A)((0,Ie.A)({},o),{},{status:e.target.value,page:1})),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"all",children:"All Status"}),(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,cs.jsx)("option",{value:"inactive",children:"Inactive"}),(0,cs.jsx)("option",{value:"retired",children:"Retired"})]}),(0,cs.jsxs)("select",{value:o.busType,onChange:e=>l((0,Ie.A)((0,Ie.A)({},o),{},{busType:e.target.value,page:1})),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"all",children:"All Types"}),(0,cs.jsx)("option",{value:"ac_sleeper",children:"AC Sleeper (35 seats)"}),(0,cs.jsx)("option",{value:"ac_seater",children:"AC Seater (45 seats)"}),(0,cs.jsx)("option",{value:"non_ac_sleeper",children:"Non-AC Sleeper (40 seats)"}),(0,cs.jsx)("option",{value:"non_ac_seater",children:"Non-AC Seater (50 seats)"}),(0,cs.jsx)("option",{value:"volvo",children:"Volvo Multi-Axle (30 seats)"}),(0,cs.jsx)("option",{value:"mini",children:"Mini Bus (25 seats)"})]}),(0,cs.jsxs)("select",{value:o.sortBy,onChange:e=>l((0,Ie.A)((0,Ie.A)({},o),{},{sortBy:e.target.value,page:1})),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"busNumber",children:"Bus Number"}),(0,cs.jsx)("option",{value:"status",children:"Status"}),(0,cs.jsx)("option",{value:"busType",children:"Type"}),(0,cs.jsx)("option",{value:"createdAt",children:"Created Date"})]}),(0,cs.jsxs)("button",{onClick:()=>l((0,Ie.A)((0,Ie.A)({},o),{},{sortOrder:"asc"===o.sortOrder?"desc":"asc",page:1})),className:"px-3 py-2 border rounded-lg hover:bg-gray-50 flex items-center gap-1",children:[(0,cs.jsx)(Kd.A,{className:"w-4 h-4"}),"asc"===o.sortOrder?"\u2191":"\u2193"]}),w.length>0&&(0,cs.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-50 rounded-lg border",children:[(0,cs.jsxs)("span",{className:"text-sm text-blue-700 font-medium",children:[w.length," selected"]}),(0,cs.jsx)("button",{onClick:async()=>{if(0!==w.length&&window.confirm("Are you sure you want to delete ".concat(w.length," buses?")))try{const e=await Promise.allSettled(w.map(e=>(0,xs.nr)("/api/admin/buses/".concat(e),{method:"DELETE"}))),t=e.filter(e=>"fulfilled"===e.status&&e.value.ok).length,s=e.length-t;t>0&&(0,$M.oc)("".concat(t," buses deleted successfully")),s>0&&(0,$M.Fq)("".concat(s," buses failed to delete")),k([]),(0,xs.I3)(),de()}catch(e){(0,$M.H4)(e)}},className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Delete"}),(0,cs.jsxs)("select",{onChange:e=>{e.target.value&&((async e=>{if(0!==w.length)try{const t=await Promise.allSettled(w.map(t=>(0,xs.nr)("/api/admin/buses/".concat(t),{method:"PUT",body:JSON.stringify({status:e})}))),s=t.filter(e=>"fulfilled"===e.status&&e.value.ok).length,r=t.length-s;s>0&&(0,$M.oc)("".concat(s," buses status updated to ").concat(e)),r>0&&(0,$M.Fq)("".concat(r," buses failed to update status")),k([]),(0,xs.I3)(),de()}catch(t){(0,$M.H4)(t)}})(e.target.value),e.target.value="")},className:"px-2 py-1 border rounded text-sm",children:[(0,cs.jsx)("option",{value:"",children:"Change Status"}),(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,cs.jsx)("option",{value:"inactive",children:"Inactive"}),(0,cs.jsx)("option",{value:"retired",children:"Retired"})]}),(0,cs.jsx)("button",{onClick:()=>k([]),className:"px-3 py-1 bg-gray-500 text-white rounded text-sm hover:bg-gray-600",children:"Clear"})]}),(0,cs.jsxs)("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,cs.jsx)(bu.A,{className:"w-5 h-5"}),"Add Bus"]}),(0,cs.jsxs)("button",{onClick:()=>N(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2",children:[(0,cs.jsx)(yh,{className:"w-5 h-5"}),"Scan QR"]}),(0,cs.jsxs)("button",{onClick:de,className:"px-4 py-2 border rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[(0,cs.jsx)(Od.A,{className:"w-5 h-5 ".concat(s?"animate-spin":"")}),"Refresh"]}),(0,cs.jsx)("button",{onClick:async()=>{console.log("\ud83e\uddea Testing API without filters...");const e=await(0,xs.nr)("/api/admin/buses");console.log("\ud83e\uddea Test API response:",e),e.ok&&console.log("\ud83e\uddea Test buses data:",e.data)},className:"px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 flex items-center gap-2",children:"\ud83e\uddea Test API"})]})})}),(0,cs.jsxs)("div",{className:"space-y-6",children:[s?(0,cs.jsxs)("div",{className:"space-y-6",children:["dashboard"===m&&(0,cs.jsx)(nV,{}),"grid"===m&&(0,cs.jsx)(iV,{}),"map"===m&&(0,cs.jsx)(oV,{}),"analytics"===m&&(0,cs.jsx)(lV,{})]}):(0,cs.jsxs)(cs.Fragment,{children:["dashboard"===m&&(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Welcome to Bus Fleet Management"}),(0,cs.jsx)("p",{className:"text-gray-600 mb-4",children:"Monitor your fleet performance, track buses in real-time, and manage operations efficiently."}),(0,cs.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,cs.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,cs.jsx)("span",{children:"System Online"})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,cs.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,cs.jsx)("span",{children:"Real-time Updates"})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,cs.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),(0,cs.jsx)("span",{children:"AI Analytics Ready"})]})]})]}),(0,cs.jsx)("div",{className:"hidden md:block",children:(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:se.totalBuses}),(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:"Total Buses"}),(0,cs.jsx)("div",{className:"text-lg font-semibold text-green-600",children:se.activeBuses}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:"Active Now"})]})})]})}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,cs.jsx)(QU,{title:"Total Fleet",value:se.totalBuses,icon:(0,cs.jsx)(ks.A,{className:"w-4 h-4"}),trend:5.2,color:"blue"}),(0,cs.jsx)(QU,{title:"Active Buses",value:se.activeBuses,icon:(0,cs.jsx)(Ds.A,{className:"w-4 h-4"}),trend:2.1,color:"green"}),(0,cs.jsx)(QU,{title:"Utilization Rate",value:"".concat(se.utilizationRate,"%"),icon:(0,cs.jsx)(xu.A,{className:"w-4 h-4"}),trend:3.5,color:"purple"}),(0,cs.jsx)(QU,{title:"Fuel Efficiency",value:"".concat(se.fuelEfficiency," km/l"),icon:(0,cs.jsx)(Fm,{className:"w-4 h-4"}),trend:-1.2,color:"orange"})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,cs.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,cs.jsx)(ks.A,{className:"w-4 h-4 text-blue-600"}),"Recent Buses"]}),(0,cs.jsxs)("button",{onClick:()=>p("grid"),className:"text-blue-600 hover:text-blue-700 text-xs font-medium flex items-center gap-1",children:["View All ",(0,cs.jsx)(em,{className:"w-3 h-3"})]})]}),(0,cs.jsxs)("div",{className:"space-y-2",children:[fe.slice(0,5).map(e=>{var t,s,r,a,n,i;return(0,cs.jsxs)("div",{className:"group bg-gray-50 rounded-lg p-3 hover:shadow-sm transition-all duration-200 border border-gray-200",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("div",{className:"p-1.5 bg-blue-500 rounded-lg text-white",children:(0,cs.jsx)(ks.A,{className:"w-3 h-3"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-sm font-bold text-gray-900",children:e.busNumber}),(0,cs.jsx)("p",{className:"text-xs text-gray-500 font-mono",children:e.registrationNumber})]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-800":"maintenance"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:(null===(t=e.status)||void 0===t?void 0:t.charAt(0).toUpperCase())+(null===(s=e.status)||void 0===s?void 0:s.slice(1))}),(0,cs.jsxs)("div",{className:"flex items-center gap-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,cs.jsx)("button",{onClick:()=>g(e),className:"p-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"View Details",children:(0,cs.jsx)(Nu.A,{className:"w-3 h-3"})}),(0,cs.jsx)("button",{onClick:()=>ye(e),className:"p-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",title:"Edit Bus",children:(0,cs.jsx)(Kh.A,{className:"w-3 h-3"})}),(0,cs.jsx)("button",{onClick:()=>ve(e),className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete Bus",children:(0,cs.jsx)(Wh.A,{className:"w-3 h-3"})})]})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-4 gap-2 mb-2",children:[(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"p-1 bg-blue-50 rounded mb-0.5",children:(0,cs.jsx)(Ss.A,{className:"w-3 h-3 text-blue-600 mx-auto"})}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Cap"}),(0,cs.jsx)("p",{className:"text-xs font-bold text-gray-900",children:(null===(r=e.capacity)||void 0===r?void 0:r.total)||0})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"p-1 bg-green-50 rounded mb-0.5",children:(0,cs.jsx)(Fm,{className:"w-3 h-3 text-green-600 mx-auto"})}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Fuel"}),(0,cs.jsxs)("p",{className:"text-xs font-bold text-gray-900",children:[(null===(a=e.fuel)||void 0===a?void 0:a.currentLevel)||0,"%"]})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"p-1 bg-purple-50 rounded mb-0.5",children:(0,cs.jsx)(gs.A,{className:"w-3 h-3 text-purple-600 mx-auto"})}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Depot"}),(0,cs.jsx)("p",{className:"text-xs font-medium text-gray-900 truncate",children:e.depotName||"Unknown"})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"p-1 bg-orange-50 rounded mb-0.5",children:(0,cs.jsx)(fs.A,{className:"w-3 h-3 text-orange-600 mx-auto"})}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Service"}),(0,cs.jsx)("p",{className:"text-xs font-medium text-gray-900",children:e.lastMaintenance?new Date(e.lastMaintenance).toLocaleDateString():"Never"})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-white rounded border border-gray-200",children:[(0,cs.jsx)("div",{className:"w-5 h-5 bg-green-100 rounded-full flex items-center justify-center",children:(0,cs.jsx)(Lh,{className:"w-3 h-3 text-green-600"})}),(0,cs.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Driver"}),(0,cs.jsx)("p",{className:"text-xs font-medium text-gray-900 truncate",children:(null===(n=e.assignedDriver)||void 0===n?void 0:n.name)||"Not Assigned"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-white rounded border border-gray-200",children:[(0,cs.jsx)("div",{className:"w-5 h-5 bg-purple-100 rounded-full flex items-center justify-center",children:(0,cs.jsx)(Ss.A,{className:"w-3 h-3 text-purple-600"})}),(0,cs.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Conductor"}),(0,cs.jsx)("p",{className:"text-xs font-medium text-gray-900 truncate",children:(null===(i=e.assignedConductor)||void 0===i?void 0:i.name)||"Not Assigned"})]})]})]})]},e._id)}),0===fe.length&&(0,cs.jsxs)("div",{className:"text-center py-8",children:[(0,cs.jsx)("div",{className:"p-3 bg-gray-100 rounded-full w-12 h-12 mx-auto mb-3",children:(0,cs.jsx)(ks.A,{className:"w-6 h-6 text-gray-400"})}),(0,cs.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No buses found"}),(0,cs.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Get started by adding your first bus"}),(0,cs.jsx)("button",{onClick:()=>y(!0),className:"px-3 py-1.5 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 transition-colors",children:"Add First Bus"})]})]})]}),(0,cs.jsx)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg shadow-sm p-4 border-2 border-indigo-200 mb-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("h3",{className:"text-lg font-semibold text-indigo-900 flex items-center gap-2 mb-1",children:[(0,cs.jsx)(KM,{className:"w-5 h-5 text-indigo-600"}),"KSRTC Bus Types Management"]}),(0,cs.jsx)("p",{className:"text-sm text-indigo-700",children:"Manage all 17 official KSRTC bus types and scheduling rules"})]}),(0,cs.jsxs)("button",{onClick:()=>{alert("Bus Types button clicked! Opening Enhanced Bus Type Manager..."),console.log("\ud83d\ude8c KSRTC Bus Types button clicked!"),Y(!0)},className:"px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg hover:from-indigo-600 hover:to-purple-600 transition-all duration-200 shadow-lg hover:shadow-xl flex items-center gap-3 text-base font-medium transform hover:scale-105",children:[(0,cs.jsx)(KM,{className:"w-5 h-5"}),"Manage Bus Types",(0,cs.jsx)("div",{className:"bg-red-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center font-bold",children:"NEW"})]})]})}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,cs.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,cs.jsx)(Os.A,{className:"w-4 h-4 text-gray-600"}),"Quick Actions"]}),(0,cs.jsxs)("button",{onClick:()=>{console.log("\ud83d\ude8c Standalone Bus Types button clicked!"),Y(!0)},className:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg hover:from-indigo-600 hover:to-purple-600 transition-all duration-200 shadow-md hover:shadow-lg flex items-center gap-2 text-sm font-medium",children:[(0,cs.jsx)(KM,{className:"w-4 h-4"}),"Bus Types",(0,cs.jsx)("div",{className:"bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center font-bold",children:"!"})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,cs.jsxs)("button",{onClick:()=>{console.log("\ud83d\ude8c Bus Types button clicked!"),Y(!0)},className:"group p-4 bg-gradient-to-br from-indigo-50 to-purple-50 hover:from-indigo-100 hover:to-purple-100 rounded-lg text-center transition-all duration-200 border-2 border-indigo-200 hover:border-indigo-300 shadow-sm hover:shadow-lg transform hover:scale-105 relative",children:[(0,cs.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold",children:"NEW"}),(0,cs.jsx)("div",{className:"p-3 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-lg w-fit mx-auto mb-3",children:(0,cs.jsx)(KM,{className:"w-5 h-5 text-white"})}),(0,cs.jsx)("p",{className:"text-sm font-bold text-indigo-900 mb-1",children:"Bus Types"}),(0,cs.jsx)("p",{className:"text-xs text-indigo-700",children:"Add & manage types"})]}),(0,cs.jsxs)("button",{onClick:()=>y(!0),className:"group p-3 bg-blue-50 hover:bg-blue-100 rounded-lg text-center transition-colors border border-blue-200",children:[(0,cs.jsx)("div",{className:"p-2 bg-blue-500 rounded-lg w-fit mx-auto mb-2",children:(0,cs.jsx)(bu.A,{className:"w-4 h-4 text-white"})}),(0,cs.jsx)("p",{className:"text-xs font-bold text-blue-900 mb-0.5",children:"Add Bus"}),(0,cs.jsx)("p",{className:"text-xs text-blue-700",children:"Register new bus"})]}),(0,cs.jsxs)("button",{onClick:()=>p("map"),className:"group p-3 bg-green-50 hover:bg-green-100 rounded-lg text-center transition-colors border border-green-200",children:[(0,cs.jsx)("div",{className:"p-2 bg-green-500 rounded-lg w-fit mx-auto mb-2",children:(0,cs.jsx)(WM,{className:"w-4 h-4 text-white"})}),(0,cs.jsx)("p",{className:"text-xs font-bold text-green-900 mb-0.5",children:"Live Map"}),(0,cs.jsx)("p",{className:"text-xs text-green-700",children:"Track buses"})]}),(0,cs.jsxs)("button",{onClick:()=>p("analytics"),className:"group p-3 bg-purple-50 hover:bg-purple-100 rounded-lg text-center transition-colors border border-purple-200",children:[(0,cs.jsx)("div",{className:"p-2 bg-purple-500 rounded-lg w-fit mx-auto mb-2",children:(0,cs.jsx)(js.A,{className:"w-4 h-4 text-white"})}),(0,cs.jsx)("p",{className:"text-xs font-bold text-purple-900 mb-0.5",children:"Analytics"}),(0,cs.jsx)("p",{className:"text-xs text-purple-700",children:"View insights"})]}),(0,cs.jsxs)("button",{onClick:()=>p("grid"),className:"group p-3 bg-orange-50 hover:bg-orange-100 rounded-lg text-center transition-colors border border-orange-200",children:[(0,cs.jsx)("div",{className:"p-2 bg-orange-500 rounded-lg w-fit mx-auto mb-2",children:(0,cs.jsx)(ks.A,{className:"w-4 h-4 text-white"})}),(0,cs.jsx)("p",{className:"text-xs font-bold text-orange-900 mb-0.5",children:"All Buses"}),(0,cs.jsx)("p",{className:"text-xs text-orange-700",children:"Manage fleet"})]})]}),(0,cs.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,cs.jsx)("h4",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Bulk Operations"}),(0,cs.jsxs)("div",{className:"grid grid-cols-3 gap-1",children:[(0,cs.jsxs)("button",{onClick:()=>S(!0),className:"p-2 bg-gray-50 hover:bg-gray-100 rounded text-center transition-colors border border-gray-200",children:[(0,cs.jsx)(Ss.A,{className:"w-3 h-3 text-gray-600 mx-auto mb-1"}),(0,cs.jsx)("p",{className:"text-xs font-medium text-gray-700",children:"Assign"})]}),(0,cs.jsxs)("button",{onClick:()=>S(!0),className:"p-2 bg-gray-50 hover:bg-gray-100 rounded text-center transition-colors border border-gray-200",children:[(0,cs.jsx)(Lm.A,{className:"w-3 h-3 text-gray-600 mx-auto mb-1"}),(0,cs.jsx)("p",{className:"text-xs font-medium text-gray-700",children:"Service"})]}),(0,cs.jsxs)("button",{onClick:()=>S(!0),className:"p-2 bg-gray-50 hover:bg-gray-100 rounded text-center transition-colors border border-gray-200",children:[(0,cs.jsx)(hd.A,{className:"w-3 h-3 text-gray-600 mx-auto mb-1"}),(0,cs.jsx)("p",{className:"text-xs font-medium text-gray-700",children:"Export"})]})]})]})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[(0,cs.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,cs.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,cs.jsx)(Os.A,{className:"w-5 h-5 text-blue-600"})}),"Quick Help & Tips"]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,cs.jsxs)("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg border border-blue-200",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,cs.jsx)("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-white text-xs font-bold",children:"1"})}),(0,cs.jsx)("h4",{className:"font-semibold text-blue-900",children:"Add New Bus"})]}),(0,cs.jsx)("p",{className:"text-sm text-blue-800 mb-3",children:'Click "Add Bus" to register a new vehicle in your fleet with complete details.'}),(0,cs.jsx)("button",{onClick:()=>y(!0),className:"text-xs bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition-colors",children:"Add Bus Now"})]}),(0,cs.jsxs)("div",{className:"p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-lg border border-green-200",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,cs.jsx)("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-white text-xs font-bold",children:"2"})}),(0,cs.jsx)("h4",{className:"font-semibold text-green-900",children:"Track Live Location"})]}),(0,cs.jsx)("p",{className:"text-sm text-green-800 mb-3",children:"Switch to Map view to see real-time bus locations and routes."}),(0,cs.jsx)("button",{onClick:()=>p("map"),className:"text-xs bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 transition-colors",children:"View Map"})]}),(0,cs.jsxs)("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg border border-purple-200",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,cs.jsx)("div",{className:"w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-white text-xs font-bold",children:"3"})}),(0,cs.jsx)("h4",{className:"font-semibold text-purple-900",children:"View Analytics"})]}),(0,cs.jsx)("p",{className:"text-sm text-purple-800 mb-3",children:"Check performance metrics and insights in the Analytics view."}),(0,cs.jsx)("button",{onClick:()=>p("analytics"),className:"text-xs bg-purple-600 text-white px-3 py-1 rounded hover:bg-purple-700 transition-colors",children:"View Analytics"})]})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[(0,cs.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,cs.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,cs.jsx)(Vm,{className:"w-5 h-5 text-purple-600"})}),"AI Insights & Recommendations"]}),(0,cs.jsx)($U,{insights:le})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,cs.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,cs.jsx)(HM,{className:"w-5 h-5"})," Real-time Alerts"]}),(0,cs.jsx)("div",{className:"space-y-3",children:ie.map((e,t)=>(0,cs.jsx)(ZU,{alert:e},t))})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Fleet Performance"}),(0,cs.jsx)(WU,{data:se})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Upcoming Maintenance"}),(0,cs.jsx)(HU,{buses:e.filter(e=>e.nextMaintenance)})]})]})]}),"grid"===m&&(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:(0,cs.jsx)(Md,{children:fe.map(e=>(0,cs.jsx)(ed.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},children:(0,cs.jsx)(XU,{bus:e,liveData:ae[e._id],onEdit:()=>ye(e),onDelete:()=>ve(e),onView:()=>g(e),onSelect:()=>je(e._id),isSelected:w.includes(e._id),onAssignRoute:()=>Ne(e),onRemoveRoute:()=>we(e),onScheduleMaintenance:()=>Se(e),onCompleteMaintenance:()=>_e(e),onViewMaintenance:()=>Ce(e._id),onAssignStaff:()=>ke(e._id),onUnassignStaff:()=>Ae(e._id)})},e._id))})}),"map"===m&&(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 h-[calc(100vh-250px)]",children:(0,cs.jsx)(sV,{buses:fe,tracking:ae,selectedBus:x,onBusSelect:g,routes:M})}),"analytics"===m&&(0,cs.jsx)(WU,{buses:e,analytics:se,onExport:Te})]}),"grid"===m&&u.pages>1&&(0,cs.jsxs)("div",{className:"flex items-center justify-between mt-8 p-4 bg-white rounded-lg shadow",children:[(0,cs.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(u.page-1)*u.limit+1," to ",Math.min(u.page*u.limit,u.total)," of ",u.total," buses"]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>l((0,Ie.A)((0,Ie.A)({},o),{},{page:Math.max(1,u.page-1)})),disabled:u.page<=1,className:"px-3 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-1",children:[Array.from({length:Math.min(5,u.pages)},(e,t)=>{const s=t+1;return(0,cs.jsx)("button",{onClick:()=>l((0,Ie.A)((0,Ie.A)({},o),{},{page:s})),className:"px-3 py-2 rounded-lg ".concat(u.page===s?"bg-blue-600 text-white":"border hover:bg-gray-50"),children:s},s)}),u.pages>5&&(0,cs.jsxs)(cs.Fragment,{children:[u.pages>6&&(0,cs.jsx)("span",{className:"px-2",children:"..."}),(0,cs.jsx)("button",{onClick:()=>l((0,Ie.A)((0,Ie.A)({},o),{},{page:u.pages})),className:"px-3 py-2 rounded-lg ".concat(u.page===u.pages?"bg-blue-600 text-white":"border hover:bg-gray-50"),children:u.pages})]})]}),(0,cs.jsx)("button",{onClick:()=>l((0,Ie.A)((0,Ie.A)({},o),{},{page:Math.min(u.pages,u.page+1)})),disabled:u.page>=u.pages,className:"px-3 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),(0,cs.jsxs)("select",{value:o.limit,onChange:e=>l((0,Ie.A)((0,Ie.A)({},o),{},{limit:parseInt(e.target.value),page:1})),className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:10,children:"10 per page"}),(0,cs.jsx)("option",{value:20,children:"20 per page"}),(0,cs.jsx)("option",{value:50,children:"50 per page"}),(0,cs.jsx)("option",{value:100,children:"100 per page"})]})]})]}),f&&(0,cs.jsx)(eV,{onClose:()=>y(!1),onSave:Pe}),b&&x&&(0,cs.jsx)(tV,{bus:x,onClose:()=>{v(!1),g(null)},onSave:be}),C&&T&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[(0,cs.jsxs)("div",{className:"flex items-center mb-4",children:[(0,cs.jsx)(vd.A,{className:"w-6 h-6 text-red-500 mr-3"}),(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirm Delete"})]}),(0,cs.jsxs)("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete bus ",(0,cs.jsx)("strong",{children:T.busNumber}),"? This action cannot be undone."]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,cs.jsx)("button",{onClick:()=>{_(!1),P(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",children:"Cancel"}),(0,cs.jsx)("button",{onClick:async()=>{if(T)try{const e=await(0,xs.nr)("/api/admin/buses/".concat(T._id),{method:"DELETE"});if(!e.ok)throw new Error(e.message||"Failed to delete bus");(0,xs.I3)(),(0,$M.oc)("Bus deleted successfully"),_(!1),P(null),de()}catch(e){(0,$M.H4)(e)}},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium",children:"Delete Bus"})]})]})}),E&&L&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[(0,cs.jsxs)("div",{className:"flex items-center mb-4",children:[(0,cs.jsx)(As.A,{className:"w-6 h-6 text-blue-500 mr-3"}),(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Assign Route"})]}),(0,cs.jsxs)("p",{className:"text-gray-600 mb-4",children:["Select a route for bus ",(0,cs.jsx)("strong",{children:L.busNumber})]}),(0,cs.jsxs)("div",{className:"mb-6",children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Routes"}),(0,cs.jsxs)("select",{value:R,onChange:e=>I(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"",children:"Select a route"}),M.map(e=>{var t,s;return(0,cs.jsxs)("option",{value:e._id,children:[e.routeNumber," - ",e.routeName,"(",(null===(t=e.startingPoint)||void 0===t?void 0:t.city)||e.startingPoint," to ",(null===(s=e.endingPoint)||void 0===s?void 0:s.city)||e.endingPoint,")"]},e._id)})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,cs.jsx)("button",{onClick:()=>{D(!1),F(null),I("")},className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",children:"Cancel"}),(0,cs.jsx)("button",{onClick:async()=>{if(L&&R)try{await(0,xs.nr)("/api/admin/buses/".concat(L._id),{method:"PUT",body:JSON.stringify({assignedRoute:R})}),Oe.oR.success("Bus assigned to route successfully"),D(!1),F(null),I(""),(0,xs.I3)(),de()}catch(e){Oe.oR.error("Failed to assign bus to route")}},disabled:!R,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Assign Route"})]})]})}),B&&U&&(0,cs.jsx)(rV,{bus:U,onClose:()=>{z(!1),V(null)},onSave:async e=>{try{await(0,xs.nr)("/api/admin/maintenance",{method:"POST",body:JSON.stringify((0,Ie.A)((0,Ie.A)({},e),{},{busId:U._id}))}),await(0,xs.nr)("/api/admin/buses/".concat(U._id),{method:"PUT",body:JSON.stringify({status:"maintenance"})}),Oe.oR.success("Maintenance scheduled successfully"),z(!1),V(null),(0,xs.I3)(),de()}catch(t){Oe.oR.error("Failed to schedule maintenance")}}}),H&&(0,cs.jsx)(aV,{logs:K,onClose:()=>{q(!1),W([])}}),j&&(0,cs.jsx)(YU,{onScan:e=>{console.log("QR Code scanned:",e)},onClose:()=>N(!1)}),(0,cs.jsx)(JU,{isOpen:G,onClose:()=>Y(!1),onSave:e=>{console.log("Enhanced bus types saved:",e),Y(!1)},onScheduleUpdate:e=>{J(e),console.log("Scheduling updated with active bus types:",e),Oe.oR.success("Bus type scheduling rules updated successfully")}})]})},dV=()=>(0,cs.jsx)(cV,{}),uV=()=>{const[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)("all"),[u,h]=(0,r.useState)("all"),[m,p]=(0,r.useState)(!1),[x,g]=(0,r.useState)(null),[f,y]=(0,r.useState)(null),[b,v]=(0,r.useState)(!1),[j,N]=(0,r.useState)(null),[w,k]=(0,r.useState)(!1),[A,S]=(0,r.useState)({name:"",email:"",phone:"",depotId:"",employeeId:"",joiningDate:"",salary:"",status:"active",password:""});(0,r.useEffect)(()=>{C()},[]),(0,r.useEffect)(()=>{(async()=>{try{console.log("=== FORCE FETCHING DEPOTS ON MOUNT ===");const e=await fetch("/api/admin/depots",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();console.log("Depots fetched on mount:",t),a(t.depots||[])}else console.error("Failed to fetch depots on mount:",e.status)}catch(e){console.error("Error fetching depots on mount:",e)}})()},[]);const C=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{i(!0),console.log("=== FRONTEND FETCHING CONDUCTORS ===",e?"(FORCE REFRESH)":"");const l=Date.now(),c=e?"/api/admin/conductors?t=".concat(l):"/api/admin/conductors",d=e?"/api/admin/depots?t=".concat(l):"/api/admin/depots",[u,h]=await Promise.all([fetch(c,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Cache-Control":"no-cache",Pragma:"no-cache"}}),fetch(d,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Cache-Control":"no-cache",Pragma:"no-cache"}})]);if(console.log("Conductors response status:",u.status),console.log("Depots response status:",h.status),u.ok){var s,r,n;const e=await u.json();console.log("Conductors data received:",e),console.log("Conductors count:",(null===(s=e.data)||void 0===s||null===(r=s.conductors)||void 0===r?void 0:r.length)||0),t((null===(n=e.data)||void 0===n?void 0:n.conductors)||[])}else{console.error("Conductors response not ok:",u.status);const e=await u.text();console.error("Conductors error response:",e)}if(h.ok){var o;const e=await h.json();console.log("Depots data received:",e),console.log("Depots count:",(null===(o=e.depots)||void 0===o?void 0:o.length)||0),console.log("Depots array:",e.depots),a(e.depots||[]),e.depots&&e.depots.length>0&&console.log("First depot sample:",e.depots[0])}else{console.error("Depots response not ok:",h.status);const e=await h.text();console.error("Depots error response:",e)}}catch(l){console.error("Error fetching data:",l)}finally{i(!1)}},_=()=>{S({name:"",email:"",phone:"",depotId:"",employeeId:"",joiningDate:"",salary:"",status:"active",password:""})},T=e=>{const t={active:{color:"bg-green-100 text-green-800 border-green-200",icon:jd.A},inactive:{color:"bg-gray-100 text-gray-800 border-gray-200",icon:qh},suspended:{color:"bg-red-100 text-red-800 border-red-200",icon:bh}}[e]||{color:"bg-gray-100 text-gray-800 border-gray-200",icon:vd.A},s=t.icon;return(0,cs.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-medium border ".concat(t.color," flex items-center gap-1"),children:[(0,cs.jsx)(s,{className:"w-3 h-3"}),e]})},P=e=>{if("object"===typeof e&&null!==e)return e.depotName||"Unassigned";const t=s.find(t=>t._id===e);return t?t.name:"Unassigned"},E=e=>{if("object"===typeof e&&null!==e)return e.depotCode||"N/A";const t=s.find(t=>t._id===e);return t?t.depotCode||t.code:"N/A"},D=e.filter(e=>{var t;const s=!o||e.name.toLowerCase().includes(o.toLowerCase())||e.email.toLowerCase().includes(o.toLowerCase())||e.phone.includes(o)||e.employeeCode&&e.employeeCode.toLowerCase().includes(o.toLowerCase()),r="all"===c||"object"===typeof e.depotId&&(null===(t=e.depotId)||void 0===t?void 0:t._id)===c||"string"===typeof e.depotId&&e.depotId===c,a="all"===u||e.status===u;return s&&r&&a});return console.log("=== CONDUCTORS FRONTEND DEBUG ==="),console.log("conductors state:",e),console.log("conductors length:",e.length),console.log("filteredConductors length:",D.length),console.log("searchTerm:",o),console.log("depotFilter:",c),console.log("statusFilter:",u),console.log("depots state:",s),console.log("depots length:",s.length),0===s.length?console.warn("\u26a0\ufe0f No depots loaded! This might be why the dropdown is empty."):console.log("\u2705 Depots loaded successfully:",s.map(e=>({id:e._id,name:e.name}))),n?(0,cs.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,cs.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"text-center lg:text-left",children:[(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Yatrik Conductor Management"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Manage conductors and their depot assignments"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("button",{onClick:()=>{const t=[["Name","Email","Phone","Employee ID","Depot","Joining Date","Status","Source"].join(","),...e.map(e=>[e.name,e.email,e.phone,e.employeeCode||"N/A",P(e.depotId),e.joiningDate?new Date(e.joiningDate).toLocaleDateString():"N/A",e.status,e.source||"unknown"].join(","))].join("\n"),s=new Blob([t],{type:"text/csv"}),r=window.URL.createObjectURL(s),a=document.createElement("a");a.href=r,a.download="conductors_".concat((new Date).toISOString().split("T")[0],".csv"),a.click(),window.URL.revokeObjectURL(r),alert("Conductors exported successfully")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(hd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Export"})]}),(0,cs.jsxs)("button",{onClick:()=>{console.log("=== FORCE REFRESH TRIGGERED ==="),C(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Refresh All"})]}),(0,cs.jsx)("button",{onClick:async()=>{try{console.log("=== TESTING COMPREHENSIVE STAFF DEBUG ===");const e=await fetch("/api/admin/debug-all-staff",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();console.log("Comprehensive staff debug:",t),alert("Debug complete! Found ".concat(t.counts.allDrivers," drivers and ").concat(t.counts.allConductors," conductors. Check console for details."))}else console.error("Debug failed:",e.status),alert("Debug failed with status ".concat(e.status))}catch(e){console.error("Debug error:",e),alert("Debug error. Check console for details.")}},className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:(0,cs.jsx)("span",{children:"Debug All Staff"})}),(0,cs.jsxs)("button",{onClick:()=>k(!0),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(wm.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Bulk Assign"})]}),(0,cs.jsxs)("button",{onClick:()=>p(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(bu.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Add Conductor"})]})]})]}),(0,cs.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,cs.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,cs.jsx)("div",{className:"flex-1",children:(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(ys.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search conductors by name, email, phone, or employee ID...",value:o,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,cs.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",style:{minHeight:"40px"},children:[(0,cs.jsxs)("option",{value:"all",children:["All Depots (",s.length,")"]}),s&&s.length>0?s.map(e=>(console.log("Rendering depot option:",e),(0,cs.jsx)("option",{value:e._id,style:{padding:"8px",backgroundColor:"white"},children:e.name||e.depotName||"Unknown Depot"},e._id))):(0,cs.jsx)("option",{disabled:!0,children:"No depots available"})]}),(0,cs.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"all",children:"All Status"}),(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"inactive",children:"Inactive"}),(0,cs.jsx)("option",{value:"suspended",children:"Suspended"})]}),(0,cs.jsxs)("button",{onClick:C,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Refresh"})]})]})}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,cs.jsx)("div",{className:"overflow-x-auto",children:(0,cs.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,cs.jsx)("thead",{className:"bg-gray-50",children:(0,cs.jsxs)("tr",{children:[(0,cs.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Conductor"}),(0,cs.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),(0,cs.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Depot Assignment"}),(0,cs.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,cs.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,cs.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,cs.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(e=>{var t,s;return(0,cs.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,cs.jsxs)("div",{className:"flex items-center",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-600 rounded-full flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-white font-semibold text-lg",children:(null===(t=e.name)||void 0===t||null===(s=t.charAt(0))||void 0===s?void 0:s.toUpperCase())||"C"})}),(0,cs.jsxs)("div",{className:"ml-4",children:[(0,cs.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:e.name}),(0,cs.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e._id.slice(-8)]})]})]})}),(0,cs.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,cs.jsx)("div",{className:"text-sm text-gray-900",children:e.employeeCode||"N/A"}),e.joiningDate&&(0,cs.jsxs)("div",{className:"text-sm text-gray-500",children:["Joined: ",new Date(e.joiningDate).toLocaleDateString()]}),e.source&&(0,cs.jsxs)("div",{className:"text-xs text-blue-600",children:["Source: ",e.source]})]}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(_s,{className:"w-4 h-4 text-gray-400"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:P(e.depotId)}),(0,cs.jsxs)("div",{className:"text-sm text-gray-500",children:["Code: ",E(e.depotId)]})]})]})}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,cs.jsxs)("div",{className:"space-y-1",children:[(0,cs.jsxs)("div",{className:"flex items-center text-sm text-gray-900",children:[(0,cs.jsx)(Gh,{className:"w-4 h-4 mr-2 text-gray-400"}),e.email]}),(0,cs.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,cs.jsx)(ad,{className:"w-4 h-4 mr-2 text-gray-400"}),e.phone]})]})}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:T(e.status)}),(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>(e=>{y(e)})(e),className:"text-blue-600 hover:text-blue-900 p-2 rounded-lg hover:bg-blue-50 transition-colors",title:"View Details",children:(0,cs.jsx)(Nu.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>(e=>{var t,s,r;g(e),S({name:e.name||"",email:e.email||"",phone:e.phone||"",depotId:e.depotId||"",employeeId:(null===(t=e.staffDetails)||void 0===t?void 0:t.employeeId)||"",joiningDate:null!==(s=e.staffDetails)&&void 0!==s&&s.joiningDate?new Date(e.staffDetails.joiningDate).toISOString().split("T")[0]:"",salary:(null===(r=e.staffDetails)||void 0===r?void 0:r.salary)||"",status:e.status||"active",password:""})})(e),className:"text-green-600 hover:text-green-900 p-2 rounded-lg hover:bg-green-50 transition-colors",title:"Edit Conductor",children:(0,cs.jsx)(Kh.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>(e=>{N(e),v(!0)})(e),className:"text-red-600 hover:text-red-900 p-2 rounded-lg hover:bg-red-50 transition-colors",title:"Delete Conductor",children:(0,cs.jsx)(Wh.A,{className:"w-4 h-4"})})]})})]},e._id)})})]})}),0===D.length&&(0,cs.jsxs)("div",{className:"text-center py-12",children:[(0,cs.jsx)(Ss.A,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:0===e.length?"No conductors found":"No conductors match your filters"}),(0,cs.jsx)("p",{className:"text-gray-500 mb-6",children:0===e.length?"Get started by adding your first conductor":"Try adjusting your search terms or filters"}),0===e.length&&(0,cs.jsxs)("button",{onClick:()=>p(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[(0,cs.jsx)(bu.A,{className:"w-4 h-4 inline mr-2"}),"Add First Conductor"]})]})]}),(m||x)&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,cs.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,cs.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:x?"Edit Conductor":"Create New Conductor"}),(0,cs.jsx)("p",{className:"text-gray-600 mt-2",children:x?"Update conductor information":"Add a new conductor to the system"})]}),(0,cs.jsxs)("form",{onSubmit:x?async e=>{e.preventDefault();try{const e=await fetch("/api/admin/users/".concat(x._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify((0,Ie.A)((0,Ie.A)({},A),{},{role:"conductor"}))});if(e.ok)alert("Conductor updated successfully"),g(null),_(),C();else{const t=await e.json();alert(t.error||"Failed to update conductor")}}catch(t){console.error("Error updating conductor:",t),alert("Error updating conductor")}}:async e=>{e.preventDefault();try{const e=await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify((0,Ie.A)((0,Ie.A)({},A),{},{role:"conductor"}))});if(e.ok)alert("Conductor created successfully"),p(!1),_(),C(!0);else{const t=await e.json();alert(t.error||"Failed to create conductor")}}catch(t){console.error("Error creating conductor:",t),alert("Error creating conductor")}},className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),(0,cs.jsx)("input",{type:"text",required:!0,value:A.name,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter full name"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),(0,cs.jsx)("input",{type:"email",required:!0,value:A.email,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone *"}),(0,cs.jsx)("input",{type:"tel",required:!0,value:A.phone,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{phone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter phone number"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID"}),(0,cs.jsx)("input",{type:"text",value:A.employeeId,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{employeeId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter employee ID"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot Assignment *"}),(0,cs.jsxs)("select",{required:!0,value:A.depotId,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{depotId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"",children:"Select Depot"}),s.map(e=>(0,cs.jsxs)("option",{value:e._id,children:[e.depotName||e.name," (",e.depotCode||e.code,")"]},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,cs.jsxs)("select",{value:A.status,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"inactive",children:"Inactive"}),(0,cs.jsx)("option",{value:"suspended",children:"Suspended"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Joining Date"}),(0,cs.jsx)("input",{type:"date",value:A.joiningDate,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{joiningDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salary"}),(0,cs.jsx)("input",{type:"number",value:A.salary,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{salary:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter salary"})]}),!x&&(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),(0,cs.jsx)("input",{type:"password",required:!0,value:A.password,onChange:e=>S(t=>(0,Ie.A)((0,Ie.A)({},t),{},{password:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter password"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,cs.jsx)("button",{type:"button",onClick:()=>{p(!1),g(null),_()},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,cs.jsx)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:x?"Update Conductor":"Create Conductor"})]})]})]})}),b&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:(0,cs.jsxs)("div",{className:"p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,cs.jsx)(vd.A,{className:"w-6 h-6 text-red-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Conductor"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"This action cannot be undone."})]})]}),(0,cs.jsxs)("p",{className:"text-gray-700 mb-6",children:["Are you sure you want to delete ",(0,cs.jsx)("strong",{children:null===j||void 0===j?void 0:j.name}),"? This will permanently remove their account and all associated data."]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,cs.jsx)("button",{onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,cs.jsx)("button",{onClick:async()=>{if(j)try{const e=await fetch("/api/admin/users/".concat(j._id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok)alert("Conductor deleted successfully"),v(!1),N(null),C();else{const t=await e.json();alert(t.error||"Failed to delete conductor")}}catch(e){console.error("Error deleting conductor:",e),alert("Error deleting conductor")}},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete Conductor"})]})]})})}),(0,cs.jsx)(Sm,{isOpen:w,onClose:()=>k(!1),staffType:"conductors",onAssign:e=>{console.log("Bulk assignment completed:",e),C(!0)}})]})},hV=()=>(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Depot Manager Management"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Manage all depot managers in the system"})]}),(0,cs.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,cs.jsx)("p",{className:"text-gray-500",children:"Depot manager management functionality will be implemented here."}),(0,cs.jsx)("p",{className:"text-gray-500 mt-2",children:"This will include:"}),(0,cs.jsxs)("ul",{className:"list-disc list-inside text-gray-500 mt-2 ml-4",children:[(0,cs.jsx)("li",{children:"Add/Edit/Delete depot managers"}),(0,cs.jsx)("li",{children:"Assign depot managers to depots"}),(0,cs.jsx)("li",{children:"Track depot operations"}),(0,cs.jsx)("li",{children:"Manage depot resources"})]})]})]}),mV=(0,Ns.A)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),pV=(0,Ns.A)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),xV=(0,Ns.A)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),gV=(0,Ns.A)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),fV=()=>{const[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),[m,p]=(0,r.useState)(null),[x,g]=(0,r.useState)(""),[f,y]=(0,r.useState)("roles"),[b,v]=(0,r.useState)({name:"",description:"",permissions:[],isActive:!0,priority:1}),j={dashboard:{name:"Dashboard & Analytics",icon:js.A,color:"bg-blue-100 text-blue-800",permissions:[{key:"dashboard.view",name:"View Dashboard",description:"Access main dashboard"},{key:"dashboard.analytics",name:"View Analytics",description:"Access detailed analytics"},{key:"dashboard.export",name:"Export Data",description:"Export dashboard data"},{key:"dashboard.realtime",name:"Real-time Data",description:"Access live data feeds"}]},users:{name:"User Management",icon:Ss.A,color:"bg-green-100 text-green-800",permissions:[{key:"users.view",name:"View Users",description:"View user listings"},{key:"users.create",name:"Create Users",description:"Add new users"},{key:"users.edit",name:"Edit Users",description:"Modify user details"},{key:"users.delete",name:"Delete Users",description:"Remove users"},{key:"users.roles",name:"Manage Roles",description:"Assign/change user roles"},{key:"users.permissions",name:"Manage Permissions",description:"Grant/revoke permissions"}]},fleet:{name:"Fleet Management",icon:ks.A,color:"bg-purple-100 text-purple-800",permissions:[{key:"buses.view",name:"View Buses",description:"View bus listings"},{key:"buses.create",name:"Add Buses",description:"Add new buses"},{key:"buses.edit",name:"Edit Buses",description:"Modify bus details"},{key:"buses.delete",name:"Delete Buses",description:"Remove buses"},{key:"buses.assign",name:"Assign Crew",description:"Assign drivers/conductors"},{key:"buses.maintenance",name:"Maintenance",description:"Schedule maintenance"}]},routes:{name:"Route Management",icon:As.A,color:"bg-orange-100 text-orange-800",permissions:[{key:"routes.view",name:"View Routes",description:"View route listings"},{key:"routes.create",name:"Create Routes",description:"Add new routes"},{key:"routes.edit",name:"Edit Routes",description:"Modify route details"},{key:"routes.delete",name:"Delete Routes",description:"Remove routes"},{key:"routes.stops",name:"Manage Stops",description:"Add/edit route stops"},{key:"routes.schedule",name:"Manage Schedules",description:"Set route schedules"}]},trips:{name:"Trip Management",icon:fs.A,color:"bg-indigo-100 text-indigo-800",permissions:[{key:"trips.view",name:"View Trips",description:"View trip listings"},{key:"trips.create",name:"Create Trips",description:"Schedule new trips"},{key:"trips.edit",name:"Edit Trips",description:"Modify trip details"},{key:"trips.cancel",name:"Cancel Trips",description:"Cancel scheduled trips"},{key:"trips.track",name:"Track Trips",description:"Real-time trip tracking"},{key:"trips.reports",name:"Trip Reports",description:"Generate trip reports"}]},depots:{name:"Depot Management",icon:gs.A,color:"bg-teal-100 text-teal-800",permissions:[{key:"depots.view",name:"View Depots",description:"View depot listings"},{key:"depots.create",name:"Create Depots",description:"Add new depots"},{key:"depots.edit",name:"Edit Depots",description:"Modify depot details"},{key:"depots.delete",name:"Delete Depots",description:"Remove depots"},{key:"depots.staff",name:"Manage Staff",description:"Assign depot staff"},{key:"depots.facilities",name:"Manage Facilities",description:"Manage depot facilities"}]},finance:{name:"Financial Management",icon:Es.A,color:"bg-green-100 text-green-800",permissions:[{key:"finance.view",name:"View Finances",description:"View financial data"},{key:"finance.fares",name:"Manage Fares",description:"Set fare policies"},{key:"finance.payments",name:"Process Payments",description:"Handle payment processing"},{key:"finance.refunds",name:"Process Refunds",description:"Handle refund requests"},{key:"finance.reports",name:"Financial Reports",description:"Generate financial reports"},{key:"finance.audit",name:"Audit Trail",description:"View financial audit logs"}]},reports:{name:"Reports & Analytics",icon:GM.A,color:"bg-yellow-100 text-yellow-800",permissions:[{key:"reports.view",name:"View Reports",description:"Access reports section"},{key:"reports.create",name:"Create Reports",description:"Generate custom reports"},{key:"reports.export",name:"Export Reports",description:"Export report data"},{key:"reports.schedule",name:"Schedule Reports",description:"Set automated reports"},{key:"reports.analytics",name:"Advanced Analytics",description:"Access advanced analytics"}]},system:{name:"System Administration",icon:Os.A,color:"bg-red-100 text-red-800",permissions:[{key:"system.view",name:"View System Status",description:"Monitor system health"},{key:"system.config",name:"System Config",description:"Modify system settings"},{key:"system.backup",name:"Backup Management",description:"Manage system backups"},{key:"system.logs",name:"View Logs",description:"Access system logs"},{key:"system.maintenance",name:"Maintenance Mode",description:"Enable maintenance mode"},{key:"system.security",name:"Security Settings",description:"Manage security settings"}]}};(0,r.useEffect)(()=>{N(),w(),k()},[]);const N=async()=>{try{l(!0);const e=await fetch("/api/admin/rbac/roles",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const s=await e.json();t(s.roles||[])}}catch(e){console.error("Error fetching roles:",e)}finally{l(!1)}},w=async()=>{try{const e=await fetch("/api/admin/rbac/permissions",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();a(t.permissions||[])}}catch(e){console.error("Error fetching permissions:",e)}},k=async()=>{try{const e=await fetch("/api/admin/users?limit=100",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();i(t.users||[])}}catch(e){console.error("Error fetching users:",e)}},A=function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){const t=m.permissions||[],s=t.includes(e);p((0,Ie.A)((0,Ie.A)({},m),{},{permissions:s?t.filter(t=>t!==e):[...t,e]}))}else{const t=b.permissions||[],s=t.includes(e);v((0,Ie.A)((0,Ie.A)({},b),{},{permissions:s?t.filter(t=>t!==e):[...t,e]}))}},S=e=>({admin:mV,depot_manager:rd.A,driver:Lh,conductor:Lh,passenger:Ss.A,support:pV}[e.toLowerCase()]||Ps),C=e.filter(e=>{var t,s;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(x.toLowerCase()))||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(x.toLowerCase()))});return(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,cs.jsx)("div",{className:"px-6 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"RBAC Management"}),(0,cs.jsx)("p",{className:"text-gray-600 mt-1",children:"Role-Based Access Control with granular permissions"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("button",{onClick:()=>{N(),w(),k()},className:"px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors",children:(0,cs.jsx)(Od.A,{className:"w-5 h-5"})}),(0,cs.jsxs)("button",{onClick:()=>d(!0),className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-2 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 flex items-center space-x-2 shadow-lg",children:[(0,cs.jsx)(bu.A,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Create Role"})]})]})]})})}),(0,cs.jsxs)("div",{className:"px-6 py-6",children:[(0,cs.jsx)("div",{className:"mb-6",children:(0,cs.jsx)("div",{className:"border-b border-gray-200",children:(0,cs.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{key:"roles",label:"Roles & Permissions",icon:Ps},{key:"users",label:"User Assignments",icon:Ss.A},{key:"permissions",label:"Permission Matrix",icon:xV},{key:"audit",label:"Audit Logs",icon:GM.A}].map(e=>{const t=e.icon;return(0,cs.jsxs)("button",{onClick:()=>y(e.key),className:"py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat(f===e.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,cs.jsx)(t,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:e.label})]},e.key)})})})}),"roles"===f&&(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,cs.jsx)("div",{className:"flex items-center space-x-4",children:(0,cs.jsxs)("div",{className:"relative flex-1",children:[(0,cs.jsx)(ys.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search roles...",value:x,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})})}),(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(e=>{var t;const s=S(e.name),r=(e=>{const t={1:{label:"Highest",color:"bg-red-100 text-red-800"},2:{label:"High",color:"bg-orange-100 text-orange-800"},3:{label:"Medium",color:"bg-yellow-100 text-yellow-800"},4:{label:"Low",color:"bg-green-100 text-green-800"},5:{label:"Lowest",color:"bg-gray-100 text-gray-800"}};return t[e]||t[3]})(e.priority);return(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,cs.jsx)(s,{className:"w-6 h-6 text-blue-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,cs.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(r.color),children:[r.label," Priority"]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>{p(e),h(!0)},className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",children:(0,cs.jsx)(gV,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this role?"))try{(await fetch("/api/admin/rbac/roles/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).ok&&N()}catch(t){console.error("Error deleting role:",t)}})(e._id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:(0,cs.jsx)(Wh.A,{className:"w-4 h-4"})})]})]}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),(0,cs.jsxs)("div",{className:"space-y-2",children:[(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Permissions:"}),(0,cs.jsx)("span",{className:"font-medium",children:(null===(t=e.permissions)||void 0===t?void 0:t.length)||0})]}),(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Users:"}),(0,cs.jsx)("span",{className:"font-medium",children:n.filter(t=>t.role===e.name).length})]}),(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,cs.jsx)("span",{className:"font-medium ".concat(e.isActive?"text-green-600":"text-red-600"),children:e.isActive?"Active":"Inactive"})]})]})]},e._id)})})]}),"permissions"===f&&(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,cs.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Permission Matrix"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Comprehensive view of all permissions across roles"})]}),(0,cs.jsx)("div",{className:"p-6 space-y-8",children:Object.entries(j).map(t=>{let[s,r]=t;const a=r.icon;return(0,cs.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,cs.jsxs)("div",{className:"px-4 py-3 ".concat(r.color," flex items-center space-x-2"),children:[(0,cs.jsx)(a,{className:"w-5 h-5"}),(0,cs.jsx)("span",{className:"font-semibold",children:r.name})]}),(0,cs.jsx)("div",{className:"p-4",children:(0,cs.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:r.permissions.map(t=>(0,cs.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,cs.jsx)("h5",{className:"font-medium text-gray-900",children:t.name}),(0,cs.jsx)("div",{className:"flex items-center space-x-2",children:e.map(e=>{var s;return(0,cs.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,cs.jsx)("span",{className:"text-xs text-gray-500",children:e.name}),null!==(s=e.permissions)&&void 0!==s&&s.includes(t.key)?(0,cs.jsx)(jd.A,{className:"w-4 h-4 text-green-600"}):(0,cs.jsx)(bh,{className:"w-4 h-4 text-red-400"})]},e._id)})})]}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:t.description})]},t.key))})})]},s)})})]}),"users"===f&&(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,cs.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"User Role Assignments"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Manage user roles and permissions"})]}),(0,cs.jsx)("div",{className:"overflow-x-auto",children:(0,cs.jsxs)("table",{className:"w-full",children:[(0,cs.jsx)("thead",{className:"bg-gray-50",children:(0,cs.jsxs)("tr",{children:[(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Role"}),(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Permissions"}),(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,cs.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.slice(0,20).map(t=>{var s,r,a;const n=e.find(e=>e.name===t.role),i=S(t.role||"user");return(0,cs.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,cs.jsx)("td",{className:"px-6 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-gray-100 rounded-lg",children:(0,cs.jsx)(i,{className:"w-5 h-5 text-gray-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.name}),(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:t.email})]})]})}),(0,cs.jsx)("td",{className:"px-6 py-4",children:(0,cs.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:t.role||"No Role"})}),(0,cs.jsxs)("td",{className:"px-6 py-4",children:[(0,cs.jsxs)("div",{className:"text-sm text-gray-900",children:[(null===n||void 0===n||null===(s=n.permissions)||void 0===s?void 0:s.length)||0," permissions"]}),(0,cs.jsxs)("div",{className:"text-xs text-gray-500",children:[null===n||void 0===n||null===(r=n.permissions)||void 0===r?void 0:r.slice(0,3).join(", "),(null===n||void 0===n||null===(a=n.permissions)||void 0===a?void 0:a.length)>3&&"..."]})]}),(0,cs.jsx)("td",{className:"px-6 py-4",children:(0,cs.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("active"===t.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"active"===t.status?"Active":"Inactive"})}),(0,cs.jsx)("td",{className:"px-6 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("button",{className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",children:(0,cs.jsx)(gV,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{className:"p-2 text-gray-400 hover:text-green-600 transition-colors",children:(0,cs.jsx)(Nu.A,{className:"w-4 h-4"})})]})})]},t._id)})})]})})]})]}),c&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,cs.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Create New Role"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Define role permissions with granular control"})]}),(0,cs.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{(await fetch("/api/admin/rbac/roles",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(b)})).ok&&(d(!1),v({name:"",description:"",permissions:[],isActive:!0,priority:1}),N())}catch(t){console.error("Error creating role:",t)}},className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role Name"}),(0,cs.jsx)("input",{type:"text",value:b.name,onChange:e=>v((0,Ie.A)((0,Ie.A)({},b),{},{name:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter role name",required:!0})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority Level"}),(0,cs.jsxs)("select",{value:b.priority,onChange:e=>v((0,Ie.A)((0,Ie.A)({},b),{},{priority:parseInt(e.target.value)})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:1,children:"Highest (1)"}),(0,cs.jsx)("option",{value:2,children:"High (2)"}),(0,cs.jsx)("option",{value:3,children:"Medium (3)"}),(0,cs.jsx)("option",{value:4,children:"Low (4)"}),(0,cs.jsx)("option",{value:5,children:"Lowest (5)"})]})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,cs.jsx)("textarea",{value:b.description,onChange:e=>v((0,Ie.A)((0,Ie.A)({},b),{},{description:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Describe the role and its responsibilities"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Permissions"}),(0,cs.jsx)("div",{className:"space-y-6",children:Object.entries(j).map(e=>{let[t,s]=e;const r=s.icon;return(0,cs.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,cs.jsxs)("div",{className:"px-4 py-3 ".concat(s.color," flex items-center space-x-2"),children:[(0,cs.jsx)(r,{className:"w-5 h-5"}),(0,cs.jsx)("span",{className:"font-semibold",children:s.name})]}),(0,cs.jsx)("div",{className:"p-4",children:(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.permissions.map(e=>(0,cs.jsxs)("label",{className:"flex items-start space-x-3 cursor-pointer",children:[(0,cs.jsx)("input",{type:"checkbox",checked:b.permissions.includes(e.key),onChange:()=>A(e.key),className:"mt-1 rounded focus:ring-2 focus:ring-blue-500"}),(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]},e.key))})})]},t)})})]}),(0,cs.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,cs.jsx)("button",{type:"button",onClick:()=>{d(!1),v({name:"",description:"",permissions:[],isActive:!0,priority:1})},className:"px-6 py-3 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,cs.jsxs)("button",{type:"submit",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Uh.A,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Create Role"})]})]})]})]})}),u&&m&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,cs.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,cs.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Edit Role: ",m.name]})}),(0,cs.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{(await fetch("/api/admin/rbac/roles/".concat(m._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(m)})).ok&&(h(!1),p(null),N())}catch(t){console.error("Error updating role:",t)}},className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role Name"}),(0,cs.jsx)("input",{type:"text",value:m.name||"",onChange:e=>p((0,Ie.A)((0,Ie.A)({},m),{},{name:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority Level"}),(0,cs.jsxs)("select",{value:m.priority||3,onChange:e=>p((0,Ie.A)((0,Ie.A)({},m),{},{priority:parseInt(e.target.value)})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:1,children:"Highest (1)"}),(0,cs.jsx)("option",{value:2,children:"High (2)"}),(0,cs.jsx)("option",{value:3,children:"Medium (3)"}),(0,cs.jsx)("option",{value:4,children:"Low (4)"}),(0,cs.jsx)("option",{value:5,children:"Lowest (5)"})]})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,cs.jsx)("textarea",{value:m.description||"",onChange:e=>p((0,Ie.A)((0,Ie.A)({},m),{},{description:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Permissions"}),(0,cs.jsx)("div",{className:"space-y-6",children:Object.entries(j).map(e=>{let[t,s]=e;const r=s.icon;return(0,cs.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,cs.jsxs)("div",{className:"px-4 py-3 ".concat(s.color," flex items-center space-x-2"),children:[(0,cs.jsx)(r,{className:"w-5 h-5"}),(0,cs.jsx)("span",{className:"font-semibold",children:s.name})]}),(0,cs.jsx)("div",{className:"p-4",children:(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.permissions.map(e=>(0,cs.jsxs)("label",{className:"flex items-start space-x-3 cursor-pointer",children:[(0,cs.jsx)("input",{type:"checkbox",checked:(m.permissions||[]).includes(e.key),onChange:()=>A(e.key,!0),className:"mt-1 rounded focus:ring-2 focus:ring-blue-500"}),(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]},e.key))})})]},t)})})]}),(0,cs.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,cs.jsx)("button",{type:"button",onClick:()=>{h(!1),p(null)},className:"px-6 py-3 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,cs.jsxs)("button",{type:"submit",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Uh.A,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Update Role"})]})]})]})]})})]})};var yV=s(3782);const bV=()=>{var e,t,s,a;const[n,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0]}),[m,p]=(0,r.useState)(null),[x,g]=(0,r.useState)({depot:"all",route:"all",status:"all"}),f=[{id:"revenue_analysis",name:"Revenue Analysis",description:"Comprehensive revenue breakdown by routes, depots, and time periods",icon:Es.A,color:"bg-green-100 text-green-800",category:"Financial",fields:["total_revenue","average_fare","booking_count","refund_amount"]},{id:"trip_performance",name:"Trip Performance",description:"Trip completion rates, delays, and operational efficiency metrics",icon:ks.A,color:"bg-blue-100 text-blue-800",category:"Operations",fields:["completed_trips","cancelled_trips","average_delay","occupancy_rate"]},{id:"user_analytics",name:"User Analytics",description:"User registration, activity patterns, and engagement metrics",icon:Ss.A,color:"bg-purple-100 text-purple-800",category:"Users",fields:["new_registrations","active_users","booking_frequency","user_retention"]},{id:"route_efficiency",name:"Route Efficiency",description:"Route performance, popular destinations, and optimization insights",icon:As.A,color:"bg-orange-100 text-orange-800",category:"Routes",fields:["route_popularity","average_journey_time","fuel_efficiency","passenger_load"]},{id:"depot_performance",name:"Depot Performance",description:"Depot-wise operations, staff performance, and resource utilization",icon:gs.A,color:"bg-teal-100 text-teal-800",category:"Depots",fields:["fleet_utilization","staff_efficiency","maintenance_cost","operational_hours"]},{id:"financial_summary",name:"Financial Summary",description:"Complete financial overview with profit/loss and expense analysis",icon:js.A,color:"bg-indigo-100 text-indigo-800",category:"Financial",fields:["gross_revenue","operational_cost","net_profit","expense_breakdown"]},{id:"real_time_dashboard",name:"Real-time Dashboard",description:"Live operational metrics and system performance indicators",icon:Ds.A,color:"bg-red-100 text-red-800",category:"Operations",fields:["active_trips","live_bookings","system_load","alert_count"]},{id:"predictive_analytics",name:"Predictive Analytics",description:"AI-powered insights for demand forecasting and optimization",icon:Fp.A,color:"bg-yellow-100 text-yellow-800",category:"Analytics",fields:["demand_forecast","peak_hours","seasonal_trends","optimization_suggestions"]}];(0,r.useEffect)(()=>{y()},[]);const y=async()=>{try{l(!0);const e=await fetch("/api/admin/reports",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();i(t.reports||[])}}catch(e){console.error("Error fetching reports:",e)}finally{l(!1)}},b=async e=>{try{l(!0),d(e),console.log("\ud83d\udcca Generating report:",e),console.log("\ud83d\udcc5 Date range:",u),console.log("\ud83d\udd0d Filters:",x);const t=new URLSearchParams({startDate:u.startDate,endDate:u.endDate,depot:x.depot,route:x.route,status:x.status});console.log("\ud83c\udf10 API URL:","/api/admin/reports/".concat(e,"?").concat(t));const s=await fetch("/api/admin/reports/".concat(e,"?").concat(t),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(console.log("\ud83d\udce1 Report response status:",s.status),s.ok){const e=await s.json();console.log("\ud83d\udcc8 Report data received:",e),p(e)}else{console.error("\u274c Report generation failed:",s.status);const e=await s.text();console.error("Error response:",e),alert("Failed to generate report: ".concat(s.status))}}catch(t){console.error("\ud83d\udca5 Error generating report:",t),alert("Error generating report. Check console for details.")}finally{l(!1)}},v=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pdf";try{const t=new URLSearchParams({startDate:u.startDate,endDate:u.endDate,format:e}),s=await fetch("/api/admin/reports/".concat(c,"/export?").concat(t),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(s.ok){const t=await s.blob(),r=window.URL.createObjectURL(t),a=document.createElement("a");a.style.display="none",a.href=r,a.download="report-".concat(c,"-").concat((new Date).toISOString().split("T")[0],".").concat(e),document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(r)}}catch(t){console.error("Error exporting report:",t)}};return(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,cs.jsx)("div",{className:"px-6 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports & Analytics"}),(0,cs.jsx)("p",{className:"text-gray-600 mt-1",children:"Comprehensive business intelligence and performance analytics"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("button",{onClick:y,className:"px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors",children:(0,cs.jsx)(Od.A,{className:"w-5 h-5"})}),(0,cs.jsxs)("button",{onClick:async()=>{try{console.log("\ud83e\uddea Testing Reports API...");const t=await fetch("/api/admin/test-reports",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(console.log("\ud83d\udce1 Test Reports API status:",t.status),t.ok){const s=await t.json();console.log("\u2705 Test Reports API data:",s);const r=await fetch("/api/admin/reports",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(console.log("\ud83d\udce1 Reports API status:",r.status),r.ok){var e;const t=await r.json();console.log("\ud83d\udcca Reports API data:",t),alert("Reports API working! Found ".concat((null===(e=t.reports)||void 0===e?void 0:e.length)||0," report templates."))}else alert("Main Reports API failed: ".concat(r.status))}else alert("Test Reports API failed: ".concat(t.status))}catch(t){console.error("Reports API test error:",t),alert("Reports API test failed. Check console.")}},className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Ds.A,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Test API"})]}),(0,cs.jsxs)("button",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-2 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 flex items-center space-x-2 shadow-lg",children:[(0,cs.jsx)(hd.A,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Export All"})]})]})]})})}),(0,cs.jsxs)("div",{className:"px-6 py-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,cs.jsx)("div",{className:"lg:col-span-1",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 sticky top-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Report Templates"}),(0,cs.jsx)("div",{className:"space-y-3",children:f.map(e=>{const t=e.icon;return(0,cs.jsxs)("button",{onClick:()=>b(e.id),className:"w-full text-left p-4 rounded-lg border transition-all ".concat(c===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 rounded-lg ".concat(e.color),children:(0,cs.jsx)(t,{className:"w-5 h-5"})}),(0,cs.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:e.category})]})]}),(0,cs.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:e.description})]},e.id)})}),(0,cs.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,cs.jsx)("h4",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Filters"}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Date Range"}),(0,cs.jsxs)("div",{className:"space-y-2",children:[(0,cs.jsx)("input",{type:"date",value:u.startDate,onChange:e=>h((0,Ie.A)((0,Ie.A)({},u),{},{startDate:e.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,cs.jsx)("input",{type:"date",value:u.endDate,onChange:e=>h((0,Ie.A)((0,Ie.A)({},u),{},{endDate:e.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Depot"}),(0,cs.jsxs)("select",{value:x.depot,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{depot:e.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"all",children:"All Depots"}),(0,cs.jsx)("option",{value:"depot1",children:"Central Depot"}),(0,cs.jsx)("option",{value:"depot2",children:"North Depot"}),(0,cs.jsx)("option",{value:"depot3",children:"South Depot"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Status"}),(0,cs.jsxs)("select",{value:x.status,onChange:e=>g((0,Ie.A)((0,Ie.A)({},x),{},{status:e.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"all",children:"All Status"}),(0,cs.jsx)("option",{value:"completed",children:"Completed"}),(0,cs.jsx)("option",{value:"running",children:"Running"}),(0,cs.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})]})]})]})}),(0,cs.jsx)("div",{className:"lg:col-span-3 space-y-6",children:c?(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:r.createElement((e=>{const t=f.find(t=>t.id===e);return(null===t||void 0===t?void 0:t.icon)||js.A})(c),{className:"w-6 h-6 text-blue-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:null===(e=f.find(e=>e.id===c))||void 0===e?void 0:e.name}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600",children:[u.startDate," to ",u.endDate]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsxs)("button",{onClick:()=>v("pdf"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(hd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"PDF"})]}),(0,cs.jsxs)("button",{onClick:()=>v("excel"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(hd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Excel"})]}),(0,cs.jsx)("button",{onClick:()=>{d(null),p(null)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"})]})]})}),o?(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Generating report..."})]}):m?(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:null===(t=m.metrics)||void 0===t?void 0:t.map((e,t)=>(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.label}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.value}),e.change&&(0,cs.jsxs)("div",{className:"flex items-center mt-2 text-sm ".concat(e.change>0?"text-green-600":"text-red-600"),children:[e.change>0?(0,cs.jsx)(xu.A,{className:"w-4 h-4 mr-1"}):(0,cs.jsx)(yV.A,{className:"w-4 h-4 mr-1"}),Math.abs(e.change),"%"]})]}),(0,cs.jsx)("div",{className:"p-3 rounded-lg ".concat(e.color||"bg-blue-100"),children:r.createElement(e.icon||js.A,{className:"w-6 h-6 ".concat(e.iconColor||"text-blue-600")})})]})},t))}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Trend Analysis"}),(0,cs.jsx)("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)(Bh,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-500",children:"Chart visualization"}),(0,cs.jsx)("p",{className:"text-sm text-gray-400",children:"Integration with chart library required"})]})})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Distribution"}),(0,cs.jsx)("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)(Ms.A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-500",children:"Pie chart visualization"}),(0,cs.jsx)("p",{className:"text-sm text-gray-400",children:"Integration with chart library required"})]})})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,cs.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,cs.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"Detailed Data"})}),(0,cs.jsx)("div",{className:"overflow-x-auto",children:(0,cs.jsxs)("table",{className:"w-full",children:[(0,cs.jsx)("thead",{className:"bg-gray-50",children:(0,cs.jsx)("tr",{children:null===(s=m.columns)||void 0===s?void 0:s.map((e,t)=>(0,cs.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e},t))})}),(0,cs.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:null===(a=m.rows)||void 0===a?void 0:a.map((e,t)=>(0,cs.jsx)("tr",{className:"hover:bg-gray-50",children:e.map((e,t)=>(0,cs.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e},t))},t))})]})})]})]}):(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[(0,cs.jsx)(vd.A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Data Available"}),(0,cs.jsx)("p",{className:"text-gray-500",children:"Unable to generate report with current filters"})]})]}):(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[(0,cs.jsx)(js.A,{className:"w-16 h-16 text-gray-300 mx-auto mb-6"}),(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Select a Report Template"}),(0,cs.jsx)("p",{className:"text-gray-600 mb-6",children:"Choose from the available report templates to generate comprehensive analytics"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-md mx-auto",children:[(0,cs.jsxs)("button",{onClick:()=>b("revenue_analysis"),className:"p-4 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition-colors",children:[(0,cs.jsx)(Es.A,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-green-800",children:"Revenue Report"})]}),(0,cs.jsxs)("button",{onClick:()=>b("trip_performance"),className:"p-4 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors",children:[(0,cs.jsx)(ks.A,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-blue-800",children:"Trip Performance"})]})]})]})})]}),!c&&(0,cs.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Reports"}),(0,cs.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:"24"})]}),(0,cs.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,cs.jsx)(GM.A,{className:"w-6 h-6 text-blue-600"})})]}),(0,cs.jsxs)("div",{className:"mt-4 flex items-center text-sm text-green-600",children:[(0,cs.jsx)(xu.A,{className:"w-4 h-4 mr-1"}),(0,cs.jsx)("span",{children:"+3 this month"})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Data Sources"}),(0,cs.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:"8"})]}),(0,cs.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,cs.jsx)(Ds.A,{className:"w-6 h-6 text-green-600"})})]}),(0,cs.jsxs)("div",{className:"mt-4 flex items-center text-sm text-gray-500",children:[(0,cs.jsx)(jd.A,{className:"w-4 h-4 mr-1"}),(0,cs.jsx)("span",{children:"All connected"})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Last Export"}),(0,cs.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:"2h"})]}),(0,cs.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg",children:(0,cs.jsx)(hd.A,{className:"w-6 h-6 text-purple-600"})})]}),(0,cs.jsxs)("div",{className:"mt-4 flex items-center text-sm text-gray-500",children:[(0,cs.jsx)(sd.A,{className:"w-4 h-4 mr-1"}),(0,cs.jsx)("span",{children:"ago"})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Scheduled Reports"}),(0,cs.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:"5"})]}),(0,cs.jsx)("div",{className:"p-3 bg-orange-100 rounded-lg",children:(0,cs.jsx)(fs.A,{className:"w-6 h-6 text-orange-600"})})]}),(0,cs.jsxs)("div",{className:"mt-4 flex items-center text-sm text-blue-600",children:[(0,cs.jsx)(pd,{className:"w-4 h-4 mr-1"}),(0,cs.jsx)("span",{children:"Auto-generated"})]})]})]})]})]})},vV=()=>{const[e,t]=(0,r.useState)("general"),[s,a]=(0,r.useState)({general:{siteName:"Yatrik ERP",siteDescription:"Advanced Bus Management System",timezone:"Asia/Kolkata",language:"en",currency:"INR",dateFormat:"DD/MM/YYYY",timeFormat:"24h"},security:{passwordMinLength:8,passwordRequireSpecial:!0,sessionTimeout:30,twoFactorEnabled:!1,loginAttempts:5,lockoutDuration:15,ipWhitelist:[],encryptionLevel:"AES-256"},notifications:{emailEnabled:!0,smsEnabled:!1,pushEnabled:!0,adminAlerts:!0,systemAlerts:!0,bookingAlerts:!0,maintenanceAlerts:!0},api:{rateLimit:1e3,corsEnabled:!0,allowedOrigins:["http://localhost:3000"],apiVersion:"v1",debugMode:!1,logLevel:"info"},database:{connectionPool:10,queryTimeout:30,backupEnabled:!0,backupFrequency:"daily",retentionDays:30,compressionEnabled:!0},payment:{gatewayEnabled:!0,testMode:!1,merchantId:"",secretKey:"",webhookUrl:"",autoRefund:!1,refundWindow:24}}),[n,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),u=[{key:"general",label:"General",icon:Os.A},{key:"security",label:"Security",icon:Ps},{key:"notifications",label:"Notifications",icon:Vs},{key:"api",label:"API Settings",icon:Ls},{key:"database",label:"Database",icon:Rs},{key:"payment",label:"Payments",icon:Es.A}];(0,r.useEffect)(()=>{h()},[]);const h=async()=>{try{i(!0);const e=await fetch("/api/admin/settings",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();a(t.settings||s)}}catch(e){console.error("Error fetching settings:",e)}finally{i(!1)}},m=async()=>{try{l(!0);(await fetch("/api/admin/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(s)})).ok&&alert("Settings saved successfully!")}catch(e){console.error("Error saving settings:",e),alert("Failed to save settings. Please try again.")}finally{l(!1)}},p=(e,t,s)=>{a(r=>(0,Ie.A)((0,Ie.A)({},r),{},{[e]:(0,Ie.A)((0,Ie.A)({},r[e]),{},{[t]:s})}))},x=async e=>{try{(await fetch("/api/admin/test/".concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).ok?alert("".concat(e," connection test successful!")):alert("".concat(e," connection test failed!"))}catch(t){alert("".concat(e," connection test error: ").concat(t.message))}};return(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,cs.jsx)("div",{className:"px-6 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"System Settings"}),(0,cs.jsx)("p",{className:"text-gray-600 mt-1",children:"Configure system-wide settings and preferences"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("button",{onClick:h,className:"px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors",children:(0,cs.jsx)(Od.A,{className:"w-5 h-5"})}),(0,cs.jsxs)("button",{onClick:m,disabled:o,className:"bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-2 rounded-lg hover:from-green-700 hover:to-green-800 transition-all duration-200 flex items-center space-x-2 shadow-lg disabled:opacity-50",children:[(0,cs.jsx)(Uh.A,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:o?"Saving...":"Save Changes"})]})]})]})})}),(0,cs.jsx)("div",{className:"px-6 py-6",children:(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,cs.jsx)("div",{className:"lg:col-span-1",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 sticky top-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Settings Categories"}),(0,cs.jsx)("nav",{className:"space-y-2",children:u.map(s=>{const r=s.icon;return(0,cs.jsxs)("button",{onClick:()=>t(s.key),className:"w-full text-left px-4 py-3 rounded-lg transition-all flex items-center space-x-3 ".concat(e===s.key?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-700 hover:bg-gray-100"),children:[(0,cs.jsx)(r,{className:"w-5 h-5"}),(0,cs.jsx)("span",{className:"font-medium",children:s.label})]},s.key)})})]})}),(0,cs.jsx)("div",{className:"lg:col-span-3",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:["general"===e&&(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"General Settings"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Basic system configuration and preferences"})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Name"}),(0,cs.jsx)("input",{type:"text",value:s.general.siteName,onChange:e=>p("general","siteName",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),(0,cs.jsxs)("select",{value:s.general.timezone,onChange:e=>p("general","timezone",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"Asia/Kolkata",children:"Asia/Kolkata (IST)"}),(0,cs.jsx)("option",{value:"UTC",children:"UTC"}),(0,cs.jsx)("option",{value:"America/New_York",children:"America/New_York (EST)"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),(0,cs.jsxs)("select",{value:s.general.currency,onChange:e=>p("general","currency",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"INR",children:"INR (\u20b9)"}),(0,cs.jsx)("option",{value:"USD",children:"USD ($)"}),(0,cs.jsx)("option",{value:"EUR",children:"EUR (\u20ac)"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Format"}),(0,cs.jsxs)("select",{value:s.general.dateFormat,onChange:e=>p("general","dateFormat",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),(0,cs.jsx)("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),(0,cs.jsx)("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Description"}),(0,cs.jsx)("textarea",{value:s.general.siteDescription,onChange:e=>p("general","siteDescription",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3"})]})]}),"security"===e&&(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Security Settings"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Configure authentication and security policies"})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password Minimum Length"}),(0,cs.jsx)("input",{type:"number",value:s.security.passwordMinLength,onChange:e=>p("security","passwordMinLength",parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"6",max:"20"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (minutes)"}),(0,cs.jsx)("input",{type:"number",value:s.security.sessionTimeout,onChange:e=>p("security","sessionTimeout",parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"5",max:"480"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Login Attempts"}),(0,cs.jsx)("input",{type:"number",value:s.security.loginAttempts,onChange:e=>p("security","loginAttempts",parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"3",max:"10"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lockout Duration (minutes)"}),(0,cs.jsx)("input",{type:"number",value:s.security.lockoutDuration,onChange:e=>p("security","lockoutDuration",parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",max:"60"})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Require Special Characters"}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Passwords must include special characters"})]}),(0,cs.jsx)("button",{onClick:()=>p("security","passwordRequireSpecial",!s.security.passwordRequireSpecial),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(s.security.passwordRequireSpecial?"bg-blue-600":"bg-gray-200"),children:(0,cs.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(s.security.passwordRequireSpecial?"translate-x-6":"translate-x-1")})})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Two-Factor Authentication"}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Enable 2FA for all admin users"})]}),(0,cs.jsx)("button",{onClick:()=>p("security","twoFactorEnabled",!s.security.twoFactorEnabled),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(s.security.twoFactorEnabled?"bg-blue-600":"bg-gray-200"),children:(0,cs.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(s.security.twoFactorEnabled?"translate-x-6":"translate-x-1")})})]})]})]}),"notifications"===e&&(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Notification Settings"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Configure system notifications and alerts"})]}),(0,cs.jsx)("div",{className:"space-y-4",children:[{key:"emailEnabled",label:"Email Notifications",description:"Send notifications via email"},{key:"smsEnabled",label:"SMS Notifications",description:"Send notifications via SMS"},{key:"pushEnabled",label:"Push Notifications",description:"Send browser push notifications"},{key:"adminAlerts",label:"Admin Alerts",description:"Receive administrative alerts"},{key:"systemAlerts",label:"System Alerts",description:"Receive system health alerts"},{key:"bookingAlerts",label:"Booking Alerts",description:"Receive booking-related alerts"},{key:"maintenanceAlerts",label:"Maintenance Alerts",description:"Receive maintenance notifications"}].map(e=>(0,cs.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.label}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]}),(0,cs.jsx)("button",{onClick:()=>p("notifications",e.key,!s.notifications[e.key]),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(s.notifications[e.key]?"bg-blue-600":"bg-gray-200"),children:(0,cs.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(s.notifications[e.key]?"translate-x-6":"translate-x-1")})})]},e.key))})]}),"api"===e&&(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"API Configuration"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Configure API settings and security"})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rate Limit (requests/hour)"}),(0,cs.jsx)("input",{type:"number",value:s.api.rateLimit,onChange:e=>p("api","rateLimit",parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Log Level"}),(0,cs.jsxs)("select",{value:s.api.logLevel,onChange:e=>p("api","logLevel",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"error",children:"Error"}),(0,cs.jsx)("option",{value:"warn",children:"Warning"}),(0,cs.jsx)("option",{value:"info",children:"Info"}),(0,cs.jsx)("option",{value:"debug",children:"Debug"})]})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"CORS Enabled"}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Allow cross-origin requests"})]}),(0,cs.jsx)("button",{onClick:()=>p("api","corsEnabled",!s.api.corsEnabled),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(s.api.corsEnabled?"bg-blue-600":"bg-gray-200"),children:(0,cs.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(s.api.corsEnabled?"translate-x-6":"translate-x-1")})})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Debug Mode"}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Enable detailed API logging"})]}),(0,cs.jsx)("button",{onClick:()=>p("api","debugMode",!s.api.debugMode),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(s.api.debugMode?"bg-blue-600":"bg-gray-200"),children:(0,cs.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(s.api.debugMode?"translate-x-6":"translate-x-1")})})]})]}),(0,cs.jsx)("div",{className:"mt-6",children:(0,cs.jsx)("button",{onClick:()=>x("api"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Test API Connection"})})]}),"database"===e&&(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Database Configuration"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Database connection and backup settings"})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Connection Pool Size"}),(0,cs.jsx)("input",{type:"number",value:s.database.connectionPool,onChange:e=>p("database","connectionPool",parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",max:"50"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Query Timeout (seconds)"}),(0,cs.jsx)("input",{type:"number",value:s.database.queryTimeout,onChange:e=>p("database","queryTimeout",parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"5",max:"120"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backup Frequency"}),(0,cs.jsxs)("select",{value:s.database.backupFrequency,onChange:e=>p("database","backupFrequency",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"hourly",children:"Hourly"}),(0,cs.jsx)("option",{value:"daily",children:"Daily"}),(0,cs.jsx)("option",{value:"weekly",children:"Weekly"}),(0,cs.jsx)("option",{value:"monthly",children:"Monthly"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Retention Days"}),(0,cs.jsx)("input",{type:"number",value:s.database.retentionDays,onChange:e=>p("database","retentionDays",parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"7",max:"365"})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Backup Enabled"}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Automatic database backups"})]}),(0,cs.jsx)("button",{onClick:()=>p("database","backupEnabled",!s.database.backupEnabled),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(s.database.backupEnabled?"bg-blue-600":"bg-gray-200"),children:(0,cs.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(s.database.backupEnabled?"translate-x-6":"translate-x-1")})})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Compression"}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Enable backup compression"})]}),(0,cs.jsx)("button",{onClick:()=>p("database","compressionEnabled",!s.database.compressionEnabled),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(s.database.compressionEnabled?"bg-blue-600":"bg-gray-200"),children:(0,cs.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(s.database.compressionEnabled?"translate-x-6":"translate-x-1")})})]})]}),(0,cs.jsxs)("div",{className:"flex space-x-4",children:[(0,cs.jsx)("button",{onClick:()=>x("database"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Test Connection"}),(0,cs.jsx)("button",{onClick:()=>x("backup"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Test Backup"})]})]}),"payment"===e&&(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Gateway Settings"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Configure payment processing and gateway settings"})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Merchant ID"}),(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)("input",{type:c?"text":"password",value:s.payment.merchantId,onChange:e=>p("payment","merchantId",e.target.value),className:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter merchant ID"}),(0,cs.jsx)("button",{type:"button",onClick:()=>d(!c),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:c?(0,cs.jsx)(ju,{className:"w-5 h-5 text-gray-400"}):(0,cs.jsx)(Nu.A,{className:"w-5 h-5 text-gray-400"})})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Refund Window (hours)"}),(0,cs.jsx)("input",{type:"number",value:s.payment.refundWindow,onChange:e=>p("payment","refundWindow",parseInt(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",max:"168"})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Gateway Enabled"}),(0,cs.jsx)("p",{className:"text-xs text-gray-500",children:"Enable payment processing"})]}),(0,cs.jsx)("button",{onClick:()=>p("payment","gatewayEnabled",!s.payment.gatewayEnabled),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(s.payment.gatewayEnabled?"bg-blue-600":"bg-gray-200"),children:(0,cs.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(s.payment.gatewayEnabled?"translate-x-6":"translate-x-1")})})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-yellow-800",children:"Test Mode"}),(0,cs.jsx)("p",{className:"text-xs text-yellow-600",children:"Use sandbox environment for testing"})]}),(0,cs.jsx)("button",{onClick:()=>p("payment","testMode",!s.payment.testMode),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(s.payment.testMode?"bg-yellow-600":"bg-gray-200"),children:(0,cs.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(s.payment.testMode?"translate-x-6":"translate-x-1")})})]})]}),(0,cs.jsx)("div",{className:"mt-6",children:(0,cs.jsx)("button",{onClick:()=>x("payment"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Test Payment Gateway"})})]}),(0,cs.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200 flex justify-between",children:[(0,cs.jsx)("button",{onClick:()=>{return t=e,void(window.confirm("Reset ".concat(t," settings to default values?"))&&alert("".concat(t," settings reset to defaults")));var t},className:"px-4 py-2 text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition-colors",children:"Reset to Defaults"}),(0,cs.jsxs)("div",{className:"flex space-x-3",children:[(0,cs.jsx)("button",{onClick:h,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Discard Changes"}),(0,cs.jsx)("button",{onClick:m,disabled:o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:o?"Saving...":"Save Settings"})]})]})]})})]})})]})},jV=()=>(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Time Table Management"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Manage bus schedules and timetables"})]}),(0,cs.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,cs.jsx)("p",{className:"text-gray-500",children:"Time table management functionality will be implemented here."}),(0,cs.jsx)("p",{className:"text-gray-500 mt-2",children:"This will include:"}),(0,cs.jsxs)("ul",{className:"list-disc list-inside text-gray-500 mt-2 ml-4",children:[(0,cs.jsx)("li",{children:"Create and manage bus schedules"}),(0,cs.jsx)("li",{children:"Set departure and arrival times"}),(0,cs.jsx)("li",{children:"Handle route timing"}),(0,cs.jsx)("li",{children:"Manage seasonal schedules"})]})]})]}),NV=()=>(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Reservation Management"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Manage all bus reservations and bookings"})]}),(0,cs.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,cs.jsx)("p",{className:"text-gray-500",children:"Reservation management functionality will be implemented here."}),(0,cs.jsx)("p",{className:"text-gray-500 mt-2",children:"This will include:"}),(0,cs.jsxs)("ul",{className:"list-disc list-inside text-gray-500 mt-2 ml-4",children:[(0,cs.jsx)("li",{children:"View all reservations"}),(0,cs.jsx)("li",{children:"Handle booking confirmations"}),(0,cs.jsx)("li",{children:"Manage cancellations"}),(0,cs.jsx)("li",{children:"Track reservation status"})]})]})]}),wV=()=>(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Complaint Management"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Handle customer complaints and feedback"})]}),(0,cs.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,cs.jsx)("p",{className:"text-gray-500",children:"Complaint management functionality will be implemented here."}),(0,cs.jsx)("p",{className:"text-gray-500 mt-2",children:"This will include:"}),(0,cs.jsxs)("ul",{className:"list-disc list-inside text-gray-500 mt-2 ml-4",children:[(0,cs.jsx)("li",{children:"View customer complaints"}),(0,cs.jsx)("li",{children:"Assign complaints to staff"}),(0,cs.jsx)("li",{children:"Track resolution status"}),(0,cs.jsx)("li",{children:"Generate complaint reports"})]})]})]}),kV=()=>(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Driver Conflict Management"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Resolve driver scheduling conflicts"})]}),(0,cs.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,cs.jsx)("p",{className:"text-gray-500",children:"Driver conflict management functionality will be implemented here."}),(0,cs.jsx)("p",{className:"text-gray-500 mt-2",children:"This will include:"}),(0,cs.jsxs)("ul",{className:"list-disc list-inside text-gray-500 mt-2 ml-4",children:[(0,cs.jsx)("li",{children:"Identify scheduling conflicts"}),(0,cs.jsx)("li",{children:"Resolve overlapping duties"}),(0,cs.jsx)("li",{children:"Manage driver availability"}),(0,cs.jsx)("li",{children:"Optimize driver assignments"})]})]})]}),AV=()=>(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Upcoming Payments"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Track and manage upcoming payment obligations"})]}),(0,cs.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,cs.jsx)("p",{className:"text-gray-500",children:"Upcoming payments management functionality will be implemented here."}),(0,cs.jsx)("p",{className:"text-gray-500 mt-2",children:"This will include:"}),(0,cs.jsxs)("ul",{className:"list-disc list-inside text-gray-500 mt-2 ml-4",children:[(0,cs.jsx)("li",{children:"View pending payments"}),(0,cs.jsx)("li",{children:"Track payment due dates"}),(0,cs.jsx)("li",{children:"Manage payment reminders"}),(0,cs.jsx)("li",{children:"Generate payment reports"})]})]})]}),SV=()=>(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment History"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"View and analyze completed payment transactions"})]}),(0,cs.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,cs.jsx)("p",{className:"text-gray-500",children:"Payment history management functionality will be implemented here."}),(0,cs.jsx)("p",{className:"text-gray-500 mt-2",children:"This will include:"}),(0,cs.jsxs)("ul",{className:"list-disc list-inside text-gray-500 mt-2 ml-4",children:[(0,cs.jsx)("li",{children:"View completed payments"}),(0,cs.jsx)("li",{children:"Search payment records"}),(0,cs.jsx)("li",{children:"Generate payment reports"}),(0,cs.jsx)("li",{children:"Track payment trends"})]})]})]}),CV=()=>(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Revenue Reports"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Analyze revenue and financial performance"})]}),(0,cs.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,cs.jsx)("p",{className:"text-gray-500",children:"Revenue reporting functionality will be implemented here."}),(0,cs.jsx)("p",{className:"text-gray-500 mt-2",children:"This will include:"}),(0,cs.jsxs)("ul",{className:"list-disc list-inside text-gray-500 mt-2 ml-4",children:[(0,cs.jsx)("li",{children:"Revenue analytics dashboard"}),(0,cs.jsx)("li",{children:"Profit and loss statements"}),(0,cs.jsx)("li",{children:"Revenue trend analysis"}),(0,cs.jsx)("li",{children:"Financial performance metrics"})]})]})]});function _V(){const e=te(),{user:t,loading:s}=(0,Re.A)();return(0,r.useEffect)(()=>{if(!s)if(t)try{const s=(t.role||"").toLowerCase().trim(),r=(t.email||"").toLowerCase();console.log("RedirectDashboard - User data:",{role:s,email:r,userId:t._id,userName:t.name});const a=/^[a-z0-9]+-depot@yatrik\.com$/.test(r);let n="/pax";console.log("RedirectDashboard - Analyzing user:",{role:s,email:r,isDepotEmail:a,userDepotId:t.depotId,userDepotCode:t.depotCode,userDepotName:t.depotName,isDepotUser:t.isDepotUser}),"admin"===s||"administrator"===s?(n="/admin",console.log("Redirecting admin user to:",n)):"depot_manager"===s||"depot-manager"===s||"depotmanager"===s||a||t.isDepotUser||t.depotId?(n="/depot",console.log("Redirecting depot user to:",n,{reason:"depot_manager"===s?"role":a?"email_pattern":t.isDepotUser?"isDepotUser_flag":t.depotId?"depotId_present":"unknown"})):"conductor"===s?(n="/conductor",console.log("Redirecting conductor to:",n)):"driver"===s?(n="/driver",console.log("Redirecting driver to:",n)):(n="/pax",console.log("Redirecting passenger to:",n)),console.log("Final destination: ".concat(n," for role: ").concat(s)),e(n,{replace:!0})}catch(r){console.error("Redirect error:",r),console.error("User data that caused error:",t),e("/pax",{replace:!0})}else e("/login",{replace:!0})},[e,t,s]),s?(0,cs.jsx)(ms,{fullScreen:!0,text:"Loading..."}):null}const TV=()=>{const e=te(),[t,s]=(0,r.useState)(!1),[a,n]=(0,r.useState)("idle"),[i,o]=(0,r.useState)(0),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)([]),[h,m]=(0,r.useState)({totalBuses:0,totalRoutes:0,totalTrips:0,scheduledToday:0,activeTrips:0,utilizationRate:0,efficiencyScore:0}),[p,x]=(0,r.useState)([]),[g,f]=(0,r.useState)([]),[y,b]=(0,r.useState)([]),[v,j]=(0,r.useState)([]),[N,w]=(0,r.useState)({targetDate:(new Date).toISOString().split("T")[0],selectedDepots:[],maxTripsPerRoute:8,timeGap:30,autoAssignCrew:!0,autoAssignBuses:!0,generateReports:!0}),[k,A]=(0,r.useState)({tripsCreated:0,busesAssigned:0,driversAssigned:0,conductorsAssigned:0,errors:0,warnings:0});(0,r.useEffect)(()=>{S();const e=setInterval(C,5e3);return()=>clearInterval(e)},[]);const S=async()=>{s(!0);try{var e,t,r,a,n,i,o,l,c;console.log("\ud83d\udd04 Fetching initial data for Mass Scheduling Dashboard...");const[s,d,u,h,p]=await Promise.all([(0,xs.nr)("/api/auto-scheduler/stats"),(0,xs.nr)("/api/admin/depots"),(0,xs.nr)("/api/admin/routes"),(0,xs.nr)("/api/admin/buses"),(0,xs.nr)("/api/admin/trips")]);console.log("\ud83d\udcca Raw API responses:",{stats:s,depots:d,routes:u,buses:h,trips:p});const g=null!==(e=null===s||void 0===s?void 0:s.data)&&void 0!==e?e:{},y=g&&(g.data||g)||{};m({totalBuses:Number(y.totalBuses)||0,totalRoutes:Number(y.totalRoutes)||0,scheduledToday:Number(y.scheduledToday)||0,efficiencyScore:Number(y.efficiencyScore)||0,utilizationRate:Number(y.utilizationRate)||0});const v=(null===d||void 0===d||null===(t=d.data)||void 0===t?void 0:t.depots)||(null===d||void 0===d?void 0:d.data)||(null===d||void 0===d?void 0:d.depots)||d||[],N=(null===u||void 0===u||null===(r=u.data)||void 0===r?void 0:r.routes)||(null===u||void 0===u?void 0:u.data)||(null===u||void 0===u?void 0:u.routes)||u||[],w=(null===h||void 0===h||null===(a=h.data)||void 0===a?void 0:a.buses)||(null===h||void 0===h||null===(n=h.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.buses)||(null===h||void 0===h?void 0:h.data)||(null===h||void 0===h?void 0:h.buses)||h||[],k=(null===p||void 0===p||null===(o=p.data)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.trips)||(null===p||void 0===p||null===(c=p.data)||void 0===c?void 0:c.trips)||(null===p||void 0===p?void 0:p.data)||(null===p||void 0===p?void 0:p.trips)||p||[];console.log("\ud83d\udcc8 Extracted data counts:",{depots:v.length,routes:N.length,buses:w.length,trips:k.length}),x(Array.isArray(v)?v:[]),f(Array.isArray(N)?N:[]),b(Array.isArray(w)?w:[]),j(Array.isArray(k)?k:[]),0===w.length&&(console.warn("\u26a0\ufe0f No buses found - check if buses are created in Streamlined Bus Management"),Oe.oR.error("No buses found. Please create buses in Streamlined Bus Management first.")),0===N.length&&(console.warn("\u26a0\ufe0f No routes found - check if routes are created in Streamlined Route Management"),Oe.oR.error("No routes found. Please create routes in Streamlined Route Management first.")),0===v.length&&(console.warn("\u26a0\ufe0f No depots found - check if depots are created"),Oe.oR.error("No depots found. Please create depots first."))}catch(d){console.error("\u274c Error fetching initial data:",d),Oe.oR.error("Failed to fetch initial data. Please check your connection and try again.")}finally{s(!1)}},C=async()=>{try{var e;const t=await(0,xs.nr)("/api/auto-scheduler/realtime-stats"),s=null!==(e=null===t||void 0===t?void 0:t.data)&&void 0!==e?e:{},r=s&&(s.data||s)||{};A({tripsCreated:Number(r.tripsCreated)||0,busesAssigned:Number(r.busesAssigned)||0,driversAssigned:Number(r.driversAssigned)||0,conductorsAssigned:Number(r.conductorsAssigned)||0,errors:Number(r.errors)||0,warnings:Number(r.warnings)||0})}catch(t){console.error("Error fetching realtime stats:",t)}},_=async()=>{try{await(0,xs.nr)("/api/auto-scheduler/stop",{method:"POST"}),n("stopped"),c("Scheduling stopped by user"),Oe.oR.info("Scheduling stopped")}catch(e){console.error("Error stopping scheduler:",e),Oe.oR.error("Failed to stop scheduler")}},T=async()=>{try{s(!0);const e=await(0,xs.nr)("/api/auto-scheduler/generate-report",{method:"POST",body:JSON.stringify({date:N.targetDate,includeAnalytics:!0,includeRecommendations:!0})});if(e.success){const t=new Blob([JSON.stringify(e.data,null,2)],{type:"application/json"}),s=window.URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download="scheduling-report-".concat(N.targetDate,".json"),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(s),document.body.removeChild(r),Oe.oR.success("Report generated and downloaded")}}catch(e){console.error("Error generating report:",e),Oe.oR.error("Failed to generate report")}finally{s(!1)}},P=async()=>{if(window.confirm("Are you sure you want to clear all scheduled trips for this date?"))try{s(!0);(await(0,xs.nr)("/api/auto-scheduler/clear-schedule",{method:"POST",body:JSON.stringify({date:N.targetDate})})).success&&(Oe.oR.success("Schedule cleared successfully"),await S())}catch(e){console.error("Error clearing schedule:",e),Oe.oR.error("Failed to clear schedule")}finally{s(!1)}},E=e=>{let{title:t,value:s,icon:r,color:a,subtitle:n}=e;return(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t}),(0,cs.jsx)("p",{className:"text-2xl font-bold ".concat(a),children:"object"===typeof s?JSON.stringify(s):String(s||0)}),n&&(0,cs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:n})]}),(0,cs.jsx)("div",{className:"p-3 rounded-lg ".concat(a.replace("text-","bg-").replace("-600","-100")),children:(0,cs.jsx)(r,{className:"w-6 h-6 ".concat(a)})})]})})},D=e=>{let{progress:t,status:s,currentOperation:r}=e;return(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Scheduling Progress"}),(0,cs.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("running"===s?"bg-blue-100 text-blue-800":"completed"===s?"bg-green-100 text-green-800":"error"===s?"bg-red-100 text-red-800":"stopped"===s?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:s})]}),(0,cs.jsxs)("div",{className:"mb-4",children:[(0,cs.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[(0,cs.jsx)("span",{children:"Progress"}),(0,cs.jsxs)("span",{children:[t,"%"]})]}),(0,cs.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,cs.jsx)("div",{className:"h-2 rounded-full transition-all duration-500 ".concat("completed"===s?"bg-green-500":"error"===s?"bg-red-500":"stopped"===s?"bg-yellow-500":"bg-blue-500"),style:{width:"".concat(t,"%")}})})]}),r&&(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:r}),d.length>0&&(0,cs.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Activity Log"}),(0,cs.jsx)("div",{className:"max-h-32 overflow-y-auto space-y-1",children:d.slice(-5).reverse().map((e,t)=>(0,cs.jsxs)("div",{className:"flex items-center space-x-2 text-xs",children:[(0,cs.jsx)("span",{className:"text-gray-400",children:e.timestamp}),(0,cs.jsx)("span",{className:"px-2 py-1 rounded-full ".concat("success"===e.type?"bg-green-100 text-green-800":"error"===e.type?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:e.type}),(0,cs.jsx)("span",{className:"text-gray-600",children:e.message})]},t))})]})]})},M=()=>(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Real-time Statistics"}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("p",{className:"text-2xl font-bold text-green-600",children:Number(k.tripsCreated)||0}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Trips Created"})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:Number(k.busesAssigned)||0}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Buses Assigned"})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:Number(k.driversAssigned)||0}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Drivers Assigned"})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:Number(k.conductorsAssigned)||0}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Conductors Assigned"})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("p",{className:"text-2xl font-bold text-red-600",children:Number(k.errors)||0}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Errors"})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:Number(k.warnings)||0}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Warnings"})]})]})]}),O=()=>(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Scheduling Configuration"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Date *"}),(0,cs.jsx)("input",{type:"date",value:N.targetDate,onChange:e=>w(t=>(0,Ie.A)((0,Ie.A)({},t),{},{targetDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Depots *"}),(0,cs.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto border border-gray-200 rounded-lg p-3",children:0===p.length?(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"No depots available. Please create depots first."}):(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsxs)("label",{className:"flex items-center space-x-2 mb-2",children:[(0,cs.jsx)("input",{type:"checkbox",checked:N.selectedDepots.length===p.length,onChange:e=>{e.target.checked?w(e=>(0,Ie.A)((0,Ie.A)({},e),{},{selectedDepots:p.map(e=>e._id)})):w(e=>(0,Ie.A)((0,Ie.A)({},e),{},{selectedDepots:[]}))},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Select All"})]}),p.map(e=>{var t,s;return(0,cs.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("input",{type:"checkbox",checked:N.selectedDepots.includes(e._id),onChange:t=>{t.target.checked?w(t=>(0,Ie.A)((0,Ie.A)({},t),{},{selectedDepots:[...t.selectedDepots,e._id]})):w(t=>(0,Ie.A)((0,Ie.A)({},t),{},{selectedDepots:t.selectedDepots.filter(t=>t!==e._id)}))},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:e.depotName}),(0,cs.jsxs)("span",{className:"text-xs text-gray-500",children:["(",(null===(t=e.location)||void 0===t?void 0:t.city)||(null===(s=e.location)||void 0===s?void 0:s.address)||"Location not set",")"]})]},e._id)})]})}),N.selectedDepots.length>0&&(0,cs.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:[N.selectedDepots.length," depot(s) selected"]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Trips per Route"}),(0,cs.jsx)("input",{type:"number",min:"1",max:"20",value:N.maxTripsPerRoute,onChange:e=>w(t=>(0,Ie.A)((0,Ie.A)({},t),{},{maxTripsPerRoute:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Gap (minutes)"}),(0,cs.jsx)("input",{type:"number",min:"15",max:"120",value:N.timeGap,onChange:e=>w(t=>(0,Ie.A)((0,Ie.A)({},t),{},{timeGap:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h4",{className:"font-medium text-gray-900",children:"Optimization Options"}),(0,cs.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("input",{type:"checkbox",checked:N.autoAssignCrew,onChange:e=>w(t=>(0,Ie.A)((0,Ie.A)({},t),{},{autoAssignCrew:e.target.checked})),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:"Auto-assign drivers and conductors"})]}),(0,cs.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("input",{type:"checkbox",checked:N.autoAssignBuses,onChange:e=>w(t=>(0,Ie.A)((0,Ie.A)({},t),{},{autoAssignBuses:e.target.checked})),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:"Auto-assign buses to routes"})]}),(0,cs.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("input",{type:"checkbox",checked:N.generateReports,onChange:e=>w(t=>(0,Ie.A)((0,Ie.A)({},t),{},{generateReports:e.target.checked})),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:"Generate scheduling reports"})]})]})]})]}),R=()=>(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Scheduling Actions"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,cs.jsxs)("button",{onClick:()=>{console.log("Start Scheduling clicked"),console.log("Config:",N),console.log("Depots available:",p.length),console.log("Selected depots:",N.selectedDepots.length),(async()=>{if(console.log("\ud83d\ude80 Starting mass scheduling..."),console.log("Current config:",N),console.log("Available depots:",p),!N.targetDate)return console.log("\u274c No target date selected"),void Oe.oR.error("Please select a target date");if(0===N.selectedDepots.length)return console.log("\u274c No depots selected"),void Oe.oR.error("Please select at least one depot");if(0===p.length)return console.log("\u274c No depots available"),void Oe.oR.error("No depots available. Please create depots first.");try{console.log("\u2705 Validation passed, starting scheduling..."),s(!0),n("running"),o(0),u([]),c("Initializing mass scheduling...");const t=[{progress:10,operation:"Validating configuration..."},{progress:25,operation:"Fetching available buses and routes..."},{progress:40,operation:"Assigning drivers and conductors..."},{progress:60,operation:"Creating trip schedules..."},{progress:80,operation:"Optimizing routes..."},{progress:95,operation:"Finalizing schedules..."}];let r=0;const a=setInterval(()=>{if(r<t.length){const e=t[r];o(e.progress),c(e.operation),r++}},800);console.log("\ud83d\udce1 Making API call to /api/auto-scheduler/mass-schedule");const i=await(0,xs.nr)("/api/auto-scheduler/mass-schedule",{method:"POST",body:JSON.stringify((0,Ie.A)((0,Ie.A)({},N),{},{date:N.targetDate}))});console.log("\ud83d\udce1 API response received:",i),clearInterval(a);const l=!0===i.ok,d=i.data||{},h=!0===d.success;if(!l||!h){const e=d.message||i.message||d.error||"Scheduling failed";throw Oe.oR.error(e),u(t=>[...t,{timestamp:(new Date).toLocaleTimeString(),message:"Failed: ".concat(e),type:"error"}]),new Error(e)}{o(100),c("Scheduling completed successfully"),n("completed");const t=d.data||{};Oe.oR.success("Mass scheduling completed! Created ".concat(t.tripsCreated," trips with ").concat(t.successRate," success rate")),A({tripsCreated:t.tripsCreated||0,busesAssigned:t.busesAssigned||0,driversAssigned:t.driversAssigned||0,conductorsAssigned:t.conductorsAssigned||0,errors:0,warnings:0}),await S(),u(e=>[...e,{timestamp:(new Date).toLocaleTimeString(),message:"Successfully created ".concat(t.tripsCreated," trips for ").concat(t.totalRoutes," routes"),type:"success"}]),t.date&&e("/admin/streamlined-trips?date=".concat(encodeURIComponent(t.date))),Array.isArray(t.warnings)&&t.warnings.length>0&&t.warnings.slice(0,3).forEach(e=>u(t=>[...t,{timestamp:(new Date).toLocaleTimeString(),message:"Warning: ".concat(e),type:"warning"}]))}}catch(t){console.error("Error in mass scheduling:",t),Oe.oR.error("Mass scheduling failed: ".concat(t.message)),n("error"),c("Scheduling failed: ".concat(t.message)),o(0),u(e=>[...e,{timestamp:(new Date).toLocaleTimeString(),message:"Error: ".concat(t.message),type:"error"}])}finally{s(!1)}})()},disabled:t||"running"===a||!N.targetDate||0===N.selectedDepots.length,className:"p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors disabled:opacity-50 flex items-center space-x-3",title:N.targetDate?0===N.selectedDepots.length?"Please select at least one depot":t||"running"===a?"Scheduling in progress...":"Start mass scheduling":"Please select a target date",children:[(0,cs.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:t&&"running"===a?(0,cs.jsx)(Od.A,{className:"w-5 h-5 text-blue-600 animate-spin"}):(0,cs.jsx)(md.A,{className:"w-5 h-5 text-blue-600"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"font-semibold text-blue-900",children:"Start Scheduling"}),(0,cs.jsx)("p",{className:"text-sm text-blue-700",children:"Begin mass scheduling process"})]})]}),(0,cs.jsxs)("button",{onClick:_,disabled:"running"!==a,className:"p-4 bg-red-50 rounded-lg hover:bg-red-100 transition-colors disabled:opacity-50 flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,cs.jsx)(ym.A,{className:"w-5 h-5 text-red-600"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"font-semibold text-red-900",children:"Stop Scheduling"}),(0,cs.jsx)("p",{className:"text-sm text-red-700",children:"Stop current operation"})]})]}),(0,cs.jsxs)("button",{onClick:T,disabled:t,className:"p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors disabled:opacity-50 flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,cs.jsx)(hd.A,{className:"w-5 h-5 text-green-600"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"font-semibold text-green-900",children:"Generate Report"}),(0,cs.jsx)("p",{className:"text-sm text-green-700",children:"Download scheduling report"})]})]}),(0,cs.jsxs)("button",{onClick:P,disabled:t||!N.targetDate,className:"p-4 bg-orange-50 rounded-lg hover:bg-orange-100 transition-colors disabled:opacity-50 flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,cs.jsx)(Wh.A,{className:"w-5 h-5 text-orange-600"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"font-semibold text-orange-900",children:"Clear Schedule"}),(0,cs.jsx)("p",{className:"text-sm text-orange-700",children:"Remove all scheduled trips"})]})]}),(0,cs.jsxs)("button",{onClick:S,disabled:t,className:"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50 flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-gray-100 rounded-lg",children:(0,cs.jsx)(Od.A,{className:"w-5 h-5 text-gray-600"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"font-semibold text-gray-900",children:"Refresh Data"}),(0,cs.jsx)("p",{className:"text-sm text-gray-700",children:"Update all statistics"})]})]})]}),(0,cs.jsxs)("div",{className:"mt-4 p-3 rounded-lg bg-gray-50",children:[!N.targetDate&&(0,cs.jsxs)("p",{className:"text-sm text-red-600 flex items-center",children:[(0,cs.jsx)("span",{className:"mr-2",children:"\u26a0\ufe0f"}),"Please select a target date to enable scheduling"]}),N.targetDate&&0===N.selectedDepots.length&&(0,cs.jsxs)("p",{className:"text-sm text-red-600 flex items-center",children:[(0,cs.jsx)("span",{className:"mr-2",children:"\u26a0\ufe0f"}),"Please select at least one depot to enable scheduling"]}),N.targetDate&&N.selectedDepots.length>0&&(0,cs.jsxs)("p",{className:"text-sm text-green-600 flex items-center",children:[(0,cs.jsx)("span",{className:"mr-2",children:"\u2705"}),"Ready to start scheduling for ",N.selectedDepots.length," depot(s)"]}),0===p.length&&(0,cs.jsxs)("p",{className:"text-sm text-yellow-600 flex items-center",children:[(0,cs.jsx)("span",{className:"mr-2",children:"\u26a0\ufe0f"}),"No depots available. Please create depots first."]})]})]});return(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center space-x-3",children:[(0,cs.jsx)(pd,{className:"w-8 h-8 text-purple-600"}),(0,cs.jsx)("span",{children:"Mass Scheduling Dashboard"})]}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Automated fleet scheduling with automatic assignments"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("button",{onClick:S,disabled:t,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center space-x-2 disabled:opacity-50",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4 ".concat(t?"animate-spin":"")}),(0,cs.jsx)("span",{children:"Refresh Data"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,cs.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("running"===a?"bg-green-500 animate-pulse":"completed"===a?"bg-green-500":"error"===a?"bg-red-500":"bg-gray-400")}),(0,cs.jsxs)("span",{children:["System Status: ",a]})]})]})]}),(0===y.length||0===g.length||0===p.length)&&(0,cs.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,cs.jsx)(vd.A,{className:"w-6 h-6 text-yellow-600"}),(0,cs.jsx)("h3",{className:"text-lg font-semibold text-yellow-800",children:"Data Setup Required"})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[0===p.length&&(0,cs.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-yellow-200",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,cs.jsx)("h4",{className:"font-medium text-yellow-800",children:"No Depots Found"}),(0,cs.jsx)("span",{className:"text-red-500",children:"\u274c"})]}),(0,cs.jsx)("p",{className:"text-sm text-yellow-700 mb-3",children:"Create depots to enable mass scheduling"}),(0,cs.jsx)("button",{onClick:()=>e("/admin/depots"),className:"text-sm bg-yellow-600 text-white px-3 py-1 rounded hover:bg-yellow-700",children:"Create Depots"})]}),0===y.length&&(0,cs.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-yellow-200",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,cs.jsx)("h4",{className:"font-medium text-yellow-800",children:"No Buses Found"}),(0,cs.jsx)("span",{className:"text-red-500",children:"\u274c"})]}),(0,cs.jsx)("p",{className:"text-sm text-yellow-700 mb-3",children:"Create buses in Streamlined Bus Management"}),(0,cs.jsx)("button",{onClick:()=>e("/admin/streamlined-buses"),className:"text-sm bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700",children:"Create Buses"})]}),0===g.length&&(0,cs.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-yellow-200",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,cs.jsx)("h4",{className:"font-medium text-yellow-800",children:"No Routes Found"}),(0,cs.jsx)("span",{className:"text-red-500",children:"\u274c"})]}),(0,cs.jsx)("p",{className:"text-sm text-yellow-700 mb-3",children:"Create routes in Streamlined Route Management"}),(0,cs.jsx)("button",{onClick:()=>e("/admin/streamlined-routes"),className:"text-sm bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Create Routes"})]})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,cs.jsx)(E,{title:"Total Buses",value:y.length||h.totalBuses||0,icon:ks.A,color:"text-blue-600",subtitle:"".concat(y.filter(e=>"active"===e.status).length," active")}),(0,cs.jsx)(E,{title:"Total Routes",value:g.length||h.totalRoutes||0,icon:As.A,color:"text-green-600",subtitle:"".concat(g.filter(e=>"active"===e.status).length," active")}),(0,cs.jsx)(E,{title:"Scheduled Today",value:v.filter(e=>new Date(e.serviceDate).toDateString()===(new Date).toDateString()).length||h.scheduledToday||0,icon:fs.A,color:"text-purple-600",subtitle:"Trips scheduled"}),(0,cs.jsx)(E,{title:"Total Depots",value:p.length||0,icon:fh,color:"text-indigo-600",subtitle:"Available depots"})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,cs.jsx)(D,{progress:i,status:a,currentOperation:l}),(0,cs.jsx)(M,{})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Integration Status"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg w-fit mx-auto mb-3",children:(0,cs.jsx)(ks.A,{className:"w-6 h-6 text-blue-600"})}),(0,cs.jsx)("h4",{className:"font-semibold text-gray-900",children:"Streamlined Bus Management"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:y.length>0?"".concat(y.length," buses available"):"No buses found"}),(0,cs.jsx)("button",{onClick:()=>e("/admin/streamlined-buses"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View Bus Management \u2192"})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"p-3 bg-green-100 rounded-lg w-fit mx-auto mb-3",children:(0,cs.jsx)(As.A,{className:"w-6 h-6 text-green-600"})}),(0,cs.jsx)("h4",{className:"font-semibold text-gray-900",children:"Streamlined Route Management"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:g.length>0?"".concat(g.length," routes available"):"No routes found"}),(0,cs.jsx)("button",{onClick:()=>e("/admin/streamlined-routes"),className:"text-sm text-green-600 hover:text-green-700 font-medium",children:"View Route Management \u2192"})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg w-fit mx-auto mb-3",children:(0,cs.jsx)(fs.A,{className:"w-6 h-6 text-purple-600"})}),(0,cs.jsx)("h4",{className:"font-semibold text-gray-900",children:"Streamlined Trip Management"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:v.length>0?"".concat(v.length," trips created"):"No trips found"}),(0,cs.jsx)("button",{onClick:()=>e("/admin/streamlined-trips"),className:"text-sm text-purple-600 hover:text-purple-700 font-medium",children:"View Trip Management \u2192"})]})]})]}),(0,cs.jsx)(O,{}),(0,cs.jsx)(R,{}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Health"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"p-3 bg-green-100 rounded-lg w-fit mx-auto mb-3",children:(0,cs.jsx)(Rs,{className:"w-6 h-6 text-green-600"})}),(0,cs.jsx)("h4",{className:"font-semibold text-gray-900",children:"Database"}),(0,cs.jsx)("p",{className:"text-sm text-green-600",children:"Connected"})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"p-3 bg-green-100 rounded-lg w-fit mx-auto mb-3",children:(0,cs.jsx)(Os.A,{className:"w-6 h-6 text-green-600"})}),(0,cs.jsx)("h4",{className:"font-semibold text-gray-900",children:"Auto Scheduler"}),(0,cs.jsx)("p",{className:"text-sm text-green-600",children:"Ready"})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"p-3 bg-green-100 rounded-lg w-fit mx-auto mb-3",children:(0,cs.jsx)(Ps,{className:"w-6 h-6 text-green-600"})}),(0,cs.jsx)("h4",{className:"font-semibold text-gray-900",children:"Security"}),(0,cs.jsx)("p",{className:"text-sm text-green-600",children:"Protected"})]})]})]})]})},PV=e=>{let{isOpen:t,onClose:s,onSave:a}=e;const[n,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null),[m,p]=(0,r.useState)(""),[x,g]=(0,r.useState)("all"),[f,y]=(0,r.useState)("all"),[b,v]=(0,r.useState)({busType:"",routeType:"",baseFarePerKm:0,minimumFare:0,maximumFare:0,distanceBrackets:[{fromKm:0,toKm:50,ratePerKm:0,description:""}],timeBasedPricing:{morning:1,afternoon:1,evening:1,night:1},peakHourMultiplier:1,isActive:!0}),j=[{value:"ordinary",label:"Ordinary",category:"Budget"},{value:"lspf",label:"Limited Stop Fast Passenger",category:"Economy"},{value:"fast_passenger",label:"Fast Passenger",category:"Standard"},{value:"venad",label:"Venad",category:"Budget"},{value:"super_fast",label:"Super Fast",category:"Standard"},{value:"super_deluxe",label:"Super Deluxe",category:"Premium"},{value:"deluxe_express",label:"Deluxe Express",category:"Premium"},{value:"ananthapuri_fast",label:"Ananthapuri Fast",category:"Standard"},{value:"rajadhani",label:"Rajadhani",category:"Luxury"},{value:"minnal",label:"Minnal",category:"Premium"},{value:"garuda_king_long",label:"Garuda King Long",category:"Luxury"},{value:"garuda_volvo",label:"Garuda Volvo",category:"Luxury"},{value:"garuda_scania",label:"Garuda Scania",category:"Luxury"},{value:"garuda_maharaja",label:"Garuda Maharaja",category:"Super Luxury"},{value:"low_floor_non_ac",label:"Low Floor Non-AC",category:"Standard"},{value:"low_floor_ac",label:"Low Floor AC",category:"Premium"},{value:"jnnurm_city",label:"JNNURM City Circular",category:"Budget"}],N=[{value:"local",label:"Local",description:"Within city limits"},{value:"city",label:"City",description:"City routes"},{value:"intercity",label:"Intercity",description:"Between cities"},{value:"district",label:"District",description:"Within district"},{value:"long_distance",label:"Long Distance",description:"50-100 km"},{value:"interstate",label:"Interstate",description:"Beyond state borders"}];(0,r.useEffect)(()=>{t&&w()},[t]);const w=async()=>{l(!0);try{const t=await(0,xs.nr)("/api/fare-policy");var e;if(t.success)i(t.data||[]),console.log("\u2705 Fare policies fetched:",(null===(e=t.data)||void 0===e?void 0:e.length)||0);else console.warn("\u26a0\ufe0f No fare policies found, initializing empty list"),i([])}catch(t){console.error("\u274c Error fetching fare policies:",t),Oe.oR.error("Failed to fetch fare policies. Please ensure backend server is running."),i([])}finally{l(!1)}},k=()=>{v({busType:"",routeType:"",baseFarePerKm:0,minimumFare:0,maximumFare:0,distanceBrackets:[{fromKm:0,toKm:50,ratePerKm:0,description:""}],timeBasedPricing:{morning:1,afternoon:1,evening:1,night:1},peakHourMultiplier:1,isActive:!0})},A=(e,t,s)=>{const r=[...b.distanceBrackets];r[e][t]=s,v((0,Ie.A)((0,Ie.A)({},b),{},{distanceBrackets:r}))},S=n.filter(e=>{const t=e.busType.toLowerCase().includes(m.toLowerCase())||e.routeType.toLowerCase().includes(m.toLowerCase()),s="all"===x||e.busType===x,r="all"===f||e.routeType===f;return t&&s&&r}),C=e=>{var t;return(null===(t=j.find(t=>t.value===e))||void 0===t?void 0:t.label)||e},_=e=>{var t;return(null===(t=N.find(t=>t.value===e))||void 0===t?void 0:t.label)||e};return t?(0,cs.jsx)(Md,{children:(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]",style:{zIndex:9999,position:"fixed",top:0,left:"280px",right:0,bottom:0,width:"calc(100vw - 280px)",height:"100vh"},onClick:s,children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl w-full max-w-7xl h-[95vh] flex flex-col relative",style:{zIndex:1e4,position:"relative",margin:"auto"},onClick:e=>e.stopPropagation(),children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-3",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-blue-600 rounded-xl flex items-center justify-center",children:(0,cs.jsx)(Es.A,{className:"w-6 h-6 text-white"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Fare Policy Manager"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Manage bus fare policies and pricing rules"})]})]}),(0,cs.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,cs.jsx)(Bs.A,{className:"w-6 h-6 text-gray-500"})})]}),(0,cs.jsx)("div",{className:"flex-1 overflow-hidden",children:c?(0,cs.jsx)("div",{className:"h-full overflow-y-auto p-6",children:(0,cs.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:u?"Edit Fare Policy":"Add New Fare Policy"}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("button",{onClick:()=>{d(!1),h(null),k()},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),(0,cs.jsxs)("button",{onClick:async()=>{try{const e=(0,Ie.A)((0,Ie.A)({},b),{},{distanceBrackets:b.distanceBrackets.filter(e=>""!==e.fromKm&&""!==e.toKm&&""!==e.ratePerKm)});let t;t=u?await(0,xs.nr)("/api/fare-policy/".concat(u._id),{method:"PUT",body:JSON.stringify(e)}):await(0,xs.nr)("/api/fare-policy",{method:"POST",body:JSON.stringify(e)}),t.success&&(Oe.oR.success(u?"Fare policy updated":"Fare policy created"),d(!1),h(null),k(),w())}catch(e){Oe.oR.error("Failed to save fare policy")}},className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[(0,cs.jsx)(Uh.A,{className:"w-4 h-4"}),u?"Update Policy":"Create Policy"]})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Basic Information"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bus Type"}),(0,cs.jsxs)("select",{value:b.busType,onChange:e=>v((0,Ie.A)((0,Ie.A)({},b),{},{busType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"",children:"Select Bus Type"}),j.map(e=>(0,cs.jsxs)("option",{value:e.value,children:[e.label," (",e.category,")"]},e.value))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Route Type"}),(0,cs.jsxs)("select",{value:b.routeType,onChange:e=>v((0,Ie.A)((0,Ie.A)({},b),{},{routeType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"",children:"Select Route Type"}),N.map(e=>(0,cs.jsxs)("option",{value:e.value,children:[e.label," - ",e.description]},e.value))]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Base Fare/Km (\u20b9)"}),(0,cs.jsx)("input",{type:"number",step:"0.1",value:b.baseFarePerKm,onChange:e=>v((0,Ie.A)((0,Ie.A)({},b),{},{baseFarePerKm:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Fare (\u20b9)"}),(0,cs.jsx)("input",{type:"number",value:b.minimumFare,onChange:e=>v((0,Ie.A)((0,Ie.A)({},b),{},{minimumFare:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Fare (\u20b9) - Optional"}),(0,cs.jsx)("input",{type:"number",value:b.maximumFare,onChange:e=>v((0,Ie.A)((0,Ie.A)({},b),{},{maximumFare:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Time-based Pricing"}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Morning (6AM-12PM)"}),(0,cs.jsx)("input",{type:"number",step:"0.1",value:b.timeBasedPricing.morning,onChange:e=>v((0,Ie.A)((0,Ie.A)({},b),{},{timeBasedPricing:(0,Ie.A)((0,Ie.A)({},b.timeBasedPricing),{},{morning:parseFloat(e.target.value)||1})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Afternoon (12PM-6PM)"}),(0,cs.jsx)("input",{type:"number",step:"0.1",value:b.timeBasedPricing.afternoon,onChange:e=>v((0,Ie.A)((0,Ie.A)({},b),{},{timeBasedPricing:(0,Ie.A)((0,Ie.A)({},b.timeBasedPricing),{},{afternoon:parseFloat(e.target.value)||1})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Evening (6PM-10PM)"}),(0,cs.jsx)("input",{type:"number",step:"0.1",value:b.timeBasedPricing.evening,onChange:e=>v((0,Ie.A)((0,Ie.A)({},b),{},{timeBasedPricing:(0,Ie.A)((0,Ie.A)({},b.timeBasedPricing),{},{evening:parseFloat(e.target.value)||1})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Night (10PM-6AM)"}),(0,cs.jsx)("input",{type:"number",step:"0.1",value:b.timeBasedPricing.night,onChange:e=>v((0,Ie.A)((0,Ie.A)({},b),{},{timeBasedPricing:(0,Ie.A)((0,Ie.A)({},b.timeBasedPricing),{},{night:parseFloat(e.target.value)||1})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Peak Hour Multiplier"}),(0,cs.jsx)("input",{type:"number",step:"0.1",value:b.peakHourMultiplier,onChange:e=>v((0,Ie.A)((0,Ie.A)({},b),{},{peakHourMultiplier:parseFloat(e.target.value)||1})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,cs.jsxs)("div",{className:"mt-8",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Distance Brackets"}),(0,cs.jsxs)("button",{onClick:()=>{v((0,Ie.A)((0,Ie.A)({},b),{},{distanceBrackets:[...b.distanceBrackets,{fromKm:"",toKm:"",ratePerKm:"",description:""}]}))},className:"flex items-center gap-2 px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[(0,cs.jsx)(bu.A,{className:"w-4 h-4"}),"Add Bracket"]})]}),(0,cs.jsx)("div",{className:"space-y-3",children:b.distanceBrackets.map((e,t)=>(0,cs.jsxs)("div",{className:"grid grid-cols-5 gap-3 items-end",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From (km)"}),(0,cs.jsx)("input",{type:"number",value:e.fromKm,onChange:e=>A(t,"fromKm",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To (km)"}),(0,cs.jsx)("input",{type:"number",value:e.toKm,onChange:e=>A(t,"toKm",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rate/km (\u20b9)"}),(0,cs.jsx)("input",{type:"number",step:"0.1",value:e.ratePerKm,onChange:e=>A(t,"ratePerKm",parseFloat(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,cs.jsx)("input",{type:"text",value:e.description,onChange:e=>A(t,"description",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Short distance"})]}),(0,cs.jsx)("div",{children:(0,cs.jsx)("button",{onClick:()=>(e=>{v((0,Ie.A)((0,Ie.A)({},b),{},{distanceBrackets:b.distanceBrackets.filter((t,s)=>s!==e)}))})(t),className:"w-full px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:(0,cs.jsx)(Wh.A,{className:"w-4 h-4 mx-auto"})})})]},t))})]})]})}):(0,cs.jsxs)("div",{className:"h-full flex flex-col",children:[(0,cs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,cs.jsx)("div",{className:"flex-1",children:(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(ys.A,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search fare policies...",value:m,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),(0,cs.jsxs)("select",{value:x,onChange:e=>g(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"all",children:"All Bus Types"}),j.map(e=>(0,cs.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,cs.jsxs)("select",{value:f,onChange:e=>y(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,cs.jsx)("option",{value:"all",children:"All Route Types"}),N.map(e=>(0,cs.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsxs)("button",{onClick:async()=>{if(window.confirm("This will create default fare policies for all KSRTC bus types. Continue?"))try{l(!0);const e=await(0,xs.nr)("/api/fare-policy/initialize-defaults",{method:"POST"});e.success?(Oe.oR.success("Default fare policies initialized successfully!"),w()):Oe.oR.error(e.error||"Failed to initialize default policies")}catch(e){console.error("Error initializing default policies:",e),Oe.oR.error("Failed to initialize default policies")}finally{l(!1)}},className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[(0,cs.jsx)(Os.A,{className:"w-4 h-4"}),"Initialize Defaults"]}),(0,cs.jsxs)("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[(0,cs.jsx)(bu.A,{className:"w-4 h-4"}),"Add Policy"]})]})]})}),(0,cs.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:o?(0,cs.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,cs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):0===S.length?(0,cs.jsxs)("div",{className:"text-center py-12",children:[(0,cs.jsx)(Es.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Fare Policies Found"}),(0,cs.jsx)("p",{className:"text-gray-600 mb-4",children:"Create your first fare policy to get started"}),(0,cs.jsx)("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Add Fare Policy"})]}):(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(e=>{var t;return(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,cs.jsx)(As.A,{className:"w-4 h-4 text-blue-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"font-semibold text-gray-900",children:C(e.busType)}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:_(e.routeType)})]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("button",{onClick:()=>(e=>{h(e),v((0,Ie.A)((0,Ie.A)({},e),{},{distanceBrackets:e.distanceBrackets||[{fromKm:0,toKm:50,ratePerKm:0,description:""}]})),d(!0)})(e),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",children:(0,cs.jsx)(Kh.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this fare policy?"))try{(await(0,xs.nr)("/api/fare-policy/".concat(e),{method:"DELETE"})).success&&(Oe.oR.success("Fare policy deleted"),w())}catch(t){Oe.oR.error("Failed to delete fare policy")}})(e._id),className:"p-1 text-red-600 hover:bg-red-100 rounded",children:(0,cs.jsx)(Wh.A,{className:"w-4 h-4"})})]})]}),(0,cs.jsxs)("div",{className:"space-y-2",children:[(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Base Fare/Km:"}),(0,cs.jsxs)("span",{className:"font-medium",children:["\u20b9",e.baseFarePerKm]})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Minimum Fare:"}),(0,cs.jsxs)("span",{className:"font-medium",children:["\u20b9",e.minimumFare]})]}),e.maximumFare&&(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Maximum Fare:"}),(0,cs.jsxs)("span",{className:"font-medium",children:["\u20b9",e.maximumFare]})]}),(0,cs.jsxs)("div",{className:"flex justify-between",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Peak Multiplier:"}),(0,cs.jsxs)("span",{className:"font-medium",children:[e.peakHourMultiplier,"x"]})]})]}),(0,cs.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Distance Brackets:"}),(0,cs.jsx)("span",{className:"text-sm font-medium",children:(null===(t=e.distanceBrackets)||void 0===t?void 0:t.length)||0})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Status:"}),(0,cs.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.isActive?"Active":"Inactive"})]})]})]},e._id)})})})]})})]})})}):null},EV=()=>{var e;const[t,s]=(0,r.useState)([]),[a,n]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(""),[h,m]=(0,r.useState)("all"),[p,x]=(0,r.useState)("all"),[g,f]=(0,r.useState)({totalBuses:0,activeBuses:0,maintenanceBuses:0,unassigned:0}),[y,b]=(0,r.useState)(!1),[v,j]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),[k,A]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!1),[_,T]=(0,r.useState)(null),[P,E]=(0,r.useState)(null),[D,M]=(0,r.useState)(!1),[O,R]=(0,r.useState)(!1),[I,L]=(0,r.useState)([]),[F,B]=(0,r.useState)(""),[z,U]=(0,r.useState)({busNumber:"",registrationNumber:"",depotId:"",busType:"ac_sleeper",capacity:{total:45,sleeper:30,seater:15,ladies:5,disabled:2},amenities:[],specifications:{manufacturer:"",model:"",year:(new Date).getFullYear(),engine:"",fuelType:"diesel",mileage:8,maxSpeed:80,length:12,width:2.5,height:3.5},status:"active",notes:""}),[V,K]=(0,r.useState)({depotId:"",busType:"ac_sleeper",count:10,startNumber:1,prefix:"BUS",targetDate:(new Date).toISOString().slice(0,10),specifications:{manufacturer:"Ashok Leyland",model:"Viking",year:(new Date).getFullYear(),fuelType:"diesel",mileage:8,maxSpeed:80}}),[W]=(0,r.useState)({driverId:"",conductorId:"",status:"active",depotId:""});(0,r.useEffect)(()=>{H()},[]);const H=async()=>{c(!0);try{var e,t,r,a,i,l,d,u,h,m,p;(0,xs.I3)();const[c,g,y,b,v]=await Promise.all([(0,xs.nr)("/api/admin/buses?limit=500&page=1&_t=".concat(Date.now())),(0,xs.nr)("/api/admin/depots?showAll=true"),(0,xs.nr)("/api/admin/all-drivers",{suppressError:!0}),(0,xs.nr)("/api/admin/drivers",{suppressError:!0}),(0,xs.nr)("/api/admin/buses/analytics",{suppressError:!0})]);console.log("\ud83d\ude8c Buses API Response:",c);const j=((null===(e=g.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.depots)||(null===(r=g.data)||void 0===r?void 0:r.depots)||g.depots||[]).map(e=>({_id:e._id||e.id,depotName:e.depotName||e.name||e.code||"Depot"}));let N=(null===y||void 0===y||null===(a=y.data)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.drivers)||(null===y||void 0===y||null===(l=y.data)||void 0===l?void 0:l.drivers)||(null===y||void 0===y?void 0:y.drivers)||[];if(!Array.isArray(N)||0===N.length){var x;const e=(null===b||void 0===b?void 0:b.data)||{};N=e.drivers||(null===(x=e.data)||void 0===x?void 0:x.drivers)||e.data||[]}const w=(N||[]).map(e=>({_id:e._id||e.id,name:e.name||e.fullName||e.employeeName||"Driver"})),k=(null===(d=c.data)||void 0===d||null===(u=d.data)||void 0===u?void 0:u.buses)||(null===(h=c.data)||void 0===h?void 0:h.buses)||c.buses||[];console.log("\ud83d\ude8c Raw buses fetched:",k.length);const A=(k||[]).map(e=>{var t;const s=e.depotId,r=s&&"object"===typeof s?s._id:s||null,a=s&&"object"===typeof s?s.depotName||s.name||s.code:null===(t=j.find(e=>e._id===r))||void 0===t?void 0:t.depotName;return(0,Ie.A)((0,Ie.A)({},e),{},{depotId:r,depotName:a,busType:e.busType||"ac_seater",capacity:e.capacity||{total:0}})});console.log("\ud83d\ude8c Normalized buses:",A.length);const S={};A.forEach(e=>{const t=e.depotName||"Unknown";S[t]=(S[t]||0)+1}),console.log("\ud83d\ude8c Depot distribution:",S);const C=j.filter(e=>A.some(t=>t.depotId===e._id));console.log("\ud83d\ude8c Depots with buses:",C.length),n(C),o(w),s(A);const _=(null===v||void 0===v||null===(m=v.data)||void 0===m?void 0:m.analytics)||(null===v||void 0===v||null===(p=v.data)||void 0===p?void 0:p.data)||null;_&&(_.totalBuses||void 0!==_.activeBuses)?f({totalBuses:_.totalBuses,activeBuses:_.activeBuses,maintenanceBuses:_.maintenanceBuses,unassigned:A.filter(e=>!e.assignedDriver).length}):f({totalBuses:A.length,activeBuses:A.filter(e=>"active"===e.status).length,maintenanceBuses:A.filter(e=>"maintenance"===e.status).length,unassigned:A.filter(e=>!e.assignedDriver).length})}catch(g){console.error("Error fetching data:",g),Oe.oR.error("Failed to fetch data for Streamlined Buses")}finally{c(!1)}},q=async()=>{try{if(!z.busNumber||!z.registrationNumber)return void Oe.oR.error("Bus number and registration are required");c(!0);const e=await(0,xs.nr)("/api/admin/buses",{method:"POST",body:JSON.stringify((0,Ie.A)((0,Ie.A)({},z),{},{capacity:(0,Ie.A)((0,Ie.A)({},z.capacity),{},{total:Number(z.capacity.total)||0}),specifications:(0,Ie.A)((0,Ie.A)({},z.specifications),{},{mileage:Number(z.specifications.mileage)||0})}))});null!==e&&void 0!==e&&e.ok||null!==e&&void 0!==e&&e.success?(Oe.oR.success("Bus added successfully"),j(!1),Z(),H()):Oe.oR.error((null===e||void 0===e?void 0:e.message)||"Failed to add bus")}catch(e){console.error("Error adding bus:",e),Oe.oR.error("Failed to add bus")}finally{c(!1)}},G=async()=>{try{if(!_)return;c(!0);const e={status:z.status,depotId:z.depotId||null,busType:z.busType,capacity:(0,Ie.A)((0,Ie.A)({},z.capacity),{},{total:Number(z.capacity.total)||0}),specifications:(0,Ie.A)((0,Ie.A)({},z.specifications),{},{mileage:Number(z.specifications.mileage)||0})},t=await(0,xs.nr)("/api/admin/buses/".concat(_),{method:"PUT",body:JSON.stringify(e)});null!==t&&void 0!==t&&t.ok||null!==t&&void 0!==t&&t.success?(Oe.oR.success("Bus updated"),w(!1),T(null),H()):Oe.oR.error((null===t||void 0===t?void 0:t.message)||"Failed to update bus")}catch(qU){console.error(qU),Oe.oR.error("Failed to update bus")}finally{c(!1)}},Y=async()=>{try{if(!_)return;c(!0);const e=await(0,xs.nr)("/api/admin/buses/".concat(_),{method:"DELETE"});null!==e&&void 0!==e&&e.ok||null!==e&&void 0!==e&&e.success?(Oe.oR.success("Bus deleted"),A(!1),T(null),H()):Oe.oR.error((null===e||void 0===e?void 0:e.message)||"Failed to delete bus")}catch(qU){console.error(qU),Oe.oR.error("Failed to delete bus")}finally{c(!1)}},$=async()=>{try{c(!0);const e=[];for(let s=0;s<V.count;s++){const t="".concat(V.prefix,"-").concat(String(V.startNumber+s).padStart(3,"0")),r="KL-".concat(Math.floor(100*Math.random()),"-").concat(String.fromCharCode(65+Math.floor(26*Math.random()))).concat(String.fromCharCode(65+Math.floor(26*Math.random())),"-").concat(Math.floor(1e4*Math.random()));e.push((0,Ie.A)((0,Ie.A)({},V),{},{busNumber:t,registrationNumber:r,capacity:X(V.busType)}))}const t=10;for(let s=0;s<e.length;s+=t){const r=e.slice(s,s+t);await Promise.all(r.map(e=>(0,xs.nr)("/api/admin/buses",{method:"POST",body:JSON.stringify(e),suppressError:!0})))}Oe.oR.success("".concat(V.count," buses added successfully")),b(!1),J(),H()}catch(e){console.error("Error adding bulk buses:",e),Oe.oR.error("Failed to add buses")}finally{c(!1)}},J=()=>{K({depotId:"",busType:"ac_sleeper",count:10,startNumber:1,prefix:"BUS",specifications:{manufacturer:"Ashok Leyland",model:"Viking",year:(new Date).getFullYear(),fuelType:"diesel",mileage:8,maxSpeed:80}})},Q=async()=>{if(V.targetDate)try{const s=await(0,xs.nr)("/api/auto-scheduler/mass-schedule",{method:"POST",body:JSON.stringify({date:V.targetDate,depotIds:V.depotId?[V.depotId]:[],maxTripsPerRoute:5,timeGap:30,autoAssignCrew:!0,autoAssignBuses:!0,generateReports:!0,busIds:I})});if(null!==s&&void 0!==s&&s.success||null!==s&&void 0!==s&&s.ok){var e,t;const r=(null===(e=s.data)||void 0===e?void 0:e.tripsCreated)||s.tripsCreated||0,a=(null===(t=s.data)||void 0===t?void 0:t.successRate)||s.successRate||"0%";Oe.oR.success("Bulk scheduling completed! ".concat(r," trips created for selected buses (").concat(a," success rate)"))}else{const e=(null===s||void 0===s?void 0:s.message)||(null===s||void 0===s?void 0:s.error)||"Bulk scheduling failed";Oe.oR.error(e)}}catch(s){console.error("Error in bulk scheduling:",s),Oe.oR.error("Bulk scheduling failed")}else Oe.oR.error("Please select a target date for scheduling")},X=e=>{const t={ac_sleeper:{total:45,sleeper:30,seater:15,ladies:5,disabled:2},ac_seater:{total:50,sleeper:0,seater:50,ladies:8,disabled:2},non_ac_sleeper:{total:48,sleeper:35,seater:13,ladies:5,disabled:2},non_ac_seater:{total:52,sleeper:0,seater:52,ladies:8,disabled:2},volvo:{total:40,sleeper:40,seater:0,ladies:4,disabled:2},mini:{total:20,sleeper:0,seater:20,ladies:3,disabled:1}};return t[e]||t.ac_sleeper},Z=()=>{U({busNumber:"",registrationNumber:"",depotId:"",busType:"ac_sleeper",capacity:X("ac_sleeper"),amenities:[],specifications:{manufacturer:"",model:"",year:(new Date).getFullYear(),engine:"",fuelType:"diesel",mileage:8,maxSpeed:80,length:12,width:2.5,height:3.5},status:"active",notes:""})},ee=e=>{if(!e)return"Unassigned";if(e.depotName)return e.depotName;const t=a.find(t=>t._id===e.depotId);return(null===t||void 0===t?void 0:t.depotName)||"Unassigned"},te=e=>{var t,s;let{bus:r}=e;return(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("input",{type:"checkbox",checked:I.includes(r._id),onChange:e=>{e.target.checked?L([...I,r._id]):L(I.filter(e=>e!==r._id))},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,cs.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,cs.jsx)(ks.A,{className:"w-5 h-5 text-blue-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"font-semibold text-gray-900",children:r.busNumber}),(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:r.registrationNumber})]})]}),(0,cs.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("active"===r.status?"bg-green-100 text-green-800":"maintenance"===r.status?"bg-yellow-100 text-yellow-800":"retired"===r.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:r.status})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"Type"}),(0,cs.jsx)("p",{className:"font-medium text-gray-900",children:(r.busType||"").replace("_"," ").toUpperCase()})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"Capacity"}),(0,cs.jsx)("p",{className:"font-medium text-gray-900",children:(null===(t=r.capacity)||void 0===t?void 0:t.total)||"N/A"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"Depot"}),(0,cs.jsx)("p",{className:"font-medium text-gray-900",children:ee(r)})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"Driver"}),(0,cs.jsx)("p",{className:"font-medium text-gray-900",children:r.assignedDriver?(null===(s=i.find(e=>e._id===r.assignedDriver))||void 0===s?void 0:s.name)||"Unknown":"Unassigned"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>(e=>{var t,s,r,a,n,i,o;T(e._id),U({busNumber:e.busNumber||"",registrationNumber:e.registrationNumber||"",depotId:e.depotId||"",busType:e.busType||"ac_sleeper",capacity:{total:(null===(t=e.capacity)||void 0===t?void 0:t.total)||40,sleeper:(null===(s=e.capacity)||void 0===s?void 0:s.sleeper)||0,seater:(null===(r=e.capacity)||void 0===r?void 0:r.seater)||(null===(a=e.capacity)||void 0===a?void 0:a.total)||40,ladies:(null===(n=e.capacity)||void 0===n?void 0:n.ladies)||0,disabled:(null===(i=e.capacity)||void 0===i?void 0:i.disabled)||0},amenities:e.amenities||[],specifications:(0,Ie.A)((0,Ie.A)({},e.specifications),{},{mileage:(null===(o=e.specifications)||void 0===o?void 0:o.mileage)||0}),status:e.status||"active",notes:e.notes||""}),w(!0)})(r),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Bus",children:(0,cs.jsx)(Kh.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>{T(r._id),A(!0)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Bus",children:(0,cs.jsx)(Wh.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>{E(r),C(!0)},className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"View Details",children:(0,cs.jsx)(Nu.A,{className:"w-4 h-4"})})]}),(0,cs.jsxs)("div",{className:"text-xs text-gray-500",children:["Updated ",new Date(r.updatedAt).toLocaleDateString()]})]})]})},se=()=>(0,cs.jsx)(Md,{children:y&&(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>b(!1),children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,cs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Bulk Add Buses"}),(0,cs.jsx)("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:(0,cs.jsx)(Bs.A,{className:"w-6 h-6"})})]})}),(0,cs.jsxs)("div",{className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot *"}),(0,cs.jsxs)("select",{value:V.depotId,onChange:e=>K(t=>(0,Ie.A)((0,Ie.A)({},t),{},{depotId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"",children:"Select Depot"}),a.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.depotName||e.name},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bus Type *"}),(0,cs.jsxs)("select",{value:V.busType,onChange:e=>K(t=>(0,Ie.A)((0,Ie.A)({},t),{},{busType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"ac_sleeper",children:"AC Sleeper"}),(0,cs.jsx)("option",{value:"ac_seater",children:"AC Seater"}),(0,cs.jsx)("option",{value:"non_ac_sleeper",children:"Non-AC Sleeper"}),(0,cs.jsx)("option",{value:"non_ac_seater",children:"Non-AC Seater"}),(0,cs.jsx)("option",{value:"volvo",children:"Volvo"}),(0,cs.jsx)("option",{value:"mini",children:"Mini Bus"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Buses *"}),(0,cs.jsx)("input",{type:"number",min:"1",max:"100",value:V.count,onChange:e=>K(t=>(0,Ie.A)((0,Ie.A)({},t),{},{count:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Number"}),(0,cs.jsx)("input",{type:"number",min:"1",value:V.startNumber,onChange:e=>K(t=>(0,Ie.A)((0,Ie.A)({},t),{},{startNumber:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Date for Scheduling"}),(0,cs.jsx)("input",{type:"date",value:V.targetDate,onChange:e=>K(t=>(0,Ie.A)((0,Ie.A)({},t),{},{targetDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,cs.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,cs.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"Preview:"}),(0,cs.jsxs)("p",{className:"text-blue-700 text-sm",children:["Will create buses: ",V.prefix,"-",String(V.startNumber).padStart(3,"0")," to ",V.prefix,"-",String(V.startNumber+V.count-1).padStart(3,"0")]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-4",children:[(0,cs.jsx)("button",{onClick:()=>b(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,cs.jsxs)("button",{onClick:$,disabled:l||!V.depotId,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[l?(0,cs.jsx)(Od.A,{className:"w-4 h-4 animate-spin"}):(0,cs.jsx)(bu.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:["Add ",V.count," Buses"]})]})]})]})]})})}),re=()=>(0,cs.jsx)(Md,{children:v&&(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>j(!1),children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4",onClick:e=>e.stopPropagation(),children:[(0,cs.jsxs)("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Add Single Bus"}),(0,cs.jsx)("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600",children:(0,cs.jsx)(Bs.A,{className:"w-6 h-6"})})]}),(0,cs.jsxs)("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Bus Number"}),(0,cs.jsx)("input",{value:z.busNumber,onChange:e=>U((0,Ie.A)((0,Ie.A)({},z),{},{busNumber:e.target.value})),className:"w-full border rounded-lg px-3 py-2",placeholder:"BUS-1001"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Registration Number"}),(0,cs.jsx)("input",{value:z.registrationNumber,onChange:e=>U((0,Ie.A)((0,Ie.A)({},z),{},{registrationNumber:e.target.value})),className:"w-full border rounded-lg px-3 py-2",placeholder:"KL-01-AB-1234"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Depot"}),(0,cs.jsxs)("select",{value:z.depotId,onChange:e=>U((0,Ie.A)((0,Ie.A)({},z),{},{depotId:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"",children:"Select depot"}),a.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.depotName||e.name},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Status"}),(0,cs.jsxs)("select",{value:z.status,onChange:e=>U((0,Ie.A)((0,Ie.A)({},z),{},{status:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,cs.jsx)("option",{value:"retired",children:"Retired"}),(0,cs.jsx)("option",{value:"suspended",children:"Suspended"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Bus Type"}),(0,cs.jsx)("input",{value:z.busType,onChange:e=>U((0,Ie.A)((0,Ie.A)({},z),{},{busType:e.target.value})),className:"w-full border rounded-lg px-3 py-2",placeholder:"ac_sleeper"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Capacity Total"}),(0,cs.jsx)("input",{type:"number",value:z.capacity.total,onChange:e=>U((0,Ie.A)((0,Ie.A)({},z),{},{capacity:(0,Ie.A)((0,Ie.A)({},z.capacity),{},{total:e.target.value})})),className:"w-full border rounded-lg px-3 py-2"})]})]}),(0,cs.jsxs)("div",{className:"p-6 flex justify-end space-x-3",children:[(0,cs.jsx)("button",{onClick:()=>j(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,cs.jsx)("button",{onClick:q,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Bus"})]})]})})}),ae=()=>(0,cs.jsx)(Md,{children:N&&(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>w(!1),children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4",onClick:e=>e.stopPropagation(),children:[(0,cs.jsxs)("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Edit Bus"}),(0,cs.jsx)("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600",children:(0,cs.jsx)(Bs.A,{className:"w-6 h-6"})})]}),(0,cs.jsxs)("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Depot"}),(0,cs.jsxs)("select",{value:z.depotId,onChange:e=>U((0,Ie.A)((0,Ie.A)({},z),{},{depotId:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"",children:"Select depot"}),a.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.depotName||e.name},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Status"}),(0,cs.jsxs)("select",{value:z.status,onChange:e=>U((0,Ie.A)((0,Ie.A)({},z),{},{status:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,cs.jsx)("option",{value:"retired",children:"Retired"}),(0,cs.jsx)("option",{value:"suspended",children:"Suspended"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Bus Type"}),(0,cs.jsx)("input",{value:z.busType,onChange:e=>U((0,Ie.A)((0,Ie.A)({},z),{},{busType:e.target.value})),className:"w-full border rounded-lg px-3 py-2"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Mileage (km/l)"}),(0,cs.jsx)("input",{type:"number",value:z.specifications.mileage,onChange:e=>U((0,Ie.A)((0,Ie.A)({},z),{},{specifications:(0,Ie.A)((0,Ie.A)({},z.specifications),{},{mileage:e.target.value})})),className:"w-full border rounded-lg px-3 py-2"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Capacity Total"}),(0,cs.jsx)("input",{type:"number",value:z.capacity.total,onChange:e=>U((0,Ie.A)((0,Ie.A)({},z),{},{capacity:(0,Ie.A)((0,Ie.A)({},z.capacity),{},{total:e.target.value})})),className:"w-full border rounded-lg px-3 py-2"})]})]}),(0,cs.jsxs)("div",{className:"p-6 flex justify-end space-x-3",children:[(0,cs.jsx)("button",{onClick:()=>w(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,cs.jsx)("button",{onClick:G,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})})}),ne=()=>(0,cs.jsx)(Md,{children:k&&(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>A(!1),children:(0,cs.jsx)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4",onClick:e=>e.stopPropagation(),children:(0,cs.jsxs)("div",{className:"p-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Delete Bus"}),(0,cs.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this bus? This will retire the bus."}),(0,cs.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,cs.jsx)("button",{onClick:()=>A(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,cs.jsx)("button",{onClick:Y,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})})})}),ie=()=>{var e,t;return(0,cs.jsx)(Md,{children:S&&P&&(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>C(!1),children:(0,cs.jsxs)(ed.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-3xl w-full mx-4",onClick:e=>e.stopPropagation(),children:[(0,cs.jsxs)("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[(0,cs.jsxs)("h3",{className:"text-xl font-semibold text-gray-900",children:["Bus Details - ",P.busNumber]}),(0,cs.jsx)("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600",children:(0,cs.jsx)(Bs.A,{className:"w-6 h-6"})})]}),(0,cs.jsxs)("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"Registration"}),(0,cs.jsx)("p",{className:"font-medium text-gray-900",children:P.registrationNumber||"N/A"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"Status"}),(0,cs.jsx)("p",{className:"font-medium text-gray-900 capitalize",children:P.status})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"Type"}),(0,cs.jsx)("p",{className:"font-medium text-gray-900",children:(P.busType||"").replace("_"," ").toUpperCase()})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"Depot"}),(0,cs.jsx)("p",{className:"font-medium text-gray-900",children:P.depotId?ee(P):"Unassigned"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"Capacity"}),(0,cs.jsx)("p",{className:"font-medium text-gray-900",children:(null===(e=P.capacity)||void 0===e?void 0:e.total)||0})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"Mileage (km/l)"}),(0,cs.jsx)("p",{className:"font-medium text-gray-900",children:(null===(t=P.specifications)||void 0===t?void 0:t.mileage)||0})]}),(0,cs.jsxs)("div",{className:"md:col-span-2",children:[(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"Notes"}),(0,cs.jsx)("p",{className:"font-medium text-gray-900",children:P.notes||"\u2014"})]})]}),(0,cs.jsx)("div",{className:"p-6 border-t border-gray-100 flex justify-end",children:(0,cs.jsx)("button",{onClick:()=>C(!1),className:"px-4 py-2 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200",children:"Close"})})]})})})},oe=t.filter(e=>{const t=(e.busNumber||"").toLowerCase().includes(d.toLowerCase())||(e.registrationNumber||"").toLowerCase().includes(d.toLowerCase()),s="all"===h||e.status===h,r="all"===p||e.depotId===p;return t&&s&&r});return(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Streamlined Bus Management"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Efficient bus fleet management with bulk operations"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("button",{onClick:()=>{(0,xs.I3)(),H()},className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center space-x-2",disabled:l,children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4 ".concat(l?"animate-spin":"")}),(0,cs.jsx)("span",{children:"Force Refresh"})]}),(0,cs.jsxs)("button",{onClick:H,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Refresh"})]})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Buses"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:g.totalBuses})]}),(0,cs.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,cs.jsx)(ks.A,{className:"w-6 h-6 text-blue-600"})})]})}),(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Buses"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-green-600",children:g.activeBuses})]}),(0,cs.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,cs.jsx)(jd.A,{className:"w-6 h-6 text-green-600"})})]})}),(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Maintenance"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:g.maintenanceBuses})]}),(0,cs.jsx)("div",{className:"p-3 bg-yellow-100 rounded-lg",children:(0,cs.jsx)(vd.A,{className:"w-6 h-6 text-yellow-600"})})]})}),(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Unassigned"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-red-600",children:g.unassigned})]}),(0,cs.jsx)("div",{className:"p-3 bg-red-100 rounded-lg",children:(0,cs.jsx)(bh,{className:"w-6 h-6 text-red-600"})})]})})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"}),I.length>0&&(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("span",{className:"text-sm text-gray-600",children:[I.length," buses selected"]}),(0,cs.jsxs)("select",{value:F,onChange:e=>B(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"",children:"Bulk Operation"}),(0,cs.jsx)("option",{value:"assign_driver",children:"Assign Crew"}),(0,cs.jsx)("option",{value:"change_status",children:"Change Status"}),(0,cs.jsx)("option",{value:"assign_depot",children:"Assign Depot"}),(0,cs.jsx)("option",{value:"schedule_trips",children:"Schedule Trips"})]}),(0,cs.jsx)("button",{onClick:async()=>{if(0!==I.length)try{switch(c(!0),F){case"assign_driver":await Promise.all(I.map(e=>(0,xs.nr)("/api/admin/buses/".concat(e,"/assign"),{method:"POST",body:JSON.stringify({driverId:W.driverId,conductorId:W.conductorId})})));break;case"change_status":await Promise.all(I.map(e=>(0,xs.nr)("/api/admin/buses/".concat(e),{method:"PUT",body:JSON.stringify({status:W.status||"active"})})));break;case"assign_depot":await Promise.all(I.map(e=>(0,xs.nr)("/api/admin/buses/".concat(e),{method:"PUT",body:JSON.stringify({depotId:W.depotId})})));break;case"schedule_trips":await Q();break;default:Oe.oR.error("Select a bulk operation")}Oe.oR.success("Bulk operation completed"),L([]),B(""),H()}catch(e){console.error("Error in bulk operation:",e),Oe.oR.error("Bulk operation failed")}finally{c(!1)}else Oe.oR.error("Please select buses for bulk operation")},disabled:!F,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:"Execute"})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,cs.jsxs)("button",{onClick:()=>j(!0),className:"p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,cs.jsx)(bu.A,{className:"w-5 h-5 text-blue-600"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"font-semibold text-blue-900",children:"Add Single Bus"}),(0,cs.jsx)("p",{className:"text-sm text-blue-700",children:"Add one bus with detailed specifications"})]})]}),(0,cs.jsxs)("button",{onClick:()=>b(!0),className:"p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,cs.jsx)(zm.A,{className:"w-5 h-5 text-green-600"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"font-semibold text-green-900",children:"Bulk Add Buses"}),(0,cs.jsx)("p",{className:"text-sm text-green-700",children:"Add multiple buses at once (up to 100)"})]})]}),(0,cs.jsxs)("button",{onClick:async()=>{try{await(0,xs.nr)("/api/admin/buses/export/excel",{method:"GET",suppressError:!0});const e=t.map(e=>{var t;return{busNumber:e.busNumber,registrationNumber:e.registrationNumber,status:e.status,depotId:e.depotId||"",capacityTotal:(null===(t=e.capacity)||void 0===t?void 0:t.total)||0,busType:e.busType||""}}),s=Object.keys(e[0]||{busNumber:"",registrationNumber:"",status:"",depotId:"",capacityTotal:"",busType:""}),r=[s.join(","),...e.map(e=>s.map(t=>{var s;return String(null!==(s=e[t])&&void 0!==s?s:"").replace(/"/g,'""')}).map(e=>e.includes(",")?'"'.concat(e,'"'):e).join(","))].join("\n"),a=new Blob([r],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(a),i=document.createElement("a");i.href=n,i.download="streamlined-buses.csv",i.click(),URL.revokeObjectURL(n)}catch(qU){console.error(qU),Oe.oR.error("Export failed")}},className:"p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,cs.jsx)(hd.A,{className:"w-5 h-5 text-purple-600"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"font-semibold text-purple-900",children:"Export Data"}),(0,cs.jsx)("p",{className:"text-sm text-purple-700",children:"Export bus data for external use"})]})]}),(0,cs.jsxs)("button",{onClick:()=>{console.log("\ud83d\ude8c Bus Types button clicked!"),M(!0)},className:"p-4 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-lg hover:from-indigo-100 hover:to-purple-100 transition-all duration-200 border-2 border-indigo-200 hover:border-indigo-300 shadow-sm hover:shadow-lg flex items-center space-x-3 relative",children:[(0,cs.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold",children:"NEW"}),(0,cs.jsx)("div",{className:"p-2 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-lg",children:(0,cs.jsx)(KM,{className:"w-5 h-5 text-indigo-600"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"font-semibold text-indigo-900",children:"Bus Types"}),(0,cs.jsx)("p",{className:"text-sm text-indigo-700",children:"Manage KSRTC bus types"})]})]}),(0,cs.jsxs)("button",{onClick:()=>{console.log("\ud83d\udcb0 Fare Policy button clicked!"),R(!0)},className:"p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg hover:from-green-100 hover:to-emerald-100 transition-all duration-200 border-2 border-green-200 hover:border-green-300 shadow-sm hover:shadow-lg flex items-center space-x-3 relative",children:[(0,cs.jsx)("div",{className:"absolute -top-1 -right-1 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold",children:"NEW"}),(0,cs.jsx)("div",{className:"p-2 bg-gradient-to-br from-green-100 to-emerald-100 rounded-lg",children:(0,cs.jsx)(Os.A,{className:"w-5 h-5 text-green-600"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"font-semibold text-green-900",children:"Fare Policy"}),(0,cs.jsx)("p",{className:"text-sm text-green-700",children:"Set pricing rules & rates"})]})]})]})]}),(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(ys.A,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search buses...",value:d,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,cs.jsxs)("select",{value:h,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"all",children:"All Status"}),(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,cs.jsx)("option",{value:"retired",children:"Retired"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot"}),(0,cs.jsxs)("select",{value:p,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"all",children:"All Depots"}),a.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.depotName||e.name},e._id))]})]}),(0,cs.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,cs.jsxs)("button",{onClick:()=>{u(""),m("all"),x("all")},className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center space-x-2",children:[(0,cs.jsx)(Kd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Clear Filters"})]}),(0,cs.jsxs)("button",{onClick:()=>{u(""),m("all"),x("all"),(0,xs.I3)(),H()},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",disabled:l,children:[(0,cs.jsx)(ks.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Show All Buses"})]})]})]})}),oe.length>0&&(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Depot Distribution Summary"}),(0,cs.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:(()=>{const e={};return oe.forEach(t=>{const s=t.depotName||"Unknown";e[s]=(e[s]||0)+1}),Object.entries(e).map(e=>{let[t,s]=e;return(0,cs.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t}),(0,cs.jsx)("p",{className:"text-lg font-bold text-gray-900",children:s})]},t)})})()})]}),(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:oe.map(e=>(0,cs.jsx)(te,{bus:e},e._id))}),0===oe.length&&(0,cs.jsxs)("div",{className:"text-center py-12",children:[(0,cs.jsx)(ks.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No buses found"}),(0,cs.jsx)("p",{className:"text-gray-600 mb-4",children:"Try adjusting your search or add some buses."}),"all"!==p&&(0,cs.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 max-w-md mx-auto",children:[(0,cs.jsxs)("p",{className:"text-yellow-800 text-sm",children:[(0,cs.jsx)("strong",{children:"Tip:"}),' The selected depot "',(null===(e=a.find(e=>e._id===p))||void 0===e?void 0:e.depotName)||"Unknown",'" might not have any buses assigned to it.']}),(0,cs.jsx)("button",{onClick:()=>{x("all"),(0,xs.I3)(),H()},className:"mt-2 px-3 py-1 bg-yellow-600 text-white text-sm rounded hover:bg-yellow-700",children:"Show All Depots"})]})]}),(0,cs.jsx)(se,{}),(0,cs.jsx)(re,{}),(0,cs.jsx)(ae,{}),(0,cs.jsx)(ne,{}),(0,cs.jsx)(ie,{}),(0,cs.jsx)(JU,{isOpen:D,onClose:()=>M(!1),onSave:e=>{console.log("Enhanced bus types saved:",e),M(!1),Oe.oR.success("Bus types updated successfully!")},onScheduleUpdate:e=>{console.log("Scheduling updated with active bus types:",e),Oe.oR.success("Bus type scheduling rules updated successfully")}}),(0,cs.jsx)(PV,{isOpen:O,onClose:()=>R(!1),onSave:e=>{console.log("Fare policies saved:",e),R(!1),Oe.oR.success("Fare policies updated successfully!")}})]})},DV=e=>{let{isOpen:t,onClose:s,route:a,onSaveRoute:n,onUpdateStops:o,loading:l=!1}=e;const[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(null),[m,p]=(0,r.useState)(null),[x,g]=(0,r.useState)([]),[f,y]=(0,r.useState)([]),[b,v]=(0,r.useState)(null),[j,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)(null),[A,S]=(0,r.useState)({}),[C,_]=(0,r.useState)(0),[T,P]=(0,r.useState)(0),[E,D]=(0,r.useState)(!1),M=(0,r.useRef)(null),O=((0,r.useRef)([]),(0,r.useRef)(null),e=>e?"undefined"!==typeof e.lat&&"undefined"!==typeof e.lng?{lat:Number(e.lat),lng:Number(e.lng)}:"undefined"!==typeof e.latitude&&"undefined"!==typeof e.longitude?{lat:Number(e.latitude),lng:Number(e.longitude)}:null:null);(0,r.useEffect)(()=>{var e,s;if(!t)return;const r=O(null===a||void 0===a||null===(e=a.startingPoint)||void 0===e?void 0:e.coordinates)||O(null===a||void 0===a?void 0:a.startingPoint),n=O(null===a||void 0===a||null===(s=a.endingPoint)||void 0===s?void 0:s.coordinates)||O(null===a||void 0===a?void 0:a.endingPoint);if(r&&n){const e=((e,t)=>{if(!e||!t)return 0;const s=(t.lat-e.lat)*Math.PI/180,r=(t.lng-e.lng)*Math.PI/180,a=e.lat*Math.PI/180,n=t.lat*Math.PI/180,i=Math.sin(s/2),o=Math.sin(r/2),l=i*i+Math.cos(a)*Math.cos(n)*o*o;return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371})(r,n);_(e),P(e/40*60)}},[t,a]),(0,r.useEffect)(()=>{t&&window.google&&window.google.maps?I():t&&R()},[t]);const R=()=>{if(window.google&&window.google.maps)return void I();const e="undefined"!==typeof process&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GOOGLE_MAPS_API_KEY||"";if(!e)return Oe.oR.error("Google Maps API key is required"),void D(!0);const t=document.querySelector('script[src*="maps.googleapis.com/maps/api/js"]');if(t)return t.addEventListener("load",()=>I(),{once:!0}),void t.addEventListener("error",()=>{Oe.oR.error("Failed to load Google Maps"),D(!0)},{once:!0});const s=document.createElement("script");s.src="https://maps.googleapis.com/maps/api/js?key=".concat(e,"&libraries=places"),s.async=!0,s.defer=!0,s.onload=()=>{I()},s.onerror=()=>{Oe.oR.error("Failed to load Google Maps. Please check your API key and network connection."),D(!0)},document.head.appendChild(s)},I=()=>{var e;if(!M.current||!window.google)return;const t=O(null===a||void 0===a||null===(e=a.startingPoint)||void 0===e?void 0:e.coordinates)||O(null===a||void 0===a?void 0:a.startingPoint)||{lat:12.9716,lng:77.5946},s=new window.google.maps.Map(M.current,{zoom:10,center:t,mapTypeId:window.google.maps.MapTypeId.ROADMAP,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]}),r=new window.google.maps.DirectionsService,n=new window.google.maps.DirectionsRenderer({draggable:!0,suppressMarkers:!1,polylineOptions:{strokeColor:"#3B82F6",strokeWeight:4,strokeOpacity:.8}});n.setMap(s),d(s),h(r),p(n),a&&L(a,r,n),s.addListener("click",e=>{j&&B(e.latLng)}),n.addListener("directions_changed",()=>{const e=n.getDirections();e&&F(e)})},L=(e,t,s)=>{var r,a,n,i;if(!window.google||!window.google.maps)return void console.warn("Google Maps API not loaded yet");const o=O(null===(r=e.startingPoint)||void 0===r?void 0:r.coordinates)||O(e.startingPoint),l=O(null===(a=e.endingPoint)||void 0===a?void 0:a.coordinates)||O(e.endingPoint);if(!o||!l)return void Oe.oR.error("Invalid route coordinates");const c={origin:o,destination:l,waypoints:(null===(n=e.intermediateStops)||void 0===n||null===(i=n.map(e=>({location:O(null===e||void 0===e?void 0:e.coordinates)||("undefined"!==typeof e.lat&&"undefined"!==typeof e.lng?{lat:Number(e.lat),lng:Number(e.lng)}:null),stopover:!0})))||void 0===i?void 0:i.filter(e=>e.location))||[],travelMode:window.google.maps.TravelMode.DRIVING,optimizeWaypoints:!0};t.route(c,(e,t)=>{if("OK"===t){var r;s.setDirections(e);const t=e.routes[0].legs[0];_(t.distance.value/1e3),P(t.duration.value/60);const a=(null===(r=e.routes[0].waypoint_order)||void 0===r?void 0:r.map(e=>{const t=c.waypoints[e];return(0,Ie.A)((0,Ie.A)({},t.location),{},{name:"Stop ".concat(e+1),price:A["stop_".concat(e)]||0})}))||[];y(a)}else Oe.oR.error("Failed to load route on map")})},F=e=>{var t;const s=e.routes[0].legs[0];_(s.distance.value/1e3),P(s.duration.value/60);const r=(null===(t=e.request.waypoints)||void 0===t?void 0:t.map((e,t)=>({lat:e.location.lat(),lng:e.location.lng(),name:"Intermediate Stop ".concat(t+1),price:A["stop_".concat(t)]||0})))||[];y(r)},B=e=>{const t={lat:e.lat(),lng:e.lng(),name:"Stop ".concat(f.length+1),price:0};y(e=>[...e,t]),Oe.oR.success("Intermediate stop added")};return t?i.createPortal((0,cs.jsx)(Md,{children:(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 lg:inset-y-0 lg:left-64 lg:right-0 bg-black bg-opacity-50 z-[100000] flex items-center justify-center p-4",children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-2xl w-full max-w-5xl h-[80vh] flex flex-col",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,cs.jsx)(WM,{className:"w-6 h-6 text-blue-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Route Map Editor"}),(0,cs.jsx)("p",{className:"text-gray-600",children:(null===a||void 0===a?void 0:a.routeName)||"Edit Route"})]})]}),(0,cs.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,cs.jsx)(Bs.A,{className:"w-6 h-6 text-gray-500"})})]}),(0,cs.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,cs.jsxs)("div",{className:"flex-1 relative",children:[E?(0,cs.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center rounded-lg",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)(WM,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-500 mb-2",children:"Google Maps failed to load"}),(0,cs.jsx)("p",{className:"text-sm text-gray-400",children:"Please check your API key configuration"})]})}):(0,cs.jsx)("div",{ref:M,className:"w-full h-full",style:{minHeight:"500px"}}),(0,cs.jsxs)("div",{className:"absolute top-4 left-4 space-y-2",children:[(0,cs.jsx)("button",{onClick:()=>N(!j),className:"p-3 rounded-lg shadow-lg transition-colors ".concat(j?"bg-red-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:(0,cs.jsx)(gs.A,{className:"w-5 h-5"})}),(0,cs.jsx)("button",{onClick:async()=>{var e,t;if(window.google&&window.google.maps)if(null!==a&&void 0!==a&&null!==(e=a.startingPoint)&&void 0!==e&&e.coordinates&&null!==a&&void 0!==a&&null!==(t=a.endingPoint)&&void 0!==t&&t.coordinates)try{const e={origin:a.startingPoint.coordinates,destination:a.endingPoint.coordinates,travelMode:window.google.maps.TravelMode.DRIVING};u.route(e,(e,t)=>{if("OK"===t){const t=e.routes[0].legs[0].steps,s=[];for(let e=4;e<t.length-4;e+=5){const r=t[e].end_location;(new window.google.maps.Geocoder).geocode({location:r},(e,t)=>{"OK"===t&&e[0]&&s.push({lat:r.lat(),lng:r.lng(),name:e[0].formatted_address.split(",")[0]||"Stop ".concat(s.length+1),price:0})})}setTimeout(()=>{y(s),Oe.oR.success("Auto-generated ".concat(s.length," intermediate stops"))},2e3)}else Oe.oR.error("Failed to generate intermediate stops")})}catch(s){console.error("Error fetching intermediate stops:",s),Oe.oR.error("Failed to fetch intermediate stops")}else Oe.oR.error("Invalid route coordinates");else Oe.oR.error("Google Maps is not loaded yet")},className:"p-3 bg-white text-gray-700 rounded-lg shadow-lg hover:bg-gray-50 transition-colors",title:"Auto-fetch intermediate stops",children:(0,cs.jsx)(As.A,{className:"w-5 h-5"})}),(0,cs.jsx)("button",{onClick:()=>{window.google&&window.google.maps?a&&(L(a,u,m),y(a.intermediateStops||[]),N(!1),Oe.oR.success("Route reset to original")):Oe.oR.error("Google Maps is not loaded yet")},className:"p-3 bg-white text-gray-700 rounded-lg shadow-lg hover:bg-gray-50 transition-colors",title:"Reset route",children:(0,cs.jsx)(Od.A,{className:"w-5 h-5"})})]}),(0,cs.jsx)("div",{className:"absolute bottom-4 left-4 bg-white rounded-lg shadow-lg p-4",children:(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(Ad,{className:"w-4 h-4 text-blue-600"}),(0,cs.jsxs)("span",{className:"text-sm font-medium",children:[C.toFixed(1)," km"]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(sd.A,{className:"w-4 h-4 text-green-600"}),(0,cs.jsxs)("span",{className:"text-sm font-medium",children:[Math.round(T)," min"]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(gs.A,{className:"w-4 h-4 text-purple-600"}),(0,cs.jsxs)("span",{className:"text-sm font-medium",children:[f.length," stops"]})]})]})})]}),(0,cs.jsxs)("div",{className:"w-96 border-l border-gray-200 bg-gray-50 flex flex-col",children:[(0,cs.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Intermediate Stops"}),(0,cs.jsxs)("span",{className:"text-sm text-gray-500",children:[f.length," stops"]})]}),(0,cs.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:f.map((e,t)=>(0,cs.jsx)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:(0,cs.jsxs)("div",{className:"flex items-start justify-between",children:[(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,cs.jsx)(ks.A,{className:"w-4 h-4 text-blue-600"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.name})]}),(0,cs.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:[e.lat.toFixed(4),", ",e.lng.toFixed(4)]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(Es.A,{className:"w-4 h-4 text-green-600"}),(0,cs.jsx)("input",{type:"number",value:e.price,onChange:e=>((e,t)=>{S(s=>(0,Ie.A)((0,Ie.A)({},s),{},{["stop_".concat(e)]:parseFloat(t)||0})),y(s=>s.map((s,r)=>r===e?(0,Ie.A)((0,Ie.A)({},s),{},{price:parseFloat(t)||0}):s))})(t,e.target.value),className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Price",min:"0",step:"0.1"}),(0,cs.jsx)("span",{className:"text-xs text-gray-500",children:"\u20b9"})]})]}),(0,cs.jsx)("button",{onClick:()=>(e=>{y(t=>t.filter((t,s)=>s!==e)),Oe.oR.success("Intermediate stop removed")})(t),className:"p-1 text-red-500 hover:bg-red-50 rounded transition-colors",children:(0,cs.jsx)(Wh.A,{className:"w-4 h-4"})})]})},t))}),0===f.length&&(0,cs.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,cs.jsx)(gs.A,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,cs.jsx)("p",{className:"text-sm",children:"No intermediate stops"}),(0,cs.jsx)("p",{className:"text-xs",children:"Click on the map to add stops"})]})]}),(0,cs.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Route Summary"}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{className:"flex justify-between items-center",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Total Distance"}),(0,cs.jsxs)("span",{className:"font-medium",children:[C.toFixed(1)," km"]})]}),(0,cs.jsxs)("div",{className:"flex justify-between items-center",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Estimated Duration"}),(0,cs.jsxs)("span",{className:"font-medium",children:[Math.round(T)," min"]})]}),(0,cs.jsxs)("div",{className:"flex justify-between items-center",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Intermediate Stops"}),(0,cs.jsx)("span",{className:"font-medium",children:f.length})]}),(0,cs.jsxs)("div",{className:"flex justify-between items-center",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Total Stop Prices"}),(0,cs.jsxs)("span",{className:"font-medium",children:["\u20b9",f.reduce((e,t)=>e+t.price,0).toFixed(2)]})]})]})]}),(0,cs.jsxs)("div",{className:"p-6 space-y-3",children:[(0,cs.jsxs)("button",{onClick:async()=>{try{const e=(0,Ie.A)((0,Ie.A)({},a),{},{intermediateStops:f.map((e,t)=>({coordinates:{lat:e.lat,lng:e.lng},city:e.name,location:e.name,price:e.price,stopOrder:t+1})),totalDistance:C,estimatedDuration:T});await n(e),Oe.oR.success("Route updated successfully"),s()}catch(e){console.error("Error saving route:",e),Oe.oR.error("Failed to save route")}},disabled:l,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[l?(0,cs.jsx)(Od.A,{className:"w-5 h-5 animate-spin"}):(0,cs.jsx)(Uh.A,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Save Route Changes"})]}),(0,cs.jsx)("button",{onClick:s,className:"w-full bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})]})})}),document.body):null},MV=e=>{var t,s,a;let{isOpen:n,onClose:i,route:o,onUpdatePrices:l,conductorRole:c="CONDUCTOR"}=e;const[d,u]=(0,r.useState)({}),[h,m]=(0,r.useState)({}),[p,x]=(0,r.useState)(!1),[g,f]=(0,r.useState)(!1),[y,b]=(0,r.useState)({}),[v,j]=(0,r.useState)(0);(0,r.useEffect)(()=>{if(o&&o.intermediateStops){const e={},t={};o.intermediateStops.forEach((s,r)=>{e["stop_".concat(r)]=s.price||0,t["stop_".concat(r)]=s.price||0}),u(e),m(t),N(e)}},[o]);const N=e=>{const t=Object.values(e).reduce((e,t)=>e+(t||0),0);j(t)},w=e=>{const t="stop_".concat(e),s=y[t];return s&&0!==s.change?s.change>0?(0,cs.jsxs)("div",{className:"flex items-center text-green-600 text-xs",children:[(0,cs.jsx)(xu.A,{className:"w-3 h-3 mr-1"}),"+\u20b9",s.change.toFixed(2)]}):(0,cs.jsxs)("div",{className:"flex items-center text-red-600 text-xs",children:[(0,cs.jsx)(yV.A,{className:"w-3 h-3 mr-1"}),"-\u20b9",Math.abs(s.change).toFixed(2)]}):null};return n?(0,cs.jsx)(Md,{children:(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,cs.jsx)(Es.A,{className:"w-6 h-6 text-green-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Conductor Pricing Dashboard"}),(0,cs.jsx)("p",{className:"text-gray-600",children:(null===o||void 0===o?void 0:o.routeName)||"Set Stop Prices"}),(0,cs.jsxs)("p",{className:"text-sm text-blue-600 font-medium",children:["Role: ",c," \u2022 Route: ",null===o||void 0===o?void 0:o.routeNumber]})]})]}),(0,cs.jsx)("button",{onClick:i,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,cs.jsx)(Bs.A,{className:"w-6 h-6 text-gray-500"})})]}),(0,cs.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,cs.jsx)("div",{className:"p-6 bg-gray-50 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[(null===o||void 0===o?void 0:o.totalDistance)||0," km"]}),(0,cs.jsx)("div",{className:"text-sm text-gray-600",children:"Total Distance"})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[Math.round((null===o||void 0===o?void 0:o.estimatedDuration)||0)," min"]}),(0,cs.jsx)("div",{className:"text-sm text-gray-600",children:"Duration"})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:(null===o||void 0===o||null===(t=o.intermediateStops)||void 0===t?void 0:t.length)||0}),(0,cs.jsx)("div",{className:"text-sm text-gray-600",children:"Stops"})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:["\u20b9",v.toFixed(2)]}),(0,cs.jsx)("div",{className:"text-sm text-gray-600",children:"Total Revenue"})]})]})}),(0,cs.jsxs)("div",{className:"p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Stop Pricing"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[p&&(0,cs.jsxs)("button",{onClick:()=>{u((0,Ie.A)({},h)),N(h),b({}),x(!1),Oe.oR.success("Prices reset to original values")},className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Reset"})]}),(0,cs.jsxs)("button",{onClick:()=>x(!p),className:"px-4 py-2 rounded-lg transition-colors flex items-center space-x-2 ".concat(p?"bg-red-100 text-red-700 hover:bg-red-200":"bg-blue-100 text-blue-700 hover:bg-blue-200"),children:[(0,cs.jsx)(Es.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:p?"Cancel Edit":"Edit Prices"})]})]})]}),(0,cs.jsxs)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[null===o||void 0===o||null===(s=o.intermediateStops)||void 0===s?void 0:s.map((e,t)=>{var s,r,a,n;return(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"p-4 rounded-lg border-2 transition-all ".concat(p?"border-blue-200 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"),children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,cs.jsx)(gs.A,{className:"w-5 h-5 text-blue-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("h4",{className:"font-medium text-gray-900",children:["Stop ",t+1,": ",e.name||e.city]}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:e.location||"".concat(null===(s=e.coordinates)||void 0===s||null===(r=s.lat)||void 0===r?void 0:r.toFixed(4),", ").concat(null===(a=e.coordinates)||void 0===a||null===(n=a.lng)||void 0===n?void 0:n.toFixed(4))})]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[w(t),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)(Es.A,{className:"w-5 h-5 text-green-600"}),p?(0,cs.jsx)("input",{type:"number",value:d["stop_".concat(t)]||0,onChange:e=>((e,t)=>{const s=parseFloat(t)||0,r=(0,Ie.A)((0,Ie.A)({},d),{},{["stop_".concat(e)]:s});u(r),N(r);const a="stop_".concat(e),n=h[a]||0,i=s-n;b(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[a]:{oldPrice:n,newPrice:s,change:i,timestamp:(new Date).toISOString()}}))})(t,e.target.value),className:"w-24 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.1",placeholder:"0.00"}):(0,cs.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:["\u20b9",(d["stop_".concat(t)]||0).toFixed(2)]})]})]})]}),p&&(d["stop_".concat(t)]||0)<0&&(0,cs.jsxs)("div",{className:"mt-2 flex items-center space-x-2 text-red-600",children:[(0,cs.jsx)(Nd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{className:"text-sm",children:"Price cannot be negative"})]})]},t)}),(!(null!==o&&void 0!==o&&o.intermediateStops)||0===o.intermediateStops.length)&&(0,cs.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,cs.jsx)(gs.A,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),(0,cs.jsx)("p",{className:"text-lg font-medium",children:"No intermediate stops found"}),(0,cs.jsx)("p",{className:"text-sm",children:"This route has no intermediate stops to price"})]})]}),(null===o||void 0===o||null===(a=o.intermediateStops)||void 0===a?void 0:a.length)>0&&(0,cs.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,cs.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Price Summary"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:["\u20b9",(v/(o.intermediateStops.length||1)).toFixed(2)]}),(0,cs.jsx)("div",{className:"text-sm text-gray-600",children:"Average Price per Stop"})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:["\u20b9",Math.max(...Object.values(d)).toFixed(2)]}),(0,cs.jsx)("div",{className:"text-sm text-gray-600",children:"Highest Price"})]}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:["\u20b9",Math.min(...Object.values(d).filter(e=>e>0)).toFixed(2)]}),(0,cs.jsx)("div",{className:"text-sm text-gray-600",children:"Lowest Price"})]})]})]})]})]}),(0,cs.jsx)("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("div",{className:"text-sm text-gray-600",children:p?(0,cs.jsxs)("div",{className:"flex items-center space-x-2 text-orange-600",children:[(0,cs.jsx)(Nd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Editing mode - Changes will be saved"})]}):(0,cs.jsxs)("div",{className:"flex items-center space-x-2 text-green-600",children:[(0,cs.jsx)(jd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:'View mode - Click "Edit Prices" to modify'})]})}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("button",{onClick:i,className:"px-6 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"}),p&&(0,cs.jsxs)("button",{onClick:async()=>{try{f(!0);const e=o.intermediateStops.map((e,t)=>(0,Ie.A)((0,Ie.A)({},e),{},{price:d["stop_".concat(t)]||0})),t=(0,Ie.A)((0,Ie.A)({},o),{},{intermediateStops:e});await l(t),m((0,Ie.A)({},d)),Oe.oR.success("Prices updated successfully"),x(!1)}catch(e){console.error("Error updating prices:",e),Oe.oR.error("Failed to update prices")}finally{f(!1)}},disabled:g,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[g?(0,cs.jsx)(Od.A,{className:"w-4 h-4 animate-spin"}):(0,cs.jsx)(Uh.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Save Prices"})]})]})]})})]})})}):null},OV=()=>{const[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(""),[m,p]=(0,r.useState)("all"),[x,g]=(0,r.useState)("all"),[f,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),[A,S]=(0,r.useState)(!1),[C,_]=(0,r.useState)(!1),[T,P]=(0,r.useState)(!1),[E,D]=(0,r.useState)(null),[M,O]=(0,r.useState)(!1),[R,I]=(0,r.useState)([]),[L,F]=(0,r.useState)(""),[B,z]=(0,r.useState)(!1),[U,V]=(0,r.useState)(!1),[K,W]=(0,r.useState)(!1),[H,q]=(0,r.useState)(!1),[G,Y]=(0,r.useState)(!1),[$,J]=(0,r.useState)({routeNumber:"",routeName:"",startingPoint:{city:"",location:"",coordinates:{latitude:0,longitude:0}},endingPoint:{city:"",location:"",coordinates:{latitude:0,longitude:0}},totalDistance:0,estimatedDuration:0,depot:{depotId:"",name:""},busType:"City / Ordinary",baseFare:0,farePerKm:0,status:"active",features:[],notes:"",intermediateStops:[]}),[Q,X]=(0,r.useState)({depotId:"",routeType:"intercity",busTypes:["ordinary","fast_passenger","ac"],farePerKm:2.5,baseFare:10,timeSlots:["06:00","08:00","10:00","12:00","14:00","16:00","18:00","20:00"],daysOfWeek:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],generateTrips:!0,autoAssignBuses:!0,autoAssignCrew:!0,selectedDepots:[],depotConfigs:{},defaultBusTypes:[]}),[Z]=(0,r.useState)({"Thrissur Depot":[{from:"Thrissur",to:"Guruvayur",distance:29,duration:45,type:"intercity"},{from:"Thrissur",to:"Kochi",distance:74,duration:120,type:"intercity"},{from:"Thrissur",to:"Palakkad",distance:79,duration:135,type:"intercity"},{from:"Thrissur",to:"Kozhikode",distance:142,duration:240,type:"intercity"},{from:"Thrissur",to:"Ernakulam",distance:74,duration:120,type:"intercity"}],"Thiruvalla Depot":[{from:"Thiruvalla",to:"Pathanamthitta",distance:18,duration:30,type:"intercity"},{from:"Thiruvalla",to:"Kottayam",distance:27,duration:45,type:"intercity"},{from:"Thiruvalla",to:"Alappuzha",distance:32,duration:60,type:"intercity"},{from:"Thiruvalla",to:"Kollam",distance:54,duration:90,type:"intercity"},{from:"Thiruvalla",to:"Kochi",distance:85,duration:135,type:"intercity"}],"Sulthan Bathery Depot":[{from:"Sulthan Bathery",to:"Mananthavady",distance:35,duration:60,type:"intercity"},{from:"Sulthan Bathery",to:"Kalpetta",distance:19,duration:35,type:"intercity"},{from:"Sulthan Bathery",to:"Kozhikode",distance:98,duration:180,type:"intercity"},{from:"Sulthan Bathery",to:"Mysuru",distance:120,duration:210,type:"interstate"},{from:"Sulthan Bathery",to:"Bengaluru",distance:285,duration:420,type:"interstate"}],"Pathanamthitta Depot":[{from:"Pathanamthitta",to:"Thiruvalla",distance:18,duration:30,type:"intercity"},{from:"Pathanamthitta",to:"Chengannur",distance:32,duration:50,type:"intercity"},{from:"Pathanamthitta",to:"Erumely",distance:42,duration:75,type:"intercity"},{from:"Pathanamthitta",to:"Kottayam",distance:45,duration:75,type:"intercity"},{from:"Pathanamthitta",to:"Sabarimala",distance:65,duration:120,type:"seasonal"}],"Palakkad Depot":[{from:"Palakkad",to:"Thrissur",distance:79,duration:135,type:"intercity"},{from:"Palakkad",to:"Coimbatore",distance:55,duration:90,type:"interstate"},{from:"Palakkad",to:"Kozhikode",distance:155,duration:270,type:"intercity"},{from:"Palakkad",to:"Mannarkkad",distance:45,duration:75,type:"intercity"},{from:"Palakkad",to:"Shornur",distance:25,duration:40,type:"intercity"}],"Kottayam Depot":[{from:"Kottayam",to:"Pala",distance:32,duration:55,type:"intercity"},{from:"Kottayam",to:"Ernakulam",distance:65,duration:105,type:"intercity"},{from:"Kottayam",to:"Alappuzha",distance:45,duration:75,type:"intercity"},{from:"Kottayam",to:"Thiruvalla",distance:27,duration:45,type:"intercity"},{from:"Kottayam",to:"Kumily",distance:114,duration:210,type:"hill_station"}],"Kozhikode Depot":[{from:"Kozhikode",to:"Kannur",distance:92,duration:150,type:"intercity"},{from:"Kozhikode",to:"Kalpetta",distance:73,duration:135,type:"intercity"},{from:"Kozhikode",to:"Thrissur",distance:142,duration:240,type:"intercity"},{from:"Kozhikode",to:"Malappuram",distance:55,duration:90,type:"intercity"},{from:"Kozhikode",to:"Bengaluru",distance:385,duration:600,type:"interstate"}],"Ernakulam Depot":[{from:"Ernakulam",to:"Thrissur",distance:74,duration:120,type:"intercity"},{from:"Ernakulam",to:"Kottayam",distance:65,duration:105,type:"intercity"},{from:"Ernakulam",to:"Alappuzha",distance:53,duration:85,type:"intercity"},{from:"Ernakulam",to:"Kozhikode",distance:195,duration:330,type:"intercity"},{from:"Ernakulam",to:"Munnar",distance:130,duration:240,type:"hill_station"}],"Kollam Depot":[{from:"Kollam",to:"Thiruvananthapuram",distance:71,duration:120,type:"intercity"},{from:"Kollam",to:"Alappuzha",distance:85,duration:135,type:"intercity"},{from:"Kollam",to:"Pathanamthitta",distance:55,duration:90,type:"intercity"},{from:"Kollam",to:"Punalur",distance:45,duration:75,type:"intercity"},{from:"Kollam",to:"Kottarakkara",distance:23,duration:40,type:"intercity"}],"Kannur Depot":[{from:"Kannur",to:"Thalassery",distance:22,duration:35,type:"intercity"},{from:"Kannur",to:"Kozhikode",distance:92,duration:150,type:"intercity"},{from:"Kannur",to:"Kasaragod",distance:52,duration:85,type:"intercity"},{from:"Kannur",to:"Mangalore",distance:135,duration:240,type:"interstate"},{from:"Kannur",to:"Payyannur",distance:35,duration:55,type:"intercity"}],"Alappuzha Depot":[{from:"Alappuzha",to:"Ernakulam",distance:53,duration:85,type:"intercity"},{from:"Alappuzha",to:"Kottayam",distance:45,duration:75,type:"intercity"},{from:"Alappuzha",to:"Kollam",distance:85,duration:135,type:"intercity"},{from:"Alappuzha",to:"Thiruvalla",distance:32,duration:60,type:"intercity"},{from:"Alappuzha",to:"Cherthala",distance:25,duration:40,type:"intercity"}],"Kasargod Depot":[{from:"Kasaragod",to:"Kannur",distance:52,duration:85,type:"intercity"},{from:"Kasaragod",to:"Mangalore",distance:85,duration:150,type:"interstate"},{from:"Kasaragod",to:"Kanhangad",distance:18,duration:30,type:"intercity"},{from:"Kasaragod",to:"Payyannur",distance:25,duration:40,type:"intercity"},{from:"Kasaragod",to:"Bekal",distance:12,duration:20,type:"intercity"}],"Pala Depot":[{from:"Pala",to:"Kottayam",distance:32,duration:55,type:"intercity"},{from:"Pala",to:"Erattupetta",distance:15,duration:25,type:"intercity"},{from:"Pala",to:"Thodupuzha",distance:45,duration:75,type:"intercity"},{from:"Pala",to:"Vagamon",distance:42,duration:90,type:"hill_station"},{from:"Pala",to:"Kumily",distance:85,duration:150,type:"hill_station"}],"Cherthala Depot":[{from:"Cherthala",to:"Alappuzha",distance:25,duration:40,type:"intercity"},{from:"Cherthala",to:"Kochi",distance:42,duration:65,type:"intercity"},{from:"Cherthala",to:"Kottayam",distance:65,duration:105,type:"intercity"},{from:"Cherthala",to:"Thiruvalla",distance:55,duration:90,type:"intercity"},{from:"Cherthala",to:"Changanassery",distance:45,duration:75,type:"intercity"}],"Attingal Depot":[{from:"Attingal",to:"Thiruvananthapuram",distance:36,duration:60,type:"intercity"},{from:"Attingal",to:"Kollam",distance:45,duration:75,type:"intercity"},{from:"Attingal",to:"Varkala",distance:18,duration:30,type:"intercity"},{from:"Attingal",to:"Nedumangad",distance:25,duration:40,type:"intercity"},{from:"Attingal",to:"Kottarakkara",distance:35,duration:55,type:"intercity"}],"Neyyattinkara Depot":[{from:"Neyyattinkara",to:"Thiruvananthapuram",distance:22,duration:35,type:"intercity"},{from:"Neyyattinkara",to:"Kanyakumari",distance:20,duration:35,type:"interstate"},{from:"Neyyattinkara",to:"Nagercoil",distance:35,duration:60,type:"interstate"},{from:"Neyyattinkara",to:"Varkala",distance:45,duration:75,type:"intercity"},{from:"Neyyattinkara",to:"Attingal",distance:55,duration:90,type:"intercity"}],"Nedumangad Depot":[{from:"Nedumangad",to:"Thiruvananthapuram",distance:22,duration:35,type:"intercity"},{from:"Nedumangad",to:"Vithura",distance:35,duration:60,type:"intercity"},{from:"Nedumangad",to:"Ponmudi",distance:55,duration:105,type:"hill_station"},{from:"Nedumangad",to:"Attingal",distance:25,duration:40,type:"intercity"},{from:"Nedumangad",to:"Kollam",distance:65,duration:105,type:"intercity"}],"Kayamkulam Depot":[{from:"Kayamkulam",to:"Kollam",distance:35,duration:55,type:"intercity"},{from:"Kayamkulam",to:"Alappuzha",distance:25,duration:40,type:"intercity"},{from:"Kayamkulam",to:"Haripad",distance:15,duration:25,type:"intercity"},{from:"Kayamkulam",to:"Chengannur",distance:22,duration:35,type:"intercity"},{from:"Kayamkulam",to:"Kottayam",distance:55,duration:90,type:"intercity"}],"Kottarakkara Depot":[{from:"Kottarakkara",to:"Kollam",distance:23,duration:40,type:"intercity"},{from:"Kottarakkara",to:"Pathanamthitta",distance:45,duration:75,type:"intercity"},{from:"Kottarakkara",to:"Punalur",distance:35,duration:55,type:"intercity"},{from:"Kottarakkara",to:"Thiruvananthapuram",distance:55,duration:90,type:"intercity"},{from:"Kottarakkara",to:"Ernakulam",distance:125,duration:210,type:"intercity"}],"Changanassery Depot":[{from:"Changanassery",to:"Kottayam",distance:18,duration:30,type:"intercity"},{from:"Changanassery",to:"Alappuzha",distance:35,duration:55,type:"intercity"},{from:"Changanassery",to:"Thiruvalla",distance:15,duration:25,type:"intercity"},{from:"Changanassery",to:"Ernakulam",distance:75,duration:120,type:"intercity"},{from:"Changanassery",to:"Pala",distance:42,duration:65,type:"intercity"}],"Aluva Depot":[{from:"Aluva",to:"Ernakulam",distance:25,duration:40,type:"intercity"},{from:"Aluva",to:"Angamaly",distance:12,duration:20,type:"intercity"},{from:"Aluva",to:"Perumbavoor",distance:22,duration:35,type:"intercity"},{from:"Aluva",to:"Thrissur",distance:52,duration:85,type:"intercity"},{from:"Aluva",to:"Kochi Airport",distance:18,duration:30,type:"airport"}],"Thodupuzha Depot":[{from:"Thodupuzha",to:"Ernakulam",distance:65,duration:105,type:"intercity"},{from:"Thodupuzha",to:"Kottayam",distance:55,duration:90,type:"intercity"},{from:"Thodupuzha",to:"Muvattupuzha",distance:32,duration:50,type:"intercity"},{from:"Thodupuzha",to:"Kumily",distance:85,duration:150,type:"hill_station"},{from:"Thodupuzha",to:"Munnar",distance:95,duration:180,type:"hill_station"}],"Kattappana Depot":[{from:"Kattappana",to:"Kumily",distance:45,duration:75,type:"hill_station"},{from:"Kattappana",to:"Vandiperiyar",distance:25,duration:40,type:"hill_station"},{from:"Kattappana",to:"Nedumkandam",distance:15,duration:25,type:"hill_station"},{from:"Kattappana",to:"Munnar",distance:35,duration:60,type:"hill_station"},{from:"Kattappana",to:"Ernakulam",distance:145,duration:270,type:"intercity"}],"Adimali Depot":[{from:"Adimali",to:"Munnar",distance:18,duration:30,type:"hill_station"},{from:"Adimali",to:"Kothamangalam",distance:45,duration:75,type:"intercity"},{from:"Adimali",to:"Ernakulam",distance:85,duration:150,type:"intercity"},{from:"Adimali",to:"Kattappana",distance:35,duration:60,type:"hill_station"},{from:"Adimali",to:"Thrissur",distance:125,duration:210,type:"intercity"}],"Munnar Depot":[{from:"Munnar",to:"Adimali",distance:18,duration:30,type:"hill_station"},{from:"Munnar",to:"Ernakulam",distance:130,duration:240,type:"intercity"},{from:"Munnar",to:"Kattappana",distance:35,duration:60,type:"hill_station"},{from:"Munnar",to:"Kumily",distance:95,duration:180,type:"hill_station"},{from:"Munnar",to:"Coimbatore",distance:175,duration:300,type:"interstate"}],"Kumily Depot":[{from:"Kumily",to:"Thekkady",distance:5,duration:10,type:"tourist"},{from:"Kumily",to:"Kottayam",distance:114,duration:210,type:"intercity"},{from:"Kumily",to:"Pathanamthitta",distance:95,duration:180,type:"intercity"},{from:"Kumily",to:"Thodupuzha",distance:85,duration:150,type:"intercity"},{from:"Kumily",to:"Madurai",distance:140,duration:240,type:"interstate"}]}),[ee,te]=(0,r.useState)(""),[se,re]=(0,r.useState)(""),[ae,ne]=(0,r.useState)("all"),[ie,oe]=(0,r.useState)([]),le=e=>{switch(e){case"City / Ordinary":case"Non A/C Low Floor":default:return"ordinary";case"Luxury / Hi-tech & AC":return"volvo";case"Super Fast Passenger":case"Super Express":return"super_fast";case"Fast Passenger / LSFP":case"Super Deluxe":case"City Fast":return"fast_passenger";case"A/C Low Floor":return"ac";case"Garuda Maharaja / Garuda King / Multi-axle Premium":case"Garuda Sanchari / Biaxle Premium":return"garuda"}},ce=e=>{switch(e){case"ordinary":default:return"City / Ordinary";case"volvo":return"Luxury / Hi-tech & AC";case"super_fast":return"Super Fast Passenger";case"fast_passenger":return"Fast Passenger / LSFP";case"ac":return"A/C Low Floor";case"garuda":return"Garuda Maharaja / Garuda King / Multi-axle Premium"}},de=e=>{switch(e){case"intercity":default:return"City / Ordinary";case"interstate":return"Luxury / Hi-tech & AC";case"hill_station":return"Super Fast Passenger";case"seasonal":return"Fast Passenger / LSFP";case"tourist":return"A/C Low Floor";case"airport":return"Garuda Maharaja / Garuda King / Multi-axle Premium"}},ue=(e,t)=>{const s=o.find(t=>t.busType===e&&t.isActive);if(s){const e=t*s.ratePerKm,r=Math.max(e,s.minimumFare);return{baseFare:Math.round(r),farePerKm:s.ratePerKm,minimumFare:s.minimumFare}}return{baseFare:Math.max(8,Math.floor(2.5*t)),farePerKm:2.5,minimumFare:8}},he=e=>{switch(e){case"ordinary":case"City / Ordinary":return"Ordinary";case"volvo":case"Luxury / Hi-tech & AC":return"Volvo";case"super_fast":case"Super Fast Passenger":return"Super Fast";case"fast_passenger":case"Fast Passenger / LSFP":return"Fast Passenger";case"ac":return"AC";case"garuda":case"Garuda Maharaja / Garuda King / Multi-axle Premium":return"Garuda";case"A/C Low Floor":return"AC Low Floor";case"Garuda Sanchari / Biaxle Premium":return"Garuda Sanchari";case"Super Deluxe":return"Super Deluxe";case"Super Express":return"Super Express";case"City Fast":return"City Fast";case"Non A/C Low Floor":return"Non AC Low Floor";default:return e}},[me,pe]=(0,r.useState)({depotId:"",routeType:"intercity",count:10,startNumber:1,prefix:"R",targetDate:(new Date).toISOString().slice(0,10),distanceRange:{min:50,max:200},farePerKm:2.5,features:["AC"]}),[xe,ge]=(0,r.useState)({departureTime:"",arrivalTime:"",frequency:"daily",daysOfWeek:[],validFrom:"",validTo:"",busType:"ac_sleeper"}),[fe,ye]=(0,r.useState)({name:"",city:"",coordinates:{lat:0,lng:0},sequence:0,estimatedArrival:"",estimatedDeparture:"",distanceFromStart:0}),[be,ve]=(0,r.useState)({startLocation:null,endLocation:null,routePolyline:null,routeCoordinates:[],intermediateStops:[],totalDistance:0,estimatedDuration:0,isSelectingStart:!0,mapCenter:[10.8505,76.2711],zoom:8}),[je,Ne]=(0,r.useState)({routeNumber:"",routeName:"",depotId:"",busType:"ordinary",baseFare:0,farePerKm:2.5,features:["AC"],notes:"",scheduling:{frequency:"daily",timeSlots:[],daysOfWeek:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"]}}),[we,ke]=(0,r.useState)(new Map),[Ae,Se]=(0,r.useState)({ordinary:{baseFare:1,farePerKm:1.5},fast_passenger:{baseFare:2,farePerKm:1.8},super_fast:{baseFare:3,farePerKm:2},ac:{baseFare:5,farePerKm:3.5},volvo:{baseFare:8,farePerKm:5},garuda:{baseFare:10,farePerKm:6}});(0,r.useEffect)(()=>{C&&(async e=>{try{const t=new URLSearchParams;e&&t.set("depotId",e);const s=await(0,xs.nr)("/api/fare-policy?".concat(t.toString())),r=(null===s||void 0===s?void 0:s.data)||[];if(!Array.isArray(r)||0===r.length)return;const a=e=>{const t=String(e||"").toLowerCase();return t.includes("garuda maharaja")||t.includes("multi-axle")||t.includes("garuda")||t.includes("premium")?"garuda":t.includes("luxury")||t.includes("hi-tech")||t.includes("a/c low")||t.includes("ac")?"ac":t.includes("volvo")?"volvo":t.includes("super fast")?"super_fast":t.includes("fast passenger")||t.includes("lsfp")||t.includes("city fast")?"fast_passenger":"ordinary"},n=(0,Ie.A)({},Ae);r.forEach(e=>{var t,s;const r=a(e.busType),i="number"===typeof e.minimumFare?e.minimumFare:(null===(t=n[r])||void 0===t?void 0:t.baseFare)||0,o="number"===typeof e.ratePerKm?e.ratePerKm:(null===(s=n[r])||void 0===s?void 0:s.farePerKm)||0;n[r]={baseFare:i,farePerKm:o}}),Se(n);const i=n[je.busType];i&&(Ne(e=>(0,Ie.A)((0,Ie.A)({},e),{},{baseFare:i.baseFare,farePerKm:i.farePerKm})),nt(be.intermediateStops,be.totalDistance))}catch(qU){console.warn("Failed to fetch fare policies; using defaults",qU)}})(je.depotId)},[C,je.depotId]);(0,r.useRef)(null),(0,r.useRef)([]),(0,r.useRef)(null);const[Ce,_e]=(0,r.useState)(!1),[Te,Pe]=(0,r.useState)("csv"),[Ee,De]=(0,r.useState)({status:"all",depot:"all",dateRange:{from:"",to:""}}),[Me,Re]=(0,r.useState)(!1),[Le,Fe]=(0,r.useState)(null),[Be,ze]=(0,r.useState)(null),Ue=[{name:"Thiruvananthapuram",lat:8.5241,lng:76.9366,district:"Thiruvananthapuram"},{name:"Kochi",lat:9.9312,lng:76.2673,district:"Ernakulam"},{name:"Kozhikode",lat:11.2588,lng:75.7804,district:"Kozhikode"},{name:"Thrissur",lat:10.5276,lng:76.2144,district:"Thrissur"},{name:"Kollam",lat:8.8932,lng:76.6141,district:"Kollam"},{name:"Kannur",lat:11.8745,lng:75.3704,district:"Kannur"},{name:"Palakkad",lat:10.7867,lng:76.6548,district:"Palakkad"},{name:"Kottayam",lat:9.5916,lng:76.5222,district:"Kottayam"},{name:"Alappuzha",lat:9.4981,lng:76.3388,district:"Alappuzha"},{name:"Malappuram",lat:11.05,lng:76.07,district:"Malappuram"},{name:"Pathanamthitta",lat:9.2647,lng:76.787,district:"Pathanamthitta"},{name:"Idukki",lat:9.8497,lng:76.9681,district:"Idukki"},{name:"Wayanad",lat:11.685,lng:76.1319,district:"Wayanad"},{name:"Kasargod",lat:12.5,lng:75,district:"Kasargod"}];(0,r.useEffect)(()=>{Ke(),Ve()},[]);const Ve=async()=>{console.log("\ud83d\udd0d Testing API connections...");const e=[{name:"Routes",url:"/api/admin/routes"},{name:"Depots",url:"/api/admin/depots"},{name:"Stops",url:"/api/stops"},{name:"Auto Scheduler",url:"/api/auto-scheduler/status"}],t=(await Promise.allSettled(e.map(async e=>{try{const t=await(0,xs.nr)(e.url);return console.log("\u2705 ".concat(e.name," API: Connected"),t),{name:e.name,status:"connected",response:t}}catch(t){return console.error("\u274c ".concat(e.name," API: Failed"),t),{name:e.name,status:"failed",error:t.message}}}))).filter(e=>"fulfilled"===e.status&&"connected"===e.value.status).length,s=e.length;console.log("\ud83d\udcca API Connection Test Results: ".concat(t,"/").concat(s," APIs connected")),t===s?console.log("\u2705 All API endpoints are connected and working"):(console.warn("\u26a0\ufe0f ".concat(s-t," API endpoints are not responding")),Oe.oR.warning("API Status: ".concat(t,"/").concat(s," endpoints connected")))},Ke=async()=>{let e,s,r,n;d(!0);try{console.log("\ud83d\udd04 Fetching data from APIs..."),[e,s,r,n]=await Promise.all([(0,xs.nr)("/api/admin/routes"),(0,xs.nr)("/api/admin/depots"),(0,xs.nr)("/api/stops"),(0,xs.nr)("/api/fare-policy/public")]),console.log("\ud83d\udce1 API Responses received:",{routes:e,depots:s,stops:r,farePolicies:n});const o=We(e,"routes"),c=We(s,"depots"),d=We(r,"stops"),u=We(n,"farePolicies");Array.isArray(o)||console.warn("\u26a0\ufe0f Routes data is not an array:",o),Array.isArray(c)||console.warn("\u26a0\ufe0f Depots data is not an array:",c),Array.isArray(d)||console.warn("\u26a0\ufe0f Stops data is not an array:",d),t(o||[]),a(c||[]),i(d||[]),l(u||[]),console.log("\u2705 Data successfully loaded:",{routes:(null===o||void 0===o?void 0:o.length)||0,depots:(null===c||void 0===c?void 0:c.length)||0,stops:(null===d||void 0===d?void 0:d.length)||0,farePolicies:(null===u||void 0===u?void 0:u.length)||0}),(null===o||void 0===o?void 0:o.length)>0||(null===c||void 0===c?void 0:c.length)>0||(null===d||void 0===d?void 0:d.length)>0?Oe.oR.success("Data loaded: ".concat((null===o||void 0===o?void 0:o.length)||0," routes, ").concat((null===c||void 0===c?void 0:c.length)||0," depots, ").concat((null===d||void 0===d?void 0:d.length)||0," stops")):Oe.oR.info('No routes found. Click "Kerala Routes" to browse and add predefined Kerala depot routes.')}catch(m){var o,c,u,h;console.error("\u274c Error fetching data:",m),console.error("\ud83d\udccb Routes Response:",e),console.error("\ud83d\udccb Depots Response:",s),console.error("\ud83d\udccb Stops Response:",r),null!==(o=m.message)&&void 0!==o&&o.includes("Network")?Oe.oR.error("Network error: Please check your internet connection"):null!==(c=m.message)&&void 0!==c&&c.includes("401")?Oe.oR.error("Authentication error: Please login again"):null!==(u=m.message)&&void 0!==u&&u.includes("403")?Oe.oR.error("Access denied: You don't have permission to access this data"):null!==(h=m.message)&&void 0!==h&&h.includes("500")?Oe.oR.error("Server error: Please try again later"):Oe.oR.error("Failed to fetch data: ".concat(m.message)),t([]),a([]),i([]),l([])}finally{d(!1)}},We=(e,t)=>{if(!e)return console.warn("No response received for ".concat(t)),[];if(Array.isArray(e))return e;if(e.data){if(Array.isArray(e.data))return e.data;if(e.data.data&&Array.isArray(e.data.data))return e.data.data;if(e.data[t]&&Array.isArray(e.data[t]))return e.data[t]}return e[t]&&Array.isArray(e[t])?e[t]:(console.warn("Could not extract ".concat(t," from response:"),e),[])},He=async()=>{if(!$.routeNumber.trim())return void Oe.oR.error("Please enter a route number");if(!$.depot.depotId)return void Oe.oR.error("Please select a depot");if(!$.startingPoint.city.trim())return void Oe.oR.error("Please enter starting city");if(!$.endingPoint.city.trim())return void Oe.oR.error("Please enter ending city");if($.startingPoint.city===$.endingPoint.city)return void Oe.oR.error("Starting and ending cities cannot be the same");if(e.find(e=>e.routeNumber===$.routeNumber))Oe.oR.error("Route number already exists. Please choose a different number.");else try{d(!0);let e=$.totalDistance,s=$.estimatedDuration;e&&0!==e||(e=Ge($.startingPoint.city,$.endingPoint.city)),s&&0!==s||(s=Math.floor(e/35*60));let r=$.baseFare;r&&0!==r||(r=Math.max(10,Math.floor(2.5*e)));const a={routeNumber:$.routeNumber.trim(),routeName:$.routeName.trim()||"".concat($.startingPoint.city," \u2192 ").concat($.endingPoint.city),startingPoint:(0,Ie.A)((0,Ie.A)({},$.startingPoint),{},{city:$.startingPoint.city.trim(),location:$.startingPoint.location.trim()||"".concat($.startingPoint.city," Central Bus Station"),coordinates:0!==$.startingPoint.coordinates.lat?$.startingPoint.coordinates:Ye($.startingPoint.city)}),endingPoint:(0,Ie.A)((0,Ie.A)({},$.endingPoint),{},{city:$.endingPoint.city.trim(),location:$.endingPoint.location.trim()||"".concat($.endingPoint.city," Central Bus Station"),coordinates:0!==$.endingPoint.coordinates.lat?$.endingPoint.coordinates:Ye($.endingPoint.city)}),intermediateStops:$.intermediateStops||[],totalDistance:e,estimatedDuration:s,baseFare:r,farePerKm:$.farePerKm||2.5,depotId:$.depot.depotId,status:$.status||"active",amenities:$.features||[],schedules:$.schedules||[],notes:$.notes||"",busType:le($.busType)||"ordinary"};console.log("\ud83d\udcdd Sending enhanced route data:",a);const n=await(0,xs.nr)("/api/admin/routes",{method:"POST",body:JSON.stringify(a)});if(console.log("\ud83d\udce1 Single Route Add API Response:",n),n&&(n.data&&n.data.success||n.ok||201===n.status)){const e=n.data||n.route||n;Oe.oR.success("\u2705 Route ".concat($.routeNumber," added successfully!")),e&&e._id&&t(t=>[e,...t]),v(!1),st(),setTimeout(()=>Ke(),1e3)}else{const e=(null===n||void 0===n?void 0:n.message)||(null===n||void 0===n?void 0:n.error)||"Failed to add route";console.error("\u274c Single Route Add failed:",n),Oe.oR.error("Failed to add route: ".concat(e))}}catch(s){console.error("\u274c Error adding route:",s),Oe.oR.error("Failed to add route: ".concat(s.message))}finally{d(!1)}},qe=async()=>{if(me.depotId)if(me.count<=0||me.count>100)Oe.oR.error("Please enter a valid number of routes (1-100)");else try{d(!0);const r=[],a=[["Thiruvananthapuram","Kochi"],["Kochi","Kozhikode"],["Thiruvananthapuram","Kozhikode"],["Kochi","Thrissur"],["Thrissur","Kozhikode"],["Kollam","Kochi"],["Kannur","Kozhikode"],["Palakkad","Kochi"],["Kottayam","Kochi"],["Alappuzha","Kochi"],["Thiruvananthapuram","Kollam"],["Kochi","Kottayam"],["Kozhikode","Kannur"],["Thrissur","Palakkad"],["Kochi","Alappuzha"],["Kollam","Kottayam"],["Kozhikode","Wayanad"],["Thiruvananthapuram","Kottayam"],["Kochi","Idukki"],["Kannur","Kasargod"]],n=s.find(e=>e._id===me.depotId);for(let e=0;e<me.count;e++){const t="".concat(me.prefix).concat(String(me.startNumber+e).padStart(3,"0")),s=a[e%a.length],i=Ge(s[0],s[1]),o=Math.floor(i/35*60);r.push({routeNumber:t,routeName:"".concat(s[0]," \u2192 ").concat(s[1]),startingPoint:{city:s[0],location:"".concat(s[0]," Central Bus Station"),coordinates:Ye(s[0])},endingPoint:{city:s[1],location:"".concat(s[1]," Central Bus Station"),coordinates:Ye(s[1])},totalDistance:i,estimatedDuration:o,depotId:me.depotId,baseFare:Math.max(10,Math.floor(i*me.farePerKm)),farePerKm:me.farePerKm,amenities:me.features,status:"active",busType:"express"===me.routeType?"fast_passenger":"ordinary",notes:"Bulk generated route from ".concat((null===n||void 0===n?void 0:n.depotName)||"selected depot")})}console.log("\ud83d\ude8c Creating ".concat(r.length," bulk routes for depot: ").concat(null===n||void 0===n?void 0:n.depotName));const i=5;let o=0,l=0;const c=[];for(let t=0;t<r.length;t+=i){const s=r.slice(t,t+i);try{(await Promise.allSettled(s.map(async e=>{try{console.log("\ud83d\udcdd Creating route: ".concat(e.routeNumber));const t=await(0,xs.nr)("/api/admin/routes",{method:"POST",body:JSON.stringify(e)});if(console.log("\ud83d\udce1 Response for ".concat(e.routeNumber,":"),t),t&&(t.data&&t.data.success||t.ok||201===t.status)){const e=t.data||t.route||t;return c.push(e),{success:!0,route:e}}{const s=(null===t||void 0===t?void 0:t.message)||(null===t||void 0===t?void 0:t.error)||"Unknown error";return console.error("\u274c Failed to create route ".concat(e.routeNumber,":"),s),{success:!1,error:s,routeNumber:e.routeNumber}}}catch(t){return console.error("\u274c Error creating route ".concat(e.routeNumber,":"),t),{success:!1,error:t.message,routeNumber:e.routeNumber}}}))).forEach(e=>{if("fulfilled"===e.status&&e.value.success)o++;else{l++;const t="rejected"===e.status?e.reason:e.value.error;console.error("\u274c Route creation failed:",t)}});const e=Math.round((t+i)/r.length*100);Oe.oR.loading("Creating bulk routes... ".concat(e,"% complete (").concat(o," success, ").concat(l," failed)"),{id:"bulk-progress",duration:2e3})}catch(e){l+=s.length,console.error("\u274c Batch creation error:",e)}}Oe.oR.dismiss("bulk-progress"),o>0?(c.length>0&&t(e=>[...c,...e]),Oe.oR.success("\u2705 Bulk route creation completed! ".concat(o," routes created successfully").concat(l>0?", ".concat(l," failed"):"")),me.targetDate&&(Oe.oR.info("\ud83c\udfaf Scheduling trips for new routes..."),await Je()),y(!1),rt(),setTimeout(()=>Ke(),1e3)):Oe.oR.error("\u274c Failed to create any routes. Please check your configuration and try again.")}catch(e){console.error("Error adding bulk routes:",e),Oe.oR.error("Failed to add routes")}finally{d(!1)}else Oe.oR.error("Please select a depot for bulk route creation")},Ge=(e,t)=>{const s={"Thiruvananthapuram-Kochi":200,"Kochi-Kozhikode":180,"Thiruvananthapuram-Kozhikode":350,"Kochi-Thrissur":80,"Thrissur-Kozhikode":100,"Kollam-Kochi":150,"Kannur-Kozhikode":90,"Palakkad-Kochi":120,"Kottayam-Kochi":60,"Alappuzha-Kochi":50,"Thiruvananthapuram-Kollam":70,"Kochi-Kottayam":60,"Kozhikode-Kannur":90,"Thrissur-Palakkad":40,"Kochi-Alappuzha":50,"Kollam-Kottayam":80,"Kozhikode-Wayanad":100,"Thiruvananthapuram-Kottayam":160,"Kochi-Idukki":120,"Kannur-Kasargod":50},r="".concat(e,"-").concat(t),a="".concat(t,"-").concat(e);return s[r]||s[a]||Math.floor(200*Math.random())+50},Ye=e=>({Thiruvananthapuram:{lat:8.5241,lng:76.9366},Kochi:{lat:9.9312,lng:76.2673},Kozhikode:{lat:11.2588,lng:75.7804},Thrissur:{lat:10.5276,lng:76.2144},Kollam:{lat:8.8932,lng:76.6141},Kannur:{lat:11.8745,lng:75.3704},Palakkad:{lat:10.7867,lng:76.6548},Kottayam:{lat:9.5916,lng:76.5222},Alappuzha:{lat:9.4981,lng:76.3388},Wayanad:{lat:11.685,lng:76.1319},Idukki:{lat:9.8497,lng:76.9681},Kasargod:{lat:12.5,lng:75}}[e]||{lat:10.8505,lng:76.2711}),$e=async()=>{if(0!==R.length)try{switch(d(!0),L){case"activate":await Promise.all(R.map(e=>(0,xs.nr)("/api/admin/routes/".concat(e),{method:"PUT",body:JSON.stringify({status:"active"})}))),Oe.oR.success("Activated ".concat(R.length," routes"));break;case"deactivate":await Promise.all(R.map(e=>(0,xs.nr)("/api/admin/routes/".concat(e),{method:"PUT",body:JSON.stringify({status:"inactive"})}))),Oe.oR.success("Deactivated ".concat(R.length," routes"));break;case"update_fare":await Promise.all(R.map(e=>(0,xs.nr)("/api/admin/routes/".concat(e),{method:"PUT",body:JSON.stringify({baseFare:me.baseFare,farePerKm:me.farePerKm})}))),Oe.oR.success("Updated fares for ".concat(R.length," routes"));break;case"schedule_trips":await Je()}I([]),F(""),Ke()}catch(e){console.error("Error in bulk operation:",e),Oe.oR.error("Bulk operation failed")}finally{d(!1)}else Oe.oR.error("Please select routes for bulk operation")},Je=async()=>{if(me.targetDate)try{const s=await(0,xs.nr)("/api/auto-scheduler/mass-schedule",{method:"POST",body:JSON.stringify({date:me.targetDate,depotIds:me.depotId?[me.depotId]:[],maxTripsPerRoute:5,timeGap:30,autoAssignCrew:!0,autoAssignBuses:!0,generateReports:!0,routeIds:R})});if(null!==s&&void 0!==s&&s.success||null!==s&&void 0!==s&&s.ok){var e,t;const r=(null===(e=s.data)||void 0===e?void 0:e.tripsCreated)||s.tripsCreated||0,a=(null===(t=s.data)||void 0===t?void 0:t.successRate)||s.successRate||"0%";Oe.oR.success("Bulk scheduling completed! ".concat(r," trips created for selected routes (").concat(a," success rate)"))}else{const e=(null===s||void 0===s?void 0:s.message)||(null===s||void 0===s?void 0:s.error)||"Bulk scheduling failed";Oe.oR.error(e)}}catch(s){console.error("Error in bulk scheduling:",s),Oe.oR.error("Bulk scheduling failed")}else Oe.oR.error("Please select a target date for scheduling")},Qe=async()=>{if(0!==Q.selectedDepots.length)try{d(!0);const r=[];let a=1;for(const e of Q.selectedDepots){const t=Q.depotConfigs[e];if(!t||0===t.busTypes.length){console.warn("Skipping depot ".concat(e," - no configuration or bus types"));continue}const n=s.find(t=>t._id===e);console.log("\ud83d\ude8c Processing depot: ".concat(null===n||void 0===n?void 0:n.depotName," with ").concat(t.busTypes.length," bus types"));for(let s=0;s<Ue.length;s++)for(let i=s+1;i<Ue.length;i++){const o=Ue[s],l=Ue[i],c=et(o.lat,o.lng,l.lat,l.lng);t.busTypes.forEach(s=>{const i={routeNumber:"KR".concat(String(a).padStart(3,"0")),routeName:"".concat(o.name," \u2192 ").concat(l.name),startingPoint:{city:o.name,location:"".concat(o.name," Central"),coordinates:{lat:o.lat,lng:o.lng}},endingPoint:{city:l.name,location:"".concat(l.name," Central"),coordinates:{lat:l.lat,lng:l.lng}},totalDistance:Math.round(c),estimatedDuration:Math.round(c/40*60),depotId:e,baseFare:t.baseFare,farePerKm:t.farePerKm,busType:s,amenities:"ac"===s?["AC","WiFi"]:"fast_passenger"===s?["WiFi"]:[],status:"active",schedules:Q.generateTrips?Xe(t):[],notes:"Auto-generated Kerala route connecting ".concat(o.district," and ").concat(l.district," districts (").concat(null===n||void 0===n?void 0:n.depotName,")")};r.push(i),a++})}}console.log("\ud83d\ude8c Creating ".concat(r.length," Kerala routes across ").concat(Q.selectedDepots.length," depots..."));const n=10;let i=0,o=0;const l=[];for(let t=0;t<r.length;t+=n){const s=r.slice(t,t+n);try{(await Promise.allSettled(s.map(async e=>{try{console.log("\ud83d\udcdd Creating Kerala route: ".concat(e.routeNumber," for depot ").concat(e.depotId));const t=await(0,xs.nr)("/api/admin/routes",{method:"POST",body:JSON.stringify(e)});if(console.log("\ud83d\udce1 Kerala Route Response for ".concat(e.routeNumber,":"),t),t&&(t.data&&t.data.success||t.ok||201===t.status)){const e=t.data||t.route||t;return l.push(e),{success:!0,route:e}}{const s=(null===t||void 0===t?void 0:t.message)||(null===t||void 0===t?void 0:t.error)||"Unknown error";return console.error("\u274c Failed to create Kerala route ".concat(e.routeNumber,":"),s),{success:!1,error:s,routeNumber:e.routeNumber}}}catch(t){return console.error("\u274c Error creating Kerala route ".concat(e.routeNumber,":"),t),{success:!1,error:t.message,routeNumber:e.routeNumber}}}))).forEach(e=>{if("fulfilled"===e.status&&e.value.success)i++;else{o++;const t="rejected"===e.status?e.reason:e.value.error;console.error("\u274c Kerala route creation failed:",t)}});const e=Math.round((t+n)/r.length*100);Oe.oR.loading("Creating Kerala routes... ".concat(e,"% complete (").concat(i," success, ").concat(o," failed)"),{id:"kerala-progress",duration:2e3})}catch(e){o+=s.length,console.error("\u274c Kerala batch creation error:",e)}}Oe.oR.dismiss("kerala-progress"),i>0?(l.length>0&&t(e=>[...l,...e]),Oe.oR.success("\u2705 Kerala route generation completed! ".concat(i," routes created successfully across ").concat(Q.selectedDepots.length," depots").concat(o>0?", ".concat(o," failed"):"")),Q.generateTrips&&(Oe.oR.info("\ud83c\udfaf Generating trips for Kerala routes..."),await Ze()),z(!1),setTimeout(()=>Ke(),1e3)):Oe.oR.error("\u274c Failed to create any Kerala routes. Please check your configuration and try again.")}catch(e){console.error("Error in Kerala auto route generation:",e),Oe.oR.error("Failed to generate Kerala routes")}finally{d(!1)}else Oe.oR.error("Please select at least one depot for route generation")},Xe=e=>Q.timeSlots.map(t=>({departureTime:t,arrivalTime:tt(t,180),frequency:"daily",daysOfWeek:Q.daysOfWeek,validFrom:(new Date).toISOString().slice(0,10),validTo:new Date(Date.now()+31536e6).toISOString().slice(0,10),busType:e.busTypes[0],autoGenerated:!0})),Ze=async()=>{try{let t=0;for(const r of Q.selectedDepots){const a=Q.depotConfigs[r];if(!a)continue;const n=s.find(e=>e._id===r);console.log("\ud83c\udfaf Generating trips for depot: ".concat(null===n||void 0===n?void 0:n.depotName));const i=await(0,xs.nr)("/api/auto-scheduler/kerala-mass-schedule",{method:"POST",body:JSON.stringify({depotId:r,timeSlots:Q.timeSlots,daysOfWeek:Q.daysOfWeek,busTypes:a.busTypes,autoAssignBuses:Q.autoAssignBuses,autoAssignCrew:Q.autoAssignCrew,generateReports:!0,targetDate:(new Date).toISOString().slice(0,10)})});if(null!==i&&void 0!==i&&i.success||null!==i&&void 0!==i&&i.ok){var e;const s=(null===(e=i.data)||void 0===e?void 0:e.tripsCreated)||i.tripsCreated||0;t+=s,console.log("\u2705 Generated ".concat(s," trips for ").concat(null===n||void 0===n?void 0:n.depotName))}else console.error("Failed to generate trips for ".concat(null===n||void 0===n?void 0:n.depotName,":"),(null===i||void 0===i?void 0:i.message)||(null===i||void 0===i?void 0:i.error))}t>0?Oe.oR.success("\ud83c\udfaf Kerala trip generation completed! ".concat(t," trips scheduled across ").concat(Q.selectedDepots.length," depots")):Oe.oR.error("Failed to generate Kerala trips")}catch(t){console.error("Error in Kerala trip generation:",t),Oe.oR.error("Failed to generate Kerala trips")}},et=(e,t,s,r)=>{const a=(s-e)*Math.PI/180,n=(r-t)*Math.PI/180,i=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},tt=(e,t)=>{const[s,r]=e.split(":").map(Number),a=60*s+r+t,n=Math.floor(a/60)%24,i=a%60;return"".concat(String(n).padStart(2,"0"),":").concat(String(i).padStart(2,"0"))},st=()=>{J({routeNumber:"",routeName:"",startingPoint:{city:"",location:"",coordinates:{lat:0,lng:0}},endingPoint:{city:"",location:"",coordinates:{lat:0,lng:0}},totalDistance:0,estimatedDuration:0,intermediateStops:[],depot:{depotId:"",name:""},schedules:[],status:"active",baseFare:0,farePerKm:0,features:[],notes:""})},rt=()=>{pe({depotId:"",routeType:"intercity",count:10,startNumber:1,prefix:"R",distanceRange:{min:50,max:200},farePerKm:2.5,features:["AC"]})},at=async(e,t)=>{try{if(window.google&&window.google.maps){const s=new window.google.maps.Geocoder,r=new window.google.maps.LatLng(e,t);return new Promise(a=>{s.geocode({location:r},(s,r)=>{"OK"===r&&s[0]?a(s[0].formatted_address):a("".concat(e.toFixed(4),", ").concat(t.toFixed(4)))})})}return"".concat(e.toFixed(4),", ").concat(t.toFixed(4))}catch(s){return console.error("Error getting location name:",s),"".concat(e.toFixed(4),", ").concat(t.toFixed(4))}},nt=(e,t,s,r)=>{var a,n;const i=new Map,o=s||be.startLocation||{name:"Start"},l=r||be.endLocation||{name:"End"},c="number"!==typeof t||isNaN(t)?be.totalDistance||0:t,d=Array.isArray(e)?e:[],u=[{name:(null===o||void 0===o?void 0:o.name)||"Start",distanceFromStart:0},...d.map((e,t)=>({name:(null===e||void 0===e?void 0:e.name)||"Stop ".concat(t+1),distanceFromStart:"number"!==typeof(null===e||void 0===e?void 0:e.distanceFromStart)||isNaN(e.distanceFromStart)?0:e.distanceFromStart})),{name:(null===l||void 0===l?void 0:l.name)||"End",distanceFromStart:c}];if(null===(a=u[0])||void 0===a||!a.name||null===(n=u[u.length-1])||void 0===n||!n.name||u.length<2)ke(new Map);else{for(let e=0;e<u.length;e++){const t=u[e]||{name:"S".concat(e),distanceFromStart:0},s=new Map;for(let r=e+1;r<u.length;r++){const a=u[r]||{name:"S".concat(r),distanceFromStart:t.distanceFromStart},n="number"===typeof a.distanceFromStart?a.distanceFromStart:0,i="number"===typeof t.distanceFromStart?t.distanceFromStart:0,o=Math.max(0,n-i),l={};Object.keys(Ae).forEach(e=>{const t=Ae[e];l[e]=Math.round(100*(t.baseFare+o*t.farePerKm))/100}),s.set((null===a||void 0===a?void 0:a.name)||"S".concat(r),{distance:o,fares:l,fromIndex:e,toIndex:r})}s.size>0&&i.set((null===t||void 0===t?void 0:t.name)||"S".concat(e),s)}ke(i)}},it=async()=>{if(!be.startLocation||!be.endLocation)return void Oe.oR.error("Please select start and end locations first");const e=(be.startLocation.lat+be.endLocation.lat)/2,t=(be.startLocation.lng+be.endLocation.lng)/2,s=await at(e,t),r={stopId:"MANUAL_".concat(Date.now()),name:s,lat:e,lng:t,sequence:be.intermediateStops.length+1,distanceFromStart:be.totalDistance/2,isManual:!0};ve(e=>(0,Ie.A)((0,Ie.A)({},e),{},{intermediateStops:[...e.intermediateStops,r]})),nt([...be.intermediateStops,r],be.totalDistance),Oe.oR.success("Manual stop added successfully")},ot=async()=>{try{var e,s;d(!0);const r=be.totalDistance||0,a=be.estimatedDuration||0,n=Array.isArray(be.intermediateStops)?be.intermediateStops:[],i=n.map((e,t)=>{const s=e.name||"Stop ".concat(t+1),i=s&&String(s).split(",")[0]||"Stop ".concat(t+1),o="number"!==typeof e.distanceFromStart||isNaN(e.distanceFromStart)?r*((t+1)/(n.length+1)):e.distanceFromStart;return{city:i,location:s,stopNumber:t+1,distanceFromStart:o,estimatedArrival:r>0?Math.round(o/r*a):Math.round(a*((t+1)/(n.length+1))),coordinates:{latitude:e.lat,longitude:e.lng}}}),o="".concat(((null===(e=be.startLocation)||void 0===e?void 0:e.name)||"Start").split(",")[0]," \u2192 ").concat(((null===(s=be.endLocation)||void 0===s?void 0:s.name)||"End").split(",")[0]),l={routeNumber:je.routeNumber,routeName:je.routeName||o,depotId:je.depotId,startingPoint:{city:be.startLocation.name.split(",")[0]||"Unknown",location:be.startLocation.name,coordinates:{lat:be.startLocation.lat,lng:be.startLocation.lng}},endingPoint:{city:be.endLocation.name.split(",")[0]||"Unknown",location:be.endLocation.name,coordinates:{lat:be.endLocation.lat,lng:be.endLocation.lng}},totalDistance:be.totalDistance,estimatedDuration:be.estimatedDuration,intermediateStops:i,baseFare:je.baseFare,farePerKm:je.farePerKm,busType:je.busType,features:je.features,fareMatrix:Array.from(we.entries()),farePolicy:Ae[je.busType]?(0,Ie.A)({busType:je.busType},Ae[je.busType]):void 0,status:"active",notes:je.notes,routePolyline:be.routePolyline};console.log("\ud83d\udcdd Sending map-based route data:",l);const c=await(0,xs.nr)("/api/admin/routes",{method:"POST",body:JSON.stringify(l)});if(console.log("\ud83d\udce1 Map Route API Response:",c),c&&(c.data&&c.data.success||c.ok||201===c.status)){const e=c.data||c.route||c;Oe.oR.success("\u2705 Map-based route saved successfully!"),e&&e._id&&t(t=>[e,...t]),_(!1),lt(),setTimeout(()=>Ke(),1e3)}else{const e=(null===c||void 0===c?void 0:c.message)||(null===c||void 0===c?void 0:c.error)||"Failed to save route";console.error("\u274c Map Route creation failed:",c),Oe.oR.error("Failed to save route: ".concat(e))}}catch(r){console.error("Error saving map route:",r),Oe.oR.error("Failed to save route")}finally{d(!1)}},lt=()=>{ve({startLocation:null,endLocation:null,routePolyline:null,routeCoordinates:[],intermediateStops:[],totalDistance:0,estimatedDuration:0,isSelectingStart:!0,mapCenter:[10.8505,76.2711],zoom:8}),Ne({routeNumber:"",routeName:"",depotId:"",busType:"ordinary",baseFare:0,farePerKm:2.5,features:["AC"],notes:"",scheduling:{frequency:"daily",timeSlots:[],daysOfWeek:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"]}}),ke(new Map)},ct=async()=>{try{d(!0),console.log("\ud83d\udcca Starting export process..."),console.log("\ud83d\udccb Export filters:",Ee),console.log("\ud83d\udccb Export format:",Te);let t=[...e];if(console.log("\ud83d\udcca Total routes before filtering: ".concat(t.length)),"all"!==Ee.status&&(t=t.filter(e=>e.status===Ee.status),console.log("\ud83d\udcca Routes after status filter (".concat(Ee.status,"): ").concat(t.length))),"all"!==Ee.depot&&(t=t.filter(e=>{var t;return(null===(t=e.depot)||void 0===t?void 0:t.depotId)===Ee.depot}),console.log("\ud83d\udcca Routes after depot filter: ".concat(t.length))),Ee.dateRange.from&&Ee.dateRange.to&&(t=t.filter(e=>{const t=new Date(e.createdAt||e.updatedAt),s=new Date(Ee.dateRange.from),r=new Date(Ee.dateRange.to);return t>=s&&t<=r}),console.log("\ud83d\udcca Routes after date filter: ".concat(t.length))),console.log("\ud83d\udcca Final routes to export: ".concat(t.length)),0===t.length)return void Oe.oR.error("No routes found matching the export criteria");"csv"===Te?await dt(t):"excel"===Te?await ut(t):"json"===Te&&await ht(t),Oe.oR.success("\u2705 Successfully exported ".concat(t.length," routes in ").concat(Te.toUpperCase()," format")),_e(!1)}catch(t){console.error("\u274c Error exporting routes:",t),Oe.oR.error("Failed to export routes: ".concat(t.message))}finally{d(!1)}},dt=e=>{const t=[["Route Number","Route Name","Starting Point","Ending Point","Distance (km)","Duration (min)","Base Fare (\u20b9)","Fare per KM (\u20b9)","Status","Depot","Bus Type","Schedules Count","Stops Count","Created Date"].join(","),...e.map(e=>{var t,s,r,a,n;return[e.routeNumber,'"'.concat(e.routeName,'"'),'"'.concat((null===(t=e.startingPoint)||void 0===t?void 0:t.city)||"",'"'),'"'.concat((null===(s=e.endingPoint)||void 0===s?void 0:s.city)||"",'"'),e.totalDistance||0,e.estimatedDuration||0,e.baseFare||0,e.farePerKm||0,e.status||"active",'"'.concat((null===(r=e.depot)||void 0===r?void 0:r.name)||"",'"'),e.busType||"ordinary",(null===(a=e.schedules)||void 0===a?void 0:a.length)||0,(null===(n=e.intermediateStops)||void 0===n?void 0:n.length)||0,new Date(e.createdAt||e.updatedAt).toLocaleDateString()].join(",")})].join("\n");mt(t,"routes-export.csv","text/csv")},ut=async e=>{const t=[["Route Number","Route Name","Starting Point","Ending Point","Distance (km)","Duration (min)","Base Fare (\u20b9)","Fare per KM (\u20b9)","Status","Depot","Bus Type","Schedules Count","Stops Count","Created Date"].join("\t"),...e.map(e=>{var t,s,r,a,n;return[e.routeNumber,e.routeName,(null===(t=e.startingPoint)||void 0===t?void 0:t.city)||"",(null===(s=e.endingPoint)||void 0===s?void 0:s.city)||"",e.totalDistance||0,e.estimatedDuration||0,e.baseFare||0,e.farePerKm||0,e.status||"active",(null===(r=e.depot)||void 0===r?void 0:r.name)||"",e.busType||"ordinary",(null===(a=e.schedules)||void 0===a?void 0:a.length)||0,(null===(n=e.intermediateStops)||void 0===n?void 0:n.length)||0,new Date(e.createdAt||e.updatedAt).toLocaleDateString()].join("\t")})].join("\n");mt(t,"routes-export.xls","application/vnd.ms-excel")},ht=e=>{const t=JSON.stringify(e,null,2);mt(t,"routes-export.json","application/json")},mt=(e,t,s)=>{const r=new Blob([e],{type:s}),a=URL.createObjectURL(r),n=document.createElement("a");n.href=a,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a)},pt=async()=>{if(Le)try{switch(d(!0),Le.type){case"kerala-auto-routes":await Qe();break;case"bulk-add-routes":await qe();break;case"bulk-operation":await $e();break;case"export-routes":await ct();break;default:console.error("Unknown confirmation action:",Le)}}catch(e){console.error("Error executing confirmed action:",e),Oe.oR.error("Action failed")}finally{d(!1),Re(!1),Fe(null),ze(null)}},xt=()=>{Re(!1),Fe(null),ze(null)},gt=e=>{D(e),J((0,Ie.A)((0,Ie.A)({},e),{},{depot:e.depot||{depotId:"",name:""},busType:ce(e.busType)})),N(!0)},ft=async()=>{try{d(!0);const t={routeNumber:$.routeNumber,routeName:$.routeName,startingPoint:$.startingPoint,endingPoint:$.endingPoint,totalDistance:$.totalDistance,estimatedDuration:$.estimatedDuration,depotId:$.depot.depotId,busType:le($.busType),baseFare:$.baseFare,farePerKm:$.farePerKm,status:$.status,features:$.features,notes:$.notes,intermediateStops:$.intermediateStops};console.log("\ud83d\udd0d Frontend sending update data:",t),console.log("\ud83d\udd0d Original bus type from form:",$.busType),console.log("\ud83d\udd0d Mapped bus type for API:",le($.busType));const s=await(0,xs.nr)("/api/admin/routes/".concat(E._id),{method:"PUT",body:JSON.stringify(t)});var e;if(console.log("\ud83d\udd0d API Response:",s),s.data&&s.data.success)Oe.oR.success("Route updated successfully"),N(!1),Ke();else console.error("\u274c API Error Response:",s),Oe.oR.error((null===(e=s.data)||void 0===e?void 0:e.error)||s.error||"Failed to update route")}catch(t){console.error("\u274c Error updating route:",t),console.error("\u274c Error details:",{message:t.message,stack:t.stack,response:t.response}),Oe.oR.error("Failed to update route: ".concat(t.message))}finally{d(!1)}},yt=async s=>{try{const a=e.find(e=>e._id===s),n=(null===a||void 0===a?void 0:a.routeName)||(null===a||void 0===a?void 0:a.routeNumber)||"this route";if(!window.confirm('Are you sure you want to delete "'.concat(n,'"? This action cannot be undone.')))return;d(!0);const i=await(0,xs.nr)("/api/admin/routes/".concat(s),{method:"DELETE"});var r;if(i.data&&i.data.success)Oe.oR.success("Route deleted successfully"),t(e=>e.filter(e=>e._id!==s)),Ke();else Oe.oR.error((null===(r=i.data)||void 0===r?void 0:r.error)||i.error||"Failed to delete route")}catch(a){console.error("Error deleting route:",a),Oe.oR.error("Failed to delete route")}finally{d(!1)}},bt=async e=>{try{d(!0);const s=await(0,xs.nr)("/api/admin/routes/".concat(e._id),{method:"PUT",body:JSON.stringify(e)});var t;if(s.data&&s.data.success)Oe.oR.success("Route updated successfully"),q(!1),Ke();else Oe.oR.error((null===(t=s.data)||void 0===t?void 0:t.error)||"Failed to update route")}catch(s){console.error("Error updating route:",s),Oe.oR.error("Failed to update route")}finally{d(!1)}},vt=async e=>{try{d(!0);const s=await(0,xs.nr)("/api/admin/routes/".concat(e._id,"/prices"),{method:"PUT",body:JSON.stringify({intermediateStops:e.intermediateStops})});var t;if(s.data&&s.data.success)Oe.oR.success("Conductor prices updated successfully"),Y(!1),Ke();else Oe.oR.error((null===(t=s.data)||void 0===t?void 0:t.error)||"Failed to update prices")}catch(s){console.error("Error updating conductor prices:",s),Oe.oR.error("Failed to update conductor prices")}finally{d(!1)}},jt=e=>{D(e),k(!0)},Nt=e.filter(e=>{var t,s,r;const a=e.routeNumber.toLowerCase().includes(u.toLowerCase())||e.routeName.toLowerCase().includes(u.toLowerCase())||(null===(t=e.startingPoint)||void 0===t?void 0:t.city.toLowerCase().includes(u.toLowerCase()))||(null===(s=e.endingPoint)||void 0===s?void 0:s.city.toLowerCase().includes(u.toLowerCase())),n="all"===m||e.status===m,i="all"===x||(null===(r=e.depot)||void 0===r?void 0:r.depotId)===x;return a&&n&&i}),wt=e=>{var t,s,r,a,n,i;let{route:o}=e;return(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("input",{type:"checkbox",checked:R.includes(o._id),onChange:e=>{e.target.checked?I([...R,o._id]):I(R.filter(e=>e!==o._id))},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,cs.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,cs.jsx)("span",{className:"w-5 h-5 text-green-600",children:"\ud83d\ude8c"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"font-semibold text-gray-900",children:o.routeNumber}),(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:o.routeName})]})]}),(0,cs.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("active"===o.status?"bg-green-100 text-green-800":"inactive"===o.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:o.status})]}),(0,cs.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,cs.jsx)("span",{className:"w-4 h-4",children:"\ud83d\udccd"}),(0,cs.jsxs)("span",{children:[null===(t=o.startingPoint)||void 0===t?void 0:t.city," \u2192 ",null===(s=o.endingPoint)||void 0===s?void 0:s.city]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,cs.jsx)("span",{className:"w-4 h-4",children:"\ud83e\udded"}),(0,cs.jsxs)("span",{children:[o.totalDistance," km \u2022 ",Math.floor(o.estimatedDuration/60),"h ",o.estimatedDuration%60,"m"]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,cs.jsx)("span",{className:"w-4 h-4",children:"\ud83d\udcb0"}),(0,cs.jsxs)("span",{children:["Base: \u20b9",o.baseFare," \u2022 Per km: \u20b9",o.farePerKm]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,cs.jsx)("span",{className:"w-4 h-4",children:"\ud83d\ude8c"}),(0,cs.jsxs)("span",{children:[(null===(r=o.schedules)||void 0===r?void 0:r.length)||0," schedules \u2022 ",(null===(a=o.intermediateStops)||void 0===a?void 0:a.length)||0," stops"]})]}),o.busType&&(0,cs.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,cs.jsx)("span",{className:"w-4 h-4",children:"\ud83d\ude90"}),(0,cs.jsx)("span",{className:"capitalize",children:he(o.busType)})]})]}),o.features&&o.features.length>0&&(0,cs.jsx)("div",{className:"mb-4",children:(0,cs.jsx)("div",{className:"flex flex-wrap gap-1",children:o.features.map((e,t)=>(0,cs.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:e},t))})}),(0,cs.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[(0,cs.jsxs)("div",{className:"flex space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>(async e=>{if(null!==e&&void 0!==e&&e.startingPoint&&(e.startingPoint.coordinates||e.startingPoint.lat&&e.startingPoint.lng)&&null!==e&&void 0!==e&&e.endingPoint&&(e.endingPoint.coordinates||e.endingPoint.lat&&e.endingPoint.lng))return D(e),void q(!0);try{var t;d(!0);const s=await(0,xs.nr)("/api/admin/routes/".concat(e._id)),r=(null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.route)||(null===s||void 0===s?void 0:s.data)||e,a=(0,Ie.A)((0,Ie.A)((0,Ie.A)({},e),r),{},{startingPoint:(null===r||void 0===r?void 0:r.startingPoint)||(null===e||void 0===e?void 0:e.startingPoint)||{},endingPoint:(null===r||void 0===r?void 0:r.endingPoint)||(null===e||void 0===e?void 0:e.endingPoint)||{},intermediateStops:(null===r||void 0===r?void 0:r.intermediateStops)||(null===e||void 0===e?void 0:e.intermediateStops)||[]});D(a),q(!0)}catch(s){D(e),q(!0)}finally{d(!1)}})(o),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Edit Route on Map",children:(0,cs.jsx)(WM,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>(e=>{D(e),Y(!0)})(o),className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Conductor Pricing",children:(0,cs.jsx)(Es.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>gt(o),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Route",children:(0,cs.jsx)("span",{className:"w-4 h-4",children:"\u270f\ufe0f"})}),(0,cs.jsx)("button",{onClick:()=>jt(o),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Manage Schedules",children:(0,cs.jsx)("span",{className:"w-4 h-4",children:"\ud83d\udcc5"})}),(0,cs.jsx)("button",{onClick:()=>yt(o._id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Route",children:(0,cs.jsx)("span",{className:"w-4 h-4",children:"\ud83d\uddd1\ufe0f"})}),(0,cs.jsx)("button",{onClick:()=>(e=>{D(e),W(!0)})(o),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"View Details",children:(0,cs.jsx)("span",{className:"w-4 h-4",children:"\ud83d\udc41\ufe0f"})})]}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:(null===(n=o.depot)||void 0===n?void 0:n.depotName)||(null===(i=o.depot)||void 0===i?void 0:i.name)||"No Depot"})]})]})},kt=()=>{const[e,t]=(0,r.useState)(Object.keys(Z)),[a,n]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=Object.keys(Z).filter(e=>""===se||e.toLowerCase().includes(se.toLowerCase()));t(e)},[se,Z]),(0,r.useEffect)(()=>{let t=[];e.forEach(e=>{(Z[e]||[]).forEach(s=>{!(""===ee||s.from.toLowerCase().includes(ee.toLowerCase())||s.to.toLowerCase().includes(ee.toLowerCase())||e.toLowerCase().includes(ee.toLowerCase()))||"all"!==ae&&s.type!==ae||t.push((0,Ie.A)((0,Ie.A)({},s),{},{depot:e,routeId:"".concat(e,"-").concat(s.from,"-").concat(s.to)}))})}),n(t)},[e,ee,ae]);const i=async()=>{if(0!==ie.length)try{d(!0),console.log("\ud83d\udd0d Available depots:",s),console.log("\ud83d\udd0d Selected routes:",ie),console.log("\ud83d\udd0d Filtered routes:",a);const r=s.length>0?s[0]:null;if(!r){console.log("\u274c No depots found in system - attempting to create depot");try{const t={depotName:"Kerala Main Depot",depotCode:"KERALA_MAIN",location:{city:"Thiruvananthapuram",state:"Kerala",coordinates:{latitude:8.5241,longitude:76.9366}},contactInfo:{phone:"+91-471-2321132",email:"keralamain@yatrik.com"},capacity:{buses:100,staff:50},status:"active"};console.log("\ud83d\udd27 Creating depot:",t);const s=await(0,xs.nr)("/api/admin/depots",{method:"POST",body:JSON.stringify(t)});if(s.success&&s.data){console.log("\u2705 Depot created successfully:",s.data);const t=s.data,r=ie.map(e=>{const s=a.find(t=>t.routeId===e);console.log("\ud83d\udd0d Processing route with new depot:",s);const r=de(s.type),n=ue(r,s.distance),i={routeNumber:"KL-".concat(s.from.substr(0,3).toUpperCase(),"-").concat(s.to.substr(0,3).toUpperCase(),"-").concat(Math.floor(900*Math.random())+100),routeName:"".concat(s.from," to ").concat(s.to),startingPoint:{city:s.from,location:"".concat(s.from," Bus Station"),coordinates:{latitude:0,longitude:0}},endingPoint:{city:s.to,location:"".concat(s.to," Bus Station"),coordinates:{latitude:0,longitude:0}},totalDistance:s.distance,estimatedDuration:s.duration,depot:{depotId:t._id,depotName:t.depotName,depotLocation:t.location.city+", "+t.location.state},busType:r,baseFare:n.baseFare,farePerKm:n.farePerKm,status:"active",features:[s.type,"Kerala Route"],notes:"Auto-generated Kerala route: ".concat(s.type),intermediateStops:[]};return console.log("\ud83d\udd0d Route data to create with new depot:",i),i});let n=0,i=0;for(const s of r)try{const e=await(0,xs.nr)("/api/admin/routes",{method:"POST",body:JSON.stringify(s)});e.data&&e.data.success?(n++,console.log("\u2705 Created route: ".concat(s.routeName))):(i++,console.error("\u274c Failed to create route: ".concat(s.routeName),e.message))}catch(e){i++,console.error("\u274c Error creating route ".concat(s.routeName,":"),e)}return n>0?(Oe.oR.success("Successfully created ".concat(n," routes with new Kerala Main Depot.")),oe([]),V(!1),await Ke()):Oe.oR.error("Failed to create any routes. ".concat(i," errors occurred.")),void d(!1)}throw console.log("\u274c Failed to create depot, falling back to temporary approach"),new Error("Failed to create depot")}catch(t){console.log("\u274c Depot creation failed:",t.message),console.log("\ud83d\udd04 Falling back to temporary depot approach")}const s={_id:(()=>Math.floor(Date.now()/1e3).toString(16)+Math.random().toString(16).substring(2,14)+Math.floor(16777216*Math.random()).toString(16).padStart(6,"0"))(),depotName:"Kerala Main Depot",name:"Kerala Main Depot",location:{city:"Thiruvananthapuram",state:"Kerala"}};console.log("\u2705 Created temporary depot:",s);const r=ie.map(e=>{const t=a.find(t=>t.routeId===e);console.log("\ud83d\udd0d Processing route with temp depot:",t);const r=de(t.type),n=ue(r,t.distance),i={routeNumber:"KL-".concat(t.from.substr(0,3).toUpperCase(),"-").concat(t.to.substr(0,3).toUpperCase(),"-").concat(Math.floor(900*Math.random())+100),routeName:"".concat(t.from," to ").concat(t.to),startingPoint:{city:t.from,location:"".concat(t.from," Bus Station"),coordinates:{latitude:0,longitude:0}},endingPoint:{city:t.to,location:"".concat(t.to," Bus Station"),coordinates:{latitude:0,longitude:0}},totalDistance:t.distance,estimatedDuration:t.duration,depot:{depotId:s._id,depotName:s.depotName,depotLocation:s.location.city+", "+s.location.state},busType:r,baseFare:n.baseFare,farePerKm:n.farePerKm,status:"active",features:[t.type,"Kerala Route"],notes:"Auto-generated Kerala route: ".concat(t.type),intermediateStops:[]};return console.log("\ud83d\udd0d Route data to create with temp depot:",i),i});let n=0,i=0;for(const t of r)try{const e=await(0,xs.nr)("/api/admin/routes",{method:"POST",body:JSON.stringify(t)});e.data&&e.data.success?(n++,console.log("\u2705 Created route: ".concat(t.routeName))):(i++,console.error("\u274c Failed to create route: ".concat(t.routeName),e.message))}catch(e){i++,console.error("\u274c Error creating route ".concat(t.routeName,":"),e)}return n>0?(Oe.oR.success("Successfully created ".concat(n," routes with temporary depot. Please create proper depots for better organization.")),oe([]),V(!1),await Ke()):Oe.oR.error("Failed to create any routes. ".concat(i," errors occurred.")),void d(!1)}console.log("\u2705 Using default depot:",r);const n=ie.map(e=>{var t,n;const i=a.find(t=>t.routeId===e);console.log("\ud83d\udd0d Processing route:",i);const o=s.find(e=>{var t,s;return e.depotName===i.depot||e.name===i.depot||(null===(t=e.depotName)||void 0===t?void 0:t.toLowerCase().includes(i.depot.toLowerCase()))||(null===(s=e.name)||void 0===s?void 0:s.toLowerCase().includes(i.depot.toLowerCase()))})||r;console.log("\ud83d\udd0d Found depot for route:",o);const l=de(i.type),c=ue(l,i.distance),d={routeNumber:"KL-".concat(i.from.substr(0,3).toUpperCase(),"-").concat(i.to.substr(0,3).toUpperCase(),"-").concat(Math.floor(900*Math.random())+100),routeName:"".concat(i.from," to ").concat(i.to),startingPoint:{city:i.from,location:"".concat(i.from," Bus Station"),coordinates:{latitude:0,longitude:0}},endingPoint:{city:i.to,location:"".concat(i.to," Bus Station"),coordinates:{latitude:0,longitude:0}},totalDistance:i.distance,estimatedDuration:i.duration,depot:{depotId:o._id,depotName:o.depotName||o.name||i.depot,depotLocation:(null===(t=o.location)||void 0===t?void 0:t.city)+", "+(null===(n=o.location)||void 0===n?void 0:n.state)||"Kerala, India"},busType:l,baseFare:c.baseFare,farePerKm:c.farePerKm,status:"active",features:[i.type,"Kerala Route"],notes:"Auto-generated Kerala route: ".concat(i.type),intermediateStops:[]};return console.log("\ud83d\udd0d Route data to create:",d),d});let i=0,o=0;for(const t of n)try{const e=await(0,xs.nr)("/api/admin/routes",{method:"POST",body:JSON.stringify(t)});e.data&&e.data.success?(i++,console.log("\u2705 Created route: ".concat(t.routeName))):(o++,console.error("\u274c Failed to create route: ".concat(t.routeName),e.message))}catch(e){o++,console.error("\u274c Error creating route ".concat(t.routeName,":"),e)}i>0?(Oe.oR.success("Successfully created ".concat(i," routes")),oe([]),V(!1),await Ke()):Oe.oR.error("Failed to create any routes. ".concat(o," errors occurred."))}catch(e){console.error("Error creating Kerala routes:",e),Oe.oR.error("Failed to create routes: "+e.message)}finally{d(!1)}else Oe.oR.error("Please select routes to add")},o=e=>{switch(e){case"intercity":return"bg-blue-100 text-blue-800";case"interstate":return"bg-purple-100 text-purple-800";case"hill_station":return"bg-green-100 text-green-800";case"seasonal":return"bg-orange-100 text-orange-800";case"tourist":return"bg-pink-100 text-pink-800";case"airport":return"bg-indigo-100 text-indigo-800";default:return"bg-gray-100 text-gray-800"}};return(0,cs.jsx)(Md,{children:U&&(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>V(!1),children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-7xl w-full mx-4 max-h-[90vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,cs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-indigo-100 rounded-lg",children:(0,cs.jsx)("span",{className:"w-6 h-6 text-indigo-600",children:"\ud83d\uddfa\ufe0f"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Kerala Routes Database"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Browse and add predefined Kerala depot routes"})]})]}),(0,cs.jsx)("button",{onClick:()=>V(!1),className:"text-gray-400 hover:text-gray-600 p-2",children:(0,cs.jsx)(Bs.A,{className:"w-6 h-6"})})]})}),(0,cs.jsxs)("div",{className:"p-6 overflow-auto max-h-[calc(90vh-180px)]",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Routes"}),(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(ys.A,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search by route or location...",value:ee,onChange:e=>te(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Depots"}),(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(ys.A,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search depots...",value:se,onChange:e=>re(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Route Type"}),(0,cs.jsxs)("select",{value:ae,onChange:e=>ne(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"all",children:"All Types"}),(0,cs.jsx)("option",{value:"intercity",children:"Intercity"}),(0,cs.jsx)("option",{value:"interstate",children:"Interstate"}),(0,cs.jsx)("option",{value:"hill_station",children:"Hill Station"}),(0,cs.jsx)("option",{value:"seasonal",children:"Seasonal"}),(0,cs.jsx)("option",{value:"tourist",children:"Tourist"}),(0,cs.jsx)("option",{value:"airport",children:"Airport"})]})]})]}),ie.length>0&&(0,cs.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsxs)("span",{className:"text-blue-800 font-medium",children:[ie.length," routes selected"]}),(0,cs.jsx)("button",{onClick:()=>oe([]),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Clear selection"})]}),(0,cs.jsxs)("button",{onClick:i,disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[c?(0,cs.jsx)(Od.A,{className:"w-4 h-4 animate-spin"}):(0,cs.jsx)(bu.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Add Selected Routes"})]})]})}),(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(e=>(0,cs.jsxs)("div",{className:"border rounded-lg p-4 transition-all cursor-pointer ".concat(ie.includes(e.routeId)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>{oe(t=>t.includes(e.routeId)?t.filter(t=>t!==e.routeId):[...t,e.routeId])},children:[(0,cs.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsxs)("h4",{className:"font-semibold text-gray-900",children:[e.from," \u2192 ",e.to]}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:e.depot})]}),(0,cs.jsx)("input",{type:"checkbox",checked:ie.includes(e.routeId),onChange:()=>{},className:"mt-1"})]}),(0,cs.jsxs)("div",{className:"space-y-2",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Distance:"}),(0,cs.jsxs)("span",{className:"font-medium",children:[e.distance," km"]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Duration:"}),(0,cs.jsxs)("span",{className:"font-medium",children:[Math.floor(e.duration/60),"h ",e.duration%60,"m"]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Type:"}),(0,cs.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(o(e.type)),children:e.type.replace("_"," ")})]})]})]},e.routeId))}),0===a.length&&(0,cs.jsxs)("div",{className:"text-center py-12",children:[(0,cs.jsx)("div",{className:"text-gray-400 mb-4",children:"\ud83d\udd0d"}),(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No routes found"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search criteria"})]})]}),(0,cs.jsx)("div",{className:"border-t border-gray-200 p-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"text-sm text-gray-600",children:[a.length," routes available \u2022 ",Object.keys(Z).length," depots"]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("button",{onClick:()=>V(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"}),ie.length>0&&(0,cs.jsxs)("button",{onClick:i,disabled:c,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[c?(0,cs.jsx)(Od.A,{className:"w-4 h-4 animate-spin"}):(0,cs.jsx)(bu.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:["Add ",ie.length," Routes"]})]})]})]})})]})})})},At=()=>(0,cs.jsx)(Md,{children:b&&(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>v(!1),children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,cs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Add Single Route"}),(0,cs.jsx)("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:(0,cs.jsx)("span",{className:"w-6 h-6 text-gray-400 hover:text-gray-600",children:"\u2715"})})]})}),(0,cs.jsxs)("div",{className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Route Number *"}),(0,cs.jsx)("input",{type:"text",value:$.routeNumber,onChange:e=>J(t=>(0,Ie.A)((0,Ie.A)({},t),{},{routeNumber:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"R001"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot *"}),(0,cs.jsxs)("select",{value:$.depot.depotId,onChange:e=>{const t=s.find(t=>t._id===e.target.value);J(s=>(0,Ie.A)((0,Ie.A)({},s),{},{depot:{depotId:e.target.value,name:(null===t||void 0===t?void 0:t.depotName)||""}}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"",children:"Select Depot"}),s.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.depotName},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Starting City *"}),(0,cs.jsx)("input",{type:"text",value:$.startingPoint.city,onChange:e=>J(t=>(0,Ie.A)((0,Ie.A)({},t),{},{startingPoint:(0,Ie.A)((0,Ie.A)({},t.startingPoint),{},{city:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Thiruvananthapuram"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ending City *"}),(0,cs.jsx)("input",{type:"text",value:$.endingPoint.city,onChange:e=>J(t=>(0,Ie.A)((0,Ie.A)({},t),{},{endingPoint:(0,Ie.A)((0,Ie.A)({},t.endingPoint),{},{city:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Kochi"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bus Type"}),(0,cs.jsxs)("select",{value:$.busType,onChange:e=>{const t=e.target.value,s=o.find(e=>e.busType===t&&e.isActive);let r=$.baseFare,a=$.farePerKm;if(s&&$.totalDistance>0){const e=Math.max($.totalDistance*s.ratePerKm,s.minimumFare);r=Math.round(e),a=s.ratePerKm}J(e=>(0,Ie.A)((0,Ie.A)({},e),{},{busType:t,baseFare:r,farePerKm:a}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"City / Ordinary",children:"Ordinary"}),(0,cs.jsx)("option",{value:"Fast Passenger / LSFP",children:"Fast Passenger"}),(0,cs.jsx)("option",{value:"Super Fast Passenger",children:"Super Fast"}),(0,cs.jsx)("option",{value:"A/C Low Floor",children:"AC Low Floor"}),(0,cs.jsx)("option",{value:"Luxury / Hi-tech & AC",children:"Volvo"}),(0,cs.jsx)("option",{value:"Garuda Maharaja / Garuda King / Multi-axle Premium",children:"Garuda"}),(0,cs.jsx)("option",{value:"Garuda Sanchari / Biaxle Premium",children:"Garuda Sanchari"}),(0,cs.jsx)("option",{value:"Super Deluxe",children:"Super Deluxe"}),(0,cs.jsx)("option",{value:"Super Express",children:"Super Express"}),(0,cs.jsx)("option",{value:"City Fast",children:"City Fast"}),(0,cs.jsx)("option",{value:"Non A/C Low Floor",children:"Non AC Low Floor"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Distance (km)"}),(0,cs.jsx)("input",{type:"number",value:$.totalDistance,onChange:e=>{const t=parseInt(e.target.value)||0,s=o.find(e=>e.busType===$.busType&&e.isActive);let r=$.baseFare,a=$.farePerKm;if(s&&t>0){const e=Math.max(t*s.ratePerKm,s.minimumFare);r=Math.round(e),a=s.ratePerKm}J(e=>(0,Ie.A)((0,Ie.A)({},e),{},{totalDistance:t,baseFare:r,farePerKm:a}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"150"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fare Per KM (\u20b9)"}),(0,cs.jsx)("input",{type:"number",value:$.farePerKm,onChange:e=>J(t=>(0,Ie.A)((0,Ie.A)({},t),{},{farePerKm:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"2.5",readOnly:!0}),(0,cs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated based on bus type"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Base Fare (\u20b9)"}),(0,cs.jsx)("input",{type:"number",value:$.baseFare,onChange:e=>J(t=>(0,Ie.A)((0,Ie.A)({},t),{},{baseFare:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"300"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-4",children:[(0,cs.jsx)("button",{onClick:()=>v(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,cs.jsxs)("button",{onClick:He,disabled:c||!$.routeNumber||!$.depot.depotId||!$.startingPoint.city||!$.endingPoint.city,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[c?(0,cs.jsx)(Od.A,{className:"w-4 h-4 animate-spin"}):(0,cs.jsx)(bu.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Add Route"})]})]})]})]})})}),St=()=>(0,cs.jsx)(Md,{children:f&&(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>y(!1),children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,cs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Bulk Add Routes"}),(0,cs.jsx)("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:(0,cs.jsx)("span",{className:"w-6 h-6 text-gray-400 hover:text-gray-600",children:"\u2715"})})]})}),(0,cs.jsxs)("div",{className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot *"}),(0,cs.jsxs)("select",{value:me.depotId,onChange:e=>pe(t=>(0,Ie.A)((0,Ie.A)({},t),{},{depotId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"",children:"Select Depot"}),s.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.depotName},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Route Type"}),(0,cs.jsxs)("select",{value:me.routeType,onChange:e=>pe(t=>(0,Ie.A)((0,Ie.A)({},t),{},{routeType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"intercity",children:"Intercity"}),(0,cs.jsx)("option",{value:"intracity",children:"Intracity"}),(0,cs.jsx)("option",{value:"express",children:"Express"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Routes *"}),(0,cs.jsx)("input",{type:"number",min:"1",max:"50",value:me.count,onChange:e=>pe(t=>(0,Ie.A)((0,Ie.A)({},t),{},{count:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Number"}),(0,cs.jsx)("input",{type:"number",min:"1",value:me.startNumber,onChange:e=>pe(t=>(0,Ie.A)((0,Ie.A)({},t),{},{startNumber:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Route Prefix"}),(0,cs.jsx)("input",{type:"text",value:me.prefix,onChange:e=>pe(t=>(0,Ie.A)((0,Ie.A)({},t),{},{prefix:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"R"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fare per KM (\u20b9)"}),(0,cs.jsx)("input",{type:"number",step:"0.1",min:"0",value:me.farePerKm,onChange:e=>pe(t=>(0,Ie.A)((0,Ie.A)({},t),{},{farePerKm:parseFloat(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Date for Scheduling"}),(0,cs.jsx)("input",{type:"date",value:me.targetDate,onChange:e=>pe(t=>(0,Ie.A)((0,Ie.A)({},t),{},{targetDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,cs.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,cs.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"Preview:"}),(0,cs.jsxs)("p",{className:"text-blue-700 text-sm",children:["Will create routes: ",me.prefix,String(me.startNumber).padStart(3,"0")," to ",me.prefix,String(me.startNumber+me.count-1).padStart(3,"0")]}),(0,cs.jsxs)("p",{className:"text-blue-700 text-sm",children:["Type: ",me.routeType,", Distance: ",me.distanceRange.min,"-",me.distanceRange.max,"km, Fare: \u20b9",me.farePerKm,"/km"]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-4",children:[(0,cs.jsx)("button",{onClick:()=>y(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,cs.jsxs)("button",{onClick:qe,disabled:c||!me.depotId,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[c?(0,cs.jsx)(Od.A,{className:"w-4 h-4 animate-spin"}):(0,cs.jsx)(bu.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:["Add ",me.count," Routes"]})]})]})]})]})})}),Ct=()=>(0,cs.jsx)(Md,{children:C&&(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[100000]",onClick:()=>_(!1),children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-7xl w-full mx-4 max-h-[95vh] overflow-hidden z-[100001]",onClick:e=>e.stopPropagation(),children:[(0,cs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Create Route with Map"}),(0,cs.jsx)("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-gray-600",children:(0,cs.jsx)("span",{className:"w-6 h-6 text-gray-400 hover:text-gray-600",children:"\u2715"})})]})}),(0,cs.jsxs)("div",{className:"flex h-[calc(95vh-120px)]",children:[(0,cs.jsxs)("div",{className:"flex-1 bg-gray-100 relative",children:[(0,cs.jsxs)("div",{className:"absolute top-4 left-4 z-10 bg-white rounded-lg shadow-lg p-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,cs.jsx)("span",{className:"w-5 h-5 text-blue-600",children:"\ud83d\uddfa\ufe0f"}),(0,cs.jsx)("span",{className:"font-semibold text-gray-900",children:"Route Creation"})]}),(0,cs.jsx)("div",{className:"text-sm text-gray-600",children:be.isSelectingStart?(0,cs.jsx)("span",{className:"text-green-600",children:"\ud83d\udccd Click on map to select START location"}):(0,cs.jsx)("span",{className:"text-red-600",children:"\ud83d\udccd Click on map to select END location"})}),be.startLocation&&(0,cs.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Start: ",be.startLocation.name]})]}),(0,cs.jsx)("div",{id:"route-map",className:"w-full h-full",style:{minHeight:"600px"}}),be.startLocation&&be.endLocation&&(0,cs.jsxs)("div",{className:"absolute bottom-4 left-4 z-10 bg-white rounded-lg shadow-lg p-4 max-w-sm",children:[(0,cs.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Route Summary"}),(0,cs.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("span",{className:"w-4 h-4 text-green-600",children:"\ud83e\udded"}),(0,cs.jsxs)("span",{children:[be.totalDistance.toFixed(1)," km"]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("span",{className:"w-4 h-4 text-blue-600",children:"\u23f1\ufe0f"}),(0,cs.jsxs)("span",{children:[be.estimatedDuration.toFixed(0)," min"]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("span",{className:"w-4 h-4 text-purple-600",children:"\ud83d\udccd"}),(0,cs.jsxs)("span",{children:[be.intermediateStops.length," stops"]})]})]})]})]}),(0,cs.jsx)("div",{className:"w-96 bg-white border-l border-gray-200 overflow-y-auto",children:(0,cs.jsxs)("div",{className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Route Details"}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Route Number *"}),(0,cs.jsx)("input",{type:"text",value:je.routeNumber,onChange:e=>Ne(t=>(0,Ie.A)((0,Ie.A)({},t),{},{routeNumber:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"R001"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Route Name *"}),(0,cs.jsx)("input",{type:"text",value:je.routeName,onChange:e=>Ne(t=>(0,Ie.A)((0,Ie.A)({},t),{},{routeName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Auto-generated from map"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot *"}),(0,cs.jsxs)("select",{value:je.depotId,onChange:e=>Ne(t=>(0,Ie.A)((0,Ie.A)({},t),{},{depotId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"",children:"Select Depot"}),s.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.depotName},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bus Type"}),(0,cs.jsxs)("select",{value:je.busType,onChange:e=>{const t=e.target.value,s=Ae[t]||{};Ne(e=>(0,Ie.A)((0,Ie.A)({},e),{},{busType:t,baseFare:"number"===typeof s.baseFare?s.baseFare:e.baseFare,farePerKm:"number"===typeof s.farePerKm?s.farePerKm:e.farePerKm})),nt(be.intermediateStops,be.totalDistance)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"ordinary",children:"Ordinary"}),(0,cs.jsx)("option",{value:"fast_passenger",children:"Fast Passenger"}),(0,cs.jsx)("option",{value:"super_fast",children:"Super Fast"}),(0,cs.jsx)("option",{value:"ac",children:"AC"}),(0,cs.jsx)("option",{value:"volvo",children:"Volvo"}),(0,cs.jsx)("option",{value:"garuda",children:"Garuda"})]})]})]})]}),(be.intermediateStops.length>0||be.startLocation)&&(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsx)("h4",{className:"font-semibold text-gray-900",children:"Route Stops"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("button",{onClick:it,disabled:!be.startLocation||!be.endLocation,className:"text-green-600 hover:text-green-800 text-sm font-medium disabled:text-gray-400",children:"Add Stop"}),(0,cs.jsx)("button",{onClick:()=>P(!0),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Preview Fare Matrix"})]})]}),(0,cs.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:be.intermediateStops.map((e,t)=>(0,cs.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,cs.jsx)("span",{className:"w-4 h-4 text-gray-400 cursor-move",children:"\u22ee\u22ee"}),(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("div",{className:"font-medium text-sm text-gray-900",children:e.name}),e.isManual&&(0,cs.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:"Manual"}),e.isAutoGenerated&&(0,cs.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:"Auto"})]}),(0,cs.jsxs)("div",{className:"text-xs text-gray-500",children:[e.distanceFromStart.toFixed(1)," km from start \u2022 Stop #",e.sequence]})]}),(0,cs.jsx)("button",{onClick:()=>(e=>{const t=be.intermediateStops.filter(t=>t.stopId!==e);ve(e=>(0,Ie.A)((0,Ie.A)({},e),{},{intermediateStops:t})),nt(t,be.totalDistance)})(e.stopId),className:"text-red-600 hover:text-red-800",title:"Remove stop",children:(0,cs.jsx)("span",{className:"w-4 h-4 text-red-600 hover:text-red-800",children:"\u2715"})})]},e.stopId))})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Fare Configuration"}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Base Fare (\u20b9)"}),(0,cs.jsx)("input",{type:"number",value:je.baseFare,onChange:e=>Ne(t=>(0,Ie.A)((0,Ie.A)({},t),{},{baseFare:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fare per KM (\u20b9)"}),(0,cs.jsx)("input",{type:"number",step:"0.1",value:je.farePerKm,onChange:e=>Ne(t=>(0,Ie.A)((0,Ie.A)({},t),{},{farePerKm:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[(0,cs.jsx)("button",{onClick:()=>_(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,cs.jsxs)("button",{onClick:ot,disabled:c||!je.routeNumber||!je.depotId||!be.startLocation||!be.endLocation,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[c?(0,cs.jsx)(Od.A,{className:"w-4 h-4 animate-spin"}):(0,cs.jsx)("span",{className:"w-4 h-4",children:"\ud83d\udcbe"}),(0,cs.jsx)("span",{children:"Save Route"})]})]})]})})]})]})})}),_t=()=>(0,cs.jsx)(Md,{children:T&&(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>P(!1),children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,cs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Fare Matrix Preview"}),(0,cs.jsx)("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-gray-600",children:(0,cs.jsx)("span",{className:"w-6 h-6 text-gray-400 hover:text-gray-600",children:"\u2715"})})]})}),(0,cs.jsxs)("div",{className:"p-6",children:[(0,cs.jsxs)("div",{className:"mb-4",children:[(0,cs.jsxs)("h4",{className:"font-semibold text-gray-900 mb-2",children:["Route: ",je.routeName]}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600",children:["Total Distance: ",be.totalDistance.toFixed(1)," km | Duration: ",be.estimatedDuration.toFixed(0)," min"]})]}),(0,cs.jsx)("div",{className:"overflow-x-auto",children:(0,cs.jsxs)("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[(0,cs.jsx)("thead",{className:"bg-gray-50",children:(0,cs.jsxs)("tr",{children:[(0,cs.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"From Stop"}),(0,cs.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"To Stop"}),(0,cs.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Distance (km)"}),Object.keys(Ae).map(e=>(0,cs.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.replace("_"," ").toUpperCase()},e))]})}),(0,cs.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Array.from(we.entries()).map(e=>{let[t,s]=e;return Array.from(s.entries()).map(e=>{let[s,r]=e;return(0,cs.jsxs)("tr",{children:[(0,cs.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:t}),(0,cs.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:s}),(0,cs.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:r.distance.toFixed(1)}),Object.keys(Ae).map(e=>{var t;return(0,cs.jsxs)("td",{className:"px-4 py-3 text-center text-sm text-gray-900",children:["\u20b9",(null===(t=r.fares[e])||void 0===t?void 0:t.toFixed(0))||0]},e)})]},"".concat(t,"-").concat(s))})})})]})}),(0,cs.jsx)("div",{className:"mt-6 flex items-center justify-end space-x-4",children:(0,cs.jsx)("button",{onClick:()=>P(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})})]})]})})}),Tt=()=>(0,cs.jsx)(Md,{children:B&&(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>z(!1),children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,cs.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"\ud83d\ude8c Kerala Auto Route Generation"}),(0,cs.jsx)("button",{onClick:()=>z(!1),className:"text-gray-400 hover:text-gray-600",children:(0,cs.jsx)("span",{className:"w-6 h-6 text-gray-400 hover:text-gray-600",children:"\u2715"})})]}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Automatically generate routes connecting all major Kerala destinations with trips"})]}),(0,cs.jsxs)("div",{className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Depot *"}),(0,cs.jsxs)("select",{value:Q.depotId,onChange:e=>X(t=>(0,Ie.A)((0,Ie.A)({},t),{},{depotId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"",children:"Select Depot"}),s.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.depotName},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bus Types"}),(0,cs.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["ordinary","fast_passenger","ac","volvo","garuda"].map(e=>(0,cs.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("input",{type:"checkbox",checked:Q.busTypes.includes(e),onChange:t=>{t.target.checked?X(t=>(0,Ie.A)((0,Ie.A)({},t),{},{busTypes:[...t.busTypes,e]})):X(t=>(0,Ie.A)((0,Ie.A)({},t),{},{busTypes:t.busTypes.filter(t=>t!==e)}))},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,cs.jsx)("span",{className:"text-sm text-gray-700 capitalize",children:e.replace("_"," ")})]},e))})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Base Fare (\u20b9)"}),(0,cs.jsx)("input",{type:"number",value:Q.baseFare,onChange:e=>X(t=>(0,Ie.A)((0,Ie.A)({},t),{},{baseFare:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fare per KM (\u20b9)"}),(0,cs.jsx)("input",{type:"number",step:"0.1",value:Q.farePerKm,onChange:e=>X(t=>(0,Ie.A)((0,Ie.A)({},t),{},{farePerKm:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Departure Time Slots"}),(0,cs.jsx)("div",{className:"grid grid-cols-4 gap-2",children:Q.timeSlots.map((e,t)=>(0,cs.jsx)("input",{type:"time",value:e,onChange:e=>{const s=[...Q.timeSlots];s[t]=e.target.value,X(e=>(0,Ie.A)((0,Ie.A)({},e),{},{timeSlots:s}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},t))}),(0,cs.jsx)("div",{className:"mt-2",children:(0,cs.jsx)("button",{onClick:()=>X(e=>(0,Ie.A)((0,Ie.A)({},e),{},{timeSlots:[...e.timeSlots,"08:00"]})),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"+ Add Time Slot"})})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Operating Days"}),(0,cs.jsx)("div",{className:"grid grid-cols-7 gap-2",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(e=>(0,cs.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("input",{type:"checkbox",checked:Q.daysOfWeek.includes(e),onChange:t=>{t.target.checked?X(t=>(0,Ie.A)((0,Ie.A)({},t),{},{daysOfWeek:[...t.daysOfWeek,e]})):X(t=>(0,Ie.A)((0,Ie.A)({},t),{},{daysOfWeek:t.daysOfWeek.filter(t=>t!==e)}))},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,cs.jsx)("span",{className:"text-sm text-gray-700 capitalize",children:e.slice(0,3)})]},e))})]}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("input",{type:"checkbox",checked:Q.generateTrips,onChange:e=>X(t=>(0,Ie.A)((0,Ie.A)({},t),{},{generateTrips:e.target.checked})),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Generate trips automatically"})]}),(0,cs.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("input",{type:"checkbox",checked:Q.autoAssignBuses,onChange:e=>X(t=>(0,Ie.A)((0,Ie.A)({},t),{},{autoAssignBuses:e.target.checked})),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Auto-assign buses to trips"})]}),(0,cs.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("input",{type:"checkbox",checked:Q.autoAssignCrew,onChange:e=>X(t=>(0,Ie.A)((0,Ie.A)({},t),{},{autoAssignCrew:e.target.checked})),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Auto-assign crew to trips"})]})]}),(0,cs.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,cs.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"\ud83d\udcca Generation Preview:"}),(0,cs.jsxs)("div",{className:"text-blue-700 text-sm space-y-1",children:[(0,cs.jsxs)("p",{children:["\u2022 Destinations: ",Ue.length," major Kerala cities"]}),(0,cs.jsxs)("p",{children:["\u2022 Time Slots: ",Q.timeSlots.length," departures per day"]}),(0,cs.jsxs)("p",{children:["\u2022 Operating Days: ",Q.daysOfWeek.length," days per week"]}),Q.selectedDepots.length>0&&(0,cs.jsxs)("div",{className:"mt-3",children:[(0,cs.jsx)("p",{className:"font-medium text-blue-800",children:"Depot-wise Route Distribution:"}),Q.selectedDepots.map(e=>{const t=s.find(t=>t._id===e),r=Q.depotConfigs[e],a=r?Ue.length*(Ue.length-1)/2*r.busTypes.length:0,n=r&&Q.generateTrips?a*Q.timeSlots.length*Q.daysOfWeek.length:0;return(0,cs.jsxs)("div",{className:"ml-4 mt-1",children:[(0,cs.jsxs)("p",{children:["\u2022 ",(0,cs.jsx)("strong",{children:null===t||void 0===t?void 0:t.depotName}),": ",a," routes (",(null===r||void 0===r?void 0:r.busTypes.length)||0," bus types)"]}),Q.generateTrips&&(0,cs.jsxs)("p",{className:"ml-4",children:["  \u2192 ",n," trips will be generated"]})]},e)}),(0,cs.jsxs)("div",{className:"mt-2 pt-2 border-t border-blue-200",children:[(0,cs.jsxs)("p",{className:"font-medium",children:["\u2022 ",(0,cs.jsx)("strong",{children:"Total Routes:"})," ",Q.selectedDepots.reduce((e,t)=>{const s=Q.depotConfigs[t];return e+(s?s.busTypes.length:0)},0)*(Ue.length*(Ue.length-1)/2)]}),Q.generateTrips&&(0,cs.jsxs)("p",{className:"font-medium",children:["\u2022 ",(0,cs.jsx)("strong",{children:"Total Trips:"})," ",Q.selectedDepots.reduce((e,t)=>{const s=Q.depotConfigs[t];return e+(s?s.busTypes.length:0)},0)*(Ue.length*(Ue.length-1)/2)*Q.timeSlots.length*Q.daysOfWeek.length]})]})]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-4",children:[(0,cs.jsx)("button",{onClick:()=>z(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,cs.jsxs)("button",{onClick:Qe,disabled:c||0===Q.selectedDepots.length||0===Q.defaultBusTypes.length,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[(0,cs.jsx)("span",{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Generate Kerala Routes"})]})]})]})]})})}),Pt=()=>{var t;return(0,cs.jsx)(Md,{children:Ce&&(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>_e(!1),children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,cs.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"\ud83d\udce5 Export Routes"}),(0,cs.jsx)("button",{onClick:()=>_e(!1),className:"text-gray-400 hover:text-gray-600",children:(0,cs.jsx)(Bs.A,{className:"w-6 h-6"})})]}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Export route data in your preferred format with filtering options"})]}),(0,cs.jsxs)("div",{className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Format *"}),(0,cs.jsx)("div",{className:"grid grid-cols-3 gap-3",children:[{value:"csv",label:"CSV",description:"Comma-separated values"},{value:"excel",label:"Excel",description:"Microsoft Excel format"},{value:"json",label:"JSON",description:"JavaScript Object Notation"}].map(e=>(0,cs.jsxs)("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,cs.jsx)("input",{type:"radio",value:e.value,checked:Te===e.value,onChange:e=>Pe(e.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"font-medium text-sm text-gray-900",children:e.label}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]},e.value))})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Export Filters"}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status Filter"}),(0,cs.jsxs)("select",{value:Ee.status,onChange:e=>De(t=>(0,Ie.A)((0,Ie.A)({},t),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"all",children:"All Status"}),(0,cs.jsx)("option",{value:"active",children:"Active Only"}),(0,cs.jsx)("option",{value:"inactive",children:"Inactive Only"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot Filter"}),(0,cs.jsxs)("select",{value:Ee.depot,onChange:e=>De(t=>(0,Ie.A)((0,Ie.A)({},t),{},{depot:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"all",children:"All Depots"}),s.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.depotName},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date From"}),(0,cs.jsx)("input",{type:"date",value:Ee.dateRange.from,onChange:e=>De(t=>(0,Ie.A)((0,Ie.A)({},t),{},{dateRange:(0,Ie.A)((0,Ie.A)({},t.dateRange),{},{from:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date To"}),(0,cs.jsx)("input",{type:"date",value:Ee.dateRange.to,onChange:e=>De(t=>(0,Ie.A)((0,Ie.A)({},t),{},{dateRange:(0,Ie.A)((0,Ie.A)({},t.dateRange),{},{to:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),(0,cs.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,cs.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"\ud83d\udcca Export Preview:"}),(0,cs.jsxs)("div",{className:"text-blue-700 text-sm space-y-1",children:[(0,cs.jsxs)("p",{children:["\u2022 Format: ",Te.toUpperCase()]}),(0,cs.jsxs)("p",{children:["\u2022 Status: ","all"===Ee.status?"All routes":"".concat(Ee.status," routes only")]}),(0,cs.jsxs)("p",{children:["\u2022 Depot: ","all"===Ee.depot?"All depots":(null===(t=s.find(e=>e._id===Ee.depot))||void 0===t?void 0:t.depotName)||"Selected depot"]}),(0,cs.jsxs)("p",{children:["\u2022 Date Range: ",Ee.dateRange.from&&Ee.dateRange.to?"".concat(Ee.dateRange.from," to ").concat(Ee.dateRange.to):"All dates"]}),(0,cs.jsxs)("p",{children:["\u2022 Estimated Records: ",e.length," routes (filtered results may vary)"]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-4",children:[(0,cs.jsx)("button",{onClick:()=>_e(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,cs.jsxs)("button",{onClick:ct,disabled:c,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[c?(0,cs.jsx)("span",{className:"w-4 h-4 animate-spin"}):(0,cs.jsx)("span",{className:"w-4 h-4",children:"\ud83d\udce5"}),(0,cs.jsx)("span",{children:"Export Routes"})]})]})]})]})})})},Et=()=>{var e;return(0,cs.jsx)(Md,{children:Me&&(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:xt,children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4",onClick:e=>e.stopPropagation(),children:[(0,cs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,cs.jsx)("span",{className:"w-6 h-6 text-yellow-600",children:"\u26a0\ufe0f"})}),(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirm Action"})]})}),(0,cs.jsxs)("div",{className:"p-6",children:[(0,cs.jsxs)("div",{className:"mb-4",children:["kerala-auto-routes"===(null===Le||void 0===Le?void 0:Le.type)&&(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-gray-700 mb-2",children:"Are you sure you want to generate Kerala auto routes? This will create multiple routes and may take several minutes."}),(0,cs.jsxs)("div",{className:"bg-orange-50 rounded-lg p-3",children:[(0,cs.jsx)("p",{className:"text-orange-800 text-sm",children:(0,cs.jsx)("strong",{children:"This action will:"})}),(0,cs.jsxs)("ul",{className:"text-orange-700 text-sm mt-1 ml-4 list-disc",children:[(0,cs.jsx)("li",{children:"Create routes for all selected depots"}),(0,cs.jsx)("li",{children:"Generate trips automatically (if enabled)"}),(0,cs.jsx)("li",{children:"Assign buses and crew (if enabled)"})]})]})]}),"bulk-add-routes"===(null===Le||void 0===Le?void 0:Le.type)&&(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("p",{className:"text-gray-700 mb-2",children:["Are you sure you want to create ",me.count," bulk routes?"]}),(0,cs.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3",children:[(0,cs.jsx)("p",{className:"text-blue-800 text-sm",children:(0,cs.jsx)("strong",{children:"This will create:"})}),(0,cs.jsxs)("ul",{className:"text-blue-700 text-sm mt-1 ml-4 list-disc",children:[(0,cs.jsxs)("li",{children:[me.count," routes with Kerala city pairs"]}),(0,cs.jsxs)("li",{children:["Routes for depot: ",null===(e=s.find(e=>e._id===me.depotId))||void 0===e?void 0:e.depotName]}),(0,cs.jsx)("li",{children:"Schedule trips (if target date is set)"})]})]})]}),"bulk-operation"===(null===Le||void 0===Le?void 0:Le.type)&&(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("p",{className:"text-gray-700 mb-2",children:["Are you sure you want to perform this bulk operation on ",R.length," selected routes?"]}),(0,cs.jsx)("div",{className:"bg-red-50 rounded-lg p-3",children:(0,cs.jsxs)("p",{className:"text-red-800 text-sm",children:[(0,cs.jsx)("strong",{children:"Operation:"})," ",L.replace("_"," ").toUpperCase()]})})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-4",children:[(0,cs.jsx)("button",{onClick:xt,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,cs.jsxs)("button",{onClick:pt,disabled:c,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[c?(0,cs.jsx)("span",{className:"w-4 h-4 animate-spin"}):(0,cs.jsx)("span",{className:"w-4 h-4",children:"\u2713"}),(0,cs.jsx)("span",{children:"Confirm"})]})]})]})]})})})},Dt=()=>{var e,t,r;return(0,cs.jsx)(Md,{children:j&&(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,cs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Route"}),(0,cs.jsx)("button",{onClick:()=>N(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,cs.jsx)(Bs.A,{className:"w-5 h-5 text-gray-500"})})]})}),(0,cs.jsxs)("div",{className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Route Number"}),(0,cs.jsx)("input",{type:"text",value:$.routeNumber,onChange:e=>J((0,Ie.A)((0,Ie.A)({},$),{},{routeNumber:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., KL-THR-GUR-001"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Route Name"}),(0,cs.jsx)("input",{type:"text",value:$.routeName,onChange:e=>J((0,Ie.A)((0,Ie.A)({},$),{},{routeName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Thrissur to Guruvayur"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Starting Point"}),(0,cs.jsx)("input",{type:"text",value:(null===(e=$.startingPoint)||void 0===e?void 0:e.city)||"",onChange:e=>J((0,Ie.A)((0,Ie.A)({},$),{},{startingPoint:(0,Ie.A)((0,Ie.A)({},$.startingPoint),{},{city:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Starting city"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ending Point"}),(0,cs.jsx)("input",{type:"text",value:(null===(t=$.endingPoint)||void 0===t?void 0:t.city)||"",onChange:e=>J((0,Ie.A)((0,Ie.A)({},$),{},{endingPoint:(0,Ie.A)((0,Ie.A)({},$.endingPoint),{},{city:e.target.value})})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Destination city"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Distance (km)"}),(0,cs.jsx)("input",{type:"number",value:$.totalDistance,onChange:e=>{const t=parseInt(e.target.value)||0,s=o.find(e=>e.busType===$.busType&&e.isActive);let r=$.baseFare;if(s&&t>0){const e=Math.max(t*s.ratePerKm,s.minimumFare);r=Math.round(e)}J((0,Ie.A)((0,Ie.A)({},$),{},{totalDistance:t,baseFare:r}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Distance in kilometers"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (minutes)"}),(0,cs.jsx)("input",{type:"number",value:$.estimatedDuration,onChange:e=>J((0,Ie.A)((0,Ie.A)({},$),{},{estimatedDuration:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Duration in minutes"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot"}),(0,cs.jsxs)("select",{value:(null===(r=$.depot)||void 0===r?void 0:r.depotId)||"",onChange:e=>{const t=s.find(t=>t._id===e.target.value);J((0,Ie.A)((0,Ie.A)({},$),{},{depot:{depotId:e.target.value,name:(null===t||void 0===t?void 0:t.depotName)||(null===t||void 0===t?void 0:t.name)||""}}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"",children:"Select Depot"}),s.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.depotName||e.name},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bus Type"}),(0,cs.jsxs)("select",{value:$.busType,onChange:e=>{const t=e.target.value,s=o.find(e=>e.busType===t&&e.isActive);let r=$.baseFare,a=$.farePerKm;if(s){const e=Math.max($.totalDistance*s.ratePerKm,s.minimumFare);r=Math.round(e),a=s.ratePerKm}J((0,Ie.A)((0,Ie.A)({},$),{},{busType:t,baseFare:r,farePerKm:a}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"City / Ordinary",children:"Ordinary"}),(0,cs.jsx)("option",{value:"Fast Passenger / LSFP",children:"Fast Passenger"}),(0,cs.jsx)("option",{value:"Super Fast Passenger",children:"Super Fast"}),(0,cs.jsx)("option",{value:"A/C Low Floor",children:"AC Low Floor"}),(0,cs.jsx)("option",{value:"Luxury / Hi-tech & AC",children:"Volvo"}),(0,cs.jsx)("option",{value:"Garuda Maharaja / Garuda King / Multi-axle Premium",children:"Garuda"}),(0,cs.jsx)("option",{value:"Garuda Sanchari / Biaxle Premium",children:"Garuda Sanchari"}),(0,cs.jsx)("option",{value:"Super Deluxe",children:"Super Deluxe"}),(0,cs.jsx)("option",{value:"Super Express",children:"Super Express"}),(0,cs.jsx)("option",{value:"City Fast",children:"City Fast"}),(0,cs.jsx)("option",{value:"Non A/C Low Floor",children:"Non AC Low Floor"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Base Fare (\u20b9)"}),(0,cs.jsx)("input",{type:"number",value:$.baseFare,onChange:e=>J((0,Ie.A)((0,Ie.A)({},$),{},{baseFare:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Base fare amount"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fare Per KM (\u20b9)"}),(0,cs.jsx)("input",{type:"number",step:"0.1",value:$.farePerKm,onChange:e=>J((0,Ie.A)((0,Ie.A)({},$),{},{farePerKm:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Fare per kilometer"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,cs.jsxs)("select",{value:$.status,onChange:e=>J((0,Ie.A)((0,Ie.A)({},$),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"inactive",children:"Inactive"}),(0,cs.jsx)("option",{value:"maintenance",children:"Maintenance"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,cs.jsx)("textarea",{value:$.notes||"",onChange:e=>J((0,Ie.A)((0,Ie.A)({},$),{},{notes:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Additional notes about this route"})]})]}),(0,cs.jsxs)("div",{className:"p-6 border-t border-gray-200 flex justify-end space-x-3",children:[(0,cs.jsx)("button",{onClick:()=>N(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,cs.jsx)("button",{onClick:ft,disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:c?"Updating...":"Update Route"})]})]})})})},Mt=()=>(0,cs.jsx)(DV,{isOpen:H,onClose:()=>q(!1),route:E,onSaveRoute:bt,loading:c}),Ot=()=>(0,cs.jsx)(MV,{isOpen:G,onClose:()=>Y(!1),route:E,onUpdatePrices:vt,conductorRole:"ADMIN"}),Rt=()=>{var e,t,s,r,a,n,i,o;return(0,cs.jsx)(Md,{children:K&&E&&(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[(0,cs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Route Details"}),(0,cs.jsx)("button",{onClick:()=>W(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,cs.jsx)(Bs.A,{className:"w-5 h-5 text-gray-500"})})]})}),(0,cs.jsxs)("div",{className:"p-6",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Basic Information"}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Route Number:"}),(0,cs.jsx)("p",{className:"text-gray-900",children:E.routeNumber})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Route Name:"}),(0,cs.jsx)("p",{className:"text-gray-900",children:E.routeName})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Status:"}),(0,cs.jsx)("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium ".concat("active"===E.status?"bg-green-100 text-green-800":"inactive"===E.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:E.status})]})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Route Path"}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"From:"}),(0,cs.jsxs)("p",{className:"text-gray-900",children:[null===(e=E.startingPoint)||void 0===e?void 0:e.city," - ",null===(t=E.startingPoint)||void 0===t?void 0:t.location]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"To:"}),(0,cs.jsxs)("p",{className:"text-gray-900",children:[null===(s=E.endingPoint)||void 0===s?void 0:s.city," - ",null===(r=E.endingPoint)||void 0===r?void 0:r.location]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Distance:"}),(0,cs.jsxs)("p",{className:"text-gray-900",children:[E.totalDistance," km"]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Duration:"}),(0,cs.jsxs)("p",{className:"text-gray-900",children:[Math.floor(E.estimatedDuration/60),"h ",E.estimatedDuration%60,"m"]})]})]})]})]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Fare Information"}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Base Fare:"}),(0,cs.jsxs)("p",{className:"text-gray-900",children:["\u20b9",E.baseFare]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Fare Per KM:"}),(0,cs.jsxs)("p",{className:"text-gray-900",children:["\u20b9",E.farePerKm]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Total Fare (Est.):"}),(0,cs.jsxs)("p",{className:"text-gray-900",children:["\u20b9",Math.round(E.baseFare+E.totalDistance*E.farePerKm)]})]})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Service Details"}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Bus Type:"}),(0,cs.jsx)("p",{className:"text-gray-900",children:he(E.busType)})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Depot:"}),(0,cs.jsx)("p",{className:"text-gray-900",children:(null===(a=E.depot)||void 0===a?void 0:a.depotName)||(null===(n=E.depot)||void 0===n?void 0:n.name)||"Not assigned"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Schedules:"}),(0,cs.jsxs)("p",{className:"text-gray-900",children:[(null===(i=E.schedules)||void 0===i?void 0:i.length)||0," active schedules"]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Stops:"}),(0,cs.jsxs)("p",{className:"text-gray-900",children:[(null===(o=E.intermediateStops)||void 0===o?void 0:o.length)||0," intermediate stops"]})]})]})]})]})]}),E.features&&E.features.length>0&&(0,cs.jsxs)("div",{className:"mt-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Features"}),(0,cs.jsx)("div",{className:"flex flex-wrap gap-2",children:E.features.map((e,t)=>(0,cs.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:e},t))})]}),E.notes&&(0,cs.jsxs)("div",{className:"mt-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Notes"}),(0,cs.jsx)("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:E.notes})]}),(0,cs.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Quick Actions"}),(0,cs.jsxs)("div",{className:"flex space-x-3",children:[(0,cs.jsx)("button",{onClick:()=>{W(!1),gt(E)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Edit Route"}),(0,cs.jsx)("button",{onClick:()=>{W(!1),jt(E)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Manage Schedules"}),(0,cs.jsx)("button",{onClick:()=>{W(!1),yt(E._id)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete Route"})]})]})]})]})})})};return(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Streamlined Route Management"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Efficient route planning with intelligent scheduling"})]}),(0,cs.jsx)("div",{className:"flex items-center space-x-3",children:(0,cs.jsxs)("button",{onClick:Ke,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Refresh"})]})})]}),(0,cs.jsx)("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(c?"bg-yellow-500 animate-pulse":"bg-green-500")}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:c?"Loading...":"Data Loaded"})]}),(0,cs.jsxs)("div",{className:"text-sm text-gray-600",children:["Routes: ",e.length," | Depots: ",s.length," | Stops: ",n.length]})]}),(0,cs.jsx)("div",{className:"flex items-center space-x-2",children:(0,cs.jsx)("button",{onClick:Ke,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Refresh Data"})})]})}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Routes"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]}),(0,cs.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,cs.jsx)("span",{className:"w-6 h-6 text-green-600",children:"\ud83d\ude8c"})})]})}),(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Routes"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>"active"===e.status).length})]}),(0,cs.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,cs.jsx)("span",{className:"w-6 h-6 text-green-600",children:"\u2705"})})]})}),(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Schedules"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:e.reduce((e,t)=>{var s;return e+((null===(s=t.schedules)||void 0===s?void 0:s.length)||0)},0)})]}),(0,cs.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,cs.jsx)("span",{className:"w-6 h-6 text-blue-600",children:"\ud83d\udcc5"})})]})}),(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Stops"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:e.reduce((e,t)=>{var s;return e+((null===(s=t.intermediateStops)||void 0===s?void 0:s.length)||0)},0)})]}),(0,cs.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg",children:(0,cs.jsx)("span",{className:"w-6 h-6 text-purple-600",children:"\ud83d\udccd"})})]})})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 w-full -mx-4 sm:-mx-6 lg:-mx-8",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"}),(0,cs.jsx)("button",{onClick:()=>O(!M),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:M?"Expand Quick Actions":"Minimize Quick Actions",children:M?(0,cs.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):(0,cs.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),R.length>0&&(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("span",{className:"text-sm text-gray-600",children:[R.length," routes selected"]}),(0,cs.jsxs)("select",{value:L,onChange:e=>F(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"",children:"Bulk Operation"}),(0,cs.jsx)("option",{value:"activate",children:"Activate Routes"}),(0,cs.jsx)("option",{value:"deactivate",children:"Deactivate Routes"}),(0,cs.jsx)("option",{value:"update_fare",children:"Update Fares"}),(0,cs.jsx)("option",{value:"schedule_trips",children:"Schedule Trips"})]}),(0,cs.jsx)("button",{onClick:$e,disabled:!L,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:"Execute"})]})]}),!M&&(0,cs.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 w-full",children:[(0,cs.jsxs)("button",{onClick:()=>z(!0),className:"p-2 bg-orange-50 rounded-md hover:bg-orange-100 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)("div",{className:"p-1 bg-orange-100 rounded-md",children:(0,cs.jsx)("span",{className:"w-4 h-4 text-orange-600",children:"\ud83d\ude8c"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-orange-900",children:"Auto Routes"}),(0,cs.jsx)("p",{className:"text-xs text-orange-700",children:"Generate all Kerala routes with trips automatically"})]})]}),(0,cs.jsxs)("button",{onClick:()=>_(!0),className:"p-2 bg-green-50 rounded-md hover:bg-green-100 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)("div",{className:"p-1 bg-green-100 rounded-md",children:(0,cs.jsx)("span",{className:"w-4 h-4 text-green-600",children:"\ud83d\uddfa\ufe0f"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-green-900",children:"Map-Based Route"}),(0,cs.jsx)("p",{className:"text-xs text-green-700",children:"Create route by clicking on map with auto-routing"})]})]}),(0,cs.jsxs)("button",{onClick:()=>v(!0),className:"p-2 bg-blue-50 rounded-md hover:bg-blue-100 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)("div",{className:"p-1 bg-blue-100 rounded-md",children:(0,cs.jsx)("span",{className:"w-4 h-4 text-blue-600",children:"\u2795"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-blue-900",children:"Add Single Route"}),(0,cs.jsx)("p",{className:"text-xs text-blue-700",children:"Add one route with detailed configuration"})]})]}),(0,cs.jsxs)("button",{onClick:()=>y(!0),className:"p-2 bg-green-50 rounded-md hover:bg-green-100 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)("div",{className:"p-1 bg-green-100 rounded-md",children:(0,cs.jsx)("span",{className:"w-4 h-4 text-green-600",children:"\ud83d\udce4"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-green-900",children:"Bulk Add Routes"}),(0,cs.jsx)("p",{className:"text-xs text-green-700",children:"Add multiple routes with Kerala city pairs"})]})]}),(0,cs.jsxs)("button",{onClick:()=>_e(!0),className:"p-2 bg-purple-50 rounded-md hover:bg-purple-100 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)("div",{className:"p-1 bg-purple-100 rounded-md",children:(0,cs.jsx)("span",{className:"w-4 h-4 text-purple-600",children:"\ud83d\udce5"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"text-sm font-medium text-purple-900",children:"Export Routes"}),(0,cs.jsx)("p",{className:"text-xs text-purple-700",children:"Export route data for external use"})]})]})]})]}),(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(ys.A,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search routes...",value:u,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,cs.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"all",children:"All Status"}),(0,cs.jsx)("option",{value:"active",children:"Active"}),(0,cs.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot"}),(0,cs.jsxs)("select",{value:x,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"all",children:"All Depots"}),s.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.depotName},e._id))]})]}),(0,cs.jsx)("div",{className:"flex items-end",children:(0,cs.jsxs)("button",{onClick:()=>{h(""),p("all"),g("all")},className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center space-x-2",children:[(0,cs.jsx)("span",{className:"w-4 h-4",children:"\ud83d\udd0d"}),(0,cs.jsx)("span",{children:"Clear Filters"})]})})]})}),(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Nt.map(e=>(0,cs.jsx)(wt,{route:e},e._id))}),0===Nt.length&&!c&&(0,cs.jsx)("div",{className:"text-center py-12",children:(0,cs.jsxs)("div",{className:"bg-blue-50 rounded-lg p-8 max-w-md mx-auto",children:[(0,cs.jsx)("span",{className:"w-16 h-16 text-blue-400 mx-auto mb-4 block",children:"\ud83d\uddfa\ufe0f"}),(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"No Routes Found"}),(0,cs.jsx)("p",{className:"text-gray-600 mb-4",children:"Routes are being fetched from the database. Add new routes using the Quick Actions above."}),(0,cs.jsx)("button",{onClick:()=>v(!0),className:"mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add New Route"})]})}),(0,cs.jsx)(kt,{}),(0,cs.jsx)(St,{}),(0,cs.jsx)(At,{}),(0,cs.jsx)(Ct,{}),(0,cs.jsx)(_t,{}),(0,cs.jsx)(Tt,{}),(0,cs.jsx)(Pt,{}),(0,cs.jsx)(Et,{}),(0,cs.jsx)(Dt,{}),(0,cs.jsx)(Mt,{}),(0,cs.jsx)(Ot,{}),(0,cs.jsx)(Rt,{})]})},RV=(0,Ns.A)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),IV=()=>{const[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,d]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[m,p]=(0,r.useState)(!1),[x,g]=(0,r.useState)(""),[f,y]=(0,r.useState)("all"),[b,v]=(0,r.useState)(()=>(new Date).toISOString().slice(0,10)),[j,N]=(0,r.useState)(1),[w,k]=(0,r.useState)(24),[A,S]=(0,r.useState)(0),[C,_]=(0,r.useState)("all"),[T,P]=(0,r.useState)("all"),[E,D]=(0,r.useState)(!1),[M,O]=(0,r.useState)("now"),[R,I]=(0,r.useState)({tripId:"",routeId:"",busId:"",driverId:"",scheduledDate:"",scheduledTime:""}),[L,F]=(0,r.useState)(!1),[B,z]=(0,r.useState)({routeNumber:"R001",routeName:"Idukki to Thiruvananthapuram",startLocation:"Idukki, Kerala",endLocation:"Thiruvananthapuram, Kerala",startCoords:null,endCoords:null,depotId:"",busType:"standard",farePerKm:2.5,routePolyline:null,autoGeneratedStops:[],totalDistance:0,estimatedDuration:0}),[U,V]=(0,r.useState)(!1),[K]=(0,r.useState)(()=>{try{return"true"===localStorage.getItem("autoDailyKerala")}catch(e){return!1}}),[W,H]=(0,r.useState)(!1),[q,G]=(0,r.useState)(!1),[Y,$]=(0,r.useState)(!1),[J,Q]=(0,r.useState)(null),[X,Z]=(0,r.useState)([]),[ee,te]=(0,r.useState)({routeId:"",busId:"",driverId:"",conductorId:"",serviceDate:"",startTime:"",endTime:"",fare:0,capacity:0,status:"scheduled",depotId:"",notes:"",bookingOpen:!0,bookingCloseTime:"",cancellationPolicy:{hoursBeforeDeparture:2,refundPercentage:80}}),[se,re]=(0,r.useState)({targetDate:(new Date).toISOString().slice(0,10),depotIds:[],maxTripsPerRoute:5,timeGap:30,autoAssignCrew:!0,autoAssignBuses:!0,generateReports:!0}),ae=(0,r.useCallback)(e=>{const t=[];let s=0;const r=e.length;let a=0,n=0;for(;s<r;){let r,i=0,o=0;do{r=e.charCodeAt(s++)-63,o|=(31&r)<<i,i+=5}while(r>=32);a+=0!==(1&o)?~(o>>1):o>>1,i=0,o=0;do{r=e.charCodeAt(s++)-63,o|=(31&r)<<i,i+=5}while(r>=32);n+=0!==(1&o)?~(o>>1):o>>1,t.push({lat:a/1e5,lng:n/1e5})}return t},[]),ne=(0,r.useCallback)((e,t,s,r)=>{const a=(s-e)*Math.PI/180,n=(r-t)*Math.PI/180,i=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},[]),ie=(0,r.useCallback)(async(e,t)=>{try{if(window.google&&window.google.maps){const s=new window.google.maps.Geocoder,r=new window.google.maps.LatLng(e,t);return new Promise(e=>{s.geocode({location:r},(t,s)=>{if("OK"===s&&t[0]){const s=t[0],r=s.address_components||[];let a="Unknown";for(const e of r)if(e.types.includes("locality")||e.types.includes("administrative_area_level_2")||e.types.includes("administrative_area_level_3")){a=e.long_name;break}e({name:s.formatted_address.split(",")[0]||s.formatted_address,city:a,display_name:s.formatted_address})}else e(null)})})}return null}catch(s){return console.error("Reverse geocoding error:",s),null}},[]);(0,r.useEffect)(()=>{oe()},[j,w,x,f,b]),(0,r.useEffect)(()=>{u.length>0&&!B.depotId&&z(e=>(0,Ie.A)((0,Ie.A)({},e),{},{depotId:u[0]._id}))},[u,B.depotId]),(0,r.useEffect)(()=>{if(K)try{const e=(new Date).toISOString().slice(0,10);if(localStorage.getItem("autoDailyKerala.lastRun")===e)return;(async()=>{try{await(0,xs.nr)("/api/auto-scheduler/mass-schedule",{method:"POST",body:JSON.stringify({date:e,maxTripsPerRoute:4,timeGap:30,autoAssignCrew:!0,autoAssignBuses:!0,optimizeForDemand:!0,region:"KERALA"})}),localStorage.setItem("autoDailyKerala.lastRun",e),await _e(e)}catch(qU){console.error("Auto daily Kerala scheduling failed",qU)}})()}catch(e){}},[K]);const oe=(0,r.useCallback)(async()=>{p(!0);try{var e,s,r,n,o,c,u,m,g,y,v,N,k,A,C,_;const p=new URLSearchParams;p.set("page",String(j)),p.set("limit",String(w)),x&&p.set("search",x.trim()),"all"!==f&&p.set("status",f);const E=e=>{const t=new Date(e),s=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).toISOString(),r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59,999).toISOString();p.set("dateFrom",s),p.set("dateTo",r)};if(b&&E(b),"live"===T&&!b){const e=new Date,t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");E("".concat(t,"-").concat(s,"-").concat(r)),p.set("status","running")}let D=await(0,xs.nr)("/api/admin/trips?"+p.toString(),{suppressError:!0}),M=(null===D||void 0===D||null===(e=D.data)||void 0===e?void 0:e.data)||(null===D||void 0===D?void 0:D.data)||{},O=M.trips||M.data||(Array.isArray(M)?M:[]);if(!Array.isArray(O)||0===O.length||!1===(null===D||void 0===D?void 0:D.ok)){var P;const e=await(0,xs.nr)("/api/admin/trips",{suppressError:!0}),t=(null===e||void 0===e||null===(P=e.data)||void 0===P?void 0:P.data)||(null===e||void 0===e?void 0:e.data)||{},s=t.trips||t.data||(Array.isArray(t)?t:[]);Array.isArray(s)&&s.length&&(O=s,M=t)}const R=(O||[]).map(e=>(0,Ie.A)((0,Ie.A)({},e),{},{serviceDate:e.serviceDate?e.serviceDate.split("T")[0]:"",fare:Number(e.fare)||0,capacity:Number(e.capacity)||0}));t(R);const I=M.pagination||M.meta||{};S(I.total||R.length);const[L,F,B,z,U]=await Promise.all([(0,xs.nr)("/api/admin/routes",{suppressError:!0}),(0,xs.nr)("/api/admin/buses",{suppressError:!0}),(0,xs.nr)("/api/admin/all-drivers",{suppressError:!0}),(0,xs.nr)("/api/admin/conductors",{suppressError:!0}),(0,xs.nr)("/api/admin/depots?showAll=true",{suppressError:!0})]),V=((null===L||void 0===L||null===(s=L.data)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.routes)||(null===L||void 0===L||null===(n=L.data)||void 0===n?void 0:n.routes)||(null===L||void 0===L?void 0:L.routes)||[]).map(e=>{const t=e.startingPoint||e.from||{},s=e.endingPoint||e.to||{},r="object"===typeof t?t.location||t.city||"":t||"",a="object"===typeof s?s.location||s.city||"":s||"";return(0,Ie.A)((0,Ie.A)({},e),{},{routeNumber:e.routeNumber||e.code||"",routeName:e.routeName||e.name||"",startPlace:r,endPlace:a})}),K=((null===F||void 0===F||null===(o=F.data)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.buses)||(null===F||void 0===F||null===(u=F.data)||void 0===u?void 0:u.buses)||(null===F||void 0===F?void 0:F.buses)||[]).map(e=>(0,Ie.A)((0,Ie.A)({},e),{},{busNumber:e.busNumber||"N/A",capacity:e.capacity||{total:0}})),W=((null===B||void 0===B||null===(m=B.data)||void 0===m||null===(g=m.data)||void 0===g?void 0:g.drivers)||(null===B||void 0===B||null===(y=B.data)||void 0===y?void 0:y.drivers)||(null===B||void 0===B?void 0:B.drivers)||[]).map(e=>({_id:e._id||e.id,name:e.name||e.fullName||e.employeeName||"Driver",status:e.status||"active"})),H=((null===z||void 0===z||null===(v=z.data)||void 0===v||null===(N=v.data)||void 0===N?void 0:N.conductors)||(null===z||void 0===z||null===(k=z.data)||void 0===k?void 0:k.conductors)||(null===z||void 0===z?void 0:z.conductors)||[]).map(e=>({_id:e._id||e.id,name:e.name||e.fullName||e.employeeName||"Conductor",status:e.status||"active"})),q=((null===U||void 0===U||null===(A=U.data)||void 0===A||null===(C=A.data)||void 0===C?void 0:C.depots)||(null===U||void 0===U||null===(_=U.data)||void 0===_?void 0:_.depots)||(null===U||void 0===U?void 0:U.depots)||[]).map(e=>({_id:e._id||e.id,depotName:e.depotName||e.name||"Depot"}));a(V),i(K),l(W),d(H),h(q)}catch(E){console.error("Error fetching data:",E),Oe.oR.error("Failed to fetch trip management data")}finally{p(!1)}},[j,w,x,f,b,T]),le=async()=>{try{if(!se.targetDate)return void Oe.oR.error("Please select a target date");p(!0),console.log("Starting auto scheduling with form:",se);const s=await(0,xs.nr)("/api/auto-scheduler/mass-schedule",{method:"POST",body:JSON.stringify({date:se.targetDate,depotIds:se.depotIds,maxTripsPerRoute:se.maxTripsPerRoute,timeGap:se.timeGap,autoAssignCrew:se.autoAssignCrew,autoAssignBuses:se.autoAssignBuses,generateReports:se.generateReports})});if(console.log("Auto scheduling response:",s),null!==s&&void 0!==s&&s.success||null!==s&&void 0!==s&&s.ok){var e,t;const r=(null===(e=s.data)||void 0===e?void 0:e.tripsCreated)||s.tripsCreated||0,a=(null===(t=s.data)||void 0===t?void 0:t.successRate)||s.successRate||"0%";Oe.oR.success("Auto-scheduling completed! ".concat(r," trips created (").concat(a," success rate)")),$(!1),xe(),oe()}else{const e=(null===s||void 0===s?void 0:s.message)||(null===s||void 0===s?void 0:s.error)||"Auto scheduling failed";Oe.oR.error(e),console.error("Auto scheduling failed:",s)}}catch(s){console.error("Error in auto scheduling:",s),Oe.oR.error("Auto scheduling failed: ".concat(s.message||"Unknown error"))}finally{p(!1)}},ce=async e=>{try{if(window.google&&window.google.maps){const t=new window.google.maps.Geocoder;return new Promise(s=>{t.geocode({address:e,region:"IN"},(e,t)=>{if("OK"===t&&e[0]){const t=e[0],r=t.geometry.location;s({lat:r.lat(),lng:r.lng(),display_name:t.formatted_address})}else s(null)})})}return null}catch(t){return console.error("Geocoding error:",t),null}},de=(0,r.useCallback)(async(e,t,s)=>{try{const r=ae(e),a=[];a.push({stopName:t,city:t.split(",")[0],location:t,stopNumber:1,distanceFromPrev:0,distanceFromStart:0,coordinates:{latitude:r[0].lat,longitude:r[0].lng},isActive:!0});const n=Math.max(1,Math.floor(r.length/8));for(let e=n;e<r.length-n;e+=n){const t=r[e],s=await ie(t.lat,t.lng);if(s){const e=ne(r[0].lat,r[0].lng,t.lat,t.lng);a.push({stopName:s.name,city:s.city||s.name,location:s.display_name,stopNumber:a.length+1,distanceFromPrev:a.length>0?ne(a[a.length-1].coordinates.latitude,a[a.length-1].coordinates.longitude,t.lat,t.lng):0,distanceFromStart:e,coordinates:{latitude:t.lat,longitude:t.lng},isActive:!0})}}const i=r[r.length-1],o=ne(r[0].lat,r[0].lng,i.lat,i.lng);return a.push({stopName:s,city:s.split(",")[0],location:s,stopNumber:a.length+1,distanceFromPrev:a.length>0?ne(a[a.length-1].coordinates.latitude,a[a.length-1].coordinates.longitude,i.lat,i.lng):0,distanceFromStart:o,coordinates:{latitude:i.lat,longitude:i.lng},isActive:!0}),a}catch(r){return console.error("Stop extraction error:",r),[]}},[ae,ne,ie]),ue=(0,r.useCallback)(async()=>{if(B.startLocation&&B.endLocation){V(!0);try{(0,Oe.oR)("Finding locations...");const[e,t]=await Promise.all([ce(B.startLocation),ce(B.endLocation)]);if(!e||!t)return void Oe.oR.error("Could not find one or both locations. Please try different location names.");(0,Oe.oR)("Generating optimal route...");const s=await(async(e,t)=>{try{const s=await fetch("https://router.project-osrm.org/route/v1/driving/".concat(e.lng,",").concat(e.lat,";").concat(t.lng,",").concat(t.lat,"?overview=full&geometries=polyline")),r=await s.json();if("Ok"===r.code&&r.routes&&r.routes.length>0){const e=r.routes[0];return{polyline:e.geometry,distance:e.distance/1e3,duration:e.duration/60}}return null}catch(s){return console.error("Route generation error:",s),null}})(e,t);if(!s)return void Oe.oR.error("Could not generate route between these locations.");(0,Oe.oR)("Extracting intermediate stops...");const r=await de(s.polyline,B.startLocation,B.endLocation);z(a=>(0,Ie.A)((0,Ie.A)({},a),{},{startCoords:e,endCoords:t,routePolyline:s.polyline,autoGeneratedStops:r,totalDistance:s.distance,estimatedDuration:s.duration,routeName:"".concat(B.startLocation," \u2192 ").concat(B.endLocation)})),Oe.oR.success("Route generated successfully! Found ".concat(r.length," stops over ").concat(s.distance.toFixed(1)," km"))}catch(e){console.error("Route generation error:",e),Oe.oR.error("Failed to generate route. Please try again.")}finally{V(!1)}}else Oe.oR.error("Please enter both start and end locations")},[B.startLocation,B.endLocation,de]),he=(0,r.useCallback)(async()=>{if(B.routeNumber&&B.depotId){p(!0);try{const e={routeNumber:B.routeNumber,routeName:B.routeName,startingPoint:{city:B.startLocation.split(",")[0],location:B.startLocation,coordinates:{latitude:B.startCoords.lat,longitude:B.startCoords.lng}},endingPoint:{city:B.endLocation.split(",")[0],location:B.endLocation,coordinates:{latitude:B.endCoords.lat,longitude:B.endCoords.lng}},totalDistance:B.totalDistance,estimatedDuration:B.estimatedDuration,stops:B.autoGeneratedStops,depotId:B.depotId,baseFare:B.totalDistance*B.farePerKm,farePerKm:B.farePerKm,status:"active",routePolyline:B.routePolyline,busType:B.busType},t=await(0,xs.nr)("/api/admin/routes",{method:"POST",body:JSON.stringify(e)});t.success?(Oe.oR.success("Route saved successfully!"),F(!1),me(),oe()):Oe.oR.error(t.message||"Failed to save route")}catch(e){console.error("Error saving route:",e),Oe.oR.error("Failed to save route")}finally{p(!1)}}else Oe.oR.error("Please enter route number and select depot")},[B,oe]),me=()=>{z({routeNumber:"R001",routeName:"Idukki to Thiruvananthapuram",startLocation:"Idukki, Kerala",endLocation:"Thiruvananthapuram, Kerala",startCoords:null,endCoords:null,depotId:"",busType:"standard",farePerKm:2.5,routePolyline:null,autoGeneratedStops:[],totalDistance:0,estimatedDuration:0})},pe=()=>{te({routeId:"",busId:"",driverId:"",conductorId:"",serviceDate:"",startTime:"",endTime:"",fare:0,capacity:0,status:"scheduled",depotId:"",notes:"",bookingOpen:!0,bookingCloseTime:"",cancellationPolicy:{hoursBeforeDeparture:2,refundPercentage:80}})},xe=()=>{re({targetDate:(new Date).toISOString().slice(0,10),depotIds:[],maxTripsPerRoute:5,timeGap:30,autoAssignCrew:!0,autoAssignBuses:!0,generateReports:!0})},ge=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=new Date,r=s.getFullYear(),a=String(s.getMonth()+1).padStart(2,"0"),n=String(s.getDate()).padStart(2,"0"),i=String(s.getHours()).padStart(2,"0"),o=String(s.getMinutes()).padStart(2,"0");O(e),I({tripId:t._id||"",routeId:t.routeId&&(t.routeId._id||t.routeId)||"",busId:t.busId&&(t.busId._id||t.busId)||"",driverId:t.driverId&&(t.driverId._id||t.driverId)||"",scheduledDate:"now"===e?"".concat(r,"-").concat(a,"-").concat(n):"",scheduledTime:"now"===e?"".concat(i,":").concat(o):""}),D(!0)},fe=e.filter(e=>{var t,r;const a=!!e.routeId&&(((null===(t=s.find(t=>t._id===e.routeId))||void 0===t?void 0:t.routeNumber)||"").toLowerCase().includes(x.toLowerCase())||((null===(r=s.find(t=>t._id===e.routeId))||void 0===r?void 0:r.routeName)||"").toLowerCase().includes(x.toLowerCase())),n="all"===f||e.status===f,i=!b||e.serviceDate===b,o="all"===C||e.routeId===C;return a&&n&&i&&o}),ye=e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800";case"boarding":return"bg-yellow-100 text-yellow-800";case"running":return"bg-green-100 text-green-800";case"completed":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";case"delayed":return"bg-orange-100 text-orange-800"}},be=e=>{var t,r,a,i,l,d,h,m;let{trip:x}=e;const g=e=>e&&"object"===typeof e?e._id||e.id:e,f=(e,t)=>e.find(e=>g(e._id||e.id)===g(t)),y=x.routeId&&"object"===typeof x.routeId?x.routeId:f(s,x.routeId),b=x.busId&&"object"===typeof x.busId?x.busId:f(n,x.busId),v=x.driverId&&"object"===typeof x.driverId?x.driverId:f(o,x.driverId),j=x.conductorId&&"object"===typeof x.conductorId?x.conductorId:f(c,x.conductorId);let N=null;if(x.depotId&&(N="object"===typeof x.depotId?x.depotId:f(u,x.depotId)),!N&&y){const e=y.depotId||y.depot;e&&(N="object"===typeof e?e:f(u,e))}const w=x.routeNumber||(null===y||void 0===y?void 0:y.routeNumber)||(null===y||void 0===y?void 0:y.code)||"N/A",k=x.routeName||(null===y||void 0===y?void 0:y.routeName)||(null===y||void 0===y?void 0:y.name)||"Unknown Route",A=(null===b||void 0===b?void 0:b.busNumber)||"Unassigned",S=(null===v||void 0===v?void 0:v.name)||"No Driver",C=(null===j||void 0===j?void 0:j.name)||"No Conductor",_=(null===(t=N)||void 0===t?void 0:t.depotName)||(null===(r=N)||void 0===r?void 0:r.name)||"";return(0,cs.jsxs)(ed.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[(0,cs.jsx)("div",{className:"flex items-center justify-between mb-1",children:_?(0,cs.jsx)("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:_}):(0,cs.jsx)("span",{})}),(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("input",{type:"checkbox",checked:X.includes(x._id),onChange:e=>{e.target.checked?Z([...X,x._id]):Z(X.filter(e=>e!==x._id))},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,cs.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,cs.jsx)(fs.A,{className:"w-5 h-5 text-blue-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"font-semibold text-gray-900",children:w}),(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:k}),(0,cs.jsxs)("p",{className:"text-xs text-gray-500",children:[(null===(a=s.find(e=>(e._id||e.id)===((null===y||void 0===y?void 0:y._id)||(null===y||void 0===y?void 0:y.id))))||void 0===a?void 0:a.startPlace)||(null===y||void 0===y||null===(i=y.startingPoint)||void 0===i?void 0:i.location)||(null===y||void 0===y||null===(l=y.startingPoint)||void 0===l?void 0:l.city)||""," \t\t\t\t\t\t\t\t\t\t\t\t\t\t","\u2192"," ",(null===(d=s.find(e=>(e._id||e.id)===((null===y||void 0===y?void 0:y._id)||(null===y||void 0===y?void 0:y.id))))||void 0===d?void 0:d.endPlace)||(null===y||void 0===y||null===(h=y.endingPoint)||void 0===h?void 0:h.location)||(null===y||void 0===y||null===(m=y.endingPoint)||void 0===m?void 0:m.city)||""]})]})]}),(0,cs.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(ye(x.status)),children:x.status})]}),(0,cs.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,cs.jsx)(sd.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:[x.startTime," - ",x.endTime]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,cs.jsx)(fs.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:new Date(x.serviceDate).toLocaleDateString()})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,cs.jsx)(ks.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:[A," \u2022 ",x.capacity," seats"]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,cs.jsx)(Ss.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:[S," \u2022 ",C]})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,cs.jsx)(Es.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:["\u20b9",x.fare," \u2022 ",x.bookedSeats||0,"/",x.capacity," booked"]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[(0,cs.jsxs)("div",{className:"flex space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>(e=>{Q(e),te((0,Ie.A)((0,Ie.A)({},e),{},{serviceDate:e.serviceDate?e.serviceDate.split("T")[0]:"",bookingCloseTime:e.bookingCloseTime?e.bookingCloseTime.split("T")[0]:""})),G(!0)})(x),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Trip",children:(0,cs.jsx)(Kh.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>(async e=>{try{if(!window.confirm("Are you sure you want to delete this trip?"))return;p(!0);const t=await(0,xs.nr)("/api/admin/trips/".concat(e),{method:"DELETE"});null!==t&&void 0!==t&&t.ok||null!==t&&void 0!==t&&t.success?(Oe.oR.success("Trip deleted"),oe()):Oe.oR.error((null===t||void 0===t?void 0:t.message)||"Failed to delete trip")}catch(qU){console.error(qU),Oe.oR.error("Failed to delete trip")}finally{p(!1)}})(x._id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Trip",children:(0,cs.jsx)(Wh.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>{},className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"View Details",children:(0,cs.jsx)(Nu.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>ge("now",x),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Assign Now",children:(0,cs.jsx)(Lh,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>ge("date",x),className:"p-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",title:"Assign for Date",children:(0,cs.jsx)(RV,{className:"w-4 h-4"})})]}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:x.bookingOpen?"Booking Open":"Booking Closed"})]})]})},ve=(0,r.useCallback)(e=>{const t=e.target.value;z(e=>(0,Ie.A)((0,Ie.A)({},e),{},{startLocation:t}))},[]),je=(0,r.useCallback)(e=>{const t=e.target.value;z(e=>(0,Ie.A)((0,Ie.A)({},e),{},{endLocation:t}))},[]),Ne=(0,r.useCallback)(e=>{const t=e.target.value;z(e=>(0,Ie.A)((0,Ie.A)({},e),{},{routeNumber:t}))},[]),we=(0,r.useCallback)(e=>{const t=e.target.value;z(e=>(0,Ie.A)((0,Ie.A)({},e),{},{depotId:t}))},[]),ke=(0,r.useCallback)(e=>{const t=e.target.value;z(e=>(0,Ie.A)((0,Ie.A)({},e),{},{busType:t}))},[]),Ae=(0,r.useCallback)(e=>{const t=parseFloat(e.target.value)||0;z(e=>(0,Ie.A)((0,Ie.A)({},e),{},{farePerKm:t}))},[]),Se=r.memo(()=>L?(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>F(!1),children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-4xl w-full mx-4 max-h-[85vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,cs.jsx)("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-blue-50",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("h3",{className:"text-2xl font-bold text-gray-900 flex items-center space-x-2",children:[(0,cs.jsx)("div",{className:"p-1.5 bg-purple-100 rounded-lg",children:(0,cs.jsx)(As.A,{className:"w-6 h-6 text-purple-600"})}),(0,cs.jsx)("span",{children:"Smart Route Builder"})]}),(0,cs.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"AI-powered route generation with automatic stop extraction and fare calculation"})]}),(0,cs.jsx)("button",{onClick:()=>F(!1),className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full p-2 transition-colors",children:(0,cs.jsx)(Bs.A,{className:"w-6 h-6"})})]})}),(0,cs.jsxs)("div",{className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-lg p-6 border border-purple-200",children:[(0,cs.jsxs)("h4",{className:"text-xl font-bold text-purple-900 mb-4 flex items-center",children:[(0,cs.jsx)("div",{className:"p-1.5 bg-purple-100 rounded-lg mr-2",children:(0,cs.jsx)(pd,{className:"w-5 h-5 text-purple-600"})}),"Route Configuration"]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Location *"}),(0,cs.jsx)("input",{type:"text",value:B.startLocation||"",onChange:ve,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-blue-50",placeholder:"e.g., Idukki, Kerala",title:"Pre-filled with sample data - you can edit if needed"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Location *"}),(0,cs.jsx)("input",{type:"text",value:B.endLocation||"",onChange:je,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-blue-50",placeholder:"e.g., Thiruvananthapuram, Kerala",title:"Pre-filled with sample data - you can edit if needed"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Route Number *"}),(0,cs.jsx)("input",{type:"text",value:B.routeNumber||"",onChange:Ne,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-blue-50",placeholder:"R001",title:"Pre-filled with sample data - you can edit if needed"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot *"}),(0,cs.jsxs)("select",{value:B.depotId||"",onChange:we,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-blue-50",title:"Auto-selected from available depots - you can change if needed",children:[(0,cs.jsx)("option",{value:"",children:"Select Depot"}),u.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.depotName},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bus Type"}),(0,cs.jsxs)("select",{value:B.busType||"standard",onChange:ke,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-blue-50",title:"Pre-selected as Standard - you can change if needed",children:[(0,cs.jsx)("option",{value:"standard",children:"Standard"}),(0,cs.jsx)("option",{value:"deluxe",children:"Deluxe"}),(0,cs.jsx)("option",{value:"ac",children:"AC"}),(0,cs.jsx)("option",{value:"sleeper",children:"Sleeper"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fare per KM (\u20b9)"}),(0,cs.jsx)("input",{type:"number",step:"0.1",min:"0",value:B.farePerKm||2.5,onChange:Ae,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-blue-50",placeholder:"2.5",title:"Pre-filled with \u20b92.5 per km - you can adjust if needed"})]})]}),(0,cs.jsxs)("div",{className:"mt-6 text-center space-y-4",children:[(0,cs.jsxs)("button",{onClick:ue,disabled:U||!B.startLocation||!B.endLocation,className:"px-8 py-3 bg-purple-600 text-white font-semibold rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center space-x-2 mx-auto",children:[U?(0,cs.jsx)(Od.A,{className:"w-4 h-4 animate-spin"}):(0,cs.jsx)(pd,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:U?"Generating Route...":"Generate Route & Extract Stops"})]}),(0,cs.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,cs.jsxs)("p",{children:["\u2728 ",(0,cs.jsx)("strong",{children:"Ready to use!"})," All fields are pre-filled with sample data."]}),(0,cs.jsx)("p",{children:'Just click "Generate Route" above to create your first route!'})]})]})]}),B.autoGeneratedStops.length>0&&(0,cs.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-6 border border-green-200",children:[(0,cs.jsxs)("h4",{className:"text-xl font-bold text-green-900 mb-4 flex items-center",children:[(0,cs.jsx)("div",{className:"p-1.5 bg-green-100 rounded-lg mr-2",children:(0,cs.jsx)(Ad,{className:"w-5 h-5 text-green-600"})}),"Generated Route Details"]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Total Distance"}),(0,cs.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[B.totalDistance.toFixed(1)," km"]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Estimated Duration"}),(0,cs.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[Math.floor(B.estimatedDuration/60),"h ",B.estimatedDuration%60,"m"]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Total Fare"}),(0,cs.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["\u20b9",(B.totalDistance*B.farePerKm).toFixed(0)]})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[(0,cs.jsxs)("h5",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[(0,cs.jsx)("div",{className:"p-1.5 bg-green-100 rounded-lg mr-2",children:(0,cs.jsx)(gs.A,{className:"w-4 h-4 text-green-600"})}),"Auto-Generated Stops (",B.autoGeneratedStops.length,")"]}),(0,cs.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:B.autoGeneratedStops.map((e,t)=>(0,cs.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"w-6 h-6 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center text-xs font-bold",children:e.stopNumber}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"font-medium text-gray-900",children:e.stopName}),(0,cs.jsx)("div",{className:"text-sm text-gray-600",children:e.city})]})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsxs)("div",{className:"font-medium text-gray-900",children:[e.distanceFromStart.toFixed(1)," km"]}),(0,cs.jsxs)("div",{className:"text-sm text-green-600 font-semibold",children:["\u20b9",(e.distanceFromStart*B.farePerKm).toFixed(0)]})]})]},t))})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[(0,cs.jsx)("button",{onClick:()=>F(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,cs.jsxs)("button",{onClick:he,disabled:m||!B.routeNumber||!B.depotId||0===B.autoGeneratedStops.length,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[m?(0,cs.jsx)(Od.A,{className:"w-4 h-4 animate-spin"}):(0,cs.jsx)(Uh.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Save Route"})]})]})]})]})}):null),Ce=()=>(0,cs.jsx)(Md,{children:Y&&(0,cs.jsx)(ed.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>$(!1),children:(0,cs.jsxs)(ed.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,cs.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 flex items-center space-x-2",children:[(0,cs.jsx)(ws,{className:"w-6 h-6 text-purple-600"}),(0,cs.jsx)("span",{children:"AI-Powered Auto Scheduler"})]}),(0,cs.jsx)("button",{onClick:()=>$(!1),className:"text-gray-400 hover:text-gray-600",children:(0,cs.jsx)(Bs.A,{className:"w-6 h-6"})})]})}),(0,cs.jsxs)("div",{className:"p-6 space-y-6",children:[(0,cs.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,cs.jsx)("h4",{className:"font-semibold text-purple-800 mb-2",children:"\ud83d\ude80 Intelligent Scheduling"}),(0,cs.jsx)("p",{className:"text-purple-700 text-sm",children:"This will automatically schedule trips for all buses, assign optimal routes, and allocate drivers/conductors based on demand patterns and efficiency algorithms."})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Date *"}),(0,cs.jsx)("input",{type:"date",value:se.targetDate,onChange:e=>re(t=>(0,Ie.A)((0,Ie.A)({},t),{},{targetDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Trips per Route"}),(0,cs.jsx)("input",{type:"number",min:"1",max:"20",value:se.maxTripsPerRoute,onChange:e=>re(t=>(0,Ie.A)((0,Ie.A)({},t),{},{maxTripsPerRoute:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Gap (minutes)"}),(0,cs.jsx)("input",{type:"number",min:"15",max:"120",value:se.timeGap,onChange:e=>re(t=>(0,Ie.A)((0,Ie.A)({},t),{},{timeGap:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depots"}),(0,cs.jsx)("select",{multiple:!0,value:se.depotIds,onChange:e=>re(t=>(0,Ie.A)((0,Ie.A)({},t),{},{depotIds:Array.from(e.target.selectedOptions,e=>e.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:u.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.depotName},e._id))})]})]}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("input",{type:"checkbox",checked:se.autoAssignCrew,onChange:e=>re(t=>(0,Ie.A)((0,Ie.A)({},t),{},{autoAssignCrew:e.target.checked})),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Auto-assign drivers and conductors"})]}),(0,cs.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("input",{type:"checkbox",checked:se.autoAssignBuses,onChange:e=>re(t=>(0,Ie.A)((0,Ie.A)({},t),{},{autoAssignBuses:e.target.checked})),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Auto-assign buses to routes"})]}),(0,cs.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("input",{type:"checkbox",checked:se.generateReports,onChange:e=>re(t=>(0,Ie.A)((0,Ie.A)({},t),{},{generateReports:e.target.checked})),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Generate scheduling reports"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-end space-x-4",children:[(0,cs.jsx)("button",{onClick:()=>$(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,cs.jsxs)("button",{onClick:le,disabled:m||!se.targetDate,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[m?(0,cs.jsx)(Od.A,{className:"w-4 h-4 animate-spin"}):(0,cs.jsx)(ws,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Start Auto Scheduling"})]})]})]})]})})}),_e=async e=>{try{var t;p(!0);const s=e?new Date(e):new Date,r=new Date(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0,0).toISOString(),a=new Date(s.getFullYear(),s.getMonth(),s.getDate(),23,59,59,999).toISOString(),n=new URLSearchParams;n.set("page","1"),n.set("limit","1000"),n.set("status","scheduled"),n.set("dateFrom",r),n.set("dateTo",a);const i=await(0,xs.nr)("/api/admin/trips?"+n.toString(),{suppressError:!0}),o=(null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.data)||(null===i||void 0===i?void 0:i.data)||{},l=(o.trips||o.data||[]||[]).map(e=>e._id||e.id).filter(Boolean);if(!Array.isArray(l)||0===l.length)return void(0,Oe.oR)("No scheduled trips found for the selected date");let c=0,d=0;const u=[...l],h=10,m=async()=>{const e=u.splice(0,h);await Promise.all(e.map(async e=>{const t=await(0,xs.nr)("/api/admin/trips/".concat(e),{method:"PUT",body:JSON.stringify({status:"running"})});null!==t&&void 0!==t&&t.ok||null!==t&&void 0!==t&&t.success?c++:d++}))};for(;u.length>0;)await m();Oe.oR.success("Started ".concat(c," trips").concat(d?", ".concat(d," failed"):"")),y("running"),P("live"),v(e),await oe()}catch(qU){console.error(qU),Oe.oR.error("Failed to start trips")}finally{p(!1)}};return(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Streamlined Trip Management"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Intelligent trip scheduling with AI-powered automation"})]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsxs)("button",{onClick:oe,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(Od.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Refresh"})]}),(0,cs.jsxs)("button",{onClick:()=>{"live"!==T?(P("live"),oe()):(P("all"),oe())},className:"px-4 py-2 rounded-lg transition-colors flex items-center space-x-2 ".concat("live"===T?"bg-green-600 text-white hover:bg-green-700":"bg-green-50 text-green-700 hover:bg-green-100"),title:"Show trips currently running",children:[(0,cs.jsx)(md.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"live"===T?"Live: On":"Live Trips"})]}),(0,cs.jsxs)("button",{onClick:()=>_e(b||(new Date).toISOString().slice(0,10)),className:"px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors flex items-center space-x-2",title:"Start all scheduled trips for the selected date",children:[(0,cs.jsx)(md.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Start All (Date)"})]})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Trips"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:A})]}),(0,cs.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,cs.jsx)(fs.A,{className:"w-6 h-6 text-blue-600"})})]})}),(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 cursor-pointer",onClick:()=>{y("scheduled"),P("all")},children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Scheduled"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:e.filter(e=>"scheduled"===e.status).length})]}),(0,cs.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,cs.jsx)(sd.A,{className:"w-6 h-6 text-blue-600"})})]})}),(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 cursor-pointer",onClick:()=>{y("running"),P("all")},children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Running"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>"running"===e.status).length})]}),(0,cs.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,cs.jsx)(md.A,{className:"w-6 h-6 text-green-600"})})]})}),(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 cursor-pointer",onClick:()=>{y("completed"),P("all")},children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-gray-600",children:e.filter(e=>"completed"===e.status).length})]}),(0,cs.jsx)("div",{className:"p-3 bg-gray-100 rounded-lg",children:(0,cs.jsx)(jd.A,{className:"w-6 h-6 text-gray-600"})})]})})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"}),X.length>0&&(0,cs.jsx)("div",{className:"flex items-center space-x-3",children:(0,cs.jsxs)("span",{className:"text-sm text-gray-600",children:[X.length," trips selected"]})})]}),(0,cs.jsxs)("div",{className:"mb-6",children:[(0,cs.jsxs)("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center",children:[(0,cs.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Trip Creation & Management"]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,cs.jsxs)("button",{onClick:()=>H(!0),className:"p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,cs.jsx)(bu.A,{className:"w-5 h-5 text-blue-600"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"font-semibold text-blue-900",children:"Add Single Trip"}),(0,cs.jsx)("p",{className:"text-sm text-blue-700",children:"Add one trip with specific details"})]})]}),(0,cs.jsxs)("button",{onClick:()=>F(!0),className:"p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,cs.jsx)(As.A,{className:"w-5 h-5 text-purple-600"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"font-semibold text-purple-900",children:"Smart Route Builder"}),(0,cs.jsx)("p",{className:"text-sm text-purple-700",children:"AI-powered route generation with auto-stops"})]})]}),(0,cs.jsxs)("button",{onClick:async()=>{try{const e=fe.map(e=>{const t=s.find(t=>t._id===e.routeId),r=n.find(t=>t._id===e.busId),a=o.find(t=>t._id===e.driverId),i=c.find(t=>t._id===e.conductorId);return{tripId:e._id,routeNumber:(null===t||void 0===t?void 0:t.routeNumber)||"",routeName:(null===t||void 0===t?void 0:t.routeName)||"",busNumber:(null===r||void 0===r?void 0:r.busNumber)||"",driverName:(null===a||void 0===a?void 0:a.name)||"",conductorName:(null===i||void 0===i?void 0:i.name)||"",serviceDate:e.serviceDate,startTime:e.startTime,endTime:e.endTime,fare:e.fare,capacity:e.capacity,status:e.status}}),t=Object.keys(e[0]||{tripId:"",routeNumber:"",routeName:"",busNumber:"",driverName:"",conductorName:"",serviceDate:"",startTime:"",endTime:"",fare:"",capacity:"",status:""}),r=[t.join(","),...e.map(e=>t.map(t=>{var s;return String(null!==(s=e[t])&&void 0!==s?s:"").replace(/"/g,'""')}).map(e=>e.includes(",")?'"'.concat(e,'"'):e).join(","))].join("\n"),a=new Blob([r],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(a),l=document.createElement("a");l.href=i,l.download="trips.csv",l.click(),URL.revokeObjectURL(i),Oe.oR.success("Trips exported to CSV")}catch(qU){console.error(qU),Oe.oR.error("Export failed")}},className:"p-4 bg-orange-50 rounded-lg hover:bg-orange-100 transition-colors flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,cs.jsx)(hd.A,{className:"w-5 h-5 text-orange-600"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"font-semibold text-orange-900",children:"Export Trips"}),(0,cs.jsx)("p",{className:"text-sm text-orange-700",children:"Export trip data for analysis"})]})]})]})]}),(0,cs.jsxs)("div",{className:"mb-6",children:[(0,cs.jsxs)("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center",children:[(0,cs.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"AI-Powered Scheduling"]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,cs.jsxs)("button",{onClick:()=>$(!0),className:"p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,cs.jsx)(ws,{className:"w-5 h-5 text-purple-600"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"font-semibold text-purple-900",children:"AI Auto Scheduler"}),(0,cs.jsx)("p",{className:"text-sm text-purple-700",children:"Intelligent mass scheduling"})]})]}),(0,cs.jsxs)("button",{onClick:async()=>{try{p(!0);const e=(new Date).toISOString().slice(0,10),t=await(0,xs.nr)("/api/auto-scheduler/schedule-all",{method:"POST",body:JSON.stringify({startDate:e,endDate:e,options:{enableOptimization:!0}})});null!==t&&void 0!==t&&t.ok?(Oe.oR.success("Scheduled all buses for today"),await _e(e)):Oe.oR.error((null===t||void 0===t?void 0:t.message)||"Scheduling failed")}catch(qU){console.error(qU),Oe.oR.error("Scheduling failed")}finally{p(!1)}},className:"p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,cs.jsx)(md.A,{className:"w-5 h-5 text-green-600"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"font-semibold text-green-900",children:"Schedule All Buses (Today)"}),(0,cs.jsx)("p",{className:"text-sm text-green-700",children:"Auto-assign crew & buses"})]})]}),(0,cs.jsxs)("button",{onClick:async()=>{try{var e;p(!0);const t=(new Date).toISOString().slice(0,10),s=await(0,xs.nr)("/api/auto-scheduler/mass-schedule",{method:"POST",body:JSON.stringify({date:t,maxTripsPerRoute:4,timeGap:30,autoAssignCrew:!0,autoAssignBuses:!0,optimizeForDemand:!0,region:"KERALA"})});null!==s&&void 0!==s&&s.ok||null!==s&&void 0!==s&&null!==(e=s.data)&&void 0!==e&&e.success?(Oe.oR.success("Scheduled Kerala routes for today"),await _e(t)):Oe.oR.error((null===s||void 0===s?void 0:s.message)||"Scheduling failed")}catch(qU){console.error(qU),Oe.oR.error("Scheduling failed")}finally{p(!1)}},className:"p-4 bg-teal-50 rounded-lg hover:bg-teal-100 transition-colors flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"p-2 bg-teal-100 rounded-lg",children:(0,cs.jsx)(ws,{className:"w-5 h-5 text-teal-600"})}),(0,cs.jsxs)("div",{className:"text-left",children:[(0,cs.jsx)("h4",{className:"font-semibold text-teal-900",children:"Schedule Kerala Only (Today)"}),(0,cs.jsx)("p",{className:"text-sm text-teal-700",children:"All routes within Kerala"})]})]})]})]})]}),(0,cs.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(ys.A,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search trips...",value:x,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,cs.jsxs)("select",{value:f,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,cs.jsx)("option",{value:"all",children:"All Status"}),(0,cs.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,cs.jsx)("option",{value:"boarding",children:"Boarding"}),(0,cs.jsx)("option",{value:"running",children:"Running"}),(0,cs.jsx)("option",{value:"completed",children:"Completed"}),(0,cs.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),(0,cs.jsx)("input",{type:"date",value:b,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,cs.jsx)("div",{className:"flex items-end",children:(0,cs.jsxs)("button",{onClick:()=>{g(""),y("all"),v(""),_("all"),N(1)},className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center space-x-2",children:[(0,cs.jsx)(Kd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Clear Filters"})]})})]})}),(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,cs.jsxs)("div",{className:"text-sm text-gray-600",children:[A," total \xb7 Page ",j]}),(0,cs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,cs.jsx)("button",{onClick:()=>N(e=>Math.max(1,e-1)),disabled:1===j,className:"px-2 py-1 border rounded disabled:opacity-50",children:"Prev"}),(0,cs.jsx)("select",{value:w,onChange:e=>{N(1),k(parseInt(e.target.value)||24)},className:"px-2 py-1 border rounded",children:[12,24,48,96].map(e=>(0,cs.jsxs)("option",{value:e,children:[e,"/page"]},e))}),(0,cs.jsx)("button",{onClick:()=>N(e=>e+1),disabled:e.length<w&&j*w>=A,className:"px-2 py-1 border rounded disabled:opacity-50",children:"Next"})]})]}),(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:fe.map(e=>(0,cs.jsx)(be,{trip:e},e._id))}),0===fe.length&&(0,cs.jsxs)("div",{className:"text-center py-12",children:[(0,cs.jsx)(fs.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No trips found"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search or create some trips."})]}),(0,cs.jsx)(Ce,{}),(0,cs.jsx)(Se,{},"route-builder-modal"),E&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl p-6 w-full max-w-xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 flex items-center space-x-2",children:["now"===M?(0,cs.jsx)(Lh,{className:"w-5 h-5 text-purple-600"}):(0,cs.jsx)(RV,{className:"w-5 h-5 text-gray-700"}),(0,cs.jsx)("span",{children:"now"===M?"Assign Now":"Assign for Specific Date"})]}),(0,cs.jsx)("button",{onClick:()=>D(!1),className:"p-1 text-gray-500 hover:text-gray-700",children:(0,cs.jsx)(Bs.A,{className:"w-5 h-5"})})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Route *"}),(0,cs.jsxs)("select",{value:R.routeId,onChange:e=>I((0,Ie.A)((0,Ie.A)({},R),{},{routeId:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"",children:"Select route"}),s.map(e=>{var t,s,r,a;return(0,cs.jsxs)("option",{value:e._id,children:[e.routeNumber," - ",e.routeName," (",e.startPlace||(null===(t=e.startingPoint)||void 0===t?void 0:t.location)||(null===(s=e.startingPoint)||void 0===s?void 0:s.city)," \u2192 ",e.endPlace||(null===(r=e.endingPoint)||void 0===r?void 0:r.location)||(null===(a=e.endingPoint)||void 0===a?void 0:a.city),")"]},e._id)})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Bus *"}),(0,cs.jsxs)("select",{value:R.busId,onChange:e=>I((0,Ie.A)((0,Ie.A)({},R),{},{busId:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"",children:"Select bus"}),n.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.busNumber},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Driver *"}),(0,cs.jsxs)("select",{value:R.driverId,onChange:e=>I((0,Ie.A)((0,Ie.A)({},R),{},{driverId:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"",children:"Select driver"}),o.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Date *"}),(0,cs.jsx)("input",{type:"date",value:R.scheduledDate,onChange:e=>I((0,Ie.A)((0,Ie.A)({},R),{},{scheduledDate:e.target.value})),className:"w-full border rounded-lg px-3 py-2"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Time *"}),(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(Vp,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,cs.jsx)("input",{type:"time",value:R.scheduledTime,onChange:e=>I((0,Ie.A)((0,Ie.A)({},R),{},{scheduledTime:e.target.value})),className:"w-full pl-9 border rounded-lg px-3 py-2"})]})]})]}),(0,cs.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,cs.jsx)("button",{onClick:()=>D(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,cs.jsx)("button",{onClick:async()=>{try{if(!R.routeId||!R.busId||!R.driverId)return void Oe.oR.error("Route, bus and driver are required");if(!R.scheduledDate||!R.scheduledTime)return void Oe.oR.error("Please select date and time");p(!0);const e=await(0,xs.nr)("/api/admin/assign-trip",{method:"POST",body:JSON.stringify({driverId:R.driverId,routeId:R.routeId,busId:R.busId,tripId:R.tripId||void 0,scheduledDate:R.scheduledDate,scheduledTime:R.scheduledTime})});null!==e&&void 0!==e&&e.ok||null!==e&&void 0!==e&&e.success?(Oe.oR.success("Assignment saved"),D(!1),oe()):Oe.oR.error((null===e||void 0===e?void 0:e.message)||"Failed to assign")}catch(qU){console.error(qU),Oe.oR.error("Failed to assign")}finally{p(!1)}},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Assign"})]})]})}),W&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl p-6 w-full max-w-3xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Add Single Trip"}),(0,cs.jsx)("button",{onClick:()=>H(!1),className:"p-1 text-gray-500 hover:text-gray-700",children:(0,cs.jsx)(Bs.A,{className:"w-5 h-5"})})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Route *"}),(0,cs.jsxs)("select",{value:ee.routeId,onChange:e=>te((0,Ie.A)((0,Ie.A)({},ee),{},{routeId:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"",children:"Select route"}),s.map(e=>{var t,s,r,a;return(0,cs.jsxs)("option",{value:e._id,children:[e.routeNumber," - ",e.routeName," (",e.startPlace||(null===(t=e.startingPoint)||void 0===t?void 0:t.location)||(null===(s=e.startingPoint)||void 0===s?void 0:s.city)," \u2192 ",e.endPlace||(null===(r=e.endingPoint)||void 0===r?void 0:r.location)||(null===(a=e.endingPoint)||void 0===a?void 0:a.city),")"]},e._id)})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Bus"}),(0,cs.jsxs)("select",{value:ee.busId,onChange:e=>te((0,Ie.A)((0,Ie.A)({},ee),{},{busId:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"",children:"Select bus"}),n.map(e=>{var t;return(0,cs.jsxs)("option",{value:e._id,children:[e.busNumber," (",(null===(t=e.capacity)||void 0===t?void 0:t.total)||0," seats)"]},e._id)})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Driver"}),(0,cs.jsxs)("select",{value:ee.driverId,onChange:e=>te((0,Ie.A)((0,Ie.A)({},ee),{},{driverId:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"",children:"Select driver"}),o.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Conductor"}),(0,cs.jsxs)("select",{value:ee.conductorId,onChange:e=>te((0,Ie.A)((0,Ie.A)({},ee),{},{conductorId:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"",children:"Select conductor"}),c.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Service Date *"}),(0,cs.jsx)("input",{type:"date",value:ee.serviceDate,onChange:e=>te((0,Ie.A)((0,Ie.A)({},ee),{},{serviceDate:e.target.value})),className:"w-full border rounded-lg px-3 py-2"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Start Time *"}),(0,cs.jsx)("input",{type:"time",value:ee.startTime,onChange:e=>te((0,Ie.A)((0,Ie.A)({},ee),{},{startTime:e.target.value})),className:"w-full border rounded-lg px-3 py-2"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"End Time"}),(0,cs.jsx)("input",{type:"time",value:ee.endTime,onChange:e=>te((0,Ie.A)((0,Ie.A)({},ee),{},{endTime:e.target.value})),className:"w-full border rounded-lg px-3 py-2"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Fare (\u20b9)"}),(0,cs.jsx)("input",{type:"number",value:ee.fare,onChange:e=>te((0,Ie.A)((0,Ie.A)({},ee),{},{fare:e.target.value})),className:"w-full border rounded-lg px-3 py-2"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Capacity"}),(0,cs.jsx)("input",{type:"number",value:ee.capacity,onChange:e=>te((0,Ie.A)((0,Ie.A)({},ee),{},{capacity:e.target.value})),className:"w-full border rounded-lg px-3 py-2"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Status"}),(0,cs.jsxs)("select",{value:ee.status,onChange:e=>te((0,Ie.A)((0,Ie.A)({},ee),{},{status:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,cs.jsx)("option",{value:"boarding",children:"Boarding"}),(0,cs.jsx)("option",{value:"running",children:"Running"}),(0,cs.jsx)("option",{value:"completed",children:"Completed"}),(0,cs.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})]}),(0,cs.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,cs.jsx)("button",{onClick:()=>H(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,cs.jsx)("button",{onClick:async()=>{try{if(!ee.routeId||!ee.serviceDate||!ee.startTime)return void Oe.oR.error("Route, date, and start time are required");p(!0);const e=(0,Ie.A)((0,Ie.A)({},ee),{},{fare:Number(ee.fare)||0,capacity:Number(ee.capacity)||0}),t=await(0,xs.nr)("/api/admin/trips",{method:"POST",body:JSON.stringify(e)});null!==t&&void 0!==t&&t.ok||null!==t&&void 0!==t&&t.success?(Oe.oR.success("Trip added successfully"),H(!1),pe(),oe()):Oe.oR.error((null===t||void 0===t?void 0:t.message)||"Failed to add trip")}catch(e){console.error("Error adding trip:",e),Oe.oR.error("Failed to add trip")}finally{p(!1)}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Trip"})]})]})}),q&&J&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl p-6 w-full max-w-3xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Edit Trip"}),(0,cs.jsx)("button",{onClick:()=>G(!1),className:"p-1 text-gray-500 hover:text-gray-700",children:(0,cs.jsx)(Bs.A,{className:"w-5 h-5"})})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Route *"}),(0,cs.jsxs)("select",{value:ee.routeId,onChange:e=>te((0,Ie.A)((0,Ie.A)({},ee),{},{routeId:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"",children:"Select route"}),s.map(e=>{var t,s,r,a;return(0,cs.jsxs)("option",{value:e._id,children:[e.routeNumber," - ",e.routeName," (",e.startPlace||(null===(t=e.startingPoint)||void 0===t?void 0:t.location)||(null===(s=e.startingPoint)||void 0===s?void 0:s.city)," \u2192 ",e.endPlace||(null===(r=e.endingPoint)||void 0===r?void 0:r.location)||(null===(a=e.endingPoint)||void 0===a?void 0:a.city),")"]},e._id)})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Bus"}),(0,cs.jsxs)("select",{value:ee.busId,onChange:e=>te((0,Ie.A)((0,Ie.A)({},ee),{},{busId:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"",children:"Select bus"}),n.map(e=>{var t;return(0,cs.jsxs)("option",{value:e._id,children:[e.busNumber," (",(null===(t=e.capacity)||void 0===t?void 0:t.total)||0," seats)"]},e._id)})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Driver"}),(0,cs.jsxs)("select",{value:ee.driverId,onChange:e=>te((0,Ie.A)((0,Ie.A)({},ee),{},{driverId:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"",children:"Select driver"}),o.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Conductor"}),(0,cs.jsxs)("select",{value:ee.conductorId,onChange:e=>te((0,Ie.A)((0,Ie.A)({},ee),{},{conductorId:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"",children:"Select conductor"}),c.map(e=>(0,cs.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Service Date *"}),(0,cs.jsx)("input",{type:"date",value:ee.serviceDate,onChange:e=>te((0,Ie.A)((0,Ie.A)({},ee),{},{serviceDate:e.target.value})),className:"w-full border rounded-lg px-3 py-2"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Start Time *"}),(0,cs.jsx)("input",{type:"time",value:ee.startTime,onChange:e=>te((0,Ie.A)((0,Ie.A)({},ee),{},{startTime:e.target.value})),className:"w-full border rounded-lg px-3 py-2"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"End Time"}),(0,cs.jsx)("input",{type:"time",value:ee.endTime,onChange:e=>te((0,Ie.A)((0,Ie.A)({},ee),{},{endTime:e.target.value})),className:"w-full border rounded-lg px-3 py-2"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Fare (\u20b9)"}),(0,cs.jsx)("input",{type:"number",value:ee.fare,onChange:e=>te((0,Ie.A)((0,Ie.A)({},ee),{},{fare:e.target.value})),className:"w-full border rounded-lg px-3 py-2"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Status"}),(0,cs.jsxs)("select",{value:ee.status,onChange:e=>te((0,Ie.A)((0,Ie.A)({},ee),{},{status:e.target.value})),className:"w-full border rounded-lg px-3 py-2",children:[(0,cs.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,cs.jsx)("option",{value:"boarding",children:"Boarding"}),(0,cs.jsx)("option",{value:"running",children:"Running"}),(0,cs.jsx)("option",{value:"completed",children:"Completed"}),(0,cs.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})]}),(0,cs.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,cs.jsx)("button",{onClick:()=>G(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,cs.jsx)("button",{onClick:async()=>{try{if(null===J||void 0===J||!J._id)return;p(!0);const e=e=>"string"===typeof e&&/^[0-9a-fA-F]{24}$/.test(e),t=(0,Ie.A)({},ee);if(t.busId=e(t.busId)?t.busId:void 0,t.driverId=e(t.driverId)?t.driverId:void 0,t.conductorId=e(t.conductorId)?t.conductorId:void 0,t.routeId=e(t.routeId)?t.routeId:void 0,"string"===typeof t.serviceDate){const e=t.serviceDate.match(/^(\d{4})-(\d{2})-(\d{2})$/);t.serviceDate=e?t.serviceDate:void 0}const s=e=>"string"===typeof e&&e.length>=5?e.slice(0,5):void 0;t.startTime=s(t.startTime),t.endTime=s(t.endTime),void 0!==t.fare&&(t.fare=Number(t.fare)),void 0!==t.capacity&&(t.capacity=Number(t.capacity));const r=Object.entries(t).reduce((e,t)=>{let[s,r]=t;return void 0!==r&&""!==r&&(e[s]=r),e},{}),a=await(0,xs.nr)("/api/admin/trips/".concat(J._id),{method:"PUT",body:JSON.stringify(r)});null!==a&&void 0!==a&&a.ok||null!==a&&void 0!==a&&a.success?(Oe.oR.success("Trip updated"),G(!1),Q(null),oe()):Oe.oR.error((null===a||void 0===a?void 0:a.message)||"Failed to update trip")}catch(qU){console.error(qU),Oe.oR.error("Failed to update trip")}finally{p(!1)}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})})]})},LV=(0,Ns.A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]),FV=(0,Ns.A)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),BV=e=>{let{children:t}=e;const{user:s,logout:a}=(0,Re.A)(),n=Z(),i=te(),[o,l]=(0,r.useState)(!1),c=[{path:"/passenger/dashboard",label:"Dashboard",icon:LV},{path:"/passenger/booking",label:"Booking",icon:ys.A},{path:"/passenger/tickets",label:"Tickets",icon:Cs.A},{path:"/passenger/wallet",label:"Wallet",icon:FV},{path:"/passenger/profile",label:"Profile",icon:Ts.A}],d=()=>{a(),i("/login")},u=e=>n.pathname===e;return(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsxs)("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50",children:[(0,cs.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,cs.jsxs)(Pe,{to:"/passenger/dashboard",className:"flex items-center space-x-2",children:[(0,cs.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-pink-600 to-pink-700 rounded-lg flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-white font-bold text-sm",children:"Y"})}),(0,cs.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"YATRIK"})]}),(0,cs.jsx)("nav",{className:"hidden md:flex items-center space-x-8",children:c.map(e=>{const t=e.icon;return(0,cs.jsxs)(Pe,{to:e.path,className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat(u(e.path)?"bg-pink-50 text-pink-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,cs.jsx)(t,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:e.label})]},e.path)})}),(0,cs.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,cs.jsxs)("div",{className:"text-sm text-gray-600",children:["Welcome, ",(0,cs.jsx)("span",{className:"font-medium text-gray-900",children:(null===s||void 0===s?void 0:s.name)||"User"})]}),(0,cs.jsxs)("button",{onClick:d,className:"flex items-center space-x-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white text-sm font-semibold rounded-lg transition-all duration-200 shadow-sm hover:shadow-md",children:[(0,cs.jsx)(zs,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Logout"})]})]}),(0,cs.jsx)("button",{onClick:()=>l(!o),className:"md:hidden p-2 rounded-lg text-gray-600 hover:text-gray-900 hover:bg-gray-50",children:o?(0,cs.jsx)(Bs.A,{className:"w-6 h-6"}):(0,cs.jsx)(Us,{className:"w-6 h-6"})})]})}),o&&(0,cs.jsx)("div",{className:"md:hidden border-t border-gray-200 bg-white",children:(0,cs.jsxs)("div",{className:"px-4 py-4 space-y-2",children:[c.map(e=>{const t=e.icon;return(0,cs.jsxs)(Pe,{to:e.path,onClick:()=>l(!1),className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat(u(e.path)?"bg-pink-50 text-pink-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,cs.jsx)(t,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:e.label})]},e.path)}),(0,cs.jsxs)("div",{className:"border-t border-gray-200 pt-2 mt-2",children:[(0,cs.jsxs)("div",{className:"px-3 py-2 text-sm text-gray-600",children:["Welcome, ",(0,cs.jsx)("span",{className:"font-medium text-gray-900",children:(null===s||void 0===s?void 0:s.name)||"User"})]}),(0,cs.jsxs)("button",{onClick:d,className:"flex items-center space-x-3 px-4 py-3 bg-red-500 hover:bg-red-600 text-white text-sm font-semibold rounded-lg transition-all duration-200 w-full shadow-sm",children:[(0,cs.jsx)(zs,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Logout"})]})]})]})})]}),(0,cs.jsx)("main",{className:"flex-1",children:t}),(0,cs.jsx)("footer",{className:"bg-white border-t border-gray-200 mt-auto",children:(0,cs.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,cs.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[(0,cs.jsx)("div",{className:"text-sm text-gray-600",children:"\xa9 2025 Yatrik ERP | All rights reserved"}),(0,cs.jsxs)("div",{className:"flex items-center space-x-6 mt-4 md:mt-0",children:[(0,cs.jsx)(Pe,{to:"/passenger/dashboard",className:"text-sm text-gray-600 hover:text-gray-900",children:"Dashboard"}),(0,cs.jsx)(Pe,{to:"/passenger/booking",className:"text-sm text-gray-600 hover:text-gray-900",children:"Booking"}),(0,cs.jsx)(Pe,{to:"/passenger/tickets",className:"text-sm text-gray-600 hover:text-gray-900",children:"Tickets"}),(0,cs.jsx)(Pe,{to:"/passenger/wallet",className:"text-sm text-gray-600 hover:text-gray-900",children:"Wallet"}),(0,cs.jsx)(Pe,{to:"/passenger/profile",className:"text-sm text-gray-600 hover:text-gray-900",children:"Profile"})]})]})})})]})},zV=e=>{let{className:t="",compact:s=!1}=e;const[a,n]=(0,r.useState)({from:"",to:"",journeyDate:""}),[i,o]=(0,r.useState)({from:[],to:[]}),[l,c]=(0,r.useState)({from:!1,to:!1}),[d,u]=(0,r.useState)({from:-1,to:-1}),[h,m]=(0,r.useState)({from:!1,to:!1}),[p,x]=(0,r.useState)(!1),g=(0,r.useRef)(null),f=(0,r.useRef)(null),y=(0,r.useRef)(null),b=te();(0,r.useEffect)(()=>{const e=new Date;e.setDate(e.getDate()+1),n(t=>(0,Ie.A)((0,Ie.A)({},t),{},{journeyDate:e.toISOString().split("T")[0]}))},[]);const v=(0,r.useCallback)((e,t)=>{y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{j(e,t)},300)},[]),j=async(e,t)=>{if(!e||e.length<1)return o(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:[]})),void c(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:!1}));m(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:!0}));try{const s=await fetch("/api/search/autocomplete?q=".concat(encodeURIComponent(e)));if(s.ok){const e=await s.json();e.success&&(o(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[t]:e.data.suggestions})),c(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:!0})),u(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:-1})))}}catch(s){console.error("Failed to fetch suggestions:",s)}finally{m(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:!1}))}},N=(e,t)=>{n(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t})),t.length>=1?v(t,e):(o(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:[]})),c(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:!1})))},w=(e,t)=>{var s;(n(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[t]:e.city})),c(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:!1})),u(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:-1})),"from"===t)&&(null===(s=f.current)||void 0===s||s.focus())},k=(e,t)=>{const s=i[t],r=d[t];if(l[t]&&0!==s.length)switch(e.key){case"ArrowDown":e.preventDefault(),u(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:Math.min(r+1,s.length-1)}));break;case"ArrowUp":e.preventDefault(),u(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:Math.max(r-1,-1)}));break;case"Enter":e.preventDefault(),r>=0&&r<s.length?w(s[r],t):A();break;case"Escape":c(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:!1})),u(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:-1}))}},A=async()=>{if(a.from&&a.to&&a.journeyDate)try{x(!0);const e=localStorage.getItem("token"),t=await fetch("/api/passenger/trips/search?from=".concat(encodeURIComponent(a.from),"&to=").concat(encodeURIComponent(a.to),"&date=").concat(a.journeyDate),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){const e=await t.json();if(e.success&&e.data.trips.length>0){const e=new URLSearchParams({from:a.from,to:a.to,date:a.journeyDate});b("/passenger/results?".concat(e.toString()))}else Oe.oR.error("No trips found for your search criteria")}else{const e=new URLSearchParams({from:a.from,to:a.to,date:a.journeyDate});b("/passenger/results?".concat(e.toString()))}}catch(e){console.error("Search error:",e),Oe.oR.error("Search failed. Please try again.")}finally{x(!1)}else Oe.oR.error("Please fill in all required fields")};return(0,r.useEffect)(()=>{const e=e=>{var t,s;null!==(t=g.current)&&void 0!==t&&t.contains(e.target)||null!==(s=f.current)&&void 0!==s&&s.contains(e.target)||(c({from:!1,to:!1}),u({from:-1,to:-1}))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,cs.jsxs)("div",{className:"quick-search ".concat(t),children:[(0,cs.jsxs)("div",{className:"search-form ".concat(s?"compact":""),children:[(0,cs.jsxs)("div",{className:"search-field",children:[(0,cs.jsx)("label",{className:"search-label",children:"From"}),(0,cs.jsxs)("div",{className:"input-container",children:[(0,cs.jsx)(gs.A,{className:"input-icon"}),(0,cs.jsx)("input",{ref:g,type:"text",value:a.from,onChange:e=>N("from",e.target.value),onKeyDown:e=>k(e,"from"),placeholder:"Enter departure location",className:"search-input",autoComplete:"off"}),h.from&&(0,cs.jsx)("div",{className:"loading-spinner",children:(0,cs.jsx)("div",{className:"spinner"})})]}),l.from&&i.from.length>0&&(0,cs.jsx)("div",{className:"suggestions-dropdown",children:i.from.map((e,t)=>(0,cs.jsxs)("div",{className:"suggestion-item ".concat(d.from===t?"selected":""),onClick:()=>w(e,"from"),onMouseEnter:()=>u(e=>(0,Ie.A)((0,Ie.A)({},e),{},{from:t})),children:[(0,cs.jsx)("div",{className:"suggestion-icon",children:"stop"===e.type?(0,cs.jsx)(Ad,{className:"w-4 h-4"}):"city"===e.type?(0,cs.jsx)(gs.A,{className:"w-4 h-4"}):(0,cs.jsx)(sd.A,{className:"w-4 h-4"})}),(0,cs.jsxs)("div",{className:"suggestion-content",children:[(0,cs.jsx)("div",{className:"suggestion-name",children:e.name}),(0,cs.jsxs)("div",{className:"suggestion-details",children:[e.city!==e.name&&e.city,e.state&&", ".concat(e.state),e.routeCount&&" \u2022 ".concat(e.routeCount," routes")]})]}),(0,cs.jsx)("div",{className:"suggestion-type",children:"stop"===e.type?"Stop":"city"===e.type?"City":"Route"})]},e.id))})]}),(0,cs.jsxs)("div",{className:"search-field",children:[(0,cs.jsx)("label",{className:"search-label",children:"To"}),(0,cs.jsxs)("div",{className:"input-container",children:[(0,cs.jsx)(gs.A,{className:"input-icon"}),(0,cs.jsx)("input",{ref:f,type:"text",value:a.to,onChange:e=>N("to",e.target.value),onKeyDown:e=>k(e,"to"),placeholder:"Enter destination location",className:"search-input",autoComplete:"off"}),h.to&&(0,cs.jsx)("div",{className:"loading-spinner",children:(0,cs.jsx)("div",{className:"spinner"})})]}),l.to&&i.to.length>0&&(0,cs.jsx)("div",{className:"suggestions-dropdown",children:i.to.map((e,t)=>(0,cs.jsxs)("div",{className:"suggestion-item ".concat(d.to===t?"selected":""),onClick:()=>w(e,"to"),onMouseEnter:()=>u(e=>(0,Ie.A)((0,Ie.A)({},e),{},{to:t})),children:[(0,cs.jsx)("div",{className:"suggestion-icon",children:"stop"===e.type?(0,cs.jsx)(Ad,{className:"w-4 h-4"}):"city"===e.type?(0,cs.jsx)(gs.A,{className:"w-4 h-4"}):(0,cs.jsx)(sd.A,{className:"w-4 h-4"})}),(0,cs.jsxs)("div",{className:"suggestion-content",children:[(0,cs.jsx)("div",{className:"suggestion-name",children:e.name}),(0,cs.jsxs)("div",{className:"suggestion-details",children:[e.city!==e.name&&e.city,e.state&&", ".concat(e.state),e.routeCount&&" \u2022 ".concat(e.routeCount," routes")]})]}),(0,cs.jsx)("div",{className:"suggestion-type",children:"stop"===e.type?"Stop":"city"===e.type?"City":"Route"})]},e.id))})]}),(0,cs.jsxs)("div",{className:"search-field",children:[(0,cs.jsx)("label",{className:"search-label",children:"Date"}),(0,cs.jsxs)("div",{className:"input-container",children:[(0,cs.jsx)(fs.A,{className:"input-icon"}),(0,cs.jsx)("input",{type:"date",value:a.journeyDate,onChange:e=>n(t=>(0,Ie.A)((0,Ie.A)({},t),{},{journeyDate:e.target.value})),min:(new Date).toISOString().split("T")[0],className:"search-input"})]})]}),(0,cs.jsx)("button",{onClick:A,disabled:p,className:"search-button",children:p?(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s?"":"Searching..."]}):(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)(ys.A,{className:"w-4 h-4"}),s?"":"Search"]})})]}),(0,cs.jsx)("style",{jsx:"true",children:"\n        .quick-search {\n          width: 100%;\n        }\n\n        .search-form {\n          display: grid;\n          gap: 16px;\n          grid-template-columns: 1fr 1fr auto auto;\n          align-items: end;\n          background: white;\n          padding: 20px;\n          border-radius: 16px;\n          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n          border: 1px solid #e2e8f0;\n        }\n\n        .search-form.compact {\n          grid-template-columns: 1fr 1fr auto auto;\n          padding: 16px;\n          gap: 12px;\n        }\n\n        .search-field {\n          position: relative;\n        }\n\n        .search-label {\n          display: block;\n          font-weight: 600;\n          color: #374151;\n          margin-bottom: 6px;\n          font-size: 14px;\n        }\n\n        .input-container {\n          position: relative;\n        }\n\n        .input-icon {\n          position: absolute;\n          left: 12px;\n          top: 50%;\n          transform: translateY(-50%);\n          width: 16px;\n          height: 16px;\n          color: #00BCD4;\n          z-index: 2;\n        }\n\n        .search-input {\n          width: 100%;\n          padding: 12px 12px 12px 38px;\n          border: 1px solid #e2e8f0;\n          border-radius: 12px;\n          color: #1f2937;\n          background: #ffffff;\n          font-size: 14px;\n          transition: box-shadow 0.15s ease, border-color 0.15s ease;\n        }\n\n        .search-input:focus {\n          outline: none;\n          border-color: #00BCD4;\n          box-shadow: 0 0 0 3px rgba(0, 188, 212, 0.15);\n        }\n\n        .search-input::placeholder {\n          color: #9ca3af;\n        }\n\n        .loading-spinner {\n          position: absolute;\n          right: 12px;\n          top: 50%;\n          transform: translateY(-50%);\n          z-index: 10;\n        }\n\n        .spinner {\n          width: 16px;\n          height: 16px;\n          border: 2px solid #e2e8f0;\n          border-top: 2px solid #00BCD4;\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        .suggestions-dropdown {\n          position: absolute;\n          top: 100%;\n          left: 0;\n          right: 0;\n          background: white;\n          border: 1px solid #e2e8f0;\n          border-radius: 12px;\n          box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1), 0 4px 10px rgba(0, 0, 0, 0.05);\n          z-index: 1000;\n          max-height: 300px;\n          overflow-y: auto;\n          margin-top: 4px;\n          backdrop-filter: blur(10px);\n          -webkit-backdrop-filter: blur(10px);\n          animation: slideDown 0.2s ease-out;\n        }\n\n        @keyframes slideDown {\n          from {\n            opacity: 0;\n            transform: translateY(-8px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n\n        .suggestion-item {\n          display: flex;\n          align-items: center;\n          padding: 12px 16px;\n          cursor: pointer;\n          transition: background-color 0.15s ease;\n          border-bottom: 1px solid #f1f5f9;\n        }\n\n        .suggestion-item:last-child {\n          border-bottom: none;\n        }\n\n        .suggestion-item:hover,\n        .suggestion-item.selected {\n          background-color: #f8fafc;\n        }\n\n        .suggestion-item.selected {\n          background-color: #e0f2fe;\n        }\n\n        .suggestion-icon {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          width: 32px;\n          height: 32px;\n          background-color: #f1f5f9;\n          border-radius: 8px;\n          margin-right: 12px;\n          color: #00BCD4;\n          flex-shrink: 0;\n        }\n\n        .suggestion-item.selected .suggestion-icon {\n          background-color: #bae6fd;\n          color: #0369a1;\n        }\n\n        .suggestion-content {\n          flex: 1;\n          min-width: 0;\n        }\n\n        .suggestion-name {\n          font-weight: 600;\n          color: #1f2937;\n          font-size: 14px;\n          margin-bottom: 2px;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n\n        .suggestion-details {\n          font-size: 12px;\n          color: #6b7280;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n\n        .suggestion-type {\n          font-size: 11px;\n          color: #9ca3af;\n          background-color: #f3f4f6;\n          padding: 2px 8px;\n          border-radius: 12px;\n          font-weight: 500;\n          margin-left: 8px;\n          flex-shrink: 0;\n        }\n\n        .suggestion-item.selected .suggestion-type {\n          background-color: #dbeafe;\n          color: #1e40af;\n        }\n\n        .search-button {\n          background: linear-gradient(135deg, #E91E63 0%, #FF4081 90%);\n          color: white;\n          border: none;\n          padding: 12px 20px;\n          border-radius: 12px;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          gap: 8px;\n          box-shadow: 0 4px 12px rgba(233, 30, 99, 0.3);\n          min-height: 44px;\n        }\n\n        .search-button:hover {\n          background: linear-gradient(135deg, #C2185B 0%, #E91E63 90%);\n          box-shadow: 0 6px 16px rgba(233, 30, 99, 0.4);\n          transform: translateY(-1px);\n        }\n\n        /* Mobile Responsive */\n        @media (max-width: 768px) {\n          .search-form {\n            grid-template-columns: 1fr;\n            gap: 12px;\n          }\n\n          .search-form.compact {\n            grid-template-columns: 1fr;\n          }\n\n          .search-button {\n            width: 100%;\n            padding: 14px 20px;\n          }\n        }\n\n        @media (max-width: 480px) {\n          .search-form {\n            padding: 16px;\n            border-radius: 12px;\n          }\n\n          .suggestions-dropdown {\n            border-radius: 16px;\n            margin-top: 6px;\n          }\n          \n          .suggestion-item {\n            padding: 14px 16px;\n          }\n          \n          .suggestion-icon {\n            width: 36px;\n            height: 36px;\n            margin-right: 14px;\n          }\n          \n          .suggestion-name {\n            font-size: 15px;\n          }\n          \n          .suggestion-details {\n            font-size: 13px;\n          }\n        }\n      "})]})},UV=e=>{let{isOpen:t,onClose:s}=e;const a=te(),[n,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(0);(0,r.useEffect)(()=>{t&&u()},[t]);const u=async()=>{try{l(!0);0===dh.getNotifications().length&&(dh.showBookingConfirmation({bookingId:"BK12345678",pnr:"PNR12345678",trip:{from:"Kochi",to:"Thiruvananthapuram",date:"2024-01-15",time:"08:00",seats:["U1","U2"]}}),dh.showPaymentSuccess({amount:900,bookingId:"BK12345678"}));const e=dh.getNotifications();i(e),d(dh.getUnreadCount())}catch(e){console.error("Error fetching notifications:",e)}finally{l(!1)}},h=e=>{switch((async e=>{try{dh.markAsRead(e),i(dh.getNotifications()),d(dh.getUnreadCount())}catch(t){console.error("Error marking notification as read:",t)}})(e.id),e.type){case"booking_confirmed":a("/passenger/ticket/".concat(e.data.pnr));break;case"payment_success":case"trip_reminder":a("/passenger/dashboard")}},m=e=>{switch(e){case"booking_confirmed":return(0,cs.jsx)(jd.A,{className:"w-5 h-5 text-green-600"});case"payment_success":return(0,cs.jsx)(jd.A,{className:"w-5 h-5 text-blue-600"});case"trip_reminder":return(0,cs.jsx)(fs.A,{className:"w-5 h-5 text-orange-600"});default:return(0,cs.jsx)(bd,{className:"w-5 h-5 text-gray-600"})}},p=e=>{const t=new Date-e,s=Math.floor(t/36e5),r=Math.floor(t/6e4);return s>24?e.toLocaleDateString():s>0?"".concat(s,"h ago"):"".concat(r,"m ago")};return t?(0,cs.jsxs)("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[(0,cs.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-25",onClick:s}),(0,cs.jsx)("div",{className:"absolute right-0 top-0 h-full w-96 bg-white shadow-xl",children:(0,cs.jsxs)("div",{className:"flex h-full flex-col",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-200 px-6 py-4",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-3",children:[(0,cs.jsx)(Vs,{className:"w-6 h-6 text-pink-600"}),(0,cs.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),c>0&&(0,cs.jsx)("span",{className:"bg-pink-600 text-white text-xs font-medium px-2 py-1 rounded-full",children:c})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[c>0&&(0,cs.jsx)("button",{onClick:async()=>{try{dh.markAllAsRead(),i(dh.getNotifications()),d(dh.getUnreadCount())}catch(e){console.error("Error marking all notifications as read:",e)}},className:"text-sm text-pink-600 hover:text-pink-700",children:"Mark all read"}),(0,cs.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,cs.jsx)(Bs.A,{className:"w-5 h-5"})})]})]}),(0,cs.jsx)("div",{className:"flex-1 overflow-y-auto",children:o?(0,cs.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,cs.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-600"})}):0===n.length?(0,cs.jsxs)("div",{className:"flex flex-col items-center justify-center h-32 text-gray-500",children:[(0,cs.jsx)(Vs,{className:"w-12 h-12 mb-4"}),(0,cs.jsx)("p",{children:"No notifications yet"})]}):(0,cs.jsx)("div",{className:"p-4 space-y-4",children:n.map(e=>(0,cs.jsx)("div",{className:"border rounded-lg p-4 cursor-pointer transition-all hover:shadow-md ".concat(e.read?"bg-white border-gray-200":"bg-pink-50 border-pink-200"),onClick:()=>h(e),children:(0,cs.jsxs)("div",{className:"flex items-start gap-3",children:[(0,cs.jsx)("div",{className:"flex-shrink-0 mt-1",children:m(e.type)}),(0,cs.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("h3",{className:"text-sm font-medium ".concat(e.read?"text-gray-700":"text-gray-900"),children:e.title}),(0,cs.jsx)("span",{className:"text-xs text-gray-500",children:p(e.timestamp)})]}),(0,cs.jsx)("p",{className:"text-sm mt-1 ".concat(e.read?"text-gray-600":"text-gray-700"),children:e.message}),"booking_confirmed"===e.type&&e.data.trip&&(0,cs.jsxs)("div",{className:"mt-3 p-3 bg-white rounded-lg border border-gray-100",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[(0,cs.jsx)(ks.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{className:"font-medium",children:"Trip Details"})]}),(0,cs.jsxs)("div",{className:"space-y-1 text-xs text-gray-600",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(gs.A,{className:"w-3 h-3"}),(0,cs.jsxs)("span",{children:[e.data.trip.from," \u2192 ",e.data.trip.to]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(fs.A,{className:"w-3 h-3"}),(0,cs.jsx)("span",{children:new Date(e.data.trip.date).toLocaleDateString()})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(sd.A,{className:"w-3 h-3"}),(0,cs.jsx)("span",{children:e.data.trip.time})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(Cs.A,{className:"w-3 h-3"}),(0,cs.jsxs)("span",{children:["Seats: ",e.data.trip.seats.join(", ")]})]})]})]}),(0,cs.jsx)("div",{className:"mt-3 flex gap-2",children:"booking_confirmed"===e.type&&(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsxs)("button",{onClick:t=>{t.stopPropagation(),a("/passenger/ticket/".concat(e.data.pnr))},className:"flex items-center gap-1 text-xs bg-pink-600 text-white px-3 py-1 rounded-full hover:bg-pink-700",children:[(0,cs.jsx)(Nu.A,{className:"w-3 h-3"}),"View Ticket"]}),(0,cs.jsxs)("button",{onClick:t=>{t.stopPropagation(),console.log("Download ticket:",e.data.pnr)},className:"flex items-center gap-1 text-xs bg-gray-600 text-white px-3 py-1 rounded-full hover:bg-gray-700",children:[(0,cs.jsx)(hd.A,{className:"w-3 h-3"}),"Download"]})]})})]})]})},e.id))})})]})})]}):null},VV=()=>{const[e,t]=(0,r.useState)(!1),[s,a]=(0,r.useState)(0);return(0,r.useEffect)(()=>{const e=dh.subscribe(e=>{a(dh.getUnreadCount())});return a(dh.getUnreadCount()),e},[]),(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsxs)("button",{onClick:()=>t(!0),className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",title:"Notifications",children:[(0,cs.jsx)(Vs,{className:"w-6 h-6"}),s>0&&(0,cs.jsx)("span",{className:"absolute -top-1 -right-1 bg-pink-600 text-white text-xs font-medium px-2 py-1 rounded-full min-w-[20px] h-5 flex items-center justify-center",children:s>99?"99+":s})]}),(0,cs.jsx)(UV,{isOpen:e,onClose:()=>t(!1)})]})},KV=()=>{const{user:e}=(0,Re.A)(),t=te(),[s,a]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(0),[c,d]=(0,r.useState)([]);(0,r.useEffect)(()=>{u(),h()},[]);const u=async()=>{try{const e=localStorage.getItem("token");if(!e)return void console.log("No token found for dashboard data");const t=await fetch("/api/passenger/dashboard",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){const e=await t.json();e.success&&(a(e.data.upcomingTrips||[]),i(e.data.recentActivity||[]),l(e.data.walletBalance||0))}else console.error("Failed to fetch dashboard data:",t.statusText),a([]),i([]),l(0)}catch(e){console.error("Error fetching dashboard data:",e),a([]),i([]),l(0)}},h=async()=>{try{d([{from:"Kochi",to:"Kollam",label:"Kochi \u2192 Kollam",route:"RT001"},{from:"Kochi",to:"Thiruvananthapuram",label:"Kochi \u2192 TVM",route:"KTV-001"},{from:"Kochi",to:"Kottayam",label:"Kochi \u2192 Kottayam",route:"KKT-001"},{from:"Kochi",to:"Palakkad",label:"Kochi \u2192 Palakkad",route:"KPL-001"},{from:"Thiruvananthapuram",to:"Kochi",label:"TVM \u2192 Kochi",route:"TVK-001"},{from:"Kollam",to:"Kochi",label:"Kollam \u2192 Kochi",route:"RT001"}])}catch(e){console.error("Error setting popular routes:",e),d([{from:"Kochi",to:"Kollam",label:"Kochi \u2192 Kollam",route:"RT001"},{from:"Kochi",to:"Thiruvananthapuram",label:"Kochi \u2192 TVM",route:"KTV-001"},{from:"Kochi",to:"Kottayam",label:"Kochi \u2192 Kottayam",route:"KKT-001"}])}},m=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";case"pending":return"bg-amber-100 text-amber-800";default:return"bg-gray-100 text-gray-800"}},p=e=>{const s=new Date;s.setDate(s.getDate()+1);const r=s.toISOString().split("T")[0];t("/passenger/results?from=".concat(encodeURIComponent(e.from),"&to=").concat(encodeURIComponent(e.to),"&date=").concat(r))};return(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,cs.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,cs.jsx)("div",{className:"mb-8",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome back, ",(null===e||void 0===e?void 0:e.name)||"Passenger","!"]}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Here's what's happening with your trips today"})]}),(0,cs.jsx)("div",{className:"flex items-center gap-4",children:(0,cs.jsx)(VV,{})})]})}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 mb-8",children:[(0,cs.jsxs)("div",{className:"text-center mb-6",children:[(0,cs.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Plan Your Next Journey"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Search and book your bus tickets with intelligent suggestions"})]}),(0,cs.jsx)(zV,{}),(0,cs.jsxs)("div",{className:"mt-6",children:[(0,cs.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3 text-center",children:"Popular Kerala Routes"}),(0,cs.jsx)("div",{className:"flex flex-wrap justify-center gap-2",children:c.length>0?c.map((e,t)=>(0,cs.jsx)("button",{onClick:()=>p(e),className:"px-3 py-1 bg-white/80 hover:bg-white text-gray-700 text-xs font-medium rounded-full border border-pink-200 hover:border-pink-300 transition-all duration-200 hover:shadow-sm",children:e.label},t)):(0,cs.jsx)("p",{className:"text-gray-500 text-sm",children:"Loading Kerala routes..."})}),(0,cs.jsx)("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Click any route to search for available trips"})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Book Trip"}),(0,cs.jsx)("p",{className:"text-gray-600 text-sm",children:"Search and book your journey"})]}),(0,cs.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-pink-100 to-pink-200 rounded-lg flex items-center justify-center",children:(0,cs.jsx)(ks.A,{className:"w-6 h-6 text-pink-600"})})]}),(0,cs.jsxs)("div",{className:"space-y-2",children:[(0,cs.jsxs)("button",{onClick:()=>t("/passenger/search"),className:"w-full bg-gradient-to-r from-pink-600 to-pink-700 text-white py-3 px-4 rounded-lg hover:from-pink-700 hover:to-pink-800 transition-all duration-200 flex items-center justify-center space-x-2 font-semibold",children:[(0,cs.jsx)(ys.A,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Search & Book Trip"})]}),(0,cs.jsxs)("button",{onClick:()=>t("/passenger/available-trips"),className:"w-full bg-white border border-pink-300 text-pink-600 py-2 px-4 rounded-lg hover:bg-pink-50 transition-all duration-200 flex items-center justify-center space-x-2 font-medium text-sm",children:[(0,cs.jsx)(ks.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"View All Available Trips"})]})]})]}),(0,cs.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Wallet Balance"}),(0,cs.jsxs)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:["\u20b9",o]}),(0,cs.jsx)("button",{className:"text-sm text-blue-600 hover:underline",children:"View Details \u2192"})]}),(0,cs.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-green-100 to-green-200 rounded-lg flex items-center justify-center",children:(0,cs.jsx)(FV,{className:"w-6 h-6 text-green-600"})})]})}),(0,cs.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"My Tickets"}),(0,cs.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"View and manage your bookings"}),(0,cs.jsx)("button",{className:"text-sm text-blue-600 hover:underline",children:"View All \u2192"})]}),(0,cs.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-100 to-blue-200 rounded-lg flex items-center justify-center",children:(0,cs.jsx)(Cs.A,{className:"w-6 h-6 text-blue-600"})})]})})]}),s.length>0&&(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Upcoming Trips"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Your confirmed bookings"})]}),(0,cs.jsx)("button",{onClick:()=>t("/passenger/tickets"),className:"text-sm text-blue-600 hover:underline",children:"View All \u2192"})]}),(0,cs.jsx)("div",{className:"space-y-4",children:s.slice(0,3).map(e=>(0,cs.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,cs.jsx)(ks.A,{className:"w-5 h-5 text-blue-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"font-semibold text-gray-900",children:e.routeName}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600",children:[e.from," \u2192 ",e.to]}),(0,cs.jsxs)("p",{className:"text-xs text-gray-500",children:[e.departureDate," \u2022 ",e.departureTime]})]})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:["\u20b9",e.fare]}),(0,cs.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(m(e.status)),children:e.status})]})]},e.id))})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[(0,cs.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Popular Routes"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Most booked destinations"})]})}),(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.slice(0,6).map((e,t)=>(0,cs.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer",onClick:()=>p(e),children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,cs.jsx)("span",{className:"font-semibold text-gray-900",children:e.label}),(0,cs.jsx)(xu.A,{className:"w-4 h-4 text-green-500"})]}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600",children:["Route: ",e.route]}),(0,cs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Click to search trips"})]},t))})]}),n.length>0&&(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,cs.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Your Frequent Trips"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Based on your booking history"})]})}),(0,cs.jsx)("div",{className:"space-y-3",children:n.slice(0,5).map(e=>(0,cs.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,cs.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,cs.jsx)(Cs.A,{className:"w-4 h-4 text-gray-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"font-medium text-gray-900",children:e.routeName}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600",children:[e.from," \u2192 ",e.to]})]})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:["\u20b9",e.fare]}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:e.date})]})]},e.id))})]})]})})},WV=()=>{const e=te(),{user:t}=(0,Re.A)(),[s,a]=(0,r.useState)({from:"",to:"",date:"",passengers:1}),[n,i]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=new Date;e.setDate(e.getDate()+1),a(t=>(0,Ie.A)((0,Ie.A)({},t),{},{date:e.toISOString().split("T")[0]}))},[]);const o=(e,t)=>{a(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t}))};return(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,cs.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-6",children:[(0,cs.jsxs)("div",{className:"text-center mb-6",children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Search & Book Your Trip"}),(0,cs.jsx)("p",{className:"text-base text-gray-600",children:"Find the perfect bus for your journey across Kerala"})]}),(0,cs.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-6 mb-6",children:(0,cs.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!s.from||!s.to||!s.date)return void alert("Please fill in all required fields");i(!0);const r=new URLSearchParams({from:s.from,to:s.to,date:s.date,passengers:s.passengers});e("/passenger/results?".concat(r.toString()))},className:"space-y-4",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(gs.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,cs.jsx)("input",{type:"text",placeholder:"From City",value:s.from,onChange:e=>o("from",e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent text-sm",required:!0})]}),(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(gs.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,cs.jsx)("input",{type:"text",placeholder:"To City",value:s.to,onChange:e=>o("to",e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent text-sm",required:!0})]}),(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(fs.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,cs.jsx)("input",{type:"date",value:s.date,onChange:e=>o("date",e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent text-sm",required:!0})]}),(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(Ss.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,cs.jsx)("select",{value:s.passengers,onChange:e=>o("passengers",parseInt(e.target.value)),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent appearance-none text-sm",children:[1,2,3,4,5].map(e=>(0,cs.jsxs)("option",{value:e,children:[e," Passenger",1!==e?"s":""]},e))})]})]}),(0,cs.jsx)("div",{className:"flex justify-center",children:(0,cs.jsx)("button",{type:"submit",disabled:n,className:"px-8 py-3 bg-gradient-to-r from-pink-600 to-pink-700 text-white rounded-lg hover:from-pink-700 hover:to-pink-800 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm font-semibold shadow-md",children:n?(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Searching..."]}):(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)(ys.A,{className:"w-6 h-6"}),"Search Buses"]})})})]})}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-6",children:[(0,cs.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-4 text-center",children:"Popular Kerala Routes"}),(0,cs.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:[{from:"Kochi",to:"Thiruvananthapuram",icon:"\ud83c\udfdb\ufe0f"},{from:"Kochi",to:"Kozhikode",icon:"\ud83c\udfd6\ufe0f"},{from:"Kochi",to:"Kollam",icon:"\ud83c\udf0a"},{from:"Kochi",to:"Kottayam",icon:"\u26ea"},{from:"Kochi",to:"Thrissur",icon:"\ud83d\udc18"},{from:"Kochi",to:"Palakkad",icon:"\ud83c\udfd4\ufe0f"},{from:"Thiruvananthapuram",to:"Kochi",icon:"\ud83d\ude8c"},{from:"Kozhikode",to:"Kochi",icon:"\ud83c\udf34"},{from:"Kollam",to:"Kochi",icon:"\ud83c\udf05"},{from:"Kottayam",to:"Kochi",icon:"\u26f0\ufe0f"},{from:"Thrissur",to:"Kochi",icon:"\ud83c\udfad"},{from:"Palakkad",to:"Kochi",icon:"\ud83c\udf3e"}].map((e,t)=>(0,cs.jsxs)("button",{onClick:()=>{a(t=>(0,Ie.A)((0,Ie.A)({},t),{},{from:e.from,to:e.to}))},className:"p-3 border border-gray-200 rounded-lg hover:border-pink-300 hover:bg-pink-50 transition-all duration-200 text-center group",children:[(0,cs.jsx)("div",{className:"text-lg mb-1",children:e.icon}),(0,cs.jsxs)("div",{className:"text-xs font-medium text-gray-900 group-hover:text-pink-600",children:[e.from," \u2192 ",e.to]})]},t))})]})]})})},HV=()=>{const{tripId:e}=se(),{state:t}=Z(),a=te(),n=(0,r.useMemo)(()=>(null===t||void 0===t?void 0:t.selectedSeats)||[],[null===t||void 0===t?void 0:t.selectedSeats]),i=(null===t||void 0===t?void 0:t.boarding)||null,o=(null===t||void 0===t?void 0:t.dropping)||null,[l,c]=(0,r.useState)((null===t||void 0===t?void 0:t.trip)||null),[d,u]=(0,r.useState)(null),[h,m]=(0,r.useState)(null),[p,x]=(0,r.useState)(null),[g,f]=(0,r.useState)(!1),[y,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{!l&&e&&(async()=>{if(l)u(l.fare);else try{f(!0);const s=await(0,xs.nr)("/api/trips/".concat(e));if(s.ok){var t;const e=(null===(t=s.data)||void 0===t?void 0:t.data)||s.data;c(e),u(e.fare)}}finally{f(!1)}})()},[e,l]);const v=(0,r.useMemo)(()=>{const e=Math.max(1,n.length||1);return Array.from({length:e},(e,t)=>({name:"",age:"",gender:"",seat:n[t]||""}))},[n]);return g?(0,cs.jsx)("div",{className:"max-w-5xl mx-auto bg-white rounded-2xl shadow-soft p-6 space-y-4",children:(0,cs.jsxs)("div",{className:"text-center py-8",children:[(0,cs.jsx)("div",{className:"text-lg",children:"Loading trip details..."}),(0,cs.jsxs)("div",{className:"text-sm text-gray-500 mt-2",children:["Trip ID: ",e||"Not found"]})]})}):y?(0,cs.jsx)("div",{className:"max-w-5xl mx-auto bg-white rounded-2xl shadow-soft p-6 space-y-4",children:(0,cs.jsxs)("div",{className:"text-center py-8",children:[(0,cs.jsx)("div",{className:"text-red-600 text-lg mb-4",children:y}),(0,cs.jsxs)("div",{className:"text-sm text-gray-500 mb-4",children:["Trip ID: ",e||"Not found"]}),(0,cs.jsx)("button",{onClick:()=>a("/passenger/dashboard"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg",children:"Back to Dashboard"})]})}):(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,cs.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-6 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,cs.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm",children:[(0,cs.jsx)("div",{className:"px-6 py-4 text-lg font-semibold",children:"Contact details"}),(0,cs.jsxs)("div",{className:"px-6 pb-6 grid gap-3",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,cs.jsx)("select",{className:"border rounded-lg px-3 py-2",children:(0,cs.jsx)("option",{children:"+91 (IND)"})}),(0,cs.jsx)("input",{className:"col-span-2 border rounded-lg px-3 py-2",placeholder:"Phone"})]}),(0,cs.jsx)("input",{className:"border rounded-lg px-3 py-2",placeholder:"Email ID"}),(0,cs.jsx)("select",{className:"border rounded-lg px-3 py-2",children:(0,cs.jsx)("option",{children:"State of Residence"})}),(0,cs.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[(0,cs.jsx)("div",{className:"w-10 h-6 rounded-full bg-gray-200 relative",children:(0,cs.jsx)("div",{className:"absolute right-1 top-1 w-4 h-4 rounded-full bg-pink-500"})})," Send booking details and trip updates on WhatsApp"]})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm",children:[(0,cs.jsx)("div",{className:"px-6 py-4 text-lg font-semibold",children:"Passenger details"}),(0,cs.jsx)("div",{className:"px-6 pb-6 space-y-6",children:v.map((e,t)=>(0,cs.jsxs)("div",{className:"border rounded-xl p-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,cs.jsxs)("div",{className:"font-medium",children:["Passenger ",t+1]}),(0,cs.jsxs)("div",{className:"text-sm text-gray-500",children:["Seat ",e.seat||n[t]||""]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,cs.jsx)("input",{placeholder:"Name",className:"border rounded-lg px-3 py-2"}),(0,cs.jsx)("input",{placeholder:"Age",className:"border rounded-lg px-3 py-2"}),(0,cs.jsxs)("div",{className:"flex items-center gap-3",children:[(0,cs.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,cs.jsx)("input",{type:"radio",name:"g".concat(t)})," Male"]}),(0,cs.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,cs.jsx)("input",{type:"radio",name:"g".concat(t)})," Female"]})]})]})]},t))})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm",children:[(0,cs.jsx)("div",{className:"px-6 py-4 text-lg font-semibold",children:"redBus Assurance"}),(0,cs.jsxs)("div",{className:"px-6 pb-6 space-y-3 text-sm",children:[(0,cs.jsxs)("div",{className:"border rounded-xl p-4",children:["If your bus gets cancelled, you get ",(0,cs.jsx)("span",{className:"font-semibold text-green-700",children:"\u20b92298"})]}),(0,cs.jsxs)("label",{className:"flex items-center justify-between border rounded-xl p-3",children:[(0,cs.jsx)("span",{children:"Yes, protect my trip"}),(0,cs.jsx)("input",{type:"radio",name:"ins"})]}),(0,cs.jsxs)("label",{className:"flex items-center justify-between border rounded-xl p-3",children:[(0,cs.jsx)("span",{children:"Don't add Assurance"}),(0,cs.jsx)("input",{type:"radio",name:"ins",defaultChecked:!0})]})]})]})]}),(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-6 sticky top-6",children:[(0,cs.jsx)("div",{className:"text-sm text-gray-400 mb-2",children:"Top Handpicked Buses"}),(0,cs.jsx)("div",{className:"text-base font-semibold mb-3",children:(null===l||void 0===l?void 0:l.routeName)||"Trip"}),(0,cs.jsxs)("div",{className:"text-sm text-gray-700 mb-1",children:[null===l||void 0===l?void 0:l.startTime," \u2022 ",(null===i||void 0===i?void 0:i.title)||"Boarding point"," "]}),(0,cs.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:new Date((null===l||void 0===l?void 0:l.serviceDate)||Date.now()).toDateString()}),(0,cs.jsxs)("div",{className:"text-sm text-gray-700 mb-1",children:[null===l||void 0===l?void 0:l.endTime," \u2022 ",(null===o||void 0===o?void 0:o.title)||"Dropping point"]}),(0,cs.jsxs)("div",{className:"mt-4",children:[(0,cs.jsx)("div",{className:"text-sm font-medium mb-2",children:"Seat details"}),(0,cs.jsx)("div",{className:"flex flex-wrap gap-2",children:n.map((e,t)=>(0,cs.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:e||"Seat ".concat(t+1)},t))})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-6",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:"Amount"}),(0,cs.jsxs)("div",{className:"text-2xl font-bold",children:["\u20b9",(d||0)*Math.max(1,n.length||1)]})]}),(0,cs.jsx)("button",{onClick:async function(){try{let g=h;if(!g){console.log("\ud83d\udd0d No booking ID found, creating booking...");const t=await async function(){if(!l)return void console.error("Trip details not loaded");const t=l.serviceDate||(new Date).toISOString().split("T")[0],s=(null===i||void 0===i?void 0:i.time)||l.startTime||"08:00",r=(null===o||void 0===o?void 0:o.time)||l.endTime||"12:00",a=l.fare||250,c=Math.max(1,n.length||1),d=a*c,h={tripId:e,routeId:e,busId:e,depotId:e,customer:{name:"Guest Passenger",email:"guest@example.com",phone:"9999999999",age:25,gender:"male"},journey:{from:l.fromCity||"Mumbai",to:l.toCity||"Pune",departureDate:new Date(t),departureTime:s,arrivalDate:new Date(t),arrivalTime:r,duration:240,boardingPoint:(null===i||void 0===i?void 0:i.title)||"Central Bus Stand",droppingPoint:(null===o||void 0===o?void 0:o.title)||"Central Bus Stand"},seats:(n.length?n:["U1"]).map((e,t)=>({seatNumber:e,seatType:"seater",seatPosition:"window",price:a,passengerName:"Passenger ".concat(t+1),passengerAge:25,passengerGender:"male"})),pricing:{baseFare:a,seatFare:a*(c-1),taxes:{gst:0,serviceTax:0,other:0},discounts:{earlyBird:0,loyalty:0,promo:0,other:0},totalAmount:d,paidAmount:0,refundAmount:0},payment:{method:"upi",paymentStatus:"pending"},status:"pending",source:"web"};console.log("\ud83d\ude8c Frontend sending booking data:",JSON.stringify(h,null,2));try{const e=await(0,xs.nr)("/api/booking",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(console.log("\ud83d\udcdd Booking API response:",e),e.ok){var p,g,f,v,j,N,w,k,A,S,C;u((null===(p=e.data)||void 0===p||null===(g=p.data)||void 0===g?void 0:g.fare)||(null===(f=e.data)||void 0===f?void 0:f.fare)||l.fare);const t=(null===(v=e.data)||void 0===v||null===(j=v.data)||void 0===j?void 0:j.bookingId)||(null===(N=e.data)||void 0===N?void 0:N.bookingId),s=(null===(w=e.data)||void 0===w||null===(k=w.data)||void 0===k?void 0:k.passengerId)||(null===(A=e.data)||void 0===A?void 0:A.passengerId)||(null===(S=e.data)||void 0===S||null===(C=S.data)||void 0===C?void 0:C.customerId);return console.log("\ud83d\udcdd Booking created with ID:",t),console.log("\ud83d\udcdd Full response data:",e.data),m(t),s&&x(s),{ok:!0,bookingId:t,passengerId:s}}var _;return console.error("Booking creation failed:",(null===e||void 0===e?void 0:e.data)||e),b("Failed to create booking: "+((null===e||void 0===e||null===(_=e.data)||void 0===_?void 0:_.message)||(null===e||void 0===e?void 0:e.message)||"Unknown error")),{ok:!1}}catch(y){return console.error("Booking creation error:",y),b("Failed to create booking: "+y.message),{ok:!1}}}();null!==t&&void 0!==t&&t.ok?(console.log("\u2705 Booking created successfully:",t.bookingId),g=t.bookingId,m(g),t.passengerId&&x(t.passengerId)):(console.error("\u274c Booking creation failed, using fallback"),g="BK".concat(Date.now().toString().slice(-8)),m(g),x("guest_1"))}if(console.log("\ud83d\udd0d Current booking ID:",g),!g)return console.error("\u274c No booking ID available for payment"),void b("No booking ID available. Please try again.");const f=Math.max(1,n.length||1),v=(d||(null===l||void 0===l?void 0:l.fare)||0)*f;let j,N,w,k;try{const e=g.substring(0,15),s={amount:Math.round(100*v),currency:"INR",receipt:e,bookingId:g,passengerId:p||"guest_1"};console.log("\ud83d\udcb3 Frontend sending payment data:",JSON.stringify(s,null,2));const a=await(0,xs.nr)("/api/payments/create-order",{method:"POST",body:JSON.stringify(s)});if(a.ok){var t,r;const e=(null===(t=a.data)||void 0===t?void 0:t.order)||a.data||{};j=e.id,N=e.amount,w=e.currency,k=(null===(r=a.data)||void 0===r?void 0:r.key)||a.key}}catch(c){}const A={key:k||void 0||window.RAZORPAY_KEY_ID||"rzp_test_1DP5mmOlF5G5ag",amount:N||Math.round(100*v),currency:w||"INR",name:(null===l||void 0===l?void 0:l.routeName)||"Bus Ticket",description:"".concat(null===l||void 0===l?void 0:l.fromCity," \u2192 ").concat(null===l||void 0===l?void 0:l.toCity),order_id:j,theme:{color:"#E91E63"},prefill:{name:"Test User",email:"test@example.com",contact:"9999999999"},notes:{bookingId:g,tripId:e},handler:async e=>{console.log("\ud83d\udcb3 Payment response:",e);try{if(console.log("\ud83d\udcb3 Confirming booking with ID:",g),console.log("\ud83d\udcb3 Available bookingId state:",h),!g){console.error("\u274c No booking ID available for confirmation");const e="PNR".concat(Date.now().toString().slice(-8));return void a("/passenger/ticket/".concat(e,"?pnr=").concat(e))}const c=await(0,xs.nr)("/api/booking/confirm",{method:"POST",body:JSON.stringify({bookingId:g,paymentId:e.razorpay_payment_id||"pay_".concat(Date.now()),orderId:j||"order_".concat(Date.now()),paymentStatus:"completed"})});if(console.log("\ud83d\udcb3 Booking confirmation response:",c),c.ok){var t,s,r,i,o;const e=(null===(t=c.data)||void 0===t||null===(s=t.data)||void 0===s||null===(r=s.ticket)||void 0===r?void 0:r.pnr)||(null===(i=c.data)||void 0===i||null===(o=i.ticket)||void 0===o?void 0:o.pnr)||g||"PNR".concat(Date.now().toString().slice(-8));return console.log("\u2705 Payment successful! Navigating to ticket:",e),dh.showPaymentSuccess({amount:N/100,bookingId:g,pnr:e}),dh.showBookingConfirmation({bookingId:g,pnr:e,trip:{from:(null===l||void 0===l?void 0:l.fromCity)||"Origin",to:(null===l||void 0===l?void 0:l.toCity)||"Destination",date:(null===l||void 0===l?void 0:l.serviceDate)||(new Date).toISOString().split("T")[0],time:(null===l||void 0===l?void 0:l.startTime)||"08:00",seats:n.length?n:["U1"]}}),void a("/passenger/ticket/".concat(e,"?pnr=").concat(e))}{console.error("Booking confirmation failed:",c);const e="PNR".concat(Date.now().toString().slice(-8));console.log("\u26a0\ufe0f Using fallback PNR:",e),a("/passenger/ticket/".concat(e,"?pnr=").concat(e))}}catch(y){console.error("Payment processing error:",y);const t="PNR".concat(Date.now().toString().slice(-8));console.log("\u26a0\ufe0f Error fallback - using PNR:",t),a("/pax/ticket/".concat(t,"?pnr=").concat(t))}},modal:{ondismiss:function(){console.log("Payment modal dismissed")}}},{default:S}=await Promise.resolve().then(s.bind(s,9081)),C=await S.initializeRazorpay();new C(A).open()}catch(qU){console.error("Payment init error:",qU),b(qU.message||"Failed to start payment")}},className:"mt-4 w-full rounded-full bg-pink-600 hover:bg-pink-700 text-white font-semibold py-3",children:"Continue booking"})]})]})]})})},qV=()=>{const e=te(),{user:t}=(0,Re.A)(),[s]=Me(),[a,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null);(0,r.useEffect)(()=>{!async function(){try{o(!0);const t=Object.fromEntries(s.entries()),r=new URLSearchParams({from:t.from||t.fromCity||"",to:t.to||t.toCity||"",date:t.date||""}),a=await(0,xs.nr)("/api/trips/search?".concat(r.toString()));var e;if(a.ok)n((null===(e=a.data.data)||void 0===e?void 0:e.trips)||a.data.trips||[]);else c("Failed to fetch trips")}catch(t){console.error("Error fetching trips:",t),c("Error fetching trips")}finally{o(!1)}}()},[s]);const d=e=>{switch(e.toLowerCase()){case"wifi":return(0,cs.jsx)(Rd,{className:"w-4 h-4"});case"charging":return(0,cs.jsx)(pd,{className:"w-4 h-4"});case"refreshments":return(0,cs.jsx)(Hd,{className:"w-4 h-4"});case"wheelchair":return(0,cs.jsx)(sh,{className:"w-4 h-4"});case"entertainment":return(0,cs.jsx)(th,{className:"w-4 h-4"});case"safety":return(0,cs.jsx)(Ps,{className:"w-4 h-4"});default:return(0,cs.jsx)(rd.A,{className:"w-4 h-4"})}},u=(e,t)=>{const s=new Date("2000-01-01T".concat(e)),r=new Date("2000-01-01T".concat(t))-s,a=Math.floor(r/36e5),n=Math.floor(r%36e5/6e4);return"".concat(a,"h ").concat(n,"m")};return i?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-pink-600 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-600 text-lg",children:"Searching for trips..."})]})}):l?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-red-600 text-lg mb-4",children:l}),(0,cs.jsx)("button",{onClick:()=>e("/passenger/search"),className:"bg-pink-600 text-white px-6 py-2 rounded-lg hover:bg-pink-700",children:"Try Again"})]})}):(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,cs.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,cs.jsxs)("div",{className:"mb-8",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,cs.jsxs)("button",{onClick:()=>e("/passenger/search"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800",children:[(0,cs.jsx)(td,{className:"w-4 h-4 rotate-180"}),"Back to Search"]}),(0,cs.jsxs)("button",{onClick:()=>e("/passenger/available-trips"),className:"flex items-center gap-2 bg-pink-600 text-white px-4 py-2 rounded-lg hover:bg-pink-700 transition-colors text-sm font-medium",children:[(0,cs.jsx)(ks.A,{className:"w-4 h-4"}),"View All Scheduled Trips"]})]}),(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Available Trips"}),(0,cs.jsxs)("p",{className:"text-gray-600 mt-2",children:[s.get("from")," \u2192 ",s.get("to")," \u2022 ",new Date(s.get("date")).toDateString()]})]}),a.length>0?(0,cs.jsx)("div",{className:"space-y-6",children:a.map(s=>{var r,a,n,i;return(0,cs.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[(0,cs.jsx)("div",{className:"p-6",children:(0,cs.jsxs)("div",{className:"flex items-start justify-between",children:[(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-pink-100 to-pink-200 rounded-lg flex items-center justify-center",children:(0,cs.jsx)(ks.A,{className:"w-6 h-6 text-pink-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:s.routeName}),(0,cs.jsxs)("p",{className:"text-gray-600",children:["object"===typeof s.fromCity?(null===(r=s.fromCity)||void 0===r?void 0:r.city)||(null===(a=s.fromCity)||void 0===a?void 0:a.location)||"Unknown":s.fromCity," \u2192","object"===typeof s.toCity?(null===(n=s.toCity)||void 0===n?void 0:n.city)||(null===(i=s.toCity)||void 0===i?void 0:i.location)||"Unknown":s.toCity]})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,cs.jsx)(sd.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:[s.startTime," - ",s.endTime]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,cs.jsx)(gs.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:u(s.startTime,s.endTime)})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,cs.jsx)(Ss.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:[s.availableSeats," seats available"]})]})]}),s.amenities&&s.amenities.length>0&&(0,cs.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Amenities:"}),(0,cs.jsx)("div",{className:"flex gap-2",children:s.amenities.map((e,t)=>(0,cs.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[d(e),(0,cs.jsx)("span",{children:e})]},t))})]}),(0,cs.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,cs.jsxs)("p",{children:["Bus Type: ",s.busType||"AC Sleeper"]}),(0,cs.jsxs)("p",{children:["Operator: ",s.operator||"Kerala State Transport"]})]})]}),(0,cs.jsxs)("div",{className:"flex flex-col items-end gap-4",children:[(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsxs)("div",{className:"text-3xl font-bold text-pink-600",children:["\u20b9",s.fare]}),(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:"per seat"})]}),(0,cs.jsxs)("button",{onClick:()=>(s=>{t?e("/passenger/boarddrop/".concat(s._id),{state:{trip:s}}):e("/login?next=/passenger/boarddrop/".concat(s._id))})(s),className:"bg-gradient-to-r from-pink-600 to-pink-700 hover:from-pink-700 hover:to-pink-800 text-white px-8 py-3 rounded-lg font-semibold transition-all duration-200 flex items-center gap-2 shadow-lg",children:[(0,cs.jsx)(xd,{className:"w-5 h-5"}),"Book Now"]})]})]})}),(0,cs.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-4",children:[(0,cs.jsxs)("span",{children:["Distance: ",s.distanceKm||"N/A"," km"]}),(0,cs.jsxs)("span",{children:["Capacity: ",s.capacity||"N/A"]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(rd.A,{className:"w-4 h-4 text-yellow-500 fill-current"}),(0,cs.jsxs)("span",{children:[s.rating||"4.5"," (",s.totalRatings||"128"," reviews)"]})]})]})})]},s._id)})}):(0,cs.jsxs)("div",{className:"text-center py-12",children:[(0,cs.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,cs.jsx)(ks.A,{className:"w-12 h-12 text-gray-400"})}),(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No trips found"}),(0,cs.jsx)("p",{className:"text-gray-600 mb-6",children:"We couldn't find any trips for your search criteria."}),(0,cs.jsx)("button",{onClick:()=>e("/passenger/search"),className:"bg-pink-600 text-white px-6 py-3 rounded-lg hover:bg-pink-700 transition-colors",children:"Search Again"})]})]})})},GV=(0,Ns.A)("snowflake",[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]]),YV=(0,Ns.A)("utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]),$V=e=>{let{trip:t,onViewSeats:s,onCloseSeats:a,isExpanded:n=!1,selectedSeats:i=[],onSeatSelect:o,onSeatDeselect:l,onBookNow:c}=e;const d=te(),[u,h]=(0,r.useState)(n),m=e=>{if(!e)return"--:--";const[t,s]=e.split(":"),r=parseInt(t),a=r>=12?"pm":"am";return"".concat(r%12||12,":").concat(s," ").concat(a)},p=new Set((null===t||void 0===t?void 0:t.bookedSeatNos)||[]),x=new Set((null===t||void 0===t?void 0:t.femaleOnlySeatNos)||[]),g=new Set((null===t||void 0===t?void 0:t.maleOnlySeatNos)||[]),f=(e,t)=>{const s=i.includes(e),r=p.has(e),a=x.has(e),n=g.has(e);let c="w-9 h-14 rounded-md text-[10px] font-medium transition-all duration-200 flex items-center justify-center border ";return c+=r?" bg-gray-200 border-gray-300 text-gray-400 cursor-not-allowed":s?"sleeper"===t?" bg-green-700 text-white border-green-700":" bg-green-600 text-white border-green-600":a?" bg-pink-50 text-pink-600 border-pink-400":n?" bg-blue-50 text-blue-600 border-blue-400":" bg-white text-green-700 border-green-500",(0,cs.jsx)("button",{disabled:r,onClick:()=>s?null===l||void 0===l?void 0:l(e):null===o||void 0===o?void 0:o(e),className:c,title:e,children:e},e)},y=(e,t)=>(0,cs.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 p-3",children:[(0,cs.jsxs)("div",{className:"text-xs font-medium text-gray-600 mb-2 flex items-center justify-between",children:[(0,cs.jsx)("span",{children:"sleeper"===t?"Upper deck":"Lower deck"}),"seater"===t&&(0,cs.jsx)("span",{className:"text-gray-400",children:"\ud83d\udede"})]}),(0,cs.jsx)("div",{className:"grid grid-cols-3 gap-2",children:e.map(e=>(0,cs.jsxs)(r.Fragment,{children:[f("".concat(e,"A"),t),f("".concat(e,"B"),t),f("".concat(e,"C"),t)]},e))})]}),b=()=>i.length*(t.fare||0),v=e=>{try{return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(Number(e||0))}catch(t){return"\u20b9".concat(Math.round(Number(e||0)))}};return(0,cs.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all duration-200 mb-4",children:[(0,cs.jsx)("div",{className:"p-6",children:(0,cs.jsxs)("div",{className:"flex items-start gap-4",children:[(0,cs.jsx)("div",{className:"w-20 h-20 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-gray-500 text-xs font-medium",children:"IMAGE"})}),(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t.routeName||"Bus Service"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:t.busNumber||"Bus-001"})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:["\u20b9",t.fare||0]}),(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:"per seat"})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(sd.A,{className:"w-4 h-4 text-gray-500"}),(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[t.fromCity||"Departure"," (",m(t.startTime),")"]}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:"Departure"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(sd.A,{className:"w-4 h-4 text-gray-500"}),(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[t.toCity||"Arrival"," (",m(t.endTime),")"]}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:"Arrival"})]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-1",children:[(e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"ac":case"ac_sleeper":case"ac_seater":return(0,cs.jsx)(GV,{className:"w-4 h-4 text-blue-500"});case"non_ac":case"non_ac_sleeper":case"non_ac_seater":return(0,cs.jsx)(nh,{className:"w-4 h-4 text-green-500"});default:return(0,cs.jsx)(Ss.A,{className:"w-4 h-4 text-gray-500"})}})(t.busType),(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:(e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"ac":case"ac_sleeper":case"ac_seater":return"AC";case"non_ac":case"non_ac_sleeper":case"non_ac_seater":return"Non AC";default:return e||"Standard"}})(t.busType)})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,cs.jsx)(Ss.A,{className:"w-4 h-4 text-gray-500"}),(0,cs.jsxs)("span",{className:"text-sm text-gray-700",children:[t.availableSeats||0,"/",t.capacity||0," seats"]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,cs.jsx)(Rd,{className:"w-4 h-4 text-gray-500"}),(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:"WiFi"})]})]}),(0,cs.jsx)("div",{className:"flex justify-end",children:(0,cs.jsx)("button",{onClick:()=>{u?(h(!1),null===a||void 0===a||a()):(h(!0),null===s||void 0===s||s(t))},className:"px-6 py-2 rounded-lg font-medium transition-all duration-200 ".concat(u?"bg-gray-500 hover:bg-gray-600 text-white":"bg-pink-500 hover:bg-pink-600 text-white"),children:u?"Close Seats":"View Seats"})})]})]})}),u&&(0,cs.jsx)("div",{className:"border-t border-gray-200 p-6 bg-gray-50",children:(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("div",{className:"w-6 h-6 bg-gray-300 rounded flex items-center justify-center",children:(0,cs.jsx)("span",{className:"text-xs",children:"\ud83d\ude8c"})}),(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Select your seats"})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4 max-w-md",children:[y(["L1","L2","L3","L4","L5","L6"],"seater"),y(["U1","U2","U3","U4","U5","U6"],"sleeper")]}),(0,cs.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-3 text-xs text-gray-600",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("span",{className:"w-3 h-3 bg-white border border-green-500 inline-block rounded-sm"}),"Available"]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("span",{className:"w-3 h-3 bg-green-600 inline-block rounded-sm"}),"Selected (seater)"]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("span",{className:"w-3 h-3 bg-green-700 inline-block rounded-sm"}),"Selected (sleeper)"]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("span",{className:"w-3 h-3 bg-gray-300 inline-block rounded-sm"}),"Booked"]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("span",{className:"w-3 h-3 bg-blue-100 inline-block rounded-sm"}),"Male only"]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("span",{className:"w-3 h-3 bg-pink-100 inline-block rounded-sm"}),"Female only"]})]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Summary"}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden mb-4",children:[(0,cs.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:(0,cs.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-xs font-medium text-gray-600",children:[(0,cs.jsx)("div",{children:"Seat Type"}),(0,cs.jsx)("div",{children:"Seat"}),(0,cs.jsx)("div",{children:"Price"}),(0,cs.jsx)("div",{children:"Action"})]})}),(0,cs.jsx)("div",{className:"divide-y divide-gray-200",children:i.map(e=>(0,cs.jsx)("div",{className:"px-4 py-2",children:(0,cs.jsxs)("div",{className:"grid grid-cols-4 gap-4 items-center text-sm",children:[(0,cs.jsx)("div",{className:"text-gray-700",children:"Adult"}),(0,cs.jsx)("div",{className:"font-medium text-gray-900",children:e}),(0,cs.jsxs)("div",{className:"text-gray-700",children:["\u20b9",t.fare||0]}),(0,cs.jsx)("div",{children:(0,cs.jsx)("button",{onClick:()=>null===l||void 0===l?void 0:l(e),className:"text-red-500 hover:text-red-700",children:"\ud83d\uddd1\ufe0f"})})]})},e))})]}),(0,cs.jsx)("div",{className:"mb-4",children:(0,cs.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Ticket Sub total"}),(0,cs.jsxs)("span",{className:"font-medium",children:["\u20b9",b()]})]})}),(0,cs.jsxs)("div",{className:"mb-4",children:[(0,cs.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Extra Services:"}),(0,cs.jsxs)("div",{className:"space-y-2",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(Hd,{className:"w-4 h-4 text-gray-500"}),(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:"Welcome Drink"})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("button",{className:"w-6 h-6 rounded-full border border-gray-300 flex items-center justify-center text-gray-600 hover:bg-gray-50",children:"-"}),(0,cs.jsx)("span",{className:"text-sm w-6 text-center",children:"0"}),(0,cs.jsx)("button",{className:"w-6 h-6 rounded-full border border-gray-300 flex items-center justify-center text-gray-600 hover:bg-gray-50",children:"+"}),(0,cs.jsx)("span",{className:"text-sm text-gray-700 ml-2",children:"\u20b950"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(YV,{className:"w-4 h-4 text-gray-500"}),(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:"Cap"})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("button",{className:"w-6 h-6 rounded-full border border-gray-300 flex items-center justify-center text-gray-600 hover:bg-gray-50",children:"-"}),(0,cs.jsx)("span",{className:"text-sm w-6 text-center",children:"0"}),(0,cs.jsx)("button",{className:"w-6 h-6 rounded-full border border-gray-300 flex items-center justify-center text-gray-600 hover:bg-gray-50",children:"+"}),(0,cs.jsx)("span",{className:"text-sm text-gray-700 ml-2",children:"\u20b970"})]})]})]})]}),(0,cs.jsx)("div",{className:"border-t border-gray-200 pt-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,cs.jsxs)("div",{className:"text-sm text-gray-700",children:[i.length||0," ",1===i.length?"seat":"seats"]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[i.length>0&&(0,cs.jsx)("span",{className:"text-gray-400 line-through text-sm",children:v(1.125*b())}),(0,cs.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:v(b())})]}),(0,cs.jsx)("button",{onClick:()=>{c?c(t,i):d("/pax/board-drop/".concat(t._id),{state:{trip:t,selectedSeats:i}})},disabled:0===i.length,className:"px-5 sm:px-6 md:px-8 py-3 rounded-full bg-red-600 hover:bg-red-700 text-white font-semibold disabled:bg-red-300 disabled:cursor-not-allowed transition-all duration-200",children:"Select boarding & dropping points"})]})})]})]})})]})},JV=(0,Ns.A)("arrow-up-narrow-wide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),QV=()=>{const[e]=Me(),t=te(),[s,a]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)({}),[m,p]=(0,r.useState)("departure"),[x,g]=(0,r.useState)("all"),f=e.get("fromCity")||"",y=e.get("toCity")||"",b=e.get("date")||"",[v,j]=(0,r.useState)([]),[N,w]=(0,r.useState)(b),k=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;try{var t,s;i(!0),l(null);const p=new URLSearchParams({from:f,to:y,date:e});console.log("\ud83d\udd0d Searching trips with params:",p.toString()),console.log("\ud83d\udd0d Search details:",{fromCity:f,toCity:y,searchDate:e});let x=await(0,xs.nr)("/api/trips/search?".concat(p.toString()));console.log("\ud83d\udd0d API Response (relative):",x);let g=[];var r,n,o,c;if(null!==(t=x)&&void 0!==t&&t.ok)g=(null===(r=x.data)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.trips)||(null===(o=x.data)||void 0===o?void 0:o.trips)||(null===(c=x.data)||void 0===c?void 0:c.items)||x.data||[];if(null===(s=x)||void 0===s||!s.ok||!Array.isArray(g)||0===g.length)try{const e=await(0,xs.nr)("http://localhost:5000/api/trips/search?".concat(p.toString()));var d,u,h,m;if(console.log("\ud83d\udd01 Fallback API Response (absolute):",e),null!==e&&void 0!==e&&e.ok)g=(null===(d=e.data)||void 0===d||null===(u=d.data)||void 0===u?void 0:u.trips)||(null===(h=e.data)||void 0===h?void 0:h.trips)||(null===(m=e.data)||void 0===m?void 0:m.items)||e.data||[];x=e}catch(qU){console.error("\u274c Fallback fetch error:",qU)}Array.isArray(g)?(console.log("\u2705 Found trips (final):",g.length),a(g)):(console.error("\u274c Unexpected trips payload shape."),a([]))}catch(p){console.error("\u274c Search error:",p),l("Failed to search trips. Please try again.")}finally{i(!1)}},[f,y,b]);(0,r.useEffect)(()=>{const e=[],t=new Date;for(let s=0;s<7;s++){const r=new Date(t);r.setDate(t.getDate()+s),e.push({date:r.toISOString().split("T")[0],display:r.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),fullDisplay:r.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})}j(e)},[]),(0,r.useEffect)(()=>{k(N)},[f,y,N,k]);const A=()=>{d(null)},S=s.filter(e=>{var t,s;return"ac"===x?null===(t=e.busType)||void 0===t?void 0:t.toLowerCase().includes("ac"):"non_ac"!==x||!(null!==(s=e.busType)&&void 0!==s&&s.toLowerCase().includes("ac"))}).sort((e,t)=>{switch(m){case"departure":return new Date("2000-01-01 ".concat(e.startTime))-new Date("2000-01-01 ".concat(t.startTime));case"arrival":return new Date("2000-01-01 ".concat(e.endTime))-new Date("2000-01-01 ".concat(t.endTime));case"fare":return(e.fare||0)-(t.fare||0);case"seats":return(t.availableSeats||0)-(e.availableSeats||0);default:return 0}}),C=e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})};return n?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Searching for buses..."})]})}):o?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"\u26a0\ufe0f"}),(0,cs.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Search Failed"}),(0,cs.jsx)("p",{className:"text-gray-600 mb-4",children:o}),(0,cs.jsx)("button",{onClick:k,className:"px-6 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600 transition-colors",children:"Try Again"})]})}):(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:(0,cs.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,cs.jsx)("div",{className:"flex items-center justify-between h-16",children:(0,cs.jsxs)("div",{className:"flex items-center gap-4",children:[(0,cs.jsx)("button",{onClick:()=>t("/pax/dashboard"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,cs.jsx)(Su,{className:"w-5 h-5 text-gray-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"BUY TICKET"}),(0,cs.jsxs)("p",{className:"text-sm text-gray-500",children:[f," \u2192 ",y," \u2022 ",C(b)]})]})]})})})}),(0,cs.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,cs.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-8",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:[f," \u2192 ",y]}),(0,cs.jsx)("p",{className:"text-gray-600",children:C(N)})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"Found"}),(0,cs.jsx)("p",{className:"text-2xl font-bold text-pink-500",children:s.length}),(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"buses available"})]})]})}),(0,cs.jsx)("div",{className:"mb-6",children:(0,cs.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2",children:v.map((e,t)=>(0,cs.jsx)("button",{onClick:()=>{return t=e.date,void w(t);var t},className:"px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-all duration-200 ".concat(N===e.date?"bg-pink-500 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.display},t))})}),(0,cs.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(Kd.A,{className:"w-5 h-5 text-gray-500"}),(0,cs.jsxs)("select",{value:x,onChange:e=>g(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none",children:[(0,cs.jsx)("option",{value:"all",children:"All Buses"}),(0,cs.jsx)("option",{value:"ac",children:"AC Buses"}),(0,cs.jsx)("option",{value:"non_ac",children:"Non-AC Buses"})]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(JV,{className:"w-5 h-5 text-gray-500"}),(0,cs.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none",children:[(0,cs.jsx)("option",{value:"departure",children:"Sort by Departure"}),(0,cs.jsx)("option",{value:"arrival",children:"Sort by Arrival"}),(0,cs.jsx)("option",{value:"fare",children:"Sort by Fare"}),(0,cs.jsx)("option",{value:"seats",children:"Sort by Available Seats"})]})]})]}),0===s.length?(0,cs.jsxs)("div",{className:"text-center py-12",children:[(0,cs.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\ud83d\ude8c"}),(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No buses found"}),(0,cs.jsx)("p",{className:"text-gray-600 mb-4",children:"We couldn't find any buses for your selected route and date."}),(0,cs.jsx)("button",{onClick:()=>t("/pax/dashboard"),className:"px-6 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600 transition-colors",children:"Search Again"})]}):(0,cs.jsx)("div",{className:"space-y-4",children:S.map(e=>(0,cs.jsx)($V,{trip:e,isExpanded:c===e._id,selectedSeats:u[e._id]||[],onViewSeats:()=>(e=>{d(e._id),h(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e._id]:t[e._id]||[]}))})(e),onCloseSeats:A,onSeatSelect:t=>((e,t)=>{h(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:[...s[e]||[],t]}))})(e._id,t),onSeatDeselect:t=>((e,t)=>{h(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:(s[e]||[]).filter(e=>e!==t)}))})(e._id,t),onBookNow:(e,s)=>((e,s)=>{console.log("\ud83c\udfab Continue to board/drop for trip:",e._id,"seats:",s),t("/pax/board-drop/".concat(e._id),{state:{trip:e,selectedSeats:s,fromCity:f,toCity:y,date:N}})})(e,s)},e._id))})]})]})},XV=e=>{let{time:t,title:s,subtitle:r,selected:a,onSelect:n}=e;return(0,cs.jsxs)("button",{onClick:n,className:"w-full text-left px-6 py-4 border-b border-gray-100 hover:bg-gray-50 flex items-center justify-between transition-all duration-200 ".concat(a?"bg-pink-50 border-pink-200":""),children:[(0,cs.jsxs)("div",{className:"flex items-center gap-4",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,cs.jsx)(sd.A,{className:"w-5 h-5 text-gray-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"text-sm font-medium text-gray-900",children:s}),r&&(0,cs.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:r})]})]}),(0,cs.jsx)("div",{className:"w-6 h-6 rounded-full border-2 transition-all duration-200 ".concat(a?"bg-pink-500 border-pink-500":"border-gray-300"),children:a&&(0,cs.jsx)("div",{className:"w-full h-full rounded-full bg-white scale-50"})})]})},ZV=e=>{let{title:t,children:s}=e;return(0,cs.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,cs.jsx)("div",{className:"px-6 py-4 text-lg font-semibold text-gray-800 border-b border-gray-100 bg-gray-50",children:(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(gs.A,{className:"w-5 h-5 text-pink-600"}),t]})}),(0,cs.jsx)("div",{className:"divide-y divide-gray-100",children:s})]})};function eK(){const{tripId:e}=se(),{state:t}=Z(),s=te(),[a,n]=(0,r.useState)((null===t||void 0===t?void 0:t.trip)||{_id:e}),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(null),h=(e,t)=>{const[s,r]=e.split(":").map(Number),a=60*s+r+t,n=Math.floor(a/60)%24,i=a%60;return"".concat(n.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"))},m=(e,t)=>{const[s,r]=e.split(":").map(Number),a=60*s+r-t,n=Math.floor(a/60)%24,i=a%60;return"".concat(n.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"))};(0,r.useEffect)(()=>{if(!a._id&&e){(async()=>{try{o(!0);const s=await(0,xs.nr)("/api/trips/".concat(e));if(s.ok){var t;const e=(null===(t=s.data)||void 0===t?void 0:t.data)||s.data;n(e)}}catch(s){console.error("Error loading trip:",s)}finally{o(!1)}})()}},[e,a._id]);const p=(0,r.useMemo)(()=>{var e;return(null===a||void 0===a||null===(e=a.routeStops)||void 0===e?void 0:e.boardingPoints)||[{id:"central",time:(null===a||void 0===a?void 0:a.startTime)||"08:00",title:"".concat((null===a||void 0===a?void 0:a.fromCity)||"Origin"," Central Bus Stand"),subtitle:"Main boarding point with all facilities"},{id:"railway",time:h((null===a||void 0===a?void 0:a.startTime)||"08:00",15),title:"".concat((null===a||void 0===a?void 0:a.fromCity)||"Origin"," Railway Station"),subtitle:"Near railway station entrance"},{id:"airport",time:h((null===a||void 0===a?void 0:a.startTime)||"08:00",30),title:"".concat((null===a||void 0===a?void 0:a.fromCity)||"Origin"," Airport"),subtitle:"Airport terminal pickup point"}]},[a]),x=(0,r.useMemo)(()=>{var e;return(null===a||void 0===a||null===(e=a.routeStops)||void 0===e?void 0:e.droppingPoints)||[{id:"central",time:(null===a||void 0===a?void 0:a.endTime)||"12:00",title:"".concat((null===a||void 0===a?void 0:a.toCity)||"Destination"," Central Bus Stand"),subtitle:"Main dropping point with all facilities"},{id:"railway",time:m((null===a||void 0===a?void 0:a.endTime)||"12:00",15),title:"".concat((null===a||void 0===a?void 0:a.toCity)||"Destination"," Railway Station"),subtitle:"Near railway station entrance"},{id:"airport",time:m((null===a||void 0===a?void 0:a.endTime)||"12:00",30),title:"".concat((null===a||void 0===a?void 0:a.toCity)||"Destination"," Airport"),subtitle:"Airport terminal drop point"}]},[a]),g=l&&d,f=()=>{s("/passenger/seats/".concat(e),{state:{trip:a,selectedSeats:(null===t||void 0===t?void 0:t.selectedSeats)||[],boarding:l,dropping:d}})};return(0,r.useEffect)(()=>{if(g){const e=setTimeout(f,1e3);return()=>clearTimeout(e)}},[g]),i?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-pink-600 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-600 text-lg",children:"Loading trip details..."})]})}):(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,cs.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,cs.jsxs)("div",{className:"mb-8",children:[(0,cs.jsxs)("button",{onClick:()=>s("/passenger/results"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-4",children:[(0,cs.jsx)(Su,{className:"w-4 h-4"}),"Back to Results"]}),(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Select Boarding & Dropping Points"}),(0,cs.jsxs)("p",{className:"text-gray-600 mt-2",children:[null===a||void 0===a?void 0:a.routeName," \u2022 ",new Date((null===a||void 0===a?void 0:a.serviceDate)||Date.now()).toDateString()]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-600 mb-8",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-gray-600",children:"1"}),(0,cs.jsx)("span",{children:"Select Trip"})]}),(0,cs.jsx)(td,{className:"w-4 h-4 text-gray-400"}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("div",{className:"w-8 h-8 bg-pink-500 rounded-full flex items-center justify-center text-white",children:"2"}),(0,cs.jsx)("span",{className:"font-semibold text-pink-600",children:"Board/Drop Point"})]}),(0,cs.jsx)(td,{className:"w-4 h-4 text-gray-400"}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-gray-600",children:"3"}),(0,cs.jsx)("span",{children:"Passenger Info"})]}),(0,cs.jsx)(td,{className:"w-4 h-4 text-gray-400"}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-gray-600",children:"4"}),(0,cs.jsx)("span",{children:"Payment"})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,cs.jsx)(ZV,{title:"Boarding Points",children:p.map(e=>(0,cs.jsx)(XV,{time:e.time,title:"".concat(e.time," - ").concat(e.title),subtitle:e.subtitle,selected:(null===l||void 0===l?void 0:l.id)===e.id,onSelect:()=>c(e)},e.id))}),(0,cs.jsx)(ZV,{title:"Dropping Points",children:x.map(e=>(0,cs.jsx)(XV,{time:e.time,title:"".concat(e.time," - ").concat(e.title),subtitle:e.subtitle,selected:(null===d||void 0===d?void 0:d.id)===e.id,onSelect:()=>u(e)},e.id))})]}),l&&d&&(0,cs.jsxs)("div",{className:"mt-8 bg-green-50 border border-green-200 rounded-xl p-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:"Selection Summary"}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,cs.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Boarding Point"}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600",children:[l.time," - ",l.title]}),(0,cs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:l.subtitle})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,cs.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Dropping Point"}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600",children:[d.time," - ",d.title]}),(0,cs.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:d.subtitle})]})]}),(0,cs.jsx)("div",{className:"mt-4 text-center",children:(0,cs.jsx)("p",{className:"text-sm text-green-700",children:"\u2705 Both points selected! Proceeding to passenger details..."})})]}),!g&&(0,cs.jsx)("div",{className:"mt-8 flex justify-center",children:(0,cs.jsxs)("button",{onClick:f,disabled:!g,className:"px-8 py-4 rounded-lg bg-pink-600 hover:bg-pink-700 text-white font-semibold disabled:bg-pink-300 disabled:cursor-not-allowed transition-all duration-200 flex items-center gap-2",children:["Continue to Passenger Info",(0,cs.jsx)(td,{className:"w-5 h-5"})]})})]})})}const tK=()=>{const{tripId:e}=se(),{state:t}=Z(),s=te(),{user:a}=(0,Re.A)(),n=(0,r.useMemo)(()=>(null===t||void 0===t?void 0:t.trip)||null,[null===t||void 0===t?void 0:t.trip]),i=(0,r.useMemo)(()=>(null===t||void 0===t?void 0:t.boarding)||null,[null===t||void 0===t?void 0:t.boarding]),o=(0,r.useMemo)(()=>(null===t||void 0===t?void 0:t.dropping)||null,[null===t||void 0===t?void 0:t.dropping]),[l,c]=(0,r.useState)((null===t||void 0===t?void 0:t.selectedSeats)||[]),[d,u]=(0,r.useState)(!1),[h,m]=(0,r.useState)(null);(0,r.useEffect)(()=>{!n&&e&&(async()=>{if(!n)try{u(!0);const s=await(0,xs.nr)("/api/trips/".concat(e));var t;if(s.ok)(null===(t=s.data)||void 0===t?void 0:t.data)||s.data}catch(s){console.error("Error loading trip details:",s),m("Failed to load trip details")}finally{u(!1)}})()},[e,n]);return d?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-500 mx-auto"}),(0,cs.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading seat selection..."})]})}):h?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-red-600 mb-4",children:(0,cs.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,cs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,cs.jsx)("p",{className:"text-red-600 mb-4",children:h}),(0,cs.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Retry"})]})}):n?(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,cs.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[(0,cs.jsx)("div",{className:"font-medium text-gray-900",children:"1. Select seats"}),(0,cs.jsx)("div",{className:"font-semibold text-pink-600",children:"2. Board/Drop point"}),(0,cs.jsx)("div",{className:"font-semibold text-pink-600",children:"3. Passenger Info"}),(0,cs.jsx)("div",{children:"4. Payment"})]})})}),(0,cs.jsx)(_u,{trip:n,selectedSeats:l,onSeatSelect:e=>{c(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},onBack:()=>{s("/passenger/boarddrop/".concat(e),{state:{trip:n,selectedSeats:l,boarding:i,dropping:o}})},onContinue:()=>{s("/passenger/booking/".concat(e),{state:{trip:n,selectedSeats:l,boarding:i,dropping:o}})},passengerGender:(null===a||void 0===a?void 0:a.gender)||"male"})]}):(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("p",{className:"text-gray-600 mb-4",children:"Trip not found"}),(0,cs.jsx)("button",{onClick:()=>s("/passenger/search"),className:"px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700",children:"Back to Search"})]})})},sK=()=>{const{pnr:e}=se(),[t]=Me(),s=te(),a=e||t.get("pnr"),[n,i]=(0,r.useState)(null),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{!async function(){if(!a)return d("No PNR provided"),void l(!1);try{l(!0);const d=await(0,xs.nr)("/api/booking/pnr/".concat(a));if(d.ok&&d.data){var e,t,s,r,n,o,c,u,h,m,p,x,g,f,y,b,v,j,N,w,k,A,S,C;const l=d.data;console.log("\ud83c\udfab Fetched booking data:",l),console.log("\ud83c\udfab Customer data:",l.customer),console.log("\ud83c\udfab Customer name:",null===(e=l.customer)||void 0===e?void 0:e.name);const _={pnr:a,bookingId:l.bookingId,status:l.status||"confirmed",passengerName:(null===(t=l.customer)||void 0===t?void 0:t.name)||"Guest Passenger",passengerEmail:(null===(s=l.customer)||void 0===s?void 0:s.email)||"",passengerPhone:(null===(r=l.customer)||void 0===r?void 0:r.phone)||"",passengerAge:(null===(n=l.customer)||void 0===n?void 0:n.age)||"",passengerGender:(null===(o=l.customer)||void 0===o?void 0:o.gender)||"",from:(null===(c=l.journey)||void 0===c?void 0:c.from)||"Origin",to:(null===(u=l.journey)||void 0===u?void 0:u.to)||"Destination",departureDate:(null===(h=l.journey)||void 0===h?void 0:h.departureDate)||(new Date).toISOString().split("T")[0],departureTime:(null===(m=l.journey)||void 0===m?void 0:m.departureTime)||"08:00",arrivalTime:(null===(p=l.journey)||void 0===p?void 0:p.arrivalTime)||"14:00",seatNumbers:(null===(x=l.seats)||void 0===x?void 0:x.map(e=>e.seatNumber).join(", "))||"U1",amount:(null===(g=l.pricing)||void 0===g?void 0:g.totalAmount)||450,boardingPoint:(null===(f=l.journey)||void 0===f?void 0:f.boardingPoint)||"Central Bus Stand",droppingPoint:(null===(y=l.journey)||void 0===y?void 0:y.droppingPoint)||"Central Bus Stand",busNumber:(null===(b=l.bus)||void 0===b?void 0:b.busNumber)||"KL-07-AB-1234",busType:(null===(v=l.bus)||void 0===v?void 0:v.busType)||"AC Sleeper",qrData:JSON.stringify({pnr:a,bookingId:l.bookingId,passengerName:(null===(j=l.customer)||void 0===j?void 0:j.name)||"Guest Passenger",from:(null===(N=l.journey)||void 0===N?void 0:N.from)||"Origin",to:(null===(w=l.journey)||void 0===w?void 0:w.to)||"Destination",departureDate:(null===(k=l.journey)||void 0===k?void 0:k.departureDate)||(new Date).toISOString().split("T")[0],departureTime:(null===(A=l.journey)||void 0===A?void 0:A.departureTime)||"08:00",seatNumbers:(null===(S=l.seats)||void 0===S?void 0:S.map(e=>e.seatNumber).join(", "))||"U1",amount:(null===(C=l.pricing)||void 0===C?void 0:C.totalAmount)||450})};i(_)}else{const e={pnr:a,bookingId:"BK".concat(Date.now().toString().slice(-8)),status:"confirmed",passengerName:"Guest Passenger",from:"Kochi",to:"Thiruvananthapuram",departureDate:(new Date).toISOString().split("T")[0],departureTime:"08:00",arrivalTime:"14:00",seatNumbers:"U1, U2",amount:450,boardingPoint:"Kochi Central Bus Stand",droppingPoint:"Thiruvananthapuram Central Bus Stand",busNumber:"KL-07-AB-1234",busType:"AC Sleeper",qrData:JSON.stringify({pnr:a,bookingId:"BK".concat(Date.now().toString().slice(-8)),passengerName:"Guest Passenger",from:"Kochi",to:"Thiruvananthapuram",departureDate:(new Date).toISOString().split("T")[0],departureTime:"08:00",seatNumbers:"U1, U2",amount:450})};i(e)}}catch(_){console.error("Error loading ticket:",_),d("Failed to load ticket details")}finally{l(!1)}}()},[a]);return o?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-pink-600 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-600 text-lg",children:"Loading ticket..."})]})}):c||!n?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-red-600 text-lg mb-4",children:c||"Ticket not found"}),(0,cs.jsx)("button",{onClick:()=>s("/passenger/dashboard"),className:"bg-pink-600 text-white px-6 py-2 rounded-lg hover:bg-pink-700",children:"Back to Dashboard"})]})}):(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,cs.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("button",{onClick:()=>s("/passenger/dashboard"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[(0,cs.jsx)(Su,{className:"w-5 h-5"}),"Back to Dashboard"]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(jd.A,{className:"w-5 h-5 text-green-600"}),(0,cs.jsx)("span",{className:"text-sm font-medium text-green-600",children:"Confirmed"})]})]})})}),(0,cs.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,cs.jsx)("div",{className:"lg:col-span-2",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,cs.jsx)("div",{className:"bg-gradient-to-r from-pink-600 to-pink-700 text-white p-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-xl font-bold",children:"YATRIK ERP"}),(0,cs.jsx)("p",{className:"text-pink-100 text-sm",children:"Bus Ticket"})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsx)("p",{className:"text-xs text-pink-100",children:"PNR"}),(0,cs.jsx)("p",{className:"text-lg font-bold",children:n.pnr})]})]})}),(0,cs.jsxs)("div",{className:"p-4 border-b border-gray-100",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:"From"}),(0,cs.jsx)("div",{className:"font-semibold text-gray-900",children:n.from}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:n.departureTime})]}),(0,cs.jsx)("div",{className:"flex-1 mx-4",children:(0,cs.jsxs)("div",{className:"flex items-center justify-center",children:[(0,cs.jsx)("div",{className:"w-full h-px bg-gray-300"}),(0,cs.jsx)(ks.A,{className:"w-4 h-4 text-gray-400 mx-2"}),(0,cs.jsx)("div",{className:"w-full h-px bg-gray-300"})]})}),(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:"To"}),(0,cs.jsx)("div",{className:"font-semibold text-gray-900",children:n.to}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:n.arrivalTime})]})]}),(0,cs.jsx)("div",{className:"text-center mt-3",children:(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:new Date(n.departureDate).toLocaleDateString("en-IN",{weekday:"short",day:"numeric",month:"short",year:"numeric"})})})]}),(0,cs.jsx)("div",{className:"p-4",children:(0,cs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:"Passenger"}),(0,cs.jsx)("div",{className:"font-medium text-gray-900",children:n.passengerName}),n.passengerAge&&(0,cs.jsxs)("div",{className:"text-xs text-gray-500",children:["Age: ",n.passengerAge]}),n.passengerGender&&(0,cs.jsxs)("div",{className:"text-xs text-gray-500 capitalize",children:["Gender: ",n.passengerGender]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:"Seats"}),(0,cs.jsx)("div",{className:"font-medium text-gray-900",children:n.seatNumbers})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:"Booking ID"}),(0,cs.jsx)("div",{className:"font-medium text-gray-900 text-sm",children:n.bookingId})]}),n.passengerEmail&&(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:"Email"}),(0,cs.jsx)("div",{className:"font-medium text-gray-900 text-sm",children:n.passengerEmail})]}),n.passengerPhone&&(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:"Phone"}),(0,cs.jsx)("div",{className:"font-medium text-gray-900 text-sm",children:n.passengerPhone})]})]}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:"Bus"}),(0,cs.jsx)("div",{className:"font-medium text-gray-900",children:n.busNumber}),(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:n.busType})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:"Amount"}),(0,cs.jsxs)("div",{className:"font-semibold text-pink-600 text-lg",children:["\u20b9",n.amount]})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"text-xs text-gray-500",children:"Status"}),(0,cs.jsx)("div",{className:"font-medium text-green-600",children:"Confirmed"})]})]})]})})]})}),(0,cs.jsx)("div",{className:"lg:col-span-1",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("div",{className:"text-center mb-4",children:[(0,cs.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"QR Code"}),(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:"Present at boarding"})]}),(0,cs.jsx)("div",{className:"flex justify-center mb-4",children:(0,cs.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border-2 border-gray-200",children:(0,cs.jsx)(Xu,{value:n.qrData,size:160,includeMargin:!0,level:"M"})})}),(0,cs.jsxs)("div",{className:"text-center mb-4",children:[(0,cs.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Valid for this journey only"}),(0,cs.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,cs.jsx)(sd.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:"Boarding 30 min before"})]})]}),(0,cs.jsxs)("button",{onClick:()=>{var e;const t="\nYATRIK ERP - BUS TICKET\n========================\n\nPNR: ".concat(null===n||void 0===n?void 0:n.pnr,"\nBooking ID: ").concat(null===n||void 0===n?void 0:n.bookingId,"\nStatus: ").concat(null===n||void 0===n||null===(e=n.status)||void 0===e?void 0:e.toUpperCase(),"\n\nPASSENGER DETAILS:\nName: ").concat(null===n||void 0===n?void 0:n.passengerName,"\nAge: ").concat((null===n||void 0===n?void 0:n.passengerAge)||"N/A","\nGender: ").concat((null===n||void 0===n?void 0:n.passengerGender)||"N/A","\nEmail: ").concat((null===n||void 0===n?void 0:n.passengerEmail)||"N/A","\nPhone: ").concat((null===n||void 0===n?void 0:n.passengerPhone)||"N/A","\n\nJOURNEY DETAILS:\nFrom: ").concat(null===n||void 0===n?void 0:n.from,"\nTo: ").concat(null===n||void 0===n?void 0:n.to,"\nDate: ").concat(null===n||void 0===n?void 0:n.departureDate,"\nDeparture: ").concat(null===n||void 0===n?void 0:n.departureTime,"\nArrival: ").concat(null===n||void 0===n?void 0:n.arrivalTime,"\nSeats: ").concat(null===n||void 0===n?void 0:n.seatNumbers,"\n\nBOARDING/DROPPING:\nBoarding: ").concat(null===n||void 0===n?void 0:n.boardingPoint,"\nDropping: ").concat(null===n||void 0===n?void 0:n.droppingPoint,"\n\nBUS DETAILS:\nBus Number: ").concat(null===n||void 0===n?void 0:n.busNumber,"\nBus Type: ").concat(null===n||void 0===n?void 0:n.busType,"\n\nAMOUNT: \u20b9").concat(null===n||void 0===n?void 0:n.amount,"\n\nPlease present this ticket at boarding.\n    ").trim(),s=new Blob([t],{type:"text/plain"}),r=URL.createObjectURL(s),i=document.createElement("a");i.href=r,i.download="ticket-".concat(a,".txt"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},className:"w-full flex items-center justify-center gap-2 bg-pink-600 text-white px-4 py-2 rounded-lg hover:bg-pink-700 transition-colors text-sm",children:[(0,cs.jsx)(hd.A,{className:"w-4 h-4"}),"Download Ticket"]})]})}),(0,cs.jsx)("div",{className:"lg:col-span-2",children:(0,cs.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[(0,cs.jsxs)("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,cs.jsx)(gs.A,{className:"w-5 h-5"}),"Boarding & Drop Points"]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Boarding Point"}),(0,cs.jsx)("div",{className:"font-medium text-gray-900",children:n.boardingPoint})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Drop Point"}),(0,cs.jsx)("div",{className:"font-medium text-gray-900",children:n.droppingPoint})]})]})]})})]}),(0,cs.jsxs)("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-xl p-6",children:[(0,cs.jsx)("h3",{className:"font-semibold text-blue-900 mb-3",children:"Important Instructions"}),(0,cs.jsxs)("ul",{className:"text-sm text-blue-800 space-y-2",children:[(0,cs.jsx)("li",{children:"\u2022 Arrive at the boarding point at least 30 minutes before departure"}),(0,cs.jsx)("li",{children:"\u2022 Present this QR code to the conductor for validation"}),(0,cs.jsx)("li",{children:"\u2022 Keep your ticket safe throughout the journey"}),(0,cs.jsx)("li",{children:"\u2022 In case of any issues, contact our support team"})]})]}),(0,cs.jsxs)("div",{className:"mt-8 flex flex-col sm:flex-row gap-4",children:[(0,cs.jsx)("button",{onClick:()=>s("/passenger/dashboard"),className:"flex-1 bg-gray-600 text-white py-3 px-6 rounded-lg hover:bg-gray-700 transition-colors",children:"Back to Dashboard"}),(0,cs.jsx)("button",{onClick:()=>s("/passenger/search"),className:"flex-1 bg-pink-600 text-white py-3 px-6 rounded-lg hover:bg-pink-700 transition-colors",children:"Book Another Trip"})]})]})]})},rK=()=>{const e=te(),[t,s]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[i,o]=(0,r.useState)(null),[l,c]=(0,r.useState)("all");(0,r.useEffect)(()=>{d()},[]);const d=async()=>{try{n(!0);s([{id:"1",pnr:"PNR12345678",bookingId:"BK12345678",status:"confirmed",trip:{from:"Kochi",to:"Thiruvananthapuram",date:"2024-01-15",departureTime:"08:00",arrivalTime:"12:00",duration:"4h 00m",busType:"Semi-Deluxe",busNumber:"KL-01-AB-1234"},seats:["U1","U2"],passengers:[{name:"John Doe",age:25,gender:"Male"},{name:"Jane Doe",age:23,gender:"Female"}],fare:{baseFare:450,totalAmount:900,paidAmount:900},bookingDate:"2024-01-10",boardingPoint:"Kochi Central Bus Stand",droppingPoint:"Thiruvananthapuram Central Bus Stand"},{id:"2",pnr:"PNR87654321",bookingId:"BK87654321",status:"completed",trip:{from:"Kozhikode",to:"Kochi",date:"2024-01-05",departureTime:"14:00",arrivalTime:"18:30",duration:"4h 30m",busType:"Deluxe",busNumber:"KL-02-CD-5678"},seats:["L1"],passengers:[{name:"Alice Smith",age:30,gender:"Female"}],fare:{baseFare:600,totalAmount:600,paidAmount:600},bookingDate:"2024-01-01",boardingPoint:"Kozhikode Central Bus Stand",droppingPoint:"Kochi Central Bus Stand"},{id:"3",pnr:"PNR11223344",bookingId:"BK11223344",status:"cancelled",trip:{from:"Kollam",to:"Kochi",date:"2024-01-12",departureTime:"10:00",arrivalTime:"13:00",duration:"3h 00m",busType:"Ordinary",busNumber:"KL-03-EF-9012"},seats:["U5"],passengers:[{name:"Bob Johnson",age:28,gender:"Male"}],fare:{baseFare:200,totalAmount:200,paidAmount:200,refundAmount:180},bookingDate:"2024-01-08",boardingPoint:"Kollam Central Bus Stand",droppingPoint:"Kochi Central Bus Stand"}])}catch(i){console.error("Error fetching tickets:",i),o("Failed to load tickets")}finally{n(!1)}},u=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},h=t.filter(e=>"all"===l||e.status===l);return a?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,cs.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:(0,cs.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,cs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600"})})})}):i?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,cs.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-red-600 text-lg mb-4",children:i}),(0,cs.jsx)("button",{onClick:()=>e("/passenger/dashboard"),className:"bg-pink-600 text-white px-6 py-2 rounded-lg",children:"Back to Dashboard"})]})})}):(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,cs.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,cs.jsxs)("div",{className:"mb-8",children:[(0,cs.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"My Tickets"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"View and manage your bus tickets"})]}),(0,cs.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-4 mb-6",children:(0,cs.jsxs)("div",{className:"flex items-center gap-4",children:[(0,cs.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Filter by status:"}),(0,cs.jsx)("div",{className:"flex gap-2",children:[{value:"all",label:"All"},{value:"confirmed",label:"Confirmed"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"},{value:"pending",label:"Pending"}].map(e=>(0,cs.jsx)("button",{onClick:()=>c(e.value),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat(l===e.value?"bg-pink-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.label},e.value))})]})}),0===h.length?(0,cs.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-8 text-center",children:[(0,cs.jsx)(Cs.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,cs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tickets found"}),(0,cs.jsx)("p",{className:"text-gray-600 mb-6",children:"all"===l?"You haven't booked any tickets yet.":"No ".concat(l," tickets found.")}),(0,cs.jsx)("button",{onClick:()=>e("/passenger/search"),className:"bg-pink-600 text-white px-6 py-2 rounded-lg hover:bg-pink-700 transition-colors",children:"Book Your First Ticket"})]}):(0,cs.jsx)("div",{className:"space-y-4",children:h.map(t=>(0,cs.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-6",children:[(0,cs.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-3",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-pink-100 rounded-lg flex items-center justify-center",children:(0,cs.jsx)(Cs.A,{className:"w-6 h-6 text-pink-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["PNR: ",t.pnr]}),(0,cs.jsxs)("p",{className:"text-sm text-gray-600",children:["Booking ID: ",t.bookingId]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(u(t.status)),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)}),(0,cs.jsxs)("div",{className:"flex gap-2",children:[(0,cs.jsx)("button",{onClick:()=>(t=>{e("/passenger/ticket/".concat(t.pnr))})(t),className:"p-2 text-gray-600 hover:text-pink-600 hover:bg-pink-50 rounded-lg transition-colors",title:"View Ticket",children:(0,cs.jsx)(Nu.A,{className:"w-4 h-4"})}),(0,cs.jsx)("button",{onClick:()=>(e=>{console.log("Downloading ticket:",e.pnr),alert("Downloading ticket ".concat(e.pnr))})(t),className:"p-2 text-gray-600 hover:text-pink-600 hover:bg-pink-50 rounded-lg transition-colors",title:"Download Ticket",children:(0,cs.jsx)(hd.A,{className:"w-4 h-4"})})]})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(gs.A,{className:"w-4 h-4 text-gray-400"}),(0,cs.jsxs)("div",{children:[(0,cs.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[t.trip.from," \u2192 ",t.trip.to]}),(0,cs.jsx)("p",{className:"text-xs text-gray-600",children:t.trip.busType})]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(fs.A,{className:"w-4 h-4 text-gray-400"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-900",children:new Date(t.trip.date).toLocaleDateString()}),(0,cs.jsxs)("p",{className:"text-xs text-gray-600",children:[t.trip.departureTime," - ",t.trip.arrivalTime]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(ks.A,{className:"w-4 h-4 text-gray-400"}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"text-sm font-medium text-gray-900",children:t.trip.busNumber}),(0,cs.jsxs)("p",{className:"text-xs text-gray-600",children:["Seats: ",t.seats.join(", ")]})]})]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[(0,cs.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,cs.jsxs)("p",{children:["Booked on: ",new Date(t.bookingDate).toLocaleDateString()]}),(0,cs.jsxs)("p",{children:["Passengers: ",t.passengers.length]})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:["\u20b9",t.fare.totalAmount]}),t.fare.refundAmount>0&&(0,cs.jsxs)("p",{className:"text-sm text-green-600",children:["Refund: \u20b9",t.fare.refundAmount]})]})]})]},t.id))})]})})},aK=()=>{const e=te(),[t,s]=(0,r.useState)(0),[a,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)("");(0,r.useEffect)(()=>{const e=[{id:1,type:"credit",amount:1e3,description:"Wallet Top-up",method:"UPI",status:"completed",date:"2024-12-15T10:30:00",reference:"TXN123456789"},{id:2,type:"debit",amount:500,description:"Bus Ticket Booking",method:"Wallet",status:"completed",date:"2024-12-15T14:30:00",reference:"BK20241215001",trip:"Kochi \u2192 Thiruvananthapuram"},{id:3,type:"credit",amount:250,description:"Refund - Cancelled Trip",method:"Wallet",status:"completed",date:"2024-12-10T16:45:00",reference:"REF987654321",trip:"Kochi \u2192 Chennai"},{id:4,type:"debit",amount:350,description:"Bus Ticket Booking",method:"Wallet",status:"completed",date:"2024-12-10T08:00:00",reference:"BK20241210002",trip:"Kochi \u2192 Bangalore"},{id:5,type:"credit",amount:500,description:"Wallet Top-up",method:"Credit Card",status:"completed",date:"2024-12-05T12:15:00",reference:"TXN456789123"}];setTimeout(()=>{s(1250),n(e),o(!1)},1e3)},[]);const h=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-amber-100 text-amber-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},m=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return i?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Loading wallet..."})]})}):(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:(0,cs.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,cs.jsx)("div",{className:"flex items-center justify-between h-16",children:(0,cs.jsxs)("div",{className:"flex items-center gap-4",children:[(0,cs.jsx)("button",{onClick:()=>e("/passenger/dashboard"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,cs.jsx)(Su,{className:"w-5 h-5 text-gray-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"My Wallet"}),(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"Manage your wallet balance and transactions"})]})]})})})}),(0,cs.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,cs.jsxs)("div",{className:"bg-gradient-to-r from-teal-500 to-teal-600 rounded-lg shadow-lg text-white p-8 mb-8",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Wallet Balance"}),(0,cs.jsx)("p",{className:"text-teal-100 mb-4",children:"Available for bookings and payments"}),(0,cs.jsxs)("div",{className:"text-4xl font-bold",children:["\u20b9",t]})]}),(0,cs.jsx)("div",{className:"w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:(0,cs.jsx)(FV,{className:"w-8 h-8"})})]}),(0,cs.jsxs)("button",{onClick:()=>c(!0),className:"mt-6 bg-white text-teal-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)(bu.A,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Add Money"})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,cs.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Book Trip"}),(0,cs.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Use wallet balance for bookings"}),(0,cs.jsxs)("button",{onClick:()=>e("/passenger/booking"),className:"text-pink-600 hover:text-pink-700 text-sm font-medium flex items-center space-x-1",children:[(0,cs.jsx)("span",{children:"Book Now"}),(0,cs.jsx)(td,{className:"w-3 h-3"})]})]}),(0,cs.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-pink-100 to-pink-200 rounded-lg flex items-center justify-center",children:(0,cs.jsx)(yu,{className:"w-6 h-6 text-pink-600"})})]})}),(0,cs.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"My Tickets"}),(0,cs.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"View your booked tickets"}),(0,cs.jsxs)("button",{onClick:()=>e("/passenger/tickets"),className:"text-gray-600 hover:text-gray-700 text-sm font-medium flex items-center space-x-1",children:[(0,cs.jsx)("span",{children:"View Tickets"}),(0,cs.jsx)(td,{className:"w-3 h-3"})]})]}),(0,cs.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-100 to-blue-200 rounded-lg flex items-center justify-center",children:(0,cs.jsx)(yu,{className:"w-6 h-6 text-blue-600"})})]})}),(0,cs.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Transaction History"}),(0,cs.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"View all your transactions"}),(0,cs.jsxs)("button",{onClick:()=>document.getElementById("transactions").scrollIntoView({behavior:"smooth"}),className:"text-gray-600 hover:text-gray-700 text-sm font-medium flex items-center space-x-1",children:[(0,cs.jsx)("span",{children:"View History"}),(0,cs.jsx)(td,{className:"w-3 h-3"})]})]}),(0,cs.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-green-100 to-green-200 rounded-lg flex items-center justify-center",children:(0,cs.jsx)(xu.A,{className:"w-6 h-6 text-green-600"})})]})})]}),(0,cs.jsxs)("div",{id:"transactions",className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,cs.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,cs.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Transaction History"}),(0,cs.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"All your wallet transactions"})]}),(0,cs.jsx)("div",{className:"p-6",children:0===a.length?(0,cs.jsxs)("div",{className:"text-center py-8",children:[(0,cs.jsx)(yu,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-500",children:"No transactions found"})]}):(0,cs.jsx)("div",{className:"space-y-4",children:a.map(e=>{return(0,cs.jsxs)("div",{className:"flex items-center justify-between py-4 border-b border-gray-100 last:border-b-0",children:[(0,cs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,cs.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat("credit"===e.type?"bg-green-100":"bg-red-100"),children:(s=e.type,r=e.status,"pending"===r?(0,cs.jsx)(Nd.A,{className:"w-5 h-5 text-amber-500"}):"failed"===r?(0,cs.jsx)(bh,{className:"w-5 h-5 text-red-500"}):"credit"===s?(0,cs.jsx)(xu.A,{className:"w-5 h-5 text-green-500"}):(0,cs.jsx)(yV.A,{className:"w-5 h-5 text-red-500"}))}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("p",{className:"font-medium text-gray-900",children:e.description}),e.trip&&(0,cs.jsx)("p",{className:"text-sm text-gray-600",children:e.trip}),(0,cs.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500 mt-1",children:[(0,cs.jsxs)("span",{className:"flex items-center gap-1",children:[(0,cs.jsx)(fs.A,{className:"w-3 h-3"}),(t=e.date,new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))]}),(0,cs.jsxs)("span",{className:"flex items-center gap-1",children:[(0,cs.jsx)(sd.A,{className:"w-3 h-3"}),m(e.date)]}),(0,cs.jsx)("span",{children:e.method})]})]})]}),(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsxs)("div",{className:"font-semibold ".concat("credit"===e.type?"text-green-600":"text-red-600"),children:["credit"===e.type?"+":"-","\u20b9",e.amount]}),(0,cs.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(h(e.status)),children:e.status})]})]},e.id);var t,s,r})})})]})]}),l&&(0,cs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add Money to Wallet"}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (\u20b9)"}),(0,cs.jsx)("input",{type:"number",value:d,onChange:e=>u(e.target.value),placeholder:"Enter amount",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none",min:"1"})]}),(0,cs.jsx)("div",{className:"flex gap-2",children:[100,500,1e3,2e3].map(e=>(0,cs.jsxs)("button",{onClick:()=>u(e.toString()),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 transition-colors",children:["\u20b9",e]},e))})]}),(0,cs.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,cs.jsx)("button",{onClick:()=>c(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,cs.jsx)("button",{onClick:()=>{const e=parseFloat(d);if(e>0){const t={id:Date.now(),type:"credit",amount:e,description:"Wallet Top-up",method:"UPI",status:"completed",date:(new Date).toISOString(),reference:"TXN".concat(Date.now())};s(t=>t+e),n(e=>[t,...e]),u(""),c(!1)}},disabled:!d||parseFloat(d)<=0,className:"flex-1 px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Add Money"})]})]})})]})},nK=(0,Ns.A)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),iK=()=>{const e=te(),[t,s]=(0,r.useState)([]),[a,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{const e=[{id:1,route:"Kochi \u2192 Bangalore",bookings:2500,rating:4.8,avgFare:450,duration:"6h 30m",departureTimes:["08:00","14:00","22:00"],amenities:["AC","WiFi","USB Charging"],operator:"Kerala State Transport",image:"/api/placeholder/300/200"},{id:2,route:"Kochi \u2192 Chennai",bookings:1800,rating:4.7,avgFare:600,duration:"8h 0m",departureTimes:["20:00","22:00"],amenities:["AC","WiFi","Water Bottle"],operator:"Kerala State Transport",image:"/api/placeholder/300/200"},{id:3,route:"Kochi \u2192 Mumbai",bookings:1200,rating:4.6,avgFare:800,duration:"12h 0m",departureTimes:["18:00","20:00"],amenities:["AC","WiFi","USB Charging","Water Bottle"],operator:"Kerala State Transport",image:"/api/placeholder/300/200"},{id:4,route:"Kochi \u2192 Thiruvananthapuram",bookings:3200,rating:4.5,avgFare:250,duration:"4h 30m",departureTimes:["06:00","08:00","14:00","18:00"],amenities:["AC","WiFi"],operator:"Kerala State Transport",image:"/api/placeholder/300/200"},{id:5,route:"Kochi \u2192 Hyderabad",bookings:900,rating:4.4,avgFare:700,duration:"10h 0m",departureTimes:["19:00"],amenities:["AC","WiFi","USB Charging"],operator:"Kerala State Transport",image:"/api/placeholder/300/200"},{id:6,route:"Kochi \u2192 Goa",bookings:1500,rating:4.9,avgFare:550,duration:"7h 0m",departureTimes:["21:00"],amenities:["AC","WiFi","USB Charging","Water Bottle"],operator:"Kerala State Transport",image:"/api/placeholder/300/200"}],t=[{id:1,route:"Kochi \u2192 Thiruvananthapuram",count:5,lastTrip:"Dec 10, 2024",avgFare:250,favoriteTime:"14:00",totalSpent:1250},{id:2,route:"Kochi \u2192 Bangalore",count:3,lastTrip:"Nov 28, 2024",avgFare:450,favoriteTime:"08:00",totalSpent:1350},{id:3,route:"Kochi \u2192 Chennai",count:2,lastTrip:"Nov 15, 2024",avgFare:600,favoriteTime:"20:00",totalSpent:1200}];setTimeout(()=>{s(e),n(t),o(!1)},1e3)},[]);return i?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Loading recommendations..."})]})}):(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:(0,cs.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,cs.jsx)("div",{className:"flex items-center justify-between h-16",children:(0,cs.jsxs)("div",{className:"flex items-center gap-4",children:[(0,cs.jsx)("button",{onClick:()=>e("/passenger/dashboard"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,cs.jsx)(Su,{className:"w-5 h-5 text-gray-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Recommendations"}),(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"Discover popular routes and your frequent trips"})]})]})})})}),(0,cs.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,cs.jsxs)("div",{className:"mb-12",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,cs.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-100 to-purple-200 rounded-lg flex items-center justify-center",children:(0,cs.jsx)(rd.A,{className:"w-5 h-5 text-purple-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Popular Routes"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Most booked destinations from Kochi"})]})]}),(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(t=>(0,cs.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:(0,cs.jsxs)("div",{className:"p-6",children:[(0,cs.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t.route}),(0,cs.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,cs.jsx)(Ss.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:[t.bookings.toLocaleString()," bookings"]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,cs.jsx)(rd.A,{className:"w-4 h-4 text-yellow-400 fill-current"}),(0,cs.jsx)("span",{children:t.rating})]})]})]}),(0,cs.jsx)("button",{className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:(0,cs.jsx)(xd,{className:"w-5 h-5"})})]}),(0,cs.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Average Fare"}),(0,cs.jsxs)("span",{className:"font-semibold text-gray-900",children:["\u20b9",t.avgFare]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Duration"}),(0,cs.jsx)("span",{className:"font-semibold text-gray-900",children:t.duration})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Departure Times"}),(0,cs.jsx)("span",{className:"font-semibold text-gray-900",children:t.departureTimes.join(", ")})]})]}),(0,cs.jsxs)("div",{className:"mb-4",children:[(0,cs.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Amenities:"})}),(0,cs.jsx)("div",{className:"flex flex-wrap gap-2",children:t.amenities.map((e,t)=>(0,cs.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs",children:e},t))})]}),(0,cs.jsxs)("div",{className:"flex gap-2",children:[(0,cs.jsxs)("button",{onClick:()=>(t=>{const[s,r]=t.split(" \u2192 ");e("/passenger/booking",{state:{fromCity:s,toCity:r,date:(new Date).toISOString().split("T")[0]}})})(t.route),className:"flex-1 bg-gradient-to-r from-pink-600 to-pink-700 text-white py-2 px-4 rounded-lg hover:from-pink-700 hover:to-pink-800 transition-all duration-200 flex items-center justify-center space-x-2",children:[(0,cs.jsx)("span",{children:"Book Now"}),(0,cs.jsx)(td,{className:"w-4 h-4"})]}),(0,cs.jsx)("button",{className:"p-2 border border-gray-300 text-gray-600 rounded-lg hover:bg-gray-50 transition-colors",children:(0,cs.jsx)(nK,{className:"w-4 h-4"})})]})]})},t.id))})]}),(0,cs.jsxs)("div",{className:"mb-12",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,cs.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-teal-100 to-teal-200 rounded-lg flex items-center justify-center",children:(0,cs.jsx)(xu.A,{className:"w-5 h-5 text-teal-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Frequent Trips"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Based on your booking history"})]})]}),(0,cs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(t=>(0,cs.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:(0,cs.jsxs)("div",{className:"p-6",children:[(0,cs.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t.route}),(0,cs.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,cs.jsx)(ks.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:[t.count," trips"]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,cs.jsx)(fs.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:["Last: ",t.lastTrip]})]})]})]}),(0,cs.jsx)("button",{className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:(0,cs.jsx)(xd,{className:"w-5 h-5"})})]}),(0,cs.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Average Fare"}),(0,cs.jsxs)("span",{className:"font-semibold text-gray-900",children:["\u20b9",t.avgFare]})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Favorite Time"}),(0,cs.jsx)("span",{className:"font-semibold text-gray-900",children:t.favoriteTime})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,cs.jsx)("span",{className:"text-gray-600",children:"Total Spent"}),(0,cs.jsxs)("span",{className:"font-semibold text-gray-900",children:["\u20b9",t.totalSpent]})]})]}),(0,cs.jsxs)("button",{onClick:()=>(t=>{const[s,r]=t.route.split(" \u2192 ");e("/passenger/booking",{state:{fromCity:s,toCity:r,date:(new Date).toISOString().split("T")[0],preferredTime:t.favoriteTime}})})(t),className:"w-full bg-gradient-to-r from-teal-600 to-teal-700 text-white py-2 px-4 rounded-lg hover:from-teal-700 hover:to-teal-800 transition-all duration-200 flex items-center justify-center space-x-2",children:[(0,cs.jsx)("span",{children:"Book This Route"}),(0,cs.jsx)(td,{className:"w-4 h-4"})]})]})},t.id))})]}),(0,cs.jsxs)("div",{className:"bg-gradient-to-r from-pink-500 to-pink-600 rounded-lg shadow-lg text-white p-8",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Ready for your next trip?"}),(0,cs.jsx)("p",{className:"text-pink-100 mb-4",children:"Search and book buses to any destination"})]}),(0,cs.jsx)("div",{className:"w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:(0,cs.jsx)(ks.A,{className:"w-8 h-8"})})]}),(0,cs.jsxs)("button",{onClick:()=>e("/passenger/booking"),className:"mt-6 bg-white text-pink-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors flex items-center space-x-2",children:[(0,cs.jsx)("span",{children:"Search & Book"}),(0,cs.jsx)(td,{className:"w-5 h-5"})]})]})]})]})},oK=(0,Ns.A)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),lK=()=>{const{user:e,logout:t}=(0,Re.A)(),s=te(),[a,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)({name:"",email:"",phone:"",dateOfBirth:"",address:"",city:"",state:"",pincode:"",emergencyContact:"",emergencyPhone:"",preferences:{notifications:!0,emailUpdates:!0,smsUpdates:!1,preferredLanguage:"English",seatPreference:"Window"}});(0,r.useEffect)(()=>{const t={name:(null===e||void 0===e?void 0:e.name)||"John Doe",email:(null===e||void 0===e?void 0:e.email)||"john.doe@example.com",phone:"+91 9876543210",dateOfBirth:"1990-05-15",address:"123 Main Street, MG Road",city:"Kochi",state:"Kerala",pincode:"682001",emergencyContact:"Jane Doe",emergencyPhone:"+91 9876543211",preferences:{notifications:!0,emailUpdates:!0,smsUpdates:!1,preferredLanguage:"English",seatPreference:"Window"}};setTimeout(()=>{c(t),o(!1)},1e3)},[e]);const d=(e,t)=>{if(e.includes(".")){const[s,r]=e.split(".");c(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[s]:(0,Ie.A)((0,Ie.A)({},e[s]),{},{[r]:t})}))}else c(s=>(0,Ie.A)((0,Ie.A)({},s),{},{[e]:t}))};return i?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-600",children:"Loading profile..."})]})}):(0,cs.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,cs.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:(0,cs.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-4",children:[(0,cs.jsx)("button",{onClick:()=>s("/passenger/dashboard"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,cs.jsx)(Su,{className:"w-5 h-5 text-gray-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"My Profile"}),(0,cs.jsx)("p",{className:"text-sm text-gray-500",children:"Manage your account settings and preferences"})]})]}),(0,cs.jsx)("div",{className:"flex items-center gap-2",children:a?(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)("button",{onClick:()=>n(!1),className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:(0,cs.jsx)(Bs.A,{className:"w-4 h-4"})}),(0,cs.jsxs)("button",{onClick:()=>{console.log("Saving profile:",l),n(!1)},className:"px-3 py-2 text-sm bg-pink-600 text-white hover:bg-pink-700 rounded-lg transition-colors flex items-center gap-2",children:[(0,cs.jsx)(Uh.A,{className:"w-4 h-4"}),"Save"]})]}):(0,cs.jsxs)("button",{onClick:()=>n(!0),className:"px-3 py-2 text-sm bg-pink-600 text-white hover:bg-pink-700 rounded-lg transition-colors flex items-center gap-2",children:[(0,cs.jsx)(gV,{className:"w-4 h-4"}),"Edit Profile"]})})]})})}),(0,cs.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,cs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,cs.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[(0,cs.jsx)(Ts.A,{className:"w-5 h-5"}),"Personal Information"]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),a?(0,cs.jsx)("input",{type:"text",value:l.name,onChange:e=>d("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"}):(0,cs.jsx)("p",{className:"text-gray-900",children:l.name})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a?(0,cs.jsx)("input",{type:"email",value:l.email,onChange:e=>d("email",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"}):(0,cs.jsx)("p",{className:"text-gray-900",children:l.email})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),a?(0,cs.jsx)("input",{type:"tel",value:l.phone,onChange:e=>d("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"}):(0,cs.jsx)("p",{className:"text-gray-900",children:l.phone})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),a?(0,cs.jsx)("input",{type:"date",value:l.dateOfBirth,onChange:e=>d("dateOfBirth",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"}):(0,cs.jsx)("p",{className:"text-gray-900",children:new Date(l.dateOfBirth).toLocaleDateString()})]})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[(0,cs.jsx)(gs.A,{className:"w-5 h-5"}),"Address Information"]}),(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),a?(0,cs.jsx)("textarea",{value:l.address,onChange:e=>d("address",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"}):(0,cs.jsx)("p",{className:"text-gray-900",children:l.address})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),a?(0,cs.jsx)("input",{type:"text",value:l.city,onChange:e=>d("city",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"}):(0,cs.jsx)("p",{className:"text-gray-900",children:l.city})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),a?(0,cs.jsx)("input",{type:"text",value:l.state,onChange:e=>d("state",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"}):(0,cs.jsx)("p",{className:"text-gray-900",children:l.state})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pincode"}),a?(0,cs.jsx)("input",{type:"text",value:l.pincode,onChange:e=>d("pincode",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"}):(0,cs.jsx)("p",{className:"text-gray-900",children:l.pincode})]})]})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[(0,cs.jsx)(ad,{className:"w-5 h-5"}),"Emergency Contact"]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Contact Name"}),a?(0,cs.jsx)("input",{type:"text",value:l.emergencyContact,onChange:e=>d("emergencyContact",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"}):(0,cs.jsx)("p",{className:"text-gray-900",children:l.emergencyContact})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Contact Phone"}),a?(0,cs.jsx)("input",{type:"tel",value:l.emergencyPhone,onChange:e=>d("emergencyPhone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none"}):(0,cs.jsx)("p",{className:"text-gray-900",children:l.emergencyPhone})]})]})]})]}),(0,cs.jsxs)("div",{className:"space-y-6",children:[(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Profile Picture"}),(0,cs.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,cs.jsx)("div",{className:"w-24 h-24 bg-gradient-to-r from-pink-500 to-pink-600 rounded-full flex items-center justify-center",children:(0,cs.jsx)(Ts.A,{className:"w-12 h-12 text-white"})}),a&&(0,cs.jsxs)("button",{className:"flex items-center gap-2 text-sm text-pink-600 hover:text-pink-700",children:[(0,cs.jsx)(jh,{className:"w-4 h-4"}),"Change Photo"]})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,cs.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,cs.jsx)(Vs,{className:"w-5 h-5"}),"Preferences"]}),(0,cs.jsxs)("div",{className:"space-y-4",children:[(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:"Push Notifications"}),a?(0,cs.jsx)("input",{type:"checkbox",checked:l.preferences.notifications,onChange:e=>d("preferences.notifications",e.target.checked),className:"w-4 h-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500"}):(0,cs.jsx)("span",{className:"text-sm ".concat(l.preferences.notifications?"text-green-600":"text-gray-400"),children:l.preferences.notifications?"Enabled":"Disabled"})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:"Email Updates"}),a?(0,cs.jsx)("input",{type:"checkbox",checked:l.preferences.emailUpdates,onChange:e=>d("preferences.emailUpdates",e.target.checked),className:"w-4 h-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500"}):(0,cs.jsx)("span",{className:"text-sm ".concat(l.preferences.emailUpdates?"text-green-600":"text-gray-400"),children:l.preferences.emailUpdates?"Enabled":"Disabled"})]}),(0,cs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-700",children:"SMS Updates"}),a?(0,cs.jsx)("input",{type:"checkbox",checked:l.preferences.smsUpdates,onChange:e=>d("preferences.smsUpdates",e.target.checked),className:"w-4 h-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500"}):(0,cs.jsx)("span",{className:"text-sm ".concat(l.preferences.smsUpdates?"text-green-600":"text-gray-400"),children:l.preferences.smsUpdates?"Enabled":"Disabled"})]}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seat Preference"}),a?(0,cs.jsxs)("select",{value:l.preferences.seatPreference,onChange:e=>d("preferences.seatPreference",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none",children:[(0,cs.jsx)("option",{value:"Window",children:"Window"}),(0,cs.jsx)("option",{value:"Aisle",children:"Aisle"}),(0,cs.jsx)("option",{value:"No Preference",children:"No Preference"})]}):(0,cs.jsx)("p",{className:"text-gray-900",children:l.preferences.seatPreference})]})]})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,cs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,cs.jsxs)("div",{className:"space-y-3",children:[(0,cs.jsxs)("button",{className:"w-full flex items-center gap-3 p-3 text-left text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:[(0,cs.jsx)(Ps,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Privacy & Security"})]}),(0,cs.jsxs)("button",{className:"w-full flex items-center gap-3 p-3 text-left text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:[(0,cs.jsx)(yu,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Payment Methods"})]}),(0,cs.jsxs)("button",{className:"w-full flex items-center gap-3 p-3 text-left text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:[(0,cs.jsx)(oK,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Help & Support"})]}),(0,cs.jsxs)("button",{onClick:()=>{t(),s("/")},className:"w-full flex items-center gap-3 p-3 text-left text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[(0,cs.jsx)(zs,{className:"w-5 h-5"}),(0,cs.jsx)("span",{children:"Logout"})]})]})]})]})]})})]})},cK=(0,Ns.A)("arrow-down-wide-narrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]),dK=()=>{const e=te(),{user:t}=(0,Re.A)(),[s,a]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),[x,g]=(0,r.useState)("departure"),[f,y]=(0,r.useState)("asc"),[b,v]=(0,r.useState)({min:0,max:5e3}),[j,N]=(0,r.useState)("all");(0,r.useEffect)(()=>{if(w(),!m){const e=new Date;p(e.toISOString().split("T")[0])}},[]),(0,r.useEffect)(()=>{k()},[s,u,m,x,f,b,j]),(0,r.useEffect)(()=>{m&&w()},[m]);const w=async()=>{try{l(!0);const t=m?"/api/trips/all?date=".concat(m):"/api/trips/all",s=await(0,xs.nr)(t);var e;if(s.ok)a((null===(e=s.data.data)||void 0===e?void 0:e.trips)||s.data.trips||[]);else d("Failed to fetch trips")}catch(t){console.error("Error fetching trips:",t),d("Error fetching trips")}finally{l(!1)}},k=()=>{let e=[...s];u&&(e=e.filter(e=>{var t,s,r,a,n;const i="object"===typeof e.fromCity?(null===(t=e.fromCity)||void 0===t?void 0:t.city)||(null===(s=e.fromCity)||void 0===s?void 0:s.location)||"":e.fromCity||"",o="object"===typeof e.toCity?(null===(r=e.toCity)||void 0===r?void 0:r.city)||(null===(a=e.toCity)||void 0===a?void 0:a.location)||"":e.toCity||"";return(null===(n=e.routeName)||void 0===n?void 0:n.toLowerCase().includes(u.toLowerCase()))||i.toLowerCase().includes(u.toLowerCase())||o.toLowerCase().includes(u.toLowerCase())})),e=e.filter(e=>e.fare>=b.min&&e.fare<=b.max),"all"!==j&&(e=e.filter(e=>{var t;return null===(t=e.busType)||void 0===t?void 0:t.toLowerCase().includes(j.toLowerCase())})),e.sort((e,t)=>{let s,r;switch(x){case"price":s=e.fare,r=t.fare;break;case"duration":s=A(e.startTime,e.endTime),r=A(t.startTime,t.endTime);break;default:s=e.startTime,r=t.startTime}return"asc"===f?s>r?1:-1:s<r?1:-1}),i(e)},A=(e,t)=>{const s=new Date("2000-01-01T".concat(e));return(new Date("2000-01-01T".concat(t))-s)/6e4},S=(e,t)=>{const s=A(e,t),r=Math.floor(s/60),a=Math.floor(s%60);return"".concat(r,"h ").concat(a,"m")},C=e=>{switch(e.toLowerCase()){case"wifi":return(0,cs.jsx)(Rd,{className:"w-4 h-4"});case"charging":return(0,cs.jsx)(pd,{className:"w-4 h-4"});case"refreshments":return(0,cs.jsx)(Hd,{className:"w-4 h-4"});case"wheelchair":return(0,cs.jsx)(sh,{className:"w-4 h-4"});case"entertainment":return(0,cs.jsx)(th,{className:"w-4 h-4"});case"safety":return(0,cs.jsx)(Ps,{className:"w-4 h-4"});default:return(0,cs.jsx)(rd.A,{className:"w-4 h-4"})}},_=()=>{h(""),p(""),v({min:0,max:5e3}),N("all"),g("departure"),y("asc")};return o?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-pink-600 mx-auto mb-4"}),(0,cs.jsx)("p",{className:"text-gray-600 text-lg",children:"Loading available trips..."})]})}):c?(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,cs.jsxs)("div",{className:"text-center",children:[(0,cs.jsx)("div",{className:"text-red-600 text-lg mb-4",children:c}),(0,cs.jsx)("button",{onClick:w,className:"bg-pink-600 text-white px-6 py-2 rounded-lg hover:bg-pink-700",children:"Try Again"})]})}):(0,cs.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,cs.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,cs.jsxs)("div",{className:"mb-8",children:[(0,cs.jsxs)("button",{onClick:()=>e("/passenger/dashboard"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-4",children:[(0,cs.jsx)(Su,{className:"w-4 h-4"}),"Back to Dashboard"]}),(0,cs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Available Trips"}),(0,cs.jsx)("p",{className:"text-gray-600 mt-2",children:m?"Scheduled trips for ".concat(new Date(m).toDateString()):"Discover all scheduled trips across Kerala"})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:[(0,cs.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Quick Date Selection"}),(0,cs.jsx)("div",{className:"flex flex-wrap gap-2",children:(()=>{const e=[],t=new Date;for(let s=0;s<7;s++){const r=new Date(t);r.setDate(t.getDate()+s),e.push({date:r.toISOString().split("T")[0],label:0===s?"Today":1===s?"Tomorrow":r.toDateString()})}return e})().map(e=>{let{date:t,label:s}=e;return(0,cs.jsx)("button",{onClick:()=>p(t),className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat(m===t?"bg-pink-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:s},t)})})]}),(0,cs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(ys.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,cs.jsx)("input",{type:"text",placeholder:"Search routes or cities...",value:u,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent text-sm"})]}),(0,cs.jsxs)("div",{className:"relative",children:[(0,cs.jsx)(fs.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,cs.jsx)("input",{type:"date",value:m,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent text-sm"})]}),(0,cs.jsxs)("select",{value:j,onChange:e=>N(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent text-sm",children:[(0,cs.jsx)("option",{value:"all",children:"All Bus Types"}),(0,cs.jsx)("option",{value:"ac",children:"AC Buses"}),(0,cs.jsx)("option",{value:"sleeper",children:"Sleeper"}),(0,cs.jsx)("option",{value:"semi-sleeper",children:"Semi Sleeper"}),(0,cs.jsx)("option",{value:"seater",children:"Seater"})]}),(0,cs.jsxs)("div",{className:"flex gap-2",children:[(0,cs.jsxs)("select",{value:x,onChange:e=>g(e.target.value),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent text-sm",children:[(0,cs.jsx)("option",{value:"departure",children:"Sort by Departure"}),(0,cs.jsx)("option",{value:"price",children:"Sort by Price"}),(0,cs.jsx)("option",{value:"duration",children:"Sort by Duration"})]}),(0,cs.jsx)("button",{onClick:()=>y("asc"===f?"desc":"asc"),className:"px-3 py-3 border border-gray-300 rounded-lg hover:bg-gray-50",children:"asc"===f?(0,cs.jsx)(JV,{className:"w-4 h-4"}):(0,cs.jsx)(cK,{className:"w-4 h-4"})})]})]}),(0,cs.jsxs)("div",{className:"mb-4",children:[(0,cs.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Price Range: \u20b9",b.min," - \u20b9",b.max]}),(0,cs.jsxs)("div",{className:"flex gap-4",children:[(0,cs.jsx)("input",{type:"range",min:"0",max:"5000",value:b.min,onChange:e=>v(t=>(0,Ie.A)((0,Ie.A)({},t),{},{min:parseInt(e.target.value)})),className:"flex-1"}),(0,cs.jsx)("input",{type:"range",min:"0",max:"5000",value:b.max,onChange:e=>v(t=>(0,Ie.A)((0,Ie.A)({},t),{},{max:parseInt(e.target.value)})),className:"flex-1"})]})]}),(0,cs.jsxs)("div",{className:"flex justify-between items-center",children:[(0,cs.jsxs)("span",{className:"text-sm text-gray-600",children:["Showing ",n.length," of ",s.length," trips"]}),(0,cs.jsx)("button",{onClick:_,className:"text-sm text-pink-600 hover:text-pink-700 font-medium",children:"Reset Filters"})]})]}),n.length>0?(0,cs.jsx)("div",{className:"space-y-6",children:n.map(s=>{var r,a,n,i;return(0,cs.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[(0,cs.jsx)("div",{className:"p-6",children:(0,cs.jsxs)("div",{className:"flex items-start justify-between",children:[(0,cs.jsxs)("div",{className:"flex-1",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,cs.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-pink-100 to-pink-200 rounded-lg flex items-center justify-center",children:(0,cs.jsx)(ks.A,{className:"w-6 h-6 text-pink-600"})}),(0,cs.jsxs)("div",{children:[(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:s.routeName}),(0,cs.jsxs)("p",{className:"text-gray-600",children:["object"===typeof s.fromCity?(null===(r=s.fromCity)||void 0===r?void 0:r.city)||(null===(a=s.fromCity)||void 0===a?void 0:a.location)||"Unknown":s.fromCity," \u2192","object"===typeof s.toCity?(null===(n=s.toCity)||void 0===n?void 0:n.city)||(null===(i=s.toCity)||void 0===i?void 0:i.location)||"Unknown":s.toCity]})]})]}),(0,cs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,cs.jsx)(sd.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:[s.startTime," - ",s.endTime]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,cs.jsx)(gs.A,{className:"w-4 h-4"}),(0,cs.jsx)("span",{children:S(s.startTime,s.endTime)})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,cs.jsx)(Ss.A,{className:"w-4 h-4"}),(0,cs.jsxs)("span",{children:[s.availableSeats||"N/A"," seats available"]})]})]}),s.amenities&&s.amenities.length>0&&(0,cs.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,cs.jsx)("span",{className:"text-sm text-gray-600",children:"Amenities:"}),(0,cs.jsx)("div",{className:"flex gap-2",children:s.amenities.map((e,t)=>(0,cs.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[C(e),(0,cs.jsx)("span",{children:e})]},t))})]}),(0,cs.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,cs.jsxs)("p",{children:["Bus Type: ",s.busType||"AC Sleeper"]}),(0,cs.jsxs)("p",{children:["Operator: ",s.operator||"Kerala State Transport"]}),(0,cs.jsxs)("p",{children:["Date: ",s.date?new Date(s.date).toDateString():"N/A"]})]})]}),(0,cs.jsxs)("div",{className:"flex flex-col items-end gap-4",children:[(0,cs.jsxs)("div",{className:"text-right",children:[(0,cs.jsxs)("div",{className:"text-3xl font-bold text-pink-600",children:["\u20b9",s.fare]}),(0,cs.jsx)("div",{className:"text-sm text-gray-500",children:"per seat"})]}),(0,cs.jsxs)("button",{onClick:()=>(s=>{t?e("/passenger/boarddrop/".concat(s._id),{state:{trip:s}}):e("/login?next=/passenger/boarddrop/".concat(s._id))})(s),className:"bg-gradient-to-r from-pink-600 to-pink-700 hover:from-pink-700 hover:to-pink-800 text-white px-8 py-3 rounded-lg font-semibold transition-all duration-200 flex items-center gap-2 shadow-lg",children:[(0,cs.jsx)(xd,{className:"w-5 h-5"}),"Book Now"]})]})]})}),(0,cs.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:(0,cs.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,cs.jsxs)("div",{className:"flex items-center gap-4",children:[(0,cs.jsxs)("span",{children:["Distance: ",s.distanceKm||"N/A"," km"]}),(0,cs.jsxs)("span",{children:["Capacity: ",s.capacity||"N/A"]})]}),(0,cs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,cs.jsx)(rd.A,{className:"w-4 h-4 text-yellow-500 fill-current"}),(0,cs.jsxs)("span",{children:[s.rating||"4.5"," (",s.totalRatings||"128"," reviews)"]})]})]})})]},s._id)})}):(0,cs.jsxs)("div",{className:"text-center py-12",children:[(0,cs.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,cs.jsx)(ks.A,{className:"w-12 h-12 text-gray-400"})}),(0,cs.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No trips found"}),(0,cs.jsx)("p",{className:"text-gray-600 mb-6",children:"No trips match your current search criteria."}),(0,cs.jsx)("button",{onClick:_,className:"bg-pink-600 text-white px-6 py-3 rounded-lg hover:bg-pink-700 transition-colors",children:"Clear Filters"})]})]})})};const uK=function(){return(0,r.useEffect)(()=>{(0,hs.Qm)()},[]),(0,cs.jsxs)(cs.Fragment,{children:[(0,cs.jsx)(us,{children:(0,cs.jsx)(Re.O,{children:(0,cs.jsx)(Ce,{children:(0,cs.jsxs)(ve,{children:[(0,cs.jsx)(ye,{path:"/",element:(0,cs.jsx)(Vd,{})}),(0,cs.jsx)(ye,{path:"/search-results",element:(0,cs.jsx)(Yd,{})}),(0,cs.jsx)(ye,{path:"/trip-search",element:(0,cs.jsx)(Wd,{})}),(0,cs.jsx)(ye,{path:"/login",element:(0,cs.jsx)(du,{initialMode:"login"})}),(0,cs.jsx)(ye,{path:"/signup",element:(0,cs.jsx)(du,{initialMode:"signup"})}),(0,cs.jsx)(ye,{path:"/oauth/callback",element:(0,cs.jsx)(uu,{})}),(0,cs.jsx)(ye,{path:"/reset-password",element:(0,cs.jsx)(hu,{})}),(0,cs.jsx)(ye,{path:"/profile",element:(0,cs.jsx)(ps,{children:(0,cs.jsx)(vs,{children:(0,cs.jsx)(mu,{})})})}),(0,cs.jsx)(ye,{path:"/wallet",element:(0,cs.jsx)(ps,{children:(0,cs.jsx)(vs,{children:(0,cs.jsx)(ku,{})})})}),(0,cs.jsx)(ye,{path:"/trip-planner",element:(0,cs.jsx)(ps,{children:(0,cs.jsx)(vs,{children:(0,cs.jsx)(Au,{})})})}),(0,cs.jsx)(ye,{path:"/booking",element:(0,cs.jsx)(ps,{children:(0,cs.jsx)(vs,{children:(0,cs.jsx)(Pu,{})})})}),(0,cs.jsx)(ye,{path:"/kerala-routes",element:(0,cs.jsx)(ps,{children:(0,cs.jsx)(vs,{children:(0,cs.jsx)(rh,{})})})}),(0,cs.jsx)(ye,{path:"/redbus",element:(0,cs.jsx)(ah,{})}),(0,cs.jsx)(ye,{path:"/redbus-results",element:(0,cs.jsx)(ih,{})}),(0,cs.jsx)(ye,{path:"/redbus/board-drop/:tripId",element:(0,cs.jsx)(oh,{})}),(0,cs.jsx)(ye,{path:"/redbus/seats/:tripId",element:(0,cs.jsx)(lh,{})}),(0,cs.jsx)(ye,{path:"/redbus/passenger-details/:tripId",element:(0,cs.jsx)(uh,{})}),(0,cs.jsx)(ye,{path:"/redbus/payment",element:(0,cs.jsx)(hh,{})}),(0,cs.jsx)(ye,{path:"/redbus/ticket/:pnr",element:(0,cs.jsx)(mh,{})}),(0,cs.jsx)(ye,{path:"/ticket",element:(0,cs.jsx)(ps,{children:(0,cs.jsx)(vs,{children:(0,cs.jsx)(Zu,{})})})}),(0,cs.jsx)(ye,{path:"/pax/ticket/:pnr",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(vs,{children:(0,cs.jsx)(Zu,{})})})}),(0,cs.jsx)(ye,{path:"/dashboard",element:(0,cs.jsx)(ps,{children:(0,cs.jsx)(_V,{})})}),(0,cs.jsx)(ye,{path:"/conductor",element:(0,cs.jsx)(ps,{roles:["conductor"],children:(0,cs.jsx)(Nh,{})})}),(0,cs.jsx)(ye,{path:"/driver",element:(0,cs.jsx)(ps,{roles:["driver"],children:(0,cs.jsx)(kh,{})})}),(0,cs.jsx)(ye,{path:"/depot",element:(0,cs.jsx)(ps,{roles:["depot_manager"],children:(0,cs.jsx)(Ih,{})})}),(0,cs.jsx)(ye,{path:"/depot/dashboard",element:(0,cs.jsx)(ps,{roles:["depot_manager"],children:(0,cs.jsx)(Ih,{})})}),(0,cs.jsx)(ye,{path:"/depot/trips",element:(0,cs.jsx)(ps,{roles:["depot_manager"],children:(0,cs.jsx)(Ih,{})})}),(0,cs.jsx)(ye,{path:"/depot/trip-management",element:(0,cs.jsx)(ps,{roles:["depot_manager"],children:(0,cs.jsx)(Ih,{})})}),(0,cs.jsx)(ye,{path:"/depot/fleet-management",element:(0,cs.jsx)(ps,{roles:["depot_manager"],children:(0,cs.jsx)(Ih,{})})}),(0,cs.jsx)(ye,{path:"/depot/route-management",element:(0,cs.jsx)(ps,{roles:["depot_manager"],children:(0,cs.jsx)(Ih,{})})}),(0,cs.jsx)(ye,{path:"/depot/booking-management",element:(0,cs.jsx)(ps,{roles:["depot_manager"],children:(0,cs.jsx)(Ih,{})})}),(0,cs.jsx)(ye,{path:"/depot/staff-management",element:(0,cs.jsx)(ps,{roles:["depot_manager"],children:(0,cs.jsx)(Ih,{})})}),(0,cs.jsx)(ye,{path:"/depot/bus-scheduling",element:(0,cs.jsx)(ps,{roles:["depot_manager"],children:(0,cs.jsx)(Ih,{})})}),(0,cs.jsx)(ye,{path:"/depot/reports-analytics",element:(0,cs.jsx)(ps,{roles:["depot_manager"],children:(0,cs.jsx)(Ih,{})})}),(0,cs.jsx)(ye,{path:"/pax",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(KV,{})})})}),(0,cs.jsx)(ye,{path:"/pax/dashboard",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(KV,{})})})}),(0,cs.jsx)(ye,{path:"/pax/booking",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(HV,{})})})}),(0,cs.jsx)(ye,{path:"/pax/search",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(HV,{})})})}),(0,cs.jsx)(ye,{path:"/pax/results",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(qV,{})})})}),(0,cs.jsx)(ye,{path:"/pax/booking/:tripId",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(HV,{})})})}),(0,cs.jsx)(ye,{path:"/pax/board-drop/:tripId",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(eK,{})})})}),(0,cs.jsx)(ye,{path:"/pax/passenger-details/:tripId",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(eh,{})})})}),(0,cs.jsx)(ye,{path:"/pax/seats/:tripId",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(tK,{})})})}),(0,cs.jsx)(ye,{path:"/passenger/dashboard",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(KV,{})})})}),(0,cs.jsx)(ye,{path:"/passenger/booking",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(WV,{})})})}),(0,cs.jsx)(ye,{path:"/passenger/search",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(WV,{})})})}),(0,cs.jsx)(ye,{path:"/passenger/results",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(qV,{})})})}),(0,cs.jsx)(ye,{path:"/passenger/available-trips",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(dK,{})})})}),(0,cs.jsx)(ye,{path:"/passenger/boarddrop/:tripId",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(eK,{})})})}),(0,cs.jsx)(ye,{path:"/passenger/seats/:tripId",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(tK,{})})})}),(0,cs.jsx)(ye,{path:"/passenger/booking/:tripId",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(HV,{})})})}),(0,cs.jsx)(ye,{path:"/passenger/ticket/:pnr",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(sK,{})})})}),(0,cs.jsx)(ye,{path:"/passenger/enhanced-results",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(QV,{})})})}),(0,cs.jsx)(ye,{path:"/passenger/board-drop",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(eK,{})})})}),(0,cs.jsx)(ye,{path:"/passenger/tickets",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(rK,{})})})}),(0,cs.jsx)(ye,{path:"/passenger/wallet",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(aK,{})})})}),(0,cs.jsx)(ye,{path:"/passenger/recommendations",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(iK,{})})})}),(0,cs.jsx)(ye,{path:"/passenger/profile",element:(0,cs.jsx)(ps,{roles:["passenger"],children:(0,cs.jsx)(BV,{children:(0,cs.jsx)(lK,{})})})}),(0,cs.jsx)(ye,{path:"/admin",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(zh,{})})})}),(0,cs.jsx)(ye,{path:"/admin/config",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(Vh,{})})})}),(0,cs.jsx)(ye,{path:"/admin/fare-policy",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(Hh,{})})})}),(0,cs.jsx)(ye,{path:"/admin/users",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(Yh,{})})})}),(0,cs.jsx)(ye,{path:"/admin/depots",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(Qh,{})})})}),(0,cs.jsx)(ye,{path:"/admin/routes",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(Xh,{})})})}),(0,cs.jsx)(ye,{path:"/admin/routes-management",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(am,{})})})}),(0,cs.jsx)(ye,{path:"/admin/mass-scheduling",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(TV,{})})})}),(0,cs.jsx)(ye,{path:"/admin/streamlined-buses",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(EV,{})})})}),(0,cs.jsx)(ye,{path:"/admin/streamlined-routes",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(OV,{})})})}),(0,cs.jsx)(ye,{path:"/admin/streamlined-trips",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(IV,{})})})}),(0,cs.jsx)(ye,{path:"/admin/depot-management",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(gm,{})})})}),(0,cs.jsx)(ye,{path:"/admin/stops",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(fm,{})})})}),(0,cs.jsx)(ye,{path:"/admin/trips",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(vm,{})})})}),(0,cs.jsx)(ye,{path:"/admin/bookings",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(jm,{})})})}),(0,cs.jsx)(ye,{path:"/admin/duties",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(Nm,{})})})}),(0,cs.jsx)(ye,{path:"/admin/drivers",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(Cm,{})})})}),(0,cs.jsx)(ye,{path:"/admin/passengers",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(_m,{})})})}),(0,cs.jsx)(ye,{path:"/admin/buses",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(dV,{})})})}),(0,cs.jsx)(ye,{path:"/admin/buses/modern",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(dV,{})})})}),(0,cs.jsx)(ye,{path:"/admin/buses/enhanced",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(VM,{})})})}),(0,cs.jsx)(ye,{path:"/admin/buses/legacy",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(Um,{})})})}),(0,cs.jsx)(ye,{path:"/admin/conductors",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(uV,{})})})}),(0,cs.jsx)(ye,{path:"/admin/depot-managers",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(hV,{})})})}),(0,cs.jsx)(ye,{path:"/admin/timetable",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(jV,{})})})}),(0,cs.jsx)(ye,{path:"/admin/reservations",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(NV,{})})})}),(0,cs.jsx)(ye,{path:"/admin/complaints",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(wV,{})})})}),(0,cs.jsx)(ye,{path:"/admin/conflicts",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(kV,{})})})}),(0,cs.jsx)(ye,{path:"/admin/upcoming-payments",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(AV,{})})})}),(0,cs.jsx)(ye,{path:"/admin/payment-history",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(SV,{})})})}),(0,cs.jsx)(ye,{path:"/admin/revenue",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(CV,{})})})}),(0,cs.jsx)(ye,{path:"/admin/system-status",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(Im,{})})})}),(0,cs.jsx)(ye,{path:"/admin/rbac",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(fV,{})})})}),(0,cs.jsx)(ye,{path:"/admin/reports",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(bV,{})})})}),(0,cs.jsx)(ye,{path:"/admin/settings",element:(0,cs.jsx)(ps,{roles:["admin"],children:(0,cs.jsx)(Ks,{children:(0,cs.jsx)(vV,{})})})})]})})})}),(0,cs.jsx)(Oe.l$,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,style:{background:"#059669",color:"#fff"}},error:{duration:5e3,style:{background:"#dc2626",color:"#fff"}}}})]})};if("undefined"!==typeof window&&"ResizeObserver"in window){const e=window.ResizeObserver;window.ResizeObserver=class extends e{constructor(e){super((t,s)=>{requestAnimationFrame(()=>{try{e(t,s)}catch(r){const e=r&&r.message?String(r.message):"";if(e.includes("ResizeObserver loop completed with undelivered notifications")||e.includes("ResizeObserver loop limit exceeded"))return;throw r}})})}}}window.addEventListener("error",e=>{(e=>{const t=(null===e||void 0===e?void 0:e.message)||"";var s,r;!("string"!==typeof t||!t.includes("ResizeObserver loop completed with undelivered notifications")&&!t.includes("ResizeObserver loop limit exceeded"))&&(null===(s=e.preventDefault)||void 0===s||s.call(e),null===(r=e.stopImmediatePropagation)||void 0===r||r.call(e))})(e)}),window.addEventListener("unhandledrejection",e=>{var t;const s=(null===e||void 0===e||null===(t=e.reason)||void 0===t?void 0:t.message)||"";var r;"string"===typeof s&&(s.includes("ResizeObserver loop completed with undelivered notifications")||s.includes("ResizeObserver loop limit exceeded"))&&(null===(r=e.preventDefault)||void 0===r||r.call(e))});n.createRoot(document.getElementById("root")).render((0,cs.jsx)(r.StrictMode,{children:(0,cs.jsx)(uK,{})}))})()})();
//# sourceMappingURL=main.428f708b.js.map